タイムチャートがほしいなあ。（無くても作れないことはありませんが、あれば矛盾点を容易に確認できる） …身近な計装士免許を持っている人に作ってもらうことを勧めてみる… （たぶん同じことを言われると思う） 自分で考えて作るなら、基本回路を拡張しながら作ることを勧めます。 スイッチ１つ、リレー１つの自己保持回路からです。 そこにリセットするための回路を加えて…。 と作り込むのです。
> CodeAcademyでRubyの基本の基本は一通り勉強しました > プログラミングは全くやったことはありません。 とのことですので、アルゴリズムを組み立てる勉強もした方が良いよという意味で↓をお勧めします。 「プログラマ脳を鍛える数学パズル」 https://www.amazon.co.jp/%E3%83%97%E3%83%AD%E3%8 … 解答は、Ruby（と一部JavaScript）で書かれていますので勉強になると思います。
> 手順６なのですが1で作ったcount変数は0まで減ったら > 5ではなく手順6でcountに20を入れてもう一回繰り返す > ということですか？ そうです。 2個目以降はcountが20→0になる毎に生成されます。
多バイト系の文字が使えるのは言語規格ではなくコンパイラが勝手に拡張した部分だから互換性や移植性については保証できない部分。 さらに言えばコンパイラやデバッガも全ての多バイト系文字を使用するような場合についてデバッグをしているとは思えない。 このあたりは自分で痛い目に遭わないと判らないだろうけど。
>>> python = "python" >>> python[5] 'n' >>> python[6] Traceback (most recent call last): File "<stdin>", line 1, in <module> IndexError: string index out of range ということで、python[6]はエラーになります。 あなたの思い違いです。
>ERROR: Loading command: install (LoadError) >cannot load such file -- openssl 以下のサイトによれば http://itmemo.net-luck.com/linux-centos-rails-in … opensslがないためにこのエラーが発生しているようなことがかいてありますね。 openssl-develとzlibもさらに必要になるかもしれませんが・・・・ OSがcentosの話なので、参考程度ですが・・・ 私もCygwinの環境は持っていないので、この回答は正確な情報ではありません、ごめんなさい。
windows10 Ruby-2.2.5(sqlite3がruby2.3系に未対応のようなので） で試しました。 > ⇒ Booting Puma > ⇒ Rails 5.0.0 application starting in development on http://localhost:3000/ …… > * Listening on tcp://localhost:3000 > Use Ctrl-C to stop 全く同じメッセージが表示され、http://localhost:3000/にアクセスで 問題なく表示されました。 " Yay! You’re on Rails! " " Rails version: 5.0.0 " " Ruby version: 2.2.5 (x64-mingw32)"" という絵付きのページが表示されます。 ブラウザは ・chrome ・firefox ・Microsoft Edeg いずれも問題ありません。 > [詳細設定] で TLS 1.0、TLS 1.1、TLS 1.2 を有効にして、もう一度 https://localhost:3000 に接続してみてください。引き続きエラーが発生する場合は、サポートされていないプロトコル、または安全と見なされない RC4 などの暗号スイート ((詳細情報のリンク)) がサイトで使われている可能性があります。サイトの管理者に問い合わせてください ブラウザ側、セキュリティソフト等の設定の問題ではないでしょうか？
> 私の環境のruby2.2.4p230[x64-mingw32]で試してみたところ、 > やはりボタンが押し下がったままでハングアップしてしまいます。 RubyInstaller(http://rubyinstaller.org/downloads/ )のrubyinstaller-2.2.4-x64.exeをインストール（tkは同梱のものを使用）してみましたが、No.2の方法で動作します。 myProcessingの内容は0～9999を標準出力（コマンドプロンプト）に表示させる単純なものです。 ・使用しているrubyの出自が異なる場合は上記のもので試す。 ・myProcessingを単純なものに変更して動作確認してみる。 など、試してみては如何でしょうか？
Personの全インスタンスを管理しているのは誰ですか？ 　そこが行えばよい（そこがPersonの一覧を取得するメソッドを持てばよい）と思います。 参考まで。
もしかしてruby 2.3.xを使用していませんか？ > cannot load such file -- ffi_c (LoadError) changenotifyのインストール時に一緒にffiというgemがインストールされるのですが そこに含まれるffi_c.soが無いといっています。 こちらの環境（ruby 2.2.3）でffiのインストール先をみると2.3系のライブラリフォルダが存在していませんでした、おそらくまだruby2.3系に対応していないのだと思います。
「/export/cgi」がなければ その下に「wp/wp-content/uploads/2016/06/」はないので /hogehogoge/hugahuga/wp/wp-content/uploads/2016/06/ と言った感じなのでしょうか。 根本的な解決ではないのですが 「/export/cgi/wp/wp-content/uploads/2016/06/」というディレクトリ（フォルダ）を作って、そこに写真をアップするとエラー文は消えると思います。 ですが、まだサイトを公開していないなら、初期化して（DBの内容も消して）やり直したほうが後々面倒なことにならないと思います。 ※ワードプレスは少しやったのことが有るのですが力不足でした。すみません。
あまりに漠然として適切な回答がつきにくいと思います。 最低限、使用OS、Rubyのバージョンを明示。 "Ruby GUI"で検索すればいくつかのGUIライブラリがみつかると思いますので、ご自身の開発環境を考慮した上でどれかを選択して下さい。 更に"Ruby 「ライブラリ名」 入門"で入門用の解説もみつかると思います。
[技術者向] コンピューター >プログラミング >Ruby アナタが決めることです。
１３－８＝５ ５時間です。それくらい自分でした方が早いです。
No.1 & 2です。 > 説明不足でした、_が2つ入っているファイルもあります。 > 2つ入っているとリネームされないみたいです。 こちらでは動作しています。（windows10 64bit) aaa_bbb.txt → aaa.txt ccc_ddd_eee.txt → ccc.txt 具体的にどのようなファイル名でしょうか？ ただNo.3さんの回答の方がシンプルで良いと思います。 行中の「echo」を削除してみてください。
37行目の最後にカンマがありません。 39行目にカンマがあるのもおかしいような……
> 配列の名前aryですが、どのようなサイズ・次元かを予め指定する必要はないのでしょうか。 >rubyではその必要はないのでしょうか。Cなどもそうでしょうか。 いわゆるスクリプト言語といわれるもの（動的言語）は必要ありません（ruby, python, perlなど） C,Javaなど静的言語は宣言が必要です（動的メモリ管理もできると思いますが要素数がきまっているなら無駄なことはやらないと思います） このあたりは、各言語の入門サイトなどで文法を確認されるのが良いかと。 No.2回答欄の内容でrubyの3次元プログラムを書いてみました。 ※rubyでは多次元配列は無いので、配列の配列の配列という構造になります。 ※2次元の場合は、NZのループを削除してください。 ※配列の添え字は1ではなく0から始まります。 ※ソース行頭は段付けの為、全角スペースになっています。 ---sample.csv--- 22.4, 23.5, 23.1, 22.3 22.1, 24.5, 23.3, 26.7 21.2, 24.2, 22.1, 24.1 12.4, 13.5, 13.1, 12.3 12.1, 14.5, 13.3, 16.7 11.2, 14.2, 12.1, 14.1 2.4, 3.5, 3.1, 2.3 2.1, 4.5, 3.3, 6.7 1.2, 4.2, 2.1, 4.1 ---------------- ---test.rb--- NZ = 3 NY = 3 NX = 4 a3 = Array.new # 3次元用配列作成 # 読み込み File.open("sample.csv") do |f| 　NZ.times.each do # NZ回ループ 　　a2 = Array.new # 2次元用配列作成 　　(NY-1).downto(0).each do |j| # j = NY-1,NY-2,…,1,0でループ 　　　f.gets.chomp.split(/\s*,\s*/).each_with_index do |elm, i| #　　　　　　　　　　　　　　　　　　　 #　elm = ファイルから読み込んだ #　　　　　　　　　　　　　　　　　　　 #　　　　1行中のカンマ区切りの各要素 　　　　a2[i] = Array.new if a2[i].nil? #　a2[i]が空なら1次元配列を代入 　　　　a2[i][j] = elm.strip.to_f #　　　　elmからスペースを削除し数値化して代入 　　　end 　　end 　　a3.unshift(a2) # a2をa3の先頭の要素として挿入 　end end # 表示 p a3 #[[[1.2, 2.1, 2.4], #　[4.2, 4.5, 3.5], #　[2.1, 3.3, 3.1], #　[4.1, 6.7, 2.3]], # [[11.2, 12.1, 12.4], #　[14.2, 14.5, 13.5], #　[12.1, 13.3, 13.1], #　[14.1, 16.7, 12.3]], # [[21.2, 22.1, 22.4], #　[24.2, 24.5, 23.5], #　[22.1, 23.3, 23.1], #　[24.1, 26.7, 22.3]]] puts puts "a3[0][3][1] = #{a3[0][3][1]}"#　a3[0][3][1] = 6.7 puts "a3[1][3][1] = #{a3[1][3][1]}"#　a3[1][3][1] = 16.7 puts "a3[2][3][1] = #{a3[2][3][1]}"#　a3[2][3][1] = 26.7 # 書き込み File.open("sample2.csv","w") do |f| # 書き込みファイルオープン 　(NZ-1).downto(0).each do |k| #　　　k= NZ-1,NZ-2,…,1,0 でループ 　　(NY-1).downto(0).each do |j| #　　j= NY-1,NY-2,…,1,0 でループ 　　　line = Array.new 　　　NX.times.each do |i| #　　　　　i = 0,1,…,NX-2,NX-1 でループ 　　　　line.push(a3[k][i][j].to_s)#　a3の要素を文字列にして配列lineに追加 　　　end 　　　f.puts line.join(', ')#　　　　 lineの要素をカンマで繋げた1行にして出力 　　end 　end end -------------
#4です。 fork & execが定番のやり方になります。 以下のようなスクリプトを作ってください。 ファイル名：test_fork.rb -------------------------------- def start_proc(ruby_script) pid = fork do exec("/usr/bin/ruby" + " " + ruby_script) end end print "main start\n" start_proc("test1.rb") start_proc("test2.rb") print "main end\n" ----------------------------------- start_procはruby_scriptを引数として、そのスクリプトをバックグラウンドで起動します。 （そのスクリプトの終了を待ちません） テスト用に以下の２つのスクリプトを起動しますので、以下のスクリプトも作成してください。 ファイル名：test1.rb ------------------------------ print "test1.rb start\n" sleep(10) print "test1.rb end\n" ------------------------------- ファイル名：test2.rb ----------------------------- print "test2.rb start\n" sleep(5) print "test2.rb end\n" ------------------------------- ruby test_fork.rb を実行します。 実行結果は以下のようになります。 ------------------------------------- main start main end test1.rb start test2.rb start test2.rb end test1.rb end ------------------------- test_fork.rbはテスト用スクリプトを起動後、直ちに停止しています。 尚、今回、start_proc("test1.rb")はフルパスでパス名を指定していません。（手抜きです。） 実際に運用される場合は、start_proc("/aaa/bbb/test1.rb")のようにフルパスで指定してください。 当方の環境は以下の通りです。 centos 6.5 ruby 1.9.3p551
Clear the cache on your browser or use browser on other PC.
No.1です。 私の環境では、↓でエラーにはご提示のエラーにはなりませんでした。 [1,2,3,4].each do |x; y| y = x + 1 puts x puts y end なるほどセミコロンで区切る書き方もあるのですね、勉強になりました。 でも、でも一々宣言しなくても↓の様に書けるので今一つ目的がよくわからないです。 [1,2,3,4].each do |x| y = x + 1 puts x puts y end
難読度は下がりますが、 convert-kigou.rbの最終行を以下に変更すれば良いかもしれません。 puts"->&_{_}[&:\"\#{#{_"method"}}\"][Object,:\"\#{#{_"eval"}}\"][#{_([*$<]*"")}]" 休み中の、良い頭の体操になりました。
>puts "名前"だと >C:/Users/�r���z�C/Desktop/Programing/Ruby/hello.rb:9: invalid multibyte char (UTF-8) >とでてきます この補足をみると、 encodingがUTF-8で、ソースをかいているのがShift-JISコードのように見えます。 あなたが、使用されていつエディタでは、どの文字コードで書いているかが判りますでしょうか。 もし、わかるなら、文字コードをUTF-8で保存するようにすれば、解決します。 もし、文字コードがわからなければ、Shift-JISコードの可能性が高いので、 hello.rbの先頭行に # encoding: WINDOWS-31J を追加してください。（必ず先頭行に記述してください。他の行では効果がありません） そうすれば、但し結果が得られます。
> ダブルクリックでなくともそうなりました、、、 とは、具体的にどんなことを言っていますか? 右クリックでメニューを出す→開く とかでも、動作はダブルクリックと同じです。(通常は)
コマンドプロンプト上で、 現在の場所が C:\User\--- ですが そこに、hello.rb が無いです。 hello.rbを保存したフォルダ（ディレクトリ）にCDコマンドで移動してください。 hello.rb が、C:\aaa\bbb\cccフォルダにある場合 cd C:\aaa\bbb\ccc と入力して下さい。 　（注: cdの次にスペースがあります）
iOSアプリは基本的にC/C++言語やObjective-Cもしくは、新しい言語Swiftで構築されています。 ゲームなどのように複雑な機能をもつものはほぼ上記の言語で作られているでしょう。 ただ、もっと簡単といいますか、見栄えがWebアプリと変わらないアプリは その土台をRuby on Railsなどのフレームワークで作成することができます。 あらためてRuby on Railsを説明すると、 これは主にwebアプリを構築する言語Rubyのフレームワークです。 他にはPHPのフレームワークCakePHPなども有名で、 サーバ（Linux）側で動き、Webブラウザで表示させるアプリを構築できます。 （教えて!gooもWebアプリの部類ですね） ### さてよくあるそれらWebのフレームワークを利用したiOSアプリの構築手順は以下のようになります。 ・サーバを準備しWebアプリを構築する。 ・そのWebアプリをiOSのWebKitで表示させる。 WebKitはWebを表示できる機能を持つもので iOS上ではWebアプリなのか、それとも純粋にObjective-CやSwiftで作ったものなのかは 一見区別が付きません。 ### きっと、これから作成しようとするアプリはサーバ上にデータベースを準備し、 それを表示させる仕組みを持つアプリなのでしょう。 レイアウト等の構築を考えるとRuby on Railsのようなフレームワークを利用したほうが 作業工程は速いですし、メンテナンス等も行いやすいのは確かです。 不具合があっても、アプリのコードを書き換え再度アップルに申請せずに サーバ側で変更することができますから。
前後の文脈から考えても、「僕（ジュリアンという男の子）が眠るまで見てて。」という意味だと思います。 類似の表現で、この映画では、10歳の男の子ジュリアンに、以下のように言うセリフがあります。 Julian : All we have to do is wait until they are in a deep sleep...　→俺たちは、彼ら（こども等）が、すっかり眠るまで、ここに居なければならない。と。 そのすぐ後に、これが人生（This is the life.）。それが、ここ（That's the spot）と言っているようですね。
バージョン依存の物は、元から$:に組み込まれているので、RUBYLIBの設定はそのままで良いのではないでしょうか？ まあ、設定している物に依るでしょうけど、どんな物を設定しているのでしょうか？
Rubyの参考書から始めたほうが 結局はRailsの理解度も早いと思います。 いきなりフレームワーク（Railsのこと）から勉強をはじめてしまうと そのフレームワークだけの概念なのか それとも言語に関わらずWebアプリ一般の考え方なのかが全く区別できないと思います。 Webアプリということでしたら まずは、フォーム画面（HTML）からの入力データをデータベース（MySQL等）へ登録する、 そしてデータベースのデータを表示させる流れを勉強するのが一般的です。 教えて!gooもそうですが、これが全てのWebアプリの基本動作で、 Webの仕組みを理解するのにも重要です。 この仕組をしっかりと理解した後にRailsで同じような動作を作成してみれば フレームワークのありがたみを理解することができると思います。 ### Terminalに関しては MacはUNIXつまりほぼLinuxと考えて良いので 『Linux入門』や『CentOS入門』などのような本を参照すると良いと思います。 はじめは環境構築などでわけわからずコマンドを打つと思いますが、 viなどの使い方などに慣れてしまえば、すぐに抵抗は無くなるでしょう。
いろいろ問題があります。 まず、ローカル変数kekkaは、each do / end の中だけで有効なので、ループのendの後では参照できません。 また、結果を行毎に書き換えているので、全部の行を読み終わった段階で、kekka は最終行の結果つまり、最終行に目的の文字列があったかどうかを示しています。 あと、=~ は原則として左側に正規表現を書きます。これは逆でも一応動くのでまあいいです。 それから、endが1つ足りませんが、popen do の終わりのendはもっと後ろで書いてるんですかね。 それからpsからみですが、まずpsで表示されるのはプロセスです。ジョブとは異なります。 おそらくジョブで無くプロセスを見たいのだと思うので、psでいいです。 引数ですが、意味を分かって書いてますか？ a ⇒ 全ユーザーのプロセス、e ⇒ 環境変数も出力、f ⇒ 階層構造を表示 ですので、 特定の名称のプロセスを探すなら、e や f は不要です。また、x を指定しないと端末を持たないプロセスが表示されません。 ということで、書き直すと、 kekka = "なし" IO.popen("ps ax") do |pipe| pipe.readlines.each do |line| if /調べたいJOBの名前/ =~ line kekka = "あり" end end end puts kekka 「pipe.readlines.each」は、「pipe.each_line」が普通でしょうか。まあ、psの結果くらいの量だとどっちでも良いです。 で、特定のコマンド名のプロセスの有無を判断するには、「ps h -C コマンド名」 のように指定して、結果が0行かどうかで見れば良いです。 Rubyの勉強だと上記のように全部リストを出して1行ずつ調べるのがいいと思います。
転職をする際に、webエンジニアにおいて資格はほとんど意味がありません。むしろ、なにかwebサービスを実際につくってみるということを徹底してやって見ることをお勧めします。 http://dotinstall.com/ こういったサイトで実践的な勉強をしてみてはいかがでしょうか？
> ここでなぜ"foo"が各ページのタイトルに置き換わるのか分かりません。 そりゃ分らないでしょう、そんな置き換えはやっていないんですから。 ここでやっているのは、メソッド full_title に対する仕様 should include the page title を「foo というタイトルからフルタイトルを作成すると foo という文字が含まれている」と定義しているだけです。 つまり、実際の各ページのタイトル一個一個に対してテストするのではなく、タイトルが foo だとした時の動作をテストしてそれで実際のタイトルでも正常に動作するだろうと考えているのです。 間違えないでほしいのは、ここでテストしているのはメソッド full_title であって実際の各ページでのタイトル表示ではないという事です。実際の各ページでのタイトル表示のテストは static_pages_spec.rb （リスト5.28）の仕事だからです。
「たのしいRuby」というのはこれですね。 ＞たのしいRuby―Rubyではじめる気軽なプログラミング ＞http://www.amazon.co.jp/%E3%81%9F%E3%81%AE%E3%81 … 　商品検索をすると改訂版が発行されているようで。 　上記の書籍では 「第２３章　アンケートの集計　３９９」 や 「第２４章　ＨＴＭＬの解析　４１１」 などが紹介されます。 　これらの知識でＷＥＢアプリは作れそうな気がします。 　これらを出発点として足りない情報はＷＥＢ情報で補いながら開発していくなど。 　上記の書籍で一通りの必要な知識は揃うと思います。 　「Rails」というのは興味が無いのでわかりません。
まことに申し訳ありませんが、この場所でどんな回答があったとしてもそれはツクールシリーズのライセンス管理者の公式見解ではありません。ですので、あなたはこの質問をここでするべきではありませんでしたし、この質問に対して直接答える回答やアドバイスを受け入れるべきではありません。 ことライセンスに関する問題ですから、あなたの公開しているものを明記してそれがライセンスに抵触していないかを公式サイトに問い合わせるべきです。
#4の describe command('wmi qfe |findstr "#{line2}"’) do ですが、両端をシングルクオートでくくると、変数展開が行われません。（#{line2}が展開されません） 両端をダブルクオートでくくります。 describe command("wmi qfe |findstr #{line2}") do としてください。
CakePHP 2.x bakeコマンド http://book.cakephp.org/2.0/ja/console-and-shell …
#1です。 データが数字でないと例外が発生すると回答しましたが、 サンプルのString#to_i,String#to_fは、例外を発生しません。 「データが数字でないと期待した結果の数値になりません」が正しいです。 お詫びして、訂正します。
> この@がついたのを何というんでしょうか？ ……うん、やっぱりあなたは DBI やら HTML 出力やらを取り扱う前に Ruby の基礎を勉強したほうがいいです。 これについて答えるのは簡単ですが、さすがにこれを知らないというのはTシャツにサンダル履きで富士登山をしますと言うのと同じです。そんな人を見かけたならばあなたももう少し登山向けの装備をしろと言うでしょう、それと同じであなたがやろうとしていることに対して持っている知識が明らかに足りていないからのアドバイスです。
ふむ、どうしても正規表現のマッチ結果に文字列全体を格納したいというなら /.*hoge.*/ でいいと思うんですが、ある文字列 str に "hoge" が含まれているかを知りたいだけなら /hoge/ =~ str の結果が nil かどうか、あるいは単に str.include?("hoge") で十分だと思います。
試してませんが、data に入っているとして、 data_io = StringIO.new(data) で、data_io.read 出来るようになるので、多分いけると思います。 StringIOは、IOとほとんど同じメソッドをStringに与えるためのクラスです。
そういうことでしたか。 whileの件は誤解が解けたようなので。 バブルソートは「隣同士の値を比べて、順位が逆なら入れかえる」を繰り返して、整列させるアルゴリズムです。 値に注目すると、それが泡が浮んでいくように徐々に移動するので「バブルソート」という名前が付いています。 入れ替えが発生すると、その前後の上下関係が変わってしまうことがあります。 ですから、もう一度全体を調べます。 入れ替えが発生しなかった、ということは、全ての箇所で順番通り、という意味です。 ということは、並び換えが完了している、ということです。 並び換えが終了したなら、処理を続ける必要はありません。 正月ですし、トランプが手許にあったら、次の指示通りにやってみましょう。 トランプの同じマークの一セットとジョーカーを用意します。 適当に混ぜたら、裏返しで横に並べます。(左から0,1,2,3..12とします) ※ ジョーカーを裏にします 0,1を表にします。 　0の方が大きかったら2枚の位置を入れ替えます。ジョーカーを表にします。 0,1を裏返します。 1,2を表にします。 　1の方が大きかったら2枚の位置を入れ替えます。ジョーカーを表にします。 1,2を裏返します。 ...(略) 11,12を裏返します。 ジョーカーが裏のままなら終了です。 そうでなければ、※から繰り返します。 全部表にしたら、どんな風に並んでいるでしょうか
＞64bitのPCで32bitのRubyは使えないでしょうか？ 64bitのWindowsでも特別な理由の無い限り、Rubyは普通は32bit版を使うと思います。 32bitと64bitでライブラリの互換性が無いので、64bit版だと今回のようにあれが使えないこれが使えないとか言う状況になります。 あと数年はそういう状況が続くのではないかと思います。 64bitWindowsでも、IEもMSOfficeも普通は32bit版を使いますよ。
> パスワードはキーと同じものだと考えていたのですが、 いいえ、（少なくともこの例では）違います。 instance method OpenSSL::Cipher#pkcs5_keyivgen http://docs.ruby-lang.org/ja/2.0.0/method/OpenSS … 上記ページに記載されているとおり pkcs5_keyivgenメソッドは pass（と指定されていればsalt）からキーとIVを生成します。 passをそのままキーにしているわけではありません。
以下のようにしてください。 --------------------------------------- # ファイル名はsample.htmlとする data = "./sample.html" text = File.open(data) flag = nil text.each_line do |t| skip = false case t when/前事業年度銘　　　柄株式数/ flag = true skip = true when/当事業年度銘　　　柄株式数/ flag = false skip = true end if /^\s*$/ =~ t skip = true end if skip == false if flag == true t = "前事業年度" + t end if flag == false t = "当事業年度" + t end end #print t end ---------------------------------------- whenの行は、前事業年度銘□□□柄株式数 としています。（□は全角空白１文字） もし、実際のファイルに 前事業年度 と 銘□□□柄株式数 の間に　タブがある場合は \t　を入れてください。（当事業年度も同様） 考え方は、以下の通りです。 「前事業年度 と 銘□□□柄株式数」を検知したとき、 その行はスキップし、以降の行の先頭に 「前事業年度」を付加する。 但し、全てが空白の行はスキップする。 当事業年度も同様。
テキストエディットから、現在のコードを確認するのはちょっと大変です。 他のテキストエディタを使って開いてみてはどうでしょうか? 例えば mi http://www.mimikaki.net/ などが定番で、これだと、自動判定もテキストエディットより優秀だし、失敗しても手動で変更できます。 文字コードが確認できたら、それが期待するものなのか、違うものなのかを確認します。 期待するものなら、テキストエディットで自動判別できないだけです。 期待と違うものなら、 File.open("test.txt","w") で、出力文字コードを指定するようにます。 http://docs.ruby-lang.org/ja/1.9.3/class/IO.html 例: 期待する文字コード: UTF-8 text.txtの文字コード: UTF-8 　なら、テキストエディットで自動判定できないだけ。 期待する文字コード: UTF-8 text.txtの文字コード: EUC-JP 　なら、UTF-8で出力するように File.open("test.txt","w:utf-8") 等と指定する
http://oshiete.goo.ne.jp/qa/8839168.html でも書いたのですが「理由をはっきりさせましょう」 プログラムを書く技術も必要ですが、それ以上に「正しく動作するかを確認する」「期待通りでない場合、その原因を調査解析し修正する」技術が大事です。 今回の例だと ・期待している when ではないwhen節が実行されている。または、どの条件にも当て嵌まらない。 ・gsub!による置換が期待通りではない。 が主要因になりそうだ、と予想します。 そうなったら、デバッガや途中経過表示を使って ・textの内容と、実行されるwhenとが期待通りかを確認する ・gsub前と後のtextを比較して、期待通りの置換になっているかを確認する もし、whenの不一致が理由なら、期待したwhenに合致するようにプログラムを変更します。 もし、gsubの置換が理由なら、期待した置換になるようにプログラムを変更します。 例えば when /株式数（株）\t貸借対照表計上額（千円）|株式数(株)\t貸借対照表計上額(千円)/ STDERR.printf("when:%d:text:%s:\n",1,text) text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t([1-9]\d{0,2}(,\d{3})*)\t/) {|s| "#{$1}株\t#{$3},000円\t"} STDERR.printf("gsub後:%s:\n",text) text.gsub!(/([1-9]\d{0,3})\t(\d{1})/){|s| "#{$1}株\t#{$2}円\t"} STDERR.printf("gsub後:%s:\n",text) text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t(\d{1})/){|s| "#{$1}株\t#{$3}円\t"} STDERR.printf("gsub後:%s:\n",text) とすれば、 このwhenにマッチしたときの処理の様子がわかります。 とりあえず気付いたのは ○whenは上から順番の評価され、最初にマッチしたものが使われます。 when/百万円/ が先に書いてあると、「百万円」を含むものは全てこちらになるため、 when /株式数（株）\t貸借対照表計上額（百万円）/ 等は絶対にマッチしません。 ○もしかして、textはファイル全体ですか? 株式数（株）\t貸借対照表計上額（千円） データ1 株式数（株）\t貸借対照表計上額（百万円 データ2 が全部一つになっているものだったら、 データ2の部分も「千円」として全部処理されます。
こんにちは > `gsub!': incompatible encoding regexp match (UTF-8 regexp with Shift_JIS string) (Encoding::CompatibilityError) contentの文字はShift_JISなのに、gsubの引数はUTF-8なので一致していないというエラーです。なので、一致させてあげましょう。 content = io.read.encode('utf-8') # contentの文字エンコードをUTF-8に変換
念のための確認です。 本来のデータはタブ区切りのところ当質問サイトではタブ文字が使えないため全角空白で代用されているということ、額と保有目的の間にも本来はタブ文字が入っていることがご呈示のコードから読み取れたのですが、それで間違いないでしょうか。 上記の仮定のもとで、なおかつご呈示のコードは千円単位のデータに対応したもののようですのでそれに合わせてご呈示のコードの 58 行目から 64 行目を書き換えてみました。 text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t([1-9]\d{0,2}(,\d{3})*)\t/) {|s| "#{$1}株\t#{$3},000円\t"} 以上。百万円単位のデータに対応したコード部に対しては、上記で書き換える前の行と似た行があるでしょうから、そこを上記のコードに置き換え、#{$3},000円 の部分を #{$3},000,000円 に書き換えてください。 ……でも、『(株)三菱UFJフィナンシャル・グループ』の行は額に全角文字が含まれているのでこの行は変換できません。
メッセージ通りにbigdecimal-1.2.5をインストールしなおせば解決するのかな？
正確にいうと attr_reader を使うことで「ゲッターのついたインスタンス変数が定義できる」だな. で, 例えば attr_reader :x とした場合, このインスタンス変数 @x の値を得るためのゲッターの名前はなにになると思う?
#1 氏の回答に似た話なんだけど、問題の rb ファイルを順次実行するバッチファイルを書いて、それをタスクスケジューラに登録すればいいんじゃね? たとえばそれぞれの rb ファイルの名前を file01.rb ~ file30.rb と仮定して、 ruby file01.rb ruby file02.rb ruby file03.rb 　…… ruby file29.rb ruby file30.rb という具合に。まあ、かなり泥臭い手だけど。 #1 氏の懸念している点も、上の各行を絶対パスにするとかパラメータを必要な行に書くとかすれば問題ないと思うんだけど。
No1.です。 EDINETらしいことは分かったので、「公告閲覧」で出てきたページの例を書いていきます。 ソースコードをEDINET.htmlでファイルとして保存している場合は以下のプログラムで表の中身を取り出せます。 表が2つあったので、二番目の表とするより <DIV class="result"> の直下の表として取り出しています。また、テキスト部分に\tなどやたらあるのでそれを取り除いています。 require 'nokogiri' doc = Nokogiri::HTML(IO.read("EDINET.html")) div_result=doc.xpath('//div[@class="result"]') table=div_result.xpath('table') rows=table.xpath('tr') results=rows[1..-1].collect{|row| columns=row.xpath('td') columns.collect{|c| c.text.delete("\t\r\n")} } p results
HTMLの内容を解析して、必要な箇所を抜き出すなら、HTMLパーサーを使うのがいいと、私も思います。 それは別の話として。 とりあえずは、理由をはっきりさせましょう。 ○期待する動作 ・1行ずつ確認する ・特定の文字列があったら、表示開始状態にする ・特定の文字列があったら、表示終了状態にする ・表示開始状態～表示終了状態だったら、現在の行を保存する ・表示終了状態だったらループを終了する。 ということのようです。 説明のある「現状」から考えると ・保存が開始できているので「特定の文字列があったら、表示開始状態にする」は正しくできているようだ ・終了しない、ということは 　・終了状態にできていない 　・現在の行が長いので、必要以上に保存されているように見える 　・保存するべきでは無い行も保存されている あたりが考えられます。 ここで、デバッガを使ったり、途中経過を出力させるようにしたりして、上のような現象が発生していないか、を確認していきます。例えば file.each_line do |line2| の後に STDERR.printf(":%s:%s\n",flag,line2) とでもすれば、フラグと1ine2の内容が出力されます。 要所要所に確認用の命令を入れて、期待通りになっているかを確認して、原因を掴みましょう。 で気付いたのですが、 break if flag == false で抜けるのは file.each_line do |line2| のループです。その外側に f.each_line do |file| があります。 ということは ファイルから1行読む(file) ↓ 適当に改行入れて分割 ↓ 分割した1行ずつ処理(line2) ↓ ファイルから1行読む(file) ↓ 適当に改行入れて分割 ↓ 分割した1行ずつ処理(line2) このとき、flag==failでも、最初の行はtextに追加される ということではないでしょうか
どのようにして\nを挿入したのか、不明ですが、エディタを使用して行った前提で回答です。 改行コードを埋め込む場合は、\nを挿入したい位置で、Enterキーを押下してください。 それで、見かけ上、2行になれば、そこに改行コードが埋めこまれたことになります。 尚、通常は\nの文字そのものは、\とnの2文字にすぎません。 ruby のスクリプトでそれを"\n"のようにダブルクオートでくくった場合、それをrubyが改行コードとして扱う という特別の約束があります。 ですので、エディタで行なう場合は、実際の改行コードを埋め込まないといけません。
うーん、おかしいですねぇ。 自分の環境ではそんなエラーは出ませんでした。もっとも、そのコードにはいくつか問題がありました。 1. まず、現在の Ruby 公式サイトは https://www.ruby-lang.org/ja/ です。http:~ でアクセスしても https:~ にリダイレクトされます。そのため、上記のコードのままでは doc は https:~ のほうにリダイレクトするという情報が入るだけになっています。 2. では URI.parse の引数を https:~ に変えればいいのかというとそうもいかずに以下のように別のエラーが発生しました。どうも HTTPS でのアクセスに問題があるようです。 C:/Ruby21-x64/lib/ruby/2.1.0/net/protocol.rb:153:in `read_nonblock': end of file reached (EOFError) from C:/Ruby21-x64/lib/ruby/2.1.0/net/protocol.rb:153:in `rbuf_fill' from C:/Ruby21-x64/lib/ruby/2.1.0/net/protocol.rb:134:in `readuntil' from C:/Ruby21-x64/lib/ruby/2.1.0/net/protocol.rb:144:in `readline' from C:/Ruby21-x64/lib/ruby/2.1.0/net/http/response.rb:39:in `read_statu s_line' from C:/Ruby21-x64/lib/ruby/2.1.0/net/http/response.rb:28:in `read_new' from C:/Ruby21-x64/lib/ruby/2.1.0/net/http.rb:1408:in `block in transpor t_request' from C:/Ruby21-x64/lib/ruby/2.1.0/net/http.rb:1405:in `catch' from C:/Ruby21-x64/lib/ruby/2.1.0/net/http.rb:1405:in `transport_request ' from C:/Ruby21-x64/lib/ruby/2.1.0/net/http.rb:1378:in `request' from C:/Ruby21-x64/lib/ruby/2.1.0/net/http.rb:1128:in `get' from thhp_get.rb:6:in `<main>' 3. 上記のエラーが出る理由はおいといて、代わりに YAHOO Japan にアクセスするように変えてみたところ、puts は該当ページのソースではなく以下のような結果を表示しました。まあ 1. の時からそうだったんですけどね。 #<Net::HTTPOK:0x00000002b5bd58> 調べてみたところ、ソースを表示するには doc.body を使えばよさそうなのでやってみたところうまくいきました。 http://docs.ruby-lang.org/ja/2.1.0/class/Net=3a= … 上記を修正した結果、ご呈示のコードは以下のようになります。 require "net/http" require "uri" url = URI.parse("http://www.yahoo.co.jp/") http = Net::HTTP.start(url.host, url.port) doc = http.get(url.path) puts doc.body
こんにちは > Ruby関連よく知ってられるようなので、今後の参考に２点ほど教えてください。 私はただの趣味プログラマで、かつ、Railsも使用したことがないのでご質問に回答できるだけの情報を持ち合わせておりません。 Aptana Studioの存在も今回のご質問を拝見して初めて知ったくらいですので。。。 このご質問は、新規の質問として投稿された方がよろしいかと思います。 お力になれず申し訳ありません。
#2です。 >そこで対策を取りたいのですが、これは元々のhtmlに置換などで改行文字を与えてやれば良いのでしょうか？ もし、それが簡単にできるようでしたら、その方法を推奨します。（１案） >それともRubyの方でまた別のメソッドがあるのでしょうか。 特に、rubyに簡単にできるメソッドが用意されているわけではありません。 もし、行うとすれば、スクリプトの全面的な作り替えになります。 考えられる方法としては、以下のような方法があります。（２案） １．index.htmlを全て読み込み、改行を全て削除した文字列を作成する。 ２．その文字列に対して、マッチングを行い、希望する文字列を取り出す。 従って、１案を推奨します。 １案を何らかの理由でさけたい場合のみ、2案を行うのがよいかと。
こんにちは、 件の書籍の初版のサンプルプログラムをダウンロードしてみましたが まずex2401ファイルの拡張子はrbでなくてerbですよね。 あと拡張子erbファイルを表示するサーバープログラムがex2405.rbにあります。 DocumentRootディレクトリにex2401.erbを置いた上で、ex2405.rbを実行して、ブラウザで表示させれば良いだけです。 というかその辺の話も書籍に記載されているのではないかと思うのですが…… 私の環境（Windows, ruby 2.1.4）で動作確認しましたが、このソースなら#coding行の記述だけ変えればMACでも動作すると思います。 rubyのみで簡単にWebサーバが構築できるのですね、勉強になりました。
こんにちは、 http://support.apple.com/kb/TA20520?viewlocale=j … 上記URLをみると、 「「書類 (Documents)」はホームディレクトリ (˜) のサブディレクトリです。 」 との記述がありますね。 ターミナルを開くと通常はホームディレクトリにいると思います。 そこでls（エルエス）を入力するとDocumentsサブディレクトリが存在するのがわかります。（上記URLの図1です） ls（改行） ディレクトリの移動にはcs（シーディー）コマンドを使用しますので、以下を入力します。 cd Documents（改行） ここで ls（改行）とすれば、hello_world.rbのファイルが表示されると思います。 ここで、以下を入力してみてください。 ruby hello_world.rb（改行） macは使用したことが無いのでわからないのですが もしかしたら以下の様に入力する必要があるかもしれません。 ruby ./hello_world.rb（改行）　　ピリオド、スラッシュを追加 ターミナル上でプログラムを実行するのであれば、使用する主要なコマンドは予め勉強しておいたほうが良いかも知れません。 参考URL：http://support.apple.com/kb/TA20520?viewlocale=j …
#3です。 提示されたhtmlで試験しましたが、正常に動作します。 （提示されたhtmlの後ろに適当なデータを付加しました） 以下実行結果です。 ------------------------ ロ　保有目的が純投資目的以外の目的である投資株式の保有区分、銘柄、株式数、貸借対照表計上額及び保有目的前事業年度特定投資株式銘柄 株式数(株) 貸借対照表計上額(千円) 保有目的 日産自動車株式会社仕入先との取引関係強化のため 　(2)【監査報酬の内容等】 ------------------------- 考えられるのは、 【監査報酬の内容等】の行の次に、余分な行があるのではなく、 【監査報酬の内容等】と同じ行に余分なデータがあるということです。 そのことを確認するために、以下のスクリプトを実行してください。 ---------------------------------- text = "" data = "/home/edinet/E30682/S1002C62/index.html" flag = nil no = 0 IO.foreach(data) do |line2| no += 1 case line2 when /保有目的が純投資目的以外の目的である投資株式の保有区分/ flag = true when /保有目的が純投資目的である投資株式|監査報酬の内容等/ flag = false end text << line2.chomp if flag != nil printf("取得行=%d\n",no) if flag != nil printf("取得終了行=%d\n",no) if flag == false break if flag == false end text.gsub!(/<\/td>/,"\t") text.gsub!(/<\/tr>/,"\n") text.gsub!(/<[^>]+>/,"") print text ---------------------------------- 結果は、 取得行=... 取得行=... 取得行=... 取得終了行=・・・ のように表示されるはずです。 もし、このようになって、余分なデータがあるなら、 それは、「監査報酬の内容等」と同じ行に余分なデータがあることになります。 そし、そうならない場合は、正規表現のマッチが正しくない（考えにくいですが・・） ことになります。 こちらの実行環境は以下の通りです。 windows7 ruby 1.9.3p374 (2013-01-15) [i386-mingw32] 文字コード：WINDOWS-31J(スクリプトの文字コード、index.htmlの文字コード) スクリプトの先頭に # coding:WINDOWS-31J を記述しています。 次回、補足される場合は、念の為 実行環境、及び文字コードも含めてご提示ください。 文字コードは、スクリプトを記述している文字コード、データの文字コード、 スクリプトで指定しているcodingの文字コードを提示ください。
D:\>irb DL is deprecated, please use Fiddle irb(main):001:0> a="ああ" => "ああ" irb(main):002:0> と、何の問題もありませんが、どういう現象でしょうか？ irb --noreadline ではどうでしょうか？
あなたがなさりたいことが良く判らないのですが、 こういうことですか？ １．「保有目的が純投資目的以外の目的である投資株式の保有区分、銘柄、株式数、貸借対照表計上額及び保有目」 の文字列があれば、それを取得する。 ２．但し、「保有目的が純投資目的である投資株式の前事業年度」「保有目的が純投資目的」「普通株式」 の何れかの文字があれば、取得を打ち切る。 ３．上記１，２の処理を取得した（html）ファイルの全てについて行う。 もし、そうであれば、以下のようにしてください。 ---------------------------------------------- data = Dir.glob("/home/edinet/**/*.html") data.each do |find| text = "" IO.foreach(find) do |line2| flag = nil case line2 when /保有目的が純投資目的以外の目的である投資株式の保有区分、銘柄、株式数、貸借対照表計上額及び保有目/ flag = true when /保有目的が純投資目的である投資株式の前事業年度|保有目的が純投資目的|普通株式/ flag = false end text << line2.chomp if flag == true break if flag == false end print text end ----------------------------------------------
#1の方の指摘通りです。 def fact(n) return 1 if n == 0 n * fact(n - 1) p n end でn=3の場合のfactの戻り値は 明示的にreturn文で戻り値を指定していないため、 p nの評価結果になります。p n の評価結果は3なので戻り値は3になります。 factの内容を以下のように変えてください。 あなたの望んだ結果が得られるでしょう。 def fact(n) return 1 if n == 0 seki = n * fact(n - 1) p n return seki end
ん? たとえば http://magazine.rubyist.net/?0041-200Special-kwarg とか http://techracho.bpsinc.jp/baba/2013_02_25/6545 くらいは見つかるんだが?
define　－＞　定義する です。
http://oshiete.goo.ne.jp/qa/8813697.html でも書きましたけど、マニュアル読みましょうよ。 熟練者だって、細かい点を確認するためにマニュアルを読みます。 それを初心者がサボってどうするんですか。 http://docs.ruby-lang.org/ja/2.1.0/class/Dir.htm … にちゃんと > パターンにマッチするファイル名を文字列の配列として返します。 と書いてあります。 「配列の中身を順番に処理する」って基本中の基本なわけですから、初心者用の入門書を読めばちゃんと書いてあります。 また > ブロックが与えられたときはワイルドカードにマッチしたファイルを 引数にそのブロックを 1 つずつ評価して nil を返します とも書いてあります。 Dir.glob("b*") {|f| p f } というサンプルコードもちゃんと載っています。 ブロックを与える方法というのも、Rubyの基本ですから、ちゃんと初心者用の入門書にも書いてあります。 前の質問の中で、あなた自身が利用しています。 f.each_line do |line| ～ end というように。
あと、このプログラム、なんか変ですよ? File.open(fpath).each ここのeachって変ですよね。 f.each_line do |line| line.gsub!(/前事業年度特定投資株式/,"前事業年度") ここでの 変数lineに入っているのは、「ファイルから読み込んだ文字列」です。 ファイルの内容をメモリ上にコピーしたものです。 これを変更しても、元のファイルは変更されません。 また、一行読み込む度に次の行の内容になるので、gsubした結果はどこにも残りません。
こんにちは Eオプションは外部エンコード形式（および内部エンコード形式）を指定します。 ご質問に書かれたプログラムでいうと、ARGV[0]で指定したファイルはこのエンコード形式で書かれているよと指定するオプションです。このオプションがない場合はOSや環境から判断したデフォルトのエンコード形式が指定されます。 おそらく質問者様の環境でのデフォルトの外部エンコード形式がUTF-8では無いのではないかと思います。 この場合、プログラムのif文において正規表現はUTF-8を想定しているのに変数lineが示す文字列はデフォルトエンコード形式で読み込まれているので、一致せずにエラーになります。 対応方法としては、 １．ARGV[0]で読み込むファイルのエンコード形式をデフォルトの形式にする。 デフォルトの外部エンコード形式は以下で確認できます。 p Encoding.default_external ２．Eオプションの代わりにプログラム中で外部エンコード形式をUTF-8に設定しなおします。プログラムの最初で以下を記述します。 Encoding.default_external = 'utf-8' 参考URL：http://docs.ruby-lang.org/ja/2.1.0/doc/spec=2fru …
続報です。 以下の手順のようにできると思いますが、いかがでしょうか。 http://ossfan.net/setup/redmine-01.html サーバー上で起動できます。
> どうしてaの値が２０に変更されているのか > 11:if a = b 比較の場合は、==じゃなかったかな？ if a == b
to_i は数値オブジェクトに変換したものを返すメソッドです。そのオブジェクト自身を変更することはありません。 > ad = ARGV[0].to_i では ARGV[0] の値そのものではなく ARGV[0] を数値オブジェクトにした値が ad に入ります。 一方、 > 03:ad　=　ARGV[0] > 04:ad.to_i では ad に ARGV[0] の値が入り、続けてその値を数値オブジェクトに変換したものを生成しています。しかし、せっかく変換した値をどこにも代入していないため、その値は破棄されます。 上記の形を生かすならば、04 行を ad = ad.to_i としましょう。 なお、 > irbで同じことをやってみると、２行目のad.to_iで数値オブジェクトに変換される とのことですが、変換された結果をただ表示しただけで上記の通り変換した値を保持していないので > 再びadの変数内を参照すると文字列としてオブジェクトが格納されていました ということになります。
こんにちは 私の環境(2.0.0)でも同じ結果になりました。 pメソッドで表示される文字数がある指定文字数を超えないと改行してくれない様ですね。 マニュアルによると指定文字数は79文字で、ご質問記載のp vの文字数は76文字なので、もとの文字に4文字を追加するか puts PP.pp(v, '', width = 75) の様に指定文字数を少なく設定すると改行してくれる様になります。 参考URL：http://docs.ruby-lang.org/ja/2.1.0/class/PP.html
プログラムが断片的でよくわかりません。 「保有」という文字が含まれる行から、「EOF」という文字が含まれる行の前の行まで を取り出すとすると、 text = "" flag = nil IO.foreach(fpath) do |line| case line when /保有/ flag = true when /EOF/ flag = false end text << line if flag end puts text
単純な文字列なので、タイプミス（コピペミス）がない限りマッチします。 あと、文字コードは合ってますか？まあ、文字コードが合ってないと全くマッチしないでしょうけど。
gsubで数字の後に「株」を付けているので全部に付きます。 特定の所だけに付けたいのなら、その特定の所をピンポイントで選択する正規表現を書いて、subで置換してください。
こんにちは 私も同書を読み始め、試してみまして同じエラーになりました。 エラーはexecjs/jsonというファイルが無いというものです。 これはrubygemsからexecjsというライブラリをインストールすれば良いのですが、同書の原著は1年くらい前にかかれたものらしく最新のecexjsでは動作しません。そこで古いバージョンのものを持ってきてインストールする必要があります。 手順 1. 下記参考URLからexecjs-1.4.0.gemをダウンロード 2. execjs-1.4.0.gemは、multi_jsonを必要とするのでrubygemsからインストール 　コンソールで以下を実行 　gem install multi_json 3. 1でダウンロードしたexecjs-1.4.0.gemをインストール 　execjs-1.4.0.gemのあるディレクトリに移動 　コンソールで以下を実行 　gem install --local execjs-1.4.0.gem 私の環境では以上で動作しました。 ご参考にしていただけると幸いです。 参考URL：https://rubygems.org/gems/execjs/versions
こんにちは > continue 2; 処理を中断して、一番内側のループの一つ外側のループの条件判定に戻るという意味ですよね。 phpのcontinueに該当するのは、rubyではnextになりますが、一番内側のループの条件判定にしか戻れません。 参考URLにマニュアルのリンクは貼っておきますのでご確認下さい。 参考URL：http://docs.ruby-lang.org/ja/2.1.0/doc/spec=2fco …
＞:in `block in <main>': undefined local variable or method `try' for main:Object (NameError) タイプミスじゃないですか？ ミスが見つかるまでもう一度よく見直しましょう。 前回の質問の回答にに書いたかもしれませんが、 もっとやさしいプログラムを書くことから始めた方が良いように思います。
target = {"0"=>{"id"=>"2", "tag_id"=>"3"}, "1"=>{"id"=>"3", "tag_id"=>"1"}, "2"=>{"id"=>"4", "tag_id"=>"1"}, "3"=>{"id"=>"5", "tag_id"=>"2"}, "4"=>{"id"=>"", "tag_id"=>""}} target.delete_if{|k,v| v["id"].empty? || v["tag_id"].empty?} # => {"0"=>{"id"=>"2", "tag_id"=>"3"}, "1"=>{"id"=>"3", "tag_id"=>"1"}, "2"=>{"id"=>" 4", "tag_id"=>"1"}, "3"=>{"id"=>"5", "tag_id"=>"2"}} 参考URL：http://docs.ruby-lang.org/ja/2.1.0/class/Hash.ht …
どちらも、初心者向けの参考書や参考サイトがあります。 少しずつでもやってみて、「ピン!」と来た方をやればいいのではないでしょうか? Rubyプログラマの感じる「楽しさ」とあなたの感じる楽しさは違うかもしれません。 あくまで、個人的な感想ですが、PythonにBasicの香りを感じます。 VBAをやっているのなら、案外受け入れやすいかもしれません
「出力されてしまいます」というのは、どこでどうやって確認したものですか? 文字列として「\3072\3089\304C\306A」となっているものを、inspectやpメソッドを使用したために "\\3072\\3089\\304C\\306A" と出力されているだけ、ということはないですか? http://docs.ruby-lang.org/ja/1.8.7/method/String …
こんな感じで class MySTDOUT < IO def initialize(file) @f = File.open(file,"w") super(1,"w") end def close @f.close super end def write(str) @f.write(str) super end end $stdout=MySTDOUT.new("1234.txt") p [1,2,3,4,5] puts "This is a pen."
＞google.rb:35:in `rescue in try': undefined method `縲if' for main:Object (NoMet hodError) 私の回答をコピペして空白が全角のままではありませんか？ 全角空白と半角空白の区別が付くエディタを使いましょう。
私自身は異なるバージョンを共存させたことは無いのですが、 gemの機能としては異なるバージョンを共存できる仕様になっているはずです。 ただし、gemで作成されたrailsなどのコマンドでの実行ファイルは1つのバージョンしかインストールできないのですが、大きな問題にはならないと思います。
Nokogiri なら、 #!/usr/bin/ruby # coding: utf-8 require 'open-uri' require 'nokogiri' url = 'http://oshiete.goo.ne.jp/' doc = Nokogiri.parse open(url).read doc.search('img/@src').each do |src| puts src.text end 出力: http://u.xgoo.jp/cmm001/img/sn/sn_50_w.gif http://u.xgoo.jp/cmm001/img/logo/goo.gif /images/common/new.gif ... http://oshiete.xgoo.jp/images/common/powered_by_ … http://cmm001.goo.ne.jp/cmm/img/wui/info_ed002/1 … http://log000.goo.ne.jp/VL/Trace?c=151&tp=1&nosc … が得られます。 教えて! goo のトップページの img 要素の src 属性を列挙します。 XPath の指定で、'img/@src' と、属性を指定することがポイントです。
全体が分からないので一般的な回答ということで、 open("出力ファイル.txt", "w"){|f| #いろいろな処理 f.puts driver.page_source #いろいろな処理 } で出力ファイル.txtというファイルに書き出されます。 もちろん、puts driver.page_sourceを追加しておいて画面に出力しても構いません。 画面に出力されているのを全部ファイルに出すのでしたら、実行コマンド ruby program.rb >出力ファイル.txt として書き出しもできるし、 ruby program.rb | tee 出力ファイル.txt で画面とファイルの両方に書き出されます。プログラム本体を変更しなくても良いのでこのあたりがお手軽かも
だいぶできたようですね。 こちらもMacでOSX10.9ですので、ほぼ同じです。 少し気になる点を、 t.integer :Zip_Code と整数型になっていますが、0から始まる郵便番号もありますので、 t.stringをした方が良いように思います。 それと、Zip_Codeにインデックスを設定しておく方が検索が速くなります。 インデックスはmigrationでadd_indexで後から設定できます。 実際にやってみて気がついたのですが、 同じ郵便番号で違う住所が結構有るのです。郵便番号から一意に住所が決められないのです。それと No.2の回答欄にもあるように、 札幌市中央区大通西（１～１９丁目） のようにそのままでは使えない住所があります。 住所録を作成するために使うのだと思うので、 住所録本体(例えばaddress_book)をscaffoldなどで作成します。 当方で作成した住所録は、レコードを新規作成するときに(new)郵便番号だけを入れるフォームにし、ボタンを押すと、住所入力用フォームに飛ぶようにしています。新規作成が二段階になっています。この住所新規作成用のフォームには氏名、住所（郵便番号からリレーションで自動入力）、それと郵便番号から検索された住所（同一郵便番号で複数の住所があったときに参考になるように）を表示するようににしています。 先にも書きましたが、郵便番号から直接住所を特定できないことがあるための対策です。
>ツールからアクセスしようと試みましたが外部からはアクセスできませんでした。 そんなことはありません。私は普段、PostgreSQLについてくるAdminIIIでHerokuのデータベースサーバ（amazonaws.com）にアクセスし、メンテナンスしています。 データベースアクセスのための情報が正しく設定されていないか、あるいはファイアウォールなどでアクセスが制限されているなどといったことはないでしょうか。
NO.1の訂正です。 >gnuplotにしてもRにしても、それぞれのソフトで使える命令をテキストデータとしてRから送るのが基本ですので この部分は gnuplotにしてもRにしても、それぞれのソフトで使える命令をテキストデータとしてRubyから送るのが基本ですので です。 さて、もう少し分かりやすい例を挙げておきます。 sinとcosの2つのデータがプロットされます。 x=0.0 xa=[] # データ保存用配列 y1=[] y2=[] open("|gnuplot", "w") do|gp| while x<30.0 xa << x y1 << Math.sin(x) y2 << Math.cos(x) gp.puts "plot '-' , '-'" # データが100個を超えると最新の100個だけでプロット (xa.size>100 ? xa[-100..-1] : xa).zip(y1.size>100 ? y1[-100..-1] : y1){|a, b| gp.puts "#{a} #{b}"} gp.puts "e" (xa.size>100 ? xa[-100..-1] : xa).zip(y2.size>100 ? y2[-100..-1] : y2){|a, b| gp.puts "#{a} #{b}"} gp.puts "e" x=x+0.1 end end
まずModelは1対多にしておきます。 has_manyとbelongs_toで設定 新しい評価を作成するのでしたら、 Evaluationにその生徒名のstudent_idを書き込んだレコード(他の項目は空)を新規に作成すれば可能です。 そして作成したレコードを表示させて、編集すれば成績の書き込みができます。 Studentビューのshowにでも、該当する生徒のEvaluation一覧を表示させ、編集と新規作成ボタンでも作ればわかりやすくなると思います。
Enumerable#mapを使います。 -------------------- a = [2,4,6] b = 2 c = a.map{|x| x/b} p c -------------------- 実行結果は [1, 2, 3] となります。 直接　配列 a を更新したい場合は、 a.map!{|x| x/b} とします。
OSのバージョンとMySQLをどのようにしてインストールしたかを書いてないので答えようがないのですが。 こちらでは OSX 10.9.3でMacPortsを使って、 sudo port install mysql5 mysql5-server でインストールしたものだと sudo port load mysql5 で問題なく立ち上がります。 最初はsqlite3を使われてはいかがでしょうか。 OSXに最初から入っていますし、特別な設定も必要ないですので。
こんにちは > 「長さは8文字以上で、英数記号全てを含まなければならない」 Railsはわかりませんが以下の正規表現で如何でしょうか？ /(?=.{8,})(?=.*\d+.*)(?=.*[a-zA-Z]+.*).*[!@#$%]+.*/ VALID_PASSWORD_REGEXに"8文字以上"の条件をいれる必要がなければ /(?=.*\d+.*)(?=.*[a-zA-Z]+.*).*[!@#$%]+.*/ "記号"の部分は使用する記号を適宜追加してみてください。
get '/:hello', :to=> 'booklist#hello' get '/:bye', to:=> 'booklist#bye' これはbooklistコントローラがあって、そこにhelloとbyeアクションがある、ということですよね？　ならばこれをを、 get "/hello" => "booklist#hello" get "/bye" => "booklist#bye" こうするとどうでしょう？ パラメータなど渡す必要がないならこれでいけると思うんですが。/:helloというように:をつけるとパラメータとして認識されますので意味が変わってきます。 ちなみに命名規約から、アドレスはhttp://ドメイン/コントローラ/アクション という形にするのが基本ですので、こうしたほうがいいと思います。 ↓ get "/booklist/hello" => "booklist#hello" get "/booklist/bye" => "booklist#bye"
No.1です。 > Ruby2.1.1　を修復　で再度インストールしました。 ActiveScriptRuby2.1.1をインストールしたという前提で回答します。 > ruby 1.9.3～の表示です おそらくコマンドプロンプトで確認されたと思います。 （そういう手順的な情報も書き添えて欲しいのですが） ActiveScriptRubyは環境変数Pathの書き換えを自動で行いません。 スタートメニューに登録されているRuby2.1.1のメニューのRuby2.1 consoleから操作してみてください。 # あと色々なバージョンのRubyをインストールされている様ですが、ご自身で管理できていらっしゃらないのであれば一旦全てアンインストールしてから、必要なバージョンのRubyのみをインストールして使用することをお勧めします。 # 先の回答で書き忘れましたが、私の環境ではDXRubyのサンプルを動かすために、別途DirectXをインストールする必要がありました。 http://www.microsoft.com/ja-jp/download/details. …
Rails3までしか使ったことないんですが……。 ちょっと具体的な実装の仕方がよくわからなかったので見当違いかも知れませんが。JSON形式データをURLにつけて送信しているということですけど、それはURIエンコードしたものですか。例えばですが、{:foo=>'hoge'}.to_queryとかしたものをつけてます？　ひょっとしてそのままJSONデータをURLにつけてる、ってことないでしょうか。
テストしてませんが、 n=0 Dir.glob("/Photo01/*/*.jpg").each do |file| File.rename(file, "/Photo02/%03d.jpg" % (n+=1)) end
クラス変数を使う方法に変更すれば、 active_support の cattr_(reader, writer, accessor) が使えるかなと思います。 gem install active_support #!/usr/local/bin/ruby # coding: utf-8 require 'active_support/core_ext' class Hoge cattr_reader :val1, :val2, :val3 @@val1 = 1 @@val2 = 2 @@val3 = 3 def piyo yield self end end Hoge.new.piyo {|t| p t.val1, t.val2, t.val3 }
def prime(val) maxv = Math.sqrt(val).truncate (2..maxv).each do |i| STDERR.print "mod: #{i}, " if val % i == 0 STDERR.puts return false end end STDERR.puts true end x = 101 until x < 10 if prime(x) puts x end x -= 2 end という感じでしょうか。 mod: というデバッグ表示は標準エラー出力に 出しているので、2>/dev/null とかすれば、表示しません。
> 「return self.id <=> other.id」この部分のselfとotherが何をさしているのか分かりません。 下のプログラム3行目のtanakaがself, suzukiがotherです。 ----- tanaka = Employee.new(3,"Tanaka") suzuki = Employee.new(1,"Suzuki") p tanaka <=> suzuki # 結果は、1 p tanaka.<=>(suzuki) # これも同じこと ----- employees << Employee.new("2","Sato") employeesという配列(Array)にEmployee.new("2","Sato")という要素を追加しています。 employees.sort!で各要素間でself<=>otherの比較が行われて、その結果により順番の入れ替えを行って要素をid順にソートしています。 ----- employees.sort! employees.each do |emp| p emp end ----- -----結果(id順にソートされている--- #<Employee:0x1082acc @id=1, @name="Suzuki"> #<Employee:0x1082a90 @id=2, @name="Sato"> #<Employee:0x1082af4 @id=3, @name="Tanaka"> -----
rails newで作成したフォルダの中でさらにrails newをやるとそのようなメッセージが出ます。 つまり rails new t1 で作成し、 cd t1 rails new t2 で同じメッセージがでます。
control + Cで実行を止められます。
それはコマンドラインで入力するものではなくRailsアプリケーションに含まれるgemfileという名前のファイルに記述するものです。あなたが提示されたページにも 　just adding the suitable gems in your application’s Gemfile と書かれており、コマンドラインで入力するようなことは一切書かれていません。
ruby 2.0.0p353 で実行しましたが、質問欄をそのままコピーをすると test.rb:4: unterminated string meets end of file test.rb:4: syntax error, unexpected end-of-input, expecting ')' とエラーがでます。 puts("正の数です！”) の”が全角になっています。 puts("正の数です！") で実行してみてください。 それでも駄目でしたらruby -vでバージョンを確認してください。 1.8.7なら require 'jcode' $KCODE="u" 最初に加えてみてください。
s[0]=8 を s[0]=8.chr としてください。
ちょっと質問が漠然としていて回答致しかねるというのが正直な所なので * OSはWindows,Mac,Linuxのどれなのか？ * Linuxだとしたらディストリビューション、もしくは使っているサービスの種類（AWS、heroku、さくらクラウドetc．..）は何なのか？ それと、手順としてどの段階でそれが発生したのか？ を最低限伝えて欲しいところなのです 一応、質問の本文からのエスパー回答ですいませんが サーバー構築の知識はあまり無いようですので Windows環境になんらかのGUIのインストーラーを使ってrubyをインストールした仮定ですと rubygemからのSSL認証が上手く行っていないので proxy設定を行うのが正解だと思います http://d.hatena.ne.jp/atelier-shin/20110223/1298 … ただ、個人的にはWindowsに直接railsをインストールするのは、最終的にはインストール不可能なgemが多数出てくるので VMWareやVirtualBox等で仮想マシンを構築するか、Macに持ち替えたほうが良いと思いますよ
クラス変数を定義します。 単に再定義するには、必要ないですが、 元のメソッドを利用したい場合は、alias しておきます。 #!/usr/bin/ruby # coding: utf-8 class Fixnum @@counter = 0 alias orig_compare <=> def <=>(other) @@counter += 1 orig_compare(other) end def counter @@counter end end a = [3, 5, 4, 2, 1] p a.sort, 0.counter 結果: [1, 2, 3, 4, 5] 7
元々シングルボードコンピュータが好きとか、Linux好きならともかく、これから ruby をやりたいと言うのでしたら、普通のPC環境でお使いになった方がよいと思います。 （Ubuntuなどで） Beaglebone の初期OSは Angstrom Linux です。 ruby に関しては、そのままでは動かない（入っていない）と思います。 ちょっと調べた感じだと gcc ですら初期では使えないっぽいですね。 rubyに関してはこんな記事がありました。 　↓ 「Angstrom Linuxに ruby を入れたい」（英語です） want to install ruby 1.8 on angstrom beaglebone https://groups.google.com/forum/#!topic/beaglebo … やり取りの結果、うまくいったのかどうかがイマイチ不明瞭だし、そもそも日本語の記事が皆無です。 それでも、PCではなく Beaglebone でおやりになりたいのであれば、Angstrom Linux ではなく、Ubuntu など他のディストリを入れた方がいいでしょう。 Ubuntu を入れる記事は日本語でも結構見つかります。 （ご質問に書かれたリンクにもありますね） ただ、Beaglebone向けのOSイメージだと Ubuntu であっても、かなり色々削っているらしいので、苦労して入れても、使いたいコマンドは結局後から導入、と言うパターンが多くなると思います。 ・Beagleboneで遊ぶ事を中心とするのか ・プログラミングをやりたいのか を再考された方が、よろしいかと。
できるだけ質問者様が書かれたソースをもとに作り直してみました。 以下のようにしてください。 ---------------------------------------------------- #! ruby -E Windows-31J:utf-8 # coding: utf-8 kensu = 0 goukei = 0 uriage_t = Array.new tanto_t = Array.new puts("担当名がendで終了") while true print(kensu + 1, "人目の担当名は") tanto = $stdin.gets.chomp! tanto.gsub!("\n", "") if tanto == "end" break end print("売上") uriage = $stdin.gets.chomp!.to_i kensu = kensu + 1 goukei = goukei + uriage uriage_t << uriage tanto_t << tanto end kensu = kensu + 1 uriage_t << goukei tanto_t << "合計" puts "________________________________________" puts "　　担当　　　　　　売上　　比率　　" puts "________________________________________" (0...tanto_t.size).each do |i| if goukei > 0 ritu = uriage_t[i] * 100 / goukei else ritu = 0 end puts "担当名は#{tanto_t[i]}　売上は#{uriage_t[i]}円 比率は#{ritu}%" end --------------------------------------------------------- 尚、合計が０円の時に、異常終了しますので、異常終了しないように プログラムを修正しています。
すでに答えは出てますが、私なりに考えたものを http://pastebin.com/kgAPLFdd
以下のようにしてください。 --------------------------- a = "aaaacccaaacccaaaaaaaaaaaaaaarubyaaaaa" a.sub!(/(.*)ruby.*/){$1} p a ---------------------------- 実行結果： "aaaacccaaacccaaaaaaaaaaaaaaa"
こんにちは > というプログラムを書いたのですが、うまくいきません。（エラーも出ないです） > もともとできないのですか？ 少なくとも私の環境では動作しているようです。 Windows Vista ruby 1.9.3p385 (2013-02-06) [i386-mswin32_100] 適当なサンプルがありませんでしたので ↓のサンプルプログラムからボタンクリックで呼ばれる メソッドを書き換えて実験してみました http://www.osk.3web.ne.jp/~nyasu/vruby/sample/pa … もう一点 以下についても試してみましたは仰るとおり機能しませんでした。 > def radioBtn1_clicked ラジオボタンについてはxx_clikedイベントは機能しない様ですね。 親クラスのVRCheckboxで機能が無くなっている様で ラジオボタンはチェックする/しないと、チェック有無の確認ができるのみのようです。 http://www.osk.3web.ne.jp/~nyasu/vruby/referer/v … -----ここから # coding: windows-31j require "vr/vruby" require "vr/vrcontrol" frm=VRLocalScreen.newform def frm.construct # self.extend VRResizeSensitive # self._init self.caption="PanelTest" addControl(VRStatic, "label1","サイズ変更でmessagebox出ます",200,10,250,40) addControl(VRGroupbox,"group1","わく",80,50,300,100) addControl(VRButton,"btn1","左へ",5,20,80,30) addControl(VRButton,"btn2","右へ",85,20,80,30) @rad1=@group1.addControl(VRRadiobutton, "rad01","ラジオ1",5,20,80,40) @rad2=@group1.addControl(VRRadiobutton, "rad02","ラジオ2",150,20,80,40) end # 動作内容を書き換え def frm.btn1_clicked @group1.visible = true # グループボックス表示 end def frm.btn2_clicked @group1.visible = false # グループボックス非表示 end def frm.self_resize(x,y) # messageBox "(#{x},#{y})","resized",0 end # 追加でテスト # # ラジオボタンはxx_clikedイベントは機能しない？ # def frm.rad1_clicked @group1.move @group1.x+20,@group1.y, @group1.w, @group1.h end def frm.rad2_clicked @group1.move @group1.x+20,@group1.y, @group1.w, @group1.h end frm.create.show VRLocalScreen.messageloop exit -----ここまで
-----------csv.rb------------- require "csv" print "Enter the key :" key = (gets.to_s).chomp CSV.open("test.csv","r") do |csv| csv.each do |row| if row[0] == key print row end end end ------------------------------ ----------test.csv------------ name,email,tel andy,andy@yahoo.co.jp,090xxxxxxxx bob,bob@yahoo.co.jp,090xxxxxxxx amy,amy@yahoo.co.jp,090xxxxxxxx ------------------------------ 動作確認：ruby 2.0.0p247 (2013-06-27) [i386-mingw32] ※ Ruby 1.8系だとCSVメソッドの仕様が変更になっているので注意。 あと、文字コード認識も(ruby 1.8系は)甘いので、Ruby 2.0系じゃないと動かないです。
p を使ってるからでは。 http://doc.ruby-lang.org/ja/1.9.3/class/Kernel.h …
こんにちは 同様の現象に遭遇したことがないのでご質問に直接の回答はできないのですが とりあえず発生していると思われるエラーメッセージをファイルに書き出してみては如何でしょうか？ エラーがわかれば対策も可能かと思います。 問題のプログラムの具体的な記述がわからないのですが、ソースの最後の方で作成したFormを実行している記述があると思います。（下の※に相当する記述です、複数行かもしれません） これをbegin～rescue～endで囲んで、エラーが発生した場合にそのメッセージをファイルに書き出す様にします。下の例ではエラー発生時に、error.txtにエラーメッセージが書き出されます。 -----ここから begin VRLocalScreen.start(MyForm) ……※Formを実行している記述（一例です） rescue File.open("error.txt","w") do |f| f.puts $!.message f.puts $!.backtrace end end ----ここまで
FormDesignerは使用していないのでよく分かりませんが ソース上で 非表示は以下でどうでしょうか @groupbox.visible = false 表示は @groupbox.visible = true ボタンも同様でいけると思います。
WindowsStyle 計算してみると、WS_VISIBLE + WS_CHILD + BS_CHECKBOX + BS_PUSHBUTTON ――かな。 https://www.google.co.jp/search?hl=ja&q=WS_VISIB …
申し訳ありません。 ＃１は、呼び出し関係がわからなかったので、構文チェックをするメソッドを提供すればいかがでしょうか、という提案をさせていただいたものです。JSONファイルを指定する前に構文チェックをして、OKのものだけ指定する。ということをイメージしておりました。 （話変わりまして、） 以下のURLが該当しそうです。 https://gist.github.com/elarkin/4709748
うーん、もしやファイル名の入力ミスだと思ったのですが... 私の場合、ver1.8.7を使っていて、requireするファイル名をわざと間違えると以下のようなエラーメッセージが出ます。 in `require': no such file to load -- rexml/documenr (LoadError) となるとrexml￥documenr.rbというファイルがないのでしょうか？ 私の場合は検索するとありました。 これ以上は、Ruby中級、上級プログラマの方の回答を待つしかないのかも。 みんなお盆休みなんでしょうか？
shellからの出力を、Rubyで入力として受けとってますよね? shellの入力に渡すには、その逆で、Rubyから出力してやればいいのです。 シェルから続けて別なコマンドに渡すには 方法1) パイプライン込みのコマンドラインを popen3の引数として指定する Open3.popen3('sh test.sh | sh test2.sh') 方法2) Rubyでパイプラインの代りをする Open3.popen3('sh test.sh') #A Open3.popen3('sh test2.sh') #B Aの出力をRubyで入力し、Bの入力へとRUbyから出力する。
プログラム全体と、データの中身を書いてください。プログラム断片だけみてもなんとも言えません。 あとエラーメッセージも正確に。
n1 = 1 ["a","b","c","d","e","f","g","h","i","j","k","l"].each do |n2| puts n1 puts n2 n1 += 1 end
どっちもuptoで統一した方が良かったですね、すみません http://ideone.com/cVy7kj
ファイル名については > hello_world.html.erbファイルを、以下のコードに修正してください > say_hello_controller.rbファイルを、以下のコードに修正してください > config/routes.rbに以下のコードを記述してください とありますが。それぞれのファイルは、その前の段階で > まずはHello World! > 生成されたファイルの中の、「app/controllers/say_hello_controller.rb」に対して、以下のコードを記述してください > 「app/views/say_hello/」ディレクトリに、「hello_world.html.erb」ファイルを作成して、以下のコードを記述してください > config/routes.rbに以下のコードを記述してください とあります。 > うまく写りません 具体的のどうなったかが、わかりません。 「うまく写りません」だけでは、答える方も答えようがありません。 人に尋ねる場合でも、自分で解決する場合でも、まずは「具体的に何がどうなっているのか/どうなっていないのか」を把握しましょう。 > 原因は、上段のコードファイルに関連付けがされていないのではないかと > 思います。ファイル名を一緒にしていないのが原因なのか？ ファイル名を変えたら、他の設定もそれに合せたものに変更する必要があります。 この例は、上記構成でのものになっています。 そのサイトのは、「この通りやったら、とりあえずは雰囲気は味わえる」という程度のもので、学習にはまったく役に立たないと思います。 別のちゃんとした入門書や入門サイト、マニュアル等で、基礎から勉強した方がよいでしょう。
初心者向きに普通に書くとすると、 open("kekka_file","w") do |outfile| IO.foreach("data") do |line| line.chomp! #改行文字の削除 lineに対しての処理 outfile.puts 処理結果 end end
以下のようにしてください youbi = %w[日 月 火 水 木 金 土] t = Time.now puts "%s年 %s月 %s日 %s曜日" % [t.year, t.month, t.day, (youbi[t.wday])] #----以下の行を追加----- # 次の水曜日にするため、何日加算するかを決める add_day = (10 - t.wday)%7 # その日付を秒に換算して加算する。 nt = t + add_day * 24 * 60 * 60 puts "%s年 %s月 %s日 %s曜日" % [nt.year, nt.month, nt.day, (youbi[nt.wday])]
正しく変換されています。 p text_shiftjis　 でなく print text_shiftjis　 で確認してみてください。 （もっと正確には、text_shiftjis　をファイルへ書き込んで、その結果をテキストエディタ及び１６進数エディタで確認してください） p text_shiftjisだと正しく表示されないようです。 当方、windows-7,ruby-1.93で確認済みです。
以下のようにしてください。 --------------------------------- n=10000 while n>=1 do break if n <= 1 if n%2 == 0 n = n / 10 end puts n sleep(1)・・・・・put sの次の行にこれを記述する end ---------------------------------
最近マニュアルを見ていたら、splitでこのようなことができる事に気づきました。 こんなのはどうですか。 puts DATA.read.chomp.split(/(<.+?>.+?<\/.+?>)/).reject{|a| a==""}.join("\n") もう少し縮めて puts DATA.read.chomp.split(/(<.+?>.+?<\/.+?>)/).reject{|a| a==""} もできるみたいです。 もうひとつおまけですが、\を使うのがいやな場合は puts DATA.read.chomp.split(%r[(<.+?>.+?</.+?>)]).reject{|a| a==""} のような書き方も
＞kernel_require.rb:45:in 'require':126:"指定されたモジュールが見つかりません" ということなので、require するものが間違っているのでしょう。 require 'wx' でなく、require 'wxruby' なのでは？
共通部分を別ファイルにくくりだしてそれを読み込むのは、require とか load とかで出来ます。 それが意味を持つかどうかは、スクリプトの作り方によります。
-は引き算として判断されます。 こんな書き方もできたはずです。 @item['name_zh-tw'] @item[:'name_zh-tw'] 文字列またはシンボルで、 -や特殊な記号があるとシンボルにするにも:'name_zh-tw'としないと不都合がでます。
多分長い行を折り返して書いてある物をそのまま別の行として入力したためでしょう。 doc.elements.each("guitars/make/model/color") { |element| puts element.text } と1行にするか、 doc.elements.each("guitars/make/model/color") \ { |element| puts element.text } と、\ で行をつないでください。 ＞Rubyのバージョンとかが関係あるのでしょうか？ 1.8.6でもエラーになるので、バージョンとは関係ないでしょう。
下記サイトを参考にしてみた感じ、パス部に変数展開で埋め込むだけでよいみたい。 http://d.hatena.ne.jp/aoi_273/20090311/1236764850
試してみた感じ、正常かと。
r=r<3 ? r+1 : 0 rが2だったら、r<3が真なので、r+1 つまり3になります。 r=r<2 ? r+1 : 0 では？
RailsのActiveSupportを使った例とかWeb検索で見つかるので、そこらへん参考にしてみては。 http://www.google.co.jp/search?hl=ja&q=ruby+Acti … 汎用的に使いたいというなら、Aspect指向プログラミングになるので、そちら方面を探してみるとか。 http://www.google.co.jp/search?hl=ja&q=ruby++AOP …
OSやハードウェアにもよりますが。よくつかわれるのは、Ctrl－ｃ、Ctrl-B、Ctrl-Break ,Ctrl－Alt-Del、Esc ,Ctrl-Esc　などですが、本当はプログラムを修正して、on-Key A then end みたいなAのKeyがおされたら　end するようなコマンドをプログラムの最初に宣言するようなことはできませんか？
ページがないと例外が発生するので、それを拾います。 begin page=URI(url).read page=Kconv.tosjis(page) puts(page) rescue puts "サイトが無い" end のようにしてください。
以下のようにしてください。 ------------------------------------------- # 単語の配列を初期化 words = Array.new # tanogo.txt のオープン File.open("tango.txt","r") do |file| # 1行単位で読み込む while line = file.gets #改行を削除 line.chomp! # wordsへ登録 words << line end end #単語の数を求める kazu = words.length # 乱数（整数）を求める # 0～単語の数-1　の範囲に乱数が収まるようにする word = words[rand(kazu)] print word,"\n" --------------------------------------------- 単語が書いてあるファイルをtango.txtとします。 このスクリプトをtest.rb とします。 スクリプトと単語のファイルは同じディレクトリにおいてください。 コマンドプロンプトで、そのディレクトリに移動し、 そこで ruby -Ks test.rb と入力してください。 毎回、異なる単語が表示されます。
こちらで実行した所、ちゃんと(1000以下の)168個の素数が表示されましたが もしかして"invalid multibyte char"系のエラーが出てたりしますか？ そのエラーの場合、原因は「素数は」という部分なので、 print "primes:\n" か何かに書き換えてあげて下さい。
＞この文章はエラーではなく、正常に通ってるということでしょうか。 エラーではなく、警告メッセージです。 正常かどうかは主観的な判断なので、人によります。 メッセージの意味は前回の回答に書いたとおり。 処理は正常にされています。
テキストファイル内の「改行」は「改行コード」。 Webブラウザで見るときの「改行」とは違う。 プログラム内で改行コードを置換してください。 https://www.google.co.jp/search?q=ruby+CGI+%E6%9 …
https://www.google.co.jp/#q=ruby%20cgi%20%E3%83% …
＞どうすれば良いでしょうか？ まずPHPを勉強します。プログラムが自由に書けるレベルになるまで。 次にRubyを勉強します。簡単なプログラムが読める程度でOKなので、入門書1冊よむだけで十分でしょう。 順番は逆でも良いですが、1つ言語をマスターした方が他の言語を学ぶのも楽なので、深く勉強する方を先にした方が良いでしょう。
何で修正じゃなくてエラーを消すことだけ考えるの？ それはともかく、Array#countは1.8.7以降のメソッドだけどcodepadは1.8.6だから使えない。
Rubyは知らないので見当違いな答えかもしれませんが一点だけ気になるところが……。 > :ProxyContentHandler => handler この行の末尾にカンマはなくてもいいのでしょうか？ > 正規表現ですべての文字にマッチするようなメタ文字 「.」ではダメなのでしょうか。任意の1文字にマッチします。 複数文字なら「.+」で大丈夫かと思います。 （この辺は正規表現の基本中の基本ですが、お調べになりましたか？）
＞if cgi.params["login"][0]=~/[0-9a-z]{1-8}/ then この通りに書いてるとしたら、動かないです。{1-8} じゃなくて {1,8} です。エラーにならないのが意外。 あとRubyでは、文字列 =~ 正規表現 では無く、正規表現 =~ 文字列 と書きます。 前者でも動くのですが。
「文字と数値を一緒に含むようなもの」とは具体的には何ですか？ Stringクラスのオブジェクト、ないしは、to_s メソッドでStringクラスオブジェクトに変換できるものなら %s Integerクラスのオブジェクト、ないしは、Integer関数で整数に変換できるものなら %d です。 数値しか含まないStringオブジェクトは、Integer関数で整数に変換できるのでどちらでも良いし、 大抵のクラスには to_s メソッドが定義されているので、%s だと普通はフォーマットできます。
No1です。 登録画面の方は出来ているのなら、新規登録ボタンの部分はJavaScriptがいいんじゃないでしょうか。 <html> <head><title>実験</title></head> <script> function regist(){ document.getElementById("regist").setAttribute("style","display: block"); document.getElementById("new").setAttribute("style","display: none"); } </script> <body> <input id="new" type="button" value="新規登録" onclick="regist()"> <div id="regist" style="display: none"> <form action="test.cgi" method="post"> Username: <input type="text" name="login"><br> Password: <input type="password" name="password"><br> <input type="submit" value="login"> </form> </div> </body></html>
方向性自体はあってると思うんですが、対象ファイルやコードに日本語文字含んでいるのでうまくいかないのかなーと Ruby1.9.3と2.0だけで動作確認したコードを載せます。 対象ファイルもコードもUTF-8決め打ちにしてあるので、適宜調整してみてください。 元のから殆ど変えずに（出力を整えてはいませんが、nil => nil ではなくなります。） http://ideone.com/2vWblD ブロックを使う形（個人的に、元のよりはおすすめ） http://ideone.com/MBNrCE ファイルではなく、標準入力から読み込んだ時のサンプル http://ideone.com/xK1Sj4
ネット上にあると言ってもそのファイルにどうやってアクセスするのか？ (1) HTTPでアクセスできる場合 HTTPのHEADメソッドでタイムスタンプ等がわかります。 (2) ftpでアクセスできる場合 他の人が回答済み。 (3) NFSやCIFSでアクセスできる場合 ローカルにあるのと同じ方法で可能。
> まったくパラレルに行なっている様子が無い スタートしたスレッドに対して、逐次joinしているからかと。 スレッドの生成と待ち合わせについて見直してみては。 検索すると、すでにいろんな人がその手の記事を書いてるみたいですし。
いろいろと情報が少ないので、回答が難しいです。 ○サーバーとは何ですか? ・どのOSですか? ・管理者は誰ですか? Linuxや他のUNIX系だと、すでに使える状態の時もあります。 管理者(root)が自分だと、アプリケーション管理コマンドを使ったり、ソースからビルドしたりもできます。 しかし、インストールが制限されている等の場合には使えません。 ○どのemacsですか? ・サーバー側?ローカル側? ・GUI?CUI? 簡単なのは、サーバー側のCUI。TeraTermの文字の画面でemacsを操作します。 サーバー側のGUIだと、Windows側でXサーバーを用意する、あるいはVNCのような環境を用意する必要があります。 Windows側のemacsを使ってサーバーのファイルにアクセスするには、共有フォルダとしてマウントする等の工夫が必要です。 ○ emacsの設定 これは範囲が広すぎて説明できません。 もっと具体的に何の設定がしたいか書いてください。
一例。 「プロ」というのが「プロセス」のことだとしたらですが。
>　「わざわざ、『ブロックを引数として自作メソッドに与える』 >　ことの利点ってなに？」 自作メソッドの場合、ブロックを引数として自作メソッドに与えることの利点はない、といって良いかと思います。 そもそも、ブロックを引数を使用することの意味（利点）についてですが、私は以下のように考えています。 ある共通（に使用される）メソッドを外部に提供する場合、そのメソッド呼び出し時、呼び出し側の都合により、 呼び出し側で決めた特殊な処理をそのメソッドで実行してほしい場合に、ブロック引数を使用することにより それが最も低コストで実現可能となる。 例えば、共通なメソッドとしてソートについて考えて見ましょう。 ソートとはある約束に従って、データを並べ替えることです。 ある約束とは、昇順に並べるか、降順に並べるか等の並べ方に関する規則です。 この昇順、降順等の並べ方に関する規則をどのようにして実装するかということですが、 通常、以下の２通りの方法があります。 １）並べ方の規則をある引数の具体的な値で指定させる。 例えば、並び順（１：昇順　２：降順）を引数で指定する方法です。 ２）並べ方の規則を呼び出し側に記述させる。 これが、ブロックを引数として指定するやり方で、 昇順でソートしたい場合、そのようにブロック内に記述し、 降順でソートしたい場合、そのようにブロック内に記述します。 では、上記のどちらがよい方法かということですが、各々の長所、短所は以下のようになります。 １）の方法について（引数でソート順を指定する方法） 長所： パラメータの指定がわかり易いので、初心者でも簡単に利用可能。 短所： ソート時の並べ方が、あらかじめ決まっているので、別の並べ方が必要になった場合は、 ソートメソッド自体も変更が必要になる。 例えば、昇順、降順のほかに以下のような並べ方が必要になったとします。 「奇数を前半にならべ、偶数を後半にならべる。奇数については昇順にならべ、偶数については 降順にならべる」 これを実装するためには、引数に「３：特殊ソート」を追加し、更にソートメソッド自体も 修正する必要があります。 ２）の方法について（ブロックを引数で指定する方法） 長所： 上記の特殊ソートのようなソートが必要になった場合でも、ソートメソッドは一切変更の必要はない。 呼び出し側で、ブロック引数内にその規則を記述すれば、実現可能となる。 短所： ブロック引数の使い方が、初心者にはハードルが高いので、バグを誘発しやすい。 上記を踏まえて、ブロックを引数としてソートを行なう場合、どのくらい自由自在にソートが可能かを以下の ソースで確認して下さい。 -------------------------------------------- datas = [ 10,13,15,16,5,6,80,81,50,51,100,120] # そのまま表示 p "そのまま表示" p datas # 昇順ソート（ブロック指定無しのソート） result = datas.sort p "昇順" p result # 降順ソート result = datas.sort{|x,y| y<=>x} p "降順" p result # 特殊なソート # 奇数を前半に、偶数を後半に並べる。 # 奇数は昇順に並べる。 # 偶数は降順に並べる。 result = datas.sort{|x,y| if x%2 == 0 # xが偶数の場合 if y%2 == 0 # yが偶数の場合、降順ソート y<=>x else # yが奇数の場合、yを前半へ 1 end else # xが奇数の場合 if y%2 == 0 # yが偶数の場合、yを後半へ -1 else # yが奇数の場合、昇順ソート x<=>y end end } p "特赦なソート" p result # 1人は[名前，性別，年齢]の配列（性別は1:男、2:女） people = [["taro",1,20],["hanako",2,20],["jiro",1,18],["aiko",2,22],["saburo",1,50],["hanae",2,55]] # そのまま表示 p "そのまま表示" p people # 名前順（ブロック指定無しのソート） p "名前順" result = people.sort p result # 性別、年齢順 result = people.sort{|x,y| if x[1] != y[1] x[1] <=> y[1] else x[2] <=> y[2] end } p "性別、年齢順" p result -------------------------------------------- 実行結果は以下のようになります。 -------------------------------------------- "そのまま表示" [10, 13, 15, 16, 5, 6, 80, 81, 50, 51, 100, 120] "昇順" [5, 6, 10, 13, 15, 16, 50, 51, 80, 81, 100, 120] "降順" [120, 100, 81, 80, 51, 50, 16, 15, 13, 10, 6, 5] "特赦なソート" [5, 13, 15, 51, 81, 120, 100, 80, 50, 16, 10, 6] "そのまま表示" [["taro", 1, 20], ["hanako", 2, 20], ["jiro", 1, 18], ["aiko", 2, 22], ["saburo", 1, 50], ["hanae", 2, 55]] "名前順" [["aiko", 2, 22], ["hanae", 2, 55], ["hanako", 2, 20], ["jiro", 1, 18], ["saburo", 1, 50], ["taro", 1, 20]] "性別、年齢順" [["jiro", 1, 18], ["taro", 1, 20], ["saburo", 1, 50], ["hanako", 2, 20], ["aiko", 2, 22], ["hanae", 2, 55]] -------------------------------------------- 結論としては、 個人環境で開発を行なう場合は、ブロックを引数とするメソッドは作成する必要はない。 理由は、メソッドに対する要件があらかじめ決まっているので、開発後にもし要件が追加に なっても、その時点で対応すればよい。 但し、rubyで標準で提供されているメソッドでブロック引数をとるものについては（例えばsortメソッド） そのブロック引数の記述の仕方を理解しておく必要がある。 となります。
楽しく入門するなら、以下がオススメです。 Head First Rails http://amazon.jp/dp/4873114381 ストーリー仕立てなので、読んでいて楽しかったです。
＞モジュールを使わずに、メソッドの名前をライブラリごとに変える、たとえば、ライブラリの名前をメソッドの先頭につけても同じ（たとえば「山田太郎」、「鈴木太郎」という名前にする）ということになるのでしょうか？ 別にかまいません。 ただし、家庭内でも「太郎」でなくフルネームで呼び合うことになるので、ややうっとおしいか。
> windows8ではできないのでしょうか？ できないことはないが、Ubuntuを導入するのとどっこいどっこいの面倒くささ。 > また、コンピュータに詳しい友達がうぶんつをどうのこうのと言ってたのですが > どういう風にするとうぶんつを使えるようになるのでしょうか？ そのお友達に聞くのがもっとも確実 「恥しくて聞けないよー」という場合は諦める > ちなみに所謂情弱で、Googleで調べても意味が分かりませんでした 入門書的な本を買うべき。rubyなら日本語の本もいっぱいある
No1です。テストはしていませんが、 class Range_List < Hash def initialize(hash) 　@list=hash end def [](other) 　@list.each { |range, value| 　　return value if range === other 　} 　nil end end def Range_List(hash) 　Range_List.new(hash) end で、 angle_to_direction = Range_List( a..b=>c, d..e=>f, g..h=>i, ～～)
View.new する中で Tk.mainloop がぐるぐる回ってるから、それを外に出せば？
diffは結構高度なことをやっているので、同じようなことをやるのは大変です。 それこそRubyからdiffを呼び出せば良いのですが、 それか、diff-lcsというのがありますので、それを使われてはいかがでしょうか。 http://rubygems.org/gems/diff-lcs rubygemsでインストールできます。他にもdiffから始まるものがたくさん有りますので、利用可能かもしれません。
#2です。windowsで実行する場合ですが 改行コードがCR+LFでファイルへ追加書き込みが希望でしたら ファイルオープン時、 CSV::open("output.csv","a") do |writer| としてください。 改行コードがCR+LFでファイルへ上書き書き込みが希望でしたら（以前のファイルの内容は削除されます） ファイルオープン時、 CSV::open("output.csv","w") do |writer| としてください。
＞Rubyの本に、「$」はグローバル変数の指定として、次のような複数の扱い方があります。 本の名前が書いてありませんが、入門書ですかね。入門書には全部書いてないことも多いですよ。 わからないことがあったらマニュアルを見る習慣をつけましょう。 マニュアルの $? の説明部分には、$? には、nilもしくはProcess::Status 型のオブジェクトが入っていると書いてあります。 従って、$? の使い方はマニュアルのProcess::Statusのクラスの説明の所を見てください。
ki073とほぼ同じ回答になってしまいますが 何らかの理由で返り値としてnilを返したいからだと思います irb上で使っている場合はディスプレイへの出力を抑えたいから 関数内部の場合は、返り値をnilにしたいカラダと思います
こんにちは ruby 1.9.3では以下で動いているようですけれども たしか1.8.7では上手く動かなかった記憶が……" --- # coding: Windows-31J require 'open3' Open3.popen3("dir") do |stdin, stdout, stderr| #stderr.close #stdin.puts "foobarbaz" #stdin.close str = stdout.read puts str end --- 標準入力だけで良いのであれば以下は如何でしょうか ----- str = `dir` # dirの両側はバッククオート(shift+@)です。 puts str -----
こんにちは 以下の様に表示したい拡張子をセミコロンで区切って並べてみて下さい。 ---------------------------------- # coding: windows-31j require 'vr/vruby' require 'vr/vrcontrol' class MyForm < VRForm include VRCommonDialog def construct self.caption = 'テスト' self.move(0,0,500,500) addControl(VREdit, 'edit1' , "", 0,0,400,25) addControl(VRButton,'button1',"File", 400,0 ,90,25) end def button1_clicked file = openFilenameDialog([["すべて","*.*"],["テキストファイル","*.txt; *.csv"]]) @edit1.text = file if file end end VRLocalScreen.start(MyForm)
Wayback Machine 参考URL：http://web.archive.org/web/20030210003325/http:/ …
No3です。 ＞Numeric並に手軽に呼び出せた方が良いと思ったからです。 それは無理です。せいぜい、組み込みクラスのRationalのように、 def Angle(x) Angle.new(x) end と、クラス名と同名の関数（Kernelのメソッド)を定義するくらいですね。 ＞クラスのみ参照で、戻り値(Numeric)を取得したいです。 ＞angle　　# => 30(Numeric)のオブジェクト いやだから、それはわかっていて、それを文字通りにするのは無理なので、それに対しての回答が、 ＞数値演算関係がすべて定義されているなら、あとは to_int to_i to_f to_s inspect 等を適切に定義すれば良いです。 です。 p angle で 30 を表示するためには、inspect を定義すれば良いし、puts angle なら to_s を定義すれば良いと言うことです。 ただ、 ＞30 + Angle.new(30) ＞Numeric側の演算子定義を直すのも手なのですが、 ということは、上記回答の前提の、「数値演算関係がすべて定義されているなら」もまだと言うことですね。 30 + Angle.new(30) の結果は、Angleオブジェクトじゃ無くてNumericオブジェクトということでいいですか？であれば、Numericクラスを修正するので無くAngle#coerceを定義してください。 class Angle def coerce(other) [other, @angle] end end ただ、そもそも 30 + Angle.new(30) などという計算をするのはおかしくないですか？ Angle.new(30) + Angle.new(30) とするべきでは？
Rubyがインストールされているとして（されてないなら「Ruby Windows インストール」で検索）、 ARGF.each_line do |line| line.gsub!(/あ/,"い") line.gsub!(/う/,"え") puts line end というファイルを作り、BATからは、 ruby Rubyファイル名 処理対象ファイル名 > 出力ファイル名
そもそもIPアドレスは、ネットワークインタフェースに紐づくものなので、何をもって「自分のIPアドレス」とするかを明確化したほうがよいと思います。 一覧を取得するなら、回答No.1さんが書かれているように、ifconfigの出力を整形するのが一番手っ取り早いかと。 あるいは外部と通信するためのIPアドレスを指定したいということなら、デフォルトゲートウェイにつながるインタフェースを判別し、そのIPアドレスを取得するとか。
規模関係なしにテーブルは１つじゃないかな。 同じ項目のテーブルは複数持たない設計が一般的だと思うよ。 いちいちモデル、エンティティなんかを複数作るなんて非効率だし、データを取得するロジックだって無駄が多くなる。 技術的には自動的に作れるけど
どこのレンタルサーバーかが秘密にされているので、推測ですが、CGIの拡張子はcgiだけなのでは？ リネームしてみてください。 許可されていれば、.htaccessの設定で、.rb もCGIと認識させられます。 AddHandler cgi-script .rb
Rubyのモジュールやクラスは定数です。同じ名前空間で同じ名前の定数を定義することはできません。 ですから、 class A end module A end とすると、A is not a module というエラーになります。 これは、クラスとして定義した A をモジュールとして開き直そうとしています。 但し、この class A と module A が別々のファイルに記述されていて、 class A、または。module A を呼び出した場合エラーにはなりません。 なぜなら、Ruby は定数の探索をして最初に到達したものを採用するからです。 そしてご質問のケースの場合、Ruby は module A を見つけたがクラスではないので、エラーを出しています。 a = A # => エラーにはならない。 a = A.new # => エラーになる。 つまり、同一の名前空間に同じ名前のクラスとモジュールを記述することはコーディングミスです。 ファイルが分かれていれば、呼び出さない限りはエラーにはなりませんが、 これではまともなプログラムが書けません。 同じ名前を使いたければ、名前空間を分けるようにしましょう。 例えば、 # coding: utf-8 module Dog 　class Voice 　　def play 　　　puts "わん" 　　end 　end end module Cat 　module Voice 　　def cry 　　　puts "にゃあ" 　　end 　end end tama = "ねこ" tama.extend Cat::Voice johns_voice = Dog::Voice.new tama.cry #=> "にゃあ" johns_voice.play #=> "わん" のようにします。
>これはミラー・ラビン法でしょうか？ここで使われている素数判定法の中身をご存じでしたら教えてください。 素数のクラスの使用するためには require 'prime' が必須です。 このprimeの中身が、あなたの求めているソースになります。 私の環境で（windows7)にrubyをインストールした場合、 （c:\Rubyにインストールしました。） （rubyのバージョンは1.9.3p374 (2013-01-15) [i386-mingw32]） C:\Ruby\lib\ruby\1.9.1\prime.rb に、素数クラスのソースがあります。 あなたの環境の詳細は、不明ですが prime.rbがソースになりますので、 libの下を検索すれば見つかる筈です。
https://rvm.io/rvm/install/ より 3. Reload shell configuration & test Close out your current shell or terminal session and open a new one (preferred). You may load RVM with the following command: user$ source ~/.rvm/scripts/rvm とあります。 このsourceコマンドのことを言っているのなら、新しいシェルの度に毎回実行しろ、ということのようです。 毎回入れるのが手間で常に有効にしたいのなら、.bashrcにでも書いておけばよいでしょう。
そこに悩むくらいなら、別の名前にして inRange(Vector[3, 8], Vector[(0..10), (5..8)]) とか myVector[3, 8].inRange(myVector[(0..10), (5..8)]) とかにしたらどうでしょうか?
こんにちは > unterminated string meets end of file メッセージのとおり、文字列(string)が終結しないままプログラムファイルの最後に達してしまいましたというエラーです。エラーの出たプログラムで、３カ所の文字列前後のダブルクォーテーションの閉じ忘れはありませんか？ ちなみに私の環境では、以下のプログラムでファイルダイアログが正常に表示されます。 ----- # coding: Windows-31J require 'vr/vruby' frm=VRLocalScreen.newform #frm.extend MyForm #MyFormを定義してないのでコメントアウトしました frm.move 100,100,300,300 frm.create frm.show file = SWin::CommonDialog::openFilename(nil, [["テキスト(*.txt)","*.txt"]], 0x1000, "ファイル選択") -----
「デプロイ」は他の項目に比べて細かすぎる感じです。 本番での運用を開始することを言いたいのだと思いますが、「本番運用開始」「カットオーバー」「本番リリース」といった表現にした方が良いでしょう。 開発環境・テスト環境に配置するのも「デプロイ」ですし。 また、設計工程やそれと対になるテスト工程は、複数の段階を設けることが多いですが、テストを一つの段階として記述するなら、単に「設計」とすれば良いのではないでしょうか。 既にコメントが付いていますが、この様な工程に関する考え方は非常にウォーターフォール的です。 http://itpro.nikkeibp.co.jp/article/lecture/2006 … http://ja.wikipedia.org/wiki/%E3%82%A6%E3%82%A9% … ソフトウェア製造ではなくソフトウェア『開発』である以上、カットオーバー以前のほぼ全ての工程は本質的に設計の一部ともいえます。 http://web.archive.org/web/20080803072849/www.bi … http://www007.upp.so-net.ne.jp/kengai/fowler/new …
No1です。 ＞一度正規の方法でこのページに行っていると、 ＞ブラウザを再起動するまではURL直打ちでいけるので やはりそういうことですか。 クッキーを削除して起動し直したブラウザでやるのと同じページから手でやるのと同じ手順で、Mechanizeでも処理してください。
エラーの理由はちゃんとメッセージに書いてありますよ。 can't convert nil into String nilをString(文字列)に変換できない よって、どちらかがnilということで ・array1[m]が文字列ではない ・array2[n]が文字列ではない に該当します。具体的には ・termがnil ・dic_trans_noun[n]がnil のどちらか、あるいは両方です。 さらに、 a+b は a.+(b)であること、nilには+メソッドが定義されていないことから、「nil+文字列」ではNoMethodErrorになります。 TypeErrorにはなっている、ということは、「文字列+nil」なので ・dic_trans_noun[n]がnil が原因です。 dic_trans_noun[n]がnil、ということは次の2通りが考えられます ・実際にdic_trans_nounのn要素にnilが代入されている ・nがdic_trans_nounの範囲外になっている dic_trans_nounについての記述がここには無いので、どちらの理由かは不明です。 対処法ですが ・nilの場合は別の処理をする ・nilにならないようにdic_trans_noun、またはnを調整する となります。どちらがこのプログラムに求められる仕様なのかは、現在の情報だけでは。私には判断できません。
単にresourcesで指定をしただけだと、７つの基本アクションすべてが実装されているとみなされますので、それらの一つでもかけていると動かないはずです。show関数そのものをコメントアウトするのでなく、showの内部で実行する処理だけをコメントアウトして関数自体は存在するようにすればいいんじゃないでしょうか。 あるいは、resourcesにexcept指定をして、showアクションのみ除外するようにしてもいいと思います。 resources :users, :except => :show
>saveコマンドでのusersテーブルへの書き込みが、下記でnewしたuserの内容ではなく、fixturesフォルダの下の、users.ymlのテストデータの内容が書き込まれるようなのですが、動作はそれでよいのでしょうか？また、YMLデータではなくて下記のデータを書き込ませるsaveの書き方とかはあるのでしょうか？ 回答： モデルの単体テスト（unit）実行時、まず、fixturesフォルダの下の、users.ymlがテスト用DBに書き込まれます。次に、テスト用スクリプトのsaveで実行した内容が、書き込まれます。 但し、test "user auth test" do が完了した時点で、saveで書き込んだ内容は、消滅します。 （次のテストは、fixturesフォルダの下の、users.ymlのデータ読み込んだ状態で、開始します） 従って、実際には、saveで実行した内容はテストDBに書き込まれます。 >後、現在、usersテーブルのhashed_passwordフィールドに、モデル（user.rb）の中で、パスワードのセッターを再定義するために、・・・・の記述を入れているのですが、現在何故か、YMLのデータが暗号化されないでそのまま入力されてしまっていますま。このメソッドの呼び出しは、上に書いたusersテーブルの内容またはYMLデータの書き込み時に、実行されると思っていいのでしょうか？ 回答： user = User.new(:name => "tanaka", :password => "pass", :password_confirmation => "pass") を実行したタイミングで実施されているはすです。但し、saveで実行した結果が消滅するために、実施されていないように見えるだけです。 以下、確認用のソースと実行結果です。（User.cryptは入力文字の後に:cryptを付加した文字を返す形で実装しています） test/fixtures/users.yml -------------------------------- # Read about fixtures at http://api.rubyonrails.org/classes/ActiveRecord/ … one: name: MyName1 password: MyPass1 password_confirmation: MyPass1 hashed_password: MyPass1_hash two: name: MyName2 password: MyPass2 password_confirmation: MyPass2 hashed_password: MyPass2_hash ----------------------------------------- test/unit/user_test.rb -------------------------------------------- require 'test_helper' class UserTest < ActiveSupport::TestCase test "user auth test" do users = User.all p "====user auth test_before===" users.each do |user| p user.name p user.hashed_password end user = User.new(:name => "tanaka", :password => "pass", :password_confirmation => "pass" ) assert user.save, 'Failure1 to save user!' users = User.all p "====user auth test_after====" users.each do |user| p user.name p user.hashed_password end assert true, 'Error auth test' end test "user get test" do user = User.new(:name => "AAAAA", :password => "BBBB", :password_confirmation => "BBBB" ) assert user.save, 'Failure2 to save user!' users = User.all p "===user get test_after===" users.each do |user| p user.name p user.hashed_password end assert true, 'Error Success to get' end end ----------------------------------------------- models/user.rb ----------------------------------------- class User < ActiveRecord::Base attr_accessible :hashed_password, :name, :password, :password_confirmation def User.encrypt(pwd) return pwd + ':encrypt' end def password=(pwd) @password = pwd return if pwd.blank? self.hashed_password = User.encrypt(@password) end end ---------------------------------------------- 実行コマンド rake db:test:load rake test:units TEST="test/unit/user_test.rb" 実行結果 --------------------------------------------------- # Running tests: "====user auth test_before===" "MyName2" "MyPass2_hash" "MyName1" "MyPass1_hash" "====user auth test_after====" "MyName2" "MyPass2_hash" "MyName1" "MyPass1_hash" "tanaka" "pass:encrypt" ."===user get test_after===" "MyName2" "MyPass2_hash" "MyName1" "MyPass1_hash" "AAAAA" "BBBB:encrypt" . Finished tests in 0.486803s, 4.1084 tests/s, 8.2169 assertions/s. 2 tests, 4 assertions, 0 failures, 0 errors, 0 skips ------------------------------------------------------ 半角空白で投稿のため、インデントがずれています。
translation_ja.ymlの記述に問題があります。 ymlはインデントが命です。インデントは半角の空白のみ使用可能です。 タブ、全角空白を、使用すると正しく動作しません。以下のように記述してください。 --------------------------------------- ja: 　　activerecord: 　　　　models: 　　　　　　demandapp: "要望" #g 　　　　attributes: 　　　　　　demandapp: 　　　　　　　　acquisition: "補足" #g 　　　　　　　　class1: "大分類" #g 　　　　　　　　class2: "分類" #g 　　　　　　　　content: "内容" #g 　　　　　　　　derivery: "納期" #g 　　　　　　　　report_count: "件数"　　#g 　　　　　　　　source: "提起" #g 　　　　　　　　state: "状態" #g ---------------------------------------- 尚、このgooのサイトは半角のインデントは使えないので、全角で投稿しています。 あなたが、この記述をするときは、必ず半角の空白で記述してください。 又、 report_count: "件数　#g"　ですが これは report_count: "件数"　#g の誤りと理解しました。 参考までに index.html.erbの内容と実行結果です。 ------------------------ <h1>Listing demandapps</h1> <table> <tr> <th>Acquisition</th> <th>Class1</th> <th>Class2</th> <th>Content</th> <th>Derivery</th> <th>Derivery</th> <th>Report count</th> <th>Source</th> <th>State</th> <th></th> <th></th> <th></th> </tr> <% @demandapps.each do |demandapp| %> <tr> <td><%= demandapp.acquisition %></td> <td><%= demandapp.class1 %></td> <td><%= demandapp.class2 %></td> <td><%= demandapp.content %></td> <td><%= demandapp.derivery %></td> <td><%= demandapp.derivery %></td> <td><%= demandapp.report_count %></td> <td><%= demandapp.source %></td> <td><%= demandapp.state %></td> <td><%= link_to 'Show', demandapp %></td> <td><%= link_to 'Edit', edit_demandapp_path(demandapp) %></td> <td><%= link_to 'Destroy', demandapp, method: :delete, data: { confirm: 'Are you sure?' } %></td> </tr> <% end %> </table> <br /> <% Demandapp.column_names.each do |col| %> <th> <%= t("activerecord.attributes.demandapp.#{col}") %> <%#= Demandapp.human_attribute_name("#{col}") %> </th> <% end %> <br /> <%= link_to 'New Demandapp', new_demandapp_path %> ------------------------
現在pagenateが動いているものがありますので、確認してみました。 Scientific Linux 6でRuby1.8.7、rails 3.2.11ですので参考にならないかも知れませんが、とりあえず 質問欄の番号に合わせています 1) rubygemsでインストール will_paginate (3.0.4) 2) Gemfileの最後に gem 'will_paginate' を追加 3) sudo bundle installを実行 4) controllerのindexの記述 def index @pdbs = Pdb.paginate( :page => params[:page], :per_page => 30, :order => "entry_id ASC") respond_to do |format| format.html # index.html.erb format.json { render :json => @pdbs } end end 以下はjsonで保存しているものがあるので記述しているような記憶が？？　曖昧です indexしかpaginateは使っていません 5) index.html.erb <table>～</table>の下に <p><%= will_paginate @entry_id %></p> 以上で正常に動いています。
もし情報がなければ？ このような本があります 一読してはいかがですか ---------------------- １４歳から始める Rubyインターネットプログラミング教室 掌田（しょうだ）津那乃（つやの）著 ISBN978-4-89977-182-1 C3055 Y2381 出版社：ラトルズ ----------------------
module_functionは、privateメソッドで かつ モジュールの特異メソッドなので、(リファレンスを参照のこと) モジュール名.メソッド名 以外の呼び出し方はできません。 解決法は、そもそも何をしたいのかによります。
最低限、そのメッセージを読んで考えるくらいはしましょうよ どんな熟練者だって、全てはそこからです。 checking for Magick-config... yes checking for ImageMagick version >= 6.3.5... yes と、ImageMagickの実行ファイルは使える状態なのに checking for InitializeMagick() in -lMagickCore... no checking for InitializeMagick() in -lMagick... no Can't install RMagick 2.12.2. Can't find the ImageMagick library or one of the dependent libraries. と「ImageMagckのライブラリか、それが依存しているライブラリか、どれかが見付からない」、と出ているので、その通りなのことでは? より詳細は Check the mkmf.log file for more detailed information. とあるのだから、 mkmf.log を読みましょう。 作業を行なったOSはなんですか? ImageMagckはどうやってインストールしたのですか? パッケージ管理ツールでインストールした場合、 実行用の最小限のパッケージと、今回のような開発に使用するパッケージとが分かれている場合があります。 ImageMagick-devel とか ImageMagick-dev とか、そんなパッケージはありませんか?
1.9で、ASCII以外の文字を使うときには、ソースの前の方(1行目か2行目)で、文字コードの種類を指定する必要があります。 #! ruby # encoding: Shift_JIS ←これが必要(実際の文字エンコーディングに合わせて指定) puts "あいうえお" とか。 デフォルトのエンコーディングがUS-ASCIIなので、いわゆる半角英数記号以外は使えません。 使えるエンコーディング種類は、下記で。 ruby -e "puts Encoding.list.map(&:to_s).sort" Ruby 2.0 では、デフォルトが UTF-8 になるそうです。
まず、eRubyはプログラムでなく仕様です。eRubyを実現するプログラムとしては、Cで書かれたerubyとRubyで書かれたERBがあります。 WindowsにRubyをインストールすると、ERB.batも自動的にインストールされますので、そのままERBを使うのが楽です。Windows用のerubyが配布されているのどうか知りません。 PHPもApacheのモジュールとして動かす方法とCGIとして動かす方法があるように、Rubyも同じです。 Windows用mod_rubyが入手できないのであれば、ERB.BATをCGIとして動かすのがいいと思います。 たとえば、Apache設定で、 Options +ExecCGI AddHandler cgi-script .rhtml して、 foo.rhtmlの1行目に下記のようにerb.batのフルパスを実際のインストール先に合わせて書く。 #!/ruby/bin/erb.bat <html><head><title>TEST</title> </head><body> PAI = <% puts Math::PI %> </body></html> WindowsのApacheは触ったことないので、違ってるかも。
macirbで実行すると同じようなエラーになりますねえ。 まあ、macirbで=beginと書くことはないので、特に問題はないかと思いますが。 macrubyでは他の方が書いているように、エラーにはなりませんよ。 試したバージョンは最新の0.12です。
ああ、なるほど。 私はこのサイトのソースを3分しか見ていないので 見落としがあるかもしれませんが、 このサイトはCookieをJavascriptで発行していますね。 ブラウザであればJavascriptが動作しますが、 Rubyでブラウザがわりのことをしようと思ったら、 Javascriptを独自に解析しないといけません。 この場合、セッションのキーがCookieで発行されていなければ、 そのままCookieで送っている情報をRubyで送ればOKなことが多いです。 Cookieの送信の仕方は、下記のサイトに記述があります。 http://d.hatena.ne.jp/mzp/20070216/cookie
要素の上限が分かっていることがほとんどなので、No.1の回答で良いのですが、ちょっと違った方法を紹介します。 histogram[value]=histogram[value] ? histogram[value] +1 : 1 histogram[value]を条件判断し、nilの時には1にするものです。まあ当たり前と言えば当たり前の方法です。 もうひとつ、 histogram[value] ||= 0 histogram[value] += 1 最初の行を追加します。これはnilの場合(falseも)に0を代入するというもので初期化ができます。 これらの場合いずれにしても代入していない要素はnilになりますので、後で0にしてやらないと不都合があるかも知れません。 グラフを書くところまで考えるなら、rsrubyでRの機能を使うのが便利なように思います。 gnuplotよりも高度なグラフが書きやすいのと、統計計算が簡単にできるので私はもっぱらrsrubyを使っています。 (Rをダウンロードして、gemでrsrubyをインストールします)
……えーと、ちっょと混乱してませんか？ まず、Ruby で扱ってるのはポインタでもアドレスでもなく参照です。 参照はポインタと違って演算することも直接値を指定することもできません。 というか、そういった危険な動作をできなくしたポインタ「のようなもの」です。 次に、あなたが提示された例ですが、C のポインタでも以下の通り動作は同じです。 int main(int argc, char** argv) { /* ポインタ参照先として用意 */ 　　int a1 = 1; 　　int a2 = 2; /* 使用するポインタ */ 　　int* p1; 　　int* p2; /* 1点目 */ 　　p1 = &a1; 　　p2 = p1; 　　p1 += 42; 　　printf("p2が指す先の値 : %d\n", *p2); /* 結果は43 */ /* 2点目 */ 　　p1 = &a1; 　　p2 = p1; 　　p1 = &a2; 　　printf("p2が指す先の値 : %d\n", *p2); /* 結果は 2 ではなく 43 */ 　　return 0; }
通常はto_fでしょう。 mapのto_i→to_fに変更でもいいし、 0.５<(x[3].to_f-x[2].to_f)/(x[3].to_f+x[2].to_f) と使うところで変更してもいい。 あるいは、(x[3]+x[2])<2*(x[3]-x[2]) と式を変形するとかでもいいです。 とにかく、整数同士の演算は整数になるので、小数になならない、と覚えてください
Rubyのバグのようですね。とりあえず回避のために、 row.map!{|x| x.sub(/\r/,'')} と、\r を削除してください。
このあたりを参考に http://jp.rubyist.net/magazine/?0017-BundledLibr … result(binding)が実行されたときに埋め込まれますので注意してください。 文字列の中に#{}で埋め組むよりも、場合によっては便利だったりしますので、HTMLではなく普通の文字列への埋め込みにも使っています。
name = 'file' + i + '\n' で文字列と整数を足し算しているのが原因です。 そのまま活かすとすると name = 'file' + i .to_s かな putsは改行文字が無ければ追加してくれます。有ったらそのまま出力します。 ただし '\n'ではなく、どうしてもつけたいなら"\n"にします。 また、name = "file#{i}" こんな書き方もできます。iを文字列に変換してくれます。 それとRubyを使う人はあまりforを使いません。私自身、実は今までforを使ったことはありません。 質問欄のプログラムは (1..10).each{|i| puts "file#{i}"} のように書く人が多い気がします。
> +nosuffixしてなければ、ruby/gemではruby1.8.x、 ruby1.9/gem1.9では1.9.xが使われるはず と書いたように、MacPortsでインストールしたRuby 1.9.xでは「1.9」というsuffix(後に付くもの)が付きます。 インストール時に+nosuffixを指定すれば、suffixが付きません。が、installed の結果は「ruby19 @1.9.3-p286_0+doc (active)」と nosuffixが無いので、1.9が付いています。 ただ、「ruby @1.8.7-p370_2 (active)」ともあるので、1.8.7もactiveで、/opt/local/bin/rubyが存在するはずなので、「opt/local/bin/ruby: bad interpreter: No such file or directory」というエラーとは状況が一致しないのが気になります。 sudo port -f deactivate ruby sudo port activate ruby でactiveしなおしたらこのエラー自体は治るかもしれません。 ただし、gemもrailsも1.8系になります。 1.9系を使うならgem1.9です あと、MacPortsには rb19-rails 等のrailsに関係するパッケージも用意されています。 Ruby1.9をMacPortsのものを使うなら、railsをはじめ、必要なものはrb19-で始まるパッケージをMacPortsからインストールして、足りないものはgem1.9で、というのがいいかと思います。
こんにちは こんなかんじで如何でしょうか？ -----ここから # coding: windows-31J ROOT_DIR = 'C:/root_dir' def add_str(file, char) File.open('temp.txt', 'w') do |fo| File.foreach(file) do |line| line.chomp! case line when 'A='; fo.puts "#{line}#{char}" when 'B='; fo.puts "#{line}(#{char})" else fo.puts line end end end File.delete(file) File.rename('temp.txt', file) end Dir.chdir(ROOT_DIR) Dir.foreach('.') do |subdir| next if /\.\.?/ =~ subdir next if File.file?(subdir) c0 = subdir[0] c1 = subdir[1] Dir.chdir(subdir) add_str('a.txt', c0) if File.exist?('a.txt') add_str('b.txt', c1) if File.exist?('b.txt') Dir.chdir('..') end -----ここまで
こんにちは。 >Rails側はDBから取得したデータをto_jsonでJSON形式に変換して >respond_toで返してあげればいいんですよね？ 使ったことないので調べた結果で申し訳ないのですがそのようです。 >UI側はこのデータを利用して構築するにはDOMでがりがり組むしかないんでしょうか？ これはどのようなものを作りたいかによると思います。 (ようはJSON形式のデータをどのように使うか) 例えばExtJSなんかを使うと結構凝ったアプリを比較的簡単に実装できます。 http://extjs.co.jp/ >これはRubyというよりjavascriptのカテゴリになるんでしょうか。 どちらかといえば比率的にはJavaScriptになると思いますが(画面構成をするのはクライアント側の話なため)難しいところです。
こんにちは 私も業務で似たようなプログラムを書いてデータ処理しています。 Rubyを覚えるとお手軽に処理できて便利ですよ！ こんな感じで如何でしょうか？ data.csvを読み込んで、output.csvに出力します。 CSVクラスは使ったことないので使用していません。 プログラムがどの様な動作をしているかは、ご自身で確認してみて下さいね。 ----ここから data = Hash.new{|h,k| h[k]=[]} # CSVファイル読み込み first_line = true File.foreach('data.csv') do |line| if first_line # 1行目読み飛ばし first_line = false next else ary = line.chomp.split("，") # CSVなので区切りは半角のカンマでは？ data[ary[1]].push(ary[7]) end end # データ出力 File.open('output.csv',"w") do |fo| data.each_key do |key| fo.puts "#{key},#{data[key].join(',')}" end end ----ここまで
すみませんが、eachの中でどのようなロジックにしたいのでしょうか？ 配列をeachする？ 配列の配列をeachして、その配列を何かで使いたい？ もう少し詳しく「何をどうしたいのか」教えてください。
2007年の記事ですよね?情報が古いです。 まず、エラーになる理由はちゃんと書いてあります 「AppleのX11が入っているから、XFree86は入れないよ」 って 最近のMacではXFree86は使われておらず、X.OrgのMac版であるXQuartzを使っています。 その意味でも、xfree86のインストールは不要です。 XQuartzは、標準ではインストールされないので、別途インストールする必要はあります。 そのメッセージを見る限り、すでに入っているかもしれませんが。 http://xquartz.macosforge.org/landing/ あと > Warning: port definitions are more than two weeks old, consider using selfupdate portの情報が古いようです。sudo port selfupdate してください 他のライブラリについては、調べてないのでどうなるかわかりません。
どのような処理をされているのか分からないので何とも言えませんが。 エラーメッセージに関しては、このサイトが参考になりますかね・・。 URL : http://www.odin.hyork.net/write/write0211.html
一度の処理で全てを確認しようとしないで、複数の処理で（行で）確認すればよいのではないでしょうか？
ぱっと見た感じの感想ですいませんが、文字コードがわからない状態なのでそうなっている用に見えます rss.items.first.title.encode("UTF-8").force_encoding("UTF-8") でいけるのではないでしょうか？
CSSであまり複雑な指定をしたこと無いのですが、おそらくXPathのほうが細かい指定が出来ます。 Nokogiriでしか確認していませんが、おそらくHpricotでもXPath指定が出来ると思います。 content / "./*[@class!='header' and @class!='footer']" ./* が直下の任意のノードで、[ ] 内がその選択条件です。 あるいはまとめて、htmlから直接、 html / "//div[@class='content']/*[@class!='header' and @class!='footer']" 任意のノードでなく、div と p だけに限るなら、 content / "./*[((name()='p')or(name()='div')) and @class!='header' and @class!='footer']"
質問文ではファイルを相対パスで指定していますが、実際にもそうなんですか？ Deploy後に実行するときのカレントディレクトリと、読み書きしようとしているファイルが存在するディレクトリが合っていないんじゃないかという気がします。
こんにちは、No.2です。 > 本では、インスタンス変数を使うには > 初期化しないと nil が返されると書かれています。 そうですね、@nameに値をセットしない（初期化しない）ままprint_nameメソッドを使用するとおかしなことになってしまいますね、失礼いたしました。 仰るとおり初期化をinitializeメソッドで行います。 （例によって段付けの為に全角スペースを使用しています） class Person 　def initialize 　　@name = "no name" 　end 　以下略 end taro = Person.new taro.print_name # => My name is no name あるいはset_nameメソッドを使用しないでインスタンスを作るときに@nameを設定してしまう場合は以下のようになります。 class Person 　def initialize(name) 　　@name = name 　end 　以下略 end taro = Person.new("Taro") taro.print_name # => My name is Taro > ArgumentError となってしまいます。 下のinitializeメソッドの例やset_nameメソッドの様に丸括弧をつけてメソッドに与えるデータ（パラメータ）を引数（Argument）といいます。 taro = Person.new("Taro")　 の"Taro"の部分ですね。 ArgumentErrorとは引数が必要無いのにメソッドを実行するときに引数をつけた、引数が必要なのに引数をつけなかった、つけた引数の数が必要な数と一致しなかった場合などに発生します。 以上、本題とは外れてしまいましたが補足をさせていただきました。 最後にNo.2のプログラムの最終行は jiro.print_name # => My name is Jiro の誤りでした（表示する内容の誤り）、失礼致しました。
a)calc.rbの保存先ディレクトリが想定と違う。 b)calc.rb.txtみたいに、余分な拡張子が付いてる。 ――とか。ファイルを確認してみては。
unpackしてるのだから、packすればよいかと。
つ　「git clean -dxf」 手短で失礼
content_forメソッドを使って差し挟むのが有効な方法ではないかなとおもいます ヘッダーの中で以下の様に記述しておいて、yileldの中にコンテンツを挿入できるようにしておいて <head> <title>Title</title> <%= stylesheet_link_tag "application" %> <%= yield :style_after %> <%= javascript_include_tag :application %> <%= yield :javascript_after %> <%= csrf_meta_tags %> </head> あとはそれぞれのVIEWで特殊なスタイルシートなどの追加が必要になったら <%= content_for :style_after do %> <%= stylesheet_link_tag "hoge" %> <% end %> の様に記述すると、hoge.cssを追加で読み込むように指定できます
No.2です MacRuby 0.12 (ruby 1.9.2) ですが、 No.3にkmeeさんが書かれているのと同じ結果です。 Errno::EISDIR: Is a directory - read() failed となります。 dir1が読み込みが禁止されている場合にはopenで Errno::EACCES: Permission denied - open() failed となりますので、実際にはeachの前の17行めのopenでエラーになっているのではないかと思います。 質問者さんはWindowsのようですので、エラーメッセージが微妙に違う可能性はありますが 課題のようですので、ヒントだけ Dir.glob("#{dir}/*")でファイル名を取得しするのがよいように思います。current directoryよりの相対パスでファイル名が得られます。 他にも気がついた範囲で （動作確認はしていないので正しいかは分かりません） 24行目directory?(fullpath)はクラスメソッドに 37行目temp = Tempfile::new(file)は temp = Tempfile.new(file)に 40行目f.read.each{|line|は f.each{|line|に
「rubyをコマンドプロンプトで使うとき」ですね? > ruby スクリプト名.rb ディレクトリ名 これでいいはずです。 ただし、ruby だけで実行できるように、PATHが通っている必要があります。
つなぐだけなら、ＣＳＶとか特に関係ないので、安易に、 col1=IO.readlines("add.txt") IO.foreach("master.csv") do |line| puts col1.shift.chomp + "," + line end
RailsとMacは特に関係はありませんよ。エディタは、人それぞれでしょうから、秀丸で書いている人だってもちろんいます。開発では、Eclipseというオープンソースの統合開発環境が広く使われていますが、これは標準でRailsに対応しているわけではないので、Railsに関してはEclipseを使わない人も多いようです。 私は、Aptana Studio 3という開発ツールを使っています。これは標準でRailsに対応しており、またRails対応のクラウドサービスとして有名なHerokuもサポートしているのでかなり重宝しています。 正直、Railsに関してはかなりばらばらだと思いますので、会社で指定の環境などがあるか確認して、特に無ければ慣れたエディタでそのまま書いてもいいと思いますよ。ただ、補完機能や構文チェックなど基本的な機能ぐらいは揃っているものにしたほうがよいでしょう。
丁度翻訳されたし、これでいいんじゃね http://japanese.railstutorial.org/chapters/begin … ruby もやるに越したことはないけど、rails やりつつ必要に応じて文法を確認する程度でも何とかなるような気もしなくもない、どうだろう。
やはりケースバイケースですが、初心者さんのようなので、一番代表的な方法はattrubutesメソッドにhashで引き渡してしまう方法 hash = { :title => "title" } @blog = Blog.new @blog.attributes = hash <%= form_for(@blog) do |f|%> <%=f.text_field :title, value:@blog.title %> <% end %> あとはnewメソッドにハッシュで引き渡してあげるとか Blog.new( title:"title" ) JavaScriptなどもありますが、高度な方法は聞かれていないようなので 上記の例で大丈夫でしょう
絵（というよりもデザイン）に興味や必要性は感じるのですが、そこまで真剣に取り組めた事の無い自分からするとものすごく羨ましい悩みです。 自分より高次元の悩みを持たれてる方へアドバイスなんておこがましいかなとは思うのですが、どうしても２点お伝えしたいなと思いました。 まず、その二つに意思を持って取り組んだすごいハッカーの名著があります。 翻訳者が著名な日本人ハッカーがであることも含めて奇跡の一冊ですので、これは是非読んでみてください。 ハッカーと画家 Paul Graham (原著), 川合 史朗 (翻訳) そもそもRubyがこの本に出てくるLispという言語に近いとも言われているので、御自分がPHPよりRubyに興味を持たれた理由のヒントも見えるかもしれません。 もう一つ、「今ハマれるものにハマる」ことをおすすめします。 モチベーションのバランスなどという物を取ろうとして、せっかくの才能がどちらについても頭打ちになってしまうことを恐れます。 「ハマる」程のモチベーションの高さは、いつでも得られるものではありません。 絵とプログラミングどちらの経験も今後無駄になるものでは無いでしょうし、どちらも環境が今しか許さないというものではないでしょう。（高価な研究機材が必要とか） であれば、何かにハマってるうちはそこに没入しましょう、だらだらと興味ないことの勉強をしたときの数年分を、一瞬で得られることもあります。 以上、どうしてもお伝えしたかったのはこの２点です。 おまけですが、Tumblrの時のようにプログラミングも是非github等に置いていつでも好きなときに触れるようしてみてください。 学習経緯の段階でも、きっと役立ちます。
見たところ、mongralでも起動が出来ているのを確認していないようなので 原因がpassengerの設定にあるのか、railsの設定にあるのかを切り分けましょう！ (railsのインストールしてあるディレクトリでで） bundle exec rails server --port 80 -e production のコマンドで。ポート番号と動作環境を指定して、railsが立ち上がるかを確認できたら railsでの設定は問題なのは確認できるので、それを目指してみましょう で、見たところbundle installを実行して、必要なgemをインストールしたかの記入がないので rails本体が最低限必要としているgem以外はインストールされていないようなので bundle installを実行したかを、まずはおしえてホシイです あと、bundle installを実行して無事にgemがインストールされている場合、インストール作業を行ったあたりで実行したコマンドを、historyコマンドで取り出して、貼り付けてもらえればもう少しお力になれます
User classを定義していないからです。 中略のところが大事なのですが。 http://oshiete1.nifty.com/qa7409116.html のNo.1に実際に動くプログラムを載せておりますので参考に。 # table作成 の前までで何かが欠けているはずです。
こちらの動画をご覧になってはどうでしょう？ ドットインストール Rubyの基礎 (全32回) http://dotinstall.com/lessons/basic_ruby
ロリポップ!のレンタルサーバーでRubyとNokogiriを使いたい……ということでしょうか? ロリポップ!ではRedHat Linuxを使用して、Rubyも使用可能な言語に含まれているので http://nokogiri.org/tutorials/installing_nokogir … に記載の方法でNokogiriをインストールすればよいと思います。 ……が、自分はロリポップ!を使っていないのでネットワーク越しにどうやったらいいのかはわかりません。すみませんがその辺は他の回答者様にお任せいたします。
「ちなみに、 サイバーエージェントは(1)ですか(2)ですか？」 1) 2) 3) 全部募集してるよ？ 勢いのあるところはすごいね！ 必要とされる人材は、どんな業務をしているかと、規模できまるから、気になる会社の採用ページを自身で見てまわると、だいぶ雰囲気がつかめるんじゃない？
正にそのものという機能でFile.basenameというのがあります。 filepath = "public/foror/filename" p File.basename(filepath) #=> "filename" また正規表現リテラルは両端をスラッシュで囲む必要がありますね。 p filepath[/[^\/]+$/] #=> "filename" 下記マニュアルを参照してみてください。 Fileクラスマニュアル http://doc.ruby-lang.org/ja/1.9.3/class/File.html 正規表現リテラル http://doc.ruby-lang.org/ja/1.9.3/doc/spec=2flit …
f.class f= File.open("hello.txt") ; puts f.class すると Ｆｉｌｅ と表示されます。 なお、言葉の使い方がおかしいです。 少なくとも、「このfの変数にどんなクラスのインスタンスが格納されているか知りたいのですが、」 より正しくは、「この変数fの指しているインスタンスのクラスを知りたいのですが、」
cpでは依存関係が足りないのでは？ >require～ 不足しているのですよね。 同じ経験のようですが、結局入れ直しが早いのでしょうか。 http://tech.portalshit.net/2011/07/29/rvm-bad-in … パスが間違っているだけだと思いますけどね。
No2です。 openの時に"r:utf-8"の指定で動作が変わると言うことは、Encoding.default_external が適切に設定されていない(utf-8でない)という事です。/usr/local/bin/ruby ということはLinuxだと思いますが、ロケールがutf-8でないのでしょう。 utf-8で統一するならopenごとに指定するので無く下記のどれかにすると良いと思います。 (1) 実行プロセスの環境変数 LANG を ja_JP.UTF-8 に設定する (2) スクリプトの最初の方で、Encoding.default_external="utf-8" する (3) rubyの起動オプションに -Eutf-8 をつける( #!/usr/local/bin/ruby -Eutf-8 )
環境変数 RUBYLIBをshellで設定すれば、そこからライブラリを自動的に読んでくれます。 http://doc.ruby-lang.org/ja/1.8.7/doc/spec=2fenv … を参考に
まず pry と pry-doc をインストールします。 $ gem install pry pry-doc 次に pry を起動します $ pry おもむろに適当な数値オブジェクトに cd します pry(1):1>cd 1 すると divmod の内容が確認できます pry(1):1>show-source divmod ------------------ 直接 numeric.c を開いて読むほうが早いな。
何故分かったのかは簡単で、私も以前似た問題に出会ったからです 実際には、form_forの使い方で調べていくとわかりやすいと思います 例をとってみると、以下の２つの書式は、ほぼ同じ意味です 例1 <%=form_for :comic_masters, url: comic_masters_path, :method => "POST" do |f| %> <% end %> 例２ <%=form_for :comic_masters, url: url_for( :controller => :comic_masters, :action => :create ) do |f| %> <% end %> フォームの値の取り方や、ボタンを押した時に何処のアクションにジャンプするかは はrailsの規約にのっかれば決まりきっているので、裏側で自動変換してくれているのですね なんでcomic_masters_pathでPOSTすると、createアクションに行くのか comic_masters_pathって何なのかは 「rails restful」で検索するとわかると思います
http://doc.okkez.net/static/191/doc/spec=2fvaria … > 最初の代入はそのスコープに属するローカル変数の宣言になります。 > ローカル変数のスコープは、((*宣言した位置から*))その変数が宣言されたブロック、メソッド定義、またはクラス/モジュール定義の終りまでです とあります。 「最初の代入」は > total = 0 #行数の合計 > wtotal = 0 #単語数の合計 > ctotal = 0 #文字数の合計 です。例の場合、この外側にブロック等が無いので、ファイルの終わりがブロックの終わり=スコープの終わりです。 > l = 0 #file内の行数 > w = 0 #file内の単語数 > c = 0 #file内の文字数 これらは、eachのブロックの中で最初に代入されたので、ブロックにローカルな変数になり、ブロックの終わりのendまでがスコープで、その外では使えません。 # こういうのは「メソッドの中」とは言いません。 # メソッドの中、というの、普通は「メソッド定義の中」「メソッドの実装」を指します。 > ltotal += l > wtotal += w > ctotal += c ここのltotal,wtotak,ctotalは、ブロックの外で宣言されたltotal,wtotak,ctotalそのものです。 eachのブロックローカルなものではありません。
コマンドラインで -iオプションを使えば良いと思います。 % ruby -i -pe "$_.gsub! '俺の飯', '私のごはん'" memo.txt バックアップを残したければ -iに引数を渡して、 % ruby -i~ ... % ruby -i.bak ... とか。前者はEmacsのように memo.txt~、後者は memo.txt.bak とバックアップされます。 コマンドラインでなければ、fileutilsライブラリのmvの処理をopenのブロック後に 付け加えれば良いと思います。 require 'fileutils' ... open(...){...} FileUtils.mv 'after_memo.txt', 'memo.txt'
そもそもインスタンス生成の構文が違います。Rubyでは b = B.new と書きます。
＞gemで入れたプログラムはどうやって使えばいいんでしょうか？ 附属のドキュメントを読みます。 gem server と打つと、私の環境だと、Server started at http://0.0.0.0:8808 と出ます。 http://localhost:8808 とか、http://"gem server を打ったホスト名":8808 で、ドキュメントが見られます。 パッケージ名の右の [rdoc] をクリックするとローカルのリファレンスが、[www]をクリックするとウェブ上のサイトが表示されます。 ただ、リファレンスには、クラスの説明とメソッドの説明だけで、サンプルがあまりないことが多いので、実際には 検索してサンプルを探すことが多いですが。
＞スコープの違い スコープというのはソース上のレキシカルなスコープということでいいですか？ どちらも自明ですが、クラス変数は、class文から対応するend文までの間すべて。 インスタンス変数はインスタンスメソッドを定義するdef文と対応するend文の間。 もし、変数の生存期間のことであれば、クラス変数は最初に代入されてからプログラム終了までずっと。インスタンス変数はオブジェクトの生成後、最初に代入または参照されてからそのオブジェクトが参照されなくなるまで。 ＞あとクラス変数にはセッターやゲッター等のアクセスメソッドを設定できるんですか？ 自分でdef ～ endで定義すれば出来ます。attr_accessor のような仕組みは無いです。
rails初心者で、ただいま勉強中の過程で回答させて頂きます rails3で環境を作ったのならおそらくMogrelのサーバーを「rails server」コマンドで実行したのでしょう その場合「rails server &」と末尾にアンパサンドをつけてあげればrailsをバックグランドで実行できます （他の回答者様からも同じ言い権がありますが、Linuxではコマンド末尾に＆をつけると処理をバックグランドに回せます） ちなみに railsを終了させるには「ps ax | grep rails」コマンドで実行しているrailsのプロセス番号を調べて 「kill -9 <railsのプロセス番号>」を実行すれば無事に終了させられます この場合でも、railsのログは延々と出力されて、他のコマンドの実行結果と出力が混ざるので気をつけましょう Mogrelでのrails実行は、勉強のために実行する環境としては、まぁ、悪いものではないですが 身内以上の人に公開するにはpassengerかunicornの導入をオススメいたします （個人的には、passengerの方がややオススメ）
何に挫折しやすい、って言う意見なのでしょう? 「後で『C言語等をやろうとしたら』」挫折しやすい」ってことですかね? Rubyを先にやったら、Cの「低級」なところ(メモリは自分で管理しないといけない、とか、文字列の扱いが面倒、とか、)で「Rubyと違うからわからない」と、挫折するかもしれません。 でも、そういう人は、Cから始めても、同じように挫折すると思います。
こんなんか？ http://d.hatena.ne.jp/babie/20100506/1273157249
D:\ruby>cscript //E:rubyscript hello.rb と、//E オプションでスクリプトエンジン名を指定してください。
Macだと、TextMateを使ってる人が多いような気がします。 あとは普通に emacs や vim 使いが多いんじゃないですかね。 補完機能を欲している人はあまり見かけません。
「日本語」と「書類作成テンプレート」みたいな物です。 日本語が出来ても、それだけで仕事が出来るわけではありませんよね。 どんなに優れた言語があっても、それで優れたシステムが作れるわけではありません。 むしろ、優れた開発支援システム(=フレームワーク)を使うために、そこで使われる言語を選ぶ場合があります。
新しいArrayが欲しいならmap、既存のArray自体を書き換えたいならmap!が基本かなと思います。 （collectでもいいんですが） その中でいくつか記法は考えられるので、好きなものを選んで下さい http://ideone.com/WLxMN ただ、安全性を重視するなら to_i より Integer() の方がいいかなと思います。
installed_spec_directoriesで検索したら、いろいろ出てきました。 ようするに、それまでのgemと両方混ぜて使おうとするとよくないようです。 対策としては ・configureに--disable-gemを付けて、ruby1.9.2のgemを無効にする ・旧gem関連のファイルを削除して、ruby1.9.2のgemだけを使う。GEM_HOMEはこちらで関係ありそう のどちらからしいです。 RDocについてはわかりません。こちらでは特になにもなかったので
pattern = [/aa/,/ff/,/gg/] upat = Regexp.union(*pattern) IO.foreach("foo.txt") do |line| puts line if upat =~ line end
Ruby1.8で、ソースに日本語を使うには、起動オプションでeuc-jpだと -Ke と指定する必要があります。 #!/usr/bin/ruby -Ke など。 プログラム中で$KCODE="e"等と書いても、それが効力を発するのは実行時のその文以降で、ソースプログラム解釈時(コンパイル時）には無効です。
sleep 1 while @@ie.Busy == true のsleepが失敗するのは、どこかでsleepメソッドを定義してしまっていることが原因ではないかと思います。 おそらく、 Kernel.sleep 1 while @@ie.Busy == true を使うことで解決するのではないかと思います。 (Kernel.sleepを再定義していればどうにもなりませんが。)
Ruby(プログラミング)入門ということなら以下２冊でどうでしょうか？ はじめてのRubyプログラミング http://www.amazon.co.jp/exec/obidos/ASIN/4798117 … Ruby 1 はじめてのプログラミング http://www.amazon.co.jp/exec/obidos/ASIN/4798019 … ゲームプログラミングという目的があるなら以下２冊でどうでしょうか？ Rubyではじめるゲームプログラミング http://www.amazon.co.jp/exec/obidos/ASIN/4777512 … Rubyゲームプログラミング http://www.amazon.co.jp/exec/obidos/ASIN/4839932 … あと作りたいゲームの種類によっては、RubyではなくC++を勉強したほうがいいかもしれません。
IO#readを使って全部の内容を読み込んでいるので、aaaはString。 文字列の特定の箇所を取り出すには [nth, len] による指定や、slice(nth, len) メソッドが使えます。 どこから読むかを @startとでもしておいて def read(size) 　ret=@data[@start,size] 　@start+=size return ret end @dataを破壊してもいいなら、先頭からsizeだけ削除していくとか。
rails全然わからないので、以下は勘回答です。 使えなさそうだったら無視して下さい。 メソッドチェーン眺める限り、 param[:file] とやらでFileのインスタンスとってる気がします。 （なぜそのあとread.encodeを2回続けているのかとかわかりませんが・・・） その後readしてしまってますが、こうすると綺麗にBOM削るのは難しそうなので、IO/File時点で削るというのが第一感です。 日本語マニュアルにはまだ反映されていないっぽいんですが、下記のドキュメントにこの記法があります。 http://www.ruby-doc.org/core-1.9.3/Kernel.html#m … たぶん、次の検討を経て取り入れられたものです。 http://bugs.ruby-lang.org/issues/1951 結論を言うと、頭の方の param[:file].read.encode("UTF-8","UTF-8", :invalid => :replace, :undef => :replace, :replace => '') といったあたりを param[:file].set_encoding("BOM|UTF-8","UTF-8", :invalid => :replace, :undef => :replace, :replace => '').read こんな感じに書き換えて動きませんかね？という・・・ 的外れだったらすみません。
そのまま、可変長引数として取り扱えますよ。 http://doc.ruby-lang.org/ja/1.9.3/doc/spec=2fdef … 受ける側のメソッド内で*を外すと、Array扱いになります。 また、Arrayやらといったオブジェクトに*を付けてやると、他のメソッドへバラけたパラメータとして渡すことができます。 http://ideone.com/jbWZX 記載された例で行くと、 (動作チェックはしていません。「v」の扱い方についてだけです) # このように使いたいなら replace('table',%w(a, b, c, d, e, f, g),[va, vb, vc, vd, ve, vf, vg]) # こうします。 def replace(table, k, v) db.execute('replace into ' + table + '(' + k.join(',') + ') values('+ k.collect {'?'}'.join(’,’) +')' , *v) end # このように使いたいなら replace('table',%w(a, b, c, d, e, f, g), va, vb, vc, vd, ve, vf, vg) # こうします。 def replace(table, k, *v) db.execute('replace into ' + table + '(' + k.join(',') + ') values('+ k.collect {'?'}'.join(’,’) +')' , *v) end
def hoge(option = {}) 　option.each_paier do |k,v| 　　p k 　　p v 　　#なんかの処理 　end end hoge(:hoge => "hoge", :piyo => "piyo") こんなのどうですか？
injectはブロックの結果つまりv[:b]が、次のhになります。それは意図と違いますよね。 ～.inject(Hash.new(0)){|h,v| h[v[:a]]=v[:b]; h} と、ブロックの結果が h になるようにしてください。
ファイルが able word length word length word のように1行1語なら lines=IO.readlines("***.txt") # 全行を読み込み配列に words=lines.collect{|line| line.chomp} # 改行を取り除く word_groups=words.group_by{|word| word} # 単語ごとにHashに sorted_words=word_groups.sort_by{|word, word_array| -word_array.size} # 出現頻度の高い方かならべる のような感じです。 sorted_words[0]には["word", ["word", "word", "word"]] が入っています。
@member.class でそのMemberクラスが取得できます。
以下の行を追加してください。 ---------------------------------------------- print "*** ログインしてください。自分のアカウント名とパスワードを入力してください。 ***\n" print "アカウント:" account = gets.chop print "パスワード:" password = gets.chop if hash_account.has_key? account print "アカウントはすでにあります。別なアカウント名を使ってください。\n" else #そのアカウントとパスワードをファイルへ追加する fo = open("accountData.txt", "a") fo.printf("%s %s\n",account,password) fo.close print "アカウントを作成しました。\n" end --------------------------------------------------------- >rubyのバージョンはruby 1.8.7 (2010-01-10 patchlevel 249) [i386-mswin32]です。 これを見る限り、windowsのrubyのように見えます。 もし、windowsで実行しているなら $KCODE = "s" としてください。 そのほうが、漢字のアカウント名も登録できると思います。 こちらでの動作確認は、 ruby 1.8.5 (2006-08-25) [x86_64-linux]で行なっています。 (windowsのrubyのバージョンがruby 1.9.2p180 (2011-02-18) [i386-mingw32]のため）
1:if (hash_account[account] == password) 2:rint "ようこそ、", account,"さん。それではゲームを始めましょう。\n" 3:elsif 4:print "パスワードが間違っているようです。\n" 5:else 6:print account,"というアカウントはありません。\n" 7:end 上記の３行目のelsif　を elsif hash_account.has_key? account に変えてください。 そうすると正しく動きます。 尚、今後質問される場合はOS、rubyのバージョンも記述されたほうが より正確な回答が期待できます。
Date::MOTHNAMESではなくて、Date.MOTHNAMESで実行されたのではないでしょうか？ MOTHNAMESはメソッドではなく定数なのでエラーになるのだと思います。 D:\>irb irb(main):001:0> require 'date' => true irb(main):002:0> Date::MONTHNAMES => [nil, "January", "February", "March", "April", "May", "June", "July", "August ", "September", "October", "November", "December"] irb(main):003:0> Date.MONTHNAMES NoMethodError: undefined method `MONTHNAMES' for Date:Class from (irb):3 from D:/Ruby193/bin/irb:12:in `<main>' irb(main):004:0> Date.constants => [:MONTHNAMES, :ABBR_MONTHNAMES, :DAYNAMES, :ABBR_DAYNAMES, :ITALY, :ENGLAND, :JULIAN, :GREGORIAN, :Infinity] irb(main):005:0> Date.methods => 表示省略
No1です。 まず、02の方は、Arrayに入れます。 words = [] 繰り返し開始 　words << 取得した言葉 繰り返し終了 つぶやく言葉 = words.sample で、wordsというArrayから乱数で１つ選ばれます。 01の方は、HTMLのソースを見て、手動で単語を集めるとするとどうするかを考え、それをプログラムに直します。 プログラムをあまり書いたことが無いのであれば、 １．まずは自分がHTMLを見て単語を集めてみる ２．今度は、離れたところに居る見知らぬ人もそのHTMLを見ているとして、電話でその人に指示して単語を集めるとしたら何と指示するかを考える ３． ２の内容をプログラムに変換する という手順でやってみるといいかと思います。
微妙ですがとりあえず require "csv" id = "hoge" #標準入力から値を取得 pass = "piyo" #標準入力から値を取得 fp = CSV.open("accountData.txt","r") match = false fp.each do |k,v| 　if k == id && v == pass 　　match = true 　　return 　end end if match 　#ログイン処理 else 　#ログインエラー end ほんとに微妙ですね。
たびたびすみません。 確認事項ですが、require '○○' が仮に require 'abc' だとすると ファイル名はabc.rbと拡張子がrbになっていますよね。 それとそのファイルをテキストエディタで読み込み可能で、rubyで書かれていますのね。 （バイナリだと違う拡張子になります）
シングルクォートでもいけるような気が。 試してないけど。
どうやら、このバージョンのrails.jsのバグのようです。 {:disable_with => "Sending…"} のオプションをとれば、 if 'OK' == params[:commit] then 　　OKボタンが押された際の処理 　else 　　CANCELボタンが押された際の処理 　end は有効になります。（params[:commit]に正しい値が設定されるようになります） 従って、このままの状態では、対策としては、 {:disable_with => "Sending…"}をとるか、 質問者さんが、書かれた方法になります。 どうしても、{:disable_with => "Sending…"}をとりたくなく、 rails.jsをjquery用のものに変えてよいなら、荒療治になりますが、以下の方法があります。 ファイルを書き換えるので、必ずバックアップを取って行なってください。 １．jqueryをダウンロード http://docs.jquery.com/Downloading_jQuery jQuery CDN jquery-1.6.4.min.js をダウンロードし、 jquery.jsにリネームする。 ２．jquery用のrails.jsを使う。 https://github.com/rails/jquery-ujs/tree/master/ … からダウンロードする。 ３．publicのjavascripts下に以下のファイルがあるので削除する。 prototype.js controls.js effcts.js dragdrop.js ４．ダウンロードした jquery.js と rails.js をpublicのjavascripts下に配置する。 (rails.jsは上書きする） ５．アプリケーション設定ファイルを変更する。 通常、app\vies\layoutsのapplication.html.erbの内容は java_script_include_tag:defaults になっています。この場合、上記で削除したファイルをこのままではincludeしてしまう為、 デフォルトのicludeを rails.js jquery.js application.jsにするために 以下の行を configの下のapplication.rbに追加します。 config.action_view.javascript_expansions[:defaults] = %w(jquery rails) 追加したファイルは、以下のようになります。 module Apart class Application < Rails::Application 　　途中省略 config.action_view.javascript_expansions[:defaults] = %w(jquery rails) end end これで、デフォルトの状態で、 rails.js jquery.js application.js が読み込まれるようになります。 そして、params[:commit]が参照可能になります。 当方、以下の環境で確認済みです。 rails 3.0.7 ruby 1.9.2p180 (2011-02-18) [i386-mingw32] windows-7 64Bit 以上。
#1の方のアドバイスに従って作ってみました。 # 区切り文字は;,=のいずれかとする（全て半角） ------------------------------------- str = "AAAA;BBBB,CCCCC=DDDDD" elm = str.split(/[;,=]/) # elmに分割された内容が格納される p elm ---------------------------------- 実行結果 ["AAAA", "BBBB", "CCCCC", "DDDDD"] #1の方に感謝！！
No.2です > アカウントがある場合は成功しました 「成功しました」というのは表示するメッセージだったのですね。 プログラムを作って上手く動作したのだと勘違いしました、失礼しました。 > verifyAccount(account, password)という関数 学校の課題ということなのではっきりとは書きませんが ・前の住所の場合と同じ様にHashにファイルデータを読み込ませる 　　hash[アカウント] = パスワード ・account有無の確認は、hashのkeyにaccountが存在するか調べる。 ・passwordの確認は、hash[account]とpasswordが一致するか調べる。 以上でできると思います。 　Hashのマニュアル 　http://doc.ruby-lang.org/ja/1.8.7/class/Hash.html
> そこでTCPServerクラスのリファレンス（http://www.ruby-lang.org/ja/old-man/html/TCPServ …）を見るのですが、 > このサイトのクラスメソッド欄にかいてあるTCPServer.openを呼んでも、戻り値の型が書いていません。 これを見ると、結局 TCPServer.open は TCPServer.new と同じで TCPServer のインスタンスが返っているようですね。 で、そのマニュアル古いから(URL も old-man てなってる)こっちを参照するといいよ http://doc.ruby-lang.org/ja/1.9.2/class/TCPServe …
1.8.6環境は手元に無いのですが、1.8.7で同様の症状を確認しました。 ソース覗いた限り、markabyが依存しているbuilderライブラリ側の仕様っぽいですね。 String#encode有るか無いか（≒1.9系か否か）を分岐に、動作を大きく振り分けています。 試しに、最初貼られたコード内「require 'markaby'」の直後に次の５行を加えてみて下さい class String def to_xs(_=nil) self end end 多分望みの出力になったと思いますが、エスケープ処理全てすっ飛ばしている状態なので現実的ではありません。 ということで、自分からの結論は下記とします。 推奨: 1.9系への移行 次点: 1.8系のまま最後のstrを処理（ANo1）する
>syntax error, unexpected $end, expecting kEND >obj.save >^ >と表示されました。 >これを、解決するにはどうしたらよいのでしょうか？ どこでendの対応がずれてしまっています。 こちらで、実行して正常に動作したスクリプトを張りますので、 違いを確認してください。（endの対応にずれがないか確認してください） windows-7 ruby 1.9.2p180 (2011-02-18) [i386-mingw32] で動作確認済みです。 ------------------------------------------------- # coding:WINDOWS-31J class AddressFile def initialize(file) @original = file @meibo = {} fo = open("address_list.txt", "r") lines = fo.readlines fo.close for aLine in lines data = aLine.split @meibo[data[0]] = data[1] end end attr_accessor :meibo def search(name) @meibo[name] end def add(name,address) @meibo[name] = address end def save open(@original,"w") do |io| @meibo.each do |key,value| io.print "#{key} #{value}\n" end end end end obj = AddressFile.new("address_list.txt") obj.add("一郎", "一郎の住所") obj.add("次郎", "次郎の住所") obj.add("三郎", "三郎の住所") p obj.search("一郎") p obj.search("山田") obj.save -------------------------------------------------- また、今後質問される場合は、動作環境（OSとrubyのバージョン） もかかれると、より正確な回答が期待できますので、それも 書かれることをお勧めします。
#1です。 ＞ですが、依然画面が切り替わりません。。 ＞（ちなみにrequest.xhr?は、今は0でコンソールに表示されています。。） ＞何か、思い当たることはありませんか？？？ まず、request.xhr?は、今は0でコンソールに表示されていますとのことですが、 これは、trueかfalseのはずです。（こちらはtrueで表示されます） コントローラの def drawのメソッドの中で p request.xhr? とすると、その内容が表示されますが、その結果が0なのでしょうか？ 依然画面が切り替わりません。ということですが、 ajaxは、同一画面で、画面内の一部を更新する機能です。 ですので、その前提で回答します。（質問者様が全く別の画面に切り替わることを期待はしていないと理解しています） 今回、切り替えの対象になるのは、 <div id="hoge"> <%= link_to "ajax",{:action => 'draw'},:remote => true %> </div> のhogeのＩＤを持つ部分です。 ですから、上記の定義ではなく、 <div id="hoge">ＸＸＸＸ</div> <%= link_to "ajax",{:action => 'draw'},:remote => true %> のように定義し、 ＸＸＸＸの部分を $('#hoge').html("<%= escape_javascript(render :partial => 'draw' )%>"); で、置き換えることになります。 users/_draw.html.erbの ~いろいろ内容~ の部分が、置き換えの対象になります。 １．コントローラのdefメソッドの全て ２．以下のview /users/index.html.erb /users/_draw.html.erb /users/draw.js.erb の<div id="hoge"に関する部分の全て が提示されれば、問題が解決するかも知れません。
いやいや、だから @meibo に直接アクセスできるんだから、search も add も要らんて。 それとも、address_list.txt にも追加した住所を反映したいの？
ANo2, ANo3で挙げられている部分に加え、ｐｒｉｎｔと_printメソッドを交互に呼び合っています。 クラスの階層関係を確かめたいコードだとした場合、 Test#_print側でKernel.printを叩くか、Test#ｐｒｉｎｔ側でsuperを呼び出して下さい http://ideone.com/nKHyk
> テキストファイルの中身を記録しているハッシュにアクセスするにはどうしたらいいんでしょうか？？ 自分で attr_accessor :meibo と書いとるやん。
初心者というか、入門されてないようなので、書籍かサイトで、Rubyの文法を学ばれた方が良いかと思います。Rubyの文法はルールが少なくて非常にシンプルです。 以下の説明は他の言語経験者のための説明でRuby的な厳密さは一部無視しています。 ＞１）NetクラスのインナークラスであるSMTPクラスのstartメソッドを呼び出している。 Rubyにはインナークラスという概念はありません。Netはモジュールで、他の言語で言うとパッケージに近いです（同じでは無いですが）。 ＞２）('smtp.example.com', 25）これはstartメソッドの引数である。 これはそう。 ＞３）|smtp|よくわからない。このstartメソッドの戻り値？startメソッドの中なのに？ startメソッドの引数はもう一つあって、 {|smtp| から 最後の } までが無名メソッド(ブロック）で、この無名メソッドを引数に渡して、startから呼び返して(コールバック)もらいます。 Rubyのメソッド呼び出しは、「ブロック付きメソッド呼び出し」という構文があって、あたかも言語構文のような形で最大一つの無名メソッドを呼び出し先メソッドに渡すことが出来ます。 簡単な例では、 (1..10).each { |i| puts i } は、def foo(i); puts i; end というようなメソッドをeachにコールバック用として渡しています。 ということで|smtp|は、コールバックメソッドの引数です。 startメソッドはTCPコネクションを張って、そのコネクションを含んだSMTPクラスのオブジェクトを引数としてコールバックを呼び出します。 ＞４）From: Your Name <from@example.com>　ここもよくわからない。なぜ急に変数にも代入しない　文字列を書いたのか？ これは、sh(Unixのシェル) 由来のヒアドキュメントという構文です。<<-EndOfMail がヒアドキュメントの開始。 複数行の文字列リテラルを書くときによく使われます。 <<-EndOfMail の部分が、次の行から EndOfMailの行の前までの文字列リテラルと置き換わります。 つまり、下記と同じ。 smtp.send_message( "From: Your Name <from@example.com> To: Dest Address <to@example.net> Subject: test mail Date: Sat, 23 Jun 2001 16:26:43 +0900 Message-Id: <unique.message.id.string@yourhost.example.com> This is a test mail. ", 'from@example.com', 'to@example.net') ↑この書き方だと、第二引数以降がメソッド名から離れすぎてしまう。
ANo1.氏の言うように !~ でいいんだけど、どちらかと言うとそのような否定演算子を使うよりは unless @value =~ /^[0-9]{4}/ の書き方の方が好まれていると思います。 こっちの方が「ほんとは数字4桁始まりであって欲しいけど、そうでないときは○○」という雰囲気しない？しないか。
['a', 'b', 'c'].map(&:upcase) みたいなやつね。 1. Enumerable#map はブロックを引数に取ります http://doc.okkez.net/static/192/method/Enumerabl … ['a', 'b', 'c'].map { ... } 2. メソッドを呼び出しで、ブロック引数の代わりに Proc オブジェクトを渡すことができます http://doc.okkez.net/static/192/doc/spec=2fcall. … ['a', 'b', 'c'].map(&some_proc) 3. メソッド名のシンボルは & 付きでメソッドに渡された場合、to_proc が自動的に呼ばれます 別にシンボルでなくても、to_proc メソッドを持つ何かであれば何でもいい(Duck Typing) というわけで、 ['a', 'b', 'c'].map(&:upcase) は ['a', 'b', 'c'].map(&:upcase.to_proc) で ['a', 'b', 'c'].map {|c| :upcase.to_proc.call(c) } で、要するに ['a', 'b', 'c'].map { |c| c.upcase } 以前 Rails のライブラリで使われていたのが、Ruby 1.9.x の何処かで本家にマージされたんだと思う。
私の環境(windows7-64ビット)ではRDEが実行できないので、推測になりますが、 STDOUT.sync = trueをスクリプトの最初に追加してみてください。 RDEのfaqに記述されています。 参考URL：http://rubyde.sourceforge.net/hiki/ja/FAQ.html
#2 ですがすみません、each メソッドと勘違いしていました。 したがって、「使ったほうが効率的（処理が速い）」という部分は取り消します。 しかし、「コードが読みやすくなります」という利点があるため、「使えないとき以外はいつでも」という意見は変わりません。
適当にググると、InstantRails てのを使えという雰囲気。 http://www.ne.jp/asahi/free/hiroro/RubyOnRailsTu … しかしまあ、Windows で Rails アプリケーションを開発しようとすると様々な困難が待ち受けていることでしょう。 全くお勧めできません。
Ruby ではよくローワーキャメルケースでメソッド名が書かれます。 http://ja.wikipedia.org/wiki/%E3%82%AD%E3%83%A3% … 素直に "to formatted string" と読みましょう。 ……ひょっとして formatted をどう読んだらいいか分からない？ format の過去形なのでカタカナ表記すると「フォーマッテッド」が近いかと（正しい発音ではありませんが）。
回答がないので、 直接の回答ではありませんが、 ruby on rails（日本語） のメーリングリストに参加し、 そこで、質問をされてみてはいかがでしょうか。 私も、このメーリングリストを利用しています。 rails関連なら、このサイトよりも、もっとより専門的な部分に踏み込んだ 質問にも回答できる人がいるかと思います。 詳細は参考URLを参照ください。 参考URL：http://wiki.fdiary.net/rails/
ANo5 氏が言われているように、User をあらわすクラスなどを定義するべきです。 自分のやりたいことをできる限りストレートにコード化することが重要です。 User クラスは name メソッドと task メソッド、total_cost メソッドくらいがあればよいでしょう。 外部システムから得られたユーザ情報を User インスタンスの配列として得れば、あとは total_cost に応じて、ソートするのは簡単です。 表示するときのために to_s メソッドを用意するのもよいでしょう。
Rule にマッチしていないか、mod_rewrite が動作していないか・・・・・・・。 ちょっと正規表現の細かいところが思い出せないのですが(というか合っているように思うのですが)、RewriteRule の条件を ^.*$ とか ^(.*)$ にしてみるとどうでしょうか？ あとは RewriteRule で適当な URL に実際に書き換えてみる。書き換えられなければ mod_rewrite が動作していないということではないかと・・・・・・・。
Railsインストールにroot権限は必要ありません。権限があればそれでやりますけど。 私はやったこと無いですが、「さくらインターネット Rails」で検索すると経験談がたくさんあります。
解釈としては間違ってないです。 「クラス定義の中で～」の文章を、「メソッド定義の中で～」が上書きする形で、別の意味を与えていると思えば良いと思います。 「クラス定義のコンテキストの中で」の略記と考えた方が良いか。
単項演算子の+と見なされるためです。 a = +3 みたいな。 構文としては、 print value.to_s +"の時"+ x.to_s + "<br />" が、 print value.to_s( (+"の時")+ x.to_s + "<br />") のように解釈されています。 メソッド呼び出しの括弧を省略できるRubyでは、曖昧な構文の時に空白をみて解釈を決めています。 print value.to_s + "の時"+ x.to_s + "<br />" print value.to_s+"の時"+x.to_s+"<br />" print value.to_s() +"の時"+ x.to_s() + "<br />" ならOK。 下記のどちらかに書法ルールを統一していれば普通は大丈夫です。 ・二項演算子の前後に必ず空白を入れない ・二項演算子の前後に必ず空白を入れる
この辺ちゃんと使った経験が無いので、「普通こうする」という回答にはなって無いかもしれませんが・・・ >Net**HTTP::Postクラスのrequestメソッドを用いてハッシュとして渡した時 これは、 #set_form_data (#form_data=) で予め値を入れたっていうことですよね？ net/http ライブラリのソースを覗いてみると、set_form_dataの方はエンコードかけていますが、HTTP#postの2引数目はそのまま文字列として取り扱っているみたいです。 ということで、一度きりの使い捨てなら「query=subject&target=ruby&PHP」を「query=subject&target=ruby%26PHP」へ書き換えれば済むんじゃないでしょうか。 こういう使い方が多いのであれば、ヘルパーメソッド作っておいてもいいかもしれませんが・・・ https://ideone.com/3fi2I そもそも、HTTP#post側だとこういう用法を想定していないのかもしれませんね。 フォームのデータ送るなら、#form_data=を予め使っておく方が素直なのかもしれません。
# ANo4さんへ おぉなるほど、集合演算でも「-」を使うと今回のケースが綺麗に解決できるんですね・・・思いつきませんでした。 合致判定を Array#include? に依らないのであれば、これがスマートだと思います。 Array#include? は「==」に依存しますが、Array#-は「eql?」に依存する為、動きが異なります。 組み込みクラスでわかりやすいのはFloatが混じった時でしょうか。 http://codepad.org/fqyFSGRK
私見ではありますが、クラスやインスタンス変数などの概念は、はっきり言って余程の適性がない限り、講座を受けるだけではまず理解出来ないと思います。というより、聞くだけで理解できれば世の中にプログラマなど必要なくなります。 また概念が分かっても、大抵の場合、他の方法でも同じ処理が組めるので、どういう利点があるのかが分からないと思います。少なくとも、自分はそうでした。 やはり、一度は良く利用されているオープンソースのWEBアプリのソースを読んでみたり、自分でプログラムを作ってみたりしなければ理解はできないと思います。特に理解出来ないのなら、無理やりにでもクラスやインスタンス変数を組み込んだプログラムを作ってみましょう。そうすれば、ある日自然と理解できるようになるかと思います。 習うより慣れろ、ですね。その時「あの講座では、このことを言っていたのか」と理解できると思います。
after_filter はビューのレンダリングが「終わった後」に実行されるからでしょう。 本来の問題が何かがわかりませんが、before_filter に変更すると問題文のサンプルは動くと思います。
> ブラウザってそう簡単に変更できるのですか？ できるよ。 firefox や Chrome でググればダウンロードするサイトにあっという間に到着。インストールするだけ。
＞A.newで作られた物全てをnilにしたいのですが そんなことをしたいと思ったこと自体が間違っている可能性がありますね。 普通はそんなことはしません。 なぜそんなことを思ったのでしょうか？
物理的なディスクが何かによります。 一般的には、１つのハードディスクをＣドライブとＤドライブに分けて使用することが多いですが、この場合には同じハードディスクを使用しているのでほとんど差は無いでしょう。プログラムと処理データをＣドライブに配置するとハードディスクの構造上、読取りヘッドが位置決めをするための時間がごくわずかに減少するかもしれませんが人が速くなったと認知できるほどの改善はまず期待できません。 Ｃドライブがハードディスクで、ＤドライブがＵＳＢメモリなどである場合には、プログラムの処理データが大きいほど（３００ＭＢなど）、処理時間が短縮されることが期待できます。これは、ハードディスクよりもＵＳＢメモリの方が読み書きにかかる時間が短いためです。 このため、ＷｉｎｄｏｗｓではＵＳＢメモリの高速性を利用した高速化機能Ｒｅａｄｙｂｏｏｓｔがあります。 もっとも、速くなっても意味（価値）があるのか・・・？　という問題は残ります。 現代では、実用性や利便性、特に経済性が優先されるので、必要に迫られないかぎり高速化を考える必要はありません。プログラムが実用的な処理時間の範囲内で結果を返せるなら、内部の処理効率が悪いことを気にするのは無益です。Ｒｕｂｙなどを使うのなら、生産性（経済性）が高いことが最重要なのですから。 また、プログラムの処理速度が遅いときに、プログラムを改善するよりも、ディスクをＳＳＤに置換える、メモリを増設する、ＣＰＵを増設または置換える方が経済的であることが多々あります。もっとも、扱うデータ量が多い場合はプログラムが遅いことによって失われる時間などが大きくなる場合には、プログラムを改善するべきでしょう。 というわけで、やや批判的になりますが、プログラムの実行速度を気にするよりもプログラムの恩恵（貢献）を重視してくださいが結論です。 # まあ、チューニングして目に見えて高速化したときは、うれしいですよね♪
目標があった方が習得早いのは確かですが、明確な目標がない場合、目標作る方がただ学習するより難しかったりというのはありますね。 何か興味があるものが見つけられるとよいのですが。 作ってみたいものがあれば、それに関する入門書とか、使えそうなライブラリを探してみるとか、 これなら作れそうというのがあれば、作ってみればよいだけですし。 やりたい事が見つかれば、とりあえず挑戦してみて、わからなければもっと簡略化したものにしてみるとか、参考書を調べたり、より具体的な質問ができたり、道筋を立てるといった事が能動的に出来るので、目標を持つといいよと皆言うのだと思います。 でも人から与えられた課題が、能動的な行動に結びつく「目標」になることってあんまないかなぁと。 ウェブ工学って具体的にどういう研究をしてるのか私は知らないのですが、調べてみると検索エンジンみたいな基盤技術や、ブログとかSNSみたいなソーシャルサービスのデータマイニングとか、そういうのを研究してる…のかな？ 結局、ご自身が院に進んでからしたい研究があるなら、それ繋がるようなものを作ることを目標に勉強されるのが一番いいと思いますが、もし具体的にないのであれば、C++とRubyかPerlの入門書を読んで、そこに書いてある内容くらいは本見なくても使えるようにしておくくらいでもいいんじゃないでしょうか？ 必要なことは必要になれば必然的に覚えます。（でないと卒業できないですよね） 私は全然ウェブ工学とか勉強したこと無いので参考になるかはわかりませんが、 関係がありそうで面白そうなテーマとしては、ウェブクローラとか、簡易検索エンジン、人工無能の自作とかどうでしょう。 はじめてのAIプログラミング―C言語で作る人工知能と人工無能 http://www.amazon.co.jp/%E3%81%AF%E3%81%98%E3%82 … Rubyでつくる検索エンジン http://www.amazon.co.jp/Ruby%E3%81%A7%E3%81%A4%E … といったような興味ありそうなテーマを、覚えたい言語で扱ってる本を探してみるというのもいいんじゃないでしょうか。 簡単なモノから１つづステップアップしてくんではなく、いきなり高いところから始めて、わからない事があったら、入門書などを調べるという逆説的なやり方です。 （「なに」が「どう」わからないか、が解ると、それが勉強の動機になることが往々にしてあります。） あとは、Fortranで組んでいたものをC++やRubyで組んでみる…とかでしょうか。 今まで科学計算よりのプログラムを主に組まれていたようなので、 もっとアプリケーションよりのプログラムを作ることには挑戦された方がよいと思います。
そういうときは、return でなく、break を使います。 return はメソッドからの戻りなので、たとえば、 def foo 　(1..10).each do |i| 　　return 1 if i==3 　end 0 end のreturnは、eachからの抜け出しでなく、fooの終了になります。 お書きのプログラムだと、メソッドの中じゃないのにreturnしてるので、エラーですね。 ブロックからの抜け出しはbreakです。 中級以上の話になると、lambdaとprocというオブジェクトがあって、lambdaのブロックの中ではreturnが使えるなど、ちょっとややこしい話になりますが、初級のうちは気にしなくていいでしょう。
Array#eachではイテレート毎に要素数のチェックをしてるので、後ろに足していく pushなら問題ないみたいです。イテレート中のpopも大丈夫です。 でも、Arrayの先頭を操作する、shiftやunshiftでは内部ループカウンタとインデックスが ずれるのでダメですね。 一応CRubyの実装をコピペしときます。 array.c: VALUE rb_ary_each(VALUE ary) { 　　long i; 　　RETURN_ENUMERATOR(ary, 0, 0); 　　for (i=0; i<RARRAY_LEN(ary); i++) { // ←イテレート毎に長さのチェック 　　　　rb_yield(RARRAY_PTR(ary)[i]); 　　} 　　return ary; }
ブラウザでアクセスすると、wwwの取れた方へリダイレクトかかりますよね？ Rubyでも、例えばこういった感じの物を動かしてみてください https://ideone.com/Q5ZFR 何もいじらないと301が返りますし、その先を追いかけるようにすれば中身が取れます。 先日同じような話が出たので、詳細はこちらを参照して下さい http://oshiete.goo.ne.jp/qa/6987202.html
　ご質問から1列目は小さい順に並べられているものと仮定します。 　また、入力データが"input.txt"というファイルに格納され、 出力データを"output.txt"にしているとすると、 以下のようなスクリプトで実行できると思います。 (字下げがなくなっているので、見にくいとは思いますが、ご了承ください) in1_file=open("input.txt","r") out1_file=open("output.txt","w") # 初期値設定 in1_ctr=0#入力件数 w_ctr=0#ソート件数 in1_key=nil#入力キー in1=nil#入力した配列 in1_rec=Array.new#入力キー sv_key=nil#保存キー # キーブレイク時の処理 defs_break(in1_rec,out1_file) sort_rec=in1_rec.sort_by{|a| a_array=a.split("\t",-1) [a_array[1]] } sort_rec.each {|data| out1_file.printdata,"\n" } end # 主処理 while(line1=in1_file.gets) line1.chomp! in1=line1.split("\t") in1_key=in1[0] in1_ctr+=1 # キーブレイク時 if((in1_ctr!=1)&&(sv_key!=in1_key)) s_break(in1_rec,out1_file) w_ctr=0 in1_rec=[] end sv_key=in1_key in1_rec[w_ctr]=line1 w_ctr+=1 end # 最終データの処理（入力データがある場合） if(in1_ctr!=0) s_break(in1_rec,out1_file) end # ファイルクローズ in1_file.close out1_file.close 　あるいは、1列目を第1のキー、2列目を第2のキーとして昇順に並べ替えてもよいのであれば、 以下のようなスクリプトになります。 in1_file = open("input.txt","r") out1_file = open("output.txt","w") in1_ctr = 0 in1_rec = Array.new sort_rec = Array.new while (line1 = in1_file.gets) line1.chomp! in1_rec[in1_ctr] = line1 in1_ctr += 1 end sort_rec = in1_rec.sort_by{|a| a_array = a.split("\t",-1) [a_array[0].to_i,a_array[1].to_i] } sort_rec.each {|data| out1_file.print data,"\n" } in1_file.close out1_file.close 上記で、"[a_array[0].to_i,a_array[1].to_i]"としている箇所が整数で1列目を第1キーに、同じく整数で2列目を第2キーに指定している部分です。ご質問の例では、1列目と2列目でそれぞれ数字の桁数が同じでしたので、仮に「文字列型」として並べ替えても良いのであれば、"[a_array[0],a_array[1]]"とすることもできます。 参考URL：http://www003.upp.so-net.ne.jp/NAMBOKU/ruby/ruby …
C:/ruby/binの中にgem.batとかirb.batという名前のバッチファイルがあると思います。 この一つをコピーしてexerb.batという名前のファイルを作成してください。
私の印象でだけですよ。 「Rubyできるよ」と言うエンジニアは幅はあっても本当にそれなりにできるけど、 「Javaできるよ」と言うエンジニアには実際には出来ない人も相当数いるので人を確保するのが実は難しい。 プロジェクトの品質は作る人の最低レベルに合わせて下がるものです。 (出来る人のモチベーションも下がるし) 別に言語に注目しても仕方ないよね。 現在の Ruby があるのは、そのテスト文化とか、自動化に対する情熱などが大きいような気がします。
たぶん、この例外発生原因は次の部分です。 Net::HTTP.start("http://yahoo.co.jp", 80) {|http| URIではなくアドレス（IPアドレスやFQDN等）を入れる場所なので、こんな感じですね Net::HTTP.start('www.yahoo.co.jp', 80) {|http| ＜おまけ1＞ まず、参照するドキュメントを変えましょう。 記載されたマニュアルは既に古い物なので、Ruby1.8.7系であっても次のマニュアルを当たるようにしましょう。 http://doc.ruby-lang.org/ja/1.8.7/doc/index.html http://doc.ruby-lang.org/ja/1.8.7/library/net=2f … ＜おまけ2＞ ヤフーのトップページはリダイレクトかかるので、多分今回のサンプルそのまんまだと意図した実験にはならないでしょう。 別のサイトで試すか、マニュアルにも記載のあるリダイレクト対応メソッドを実装しましょう。 以下、枠線内抜粋 -------------------------------------------------------------------------------------------------- リダイレクトに対応する 以下の例の fetch はリダイレクトに対応しています。 limit 回数以上リダイレクトしたらエラーにします。 require 'net/http' require 'uri' def fetch(uri_str, limit = 10) # You should choose better exception. raise ArgumentError, 'HTTP redirect too deep' if limit == 0 response = Net::HTTP.get_response(URI.parse(uri_str)) case response when Net::HTTPSuccess response when Net::HTTPRedirection fetch(response['location'], limit - 1) else response.value end end print fetch('http://www.example.org') -------------------------------------------------------------------------------------------------- このサンプルコードから、最終行を次の内容に変えてみてください 尚、この例だとuriライブラリを読み込んでいるため、ターゲット指定にURIが使えるようになっています。 print fetch('http://www.yahoo.co.jp').body 順を追う意味からはあまり適さないと思うので、別のサイトで試したほうがいいとは思います。 ＜おまけ3＞ 他の言語経験から、メソッド呼び出しに()を加えたり、行末に;を付けたりされていると思います。 特別に強いこだわりが無ければ、この辺のコーディングスタイルをRubyっぽい物に合わせるようにしましょう。 規約として有名な所では青木さんや前田さんの物がありますが、 取り敢えずマニュアルで使われているスタイルを参考にしてみてください。 今後マニュアルを読む上でも、標準的なスタイルには慣れておいた方が良いと思います。
＞(無名クラス　と　メタクラスは同義？？） 無名クラスとメタクラスは直接は関係ありません。Yuguさんは、Classクラスオブジェクトの特異クラスのことをメタクラスと呼んでいるようですね。特異クラスは一般に無名クラスですが。 ＞また上記URLの画像からメタクラスはClassクラスのインスタンスであるようです。 特異クラスであろうが、メタクラスであろうが、すべてのクラスはClassクラスのインスタンスです。 理由は無いというか、それがRubyのクラスの概念です。数学で言う公理みたいなものか。 ＞もう一点、ｐ　Cattle.class()；と記述するとClassクラスが返ると思います。 Classという定数が返りますが、これはClassクラスのことですね。 ＞これはCattleクラスのClassクラスのインスタンスであるということになるのでしょうか？ 日本語がおかしいです。 Cattleという定数に代入されているのは、Classクラスのインスタンス(のリファレンス)であると言うことです。わかりやすく言うと、CattleというのはClassクラスのインスタンスということ。 ＞しかしながらYUGUIさんの画像ではCattleはメタクラスのインスタンスとなっています。 であれば、メタクラスを意味するのでしょうか？ 図のしたの↓は読みましたか？理解できましたか？ Yugui＞つまり、初期状態ではメタメタクラスというものは定義されていないんだな。メタクラスに対して特異メソッドを定義しようとしたとき、初めてメタメタクラスみたいなものが作成されて、 一般に、クラスＡのインスタンスＸに特異メソッドを定義すると、「Xの特異クラス」が作られて、ＸはＡのインスタンスで無く、Aのサブクラスである「Ｘの特異クラス」のインスタンスに変わります。これは特異メソッドや特異クラスの説明の所に書いてあるはず。 で、classメソッドで返る値では特異クラスのことは隠されます。うーん、このこと、Object#classのリファレンスに書いてないですね。 上の文のA←Class、Ｘ←Cattle とするとあの図の関係になりますね。「メタクラス＝Classクラスインスタンス(ここれはCattle)の特異クラス」なので、Ｘの特異クラスのことをメタクラスと呼んでいるわけです。 基本的な理解のためには、「メタクラス」という言葉を頭の中から一度追い払って、「クラス」「特異クラス」だけで考えるといいと思いますよ。 特異クラスというものを十分理解してから、「メタクラス＝クラスの特異クラス」と覚えるといいかと。
モデルの方にコントローラー名とアクション名が渡らないので validationをモデル内でやるのは難しいと思います コントローラー内部で解決しましょう
Class.newだけでクラスオブジェクトが作られます。 クラスとは、Classクラスのインスタンスであり、そのインスタンスのことをクラスオブジェクトと呼びます。名称が複数あるだけで、とりあえず全て同じものを指していると思って差支えないと思います。 クラス ≒ Classクラスのインスタンス ≒ クラスオブジェクト Hogeクラス ≒ Hogeという名前のClassクラスのインスタンス ≒ Hogeという名前のクラスオブジェクト hoge = Class.new();(1) これは、まずClass.newで（無名の）クラスオブジェクトが作られます。そして、hogeという変数がそのクラスオブジェクトを参照するようにしています（hogeという変数にクラスオブジェクトのリファレンス（アドレス）を代入している）。 Hoge = hoge;(2) これは、Hogeという定数に先ほど作られたクラスオブジェクトを参照するようにしています。無名だったクラスオブジェクトに定数と同じHogeという名前が付けられます（厳密にはこの代入ではまだ名前付けはされませんが）。 class Hoge;(3) def hello(); print "やあ"; end end これは、クラスオブジェクトを作り（ただし、Hoge定数が既に他のクラスオブジェクトを参照していればそれを使います）、そのクラスオブジェクトの名前をHogeにし、Hogeという定数にそのクラスオブジェクトを参照するようにしています。そして、そのクラスオブジェクトにhelloというインスタンスメソッドを登録します。 この(3)でできたクラスオブジェクトは、これ以降、定数Hogeを通じてアクセスすることになります。 Class.newを使って(3)と同じようなことを実現するとすれば、 Hoge = Class.new do def hello() print "やあ" end end とします。ただし、この後に Foo = Hoge と他の定数に代入すると、このクラスオブジェクトの名前は、Fooになる可能性もあります。 ＞レシーバのHogeというクラスオブジェクトと同名のHogeクラス ＞の定義を見つけてきてそのインスタンスを作ると クラスオブジェクト自体にそのクラスに関する情報（質問者さんが言うHogeクラスの定義）が全て入ってますので、その情報を元にインスタンスが作られます。
#7です。詳細はメーリングリスト(tasu99)を参照ください。 @mail.goo.ne.jp になります。
No3,6,9です（なぜか３の倍数の回答が私だ）。 ＞ClassクラスのインスタンスなのにFileという定義されたクラスであると・・・。 ＞おもえばここの解釈が一番の原因でしたね。いまでもちょっと捕らえにくいのですが。 Rubyではほとんどのものがオブジェクト（主要な要素でオブジェクトでないのはメソッドくらい？）と、あちこちで書かれています。1 や nil がオブジェクトであり、クラスもオブジェクトですね。 最後に、クラスメソッドと特異メソッドとの関係について。 クラスでないオブジェクトの特異メソッドについては、わかると思うので説明略。 ＞ただ実際はクラスメソッドの定義の仕方と特異メソッドの定義の仕方がことなるので厳密には違うものなのでしょうか？ 定義の仕方は同じです。というか、クラスメソッドの定義の仕方は、特異メソッドの定義の仕方の一種。 また、 とあるクラスFooのクラスメソッド ＝ Foo の特異メソッド ＋ Fooの祖先クラスのどれかの特異メソッド なので、「hogeはFooのクラスメソッドである」と「hogeはFooの特異メソッドである」は等しくないです。 アドバイスとしては、考えるときに、「Fileオブジェクト」とか、「Fileインスタンス」という言葉を使わない方がいいです。 「Ｆｉｌｅクラスのオブジェクト(インスタンス)」と「Classクラスのオブジェクト(インスタンス)であるFile」とが、意識下で混同されてしまっていると思います。いざ明示的に聞かれると違うことはおわかりのようですが、曖昧な言葉で思考しているとつい引きずられてしまいます。
>>デザインパターン >とはwebサイトの見た目などのデザイン力ということですか？ 違います。 こういう知らない言葉を聞いた場合は人に聞く前にまず調べてみることも とても重要な能力ですよ。 検索するとそのものズバリでいくつか出ていますので、調べてみてください。 これも基礎理論に近いものなので、意識して学ばないとなかなか学べませんが 開発、特に上流工程においては非常に重要なことです。
すみません。#2の回答も的外れでした。 viewの@productsに正しい値が設定されていないのは、 def check @product = Product.all 　 render :action => 'check' end の @product = Product.allが原因です。 これを @products = Product.all として下さい。（@productを@productsにする） 尚、view側も見やすくするために =================================== <%= link_to "安い順", :action => 'low' %> <%= link_to "高い順", :action => 'high' %> </br>　　　　　　　　　　　　　　　・・・ここに改行をいれる <% @products.each do |product| %> 商品名<%= product.code %> 金額<%= product.price %></br>　　・・・ここに改行をいれる <% end %> =================================== とすると良いかと思います。
>====================== >unless params[:price1].blank? >p3 = params[:price1] >====================== >これは、ユーザーが入力した場合も、nilの場合も動いていますが、なぜでしょうか？^^; >unless params[:price1].blank?　＃空白じゃなかったら、 >p3 = params[:price1]　#入力された数字をp3に代入 >という意味ではないのですか？^^; unless params[:price1].blank? p3 = params[:price1] end この意味は、ユーザーが下限値を入力した場合のみ、P3にその入力値を設定します。 ユーザーは、入力をしなかった場合はp3 = params[:price1]は実行されません。 if params[:price1] != "" p3 = params[:price1] end と同じ意味です。 p3 = params[:price1] が実行されない場合は、 事前にp3=0があるので、結果としてp3=0になります。 つまりp3はユーザーが入力すればその値、入力しなければ0になります。 その状態で、where('price >= ?',p3)を行なうと、 入力しなかった場合は、where('price >= ?',0)になり、結果として、全ての価格を対象としていることに なります。 p4についても同様に、 where('price <= ?',p4)を行なうと、入力しなかった場合は where('price <= ?',2147483647)になるので、結果として、全ての価格を対象としていることに なります。
>2）carts/indexでは、スクリプトが表示されていませんでした^^; とりあえず、POSTが送信されない原因が判明しましたので、よかったです。 ではなぜ、この画面を表示した場合のみ、rails.jsがブラウザへ転送されないのかが、 問題になります。 通常は、/app/views/layouts/の下に application.html.erbが存在し、 そのapplication.html.erbから個々のxxxx.html.erbが呼び出されます。 application.html.erbの内容は、 通常、以下のようになっています。 <!DOCTYPE html> <html> <head> <title>そのアプリケーションのタイトル</title> <%= stylesheet_link_tag :all %> <%= javascript_include_tag :defaults %> <%#= javascript_include_tag :all %> <%= csrf_meta_tag %> </head> <body> <%= yield %> </body> </html> 上記の<%= javascript_include_tag :defaults %> で、rails.js等が取り込まれ、ブラウザに送られるはずです。 carts/indexの場合のみ、application.html.erbが呼び出されていないようにみえます。 意図的に呼び出さないようにしている場合は、問題ありませんが、 そうでない場合は、application.html.erbが呼び出されるようにすべきです。 また、/app/views/layouts下には、application.html.erbのほかに 別のテンプレートファイル（xxx.html.erb形式のファイル）がありますでしょうか？
windowsで他のアプリケーションを直接操作するのは、それなりに大変です。 (1) rubyライブラリに専用ライブラリが用意されていればそちらを使う。 (2) コマンドラインで操作可能なものは、systemなどでコマンドラインオプションを駆使する 　→ mspaintでは開くファイルしか指定できないかも？ (3) OLE(COM)に対応しているものは、OLE/COM(rubyならwin32ole)で操作する 　→ mspaintは対応してなかったかと (4) その他、方法がなければwin32apiを使って（マウスクリックやキーボード操作等の）メッセージを送信して操作する 　rubyに限らず、どの言語でもwin32apiの専門知識が必要とされます 　マウスやキーボードで可能なことは何でも送信できますが、いろいろな前処理（ウィンドウハンドルの取得など） 　が必要ですし後処理が必要な場合もあります。 　→ rubyならwin32apiライブラリ、rubyに限らず、VBでもperlでも特化言語以外はかなり非効率的かと思います。 win32api - rubyリファレンス http://www.ruby-lang.org/ja/old-man/html/Win32AP … ですので、代案として (1) rubyのライブラリを使ってリサイズする （#1の方の回答をご参照ください） (2) コマンドラインで完結するアプリケーションでリサイズする (3) OLEが使用可能(使ったことないけどphotoshopとかかな？)なアプリケーションでリサイズする win32ole活用法 　http://jp.rubyist.net/magazine/?0003-Win32OLE (4) win32apiプログラムに特化した言語(uwsc等)のスクリプトを起動してリサイズのメッセージを送信する (これだと、ruby使う意味が全く無いですが) などがあるかと思います。
> マニュアルではメソッド呼び出しの部分に書かれていますが、 > メソッド呼び出しでないところで使用されても機能するということで良いのかな？ うーん。 配列を生成するリテラル表現 [ ??, ??, ... ] が Array.[] メソッド呼び出しと同じように扱われているんだと思いますけど、あんまり自信ない。
> Web初心者、プログラミング初心者にとっても解りやすい参考書を教えていただけないでしょうか？ 開発環境さえ用意できれば、Mac だろうが Windows だろうが変わりません。 むしろ Windows の方が色々面倒臭いです。 んで、開発環境は ruby と rails がインストールできていればそれで完了です。 ruby は 1.9.2 を用意しないと、Rails3.1以降にバージョンが上がった時に困りそう。 あとはテキストエディタとコンソールが使えれば十分です。Mac の人は TextMate を使ってる人多いね。 参考書としては達人出版会が出してるのが Rails3 対応で初心者向けだと思います。 http://tatsu-zine.com/
#1です。 参考までに全レコードを取得後、each do で条件を満足するレコードを絞り込む場合は 以下のようになります。 def search_price products = Product.all　・・・@をとり、ローカル変数にする @products = Array.new　　・・・@products を配列で定義する products.each do |product|　　・・・productsに対して処理する item = product.price >= params[:price1].to_i && product.price <= params[:price2].to_i if item @products << product　・・・@products に追加する（@productではないことに注意 ） end end render :action => 'index' end
Windowsのペイントでしょうか。 起動するだけならsystem()を使えばいいでしょう。
system()ではgnuplotの標準入力とつなげないので、IO.popen()を使います。WindowsではなくてMacですが、下記のコードでRubyの中からsin(x)をプロットできました。 pipe = IO.popen("/Applications/gnuplot.app/bin/gnuplot", "w"); pipe.puts("plot sin(x)"); sleep(10); … すぐにclose()するとプロットしたグラフが消えてしまうので10秒待つ pipe.close();
>http://item.rakuten.co.jp/gekiyasukaguya/chair-p … このサイトの実装方法はわかりませんが、私は hidden_field_tagを使って、/animals/indexへ年齢を含めて渡す場合は、 以下のようにする方法しか思いつきません。 form_tagを2つ作成し、 1つ目は通常の（年齢の選択ができる）tag もう1つは、/animals/indexを呼び出すtagで、この中に、hidden_field_tagをつくる。 このhidden_field_tagに年齢を格納しておく。 但し、そのままでは、年齢が選択されても、その内容が、hidden_field_tagに反映されないので、 javascriptを使用して、年齢が選択されたとき、その内容を自動的にhidden_field_tag に格納するようにする。 ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ views/prseons/show.html ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ <h1>Presons#show</h1> <%= @preson.name %> <%= form_tag({:controller => 'animals',:action => 'age'}) do %> <%= select("form","age", (1..100),{:include_blank=>false},{:onChange=>"changeage(this.value)"})%> <%= submit_tag '表示する',:name=>'tag1' %> <% end %> <%= form_tag({:controller => 'animals',:action => 'index'}) do %> <%= hidden_field_tag('age',1,{:name=>'hiddenage'}) %> <%= submit_tag '次へ進む' %> <% end %> <script type="text/javascript"> <!-- document.write("javascriptによるbutton_toのurlの直接書き換え試験") function changeage(value) { alert(value); document.forms[1].hiddenage.value = value; } //--> </script> ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ animals_controller.rb ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ def index age = params[:hiddenage]　・・・年齢の取得 　　・・・・以下省略 end
そのような場合は、flashを使用すると良いでしょう。 セッションを使用する方法もありますが、リダイレクトした先の画面で一時的に使用したい場合は、 flashが適しています。 def foo 　　arr = [1,2,3,4] 　　#arrをいろいろと処理 　　flash[:arr] = arr #ここで設定する 　　redirect_to :controller => "top", :action => "bar" 　end def bar 　　#ここで@arr = arrしたい 　　arr = flash[:arr] #ここで元の画面で設定したarrが取得できる 　end 尚、flashは現在のリクエストと次のリクエストのみで使用可能です。その次のリクエストでは使用できません。（使用可能にする方法が無いわけではありませんが、そのままだと使用できません） 今回はflash[:arr]としましたが、:arrのところは、他のシンボル名でもかまいません。 例　flash[:hogehoge] = arr でもＯＫです。
arr_sではなく、arrを渡しては、どうでしょうか。 例： Data.delete_all["id in (?)", arr_s ]　を Data.delete_all["id in (?)", arr ]　とする。 こちらの環境 rails3.0.7 ruby 1.9.2 P180(windows版) ではうまくいきました。 但し、DBはpostgresqlを使用しています。(mysqlでも同じかと思います)
まず、 s=1+2+5+10+17+... について。そんなことはもう分かっているかも知れませんが、 数列におなじみでなければ、何故このように増えていくのか意味不明の方もいらっしゃると思います。 a(n)=1,2,5,10,17, ... 数列で困ったら各項の差を並べて b(n)=1,3,5,7, ... まあ、奇数が並んでるのが分かる人にはわかりますが、分からなければもう一度各項の差を並べて c(n)=2,2,2, ... となり、規則的に並んでいるのが分かります。 このように各項の差を取ることが、数列を解析するとき最初に確かめることです。 （差をとって駄目なら、商をとります。一般常識問題ならほぼ間違いなくどちらかです。） ご質問の j+ = 2 の2はc(n)の各項の2と言うことになります。 さて、プログラムの方は、#1の方も #2の方も述べられている通り、かなり問題の多いプログラムです。 s+=1 が s+= i なのはまあ、すぐ気付くとして無視します。 プログラムが動いて、結果が正しければいいというのは、非常に危険です。 プログラムは、他人が見て容易に理解可能でなければ社会で通用しません。 もし、あなたがプログラマを目指すのであれば、必ず他人が理解可能なプログラムを書くように心がけてください。 プログラマであれば、他人と共同でプログラムを作りますし、他人が作ったプログラムを修正するのは日常茶飯事です。 ご質問のようなプログラムは、あなたにも理解できなかったように他人に迷惑をかけてしまうことになりかねません。 このプログラムの最大の問題は、 (1) ループ変数をループの中で破壊的に書き換えている (2) ループの正常終了条件がループの中にある という２点により非常に難解になっています。２つとも言語共通のプログラミング作法に反しています。 特に(1)は致命的なバグに繋がっています。何故バグなのかは#1の方の発言に譲ります。 この二つの問題を取り除けば、#2の方の最初のプログラムにたどり着くと思います。 ・ループ条件に使用する変数をループ中に変更したい場合は、for - stepやfor - each形式ではなく、while形式、もしくはdo - while形式を使用する。 プログラムの世界では常識なので覚えておいてください。 #2の方、借用おそれいります。 s=0;i=1;j=1 until i>50 s+=i i+=j j+=2 end puts s until i>50　は、初心者なら while i<=50 のほうがいいかもしれません。(until文は他の言語にほとんどないので) 私はこれが一番シンプルで美しいのではないかと思います。 初心者でも何をやっているか、すぐ分かるのではないかと思います。 最後に、他人の作ったプログラムが何をやっているか分からないとき。 (1) デバッガを使用して、一行ずつ実行して変数を監視する (2) 変数をその都度出力する。 (1)は統合環境を作成（インストール）しないと動かないので、初心者なら(2)ですね。 ご質問のプログラムなら s+=i の後ろに、 print "i=",i.inspect ," j=",j.inspect," s=",s.inspect,"\n" を入れて、forループ毎に変数の出力を行えば、何が起こっているか理解する助けになります。 （ .inspect は数値なら不要ですが、配列など複雑なオブジェクトになると見栄えがよくなってきます） 例えば、最初の書いてあるものでは、 i=1 j=1 s=1 i=2 j=3 s=2 i=3 j=5 s=3 i=4 j=7 s=4 .. i=18 j=35 s=18 となり、 ・i が期待通りに増加していない(正しければ、1,2,5,10,17, ...,50) ・sが期待通りに増加していない(正しければ、1,3,8,35,...) ・j は期待通り増加している ことが理解できますし、プログラムを修正する毎に、経過を確認することができるようになります。
> ただ、VBA上で処理する場合Modを使わないで算出する方法はないのでしょうか？ あえて、Modを使わないのであれば、こんな感じでしょうか？ あとは、自分の流儀に合わせて修正してください。 Sub test() MsgBox MyMod1(-12977, 60) + 1 End Sub Function MyMod1(dividend As Double, divisor As Double) As Double Dim result As Double If divisor = 0 Then Err.Raise 11 Exit Function End If If dividend >= 0 Then If divisor > 0 Then result = dividend - Int(dividend / divisor) * divisor Else result = dividend - Int(dividend / -divisor) * divisor End If Else If divisor > 0 Then result = dividend + Int((divisor - dividend) / divisor) * divisor If result >= divisor Then result = result - divisor End If Else result = dividend + Int(-dividend / -divisor) * -divisor End If End If MyMod1 = result End Function
eRubyはほとんど使ったことないので、詳細はわかりません。 この中でエラーになりそうなのは > def getSinitizedString(s) > return CGI.escapeHTML(s) > end と > "あなたは、\"" + s + "\"と書きました。" での、コードの未対応や不一致です。 ですので、コードの確認に # s = getSinitizedString(s) #コメントアウト msg = "あなたは、\"" # + s + "\"と書きました。" #+s以降をコメントアウト としておいて <%=msg %> → <% p __ENCODING__ #スクリプトのコード。-Ksが効いているかの確認 p s.encoding # 入力した文字列のコード。 p msg.encoding # スクリプトに直接書いた文字列のコード %> として、英数だけと日本語ありの場合でどうなるか実行してみてはどうでしょうか? これで全部同じようなら # s = getSinitizedString(s) #コメントアウト のコメントを取って再度確認してみましょう。 コードが合わないようなら、s.force_encoding()で強制的に変換する等の処理が必要でしょう。 参考URL：http://doc.ruby-lang.org/ja/1.9.2/doc/spec=2fm17 …
プログラミングの質問ではなくて、checkinstall の使い方の話だと思うので、Linuxカテゴリのほうがいいと思います。
DDSが「DirectDrawSurface」のことなら、Imagemagickでサポートしてるみたい。 RMagickはImagemagickを利用しているだろうから、Imagemagick側をなんとかすればよさそうな。 あと検索： http://www.google.co.jp/search?hl=ja&q=DDS+Direc …
自分の意図にあわなかったからといって、何の説明もなく質問を打ち切るのは、どうかと思いますよ。 > まだruby初心者で分からないことだらけですので、 > 簡単な方法ではなく、出来ればfor文を使用したやり方で教えていただけると幸いです。 Rubyのforは、Javaの for( i: Object) 形式のものにあたり、C等でもおなじみの for(～;～;～)形式のものでも、Basic等のfor ～ to ～ でもありません。 また、Rubyプログラマ達の間では、for i in Obj より Obj.each ～ の方が好まれる傾向にあります。 配列に収めるにしても、空の配列に<<で追加、というのが一般的な方法です。これも、Javaの通常の配列では使わない方法です。(Listではaddを使いますが) Rubyの勉強がしたいのなら、Rubyの流儀に慣れることも必要です。 それでも、forで、というのなら まずは、御自身で調べてからにしてください。 forのような基本構文は、入門書でも最初の方にあるはずです。 そのJavaのプログラムの「意味」がわかっているなら、簡単に変換できるはずです。 それでわからない部分はっきりさせた上で集中的に聞かないと、身に付きませんよ。
なんかあっさりいって不安だなとおもってたら、0～2あたりで試した際にあっさりボロを出しました。 改訂させて下さい・・・ 劣化版 http://ideone.com/rNHq2 標準添付ライブラリ（お勧め） http://ideone.com/XIl4n 一応速度だけはマシみたいですけど・・・自分のはどんなバグが混じってるやらわかりません。
そもそも、awkのスクリプトとして変じゃないですか? 省略可能なパターン {アクション} の繰り返しのはずなのに、{}が一つもないのですから。少なくとも、こちらでやったらSytax Errorになります。 また、全体を{}で囲めば、「い★こ」という結果になりました。 あとは、awkだと文字コードの変換まではやってくれないと記憶してます。なので、あらかじめ揃えておく必要があるでしょうし、いわゆる「ダメ文字」問題もあるでしょう。 一番の間違いは、ここはRubyカテゴリーだということですけど。
ARGBのフォーマットについては、提示された参考サイトをみると 4バイトのバイナリ－データで、1バイト毎のデータがＡ、Ｒ、Ｇ、Ｂの順に並んでいると理解しました。 各1バイトのデータは、符号無し整数で０～２５５の値をとることになります。 以上の前提で話を進めます。 ４バイトのデータがstring型の変数名dataに格納されており、それをＡ，Ｒ，Ｇ，Ｂに分割して取り出す場合は、以下のようになります。 argb = data.unpack("CCCC") argv[0]にAが格納されます argv[1]にRが格納されます argv[2]にGが格納されます argv[3]にBが格納されます 以下サンプルソース ====================== data = [123,255,3,2].pack("CCCC") argb = data.unpack("CCCC") p argb ======================= 実行結果 [123, 255, 3, 2] 基本的にunpackでバイナリデータをrubyが扱える形式の変数に展開します。 packでrubyの変数をバイナリデータに変換します。 pack,unpack及びテンプレート（今回の例では"CCCC"の部分） に関して十分にマニュアルを読んで理解してから作業を行なってください。
>ここで表示したいのは、starttime の値です。現在時刻ではありません。説明が足りずすみません。 具体的にstarttimeに何が格納されているのかわかりませんので、回答できませんが、 starttimeに格納されている時刻をTime型に変換し、その値を:default=>で指定してあげれば、よいかと思います。
つまり上記のような params じゃねぇってことだよ。 そして変数 index が謎すぎる。
(1) y=f(x) として a = (0..10).map{ |i| f(i*0.1) } a.max と、a.min (2) 何がわからないのかわからないです。 ＞Rubyの質問です というからには、ある程度Rubyは知っているんですよね？それとも名前を知っているだけ？
きっと view 側で date_select で入力した結果なんでしょうね。 Date 型のインスタンスを得たいだけなら、ANo.2氏の方法でよいでしょう。 しかし単純に date 型のカラム studydate を持つテーブルに値をセットしたいだけなら、update_attributes なりを利用した方がよいでしょう。 参考URL：http://blog.zerosum.org/2007/5/9/deconstructing- …
params[:studylogdetails] が配列なんでしょ？その各々の要素であるハッシュから Studentlogdetail を作成するとして params[:studylogdetails].map { |detail_hash| Studentlogdetail.new(detail_hash) } で Studentlogdetail からなる配列が得られると思うよ。
コードがないのでわからん。 > @studylogheader は、学習記録を保持するオブジェクトで、学習記録には、 > 学習者（member）を持っています。 これは StudyLogHeader モデルが member_id を経由して Member モデルとbelongs_to で紐づいているということ？ なんとなく collection_select の第一引数が :member なのが怪しげですけど、単純に :member_id のミスタイプではなくて、何らかの意図があるのであれば補足にどうぞ。
不具合修正は、ANo1さんが仰られているとおりだと思います。 出力方法一般に関しては、文字列っぽいもの（ここではget_foobarの返り値）を出力系メソッド（print, puts, p等）に渡してやれば問題ありません。 例えばこんな感じですね http://ideone.com/61F0H ＜おまけ＞ 今回の内容を、少しだけRubyっぽくしてみました。 http://ideone.com/puQ38 # アクセサ名称 get_fooやset_fooという命名ルールは使わない方がいいでしょう。 Rubyに於いてはインスタンス名称をそのまま活用するアクセサが好まれます。 obj.get_foo → obj.foo obj.set_foo → obj.foo = このようなルールを用いる事で、言語自体が備えているアクセサ定義メソッド(attr_reader等)の助けを借りることも出来ます。 # インスタンス変数名称 余程有名な形か特徴的なprefixでも無い限り、省略形は可読性を下げます。 今回はフルでの記載をおすすめします。 conti → continent # 本題からは外れる内容なので、設計については省きます。 ・クラスやモジュールを通して、値が共通である → インスタンス単位で状態を持つ必要がないため、定数等へ ・インスタンス生成時に値を指定しなかった際のみ、標準値を採用する 等々、いろいろ試しながらRubyの機能に触れてみてください
たしか、libpngで定義されている png_info の定義が1.2.Xとそれ以降とで変わっていたと記憶しています。 Macportsでの最新版や、 「libpng14」 という記述からして、 src/texture.cが想定しているバージョン:1.2.X MacPortsによってインストールされたバージョン: 1.4.X という状態だと思われます。 texture.cのバージョンが古いのか、対応するのが遅れているのか、だと思われます。 対処方は ・libpng 1.2.X系をインストールする。 →MacPortsとの共存が面倒かもしれません ・texture.c をなんとかする →開発が止っているようなので、「最新版」でも対応できてないかもしれません。 →自分で修正するなら、変更方法は、検索したら次のものがみつかりました。 http://tuxthink.blogspot.com/2010/08/pnginfo-has … →ここが通ったら、他で別のエラーが出るかもしれません。
SJISとWindows-31Jの違いは何だと認識していますか？ Windows-31JはSJISのいくつかの文字の字形を変えて、JIS規格にない機種依存文字（ベンダー独自文字）を追加したものです。 字形の違いはコードを見ただけではわからないので無理というのは良いですよね。 ということで、 まず自動判定でSJISであることを確認して、/[機種依存文字]/ という正規表現で機種依存文字を探せばいいかと。Windows-31Jの機種依存文字にどんな物があるかは↓などを参照。 http://www2d.biglobe.ne.jp/~msyk/charcode/cp932/ … そもそも「やりたいこと」を自分で理解出来てない可能性もありますね。目的は何ですか？
findはクラスメソッドのため、2番目の User.new.find(:all, :conditions => '...', :order => '...') の構文はエラーになるはずです。 こちらの環境で、実行したときはエラーになりました。 こちらの実行環境は、windows7で ruby 1.9.2p180 (2011-02-18) [i386-mingw32] rails3.0.7です。 findの構文を見た限りでは、rails2.Xのように見受けられますので、 rails2.Xの場合はエラーにならないのかも知れません。 ただ、rails3.Xでは使用できないことは、明らかですので、 今後のrailsのバージョンアップなどを考えると、 この構文は使用しないほうが良いかと思います。 但し、本件は「回答に自信なし」のため、 更に、正確な回答を期待すのであれば、rubyのメーリングリストに参加し、 そこで聞かれるのが確実かと思います。 rubyのメーリングリストへの参加方法は参考URLを参照ください。 参考URL：http://www.ruby-lang.org/ja/community/mailing-li …
>プログラムの該当する部分を絶対パスで記述することで解決しました。 良かったですね。問題が解決できて何よりです。
実行はターミナル.appからでしょうか? それだと、SJISを正しく表示させるには、ターミナルの設定を変更してShift_JISに設定する必要がありますよ。 KCODEは、スクリプトや入出力がそのコードだと宣言するだけのもので、例えば、Shift_JISで書かれたものを端末に合せてUTF-8に変換してくれる、とか言うものではないです。
よく言われることですが、極々普通のスクリプティングでRubyのprotectedを使う頻度は高く有りません。 可視性を分ける際はpublicとprivateが殆どだと思います。 そういった意味では、（ぶっちゃけ）必要性薄いからピンと来ないだけな気もします これがいい例になっているかはわからないものの、書いてみました。 凄い抽象的なので、物の役には立ちません。 http://ideone.com/Z9GOp
github.com には沢山のオープンソースプロジェクトがホストされていて、特にRubyを使ったプロジェクトが多くあります。その中で何か読みやすいものを探してみてはどうでしょうか。 個人的にはRedmine (http://www.redmine.org/ )がよく練られた構成で勉強になるとは思います。やや大きめのプロジェクトであることとまだRails 3に対応していないことが難点ではありますが、 https://github.com/edavis10/redmine からソースを見ることができます。 参考URL：http://github.com
＜追記1＞ すみません、1.8の時のrequire呼び出しが1文字抜けてました。 require 'rational' ですね。 ＜追記2＞ Rubyに限らずですが、丸め誤差問題ですね。 ＜追記3＞ ちなみに、1.8台で次のコード動かすともっと嫌なものが見られると思います。 #! ruby -w total = 0 10.times do total += 0.1 end p total p total == 1 p 1.0 == 1
Rails3 から script コマンド群は rails コマンドに統合されました。
<%= %> の中身は任意の ruby コードが書けるから、 普通に "#{hoge()}" のようにすればいいんじゃない？
勉強目的で自分もチャレンジしてみました。なんとなく動いているかな？ to_sはBignum等にも都度書いてやらないと使えません。 36までだったら標準のメソッドへ投げて、それ以上で一覧表にある限りはこの中で処理をします。 http://ideone.com/J6ZiY ちゃんと検証とる程体力が残ってませんが・・・少なくとも実用に使えるしろものではありません。
puts "\u3053\u3093\u306B\u3061\u306F".encode(Encoding::SJIS) じゃダメなん？
Macportsでruby19をインストールして使用しています。 ○インストールしたvariantを確認する port installed ruby19 でどんな指定したかわかる。例えば私の場合は ruby19 @1.9.2-p180_0+c_api_docs+mactk+universal (active) って出てくる。 ・(active)になっているかを確認する。なってなかったらactivateする ・+nosuffix があるかどうかを確認する。 ある場合は、コマンド名がrubyに。gem,rake等の関連コマンドもそのまま 無い場合は、コマンド名に「1.9」という文字が付く。関連コマンドもそのまま ruby→ruby1.9, rake→rake1.9, gem→gem1.9,irb→irb1.9等 ○環境変数PATHを確認する Macportsは標準で /opt/local/bin にインストールされるので、PATHに含まれているかを確認する 無ければ追加する。
array = [1,2,3,4,5] array.each_with_index do |value,index| if index == 1 then puts value # => 2 end end indexが0からスタートするのに注意
おそらく試作の段階故とは思うのですが、pやppといったデバッグ系出力メソッドだとそのような状況になると思います。 ・putsやprintの利用 ・Ruby1.9xならマジックコメントの追記 このあたりも試してみてください
逆でしょう。 マジックコメントが効いてるから、invalid multibyte char (UTF-8)となるのでしょう。 マジックコメントにしても,htmlのcharset=にしても、「そのコードを使っています」と宣言するものであって、「そのコードに変換される」ものではないです。 保存するときにその出力コードを使うように、エディタを設定するとか、nkf等で後で変換するとかして、宣言したものと実際のコードを合せてください。 # 一部には、現在のコードと比較して、宣言されているコードで保存したり、コメント自体をファイルに合せて書き換えたり、警告表示したりするエディタもあります # emacs + ruby-mode.el とか > # cat hello.rb > # -*- encoding: utf-8 -*- > puts 'こんにちは' となってますが、その表示に使った端末がEUC-JPになってないですか? nkf --guess hello.rb 等で文字コードを確認してください
> サーバ立ち上げの記述も数年前とは違うという事でしょうか？ そうです。 rails3 からは、rails server として起動して下さい。 ほかにも色々変わってるから、Rails のサイトを見てね。
> if class_d.class_c and class_d.class_c.class_b and class_d.class_c.class_b.class_a > 　class_d.class_c.class_b.class_a.name > end > のようにしていますが、煩わしくてしかたがありません。 単純に classD にそのようなメソッドを一つ定義して 他ではそれを呼び出せばいいんじゃないの？
「何回繰り返す」と考えているのがおかしいです。「このデータすべてについて繰り返す」という風に考えてください。 class Shop_number def initialize @mise=["SA003","SA005"] end def each(&proc) @mise.each(&proc) end end data =[["SA001",0,10,20,10],["SA003",0,10,20,20],["SA004",0,10,20,100],["SA005",0,10,20,50]] obj = Shop_number.new obj.each do |i| data.each do |j| if j[0] == i p j end end end 元のプログラムを出来るだけ変えないとすると、クラス定義はそのままで、メイン部分を、 data =[["SA001",0,10,20,10],["SA003",0,10,20,20],["SA004",0,10,20,100],["SA005",0,10,20,50]] obj = Shop_number.new obj.tenposuu.times do |i| data.size.times do |j| if data[j][0] == obj.tenpo_no(i) p data[j] end end end
こんなかんじで如何でしょう。 考え方は他のご質問の内容と同じです。 def get_getsuban(y, m) return (y*12+m+12) % 60 + 1 end year = 2008 month = 12 puts get_getsuban(year, month)
私の場合は、windowsでvmwareで開発していますが、多くのrails開発者はmacで開発していると思います。 macをお持ちということなのでmacで開発されたほうがよいと思います。
Rails だと勝手に想定。 > ・記事タイトル・日時・内容を1つのセット(かたまり)としてまとめる なんのこっちゃわからん。 > ・一ページにつき5件のみ表示される方式 kaminari とか使うといいよ http://ja.asciicasts.com/episodes/254-pagination … >・最新の記事が一番上に来る並べ方 Blog.order("created_at DESC") とか。
＞ブラウザ表示時に西欧のコードで文字化けしてしまうんですよ。 文字コードを指定していないせいでしょうね。 ちゃんと指定しましょう。 もしこれがcgiで、これだけで全体のプログラムなのだとすると、先頭で、 print "Content-Type: text/plain; charset=Shift_JIS\n\n" そうじゃないのだったらどこかでこれに類することをしてください。
pではなくprintやputsで出力してください
「申」を SHIFT JIS で表現したバイト列は "\x90\x5c"になりますが、 この"\x5c"は、1バイト文字「\」の文字コードに一致します。 そのため、SHIFT JIS と解釈せずにコードを見ると、不可解な「\」が現れてエラーになります。 そのため、文字列中に「申」などの文字を使いたい場合は、rubyに、文字のエンコードはSHIFT JIS であると認識させる必要があります。 ruby 1.8系の場合は、起動オプション(1行目の「#! /usr/local/bin/ruby」といった行)に -Ks を追加してください。 http://www.ruby-lang.org/ja/man/html/FAQ_C6FCCBD … ruby 1.9系の場合は、#!の次の行にmagic comment 「# -*- coding: Windows-31J -*-」を追加します。 http://dgames.jp/dan/permalink/20090828_00
以下のようにしてください。 ---------------------- for i in 1..3 eval("$hensuu#{i} = i") end #各変数の内容を確認する p $hensuu1 p $hensuu2 p $hensuu3 ----------------- 実行結果は以下の通り 1 2 3
「基準となる日」を作ってそこからの経過日数を考えるのが簡単だと思うよ.
剰余演算子を使用すれば良いと思います。 year = 1983 puts ((year - 4) % 60) + 1
年をyear、月をmonthとすると、 (2010..2012).each {|year| (1..12).each{|month| ans=9-(year*12+month+5)%9 puts "#{year}年#{month}月=#{ans}" } } などでしょうか。 http://www.ruby-lang.org/ja/man/html/_C0A9B8E6B9 … 等を参考にループを作っておいて、 (year*12+month+x)%y #xは0から(y-1)の数、yが除数 で余りを求めればよいと思います。
マニュアルを読むんですね。 http://doc.okkez.net/static/192/class/Hash.html ハッシュのメソッドを上から順に読んでいくと > key(val) -> object > index(val) -> object > 値 val に対応するキーを返します。対応する要素が存在しない時には nil を返します。 とあるじゃないですか。
No.1 にて、mtaka2さんがおっしゃている通り、1要素のハッシュで上書きしていますので、結果は1要素になります。 なにをやりたいのかが、質問では分かりかねますが、 5から13までの文字列をキーにもつハッシュを作って表示したいのであれば、 center = 7 ban = { } for i in 5..13 if center < 9 ban[i.to_s]= center center += 1 else ban[i.to_s]= center center = center % 9 center += 1 end end ban.each{|key, value| print(key , "=>", value , ",") } 等でしょうか。 ハッシュでeachを使うと順序は保障されませんので、順序を気にするのであればmtaka2さんがおっしゃているように最初から配列をつかう方法が良いと思います。
Rails 3.0 から、もろもろ rails コマンドに統合されました。 プロンプトから rails server で起動するはず。 Rails3 の日本語の書籍は達人出版会から出てるやつしか知らん。
フォームからの入力データは、たとえ数字だけで構成されていても、データ型は「文字列」です。 文字列から数値に変換するには to_i を使います。 print -(birth.to_i - 1927)%9+1
＞[1, 1], [1, 13], [2, 2], [2, 14], ...です 結局、どんな仕様なのか誰にも伝わっていません。
「-kは不正なオプションです (-h で正しいオプションを表示できます)」 と書いてあります。 エラーメッセージはよく読んで理解するようにしましょう。プログラミング上達のコツの一つです。 -kというオプションはありません。-K(大文字)で、スクリプトで使用する日本語のコードを指定します。 これに限らず、大文字と小文字は区別されます。また、シングルクオート(':日本語キーボードではSHIFT+7)とバッククオート(`:同SHIFT+@)、1lIといった文字は印刷では判別しずらいことがあります。よく注意してください。時には、その本ではなく、リファレンスマニュアルも参考にしてください。 http://www.ruby-lang.org/ja/man/html/ http://doc.okkez.net/ ところで、Rubyは1.8系から1.9系の間で大きく変更され、-Kオプションは1.9では非推奨となっています。(次の行のencodingで指定する) ほかにも変更点が多いので、その本がどちらを基に書かれているか確認してください。(Amazon等では確認できませんでした)
どの辺でひっかかっていますか？ 1. サクラエディタを開く 2. フロッピーアイコンをクリックして（名前を付けて保存） 3. ダイアログで目的のフォルダ"C:\ruby_ex"に移動 4. 名前test01.rbで保存 これだけです。 または、 1. エクスプローラで目的のフォルダ"C:\ruby_ex"を開く 2. 右クリック→テキストファイルを新規作成 3. 名前をtest01.rbに変更 4. test01.rbを右クリック→SAKURAで開く これでもＯＫ。 「SAKURAで開く」メニューが出ない場合は、そのままダブルクリックしてください。 「ファイルが開けません」 と言うエラーが出たら、下に表示されている「一覧からプログラムを選択する」を選び、サクラエディタを選択します。 ところで、質問自体は、特にRubyとは関係無いエディタの使い方の基本的な話ですので、他のカテゴリ（「その他(ソフトウェア)」とか）の方が回答がすぐに付くと思います。 （適切な回答が素早く欲しい場合、カテゴリ選びは、結構重要です） Rubyそのものの質問であれば、もちろん、このカテで大丈夫ですよ。
Rubyは触ったことありませんが… 「x:\Documents and Settings\xxxxxx>」となるのはXPの場合です。 その入門書のどこかに、「WindowsXPにて動作確認」とか、そんな感じの注釈はありませんか？ とりあえず、"Documents and Settings"は"Users"に読み替えてもいいでしょう。 # WindowsVista/7の場合 ただし、アカウント名を日本語で設定しているようですので、それらが問題を起こす可能性はあります。 # Rubyは日本生まれですから、大丈夫…かとも思われますが…… >(1)で指示どおりに「C:\Documents and Settings\○○　○○>mkdir C:\ruby_ex」と入力すると この場合、入力するのは>の後の部分になります。 http://www.amazon.co.jp/dp/4774132063 こういった書籍で、コマンドプロンプト(CUI操作)について先に勉強しておいた方がいいと思われます。 # 類似のサイトもあるでしょう。 「カレントディレクトリ」「コマンド検索パス(PATH環境変数)」「相対パス」「絶対パス」「コマンドラインスイッチ」などが不明な状態でCUI操作は厳しいと思われます。
パーミッションは？ ちゃんと元通りにした？
exec関数が成功した場合は、制御が戻りません。（execの次の行に進みません） したがって、一度動作を行うと終了します。 制御が戻るのを期待する場合は、execの代わりにsystemを使用します。 systemの呼び出し方はexecと同じです。
＞現在手元にPHPのソースが無い状態で 現在と言うことは、いずれ入手できると言うことでしょうか。 PHPのソースがない状態であれば、元がPHPかどうかなど関係なく、すでに述べられている方法で新規にrubyonrailsで作るしか方法がないと思われます。 そんなに難しいことをやっていなければ、PHPだろうがrubyonrailsだろうが問題にならないと思います。 それとも何か具体的にPHPに関することでの、疑問をお持ちなのでしょうか。
#2です。 以下のようなスクリプトを書いて実行してください。 -------------------------------- fh = open("data.txt") while line = fh.gets #もしデータに期待しない文字列を含むものがあるなら、スキップする # 期待する文字列は、３つの|が存在し、各々の|の両端に|以外の文字が１文字以上存在すること if /^[^|]+\|[^|]+\|[^|]+\|[^|]+$/ !~ line #上記条件の文字列でないなら、次の行へ移る next end #改行文字を削除する line.chomp! # |で分割する elm = line.split("\|") # 4つの部分に分かれるので、それらを印字する print elm[0],"\n" print elm[1],"\n" print elm[2],"\n" print elm[3],"\n" end -------------------------------- データは、data.txtという名称のファイルに格納されているものとします。 起動オプションで -Ksを指定してください。（文字コードの指定） コマンドを実行したディレクトリと同じ場所にに、このdata.txtをおいて実行してください。 ４つの個々の部分が、画面に表示されます。 なお、データが全て、例に出されたようなクリーンなデータだけなら、 if /..../ !~ line end の部分はなくてもかまいません。
「学びやすい」かどうかは、たぶん、人によると思います。 一応、Javaと同じ「手続型言語」なので、「関数型言語」ほどの違いは無いですから、基本はすぐ覚えられると思います。 しかし、Javaに比べて非常に柔軟な言語ですし、Javaに無い機能がたくさんあります。 Javaとの違いを見抜いて、Ruby独特のものとして理解できるようなら「学びやすい」かもしれませんが、とにかくJavaに置き換えて理解しようとすると「学びにくい」でしょう。 >「PHPと言えばコンシューマ向けのWebアプリケーション」 >「Javaと言えばエンタープライズ向けのWebアプリケーション」 こういう先入観は持たない方がよいです。 例えば、開発環境として有名なEclipseはJavaで書かれています。 「Javaで苦労したことが、Rubyでは簡単に出来た」というものが、Rubyの得意分野です。いろいろやって実感するのがいいと思います。
プログラムとしては間違っていません。 文字コードの設定がおかしいのでしょうね。 Rubyのバージョンは？使っている文字コードは？エラーの内容は？
稼働コアは、スレッドで決まるわけではなくて、数ミリ秒単位のタイムスライスで、空いているコアに割り当てられます。 従って「このスレッドはどのコアで動いているか？」という質問は意味をなしません。 何故そんなことを知りたいと思ったのかを書くと、良いアドバイスが得られるかもしれません。
Web applicationが一つのrequestに対して複数のresponceを返すのは言語に関わらずhttpでは無理なのでAJAX requestを使えば可能だと思います。 一つのボタンが3つのリクエストを行って、それぞれ別のcsvを返すという処理にすればできます。
OSというか漢字コードが提示されていないので、シフトＪＩＳ（Windowsで使用する漢字コード） という前提で回答します。 やり方は以下のとおりです。 １．文字列を個々の文字に分解する。 ２．分解された個々の文字の文字のサイズ（バイト単位）を取得する。 ３．そのサイズごとに集計する。 以下のサンプルコードを実行してください。 -------------------------------------- # coding:WINDOWS-31J def count_data(moji_tbl) zen = 0 han = 0 fumei = 0 for m in moji_tbl case m.bytesize when 1 han +=1 when 2 zen += 1 else fumei += 1 end end printf("半角の数=%d 全角の数=%d 不明な文字の数=%d\n",han,zen,fumei) end str1 = "あいイウう" str2 = "あいイウう" moji_tbl1 = str1.split(//) moji_tbl2 = str2.split(//) count_data(moji_tbl1) count_data(moji_tbl2) ------------------------------------- 実行結果は以下のとおりです。 半角の数=0 全角の数=5 不明な文字の数=0 半角の数=2 全角の数=3 不明な文字の数=0 str1は全て全角 str2はイとウが半角です。（投稿すると全角になってしまうかも知れませんがこちらでは半角の文字です）
Ruby本体のソースコードを改造して作成される場合は、Rubyのライセンスに従う必要があります。 単にRuby言語を使ってRubyを介して動作するといだけの場合は、 あなたが自由にライセンスを決めることができます。 Ruby本体を同梱する場合は、Rubyの配布元に聞いたらどうでしょうか？ 日本人が開発している言語ですので Rubyの配布元に聞いたほうが確実です。
3)のみ回答します。 rubyのメーリングリストに参加されてはいかがででしょうか。 わたくしもこれに参加していますが、かなり的確な答えが返ってきます。 メーリングリストの種類もいくつかありますが、ruby-list(日本語) でよいかと思います。 参考URL：http://www.ruby-lang.org/ja/community/mailing-li …
> 12行,16行　Vec.new(@x + other.x, @y + other.y) > other., other.yの表記の意味が理解できません。 > class定義が終了していないのに使用している そもそも、Rubyの場合、ここでのotherがclass Vecであるとは限りません。 x,yというメソッドなり属性なりを持っていて、それぞれが@x,@yと演算できるオブジェクトを返すのだったら、なんでもいいはずです。 C++やJava等のような、宣言が必要な言語と混同していませんか? もっとも、そういった言語でも「クラスの定義が終了していない」状態でも、宣言さえあれば使用できますが。 // C++の例: class Vec{ //定義開始 public: double x; double y; // 「定義」の途中だけどVecクラスを使っている Vec& operator+=(const Vec& other){ this->x += other.x ; this->y += other.y ; return *this ; } }; // Vecの定義終了
Railsを使うには以下のこれらが必要です。 Active Record http://rubyforge.org/frs/?group_id=182 Active Support http://rubyforge.org/frs/?group_id=570 Action Pack http://rubyforge.org/frs/?group_id=249 Rake http://rubyforge.org/frs/?group_id=50 Rails http://rubyforge.org/frs/?group_id=307 足りなくてエラー吐いたらすいません(;^^) これらのファイル(.gem)をダウンロードし、ダウンロードしたディレクトリで上記の順に gem install ファイル名 --local と実行してください(必要に応じてsudoなども)。 こうすることによって古いバージョンの他に新しいバージョンがインストールされ、両方のバージョンが共存することになります。また、 rails appname と実行すれば新しいバージョンのRailsが使われますが、バージョンを指定する場合は rails _バージョン_ appname とすれば出来ます。
使っているrubyのバージョンはなんですか? 1.9.2なら require 'method_area.rb' を require './method_area.rb' のようにしてみてください。
こちらは参照されましたでしょうか。こちらにming/rubyのインストール 方法があります。 参考URL：http://pub.cozmixng.org/~the-rwiki/rw-cgi.rb?cmd …
ファイルを指定サイズで複数ファイルに分割したいと言うことですね。 open("test.log","r") do |file| # windowsだと file.binmode i=0 while data=file.read(500*1024*1024) i+=1 open("test.log.#{i}","w"} { |out| out.write data } end end 最後のファイルは500MB未満の可能性があります。
> また、Rubyのファイルは基本テキスト形式ですが、C++のプログラムで扱う場合、配布する際には、バイナリ形式にすると思うのですが、それはどうすればいいのでしょうか。（間違ってたらすいません） これが、C++等のように ソースコード→バイナリの実行ファイル とコンパイルしたい、ということだとしたら、 Rubyのようなスクリプト言語では、ソースコード=実行ファイルで、そのまま配布するのが基本です。
＞width=file.read(4) ＞print("width = ",width, "\n") 空白じゃなくて、バイナリをそのまま出力しているはずです。ファイルにリダイレクトして16進表示でもしてみるとわかります。 widthに入った4バイトのバイト列を、リトルエンディアン符号無し32bit整数として解釈したいと言うことだと思います。 width.unpack("V")[0] で、整数値が得られます。 Cは型が弱いので、int変数にファイルから読み込んだり出来ますが( fread(&n, sizeof(int),1,fp) )、Rubyが型(クラス)の区別を厳密にするので、ファイルから読み込んだ物はバイト列で、バイト列を整数と解釈するためには明示的な変換が必要です。
逆にお聞きします。 1行「戻らないと」ダメなのですか? 例えば f = nil while g = file.gets do 　g.chomp! 　unless f.nil? then 　　p f 　　p g 　end 　f=g end と、前の行を変数に取っておく、という方法もあります。 どうしても戻るのなら、2行目を読む前にtell / posで場所を覚えてseek / posで移動するというのはありますが、何度もファイルを行き来して読むのは効率はよくないです。 file_position=0 while f = file.gets do 　f.chomp! file_positon = file.pos g = file.gets # ここでg==nil(→ファイルがfを読んだところで終り)のチェックが無いので # 次のchompで # abcde.rb:9: private method `chomp!' called for nil:NilClass (NoMethodError) #のエラーになってます g.chomp! 　p f 　p g file.pos = file_positon end
Ruby1.9はOSのスレッド機能で複数スレッドを実行しますので、1プロセス複数スレッドをマルチコアで同時実行をサポートしたOSなら同時実行が出来ます。 Ruby1.8はOS上では1スレッドで動くので、Rubyプログラム上で複数スレッドを実行しても複数コアで同時実行はされません。
これはクラス定義だけなので、それを使ったメインプログラムが必要です。 何がしたいのでしょうか？検索エンジンを作りたい？大変ですよ。
#2 #3です。 #3でも、うまく記述できなかったので。話がちょっとそれて申し訳ありません。 OKWaveの確認画面で表示される文字列と投稿後に表示される文字列が違うみたいですね。 半角「－」は入力時・確認・投稿後も半角の「－」 半角「＆＃４５；」は入力時・確認はHTMLエスケープした文字列で、投稿後は半角の「－」 半角「＆ａｍｐ；＃４５；」は入力時・確認は2回HTMLエスケープした文字列で、投稿後は半角の「＆ａｍｐ；＃４５；」 となってしまいましたね。 OKWaveではどうやって、半角「＆＃４５；」を表示するのか、よく分かりませんが、 半角「＆＃３８；＃４５；」なのかな？ 申し訳ありませんが、ちょっとテスト &#45; これで、半角「＆＃４５；」？ いずれにしても、#2で書きたかったのは、以下です。 str ="<!-- Advertiser 'XXX', Include user in segment 'test--001' - DO NOT---ANY WAY -->\n<img src=\"XXXXXX\" alt=\"test--001\" width=\"1\" height=\"1\" />\n<!-- End of segment tag -->" str.gsub(/\<!\-\-(.*?)\-\-\>/) { "<!--" + $1.gsub(/\-/,"＆＃４５；") + "-->" } の＆＃４５；を半角にすれば、半角「－」をHTMLエスケープできると思います。
違いが全く分かりませんが、 例えば、 test→#test #test→#test として出力したい場合以下のようにすれば可能です。参考になればですが・・。 str.gsub(/(?<!#)(?=test)/,'#')
MacのＯＳについては、よくわかりませんが、#1の方の回答では、ファイル名の大文字と小文字は区別されないそうです。windowsでも、同様にファイル名の大文字と小文字は区別されません。私が、windowsで、質問者様と同じような状況になった場合、大文字をと小文字を区別せずに、ファイルの存在のチェックをおこなうと思います。直接的な回答ではありませんが、どうして、大文字と小文字を区別されたいのか、その理由を提示されると、又、べつの回答が得られるかと思います。基本的には#1のかたが言われるとおり、大文字をと小文字を区別しない方法をとるのがよいかと思います。
使ったことはありませんが、マニュアルにあるとおり、 http://www.goto.info.waseda.ac.jp/~fukusima/ruby … TCPPacketクラスならば tcp_data UDPPacketクラスならば udp_data が、パケットのデータ（ペイロード）では？ マニュアルのないクラスなら、ソースを見たりmethodsを使ったりしますが、 http://doc.okkez.net/static/187/class/Object.html マニュアルがあるなら、心当たりのあるページを全て確認しましょう。
プログラムを見せてくださいというのなら、実践で使えるかどうかとプログラムの書き方を見るためでしょうから、数ヶ月勉強しただけでは採用されたとしても仕事についていけないと思います。 他の言語の経験でもあれば別ですが、情報処理の午前って完全に選択じゃないですか。 あれで7割取れなくても本を見ずに自分でコードが書ける方が会社では優先します。 ある意味、情報処理の資格なんかより現場では「ソラでコードが書けてナンボ」ですから。 それに誰かのソースを借りて提出したとしても、他人が作ったソースを理解して何をやってるのか頭の中でフローが書けるくらいでないと採用は難しいと思いますよ。
サーバーに保存せずにプレビューする方法としては、 HTML5のFile APIを使用する方法くらいしか思いつきません。 あとは、何らかの方法でサーバーで保存しないことにはプレビューは無理では ないでしょうか？
選んだ数字が4から9の場合はどういう結果になるのか想像できますが、10から30だったらどうなるのでしょうか？ たとえば30の場合は email = "3030303030@yahoo.co.jp" password = "3030303030" ですか？
＞何が問題なのでしょうか？ メッセージを見る限り、何も問題はないと思いますが、 ＞ドライバのバージョンを下げたりしてみてもうまくいきません。 何がうまくいかないのでしょうか？ メッセージの意味がわからないということですか？ ==== の行以降の警告メッセージはドキュメントのインストール時にソースを解析してドキュメントファイルを作成する際の警告(ソース中のドキュメントの記述の不足)なので動作には関係ないです。
table tcppackets already existsとなっていますので、 同じテーブルを再定義しようとしてエラーが発生しているように思われます。 テーブル作成は初回だけ行えばいいので、CREATE TABLEを消して 再度実行されてみてはいかがでしょうか？ (SQLを作成している部分のコードをよく読まれることをお勧めします。)
＞現在、インストールされているrubyのバージョンを確認するには、 ＞ruby -vでは、駄目なのでしょうか？ バージョン確認はそれで合ってますが、複数のバージョンのRubyがインストールされている場合は、自分の使うRubyで確認しないと無意味です。 ＞CORESERVERにruby1.8.7を入れてみました。 どこのディレクトリにインストールしたのでしょう？gemとかRailsはそのRubyを使っていますか？ gemとかRailsとかどうやってインストールしましたか？Ruby1.8.7を使ってインストールしてないのでは？インストールに使ったRubyを使うようにインストールされるはずです。
OSの割り込み精度に依存します。 　WindowsNT系は約10ms 　Linux(カーネルのバージョンは忘れたけど)は約1ms だったかな？ 一介の言語はその壁を突破できません。
リファレンスのdefined?の部分に以下の記述があります。 ＞特別な用法として以下があります。 ＞ ＞defined? yield ＞yield の呼び出しが可能なら真(文字列 "yield")を返します。 block_given? と同様にメソッドがブロック付きで呼ばれたかを判断する方法になります。 普通は、 def omit_brock1 if block_given? puts "block exist" else puts "block not exist" end end と、block_given? を使うと思います。これはtrue/falseを返します。
No.1です。 私もWindows環境で使用しているので、そんなはずは……と思ったのですが たしかに　ActiveScriptRuby 1.8.7(p299)ではpopen3はエラーになりますね。 私が動作確認したのは以下です。 Ruby-1.9.1-p429 (RI抜き) Microsoft Installter Package(2010/07/021 version 28523) （http://www.artonx.org/data/asr/） # 先の回答にも書きましたが、test.batに文字を渡すだけならIO.popenで良いと思います。 一応、情報として追記させて頂きました。
libpcap-rubyのバグですかね？ http://bugs.debian.org/cgi-bin/bugreport.cgi?bug … (libpcap-ruby/0.6-9.1では問題なく動いています。)
私もRubyをよく知らないので参考までに。 CreateWindowExが失敗する理由はGetLastErrorを使えばわかるはず。 あとhInstanceに渡すのはGetModuleHandle(NULL)の戻り値でいい気がする。
カナは文字コード表上でアルファベットの様に半角と全角で同じ順番に並んでいるわけではないので、trで単純に変換できません。 # coding: Windows-31J require 'nkf' input = "アイゥェォバヴァポヲ".encode('Shift_JIS') output = NKF.nkf('-SsZ4',input ).encode('Windows-31J') puts output ruby 1.9.1p429 (2010-07-02 revision 28523) [i386-mswin32]の環境で確認しました。 エンコードは適宜変更して下さい。
http://www.meadowy.org/meadow/wiki/Screenshots 公式サイトにあるスクリーンショットです。 オレンジ色ですか?
はまりやすいところですが、proc組み込み関数はくせ者です。 Ruby1.8ではproc組み込み関数は、lambdaを返します。 Proc.new{。。。。} # => procオブジェクト lambda {。。。。} # => lambdaオブジェクト（クラスはProc） proc {。。。。} # => lambdaオブジェクト（クラスはProc)！！！！！注意 Ruby1.9ではproc組み込み関数の機能が変更されています。 Proc.new{。。。。} # => procオブジェクト lambda {。。。。} # => lambdaオブジェクト（クラスはProc） proc {。。。。} # => procオブジェクト #3の方は、Ruby1.9をお使いと思われます。
元の意味を出来るだけ保つなら、 /(.)(\d\d)(\d\d)*(.)/ =~ "123456" p $2 でしょうね。
色々ありますが、 １．while data=file.gets split(/[:,]/) fileがどこでも定義されていません。splitがここにあるのはまずいです。 ２．arry=file.gets これでは1行分のデータ(文字列)しか取得できません。また、eachも使えません。 ３．infile=open("marks2010","r") "marks2010"はコマンドライン引数(ARGV[0])から取得する必要があります。 (ruby prog1.rb marks2010で実行する為) 適当なサンプル(ruby1.9)作成してみました。 raise "Error:File not found!!" unless ARGV[0] and File.exist? ARGV[0] open(ARGV[0],"r") do |f;result,pass| begin results = open("results2010 1","w") passed = open("passed2010 1","w") f.each_line do |line| if line =~ /^("(?:[^"\\]|\\.)*"):(.*)/ name = $1 score = $2.scan(/\d+/) avg = score.inject(0.0){|r,i| r+=i.to_i }/score.size results << "#{name}: #{ avg.round(1) }\n" passed << "#{name}: #{ avg.round(1) }\n" if avg >= 60.0 end end rescue =>ex p ex ensure results.close if results passed.close if passed end end
Rubyのインストールについて詳説されています。 参考にしてください。 http://www.rubylife.jp/install/install/
DateやTimeのインスタンスの各時刻要素を持ってきて、新しくDateTimeのインスタンスを作成すれば良いと思います。 irb(main):001:0> require 'date' => true irb(main):002:0> ddd = Date.new(2001,1,1) => #<Date: 2001-01-01 (4903821/2,0,2299161)> irb(main):003:0> hhh = Time.now => 2010-07-29 19:34:40 +0900 irb(main):004:0> date = DateTime.new(ddd.year,ddd.month,ddd.day,hhh.hour,hhh.min ,hhh.sec) => #<DateTime: 2001-01-01T19:34:40+00:00 (2648064221/1080,0,2299161)> irb(main):006:0> > また、時刻だけを定義出来るクラスはないのでしょうか。 > Timeでは時刻だけと思ったのですが、日付＋時刻のようです。 > こちらもアドバイス頂ければ幸いです。 そのようですね。 DateTimeで年月日の値を適当なものに固定して使用するとか、あるいは時分秒のデータの保持のみが目的であるならば、自分でクラスを定義してしまうのも良いかもしれませんね。
＞20323.27430556の場合は、"1955-08-22 06:35:00"としたい。 もしやと思ったら、"1955-08-22 06:35:00" は、Excelで 20323.27430556 を日時書式で表示したときの値ですね。 Excel は、1900-01-00 00:00:00 という現実には存在しない日付をゼロとしているので、1日ずれます。さらに、1900-02-29 という現実には存在しない日付もカウントしているので、合計2日ずれます。 セルに、0 ～ 61 の数字を入れて、書式を日付にすると確認できます。 Excelの日付をシミュレートしたければ、DateTimeを使った上で上記の考慮が必要です。
プログラムを書かれている文字コードは何でしょうか？ moji2 = NKF::nkf( '-SsXm0', moji2 )でShift-JISのStringがmoji2に代入されますが、moji1やmoji3は他のエンコードのStringが代入されているのでエンコードが一致しないというエラーになっているのだと思います。 私の環境（Windows VISTA）では以下の様になりました。 # coding: Windows-31J　だと test.rb:20:in `gsub': incompatible encoding regexp match (Shift_JIS regexp with Windows-31J string) (Encoding::CompatibilityError) from test.rb:20:in `<main>' となったので moji2 = NKF.nkf( '-SsXm0', moji2 ) moji2 = moji2.encode('Windows-31J')　←この行を追加してエンコードを一致させるとエラーは無くなりました。 # coding: shift_jis　では エラーは発生しませんでした。
要するに 2進表記の文字列が欲しいってこと？ sprintf "%#06b", 0b0001
元のページの文字エンコーディングと、結果を見ようとするツール（メモ帳？？）が期待する文字エンコーディングが異なっているんでしょう。 Windowsのメモ帳で見たければ、Shift_JISにする必要があるので、 require "kconv" しておいて、 print f.gets.tosjis それより文字エンコーディングを自動認識するエディター（フリーソフトでもたくさん種類があります）を使うのがいいと思います。
1)2) http://doc.okkez.net/static/191/class/String.html http://doc.okkez.net/static/191/doc/spec=2fm17n. … ・ASCII-8BITを使う。 あるいは ・バイト単位ではなく文字単位で処理するようにアルゴリズムを変更する 3) http://www.ruby-lang.org/ja/man/html/Date.html を見ると、exist?って無いんですよ。検索したら、exist?で日付の正当性を確認する、と説明しているサイトもあるんですが... そのあたりの経緯は詳しい人におまかせして。 ・ valid_～? メソッドが使う 4) http://doc.okkez.net/static/191/method/String/i/ … 1.9でもtrはあるので ・mojiがStringではない ・Encode関係で両者の対応が取れてない ということではないでしょうか
＞Ruby1.9を使うとありますが、1.9になると何か便利機能が増えているのでしょうか？ 1.9だと、Stringがバイト列じゃなくて文字列になるので、 "1あいアう234565789"[2,2] で、OKです。 1.8だと、 "1あいアう234565789".split(//)[2,2].join
以下の様なページをみつけました。nkfを使用する必要があるようですね。 http://www.db.is.kyushu-u.ac.jp/rinkou/ruby/hank … 参考URL：http://www.db.is.kyushu-u.ac.jp/rinkou/ruby/hank …
こういうことではないですか? http://ruby.g.hatena.ne.jp/asagi29/comment?date= …
a = hoge.select(ARGS) の場合に、ARGSの部分が引数です。 ここは、「reads[, writes[, excepts[, timeout]]]」とかかれているので 以下の４種類の書き方ができます。 hoge.select(reads, writes, excepts, timeout） hoge.select(reads, writes, excepts） hoge.select(reads, writes） hoge.select(reads） また、aに代入される値が戻り値です。 ここには、 「戻り値は、timeout した時には nil を、そうでないときは 3 要素の配列を返し、その各要素が入力/出力/例外待ちのオブジェクトの配列です(指定した配列のサブセット)」 と書かれているので nil 若しくは [???,???,???]の形で値が代入されます。 これでご理解いただけるのではないでしょうか。
#1のかたが言うように、もう少し具体的に書くと、良い回答が得られるかと思います。 入力した内容とは、 ファイルから入力したものですか？ 画面から入力したものですか？ それは、文字列なのですか、それとも、バイナリーデータなのですか？ 配列に入れたい理由は何故ですか？ 文字が"abcdefg"とあったら、 配列にはどのように入れたいのですか？
※申し訳ありません。余計なエスケープが含まれていましたので削除しました。 a , b = str.split(/\n(?=<!--\s+Advertiser)/) (?= )は正規表現の先読みという機能です。 \nの後に <!-- Advertiser という文字列が続く「位置」にマッチします。 位置というのがポイントです。<!-- Advertiser自信を含めてしまうと、 splitした際に<!-- Advertiserが消えてしまいます。 【先読み有りの場合】 \n <!-- Advertiser ↑↑ 「\n」と「\nと<!-- Advertiserとの間の位置」にマッチし、 <!-- Advertiser 自身は含まれません。 【先読み無しの場合】 \n<!-- Advertiser ↑↑↑↑↑↑↑↑ 「\n<!--\s+Advertiser」にマッチし、<!-- Advertiserも含まれてしまう。 この2つの動きを比べてみると詳細がわかると思います。 a , b = str.split(/\n<!--\s+Advertiser/) #先読み無し a , b = str.split(/\n(?=<!--\s+Advertiser)/)#先読み有り。
もうすこし何か覚えていることは何かないですか？英語だったとか、日本語だったとか、個人のサイトだったとか、企業サイトだったとか、ORGだったとか？ ちなみに私がよく使うサイトはここら辺です。 - http://www.moongift.jp/tag/ruby-on-rails/ オープンソース、フリーウェアを紹介するブログ。リンクはタグ機能でRailsアプリに絞ったところ。 - http://ruby-toolbox.com/categories/crm_apps.html gemやrails pluginsを比較、検討できるサイト。リンクはCRMを比較しています。
sample1.xlsをダウンロードされましたでしょうか？ おそらく11行目でエラーがでていますので、sample1.xlsファイルが見つからない為に エラーが発生しているものと思われます。 同じ環境で試していますが、問題なく動作します。 また、タブ区切りのcsvを生成する方法の1つは、 標準ライブラリのcsvを利用して下記のように書けます。 CSV.open("test.csv", "w",{:col_sep=>"\t"}) do |writer| writer << ["foo", "bar", "huga"] end これを利用して、excel1.rbを下記のように変更。 require 'win32ole' require 'CSV' def getAbsolutePath filename fso = WIN32OLE.new('Scripting.FileSystemObject') return fso.GetAbsolutePathName(filename) end filename = getAbsolutePath("sample1.xls") xl = WIN32OLE.new('Excel.Application') book = xl.Workbooks.Open(filename) csv = CSV.open("test.csv", "w",{:col_sep=>"\t"})　　#追加 begin book.Worksheets.each do |sheet| sheet.UsedRange.Rows.each do |row| record = [] row.Columns.each do |cell| record << cell.Value end csv <<record　　　#追加 end end ensure book.Close xl.Quit csv.close　　#追加 end
attr_accessor :NEW_USER_PWを定義したからといって、 NEW_USER_PW?メソッドが定義されるわけではりません。 attr_accessorはゲッターとセッターメソッドを作るだけです。 それ以外の論理値を返すようなメソッドは自作しなければなりません。 NEW_USER_PW?メソッドを作成されていないのなら、「undefined method」が 出てしまうのは当然です。 質問にあるように、「入力があった場合のみ」とありますので、 NEW_USER_PW?メソッドを下記のように実装すればチェック可能です。 def NEW_USER_PW? @NEW_USER_PW.size > 0 end また、ifにはprocオブジェクトを渡すこともできますので、 :if => Proc.new{|u| u.NEW_USER_PW.size > 0} と書いてもいいでしょう。 NEW_USER_PWというインスタンス変数はすべて大文字を使用されていますが、 見る人によっては定数と勘違いします。 変数であれば小文字表記を利用するほうが良いかもしれません。
バッククオートを使わずに b = "bbb" c = "ccc" aaa = "diff -q " + b + " " + c res = system(aaa) こんな方法はどうですか？ 参考URL：http://doruby.kbmj.com/yablog/20090531/ruby_1
　そもそも、GeanyのRubyのサポートは不十分です。自動インデントがデタラメでむしろ邪魔です。 　Rubyの文法は、エディタにとって自動インデントがしづらい部分が多く、EmacsのRubyモードにしろ、SciTEにしろ、自動インデントがデタラメです。 　自動インデントが無いほうが正直ラクなので、Ruby用自動インデント機能のないエディタをオススメします。（Pythonと違って、インデントが2文字なので手動でやっても大した手間になりませんし、2文字のスペースを入れるのは僕はなんか楽しいです） 　個人的には、Ubuntuにデフォルトでついているテキスト・エディタ（gedit）がオススメです。（自動インデントがなく、カラーリングは秀逸。起動に時間がかかるのが欠点ですが） 　で、本題に入りますが、デバッグすることは可能です。 　Geanyで「実行」ボタンを押すと、当然ながら端末が出てきますからね。 　pメソッドで各変数の値を印字するようにすればいいだけの話です。 　ただ、本格的なデバッガは備えていないので、そういう意味ではダメです。 　そもそも、Rubyで書いたコードはわりと読みやすいので、本格的なデバッガに頼るまでもなく、エラー出力から得られる情報だけでたいていのバグに対処できます。 　irbで充分なデバッグやテストができます。 　なんか長ったらしくダラダラ書いてしまったので、要約しますと、「Geanyでデバッグすることも可能だけど、面倒なだけ。普通にコマンドラインで実行してエラーメッセージを読んだり、irbでテストしたりするだけで充分」 　って感じです。 　なんかダラダラした返答でスミマセン・・・。
Ruby1.9以降であれば、文字列リテラルでUnicodeエスケープを使うか、pack して force_encoding すればできます。 例えば U+29E3D のホッケはサロゲートペアで表すと D8 67 + DE 3D なので、 s = "\u{d867}\u{de3d}" puts s とすれば出力できます。 あるいは、バイトデータからですと、 a = 0b111011011010000110100111 b = 0b111011011011100010111101 s2 = [a, b].map{|i| [i.to_s(2)].pack("B*").force_encoding("utf-8") }.join puts s2 です。 この場合はto_s(2)で2進数表現にしているのでB*でpackしてます。
b= を書き換えるなら#1の方の回答の通りですが、 if /test\[/ =~ a と書かないということは、b は実際にはどこかから読み込んだデータが入っているわけですよね。 if /#{Regexp.escape(b)}/ =~ a とすれば、bに含まれる正規表現記号を適切にエスケープして文字列そのままの正規表現にしてくれます。 もちろん、正規表現にせずに、単純に文字列が含まれるかと言うことなら、 if a.include?(b) if a[b] とか書きます。
セッション情報は、テンポラリディレクトリに書かれますが、そのあたりの問題はないでしょうか。
自動でcloseしてくれるのでブロックを使ったほうがいいと思います。 open("a.txt") do |r| open("output.txt", "w") do |w| w.write(r.read) end end
＞Classに動的に生成したmethodを追加する方法を調べてみると と書きながら、補足のサンプルを見ると、オブジェクトの特異メソッドを定義しようとしているように見えるのですが。もしそうだとすると、特異クラスを使って、 module L class R module Login 　def login_setup() 　　puts "Login login_setup()" 　　class << self 　　　define_method(:login) do |id,pass| 　　　　puts "login() #{id} , #{pass}" 　　　end 　　end 　end end end end
> とまでは書けたのですが、コールバック（ブロックパラメータの部分）、上記例だと > |a,b| a.to_s+'*'+b.to_s+'='　の部分 > を変数として定義（Scalaの例のf1として定義するところ）する方法を知りません。 Rubyだと f1 = Proc.new{|a, b| ... } または f1 = proc{|a, b| ... } または f1 = lambda{|a, b| ... } という形になります。ブロックを受け取る関数に上で作ったfを渡すには&をつけて puts Kuku.new(3,5).calc(&f1) のようにします。
どうしてもわからなければ、「文字列とシンボルは兄弟」と思ってください。 プログラム中に文字列を書くときは、" " や ' ' などで囲みます。 プログラム中にシンボルを書くときは : を前置します（:" " や :' ' で囲んでも良い)。 "abc" == %+abc+ #⇒ 真（同じ文字列の別の書き方。入門書の「%記法」参照） :abc == :"abc" #⇒ 真（同じシンボルの別の書き方） ★文字列に対してシンボルの長所 代入や等値比較が速い ★文字列に対してシンボルの短所 大小比較が出来ない。正規表現とマッチできない。分解・連結・部分取り出し・書き換えなど加工・編集など一切が出来ない。多分まだまだある。 そういえば、以前もシンボルの説明をしました。 http://okwave.jp/qa/q5800523.html ここに書きましたが、ハッシュのキーでは、文字列よりシンボルが好んで使われます。長所が生きて、短所が関係ないので。 なお、to_s と to_sym で相互変換できます。 "abc" == :abc #⇒ 偽 (文字列とシンボルは等しくない) "abc" == :abc.to_s #⇒ 真 (変換して文字列同士の比較で等しい) "abc".to_sym == :abc #⇒ 真 (変換してシンボル同士の比較で等しい） putsに対しても相当の誤解があるようですが、どこから説明したものか。 「メソッドとは何か」をまず勉強するのかな。「たのしいRuby」等の定評のある入門書を虚心に読む。
numsってクラスは組込みにないと思います。 というより、小文字で始まるクラスは無いんですが。 ただの変数じゃないんですか? each_char()が使えるということは文字列か、文字列と互換のあるクラスだと思われます。
＞ Successfully installed twitter-0.7.0 ならインストールできてるような。 ただ、requireのエラーメッセージがバージョン付きになっているのが気になりますが。 試しに、 ruby "H:\Program Files\ruby\lib\ruby\gems\1.9.1\gems\twitter-0.7.0\examples\user.rb" みたく例題プログラムを動かしてみては。
ruby-mswin32だと、rubyのソースにGetCurrentThreadId()ってのがあるみたいなので、それを使って、rubyの初期化コードにSetThreadIdealProcessor()を直書きしちゃえば良いのでは。 ただ、Ruby自体(1.9まで)は基本シングルスレッドで動作しているのだから、わざわざCPUを絞る必要はないだろうし、マルチスレッドが有害ならむしろRuby側スクリプトを書き換えるほうが良いように思えます。 あるいは、コマンドStartのオプション/affinityを指定してrubyを起動するとか。
"Saving arrays, hashes, and other non-mappable objects in text columns" http://api.rubyonrails.org/classes/ActiveRecord/ … でもActiveRecordなら、配列じゃなくてhas_manyにしたほうが良さそうな。
> ちなみに調べたメソッドはArray#packです 確かに訳が分からないですね（笑） 他のご質問関連でいえば、そもそもArray#packが登場するのはビットマップ作成部分であって、そのテーマの本質部分ではありません。 そういう部分で読者を悩ませるような書籍は、やはり初心者向けではないと思います。
bitmap生成からじゃなくて、文字列出力からやってみては(添付画像参照)。 また、処理がよく分からないときは、pを使って変数の中身を確認しながら処理内容を把握してみては。 初心者という事ですので、一歩一歩着実に進んでいったほうが良いかと。
1.8系のFastrCSV , 1.9系のcsv が前提で話します。 すべての項目にダブルクォーテーションがついてもよければ、 書き込み時に :force_quotes => true オプションをつけると "abc","111","bbb","xxx","321"　こうなります。 具体的な解決策でなくて恐縮ですが、 CSVの１行目にヘッダーをつけます。　 "NAME","AGE,"ADDRESS","ZIP","PHONE" #=>ヘッダ "abc",111,bbb,"ccc","123" 読み込み時に :headers=>true オプションをつけます。 csv = CSV.read( "filename.csv" , :headers=>true ) すると、単なる配列ではなくて CSV::Table オブジェクトで読み込まれます。 csv['NAME'] で1列取り出せたりするので、 あとは、methodをひたすら駆使することで何とかなりそうですが。。。
名前空間ですね。 class Foo 　class Bar 　…… 　end …… end class Hoge 　class Bar 　…… 　end …… end class Bar 　…… end だと、それぞれの、Barクラスは別物で、それぞれFoo::Bar、Hoge::Bar、Barという名前のクラスになります。ただし、クラスFooの中ではFoo::BarはBarと略記できるし、Hogeの中ではHoge::BarをBarと略記出来ます。 例えば、Fooクラスの中でしか利用しないクラスがあった場合に、他のクラスと名前の衝突を気にすることなく名前を付けることが出来るわけです。ただし、Fooクラス外からもFoo::Barのように利用することが出来るので、Fooクラス内に隠蔽できるわけではないですが。 定数などもクラスの中で定義すれば、Foo::CONSTNAME のような定数が出来ます。
単に ruby.exe 1.rb の間違い、ということ？
twitter インストール時、以下のようにすればうまく行きますよ。 gem install twitter -v 0.7.0 また、twitterのバージョンは作者のホームページで確認出来ますよ。
じっくり考えたほうがいいよ？ 考えれば絶対（何をやっているか）判るから。 command = gets.chomp while command != 'bye' puts command command = gets.chomp end puts 'また来て下さいね!' こうしたら、どうなる？
オプションのselectedにid値と一致する値をセットすると反映するので <%= collection_select(:auth, :authCd, Auth.find(:all, :order => "AUTH_CD"), :id, :AUTH_NM, :include_blank => true) %> を <%= collection_select(:auth, :authCd, Auth.find(:all, :order => "AUTH_CD"), :id, :AUTH_NM, {:selected => @auth_authCd.to_i, :include_blank => true } ) %> Controllerで@auth_authCdが宣言されないとViewでエラーが起きるので if params[:auth] @auth_authCd = params[:auth]["authCd"] end を @auth_authCd = (params[:auth].present? ? (params[:auth]["authCd"] || '') : '') ソース見た感じだとこんな感じでどうでしょう。
No.2です > その後ruby.batと入力してアドレスがたくさん表示されました。 > ここで詰んでいるところです。 アドレスと仰られているのは、設定されたPathの内容が表示されているものだと思います。たくさん表示されるのは正常です。 その最後に追加したパス、前述の例でいえば F:\ruby-1.8\bin 、が表示されていれば正しく設定できています。 もし正常にパスが設定されていれば、コマンドプロンプトで ruby -v と入力すればRubyのバージョンが表示されます。 私の例では以下のような表示になりました。 F:\>ruby -v ruby 1.8.7 (2010-01-10 patchlevel 249) [i386-mswin32]
下記にちょうどその変更設定が紹介されています。 http://www.rubylife.jp/rails/japan/
SSHが使えるなら、 コマンドを使った方が速いと思いますよ。 参考URL：http://itpro.nikkeibp.co.jp/article/COLUMN/20060 …
例のエンコーディングのIANAへの登録名は"Shift_JIS"です。RubyとしてはEncoding::Shift_JIS.namesのどれでも良いので、"SJIS"も受け付けます。"Shift-JIS"というエンコーディング名はないので受け付けません。なお、大文字と小文字はこの場合は区別しません。 ちなみに、Windowsで一般にShift_JISと呼ばれているエンコーディングはShift_JISではなくCP932です。ですから、"Windows-31J", "CP932", "csWindows31J"のいずれかを書くと良いのではないでしょうか。
Ruby自体のバグのようですから、ソースの修正によって発生したりしなかったりするということもあるでしょう。差し支えない範囲で、再現するに足るソースとXMLデータをいただければRubyを修正できる可能性もあります。あるいは、新しいバージョンのRubyでは修正されていることを確認できるかも知れません。 (1) xml_strを取得する部分も含めて、完全なソースをいただけますか? xml_str = xml_str.gsub(/>\s+/, ">") xml_str = xml_str.gsub(/\s+</, "<") (2) 差し支えない範囲で、再現に足るXMLデータをいただけますか (3) 念のため、Rubyのバージョン(ruby -vの結果)を再度いただけますか。
これかもね http://ruby.morphball.net/rumix/
#{式} の展開は、" " の中だけです。' ' の中では効きません。 node = REXML::XPath.first(@masterdata, "//NameRoot/Text/No[text()='#{id}')]")
下記の参考ＵＲＬを参考にされてはいかがでしょうか。 （わたしは動作確認していませんであしからずご了承下さい） 参考URL：http://d.hatena.ne.jp/hetima/20080623/1214205990
すいません。マニュアルの読みが足らず＆試さずに回答していました。 システムコールreadの引数になるので、サイズはlong intの範囲でなおかつそのサイズのメモリエリアが確保できないと駄目ですね。 ＞それとできればデータを途切れさせずに一度に受け取りたいんです。 えーと、readpartialは名前の通り、途切れながら受け取るメソッドですけど。 もしかして、read_nonblockと間違えてますか？いずれにせよ、システムコールのreadを生に呼び出すので、サイズ指定は必須です。 ノンブロッキングでリードするという代わりに、selectを使ったらどうでしょう？ サンプル： f = 何らかのIOオブジェクト if IO.select([f],[],[],0) data = f.read # データがあった else puts "データがまだ来ない" end
http://jp.rubyist.net/magazine/?0004-Win32OLE
いや、本買ったのなら。まずは一通り読みましょうよ。 大抵の入門書は「変数と定数」とかって章があって、「組み込み変数」とか「特殊変数」とかいう項目で紹介されてます。あるいは、巻末に「付録」として「組み込み変数一覧」が付いてたり。 それでもわからなければ、リファレンスマニュアルを読みましょう。 この先もわからないことがでてくるでしょうけど、(私の経験から言えば)本やリファレンスマニュアルの該当項目を読めば解決する問題がほとんどです。 ここで聞くより速く解決します。 参考URL：http://www.ruby-lang.org/ja/man/html/_C1C8A4DFB9 …
コードにおかしい点はありません。 本当に16進文字列になっていますか？pとかinspectで16進表示されているだけと言うことはないですか？ 16進文字列になっているというのはどうやって判断しましたか？具体的に書いてください。 念のため、「具体的に」というのは他人がその文章を読んで全く同じ手順を実行できるという意味です。
#1,#2,#4です。すいません。さっきの半分無しにしてください。 開発版の1.9.0を使うべきでないと言うところは良いのですが、原因は、Rubyの不具合じゃなくて、1.8系と1.9系の仕様の違いですね。 1.9系では、slice!を初めとする「文字列の一部を数字で位置指定する」機能が変更になってます。 1.8系がバイト単位で、1.9系が文字単位です。指定しないとデフォルトがUS-ASIIだから同じだろうと思っていましたが、何も指定しないでファイルから読むと、OSの標準(Linuxだと環境変数LANG)の文字コードになります。なお、US-ASCIIだと\x80～\xFFのバイトがエラーに。 1.9系のRubyを使うのなら、プログラム先頭で、 Encoding.default_external = "BINARY" if RUBY_VERSION > "1.9" としてください。
NetBeansやElipseなどの統合開発環境(IDE)を利用するのはどうでしょうか？ エラー発生場所の特定も容易になりますし、 個人的にはIDEの利用でperlより開発しやすくなったと感じています。 あと、次のようなコードを追加すると例外発生時に確認しやすいです。 begin 　#　例外が発生しそうなコード rescue => ex 　# 例外が起こった場合の処理 　puts ex.class # 例外の種類 　puts ex.message # 例外メッセージ 　puts ex.backtrace # 例外発生の位置情報 end 参考URL：http://netbeans.org/downloads/?pagelang=ja
おそらく関数aはRationalで計算しているのだと思いますが、 「1.0」と記述すると、その数値は「Float」(浮動小数点型)で表現されます。 また、「RationalとFloatとの計算結果」はFloatになります。 以前の質問で別の方が答えられていた通り、Float 型は、精度に限度があり、その結果として「out of Float range」エラーになるのです。 数式中の小数値は、浮動小数点数(1.0/300)ではなく、Rational型になるようにすれば、「out of Float range」エラーは出なくなります。 a(7000,3500)*(Rational(1,300)**3500)*(Rational(299,300)**3500) で計算してください。 あと、Rationalは分数型ですので、そのまま結果表示すると分数で表示されてしまいます。 ですが、これを単純に小数(Float)に変換しようとすると、その段階で「out of Float range」になってしまいます。 一手間かかりますが、require "bigdecimal"した上で、 result = a(7000,3500)*(Rational(1,300)**3500)*(Rational(299,300)**3500) puts BigDecimal(result.numerator.to_s,1000)/BigDecimal(result.denominator.to_s,1000) とでもすれば、小数で表示できます。 ちなみに、そうやって上記結果を表示すると、 0.15(略)E-6569 と表示されますが、これは「0.(0が6569個)15(以下略)」という意味です。
Rubyの入門書は何か読んでますか？ BigDecimalライブラリを使うという話なので、 require "bigdecimal" を書かないといけません。
http://oshiete1.goo.ne.jp/qa5646276.html >rubyの整数 です。Floatは無限ではないです。 コンビネーションの計算ということだったので、整数演算のみが必要なので、紹介いたしました。 なにやら、確率計算をしているようですが nCm * (p^m) * ((p-1)^(n-m)) みたいな計算を、この式通りに計算しようとしてませんか? コンピュータで計算するときは、公式のまま計算するのではなく、式を変形して、コンピュータが計算しやすいようにすることも大切です。 参考URL：http://www.ruby-lang.org/ja/man/html/Rational.html
疑問に思っている部分を削除して実行はされてみましたか？ そこでエラーメッセージが出れば、それを検索することで ブロックが何をしているか判るのでは。 irbでは実行もされないというのであれば、 プログラムに書き換えて実行してみればいいだけのお話ですし。 まあ、リンク先に書かれている通り、ブロックの中を 呼び出し先に設定しているというだけかと思いますけど。 （それぞれのメソッドに検索処理は記述されていませんよね） あと余計なお世話かもしれませんが、質問文が非常に判りづらいです。 疑問点 ・A 判っている点 ・B ・C という風に、箇条書きされてはいかがですか？
例え1000桁にしても、浮動小数点実数型では1.0/3は3分の1にはなりません。計算によっては誤差がどんどん溜まっていきます。 そういう精度が気になる用途なら、Rational を使いましょう。 Rationalは分数型なので、3で割って3倍したら元の数に戻ります。 --- require "rational" def test(value, count) step = value / count sum = value * 0 count.times do sum += step end print step," * ",count," - ",value," = ",(sum - value),"\n" end test(Rational(1), 300) test(1.0, 300) ---
関数ab は、計算結果を表示はしていますけど、 その結果を関数の戻り値として返してないですね。 (元のコードでは、puts の結果(=nil)を、関数の戻り値にしてしまっています) > puts b / ( d * f ) これを、 > b / ( d * f ) にしてください。
おそらく a(10,i) が、なんらかの引数の時に nil を返しているのでしょう。 で、そのタイミングで 「nil + 整数」という演算はできないので、質問のようなエラーになる、と。 あとは、関数 a のコードを見ないとなんとも言えません。
Rubyのwhile式は当然ネスト可能です。 while condition while another_condition something end end と書けば、別に最初に出現したendで外側のwhileまで終わったりはしません。
>この書き方だと非効率なのでしょうか。 いや気にしたことがないな。単にSchemeっぽく書いた方がRubyには似合いそうだ、と思ったからこう書いただけで、そっちの書き方でも全く問題ない
できます。 が、何の計算するのか分かりませんが別の方法を考えた方が良いのではないでしょうか。 require 'bigdecimal' puts( (BigDecimal('1') / BigDecimal('300')) ** 7000 結果 0.1416501250750661252256415(略)35213460001E-17339
ruby -e "def c(n,k) k % n == 0 ? 1 : c(n-1,k-1)+c(n-1,k); end;p c(10,2)" ruby 1.9で確認。
＞１コンビネーションの計算のプログラムの方法（nＣr＝n！/[r!(n-r!)]） ＞２べき乗の計算のプログラムの方法（　(1/200)^6000 ) このあたりがわからないと言うことは、プログラミング初心者と言うより、プログラミングがほとんど未経験だということですよね。 「Ruby 1 はじめてのプログラミング」http://www.amazon.co.jp/dp/4798117994 あたりがいいかと。書評も良い感じです。 Rubyの本は、何らかのプログラミング言語をマスターしている人向けの物が多いです。これからプログラミングを始める人向けの数少ない本。
Rubyの整数の桁数は無限桁なので、特に意識せずに、整数だけで演算すればいいです。
linksメソッドで直るというのがわかりませんが、もし、 ・文字コードがUTF-8でなく、EUC-JP,Shift_JIS,ISO-2022-JPである ・にもかかわらずJIS規格にない丸付き数字とかローマ数字などを使っている ということであれば、文字コードの問題で、回避策があります。
回答が表示されないので、再投稿。 xcopy ./org_data/*.* L:/ /s /e /v は、cmdで実行してもエラーですね。 \はシステム呼び出しでは2回エスケープが必要なんですかね？ 手持ちの環境では `xcopy .\\\\org_data d:\\\\ /s /e /v` system('xcopy c:\\\\org_data d:\\\\ /s /e /v') 等でうまくいきました。 上で、既にファイルがあるときの表示に問題がありますね。 ruby 1.8.7 (2008-08-11 patchlevel 72) [i386-cygwin] ruby 1.8.7 (2008-08-11 patchlevel 72) [i386-mswin32]
downto を使う人が多いと思います。 参考URL：http://www.namaraii.com/rubytips/?%C0%A9%B8%E6%B …
＞ただ、set HTTP_PROXY=​http://proxy.hege:8080/としても、 httpの前にへんな文字があるようですけど、これは投稿の時に紛れ込んだんですかね。 もし認証付きのproxyなら、 set HTTP_PROXY=http://username:password@proxy.hege:8080/ です。
＞どこでこのコマンドを書き実行するのでしょうか。。 telnetかsshでサーバーにログインして実行します。お使いのレンタルサービスは、ログイン機能がありますか？ このソフトは、自分がサーバー管理者であることを前提にしているので、共用サーバー上で一般ユーザで動かすには自分で調べて、いろいろ修正が必要だと思います。また、管理者で無ければメールの機能も使えないし。 企業内で使いたいのなら、PCを一台用意して、Linuxをインストールして、そこにインストールするのが簡単です。
rubyにかぎらず自分でコーディングできるのならば 後は、慣れの問題でしょうから perlで書いたものとかをrubyに移植してみるなんてのがいいんじゃないですかね。 あとは最近はさみしく閑古鳥がないてますが「どう書く？.org」という サイトで投稿されたソースを解析してみるとかどうでしょう？ 参考URL：http://ja.doukaku.org/,http://ja.doukaku.org/lan …
No3です。 ＞Rubyのみ初心者です． よかった。 ＞>確認２：readlinesというメソッドはどういう機能を持ったメソッドだと思っていますか？ ＞ファイルの内容が一行ずつ入った配列だと思ってます ファイルを行の配列のようにアクセスできるメソッドと思っているのなら間違いです。 ファイルから全データを読み込んで、それを配列の形で返すメソッドです。したがって、呼び出したことで、該当ファイルのファイルポインタ(ファイル中で次に読み取る文字位置)は末尾のEOFの所に行ってしまいます。二回目の呼び出しで、EOFに達したファイルを再度読むことになるので空が返ります。具体的には配列なので [] が返ります。 他の方がお書きのように、呼び出し結果の配列オブジェクトを保持しておいて、以降はそれをつかうといいです。
高水準なライブラリがありますので容易と言えば容易です。ただし、PHPのように言語処理系に自動的に付属するライブラリにはMySQLサポートがありません。ですから別途MySQL用のライブラリを導入する必要があります。この意味ではPHPほど容易ではないという考え方もできます。 参照URLにMySQL/Rubyライブラリの配布元を書きました。リファレンスもそちらにあります。 http://www.ruby-lang.org/ja/libraries/ に書いてあるような手順でRubyGemsというライブラリを管理するためのライブラリを導入し、その後にmysqlという名前のgemを導入すればMySQL/Rubyが利用できます。こうして一度導入すれば、あとはMySQL/Rubyが提供する機能でプログラムからMySQLとやりとりできます。 参考URL：http://tmtm.org/mysql/ruby/
可能かと言えば可能ですが、プロセスを起動する無駄が生じるので普通はやりません。処理件数が少なく、かつ、レスポンスタイムがシビアでないシステムで、完成したプログラムを使い回す場合くらいでしょうか。 質問の様子では、これから両方作るようなので、普通はしませんね。 どうしてもPHPからrubyを起動するなら、system(),proc_open()などの外部プログラムを起動する関数を使うことになります。データ受け渡しは、ファイル経由 または DB経由 または パイプ経由。
#どこまで移植すれば妥当なのか…完全移植はおそらく言語仕様上無理。 ##JavaにC#の拡張メソッドのようなものはないと思う。 ##また、Javaはメソッド名に文字'?'を含められないと思う。
self を書きたくないということなら、 alias :xclass :class しておいて、 xclass.name するくらいしかないと思います。スマートとは思いませんけど。 逆に、インスタンスメソッド定義の中で、class以外のメソッド呼び出しの時もselfを省略しないで書くことにすれば、全部統一が取れます。
多くの言語では、メソッド呼び出しや関数呼び出しの時に、メソッド名・関数名の後に引数を囲むカッコが必要です。 例： print(1+2) Rubyでは多くの場合、カッコを省略できます。 例： print 1+2 さて、カッコにはこの他に、演算の順序を変えるためのカッコがあります。例：(1+2)/3 メソッド名の後にカッコがある場合、演算の順序を変えるためのカッコなのか、メソッド引数をくくるカッコなのか？？？ Rubyは、引数をくくるカッコとみなして解釈しようとします。そうじゃなくて演算の順序を変えるカッコのときは、引数をくくるカッコは省略できません。 例：誤： print(1+2)/3 #=> エラー → こう見なされている： (print(1+2)) / 3 #=> printの返す結果を3で割ろうとして、割れないのでエラー ＊＊＊１ 例：正： print((1+2)/3) ＞文法的に、何に違反してるのか、わかりません。 文法と言うより実行時のエラーです。writeは出力した文字数を返すので str が "hoge" の場合、STDOUT.write(str||'defaultString') は 4 を返します。次に、4 + "\n" を実行しようとして、「文字列と整数は足せない」というエラーになっている。エラーメッセージの corce というのはここでは「(計算できるように値を)変換する」という意味です。 さて、上の ＊＊＊１ では、わざとエラーになる例にしましたが、 例：STDOUT.write(1+2)/3 はエラーになりません。どうなるかわかりますか？ なお、改行付きで出力したい場合は、puts を使うと便利です。 def hoge(str) puts str||'defaultString' end
こんにちは、 おそらく、PATHの設定の問題ではないでしょうか？ NumRu-0.42.exe ダウンロードして、実行してみました。 手持ちのWindows7環境では、 require "gsl" は問題なく通ります。 NumRu-0.42.exeでRuby本体もインストールされますが、呼び出しているruby.exeが電脳 Rubyプロジェクトのものか確認されましたか？ (whitchコマンドはwindowsにはないので)コマンドラインで、 ruby -e "p $LOAD_PATH" でどの環境が動作しているか分かるはず。 NumRu-0.42.exeのインストールの最後に環境変数を設定するをチェックすると、インストールしたユーザのPATH等が自動で設定されますが、依然つかっていたRubyのPATHより後ろにPATHが設定されると思います。。 すでにRubyの実行環境をインストール済みであれば、 システム→（システムの詳細設定）→詳細設定→環境変数 ユーザとシステムにPATHがあるので、依然使っていたrubyのPATHを削除もしくは、電脳 Rubyプロジェクトのものより後に設定してみてください。
$ chmod +x test.sh $ ./test.sh じゃないでしょうか？？
　受信した内容を、そのままオウム返しに送信するだけなら、下記のような具合で良いと思います。「受信をスレッドを通してprint文で受け取りたい」というのであれば、ComThread.newに:receive=>trueオプションを付けるだけではないでしょうか。 require 'comThread' q=Queue.new aComThread=ComThread.new({:icomno=>3,:rq=>q,:sq=>q}) aComThread.start() sleep 60 aComThread.stop 参考URL：http://www.hirax.net/diaryweb/2009/11/11.html#8505
私の手元にある一部の PC でも同じ症状が出ます。時間がないので原因は探っていませんが、次の方法を試してみて下さい (1.2.5 の代わりに 1.2.3 を入れているだけです)。 gem install sqlite3-ruby --VERSION=1.2.3 gem uninstall sqlite3-ruby --VERSION=1.2.5
require "open-uri" open("ftp://yamada:abcde@172.11.155.123/dir/data.LZH"){|io| open("data.LZH" , "w"){|f| f.write(io.read) } } これはRubyの仕様というより、URLの書式の話です。ブラウザでも使えますよ。
＞呼び出し側と密な関係を持つ必要はありません。 なら、DLLにする必要ないのでは。 クラスProcessBuilderとかで、外部プログラムとして実行すればよいような。 http://java.sun.com/javase/ja/6/docs/ja/api/java … あるいは、JRubyを組み込んでみるとか。 http://jruby.org/
> ちなみに、javaや.NETではstatic宣言すれば、同クラス内からだと、メソッド名にプレフィクスを付けなくても使用できるので、それに対してrubyはちょっと不便に感じたことが質問の動機です。 そうですね。Javaや.NETでは確かにこのような小さなユーティリティ関数の類をよくクラスメソッドにしますし、文法上そのように扱えるので便利です。ただ、改めて考えてみると、こうした関数はRubyでは普通はprivateなインスタンスメソッドにしてしまう気がします。 なぜならば、 > もしvalid_password?メソッドがインスタンスメソッドだと、@saltや@passwordに何らかの変更を加えた場合、 valid_password?メソッドが万が一これらを参照している可能性があるので クラスメソッドであっても、クラス変数やクラスのインスタンス変数を参照しているかも知れません。その場合はもっと酷い副作用/非純粋性がありえます。結局@saltや@passwordなどの他の状態に依存していないかどうかは他の部分、例えば規約やドキュメントや、設計上の常識、あるいはソースを見る、などによって担保しなければならないのであって、文法上は保証できません。Javaや.NETでもその気になれば期待に反するコードはいくらでも書けることでしょう。特にRubyの場合はそのDynamismからクラスメソッドにしたところであまり保証度が上がった気がしません。 この手のユーティリティでstaticメンバ関数/staticメソッドを用いるのは、保守性というよりはどちらかというと、多態性を必要としない場合のC++におけるパフォーマンスチューニングの流儀が継承されてきた設計ではないかと思います。 > 実態が1つしか作られないので実行速度が上がる等な理由もありますが、 Javaや.NETでは静的なinvokeは速度が向上する場合もあろうかと思いますが、Rubyではクラスメソッドもクラスに対するシングルトンメソッドなのであって、実行時に動的に解決されますし多態に振る舞いもします。 どちらかというと、特異クラスに対するメソッド呼び出しがメソッドキャッシュに載っていない分パフォーマンスが低下するケースもあるかと思います。ケースバイケースで、プラスになる場合もありマイナスになる場合もあり、少なくとも一般的にパフォーマンスが向上するとは期待できません。 ついでに言うと、 class MyClass (snip) 　private 　def self.valid_password?(passwd) 　　(/\A\w{4,12}\Z/ =~ passwd) != nil ? true : false 　end end 今、valid_password?はMyClassのpublicなクラスメソッドです。なぜならば、privateはそれ以下の、そのクラスのメソッドをprivateにするものだからです。クラスメソッドはそのクラスの特異クラスのインスタンスメソッドであって、そのクラスのメソッドではないです。従って、privateはdef self.valid_password?には影響を与えていません。 無理に多言語のパフォーマンス特性やオブジェクトモデルを流用した設計にせずともよいのではないでしょうか。この場合素直にMyClassのprivate instance methodにしてはどうでしょう。私ならそうしますし、保守の点はunit testとrdocでカバーします。 それにしても、確かにC++ならvalid_password?はstaticにしていたところです。面白い例をありがとうございました。
#3です。 splitの正規表現は、 words = line.split(/[\s\.]+/) にしてください。
「うまくいかなかった」以上の何の情報もないので、「バグがあるのでしょう」としか言えません。数行の最小限のプログラムにして、まず正常動作させ、少しずつコードを追加していくのがいいと思います。 後半は、RDEのインストールをせずにRDEを使おうとしているというエラーです。
排他ロック(LOCK_EX)と共有ロック(LOCK_SH)については理解されたようですね。 読み取りに関係なく書きたいのであれば、読み取り側でロックせずに読めばいいです。質問では「排他ロックがかかっているかどうか知りたい」ということのようですが、何のために知りたいのですか？
ただのアドバイスです。。 テストでのLANからのアクセスは、アクセスしたマシンがDNSに登録されておらずそもそも名前解決ができないためタイムアウトまで待ちましたが、WAN上であればたいていの場合名前解決できるので、レスポンスが悪くなることはないのではないでしょうか。 以上、ただのアドバイスでした。
ファイアーウォールソフトが通信を防いでいるとか。
＞つまりは組み込みのFile.stat）を改造するのって、どうしたら良いのですか？　 あまり綺麗には行きませんね。とりあえず下記で出来ます。 class File::Stat 　attr_accessor :name end class << File 　alias orig_stat stat 　def stat(f) 　　w=orig_stat(f) 　　w.name=f 　　w 　end end
日本語が曖昧ですが、 (1) シェルのコマンドラインからライブラリを作る方法は知っている。それをRubyから行うにはどうしたらいいか？ (2) C等から、Rubyで書いたプログラムを呼びたい。Rubyで書いたプログラムをCにリンクできるライブラリ化できるか？ のどちらでしょう？ (2)だと、出来ません。
文字コードがおかしいのかと思いましたけど、nil になるのが不審。 OSの種類とRubyのバージョンはなんですか？ ruby -v でバージョンがわかります。 1.8.x の場合は、p $KCODE というスクリプトを実行した結果はどうなりますか？ 1.9.x の場合は、p Encoding.default_external というスクリプトを実行した結果はどうなりますか？ docu.txt と word.txt のデータの文字コードはなんですか？ 問題点とは関係ありませんが、こういうほうがいいですね。 open("docu.txt"){|io| 　str = io.read 　puts str 　File.readlines("word.txt").each{|word| 　　puts word 　　word.chomp! 　　p str.index(word) 　} }
何故そうなるかは、["2",["B","C"]] というデータをCSV出力しようとするので、1項目が"2"でこれは文字列でそのままOK。2項目は["B","C"]で文字列でなく配列なので、["B","C"].to_s で文字列化されます。この結果は"BC"になります。 2,B,Cと出力したければ、#1の方の回答の通り、["2",["B","C"]].flatternで、["2","B","C"]に変換して出力するといいかと。 2,"B,C"にしたいとか、もっと全体をすっきりさせたいとすると、属性保存の所で、配列を借用するのじゃなくて自分でクラスを定義して、to_sも定義します。 require 'csv' in_path=・・・・・ out_path=・・・・・ class Attr def initialize; @data = []; end def <<(other); @data |= [other]; end # 集合の和集合(重複を省く) def to_s; @data.join(","); end end h=Hash.new{|h,key| h[key]=Attr.new} CSV.foreach(in_path){|key,n1,n2,attr| h[key.data.to_i] << attr.data } CSV.generate(out_path){ |writer| h.sort.each{ |row| #ソートした方が良いかと writer << row } }
インスタンス変数 @a は、インスタンス(オブジェクト)に付随したもので、祖先・子孫クラスでも共通です。 クラス定義Aの中で現れるインスタンス@aと、子クラス定義Bの中で現れるインスタンス変数@aが別物と誤解されているようですが、違います。同じオブジェクトであれば同じものです。 従って、@a でアクセスします。 ちなみに、super.a とかくと、「親の同名メソッドを呼び出して、その結果のオブジェクトのメソッドaを呼び出す」という文法上正当な表現ではありますが、やりたいこととは全く違います。
＞このa.rbを別のプログラム内で使用したいのですが、 どのように使用したいのですか？ 具体的に書いてください。
WindowsでしたらActiveScriptRubyがおすすめです。 インストールするとスタートメニューやデスクトップにRuby Consoleという赤いアイコンが登場します。これをダブルクリックして開くコンソール画面はすでにパスが設定された状態なので、そのまま実行できますよ。 ActiveScriptRuby http://arton.hp.infoseek.co.jp/indexj.html
はじめまして。 Stringクラスのsubメソッド、或いはgsubメソッドを使えばいいのかなぁと思います。 Rubyリファレンスマニュアル 参考URL：http://www.ruby-lang.org/ja/man/html/String.html …
sinatraは使ったことがないので、よくわからないのですが、 system関数やバッククォートを利用すればできると思います。 http://doruby.kbmj.com/yablog/20090531/ruby_1 ・html側 <html> ・・・・ <a href="/command">コマンドの実行</a> </html> ・rubyプログラム（sinatra）側 get '/command' do 　# バッククオートを使うと、実行結果を取得できます。 kekka = `/usr/bin/test.sh` # system関数だと、単純に実行します。 system("/usr/bin/test.sh") # プログラムの終了コードを確認します。 # 0が返れば、成功。 $?.exitstatus end
現在、Rubyの最新安定バージョンは、1.9.1と1.8.7の2つがあります。 1.9.1は文字コードまわりなど、最新の機能が盛り込まれていますが、動作しない 外部ライブラリーがあります。 一方、1.8.7は1.9.1の最新の機能を一部先取りした上に、後方互換を保っているた め、ほとんどの外部ライブラリーが動作します。 なので最初のうちは、1.8.7がお薦めです。 もちろん、現在参考にされている書籍が1.9.1対応のものであるならば、1.8.7では 動作しない例文があるかもしれませんので、その場合は1.9.1をインストールされれ ばいいと思います。 Windows環境でかつ、1.8.7をインストールされるのであれば、有用な各種ライブラ リーが同梱されているActiveScriptRubyがお薦めです。 No.1さんが紹介されているサイトからたどっていけます。 直リンすると以下です。 COM Meets Ruby http://arton.hp.infoseek.co.jp/indexj.html インストーラーでインストールするのが嫌な場合や、1.9.1を使用する場合は、以下 のサイトが参考になると思います。 Rubyダウンロードとインストール http://www.rubylife.jp/install/install/index.html Windows以外の環境はよく知らないので、Windows以外の環境でしたらごめんなさい。
Railsプロジェクトでなくとも、Railsに組み込まれているactiverecordライブラリさえあればmigrationを利用可能です。ただし、その場合はrailsのconfig/database.ymlに書かれている相当のactiverecord初期化処理を自分で呼び出さねばなりません。 参考URLに挙げたようなやり方で、ActiveRecord::Base.establish_connectionを呼び出してactiverecordを初期化します。例えば次のような具合です。 require 'rubygems' gem 'activerecord' require 'active_record' # 仮にSQLite3を使用。ファイルhoge.sqlite3に書き出し ActiveRecord::Base.establish_connection \ :adapter => 'sqlite3', :database => 'hoge.sqlite3' # migrationを定義 class CreateUsers < ActiveRecord::Migration def self.up create_table(:users) do |t| t.string :name, :limit => 100, :null => false, :unique => true t.timestamps end end def self.down drop_table(:users) end end # 実行 CreateUsers.up 参考URL：http://jp.rubyist.net/magazine/?0006-RubyOnRails
直接投げたら教えてもらえました。(最後らへんのコメント確認) http://wiki.fdiary.net/lacs/?Comment Cygwinを使ってやれ，ということのようです。 http://wiki.fdiary.net/lacs/?WindowsUser
そもそも、Hoge3でsuperを呼ぶのがダメというか呼び出す必要ないのでは。 Hogeと同じinitializeコードをコピー&ペーストするなり、 Hogeのインスタンスをコンポジットして、(必要があれば特異メソッドを定義して)Hogeから情報を引っ張り出してくるとか。 毒を食らわば皿まで。
>私は職場でRubyを無理矢理使っています。 >新しいプロジェクトを無理矢理Rubyで押し切っています。 私は、無理矢理使っていないほうの立場からです。 実際、まだruby自体が認識されていないので、実際にお金をかけて作るプログラムでは、ruby自体は使われていません。 但し、開発時に使うツール類を今まで、perlで作成してきましたが、それをrubyで置き換えています。 最近はperlも標準で日本語がサポートされるようになった（それでも多少不便）のですが、rubyは、元々日本語をサポートしているので、この点がrubyを使用して良かった点といえます。 全般的には、perlをrubyで置き換えると、ソースのステップ数が減ることの他に、プログラムの機能強化が自然と行われました。これは、perlの場合、言語的に多少あいまいなところがありましたが、rubyの場合、日本人が作っただけあって、あいまいなところがないので、バグが発生しにくくなっていることが原因だと思います。今後、新規に作るツール類は原則rubyで作成する予定です。以上、参考までに。
＞出来たところから、チャンクでソケットに書きたいと思いました。 出来たところからと言っても、圧縮ファイルの先頭に「圧縮後の長さ」を書かないと行けないので、ファイル単位でしか「出来」ませんよ。 つまり、細かいファイルたくさんを集めて圧縮するなら、ファイル単位で出力することで改善されますが、大きなファイル１つなら改善不可能。 いずれにせよ、やるとなると、大幅書き直しになるかと。
hoge で対処するのは多分できないと思います。 hoge を使うところを修正してよいのなら ret=hoge([0,1,2]) do |x| 　break true if x==1 　puts x end と break に戻り値を与えれば success にはなると思います。 が、使い勝手はいまいちですねえ。
> pdftotext.exeを使って予めtxt形式に変換 コマンドラインで使用するコマンドをそのままsystemで実行すれば良いと思います。 ----- PDFTOTEXT = ' "c:\Program files\Xpdf\pdftotext.exe" ' OPT = ' -enc Shift-JIS' filename = "foo.pdf" system("#{PDFTOTEXT} #{OPT} #{filename}") ----- ファイルパスやオプションは適宜修正が必要です。
何度もすいません。追記です。 Proc.new＝lambda=proc見たいな感じでつかってしまいまいたが、 細かい挙動は違いますので注意してください。 誤解を与えそうだったので・・・。 ↓以下を参考にして下さい。 Ruby Proc.newとlambdaの違い(追記) - ソースコード備忘録 http://d.hatena.ne.jp/yuki_rinrin/20090831/12517 … 参考URL：http://d.hatena.ne.jp/yuki_rinrin/20090831/12517 …
以下のように、ブロックを一旦、変数に格納すればすっきりすると思います。 block = proc {|x| puts x } if sw hoge &block else piyo &block end __send__（あるいはsend）を使うと1行で書けます。 __send__( sw ? 'hoge' : 'piyo', &proc {|x| puts x } ) メソッドがたくさんある場合は以下のようにすることもできます。 sw = 2 __send__( %w(hoge fuga piyo foo bar baz)[sw], &proc {|x| puts x } )
いかのようにして下さい。 @member = [ "192.168.10.1", "192.168.11.1,2,3,4,5,6", "192.168.12.100,200,230", ] ary = Array.new @member.each do |mem| ip1 = mem.split(".") ip2 = ip1.pop.split(",") ip2.each do |x| ary << ip1.join(".") + "." + x end end ary.each do |x| print x,"\n" end --------------------------- 動作確認済みです。
#2さんのやり方の方が断然スマートそうですね。 ちなみにショートカットを作ってリンク先を#1で紹介した物にすればダブルクリックから非表示で実行できますよ。まあ一瞬画面が出てきてしまいますけどね。 ＞Rubyのソースファイルに命令文を追記することで、自動的に立ち上がるコマンドプロンプトを非表示にすることは可能なのでしょうか？ さあ、分かりませんけどそれはたぶん無理じゃないかなと思います。 なので、#2さんのやり方になるんでしょうね。
単に時間を計ればいいだけだと思いますが？？ 現在時刻を取得する方法がわからないと言うことですか？？
mapを使うのはどうでしょうか。 a = @member.map do |mem| mem.split(/,/) end とすれば変数aにsplitで得られた配列の配列が設定されます。 参考URL：http://www.ruby-lang.org/ja/man/html/Enumerable. …
前者については "((?:[^\\"]|\\.)*)" にマッチさせればいいと思う. 後者は「全体を 1つの文字列にする」のが最も単純ではないでしょうか.
関数自体の機能を誤解している。 やりたいのは 「元の文字列のうち,第一引数で与えられた正規表現にマッチした部分を第二引数で置き換えた」subメソッドではなく http://www.ruby-doc.org/core/classes/String.html … 「元の文字列のうち,第一引数で与えられた正規表現にマッチした部分だけを取得する」matchメソッドではないだろうか？ http://www.ruby-doc.org/core/classes/String.html …
↓これでしょうか。つまり、Rails 2.3.2からはdispatch.cgiが生成されないようです dispatch.cgi not found errorについて - akezoraのはてな日記 http://d.hatena.ne.jp/akezora/20090629/1246292165 そもそも、CGIやFastCGI駆動は今は推奨されていないみたいです。 (というか、RailsでFastCGIを使うというのはどこで入手された情報でしょう？) Linuxなら素直にPassengerを使いましょう。もしくはmongrel(+mod_proxy(_balancer))で。 PassengerはcoLinuxでも動くかな？試してみないといけませんが。 参考URL：http://d.hatena.ne.jp/akezora/20090629/1246292165
まず外側のtableをユニークに指定しないといけないですよね。 xpathを使うとして、絶対パスでrootから何階層目かを数えて、 search("/*/*/*/table/tr") とか。階層だけで決まらなければ、具体的なタグ名を書く。 search("/html/body/div[3]/div/table/tr") とか。 cssだと、 search("body > * > * > table > tr") とか。
詳細な理屈はわかりませんが、インターネットゾーンマークが付いていると駄目なようです。 クリックすると、警告が出ますよね。あれです。 ファイルのプロパティから、ブロックを解除してください。 インターネットゾーンマークについては、こちらを。 http://www.atmarkit.co.jp/fwin2k/win2ktips/498zo …
Railsのバージョンが不明ですが、 DBにUTCで時間が記録されているかと思います。 その場合、デフォルトのタイムゾーンを日本向けに設定すればよいかと思います。 具体的には、 Time.zone = 'Asia/Tokyo' を application_controller.rbに挿入してやる等の方法があります。 以下は、script/consoleでの実験です。 >> Hoge.first.created_at => Fri, 21 Aug 2009 23:22:53 UTC +00:00 # UTCになってる＞＜;; >> Hoge.first.created_at.localtime => Sat Aug 22 08:22:53 +0900 2009 # 一応、変換はできる >> Time.zone = 'Asia/Tokyo' # タイムゾーンを設定してみた => "Asia/Tokyo" >> Hoge.first.created_at => Sat, 22 Aug 2009 08:22:53 JST +09:00 # 日本時間で取れてる！ >> Hoge.first.created_at.localtime => Sat Aug 22 08:22:53 +0900 2009 # こちらも問題なし
フルパスでnoeditorを指定すれば動くはずです。
REXML::elements#[xpath] は、マッチする先頭のエレメントだけを返します。REXML::elements#each(xpath) か、REXML::element#each_element(xpath) を使えばいいでしょう。 xml.elements.each("hoge/item") do |line| puts line.elements["name"].text line.elements.each("data"){|datum| puts datum.text} end
'sex' が何型なのか分かりませんが、もし整数型なのだとしたら、1, 2 が文字列型であることが原因でしょう。 <%= select 'member', 'sex', [["男", 1] , ["女", 2]] %> であればうまくいくと思いますが、いかがでしょうか。 なお、質問する際には、 rails --version gem --env といったあたりの出力を添えておくと、回答が得やすくなると思われます。 参考URL：http://wiki.fdiary.net/rails/?ActionViewHelper
printf( "%5.5f / %5.5f = %5.5f\n",a,b, a.to_f / b)
WEBサーバの実行ユーザ（apache?）に $HOME/rails/redmine/public とか $HOME/www/test/redmine の アクセス権限を与えていますか？
@model.send("column=",xxxx) は @model.column=xxxx と同じです。 細かい点では異なります。 http://www.ruby-lang.org/ja/man/html/Object.html …
こんな感じでどうでしょうか。 def foo(array, idx = 0, pre_str = "") unless first = array[idx] puts pre_str return end first.each do |i| str = pre_str + i foo(array, idx+1, str) end end a = ["1","2","3","4"] b = ["a","b","c"] c = ["x","y","z"] ary = [] ary.push(a) ary.push(b) ary.push(c) foo(ary)
まだ私も、初心者ですが、修正後のように直してみてはどうでしょう？ 似たような処理の記載が「ＲａｉｌｓによるアジャイルＷｅｂアプリケーション開発／オーム社」書籍にあるので、それを真似しての変更です。 ＜修正前＞ <% for @category in @categories %> <label><%= f.radio_button "category_id","@cateroy.id" %><%= @category.name %></label> <% end %> ＜修正後＞ <% for category in @categories %> <label><%= f.radio_button :category_id,cateroy.id %><%= category.name %></label> <% end %>
最初の条件の文で、もし、nameに"%"が含まれていないなら @users = User.find(:all, :conditions => ["family_name LIKE ?%", name]) のように"?"のあとに"%"をつけます。 それから、複数の条件を指定するなら以下のようにします。（以下はLIKEを使っていません） @users = User.find(:all, :conditions => ["family_name = ? or family_name = ?", name1, name2]) "family_name = ?"を繰り返し記述するのが嫌なら、以下のような書き方もあります。 @users = User.find(:all, :conditions => ["family_name IN ( ? , ? )", name1, name2]) 動作テストはしていませんが・・・。この検索条件については、データベースのＳＱＬ文法の本を購入されると、参考になります。 「現場で使えるＳＱＬ／翔泳社」などもいいかもしれません。
【状況】のビューの中の以下の行で、とりあえず”（ダブルクォート）が抜けていてエラーになっていると思います。また、チェックボックスの指定のやりかたも、書籍に載っているのと違っているように思えます。 <%= check_box kudamonos",kudamono.id, :checked => nil %> とりあえず、問題を簡単にするために、１つだけのチェックボックスの指定で正常動作するのを確認して、それを複数行記述して、それがＯＫになったら、本来のリピートを使った記述方法に直すのがいいと思います。 ちなみに、チェックボックスが１つだけの場合、手元のサンプルを修正して試したら、以下の記述でＯＫでした。この例は１と０で、オン／オフを表しています。 <%= f.check_box(:chk1, {}, 1, 0) %>
>>根本的な原因は何なのでしょうか？ (rubyは1.8.7、railsは2.2.2です。) 単純にtime_selectを使用したフォームを使って、ＤＢへのUpdateを行った場合、こちらでは、問題が発生していません。Controllerでは何も指定しない場合です。(ruby 1.8.6,rails 2.3.2) なので、もしかすると、Controllerの中で自分で細工する場合、きちんと(6i)までの指定が必要になるのかも？
scaffoldを使って生成したアプリを実行したとき、 Status: 500 Internal Server Error というエラーがlogディレクトリのファイルに書かれていたことがあります。 このときは、このメッセージに続いて Access denied for user 'XXXXXX'@'%' to database 'YYYYYY' というメッセージが書かれていました。 データベースMySQLを使用していて、作成したSchemaに対して、ログインユーザにアクセス権限を与えていないのが原因でした。 エラーメッセージを見直せば、エラーの原因がわかると思いますよ。 >>ジェネレータから作成しなければいけないのでしょうか 一時は、ジェネレータのscaffoldが配布ファイルからはずされたこともあったようです。別に絶対にジェネレータから作らなくてはいけないってことはないですよ。
＞継承して、新しいクラスMyCGIを作る方法ですが、できればCGIクラスそのものを改造したいです。 機能の追加じゃなくて機能を変えることになるので、新規クラスがいいと思いますが。 もとのクラスでやるとすると、cgi.rbの最後の方に書いてあるdef initialize(...) .... end を全部コピーして、その最後の部分に、@paramsの書き換えを追加するのでしょうか。 class CGI 　def initialize(type = "query") 　　ここにオリジナルのコードをコピー 　　@params = @params.each do|key,val| 　　　@params[key]=val.collect{|x|x.tosjis} 　　end 　end end あるいは、paramsメソッドだけ書き換えればいいのであれば、 class CGI 　module QueryExtension 　　def params 　　　w = {} 　　　@params.each{|k,v| w[k]=v.collect{|x| x.tosjis}} 　　　w 　　end 　end end 毎回全部をコード変換するので、あまり良くないかな？フラグを設けて、初回だけ@paramsを書き換えるようなほうがいいでしょうね。 いずれにせよ、CGIクラスの機能を変更したい(orサブクラスを作りたい)のならば、cgi.rbを読まないとだめですよ。
>>selectboxが複数個あり、(1i)、(2i)のように変数がControllerにくるので上手く取得する方法が分かりません。 別々に送られてくる年・月・日データを１つの文字列にまとめて paramtheday = params[:shedule]['theday(1i)']+'-';params[:shedule]['theday(2i)']+'-'+params[:shedule]['theday(3i)'] さらに、Ｄａｔｅ型に変換する事例がありました。 datetheday = Date.parse(paramtheday) （shedule,thedayは実際のアプリにあわせて変えます。） 参考になりますでしょうか？
質問とちょっとずれますが、Web上でRailsの開発ができるサイト Heroku があります。今のところフリー http://www.google.co.jp/search?hl=ja&safe=off&cl …
>>とある本に「scaffoldして作るには手間がかかる。・・・」 とかいてありました。 たしかに、生成されたソースを使いやすいソースに変更する場合、修正量が多くなることがあるようです。でも、とっかかりとしての「足場」として、scaffoldは十分に使えると思いますし、独自な機能を付加するなら、どっちにしても、それは自分で記述することになるのでしょうから、scaffoldを使わない理由にはならない気がします。 ちなみに、Railsがバージョン２になって、scaffoldは以前より使いやすくなったと思います。
>>教えて頂いたものだと都道府県セレクトは作成できてもその子の市一覧セレクトは作成できない気がするのですが… すいません。質問をよく読んでいませんでした。確かに一段階目しか対応しないですね。 で、ちょっと調べてみましたが、JavaScriptを駆使して実現する方法があるようです。 でも、この方法は、RubyonRailsらしさが無い気がするのと、そのJavaScriptコードを見ると吐き気がする気もして調べなおしましたら、Ajaxを使う事例が以下のページにありました。 ------------------------------------------------ selectボックスとAjaxCommentsAdd Star http://d.hatena.ne.jp/itoasuka/20060411/1144741664 ------------------------------------------------ 私はまだ試していませんが、このブログの内容は、都道府県と市郡のselectボックスの話なので、質問内容にずはり答えているように思えましたが、どうでしょう？
>>#rails rn2 -d mysql でrn2というDBができるのらしいですが、mysqlにログインしてDBを確認しても見つかりませんでした。 ＤＢはそれだけではできません。なお、通常は、database.ymlの修正が必要です。 MySQLの場合は、ＤＢ作成だけでなく、ユーザやユーザのアクセス権限などを細かく調整することもあるので、MySQLの管理用ツールで作られるほうがいいかもしれません。 >>#ruby script/generate scaffold hogehoge name:string id:integer という記述を実行し、テーブルを作ろうとしていて、 この記述は、テーブル作成の元になるマイグレーションファイルを生成しますが、直接テーブルは作りません。以下のようなマイグレーションを実行することで作られます。 > rake db:migrate ただ、MySQLのＤＢ管理ツールでテーブルの作成や修正を行うならば、マイグレーションを実行する必要はありません。 （なお、上記の説明はRails 2.3.2においてです。Railsのバージョンが違うと相違があります） Railsのバージョンアップ(1.x -> 2.0 -> 2.3)と、それに伴う標準ＤＢの変更があったこと、さらに、ＤＢの最新バージョンを使用すると障害が発生する場合があること。さらに市販の書籍がいろんなバージョンをベースに書かれていることもあり、初心者にとっては混乱させられる状況のようです。 そういう私も、MySQL 5.1を使ったら、エラーが発生してしまい、5.0を再インストールすることで正常動作するようになりました。 正常に動作するようになれば、とてもお手軽にＷｅｂアプリのベースが生成できますので、もう少し頑張ってみられればいいと思います。 >>参考になるサイトを教えていただけると幸いです。 サイトもいろいろありますが、書籍のほうが、まとまった情報が手に入ります。 「７日でマスター Ruby on Railsで作るWebアプリケーション入門 2.0対応/メディア・テック出版」が２．０ベースなのでよさそうです。ただ、これもバージョン2.3ベースじゃあありませんけどね。 私の場合「ここのサイトで全てＯＫ」って感じじゃあなく、あっちこっちのサイトで情報を収集しています。
alias で別名を付けて、中で呼び出します。 class CGI alias :out_orig :out def out(hdrs) out_orig(hdrs) { yield.toutf8 } end end かな。 他のやり方としては、一皮かぶせるほうが理解しやすいか。 def my_out(cgi,hdrs) cgi.out(hdrs) { yield.toutf8 } end my_out(cgi,header) { hoge }
＞srcフォルダに古いバージョンのフォルダがあるので ということは、1.8.6のインストールもソースからやったと言うことですね。 そのときと同じ手順でやればいいです。(./configure;make;make test;sudo make install) make installで、実行モジュールやライブラリが上書きされます。 ただ、ソースを差し替える必要はありません。古いのは消してもいいし、消さなくてもいいです。tarを展開するとバージョン付きの名前のディレクトリが出来るので、普通はそのまま使います。 念のためですが、1.8.xと1.9.xは互換性のないバージョンだというのはご存じですよね。
> ダック・タイピングのメリットを教えてください。 メリットはリンク先に書かれている 「オブジェクト（変数の値）に何ができるかはオブジェクトそのものが決定する」ではないでしょうか。 リンク先のRubyスクリプト例で言えば、testの引数に与えられるオブジェクトにsoundというメソッドが在りさえすれば、それに応じた戻り値を返すということです。 > 「オブジェクトがあるインタフェースのすべてのメソッドを持っているならば、（以下略）」 については以下のようなスクリプトでは如何ですか def test(foo) puts foo.sound end class Duck def sound 'quack' end end class Cat def sound 'myaa' end end dog = String.new("pochi") def dog.sound 'bow' end test(Duck.new) # => quack test(Cat.new) # => myaa test(dog) # => bow Stringというクラスは、soundというメソッドを実装していませんけれども、dogというオブジェクトはsoundメソッドを持っているので"bow"という値を返します。
先の回答者さんのリンクにもありますが、手っ取り早くloggerを使うのはどうでしょうか？p pp の変わりに使えます。 logger.info "host = #{request.host}" などのように使います。 ご存知かと思いますが、↓でログを見られます。 tail -f log/production.log ただし、production環境だとバッファリングされて逐一ログが出ないので、 logger.flush を毎回呼んでバッファをフラッシュしてログを吐き出す必要があります。(ハマりポイント)
質問者さんのプログラムを見ると、Ruby on Railsを使用されているように見えますので、RoRであることを前提に回答します。 検証プログラムを自作する前に、RoRには、入力値を検証するヘルパーがあるので、今回の内容だと、validates_confirmation_of ヘルパーを使用するべきです。RoRは初心者にはほんとわかりづらいですが、validates_confirmation_ofヘルパの説明への直リンク載せておきます。 http://guides.rubyonrails.org/activerecord_valid … もしRoRでなかったらごめんなさい。。
>>（ちなみにlv4uさんの抜粋だと、Regular Routesのようですが、その場合だと:method => :deleteの記述は必要ないですね。） ちょっと試してみました。その部分を削除すると、エラーは出ませんが、削除処理が実行されませんので必要なようです。 >>サンプルプログラムが、オンライン上にあるのであれば、そのURLを教えて頂けないでしょうか。 以下のブログにあるＰＤＦです。ちょっと前に話題になった「Four Days on Rails」を、日本の方がRails 2.0に対応されたものです。 http://rails.to/pages/4daysonrails2 これは、元が英文の「Four Days on Rails」を日本語訳にされ、さらにRails 2.0対応になおされたドキュメントです。このドキュメントは、Railsが自動生成した、ありがちな機能のRailsソースをブラッシュアップして、使えるＷｅｂのアプリに仕上げるまでが記述されているので、まとまったソースコードにはなっていません。ＰＤＦのドキュメント内にソースが分散して載っています。 ブログには --------------------------------------------------------- Rails 2.0で導入されたRESTfulな部分を損なわないようにしたつもりですが、RESTクライアントでの検証はまだ行っていません。 --------------------------------------------------------- と書かれていますように、一部にちゃんと２．０対応になっていないコードもあるようです。ただ、サンプルのカテゴリ画面は、追加・変更・削除が問題なく動作しています。
演算子式 - Rubyリファレンスマニュアル http://www.ruby-lang.org/ja/man/html/_B1E9BBBBBB … && はショートサーキット論理演算子の一種なので、 　式A && 式B としたときは、 まず左辺の式Aが評価され、 その結果が真であった場合のみ右辺の式Bも評価されます。 もし、式Aが偽であれば式Bは評価（実行）されません。 そのため、式Aが真の時にのみ式Bを実行したいときに 上記の様な書き方をすることが可能です。 また、rubyにおいてifは式なので式Bはif式でも大丈夫です。 （C言語などとは違ってrubyのifは「値を持つ式」だったりします。） # 合ってるか間違ってるかはあえて明言しませんでしたがこの説明でそれは判断できますよね？ なお、ショートサーキットはPerlで割と良く出てきます。
「管理者権限がない」ということは、Linux系システムだと思うので、Linux系+Rubyはよく知りませんが、自分なら次の点を確認します。 ・rubyライブラリへのアクセス権があるか ・rubyライブラリがロードパスに含まれているか(普通含まれているはずですが・・) 　○puts $LOAD_PATHを実行して、ロードパスを確認 　○-Idirectoryオプションを指定して実行してみる ・Digest::MD5が定義されているファイルが本当に存在するか（ぜんぜん調べてないのであてにならないのですが、digest.soの中で定義？） ・rubyを自分用にインストールしなおして再トライしてみる 　これをやればアクセス権の問題やファイルが足りない問題だった場合解決するはず gem install railsでエラーとなる箇所がrequire時ではなくいきなり「uninitialized constant Digest::MD5」となっている点が気になりますが・・ 推測とかしかできませんね・・。 書きたいほうだいでスミマセン。
def hello 　self.class.say('hello') end でしょうか。何かもっと違う書き方もありそうな気もしますけど。
gem install deprecated がうまくいかないのがおかしいですね。以下の出力を追加情報として書き込むと、どなたか解決してくれるかも知れません。 rails --version gem env
ビューの変更が可能なのであれば、 check_box_tagを使って以下のように変更すれば結果が params[:fruits] = ["1", "4"] として得られます。 【ビュー】 <% @fs.each do |f| %> <%= check_box_tag "fruits[]", f.id %><%= hl(f.name) %> <% end %> ビューの変更ができない場合は以下の式でどうでしょう。 params[:fs].delete_if{|key, value| value != "1"}.keys
#!/usr/bin/ruby -Ku # -*- coding:utf-8 -*- # 今から ruby でスクリプトを書きます、そのファイルで使用するエンコーディングは utf-8 ですよ、という宣言。 directory = '/dog/cat/bird' Dir.new(directory).each { |file| # ここまでで、'/dog/cat/bird' というディレクトリをまず指定し、 # そのディレクトリの中のファイルそれぞれ (each) に対して操作を行うという宣言 if Time.now - File.atime(file) > 60*60*24 # もし最終アクセス時間と現在時刻との差が24時間以上なら if File.ftype(file) == 'file' # もしそのファイルが普通のファイルなら #File.delete(file) # 本番用 puts file # 確認用 elsif File.ftype(file) == 'directory' # もしそのファイルがディレクトリであれば #Dir.rmdir(file) # 本番用 puts file # 確認用 end end } 以上です。ここの投稿はスペースが無視されちゃうので残念ですね。 エンコーディングは UTF-8 で保存してください。(たぶん UTF-8 じゃなくても動く気がするけど) たぶんこんな感じです。ファイルを消しちゃったらごみ箱に行くわけではないのでちゃんと確認してから本番用のほうに変えてください。 http://www.ruby-lang.org/ja/man/html/File.html atime というのはアクセス時間のことです。ファイル作成時間にしたければ ctime に変えてください。 cron の設定は、crontab -e でテキストエディタが起動しますので、 0 * * * * /usr/bin/ruby 保存したファイルのパス と書いて保存すれば1時間おきに実行されます。このあたりは適当にググってください。
何度かやってみましたが、 p ie.document.getelementsbytagname("td").length で、305が表示されますね。 WinXP ProSP3+IE7です。 あと、スクレイピングであれば、rubygemsのmechanizeを使ってみてはどうでしょう？
expect( /[\>\$] / ){|match| command } expect( /(A|B)/ ){ |match| case match[1] when Aに一致? then command2 when Bに一致? then command3 end } ――とか。
こちらも同じような機能を実装したのですが、リダイレクトを使用せず、認証後にリンクをクリックしてもらうという妥協を行いました。 ・認証ページへのリダイレクト前にリクエストメソッドをセッションに登録 session[:return_to] = request.request_uri session[:return_to_method] = request.method ・認証後に「処理を続ける」リンクを表示する（そのメソッドがセッションに登録してあったもの） link_to '処理を続ける', session[:return_to], :method => session[return_to_method] ・リンクを経由すると正しいアクションへ まだパラメータを渡していないのですが、同じようにできると思います。パラメータ渡すのって:params？:url？:option？　まだ調べてませんが・・ Restfulな設計と散りばめた認証は、なんだか相性が悪いですね・・。 あと、Ajaxを使用して、認証画面を別ウィンドウで開くというのも考えましたが、RJSまだ知らないので、試してません。。
http://www.ruby-lang.org/ja/man/html/String.html … リファレンスマニュアルに書いてあったよ。 p l.sub(/^.+$/, "aaaaaaa\\&bbbbbb")
"top_dir" が無い場合、"linux" が無い場合をそれぞれ考慮するとなると、confと書くのは最低二回は要るでしょう。 nil? という判断条件をひっくり返すことで、conf["top_dir"]["linux"]を一回に出来ます。～.nil? が出てきたら見直した方が良いでしょうね。 str = conf["top_dir"] && conf["top_dir"]["linux"] || "/root" conf一回で済ませるパズル的解法としては、nilの添え字参照がエラーにならないようにする。 def nil.[](x) end str = conf["top_dir"]["linux"] || "/root" パズルの回答以外ではやめた方が良いでしょう。デバッグがしにくくなります。 begin str = conf["top_dir"]["linux"] || "/root" rescue str = "/root" end も駄目でしょう。こんな目的で例外を使ってはいけない。
＞documentというメソッドは～～ie.ole_methodsを実行して取得できたメソッドには含まれていませんでした。 含まれてますよ。 C:\temp>irb -rwin32ole irb(main):001:0> ie=WIN32OLE.new("InternetExplorer.Application") => #<WIN32OLE:0x2ba3be4> irb(main):002:0> ie.ole_methods => [QueryInterface, AddRef, Release, GetTypeInfoCount, GetTypeInfo, GetIDsOfNames, Invoke, GoBack, GoForward, GoHome, GoSearch, Navigate, Refresh, Refresh2, Stop, Application, Parent, Container, Document, TopLevelContainer, Type, Left, Left, Top, Top, Width, Width, Height, Height, LocationName, LocationURL, Busy, Quit, ClientToWindow, PutProperty, GetProperty, Name, HWND, FullName, Path, Visible, Visible, StatusBar, StatusBar, StatusText, StatusText, ToolBar, ToolBar, MenuBar, MenuBar, FullScreen, FullScreen, Navigate2, QueryStatusWB, ExecWB, ShowBrowserBar, ReadyState, Offline, Offline, Silent, Silent, RegisterAsBrowser, RegisterAsBrowser, RegisterAsDropTarget, RegisterAsDropTarget, TheaterMode, TheaterMode, AddressBar, AddressBar, Resizable, Resizable, GetTypeInfoCount, GetTypeInfo, GetIDsOfNames, Invoke] Rubyでは、名前の英大文字・小文字は区別されますが、Win32側では区別されないようです。 irb(main):003:0> ie.gohome #上記ではGoHomeだが小文字でOK。newしただけだとdocumentが無いので、HOMEページを表示させる => nil irb(main):004:0> ie.visible=true => true irb(main):005:0> ie.Document # 上記表示のままDocumentで呼んでみる => #<WIN32OLE:0x2f69cb0> irb(main):006:0> ie.document.ole_methods # 小文字で呼んでみる => [たくさん～～～～] OLEのmethodsは、method_missingを使って実現されているので、普通のメソッドとは異なります。混乱すると思うので、クラスとメソッドの関係を十分学ぶまで手を出さない方が良いと思います。methods_missingの仕組みを理解してからの方が良いかも(必須ではないと思いますが)。
「クラスの生成」とは何だろうと思ったら、オブジェクトの生成ですね。 「失敗」というのはそのプログラムの文脈の中でどういう意味なのかを考えて、例外を投げるか、お書きのようにするのかどちらかでしょう。どちらが良いのかは、ケースバイケースだと思います。 ＞なんか、ものすごく我流になってる気がします。。。 unlessのオペランドにカッコをつけるのは我流で筋が悪いと思います。 if / unless / case / while / return 。。。 も同じ。
identifierとは識別子・・・名前ですね。変数名とかメソッド名。 エラーメッセージは「endが来るべき所で識別子があった」です。 コピペしてみましたが、そのエラーは出ないですね。全角空白とか入ってませんか？Rubyは全角文字も識別子に使えるので、それもあるかも。ただ、32行目あたりにendが必要とされる箇所はないので、もっと離れたところに原因がある可能性もあります。 あと、 誤：open("#{grasre}") {|f| 正：open("#{@grasre}") {|f|
手軽にやるなら t1をTimeオブジェクトに変換して、 t2を引いて、 strftimeで文字列にすればいいんじゃないかな。 http://www.ruby-lang.org/ja/man/html/Time.html これくらいならt1を自力で秒に変換してもそんなに手間はかからないかもしれないけど。
なんとか文章の意味を取ろうと試みましたが無理そうです。 ・「概ねの処理は」以前の文章は質問を理解するのに必要でしょうか？ 必要ないという前提で、 ・「前パラメータ」「次のパラメータ」の前、次というのは何？ 　繰り返しのN回目とN+1回目という意味ですか？ そうだとして、 繰り返しの中で更新される変数の、前回の値を使いたいなら、 更新する前に別の変数にセットしておけばいいです。
＞という具合にブラウザ上でURLを入力してみても、Object not found!とい うエラーが表示されてしまいました。 タイムアウトで削除されたのではないでしょうか。 ＞mbs3.cgiのソースから、さらに・・・返してもらうことは出来ないものでしょうか。 ウェブの仕組みをきちんと理解されていないような印象を受けます。こういう処理(ブラウザもどきというか)をするのは初めてですよね。返されたHTMLの解釈は自分で(プログラムで)やらないといけません。その中から望みのリンクを探してさらにそれを送信します。 あと、もしかすると、Cookieが関わっているとすると、生でコーディングするのは厳しいので、Mechanizeなどのライブラリを使うと、勝手にCookie処理をしてくれます。 http://mono.kmc.gr.jp/~yhara/rubyscraping/?Mecha …
> Perlの作者が変数に$をあえてつけた理由が、 変数に$をつけるようにした理由かは分かりませんが、 変数に$がついていることにより、予約語/関数との名称の衝突を防げるという利点があります。
参考 URL によると、「Microsoft Visual C++ 2008 Feature Pack Redistributable Package」をインストールすると対処できるらしいですが…私は試していません。情報提供ということで。 追伸:Rails 2.3.0 はまだですよね? 確か RC2 までだったはず。 参考URL：http://rubyforge.org/tracker/index.php?func=deta …
大枠は、 ・1301から9999までの銘柄について ・存在すればソースを引っ張ってくる ・ソースから正規表現で欲しい情報を抜き出す ってとこ。 何がどう分からないのか分からないのでこれ以上何とも解説のしようがない。 教えてほしいなら何を知りたいのか詳しく明確に述べることだ。 「らしい…」だとか「いまいち…」とかじゃなくてさ。 あと、規約として丸投げの質問禁止だから。
rubyの場所が設定してないとか。 「ツール」メニューの「設定」で、「Ruby基本設定」にある、Ruby.exeのパスのところにC:\ruby\bin\ruby.exeとかいうようにしてruby.exeのパスを指定するんだが、これはやってあるだろうか。要確認。
推測ですみませんが、workspace の権限が不足していたりしないでしょうか。preference の内容は workspace に書き込まれるはずですので、そこに書き込む権限が不足している可能性があるように思います。
RubyGemsのインストーラーの名称をrubysetup.exeなどとしたら間違う人が続出すると予測します。 ワカランチン（日本語通じない人も含む）がruby開発者に苦情メール送ったら迷惑千万ですよね。 そこでMatz氏（ruby開発者）が切れたら裁判沙汰になりかねません。 という意味です。 実際はrubygems-1.3.1などとなっていますので安心です。 rubyのインストーラーの名称はruby-1.9.1となっています。
No.1の方のURLが端的なのですが、もう少し詳しく書いてみます。 Ruby での「数」は「数が格納された箱」ではなく「数」そのものです。 例えば String は「文字列が格納された箱」なので、<< の用な破壊的なメソッドを使い、foo = "0"; foo << "1"; p foo とすれば "01" と表示されます。また、foo = "0"; bar = foo; foo << "1"; p bar としても、bar は foo と同じ文字列が格納された箱を示しているので "01" が表示されます。この辺りは Array や Hash などの「何かを格納する箱のようなもの」でも同じですね。 さて、Ruby では Fixnum などが数字そのもののためこの様な破壊的な動作が出来ません。もし出来てしまうと、foo = 0; foo++ としたときに、そのスクリプト中にある全ての 0 が 1 になってしまいます。これは Symbol・true・false・nil なども同じです。 もう少し簡単に言えば、Ruby では数字や Symbole などはリテラルで表現した物はどこでも同じインスタンスが返る（irb で 0.__id__ や :foo.__id__ を何度実行しても同じ値が返ってきて、"foo".__id__ は実行する度に違う値が返ってくる事などで確認できます）ため、++ の様なメソッドが存在してしまうと、foo = 0; bar = 0; foo++; p [foo, bar] と書いたとき、foo と bar は先の String の例と同様、同じオブジェクトを指しているので、[1, 1] と表示されることになる、ということです。 専門的(?)に言えば、これらは Flayweight パターンを利用した immutable なオブジェクトなので破壊的変更が出来ません。 なお foo += 1 は、Ruby の内部で foo = foo + 1 と展開されて解釈されているので問題ありません。 シンタックスシュガーとして Numeric#++ というメソッドを作りませんか？ という話は、何度か No.1 の方の URL 以外でも出ていたと思うのですが、Matz 氏は Ruby のそのような世界観から考えると、破壊的に見えるメソッドが Numeric などに実装されるのは、それがシンタックスシュガーといえどやはり整合性に欠け好ましくない、ということで退けていたと思います。 個人的には、Ruby は内部イテレータ関係が豊富で for 文を使うことはまずありませんし、1.9系や 1.8.7 などのバージョンではさらに Enumerator が実装され (10..35).each.with_index{|i, idx| ...} などと書けるようになり、foo += 1 と書く機会がほとんど無いので気になりませんね。C++ や C# などの言語で無いと腹が立つでしょうけど（笑） 以上でご理解いただけたでしょうか？
>の意味わかる方、教えてください 意味はありません。
むむむむ？ 上の方にある require "MyLinkedList.rb" で、ライブラリをロードしているのですが、MyLinkedListは 標準ライブラリでない(これを書いた人が書いたもの？)ので、本人以外には わからないのではと思います。 ただ、たぶんMyLinkedListにバグがないかをチェックするプログラムなのだろう、 という大方の予想はつきます。
こんな感じでどうでしょうか。 heap = [15,14,13,12,11,10,9,8,7,6,5,4,3,2,1] def hoge(heap,ptr,depth) return unless heap[ptr] hoge(heap,2*ptr+1,depth+1) depth.times{print"□"} puts heap[ptr] hoge(heap,2*ptr+2,depth+1) end hoge(heap, 0, 0)
#Wikipediaの「二分ヒープ - ヒープ操作」を参考に作ってみた。 #「upheap/downheap操作は次のような配列の点から説明できる。」以下は読んでも良く解らなかった。 #最初は配列だけにしていたが、追加操作や削除操作を持つクラスの方がわかりやすそうだったのでクラスにしました。(ループ変数の変数名がiからじゃなくてjからになっているのはその名残り) #速度や計算量の測定はしていません。 class BinaryTree def initialize @array = [] end def size @array.size end def add(val) if @array.size == 0 @array.push(val) else @array.push(val) j = @array.size - 1 while j > 0 if @array[((j - 1) / 2).floor] > @array[j] @array[j],@array[((j - 1) / 2).floor] = @array[((j - 1) / 2).floor], @array[j] else break end j = ((j - 1) / 2).floor end end val end def remove temp = @array.shift() if @array.size != 0 @array.unshift(@array.pop()) j = 0 while 2 * j + 1 < @array.size if 2 * j + 1 == @array.size - 1 minimum = 2 * j + 1 else if @array[2 * j + 1] > @array[2 * j + 2] minimum = 2 * j + 2 else minimum = 2 * j + 1 end end if @array[minimum] >= @array[j] minimum = j end @array[minimum],@array[j] = @array[j],@array[minimum] if j == minimum break else j = minimum end end end temp end def arr @array end end hoge = BinaryTree.new myarray = [12,11,13,19,15,8,7,10] while myarray.size != 0 p hoge.add(myarray.shift()) end print "---\n" p hoge.arr print "---\n" while hoge.size != 0 p hoge.remove() end
aliasは、「クラス・メソッドの定義」のところに、ensureは「制御構造・例外処理」のbeginのところに出ています。 検索でも探せると思いますけど。
画像処理、特に質問者の言うような「パターン認識」などの処理に関しては、これはRubyというよりも、Ｃ言語などで書かれたライブラリということになると思います。 このようなライブラリでデフォルトなのはOpenCVです。 http://opencv.jp/ RubyからOpenCVを扱えるようにするライブラリもあるみたいです。 http://blueruby.mydns.jp/opencv/
＞rssの文字コードはどのように設定するのですか？ XMLデータの中に書かれています。そう言うことも含めて中身を見てみては？
#2の方が書かれたとおり全角空白が原因でしょうね。 Rubyは全角文字も変数名等に使えるので、人間の手として3を入力した場合、「未定義の変数かメソッドの 全角空白 が現れた」というエラーになります。Rubyの処理系は、未定義の変数は実行時のエラーになるので、3を入れない限りエラーにならないというのが#1の方の実行結果だと思います。 NetBeansのような統合開発環境を使うと、実行前に未定義変数を検出する機能があります。
＞・説明の中の「正規表現/sheet/にマッチした全体の文字列」とは何を指すのか？ /sheet/にマッチする文字列は "sheet" です。 ＞・説明の中の「マッチした部分文字列の配列」が何を意味しているか？ 部分文字列とは、カッコに囲まれた正規表現の一部分にマッチする文字列のことですが、/sheet/ にはカッコがないので部分文字列はありません。 ＞・match(s).lengthの答えが、どうして1になるか分からない。 マッチした文字列が1個で、部分文字列が0個なので全体で１個。 ＞・返ってきたMatchData オブジェクトの中身は何？ マッチした結果の様々な情報。 [11, 16]もその１つです。 アドバイスとしては、学校の受験勉強じゃないので、問題集と参考書で勉強するのは無理です。 「Ruby認定試験対策問題」はRubyでプログラミングを出来る人が、その技術レベルを認定してもらうための試験なので、まずはプログラミングをしてみましょう。
う～ん……「RubyかJava」って限定ですか? Pythonだったら、最近出た次の本で解説されていると思いますよ。 集合知プログラミング: http://www.oreilly.co.jp/books/9784873113647/ これは、昔で言うと「人工知能」関係のプログラミングに近い本なんですが、ベイズ分類器も載っていますね。 他にもカーネル法やSVMなんかも解説されていて、この辺のプログラミング覚えたい人には良いのではないでしょうか。 まあ、「どうしてもRubyやJavaじゃなければならない」んでしたら、お奨めしませんが。
どうしてもしたければセミコロンで文の区切りを指定する。 この例であれば print 文ひとつにまとめるだけですが。
バージョンを補足した方がよいでしょう。 私の環境 C:\test>ruby -ve "Dir.foreach('.') {|f| puts \"#{File.ctime(f)} - #{f}\" }" ruby 1.8.6 (2007-09-24 patchlevel 111) [i386-mswin32] Fri Dec 05 20:59:57 +0900 2008 - . Thu Jan 01 09:00:00 +0900 1970 - .. Fri Dec 05 21:00:06 +0900 2008 - .test
シャドウイングというのは ['foo'].each do |i| ← この i と ___['bar'].each do |i| ← このiが同じ名前だけど別の変数になること ______print i ← これは ['bar']に対する each なので当然 'bar' ___end ___print i ← ['bar'].each のブロックを実行したためにi の内容が変えられてしまっている! end ということで、 内側のprint で bar 外側のprint でも bar が出力されるので、結果は 'barbar' になるというわけです。 なお、この仕様は1.9で変わってますので、 試験を受けるときにはバージョンに気をつけてください :)
どこそこのサイトにこうありました。という場合は、可能ならそのURLも書いておいてください。 irb(main):001:0> self => main irb(main):002:0> class Foo irb(main):003:1> def test irb(main):004:2> (1..3).each{|i| yield(i)} irb(main):005:2> end irb(main):006:1> end => nil irb(main):007:0> foo = Foo.new => #<Foo:0x2b67a18> irb(main):008:0> foo.test{|i| i } => 1..3 irb(main):009:0> foo.test{|i| p self } main main main => 1..3 irb(main):011:0> class Foo irb(main):012:1> def test2 irb(main):013:2> p self irb(main):014:2> end irb(main):015:1> end => nil irb(main):016:0> foo2 = Foo.new => #<Foo:0x2b44644> irb(main):017:0> foo.test2 #<Foo:0x2b67a18> => nil irb(main):018:0> ということで >・testメソッドに渡されたブロックとは、(1..3)のことを指すのでしょうか。 違います。質問にあった例でいうと foo.test{|i| i } の、{|i| i} の部分のことです。 >・メソッドの呼出し先とは、foo.test{|i| i }のことを意味しているのでしょうか。 そうですね。 でもそれは「呼び出し元」のような気がするのですが。 >・呼出し先のselfとは、fooかFooのことでしょうか？ ちがいます。 上述した例にあるように irb(main):001:0> self => main main (== トップレベル)です。 >・「selfはメソッド内で実行されるとそのメソッドを実行しているオブジェクトを参照することが出来ます」 と別のサイトに記載されていたのですが、「トップレベルのselfとはObjectクラスのメソッドを実行している」、という意味になるのでしょうか。 irb(main):020:0> self.class => Object ということでそうなりますか。
こう言うサイトがあります。 プログラミング入門　- Rubyを使って - : http://www1.tf.chiba-u.jp/~shin/tutorial/index.rb
下記URLを参照ください。 Arrayクラスのマニュアルです。 参考URL：http://www.ruby-lang.org/ja/man/html/Array.html
「始めることになりそうで」とお書きになっているということは 実際に使うものを決めるのはご自身ではないのではないですか? であれば、そこで使うことになるバージョンにあわせればいいと思います。 本を見ながら進めたいのなら、それにあわせればよいでしょう。
起動時のオプション指定に :DocumentRootOptions => { :FancyIndexing => false } を追加してみたらどうなりますか? Rubyist Magazine - WEBrickでプロキシサーバを作って遊ぶ http://jp.rubyist.net/magazine/?0002-WEBrickProxy WEBrick::HTTPServer - Rubyリファレンスマニュアル http://www.ruby-lang.org/ja/man/html/WEBrick_HTT … WEBrick::HTTPServlet::FileHandler - Rubyリファレンスマニュアル http://www.ruby-lang.org/ja/man/html/WEBrick_HTT …
>と書かれているのですが、「キーが単語、値がその単語が出現した回数を表します」 >の内容が理解できません。newしただけなのに、どうして、 >キーと値の内容が決まるのでしょうか？ 別に決まってはいません。 その後のコードで count の key と value をそのように解釈して利用しているということです。 >作成したハッシュcountと、getsメソッドで読み込み単語単位に分割した配列wordsとが、 >どこで関連付けされているのかが、分かりません。 配列 words を一単語ずつ each メソッドで処理することで関連づけています。 Hash.new(0) でデフォルト値が 0 であることに注意しましょう。 >「ruby word_count.rb README」と書くだけで、 > 処理の流れが、getsの所まできたとき、 > 自動的に指定ファイル名を判断し、 > 読み込みを始めるということなのでしょうか。 gets とは ARGF.gets と同じです。
まず、1と1.0は違うクラスのインスタンスだということです。 1は、Integer型（を継承したFixnum型） 1.0は、Float型 これを踏まえて4つの例を説明すると以下のようになります。 A: 1 << 1 Integerクラスのインスタンスである1 その演算子（メソッド）<< に引数として Integerクラスのインスタンスである1を渡す 　Integerクラスの演算子<<は、引数で与えられたビット分だけ自分を左シフトする 　だから、1を1ビット左シフトして結果は2になる。 B: 1 << 1.0 Integerクラスのインスタンスである1 その演算子（メソッド）<< に引数として Floatクラスのインスタンスである1.0を渡す 　Integerクラスの演算子<<は、引数で与えられたビット分だけ自分を左シフトする 　演算子<<の引数がFloatで与えられた場合は自動的にIntegerに変換される 　すなわち1.0は、1に変換される。 　だから結果はAと同じく2になる。 C: 1.0 << 1 Floatクラスのインスタンスである1.0 その演算子（メソッド）<< に引数として Integerクラスのインスタンスである1を渡す 　Floatクラスには、演算子<<が定義されていない 　だから、エラーになる。 D: 1.0 << 1.0 Floatクラスのインスタンスである1.0 その演算子（メソッド）<< に引数として Floatクラスのインスタンスである1.0を渡す 　Cと同じ結果になる。
「?」は、直前の正規表現の 0 または 1 回の繰り返しです。 従って 1 　行頭～行末間にABCがない = ABCの0回の繰り返し　にマッチ 2 　ABCABCは、行頭～行末間に2回繰り返しがあるからマッチしない 3 　順番にマッチさせていくと 　$1 = "1" 　$2 = "23" 　$2 = "45" 　$3 = "6" 　$2には最後にマッチした"45"が入ります。 4 　(?: )は、後方参照を伴わないグループ化で$1, $2などの対象にはなりません 　なので (?:\d\d)+ にマッチする"2345"はスキップされて、その次にマッチした"6"が$2に代入されます。 下のURLにマニュアルがありますのでご覧ください。 参考URL：http://www.ruby-lang.org/ja/man/html/_C0B5B5ACC9 …
配列の作成は、split メソッドが行います。splitは、「文字列を分割して、それぞれの切れ端からなる配列を新たに作り出して返す」という動作のメソッドです。 その前に、ary = Array.new と配列を生成しても別にかまわないのですが、せっかく生成しても、何も使われないまま捨てられてしまいます。 Array.new(ary) は何も代入してない変数aryを参照するのでエラーです。
エラー (Error)じゃなくて、警告 (Warning)なんですけどね。 これは、pはメソッドなので、 p "hogehoge" は p("hogehoge") と書くことができます。 このとき、p("hogehoge") と p ("hogehoge") とでは意味と動作が変わることがあります。 質問にある例でいうと、 > p (1..10).find {|n| n > 3} (1..10) の部分について、「ひょっとして p(1..10)としたかったのではないですか?」 と注意を促しているのです。 p( (1..10).find {|n| n > 3} ) のように、pの引数を囲むカッコをつければ警告は出なくなります。 >ruby 1.8.4 (2005-12-24) [i386-cygwin] ところでバージョンがずいぶん古いですね。 新しくした方がいいと思いますよ(現在は1.8.7)。
もし「Eclipse 上で Ruby (RDT, RadRails) を使いたい」というだけであれば、Aptana そのものではなく、Eclipse に Aptana plug-in を組み込んだもの (参考 URL) はどうですか? 参考URL：http://mergedoc.sourceforge.jp/
一行目のfilenameAとdef final_file_out ～ endの中のfilenameAは別物です。 従ってfinal_file_outの引数としてfilenameAを渡してあげなければいけないと思います。 filenameA = "kakikomi.txt" (中略) def final_file_out(file, m) fw = open(file, "a") fw.write(m) fw.close end final_file_out(filenameA, "abcdefg")
>records[60] =~ dialed_num これだと比較じゃなくて、正規表現のマッチングなんですけど 本当にやりたいことはなんですか?
>上記の $1へ値を渡すためには、コマンド入力時に特別な引数を渡す方法が必要なのでしょうか。 どこまでわかっているのか不明ですが、 単純にオプションとして受け取れるのが -F数字 -T数字 -START -STOP のパターンのみで、 -F数字が指定された場合に正規表現 /^-F(\d+)/ にマッチした数字部分が $1 に格納されます。
よくわかりませんが、こういう事ではないとしたら、もうちょっと具体的によろしく。 begin begin a=1/0 rescue => e raise(StandardError,e.message+'!!',e.backtrace) end rescue => e p e p e.message p e.backtrace end
一つ確認したいのですが、インストールしたPostgesqlのバージョンはいくつですか? どうもこの ruby-postgres は最近は放置状態のようでドキュメントによると - What's this ? This is the extension library to access a PostgreSQL database from Ruby. This library works with PostgreSQL 6.5/7.0/7.1/7.2; it probably works with 6.3 or earlier with slight modification, but not tested at all. - Requirements Ruby 1.3.4 or later. PostgreSQL 6.4/6.5/7.0/7.1/7.2 installed. とあります。 また、 >プロシージャエントリポイントPQclientEncodingがダイナミックライブラリlibpq.dllから見つかりませんでした。 このないといわれてしまっている PQclientEncodingというプロシージャは バージョン8になったところでなくなってしまっているようです。 ですので、 1) 7.xのバージョンのPostgresqlをインストールしなおす 2) 別の拡張を使う かする必要があると思います。 2)の方はなにがいいのかよくわかりません。 1もバージョン7系統がメンテナンス対象でなくなっていたら問題ですし。
あえて自分でくんでみているという話かもしれませんが、 irb(main):024:0> "stream line".index(' ') => 6 と、自作するまでもありません。
質問者さんの例であるruby-postgresは、私の環境だとすんなりインストールされました。 でも、 >gem install sqlite3-ruby では、失敗しました。 どこかに問題があるのでしょうが、とりあえずの解決方法は、インストールされるべきファイルが何かを調べて、そのファイルをRubyのサイトからダウンロードし、例えば、c:\Rubyの下に保存しておいて C:\Ruby> gem install ruby-postgres とすれば、良いのではないでしょうか？ ちなみに私の場合は、デフォルトのSQLite3を使おうとして gem install sqlite3-rubyが処理の途中でエラーを出し、そのままブラウザから呼び出すと MissingSourceFile (no such file to load -- sqlite3): となってしまいました。なので、必要なファイルである 「sqlite3-ruby-1.2.1-mswin32.gem」を http://rubyist.g.hatena.ne.jp/muscovyduck/200703 … からダウンロードしてC:\Rubyの下に保存して、gem install sqlite3-rubyを実行することで、インストールが成功して、SQLite3がやっと使えるようになりました。
>>特に設定を変えずにセッションでデータを保持するとそれはクッキーに書かれるのでしょうか？ rails 2.0のデフォルトでは、クッキーになっています。なので、2.1でもたぶんクッキーだと思われますね。 >>またセッションがクッキーに保持されるのであればセッションをアプリケーションサーバに 保持させたいです。その方法を教えて貰えないでしょうか？ railsを使っていて、さらに別のアプリケーションサーバが必要なのですか？ もし必要であるとしても、その仕様がどうなっているのか不明なので答えられない気がしますけど・・・。
参考URLでどうですか？ 参考URL：http://www.ruby-lang.org/ja/man/html/Ruby_A4C7BB …
プログラムがはじめてのようなので、言語を複数使うのは難しいと思いますよ。 ソースに埋め込む必要はありません。 VBからrubyを呼べばいいんです。
hoge.rbでクラスHogeを定義しているので、hoge.rbをrequireして、Hogeへのアクセスを記述します。 で、Foo.rbはこんな感じ： require 'test/hoge.rb' puts Hoge::HOGE;
御存じかとは思いますが、このあたりを見るといいのではないでしょうか？ http://antoniocangiano.com/2007/02/19/ruby-imple … http://nikos-d.blogspot.com/2008/04/speed-compar … 日本語の資料だと、笹田さんの発表資料ぐらいしか見たことありませんが。
