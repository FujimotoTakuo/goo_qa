お世話になります。ご指南いただければ幸いです。 Perl初心者です。 自前のサイトで会員ログファイルから各ユーザーの最終ログインを抽出したいと思っています。 ログファイルを作るところまでは何とかなったのですが、抽出する方法が見当もつきません。 （ログファイルではない閲覧用のファイルが作れればありがたいですが抽出するロジックがわかりません。） 現在は以下のようなログファイルができています。 ユーザーA,2016-08-28 12:44:14 ユーザーA,2016-08-25 12:44:55 ユーザーB,2016-08-28 12:45:47 ユーザーC,2016-08-27 12:45:54 ユーザーC,2016-08-28 12:45:54 ユーザーB,2016-08-28 12:45:54 ユーザーA,2016-08-28 12:45:54 それぞれユーザーA-Cさんの最終ログイン行を抽出したいのですが、 ご教授いただけませんでしょうか。 ログファイル上の時刻は以下のように取得しています。 my ($sec, $min, $hour, $day, $mon, $year) = localtime(time); my $now = sprintf('%04d-%02d-%02d %02d:%02d:%02d', $year + 1900, $mon + 1, $day, $hour, $min, $sec); 以上です。よろしくお願いします。
例えば、 @a=(2,1,0); print sort(@a); 上記では、(0,1,2)を返します。 然し、そうでは無くて添え字を出したいのですが。上記の場合の出カは (2,1,0)として出カをしたいのですが。perlのコードが分かりません。 perlのコードをお教え願います。 宜しくお願いします。
perlを使ってサイト上のhtmlを除去したいのですがその際、altやtitleなど属性の中にある文字列は除去せずにしたのです。 例えば下のようなimgタグがあります。 $str = '<img src="../images/example.png" alt="サンプル画像1" title="サンプル画像2" />テキスト'; これを正規表現をつかって除去し以下のようにテキストだけを取得したいのです。 サンプル画像1サンプル画像2テキスト 以下のような正規表現をつかって通常のhtmlタグは抜けるようになったのですが属性テキストを抜く方法がわかりません。 $str =~ s/<(".*?"|'.*?'|[^'"])*?>//g; どなた様かご教授の程よろしくお願いいたします。
作った方が早いと言われるかも知れませんが。最初から有る物をわざわ ざと作りたくは有りませんので。 若しも、モジュールが有るのでしたらお知えてください。宜しくお願い します。
詳説 正規表現(49p)によると昔の株価は、小数点で表示されていたそうです。 書籍では、本来表示したい株価は、9.05なのに9.0500000037272と表示されていた。 printfという文章を整形する関数で小数点第二位まで表示させたかったそうですが、端数が1/8の場合、小数点第二位ではなく第三位まで表示させる必要がありました。 ここで質問ですが端数が1/8とは、噛み砕いて説明するとどういうことなのでしょうか。
Fitbit oneを使っています。 30秒毎の消費カロリーを取得したいのですが どのようにしたらいいのでしょうか？
下記の変数からURL部分のみを抜き出すにはどう記述すれば良いでしょうか？ $url = <a href="http://URL/" target="_blank"> 抜き出したい文字列「http://URL/」
windows7にてopendirを実行し、 僒僀僐僶僗僞乕僘_001.jpg　　※ここに書いたら文字化けしてるかも などのファイル名が入ったフォルダを読み取ると、 "僞乕僘~1.JPG" や "僞EE94~1.JPG" などのもとのファイル名とは違う文字列（と言うよりおそらくバイナリ自体がすでに違う）を得られます。 これについて困ってますが、解説や解決法、その他、なんでもいいのでお助け下さい。 (よくわかりませんが、もしかしてwindows先生に問題があるのではないかと言う疑いを持ちはじめても居ます。が、結局よく分かりません)。
Perlで Shift-JIS形式のファイルを読み込み、その内容をUTF8形式のHTMLファイルに保存する場合どのように処理したら良いのでしょうか？ 下記のような処理だと文字化けしてしまいます。 ---Shift-JISのファイルを読み込む open(IN,"$file"); @list = (<IN>); close(IN); ---内容を$htmlにセットして ---UTF8形式で書き出したい open(OUT,">$file"); print OUT $html; close(OUT);
$dm = subsrt($ttl,0,40); この文で処理が止まるって何が考えられますか？ ※WEB用のCGIなんですが、この文で表示が止まります。
perl初心者です。 大量のデータファイルを自動的に同じ処理をかけたく、プログラムを書いています。 しかし、foreach内でUse of uninitialized value 　というエラーが出てしまい動きません。 どうぞお知恵を貸していただければ幸いです。 どうぞよろしくお願いします。 +++++++++++++++++++++++++++++++++++++ ・以下の処理の前に、あるディレクトリ内にある圧縮ファイルをglobで集め、 　@M_raw_data　に入れてあります。 ・ファイルネームが内容.拡張子となっています。 　この後で各ファイルの処理結果を"内容"が名前のディレクトリに格納させたいため、$dir_nameに入れようとしています。 ・最後のprintですが、本当は、systemを使って 　コマンド　出力先ディレクトリ(”内容”）　処理したいファイル($Mm_file) 　とするつもりです。テストでprintとしています。 foreach my $M_file (@M_raw_data){ my @split_filename = undef; my $dir_name = undef; @split_filename = (/./,$M_file); $dir_name = $split_filename[1]; print $M_file; print $split_filename[1]; print $dir_name; } エラー： Use of uninitialized value $_ in pattern match (m//) at プログラム名 line 28. Use of uninitialized value in print at プログラム名 line 32. Use of uninitialized value $dir_name in print at プログラム名 line 33. で、それぞれ問題の行は @split_filename = (/./,$Mm_file); print $split_filename[1]; print $dir_name; です。
現在自作の「なっちゃてRPG」と言う掲示板的な物を作っているのですが、 レベルアップでの処理に関して質問って言うか、 処理的に適切なのか、もしくは、もっと良い方法があるか教えてほしいのです。 登録者のデータは、 一行で１人のデータとしています。 データの要素に、変数、$p_lv≒レベル、$p_ex≒経験値、$p_job≒職業・・・・あと省略 #▼別ファイルで定義▼ 職業を登録時に９種類（男女別）計18から選べるようにしています。 でぇ、各職業の経験値を「多次元配列」で定義しています。 $EX = [ ['','12','36','84','あと省略・・・99まであります。'], ['','14','42','98','同上'], ['','15','45','105','同上'], ['','13','39','78','同上'], ['','18','54','126','同上'], ['','10','30','70','同上'], ['','11','33','77','同上'], ['','20','60','140','同上'], ['','29','87','174','同上'] ]; #戦う相手のステータス %MONSTER = ( "0" => { NAME => "モンスター１", GOLD => "2", EX => "1" }, "1" => { NAME => "モンスター２", GOLD => "3", EX => "1" }, "2" => { NAME => "モンスター３", GOLD => "3", EX => "2" }, "3" => { NAME => "モンスター４", GOLD => "5", EX => "3" }, 以下省略・・・・・ ); #▲別ファイルで定義▲ #▼レベルアップ処理▼ #数値から、経験値の判定用の変数 JOB:{ if($p_job eq "17" || $p_job eq "16"){ $job_choice = 8; last JOB; } if($p_job eq "15" || $p_job eq "14"){ $job_choice = 7; last JOB; } if($p_job eq "13" || $p_job eq "12"){ $job_choice = 6; last JOB; } if($p_job eq "11" || $p_job eq "10"){ $job_choice = 5; last JOB; } if($p_job eq "9" || $p_job eq "8") { $job_choice = 4; last JOB; } if($p_job eq "7" || $p_job eq "6") { $job_choice = 3; last JOB; } if($p_job eq "5" || $p_job eq "4") { $job_choice = 2; last JOB; } if($p_job eq "3" || $p_job eq "2") {$job_choice = 1; last JOB; } if($p_job eq "1" || $p_job eq "0") { $job_choice = 0; last JOB; } } #▼変数$job_choiceから、経験値を計算する if($job_choice eq "8") { $lv_up_ex = $EX->[8][$p_lv]; } elsif($job_choice eq "7"){ $lv_up_ex = $EX->[7][$p_lv]; } elsif($job_choice eq "6"){ $lv_up_ex = $EX->[6][$p_lv]; } elsif($job_choice eq "5"){ $lv_up_ex = $EX->[5][$p_lv]; } elsif($job_choice eq "4"){ $lv_up_ex = $EX->[4][$p_lv]; } elsif($job_choice eq "3"){ $lv_up_ex = $EX->[3][$p_lv]; } elsif($job_choice eq "2"){ $lv_up_ex = $EX->[2][$p_lv]; } elsif($job_choice eq "1"){ $lv_up_ex = $EX->[1][$p_lv]; } else{ $lv_up_ex = $EX->[0][$p_lv]; } $rands_monster = int(rand(134)); #経験値の数値を取得する $exr = $MONSTER{$rands_monster}{EX}; #投稿者の経験値と今回得た経験値の数値を足す $p_ex += $exr; #レベルアップしたかを判定するフラグ初期化 $lv_up_flg = 0; #経験値を別の変数へ代入「$p_exは累計数値にして行くので」 $temp_ex = $p_ex; #レベルが９９以下だった場合に処理 if($p_lv < 99){ #上記で足した経験値と職業での経験値が同じか、以上なら、処理する while($temp_ex >= $lv_up_ex){ $temp_ex = $temp_ex - $lv_up_ex; $p_lv++; $lv_up_flg++; } } #▲レベルアップ処理▲ 以上なのですが、いかがでしょうか？ 後の処理とかファイルに書き込む処理は、問題ないのですが、 上記の部分だけ、自身が無いので、 いちをローカルでは、テストしているのですが・・・・・・ もし良かったらアドバイスお願いします。
入力ファイルであるCSVが可変長の場合の検索方法について教えて下さい。 以下、入力ファイル例 ※項目数としては10項目以上あります。 aaa,12345,b,01,c bbb,,c,02,d ccc,76543,d,,e ddd,,,04,f 上記入力ファイルを読込み、例えば2項目目と4項目目が未入力が否かをチェックするロジックを作成したい場合、実現する為にはどうすれば良いでしょうか？ 多分FOR文でTOKENSを使用しても可変の為、うまく該当項目が取得できないと思ってます。 それを回避できるやり方を教えて頂きたく投稿してます。 どなたか回答の方よろしくお願いします。
現在ローカルで、perlを使って自作のcgiを作成しているのですが、 最近、perl ver5.12.4→ver5.24.0にしたのですが、 「ver5.12.4をファイルシュレッダーにかけて削除し、ver5.24.0をインストしました」 問題なくインストールは終了し、ローカルサーバーを立ち上げてブラウザで, 作成途中のcgiにアクセスした所、 エラーが出まして、requireの呼び出しの行でエラーになっています。 ↓呼び出し行は↓ require './jcode.pl'; 自分では、全く理解できないので、一度ver5.24.0を削除し、再びver5.12.4を、 インストールした所、問題なくrequireを使ったライブラリの読み込みに成功しました。 バージョンが、0.12も上がっているので、上記の呼び出し方法では駄目なのでしょうか？ もしくは、jcode.pl自体に問題があるのでしょうか？ 下記のjcode.plは、最後の行に真を返す「１」が記載されているので、問題はないと思うんですが。。 詳し方のご伝授して下さい。 よろしくお願い致します。
__DATA__を読み取り、過去読んだものと照合計算し期待する結果を出力するにはどのようにプログラムにするのが良いでしょうか？ また、もし良ければ、こういったアルゴリズム？を思いつくにはどのように勉強するのが良いでしょうか？良い方法をご存じでしたら教えて下さい。 宜しくお願い致します。 ---期待する結果--- 1+5+7 2+6+8 3+7+9 4+8+10 以下続く ---code.pl--- while(<DATA>){ 処理; } __DATA__ 1 2 3 4 5 6 7 8 9 10 以下続く
Perlで特定の文章を処理して必要な文言だけを残すプログラムを書いています。 PerlのバージョンはアクティブPerlの最新版です。かなりうまくいっているのですがもう一歩が足りません。恐縮ですが、初歩の私に文書処理のプログラミングに詳しい方、ぜひご教授ください。ソース全部を乗っけるとまずいのでこの一文だけが残っているとみてください。 「ブログタイトル、ヘッダー広告 はじまり」で始まり 「&lt;/hgroup&gt;」で終わる文言だけを削除したいです。この場合どのように指定すればいいのでしょうか？内部にスペースキーや日本語文書が不特定多数含まれており、これをソースコードにするとかなり見ずらいです。なんとか簡単にこの一文を消すだけのコマンドを教えていただけませんか？ あとANSI形式でテキストファイルを出力するコマンドはありますか？このあたりはまったく初心者で調べてはみたのですが、ほとんど理解できるだけの情報が出てきませんでした。出力ソースはprint "$_";となっています。Win10のコマンドプロンプト上でPerlにつないでコマンドしております。 ループさせて、s///g;を使っていけばいいことはわかるのですが...。
2ch datからの取得が登録制になったため、基本的にはデータの取得は出来なくなったと思うのですが、open 2chや他のまとめサイトなどは問題無くデータを取得しているように見えます。 どのように取得しているのでしょうか？
perl.pl 引数1(項目） 引数2(A.txt)を実行する際に、 引数1を 他リスト(B.txt)にある複数 項目に 自動的に変更して実行させたい場合のスクリプトの書き方を教えていただければ幸いです。 初学者の質問で申し訳ありませんがよろしくお願いします。
先頭の全角スペースを全部削除する場合の記述を教えてください。 $val="全角スペース全角スペース全角スペースあいうえお" これだと先頭1文字しか削除できない。 $val =~ s/^　*//g; ※スペースは全角スペース 結果$valの中身 ”あいうえお" ※Perlのバージョンが5.0のため「use utf8」 が使えないため　変換は「jcode.pl」を使っています。
jcode.plを使って、 入力された文字列を例えば30文字ぐらいに切ってファイルに書き込む処理をしていますが、 文字列によっては最後の文字が文字化けしてしまうものがあります。 この場合どうすれば良いのでしょうか？ 例） 「はじめまして」 を 「はじめま」にしてファイルに書き込むと 「ま」の文字が文字化けする。 現在の切り取り処理方法 $in = substr($in,0,30);
入力ファイルの各行の先頭3桁は数字になっています。その3桁を「抽出、ソート、重複削除」したいのですが、どのようにしたらよいかわかりません。 教えて頂けると幸いです。
ファイルの存在をワイルドカードで指定したいのですが、どのような書き方でできますでしょうか。 $file="home/hoge1.txt"; if(-f $file){print"存在します。";} 上記の場合、hoge1.txtの部分をワイルドカードを使って、hoge*.txtとしたいのですが、うまく結果が得られません。 この場合の書き方を教えていただけないでしょうか。 よろしくお願いします。
xyz.logというテキストファイルがあります。 構成は長さは不定ですが、１レコードが１２個の"<>"で区切られたフィールドを持ちます。 01<>abc<><>5<>33<>～<>82<>　のような。 教えて欲しいのは、 このファイルの最後のレコードの１０番目のフィールドの値を「０」にしたいのです。 最後のレコードはpop,pushで触れるのは分かるのですが、 そのレコードの編集の方法が分かりません。 @lines = <IN>; $wkrec = pop(@lines); *********************************　ここの部分 push (@lines,$wkrec); 宜しくお願いします。
windows7のactiveperlでmysqlを使っています。 fetchrowは良く使いますが、fetchrow_arrayとの違いは何でしょうか。 宜しくお願いします。
perlで今日の日付から、今月の1日から月末迄の連続した日付を出カしたい。その方法がわからない。 例えば、今日の日付が2016年2月17日と仮定して、その日付から年が 2016年。月が2月と分かる。その数値を使って、2016年2月の最終日を求 める。この場合は、29日。 それで、2016年2月1日から、2016年2月29日迄の連続した日付を出カし たい。但し、フォーマットは、2016-02-29の形式で出カしたい。 perlのソースを提示願います。環境は、windows7のactive perlを使っています。 宜しく、お願いします。
はじめまして。 先日プログラムの講義においてこのような課題が出たのですが解けなくて困っています。 分かる方いらっしゃいましたらよろしくおねがいします。 私Perlプログラム始めたての素人ですので、お手柔らかにお願いします。 ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー 以下のように標準入力で整数を入力し、1から入力した数まですべての整数を足し合わせて表示するperlプログラムをfor文を用いて作りなさい。 Please type a number. 5 1+2+3+4+5=15 ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
Perlの勉強が必要になった初心者にすら到達していないど素人からの相談です。 現在『つくって覚えるPerl入門』を読みながらPerlの勉強をしているのですが、 モジュールのDate::Simpleをインストールして下記の内容のplファイルを作成 したのですが、実際に日付でありえない日などを入力しても日付に誤りがあります と表示してくれない状態です。 # 日付チェック use Date::Simple; if ($pdate eq Date::Simple::date($pdate)){ $date_check = 'ok'; } else { $date_check = 'error'; 中略 # 日付に誤りがあればメッセージを表示する if ($date_check eq 'error') { print '（日付に誤りがあります）'; Perlの　-cw　のチェックでもOKが出ますし、Web上でもエラーは出ないのですが、 メッセージを表示してくれません。 Date::Simpleインストール前のチェックではインストールしていないとエラーが 出ていたのでインストールに失敗したとも思えない状態です。 どなたかおわかりの方がいましたらアドバイスをお願いいたします。 ※ほかにも必要な情報がありましたら返信をお願いいたします。
下記のperlのソースで出カさせると文字化けをする。 windows7でutf8で書いています。 mysqlの設定はutf8になっています。 print文で漢字以外は正常ですが、漢字の部分が文字化けをします。 修正個所を指摘願います。 宜しくお願いします。 use Encode; use utf8; use open IO => ":encoding(cp932)"; binmode STDOUT,':utf8'; # DBIモジュールを読込む use DBI; # データベース名を設定 $database = "mail"; # ホスト名を設定 $hostname ="localhost"; # ユーザ名を設定 $user = "****"; # データベースにパスワードを設定していれば指定 $password = "****"; # データベースのオブジェクトを作成して接続 $dsn="DBI:mysql:database=$database:host=$hostname"; $dbh = DBI->connect($dsn,$user,$password); $rs = $dbh->prepare("select * from mail limit 100;"); $rs->execute(); # 取得したレコードセットの数だけループして表示 while(($mail,$id) = $rs->fetchrow()) { print join("|",$mail,$id),"\n"; } # レコードセットを閉じる $rs->finish; # データベースを閉じる $dbh->disconnect; exit;
CGIでGnuplotを使いたいのですが、初心者なので良くわかりません。 モジュールはインストールできていると思うのですが。 $ find `perl -e 'print "@INC"'` -name '*.pm' -print /Library/Perl/5.18/Chart/Gnuplot.pm しかしテストCGIが動きません use strict; use Chart::Gnuplot; my $chart = Chart::Gnuplot->new( output => "gallery/axisLabel_1.png", title => "Default format of the axis labels", xlabel => "x-label", ylabel => "y-label", x2label => "x2-label", y2label => "y2-label", ); my $dataSet = Chart::Gnuplot::DataSet->new( func => "sin(x)", ); $chart->plot2d($dataSet); またターミナル上でも使えません $ gnuplot -bash: gnuplot: command not found わかる方がいれば教えていただきたいです。 よろしくお願いします。
お世話になります。 今、Perlで文字列を抽出するプログラムを作っています。 プログラムのソースは以下の通りです。 #!/usr/bin/perl $cutString = "\\\\disk ..省略.. 9\\"; while(<>) { if(/\A$cutString(.+);/){ print "$1\n"; } } これをシェルで、パイプでgrepしてきた行に適用したいと考えています。 シェルの内容は簡単に示すと grep "aaa" aaa.txt | perl test.pl > test.txt のような形になっています。 このシェルを実行すると Unmatched ) in regex; marked by <-- HERE in m/\A\\disk ..省略.. 9\(.+) <-- HERE ;/ at test.pl line 7, <> line 1. というエラー文が二回返ってきます。 いろいろと調べたのですが解決方法がわかりません。どうにか動かす方法をご教授お願いします。
「初めてのCatalyst入門（2）Catalystアプリはどのように作るのか？」 で練習を始めました。windows7 に AcitveState でPerlを乗せています。 Helloworld.pmを編集してMakefile.PLを行いますが、 Makefile.PLでCannot determine perl version info from lib/Helloworld.pm と、Helloworld.pmを無視してMakefile.PLされます。 lib/*.pm というファイルに必要なperl version info とはどのようなものなのでしょうか？
perlのs構文で置き換えに式を用いたいが使い方が分からない 下記の$aの中のcounterの値を夫々1から3に変更した内容を求めたい。 $a="UPDATE SQL詳細 SET SQL詳細.sqlstr = replace_char([sql]) WHERE (((SQL詳細.type)=1));"; $a="UPDATE SQL詳細 SET SQL詳細.sqlstr = replace_char([sql]) WHERE (((SQL詳細.type)=2));"; $a="UPDATE SQL詳細 SET SQL詳細.sqlstr = replace_char([sql]) WHERE (((SQL詳細.type)=3));"; それを求め様として、下記を実行したが下記の様な結果になる。 $a="UPDATE SQL詳細 SET SQL詳細.sqlstr = replace_char([sql]) WHERE (((SQL詳細.type)=counter));"; for $i(1 .. 3){ $a =~ s/counter/$i/e; print "$a\n"; } 結果は下記です。 UPDATE SQL詳細 SET SQL詳細.sqlstr = replace_char([sql]) WHERE (((SQL詳細.type)=1)); UPDATE SQL詳細 SET SQL詳細.sqlstr = replace_char([sql]) WHERE (((SQL詳細.type)=1)); UPDATE SQL詳細 SET SQL詳細.sqlstr = replace_char([sql]) WHERE (((SQL詳細.type)=1)); 何処が可笑しいのだろうか。修正個所とその時のperlのソースを提示願います。 宜しくお願いします。
エラーメッセージ： Wide character in subroutine entry at C:/Perl64/lib/Encode.pm line 221. この意味と対応策を教えてください。
再びお世話になります。 perl5.14の環境でログ表示のみのスクリプトを作っています。 4<>一平<>記事<>オヤ<><><> 3<>次郎<>記事<>おや<><><> 1<>太郎<>記事<><><><> 1<>次郎<>記事<><><><> 2<>花子<>記事<><><><> 2<>太郎<>記事<>親<><><> 1<>太郎<>記事<><><><> 1<>花子<>記事<><><><> 1<>太郎<>記事<>oya<><><> 上記のようなログデータから4番目の値がある行だけを取り出したいです。 以下のように書くと一行目のオヤの行だけが取り出されてしまいます。 html側で言うとレス記事の行を非表示にしたいのです。 # ログの表示 foreach $i (@file){ ($num,$name,$msg,$oya,$url,$mail) = split(/<>/,$i); @file = grep /$oya/, @file; print <<EOM; $num<br> $name<br> $msg<br> $oya<br> $url<br> $mail<br> ---------------<br> EOM } 4番目の値の文字列が変ってしまう場合も一緒に取り出すにはどう書けばよいのでしょうか？ よろしくお願いいたします。
use strict; use warnings; use MIME::Lite; use Jcode; my $from = 'usui@*******'; # 送信元 my $to = 'yamada@******'; # 送信先 my $path = '.'; # 添付するファイル(このファイルを読み込む) my $filename = 'CIMG0020.JPG'; # 添付ファイル名(このファイル名でメールに添付する) my $type = 'image/jpeg'; # 添付ファイルタイプ my $subject = '++++++++++++++++++++'; # サブジェクト my $message = '-------------------------'; # 本文 # メールサーバの指定(省略時はsendmailコマンドを使用する) MIME::Lite->send('smtp', '88888888'); $subject = jcode($subject)->mime_encode(); $message = jcode($message)->jis; my $msg = MIME::Lite->new( From => $from, To => $to, Subject => $subject, Type => 'multipart/mixed', ); $msg->attach( Type => 'text/plain; charset="iso-2022-jp"', Encoding => '7bit', Data => $message, ); $msg->attach( Type => $type, Path => $path, Filename => $filename, Disposition => 'attachment', ); $msg->send; 上記で最後の$msg->sendで open .: Permission denined のエラーが出る 問題の原因と修正個所の指摘をお願いします。
http://gazo.shitao.info/r/i/20151203043653_000.png windows7, ActivePerl 5.16, CPANを使おうとすると画像のようになり、Cコンパイラ関係(？)をダウンロードできないような感じになります。 検索含め色々やってみましたがよく分かりませんでした。 プロ串のチェックとはいったいなんなんのでしょうか？
perlで書かれた掲示板への書き込みの際、メッセージの中のURLに#がある場合、その中の#を%23にするのに次のようになっています。 my $char = '-_\.!~*\'()a-zA-Z0-9;/?:@&=+$,%#'; $MsgTrans =~ s|(https?:\/\/[$char]+)|&change($1)|sge; sub change{ my ($line) = @_; if($line =~ m|(https?:\/\/[$char]+)\#([$char]+)|){ $line = "<a href=\"$RS$1%23$2\">$1#$2</a>"; }else{ $line = "<a href=\"$RS$line\">$line</a>"; } return $line; } これを踏襲しつつ、特定のURLの場合、$RSがつかないようにするにはどう書けばよいですか。
もし暇な方がいらっしゃいましたら、元々入っている標準モジュールのみで、 インターネットサーバーとクライアントを作るとどのようになるのか、 Hello World の最小限の記述を書いて頂けないでしょうか？ 1:クライアントにIPとポートを入力し、Hello Worldを送信する。 2:Hello World受け取ったサーバーは、クライアントに対しHello Worldを送信する。 * サーバーもクライアントもwindowsで動作するものとする。
下記の文字には、ある法則で並んでいる文字があります。■に入る文字は何でしょうか? 無　無　T T ■ H H O E D
下記のperlのソースで文字化けが出る。wide characterのエラーが出ます。 use LWP::Simple; print get('https://opac.toshokan.city.fukuoka.lg.jp/licsxp- …); ソースはcp932 urlはutf-8で書かれています。 utf-8フラグの関係だとは思いますが。 対処が分かりません。 エラーが出ない様なperlのソースをご提示願います。
お世話になります。 よろしくお願い致します。 環境変数というのを覚えました。 $host = $ENV{'REMOTE_HOST'}; $addr = $ENV{'REMOTE_ADDR'}; $agent = $ENV{'HTTP_USER_AGENT'}; で、これを記録すればほとんどＯＫなんですが、 あと、何か記録するとしたら何がいいのでしょうか？ 　　$cook = $ENV{'HTTP_COOKIE'}; で、クッキーだと記録内容が長すぎですので、短めので、効果があるのがいいのですが…。 本人特定に結び付く効果的な環境変数は何かあるでしょうか？ 荒らし対策です。よろしくお願い致します。
お世話になります。 自分のホームページに仲間のホームページをリンクしています。 自分のホームページから、そのリンク先に飛ぶ場合に、１日あたりどれくらいクリックされているか調べたいと思いました。 そういうＣＧＩはないでしょうか？ もしあればお手数ですが教えてください。
画像掲示板を改造しようとしていますが、分かりません。 よろしくお願い致します。 元の画像掲示板をmoto.cgiとします。 そこに投稿された画像のＵＲＬは、$gazo_urlという変数になっています。 別のＣＧＩをbetu.cgiとすると、 betu.cgiに画像を表示させるには、どうしたらいいのでしょうか？ betu.cgiに↓こんなふうに書いても全然ダメでした。 <IMG SRC="$gazo_url" BORDER="0" > ド素人ですいません。 よろしく教えてください。
CGIでクエリーが含まれるURLを特定のドメインからのみアクセスできるように.htaccessでアクセス制限したいのですが、うまくいきません。 クエリーが含まれるURL http://www.example.com/sample/view.cgi?mode=admin 上のURLへはhttp://www.hoge.comからのみアクセスできるようにしたいのです。 下記のように記述してみましたが、やはりダメでした。 <Files ~ "view\.cgi?mode=admin$"> SetEnvIf Referer "^http://hoge\.com" ref1_ok order deny,allow deny from all allow from env=ref1_ok </Files> どなたか教えてください。
うまく説明出来ないのですが、画像のような表を物を作りたいのですが、 私の頭では上手に作ることが出来ませんでした。 http://gazo.shitao.info/r/i/20150913181738_000.png @n = qw(a b c d e f g); @nの数は不明です。 奇数ならば選ばれない要素が一つあるはずです。 解はいくつかあると思いますが、そのうちの一つを得られればそれで解決します。
久しぶりにプログラミングしたら極端に頭が悪くなっていました。 死にたい。 my @a = qw(a b c d); @aには何個の値が入っているか分かりません。 これを全組み合わせが欲しいのですが、どのようにするのが良いでしょうか。 abcd abdc acbd acdb adbc adcb bacd …以下略 できれば、見るからに分かりやすい記述と 速い記述の2種類書いて頂けると幸いです。 ちなみに頑張ってたら作りたいのと全然違う物ができますた。ｳｴｰﾝ my @a = qw(a b c d e f); my %h = map{ $_, $a[$_] } 0..$#a; #感覚的によく分からないので数字のハッシュにする。 foreach my $n (0..((@a ** @a) - 1)){ my @p = (); unshift @p,($n % @a); while($n = int($n / @a)){ unshift @p, ($n % @a); }; foreach my $k (@p){ print $h{$k}; } print "\n"; } しかも@aが増えると爆発的に遅いです。(当たり前か)
perlのMail::Mbox::MessageParserをインストールしました。それで、サンプルで下記を動かそうとしたら下記のエラーが出ました。最初にコードを次にエラーを示します。 1 use Mail::Mbox::MessageParser; 2 3 my $file_name = './mail.txt'; 4 my $file_handle = new FileHandle($file_name); 5 6 # Set up cache. (Not necessary if enable_cache is false.) 7 Mail::Mbox::MessageParser::SETUP_CACHE( 8 { 'file_name' => '/tmp/cache' } ); 9 10 my $folder_reader = 11 new Mail::Mbox::MessageParser( { 12 'file_name' => $file_name, 13 'file_handle' => $file_handle, 14 'enable_cache' => 1, 15 'enable_grep' => 1, 16 } ); 17 18 die $folder_reader unless ref $folder_reader; 19 20 # Any newlines or such before the start of the first email 21 my $prologue = $folder_reader->prologue; 22 print $prologue; 23 24 # This is the main loop. It's executed once for each email 25 while(!$folder_reader->end_of_file()) 26 { 27 my $email = $folder_reader->read_next_email(); 28 $email = $folder_reader->read_next_email(); 29 print $$email; 30 } Not a mailbox at C:\Users\usui\EDMax\mbox\01.pl line 18. これは、10行目の$folder_readerの中の12行目の$file_nameの指定が間違っているのでしょうか。$file_nameは、3行目で指定しています。使っているperlはactive perl ver5.20です。mail.txtは最初にsmtpヘッダー、次に本文が続いています。これが一つのメールで複数のメールがこの後に続いています。 エラーの意味と修正個所の指定をお願いします。
下記のperlのソースでperl 01.pl 01.txtの出力が常に1となる。 @tmp=<>; $result=grep{$tmp[$_] =~ /^end_of_file/} 0 .. $#tmp; print $tmp[$result]; 01.txtには漢字が入っている。これが悪さをしているんだろうか。入力ファイルは、sjis。perlのソースもsjisです。 宜しく、お願いします。
perl 01.pl 01.txt 02.txtで01.txtと02.txtの二つのファイルを処理したいのですが方法が良く分かりません。以下のソースです。 @in1=<> # 01.txtを読む @in2=<>; # 02.txtを読む print @in2; ここで、何もしなければそのままです。ここではどうやら標準入力からの入力待ちの状態になっています。なのでコントロールキーとZキーを打鍵してやると終わります。この時に、01.txtと02.txtの内容を表示しての終了となります。 理屈が分からない。 ・何故、指定もしていないのにも関わらずに標準入力待ちになっているのか ・どうして、全てを表示する事になるのか 多分にこれは私がperlの動きを理解していないのが原因だとは思いますが。私の誤っている理解を御指摘願います。
## ファイルロック sub file_lock{ # ロックファイルの時刻チェック local($flag) = 0; if(-M $lock_file > 0.01){ unlink($lock_file); } foreach(1..5){ unless(-f $lock_file){ if(open(TMP,">$lock_file")){ print TMP "file locking\n"; close(TMP); $flag = 1; last; } } sleep(1); } if($flag == 0){ &error("データファイルを他のユーザーが使用中の為書き込みが出来ません。"); } } 以上は、dataフォルダの中にtmpファイルを、あるユーザーが書き込み中に作って、 その処理が終わるまでは他のユーザーの書き込みが出来ないということで 概要はいいのでしょうか？ 質問は、5行目の、 if(-M $lock_file > 0.01)の0.01についてです。 これは、0.01秒のことを言っておるのでしょうか？ 以上のように殆どPerlを片言以下で理解しているド素人です。 0.01秒じゃ少ないので0.2にしたら問題があるでしょうか？ 質問はチンプンカンプンでしょうか？ ド素人の私によろしくご教授お願い致します。
なんか変です。 print "Set-Cookie: BBS=$cookies; expires=Tue, 1-Jan-2030 00:00:00 GMT;\n"; とためしに記述したら、 Set-Cookieが機能しなくて、パソコンの画面に 下のように、文字がそのまま出てしまいます。 Set-Cookie: BBS=name:あいうえお,mail・・・・・・・ expires=Tue, 1-Jan-2030 00:00:00 GMT; Content-type: text/html ド素人ですいません。 訳が分からなくなってきました。 どうしたら直せるでしょうか？ よろしくお願い致します。
お世話になります。 二つのサーバーを借りています。 ＡとＢというサーバーとしておきます。 このＣＧＩは今までちゃんと動いておりましたが、バグがあったので修正してＡのサーバーで正常に動かしました。 そのＣＧＩをＢのサーバーで動かそうとしたら、Internal Server Errorになってしまいます。 パーミッションはＯＫです。今まで通り755でやっています。 最初もＯＫです。　#!/usr/bin/perl ほかに何か原因があるのでしょうか？ ド素人で恥ずかしいですが、教えてください。
お世話になります。 Perlは超ド素人です。 ほとんど分かっておりません。 そんな者がおこがましいですが、 クッキーに名前を食わせて吐き出させると文字化けしてしまいます。サファリだけですが。 $nameをなんとか処理してから、$cookie{'name'} を設定した方がいいのでしょうか？ 教えてください。よろしくお願い致します。 # この時点での値をクッキーとして設定する。 undef %cookie; $cookie{'name'} = $name; $cookie{'mail'} = $mail; $cookie{'age'} = $age; $cookie{'sex'} = $sex; &print_cookie($cookiename, $cookiedays);
Windows 7 64bit でunlinkでファイルを削除するとゴミ箱へ移動することなく消えてしまします。 ゴミ箱へ移したいのですがどのようにすればよいでしょうか？
CGI(Perl)を使用して商品の管理をしようとした場合、CGIの置かれています サーバー上へとデータベース（データの一群）を置いて、そのデータについて 例えばデリミタ（区切り文字）を『カンマ』にして、データを色々と書き換え、 そしてその中身を確認する際にはMicrosoftExcelで表示するという方法が出来る 程度の知識を持っています。 そこで、データベースをサーバー上に置くのではなく、Googleドライブ上の スプレッドシートを使って管理をしたいのですが、スプレッドシート上での 一番下の行へと順次データを追加していきますCGI(Perl)の書き方があります サイトをご存じでしたら、そのサイトを教えて戴きたいと思います。 ※質問に対する回答(サイトさんのURLやタイトル)をお願いします。 ※○○で検索すればいいという意味合いのものは回答ではありませんので 　ご勘弁願います。
下記のソースで誤表示しない方法を知りたい。 1 use utf8 2 use Encode; 3 use open IO => ":encoding(sjis)"; 4 binmode STDOUT,':utf8'; 5 open (IN,'03.txt')||die "file ope err\n"; 6 @in=<IN>; 7 close IN; 8 @in=(); 9 print @in; 下記のエラーが出る。 shiftjis "\x87" does not map to Unicode at C:\Users\usui\EDMax\DataGen6\03.pl line 6, <IN> line 2175.
下記のソースでエラーになる。 1. # grep.pl 2. @list1=(); 3. push @list1,"まぐまぐニュース"; 4. push @list1,"大阪"; 5. push @list1,"福岡"; 6. push @list1,"名古屋"; 7. push @list1,"京都"; 8. @list2=(); 9. push @list2,"東京"; 10. push @list2,"神田"; 11. push @list2,"浜松町"; 12. push @list2,"名古屋"; 13. push @list2,"福岡"; 14. push @list2,"QTNetお客様センター"; 15. for $data(@list1){ 16. print grep(/^$data/,@list2),"\n"; 17. } Unmatched [ in regex; marked by <-- HERE in m/^まぐまぐニュー <-- HERE ス/ at C:\Users\usui\EDMax\DataGen5\grep.pl line 16. windowsの環境でshift jisで書いています。
<div class="panel panel-default"> 上記のpanelとは何をしているのでしょうか？ そういうタグとしか出てこなくて、どの様な動きをするのか分かりません。 ご教授お願い致します。
実験的にWindows 7 + active perlである時刻になったら、text.txtに追記するプログラムtest.plを作りました。このプログラムを複数実行(50程度)した場合当然ですが良く衝突します。 ロックを調べるのに10秒くらいは掛かっても構わないのですが衝突無くファイルを操作するにはどのようにしたら良いでしょうか？ふと思ったのですが、証券会社など絶対に衝突が無さそうです。ロック状態を調べるだけでは大げさな気もするのですが、MySQLなどデータベースを利用すると簡単に確実な方法を用意できますかね？ test2.plなど思いつき書いてみたのですが、とりあえずは衝突してないようですが、大量に動かすと衝突する気がしてなりません。外部のソフトを使うなどでも良いのですが、簡単な方法で確実なロックというのはありますか？ -----test.pl---- for(;;){ my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time); $year += 1900; $mon += 1; if($sec % 6 == 0){ open(F,">>test.txt"); print F "$$\n"; close F; } select(undef, undef, undef, 0.1); } -------------- -----test2.pl---- for(;;){ for(;;){ if(-f "lock"){ sleep int(rand(5)); }else{ last; } } open(F,">lock"); print F $$; close (F); my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time); $year += 1900; $mon += 1; if($sec % 2 == 0){ open(F,">>test.txt"); print F "$$\n"; close F; } unlink("lock"); select(undef, undef, undef, 0.1); } --------------
Windows2003上のタスクスケジューラで動かしていたPerlのスクリプトを2008に移行したところ、動かなくなり、原因が判らず困っています。 内容としては、mail_get.plというスクリプトで下記の処理をしています。 １．popサーバーからメールを受信 ２．所定のフォルダに添付ファイルを出力 ３．複号用バッチファイル(encode.bat)の起動 ４．エンコードした結果をメールで送信し、サーバーへファイル転送 ３．のバッチファイルを起動するところで、出力される添付ファイルが見つからない、という状態でエラーになります。 不思議なことに上記のスクリプトをタスクスケジューラでなく、手動で動かした場合は正常に動作します。デバッグ表示したところ、パスが通っていないという状況ではないようです。 ３．を行う前に時間稼ぎのループを入れれば解決するのかもしれません。 perlはスクリプト言語なので、逐次動作するものと思っているのですが、OSの違いやCPU速度の関係で、先に子プロセスが呼び出されてしまう可能性があるのでしょうか？ 同じような経験をされた方はおられないでしょうか？
Perlの初心者向けの本を見ながら勉強を進めているのですが、途中で文字化けしてしまい、解決方法もその本には書かれていないので困っています。環境はWindowsです。 以下のスクリプトを実行すると、 $string = 'あいうえお'; $string =~ tr/あ/い/; print "$string\n"; 以下の様な結果になります。これは問題ありません。 いいうえお しかし、「い」に変換する所を、「イ」に変換する様に書き換えた、以下のスクリプトを実行すると、 $string = 'あいうえお'; $string =~ tr/あ/イ/; print "$string\n"; 以下の様に、文字化けした結果になります。 イΔΖΘΚ WEBで調べ、いくつか処理を追加したりしてみたのですが、エラーが出るだけで解決しませんでした。 文字化けする理由と対処法をご存知の方がおられましたら、お教え頂けないでしょうか。
たとえばtelnetなどでwww.yahoo.co.jp/index.htmlを開くとき、以下のように書きますが、 GET /index.html HTTP/1.1 host www.yahoo.co.jp では、www.yahoo.co.jp/index.html?data=hogehoge のように?以降を指定するときは、どのようにすればよいでしょうか？ 今、Perlでuse Socketで他のページを読むスクリプトを書いてます。
perlの勉強を始めたばかりの者です。 perlでcsv（約5000行）を読み込み、それを出力させたいのですが、以下のプログラムで実行してみるとcsvの最後の行しか出力してくれません。一行ずつすべての行を出力したいのですが...画像のcsvはエクセル（Mac）で開いています。 #!/usr/bin/perl $inputfile="aaa.csv"; open (FILE, $inputfile) or die "ありません"; while (<FILE>) { print $_; } close (FILE); よろしくお願いします
Perlのハッシュのリファレンスを使ってみたいと 思いましたがうまく動きませんでした。 よろしくお願い申し上げます。 ファイル(inifile.txt)からPerlで UserNameとTargetの値を hanako,11111 tarou,2222 の様に出力したいのですが。 tarou,2222 tarou,2222 と成ってしまいうまくいきません。 --inifile.txt---------- Mode=True UserName=hanako DeleteMode=True Target=11111 TouchDateMode=False Mode=True UserName=tarou DeleteMode=True Target=2222 TouchDateMode=False -------------------- --test.pl--- while($line=<DATA>) { 　　　　　　# my $info={};　#これを入れるとTargetは入りました chomp($line); if($line=~/UserName/){ 　　 $line=~s/UserName=//; 　　 $info->{UserName}=$line; }elsif($line=~/Target/){ 　　$line=~s/Target=//; 　　$info->{Target}=$line; push @$infos,$info; } } foreach my $k(@$infos){ my @line2=( $k->{UserName}, $k->{Target}); print join(",",@line2)."\n"; } __END__ Mode=True UserName=hanako DeleteMode=True Target=11111 TouchDateMode=False Mode=True UserName=tarou DeleteMode=True Target=2222 TouchDateMode=False
この怖い絵を描いた人はだれですか？僕はよく分からないので答えてください。おねがいします。
Perlを起動させたプログラムが不慮の死をとげるなどして、 起動時に開かれた標準入出力が、動作中に閉じられた場合、ゾンビ防止用として処理を終了させる必要があります。 これはどうやって調べたら良いのでしょうか？ 現在は事故が起きた場合、 while (<STDIN>){} の処理が突然、停止せずに無限ループを開始し始めてるのだろうと思います。 いきなりCPUを大量に使い、メモリが一気に膨れ上がります。 (たまに気づいたらそうなってるので確かめるのは難しいです)。 ちなみにコマンドプロンプトから呼び出された場合は、プロンプトが死ぬ間際に確実に始末してくれてるようですが、 (100万回ループでコマンドプロンプトを起動し、即座にそれを殺すとPerlもそれに伴って全部死んだ)、 世の中には粗悪なプログラムもあるようで、この粗悪なプログラムが死んだとき、ちゃんとPerlを殺してくれないらしいっぽい時がたまにあります。
2台のパソコンをつなげるにはどうしたらよいでしょうか
Ｅｘｃｅｌ2013に三菱ＭＸＳｈｅｅｔなるアドインソフトをインストールしたところ 実行時エラー’9’（インデックスが有効範囲にありませ）が表示して終了を選択すると Ｅｘｃｅｌは使用できますがアドインソフトが使用できません。 ＶＢに詳しくないので簡単な対処方法をご存知な方教えてください。
やりたいことは、"ファイルAを読み取り、その内容に処理を施したものをファイルBに書き込むという処理"です。 その上で、"ファイルBに書き込んだ内容を書き込みと同時に読み取り、 その上である条件にマッチした文を書き換える"といったことを実現したいです。 もともとのファイルの容量が非常に大きいので、何度もループを使うといったことはなるべく避けたいため、 ファイルBの書き込み・読み込み・書き換えを同時に行いたいのですが、 そもそもそういったことは可能なのでしょうか。 ※また、もともとのファイルの容量が非常に大きいので配列を使わず行う、 ということが前提条件としてあります。 現在のスクリプトの簡略化したものが以下となります。 open LOGFILE,"< /○○/ファイルA" || die("die"); open NEWLOG,"+< /△△/ファイルB" || die("die"); $new = <NEWLOG>; while($yomitori = <LOGFILE>){ if(ある条件1){ print NEWLOG "$kakikomi\n"; } if(ある条件2){ ファイルBの書き換えの処理 $new =~s/\n/ $kakikae\n/; print NEWLOG "$new"; } } close(NEWLOG); close(LOGFILE); 上記スクリプトで、ファイルAからファイルBへの書き込み、ファイルBの読み取りまではできておりますが、 ファイルBの書き換えは実現しておりません。 以上、お詳しい方がいらっしゃいましたら宜しくお願い致します。
スポーツクラブのプールのコーティング材が溶け出し水着が破損したときの弁償金額は？
ユーチューブの設定方法を教えて
ウェブサイトのコンテンツの表示を、ネットワークの中からアクセスした場合と外からアクセスした場合で変えたいので、環境変数でIPを調べて振り分けようとしたところ、プロキシサーバの構成の都合なのか、中からでも外からでも同じプライベートIPが返ってきてしまいます。ホストを調べようとしたら何も返ってきませんでした。どのような解決方法があるでしょうか？
ポイントを品物に交換するのは?
入院部屋代金の件で質問です。今、身内が病院の個室部屋に入院しています。病気の治療で音がうるさいので個室に、と病院から言われて個室にしました。 差額ベット代金は保険適用外で同意していたら払わなければいけないと知りました。 今回は同意している状態ですので、仕方ないかと思いますが費用が高く厳しい状況です。 何か還付等の処置はあるのでしょうか？ 知っている方がいらっしゃいましたら、教えて頂きたいです。
While文のループのなかにfor文でループをまわしているスクリプトなのですが、 forの中でカウンタ変数をつくり、ループ回数を計測しております。 またforの中である条件を満たした際に、lastでforを抜け、引き続きWhileのループを継続するという処理をしております。 $i=0; While(○○){ 処理1 　　　for(××){ 処理2 $i++; 　　　　 if($i >=100){ 　処理3 　　　　　　last; } } } ここで、一度for文のif文で一度forループを抜け、Whileでループをし、またforループに突入した際に、前回forループでカウントした$iの値を保持したまま、そのつづきから$iのカウンタを動作させたいのですが、$iの値はforループを抜けるとリセットしてしまいます。 このような場合、どうすれば$iの値を保持できますでしょうか。 お詳しい方、宜しくお願い致します。 ※ネストがうまく表現できず、みずらくてスミマセン。
ある友達に 「仲の悪い友達からtwitterを監視されている」といった内容の相談を受けました そこで私がどうやって分かるのと、聞いたら 「twitterと、ある機能で分かってその人の暗号みたいなので分かる」と言っていました ずいぶん昔の呟きまで見られたとか友達は言っていました でもそういう機能ってあるんですか？ 私も興味でフォローせずその子のアカウントを見ていたので少し怖いです
Webサイトへログインしようと思いますが、IDを入力しようとすると、古い（変更済み）IDやメールアドレスがいくつも表示されます、消去（削除）の仕方がわかりません。全部でもよろしいの消去方法を教えてください。
2つのエクセルデータの並べ替えの方法がわかりません。 下の様なエクセルデータがあります。 A列　B列　C列　D列　E列　F列 １　　A社　100　1　　B社　100 ２　　B社　99　 2　　C社　99 ３　　C社　98　 3　　A社　98 ４　　D社　97　 4　　E社　97 ５　　E社　96　 5　　D社　96 ﾃﾞｰﾀとしてはA列～C列、D列～F列がそれぞれのﾃﾞｰﾀです。 B列の会社順にD列～F列を並べ替えることは可能でしょうか？ （下の表の様に並べ替えたいのですが・・・） A列　B列　C列　D列　E列　F列 １　　A社　100　3　　A社　98 ２　　B社　99　 1　　B社　100 ３　　C社　98 　 2　　C社　99 ４　　D社　97　 5　　D社　96 ５　　E社　96 　4　　E社　97 よろしくお願いします。
PCでダウンロードした楽曲を自宅で仕事しながらきいています。車でも聞こうと思いPCでコピーしようとしたら「書き込み用にステージングされたファイルがありません」との返事、それにすべての曲が１KBのサイズになっていますのでPCに取り込めません。去年はXPでコピーできたのに今年買ったWIN７（DELL中古）ではCDが認知されていないように思います。あくまでも個人ようにコピーしたいだけです、どうかご教授お願いいたします。
みなさん、VBAの2次元配列への代入をループさせる時に、1次元・2次元どちらを外側のループにしますか？ というのも、下記サイトで配列へのアクセス高速化の方法（C言語です）が記載されており、興味を持ったので参考までにVBAで試してみたのですが、どうも結果が反対になるようなのです・・・ http://fast-programming.aglk.net/double-array/sa … こちらのサイト内では、1次元を外側のループにしたほうが早い、という処理結果だと思いますが、 手元では反対になりました・・・ 質問としては、 言語が異なると、配列へのアクセスもかわるのでしょうか？ それとも、私の記述がサイトのものと違っているのでしょうか？ 下記内容も含め、気軽に回答していただけたら幸いです。 以下、ソースと結果です。 同じ内容で、①、②の部分だけ入れ替えて計測しました。 結果はコードのさらに下です。 '------------------------------------------- Option Explicit Declare Function GetTickCount Lib "kernel32" () As Long Sub speedtest() Dim i As Long, j As Long, cnt As Long Dim st As Double, ft As Double Dim table(1 To 1000, 1 To 1000) Dim res As String res = "" For cnt = 1 To 10 st = GetTickCount() For i = 1 To 1000 For j = 1 To 1000 table(i, j) = 1　’・・・・① ' table(j, i) = 1　’・・・・② Next Next ft = GetTickCount() - st res = res & cnt & " : " & ft & vbCrLf Next Debug.Print res Erase table End Sub '------------------------------------------- 結果 ＜①＞ 1 : 62 2 : 63 3 : 78 4 : 62 5 : 63 6 : 78 7 : 62 8 : 62 9 : 63 10 : 78 ＜②＞ 1 : 31 2 : 47 3 : 31 4 : 31 5 : 31 6 : 47 7 : 31 8 : 31 9 : 32 10 : 46
たとえば、以下のように$aと$bに日付が入っています。 $aと$bは、たとえば以下のような日付が入っています。 月、日、時、分、秒は、必ず2桁で、日付と時間の間には半角スペースを含みます。 　$a = "2013年02月09日 15時05分39秒"; 　$b = "2015年01月12日 09時32分07秒"; $aは、$bの何日前なのかを計算する方法を教えてください。 うるう年など考えているうちに分からなくなってきました。
パソコンASUSX551Mにつないで無料でネット出来ないの
パソコン　廃棄　内臓の時期装置に記録されてる情報が心配
緊急事態ですが、誰か助けてください!!!!!!!!!!!!!!!!!!!! 今は掲示板を作ってますが、localhost/bbs.cgiから開くときに もちろんObject not found!こうなるんですね ちなみにまずコマンドから設定しますようにしてまして、 cd ..\..\www\home perl -c bbs.cgi の順番で設定し、C:www\home\フォルダーの中身はbbs1とbbs.cgiが入ってます。 xampp\htdocs\の中にもbbs1とbbs.cgiが入ってます。 PS:ほかの練習問題なら開けますが、こいつだとまったくわからないので、各天才様 力を貸してください。 宜しくお願い致します。
家の前の道路が私道なのですが市の上下水道市の水道管が入っています。いずれ水道工事で道路を掘削する際は道路の権利者の許可がいるのでしょうか？
法律のレポートを書くのですがテーマの意味がわかりません 「Aの土地甲は、平成２６年５月１日にBへ売却され、当日移転登記なされた。 ところが、土地甲は平成６年６月１日よりCが占有し使用していた。そこで、Bは平成６年７月１日、土地甲の明渡しを要求した。この場合のBとCの優先はどのようになるか。結果とその理由を論ぜよ。」 テーマは上記です。 誰か教えてくださいお願いします。
threads のモジュールを使ってマルチスレッドのテストをすると下のようなエラーが 発生します。 何が原因なんでしょうか？ Usage: threads->create(function, ...) at C:\testPerl\test9\test0006.pl line 11. use strict; use threads; use Data::Dumper; no strict "refs"; my $countM; for ($countM = 0; $countM < 5; $countM++){ my $test = "test".$countM; ${"thd".$countM}= threads->new(\&mtest($test)); ${"thd".$countM}->join; } print "test end.\n"; sub mtest { my $name = @_; print "$name"."\n"; threads->yield(); }
サーバーAからサーバーBの某ディレクトリ(ここでは/C/)にあるファイル(.tar)を30分間隔で監視する。 /C/には1日毎に過去に出たものとは違う(過去に出たファイル名とは重複はない)名前の2個の.tarファイルが置かれます。 これらのファイルは3日経過すると自動で削除される仕組みになっております。 例： aaa.tar (1/5に置かれた) bbb.tar (1/5に置かれた) ccc.tar (1/6に置かれた) ddd.tar (1/6に置かれた) eee.tar (1/7に置かれた) fff.tar (1/7に置かれた) 上記状態から1日経過した1/8は ccc.tar ddd.tar eee.tar fff.tar ggg.tar (1/8に置かれた) hhh.tar (1/8に置かれた) という状態になります。 /c/から最新の.tarをゲットするプログラムをperlで具体的に教えて(記述)いただけますでしょうか。 既にゲット済みであるものしかない場合は何もしません。 なお、プログラムはサーバーAに常時置かれているものとし、crontabで10分毎に実行されるているものとします。サーバーBにはプログラムは置きません。 perlとありますが、linux及びunixコマンドが含まれていても問題ありません。 ご助言の程、お願いします。
こんにちは。 ファイルの中身を 記号（。、＜＞「」など） A-Z a-z あ-ん（「は」のように濁音と半濁音のある音は、はばぱの順） ア-ン（↑と同様） 漢字（あ-ん同様） に並べ替えたいのですが、このように条件がつけられるエディタ（無料）は無いでしょうか？ またはプログラム（CまたはPerl）で実装できないでしょうか？ 教えていただけると助かります。 よろしくお願いします。
現在1.5GB程のcsvファイルを処理しています 通常通りExcelやその他csvを開くソフトで開こうとしても どうしても処理に膨大の時間がかかる一方で一部しか開けない現状です そこでpealを用いて抽出をしようとしているのですが うまく出来ないのが現状です 仮に花のデータがあったとします 花の種類としてはチューリップやあじさい10種類以上の花があり 色や花識別番号，花の数が別の列に数字として入力されています 　　1行目が(空白),種類,色，花識別番号，花の数，実の数，枯れた花の数 　　2行目が(空白),チューリップ,黄色,1,2,2,2 3行目が(空白),チューリップ，緑,2,4,2,2 ... 　　10行目が 3行目が(空白),あじさい，緑,2,4,2,2 … ...以下同様にあじさいなど他の花の種類も入力されているとします このとき，花の名前と色と花識別番号を指定して 花の名前と色と花識別番号，花の数，実の数，枯れた花の数のデータを抽出をしたいのですが どうしても1列目の花の種類しか指定ができず，2列目以降の色や花識別番号を指定することができません 仮にチューリップを抽出しようとする場合は while(<STDIN>){ my @line = split(/,/, $_); $cols = @line; if($cols>1) { if($line[1] eq "種類" || $line[1] eq "チューリップ"|| $line[2] eq"2" ||) { print $_; } } } 現状は…以上ののような形にて作成してます しかし，これではうまくできませんでした 分かる方いらっしゃいましたら知恵を貸してください
私は、こういうコードをよく書きます。 my $TDN = &func_hatten(8,10); my $TON = &func_hatten(2,55); my $MUR = &func_hatten(4,55); my $YJSNPI = &func_hatten(7,55); my $HOGE1 = &func_hatten(1,55); my $HOGE2 = &func_hatten(9,55); my $HOGE3 = &func_hatten(1,55); my $HOGE4 = &func_hatten(9,55); 変数に、関数の戻り値を放り込むのですが、これが30個、40個もひとつのコードに書き込むのは美しくないような気がしています。 こういう場合は、プロの世界ではどうするのが「一般的」でしょうか？
myとourの違いが、飲み込めません。 以下、当方の環境とします。 【コード(1)　ファイル名は read.pl とする】 #!/bin/perl use strict; use warnings; my @filelist = <abc*.log>; foreach my $i (0 .. $#filelist){ open(IN, "$filelist[$i]"); my @alltxt = <IN>; sub f_readlines { my $export=0; foreach my $strings(@alltxt){ $export .= $strings; } return $export; } 【コードの説明と前提】 これは、read.plを実行すると、同じディレクトリにある、「abcで始まり .logで終わるファイル」のすべてを引数として、 同じ処理を繰り返すコードです。 実行時のカレントディレクトリには、abc001.log、abc002.log、abc003.logという3つのファイルが存在します。 abc001.log　には aaaaaaa　という文字列が書き込まれています。 abc002.log には bbbbbbb　という文字列が書き込まれています。 abc003.log　には ccccccc　という文字列が書き込まれています。 【コード(1)の実行結果】 $ ./read.pl aaaaaaa aaaaaaa aaaaaaa 【現状と当方の考え】 このコードの本来の目的は、存在するファイルの数だけ、その中身を順次読みだす、というものです。 ですので、コード(1)の実行結果は $ ./read.pl aaaaaaa bbbbbbb ccccccc になってくれないといけないのです。 しかし、 my @alltxt = <IN>; の行を our @alltxt = <IN>; に書き換えると、うまくいきました。 ネットを見ていると、myはスコープの範囲が限定的で、ローカルな変数のようで、 グローバル（どこでも変数として取り出せる）なものが our、というように読み取れます。 foreach の処理の中で宣言した my @alltxt　ですから、 ファイルの数だけ、毎回 @alltxt　の中身の値は変わるはずです。 それが、変わってくれず、初回に@alltxtに読み込んだ aaaaaaa　だけが、ファイルの数だけ 出力されてしまいます。 【質問したいこと】 (1)myを使って代入した変数の中身は、同じスコープ内で作成した関数からは読みだせないのか？ (2)それならば、なぜ初回のaaaaaaaは、読み出せているのか？ 以上よろしくお願いします。
初めて質問します。 もしご存知の方がいたら教えてください。 ・Strawberryperl 5.16.3をインストール ・Imagemagick-6.9.0-Q16　をインストール ・Gnuplot4.6　をインストール ・Chart::Gnuplot　モジュールをインストール ・OS：Windows8　64bit C:\Program Files\ImageMagick-6.9.0-Q16\PerlMagick\demo\demo.pl　をコマンドラインで実行し、起動を確認。 Gnuplot、Imagemagickともに環境変数でPathはとおってます。 コマンドプロンプトで、gnuplot, wgnuplot ともに起動を確認。 以下のコードを実行したところエラーが出て頭を抱えています。 gnuplotとimagemagickのインストールがうまくいったと思ったのですがなぜか動きません。 --------------------- use strict; use warnings; use utf8; use Chart::Gnuplot; my @xdata = qw/ Apr May Jun /; my @ydata = qw/ 3145 3749 3635 /; my $filename = "test.png"; my $chart = Chart::Gnuplot->new( output => $filename, timeaxis => 'x', ); my $dataset = Chart::Gnuplot::DataSet->new( xdata => \@xdata, ydata => \@ydata, style => 'linespoints', linetype => 1, pointtype => 6, timefmt => '%b', ); $chart->plot2d($dataset); ---------------------- 以下エラー内容 convert.exe: FailedToExecuteCommand `"gswin32c.exe" -q -dQUIET -dSAFER -dBATCH - dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEV ICE=pngalpha" -dTextAlphaBits=4 -dGraphicsAlphaBits=4 "-r72x72" -g504x720 "-sOu tputFile=C:/Users/Mieko/AppData/Local/Temp/magick-1452Dc6vcLxxdw0R%d" "-fC:/User s/Mieko/AppData/Local/Temp/magick-1452AL8tJ_0U-Cq1" "-fC:/Users/Mieko/AppData/Lo cal/Temp/magick-1452Y727r0aGDb5H"' (指定されたファイルが見つかりません。 ) @ error/delegate.c/ExternalDelegateCommand/458. convert.exe: FailedToExecuteCommand `"gswin32c.exe" -q -dQUIET -dSAFER -dBATCH - dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEV ICE=pngalpha" -dTextAlphaBits=4 -dGraphicsAlphaBits=4 "-r72x72" -g504x720 "-sOu tputFile=C:/Users/Mieko/AppData/Local/Temp/magick-1452Dc6vcLxxdw0R%d" "-fC:/User s/Mieko/AppData/Local/Temp/magick-1452AL8tJ_0U-Cq1" "-fC:/Users/Mieko/AppData/Lo cal/Temp/magick-1452Y727r0aGDb5H" -c showpage' (指定されたファイルが見つかりませ ん。 ) @ error/delegate.c/ExternalDelegateCommand/458. convert.exe: Postscript delegate failed `指定されたファイルが見つかりません。 ' @ error/ps.c/ReadPSImage/941. convert.exe: no images defined `C:\Users\Mieko\AppData\Local\Temp\If7Fvb0CUD\plo t.tmp.png' @ error/convert.c/ConvertImageCommand/3210.
以下内容のファイルabc.csv を読み込み、１列目の文字列を指定したとき、２列目の文字列の内容を取得したいと思います。MEを指定したらMELONを取得したい。 その場合のコードを教えて下さい。 AP,APPLE OR,ORANGE ME,MELON PE,PEACH GR,GRAPE 以上、よろしくお願いします。
perlでプログラムを作成中です。 作成したモノはうまく動かないので掲載できませんが、 どなたかお知恵を貸してください。 　入力文字列に対して １をＡ、２をＢ、３をＣ に置換するプログラムを作成中です。 ただし、全ての組み合わせを出力したいのです。 つまり、”２１３”と入力すると回答は、 Ｂ１３ ＢＡ３ ＢＡＣ ２Ａ３ ２１Ｃ ２ＡＣ Ｂ１Ｃ と出力したいのです。 　プログラムとしては、入力文字列を１つずつを配列に入れて、それぞれの変換 をかけ、１つずつ組み合わせて出力しているのですが、どうもうまくいきません。 手法は特に固執してませんので、どの様な形でも結構です。 よろしくお願いします。
今Net::SMTPを使ってメール配信するプログラムを作っています。 簡単なメルマガ配信のようなものです。 プログラムではループを使って一件、一件配信するのではなく、bccで一斉に送ろうと思っています。 その時に、bccで送ることのできるMAX件数はいくらぐらいなのでしょうか？ 実際に送る件数は300件を超えることはありません。 ご教示よろしくお願いいたします。
Perlのスクリプトで、MySQLにユーザー情報を登録しているのですが、 二つのDBに登録しています。 一つ目のDBはEUC-JPで、もう一つがUTF-8のMySQLになっています。 具体的には、最初はあるCMSのユーザー登録を別のPerlスクリプトで行い正常に保存されていたのですが、今年の春頃からWordpressも使う必要があり、そちらがUTF-8のDBなのです。 英数字なら問題なく登録可能なのですが、日本語が入ると、UTF-8のDBでは文字化け等が発生して、正常に登録されませんでした。 ちなみに、Perlスクリプト自体はEUC-JPで記述・保存されているファイルなのですが、先述の通り、先のCMS側のDBがEUC-JPなので、このPerl自体をUTF8にするわけにもいかず・・・ 以下のようなソースになっています。 ------------------------------------------------------------------------ # データベースへアクセス $dbh = DBI -> connect ("DBI:mysql:$dbname:$dbhost",$dbusername,$dbpassword) or show_ErrorPage('データベースにアクセス出来ません。'); #$dbh->do("set names utf8"); #$data{'username'} = decode('utf8', $data{'username'}); #$data{'username'} = encode("shiftjis",decode("euc-jp",$data{'username'})); #$data{'username'} = encode("euc-jp",decode("utf8",$data{'username'})); #$data{'username'} = Encode::from_to($data{'username'}, 'utf8', 'euc-jp'); #utf8::decode($data{'username'}); #$data{'username'} = Encode::from_to($data{'username'},'euc-jp','utf-8'); $sth = $dbh->prepare( qq{ INSERT INTO $table2 (ID,user_login,user_pass,user_nicename) VALUES("$rows[0]", "$data{'username'}","$data{'password'}", "$data{'username'}") } ); $sth -> execute() or show_ErrorPage("データベースを実行出来ませんでした。$DBI::err ($DBI::errstr)"); $sth -> finish(); $sth2 = $dbh->prepare(qq{ SELECT ID FROM $table2 WHERE user_login = "$data{'username'}"}); $sth2 -> execute() or show_ErrorPage("データベースを実行出来ませんでした。$DBI::err ($DBI::errstr)"); @rowss = $sth2->fetchrow_array; $sth2 = $dbh->prepare( qq{ INSERT INTO $table3 (user_id,meta_key,meta_value) VALUES ("$rowss[0]","first_name",""), ("$rowss[0]","last_name",""), ("$rowss[0]","nickname","$data{'username'}"); $sth2 -> execute() or show_ErrorPage("データベースを実行出来ませんでした。$DBI::err ($DBI::errstr)"); ------------------------------------------------------------------------ 少し省いている部分もあり、数字等に間違いがあるかもしれません。 このPerlはフォームスクリプトで、$data{'username'}にユーザー名を入力してもらいます。 それを「user_login」や「user_nicename」に登録をしたいのですが、先のEUC-JPのDBでは問題ありませんが、UTF8のDBでは空白になります。 その後色々調べてみて、上記コードの#の部分を追加して試してみましたが、空白ではないものの文字化けになったり数字になって登録されてしまうようになりました。 やりたいことは、「$data{'username'}」という変数をUTF8に文字エンコードをしてWordpress側のDBに登録を行いたいのです。 その後「perl utf8 フラグ」などのキーワードを知り調べてみましたが、具体的に自分の知識では解決できずに悩んでおります。 もし宜しければご教示頂けますと幸いです。 宜しくお願い申し上げます。
出力が”HASH(0x197fa1c)”のような場合、どう解析してけばいいでしょうか？ --------------------------------------------------------------------- #!C:\Perl\bin\perl.exe -w use strict; use Win32::OLE::OPC; #変数↓ my $items_stringP1 = "PLC0"; #OPCServer のデバイス名 my $items_stringP2 = "D"; #MELSECのデバイス名称 my $items_stringP3 = 0; #先頭アドレス my $maxcount = 1; #点数(5) #変数↑ my $opcintf = Win32::OLE::OPC->new('OPC.Automation', 'Takebishi.Dxp'); my $group = $opcintf->OPCGroups->Add('grp'); my $items = $group->OPCItems; my $items_stringP3_Min = $items_stringP3; my $count = 0; while ($count < $maxcount){ my $items_string=$items_stringP1.".".$items_stringP2.$items_stringP3; $items_stringP3 ++; $count ++; $items->AddItem($items_string, $opcintf); } print "********************"."\n"; print $items ."\n"; print "********************"."\n"; my $key; foreach ( keys %$items) { print "キー値 : $key\n"; } --------------------------------------------------------------------- 出力結果：↓ ******************** Win32::OLE::OPC::Items=HASH(0x197fa1c) ******************** Use of uninitialized value $key in concatenation (.) or string at C:\testPerl\OPC\OPC08.pl line 38. キー値 : Use of uninitialized value $key in concatenation (.) or string at C:\testPerl\OPC\OPC08.pl line 38. キー値 : Use of uninitialized value $key in concatenation (.) or string at C:\testPerl\OPC\OPC08.pl line 38. キー値 :
http://oshiete.goo.ne.jp/qa/8823112.html こちらで質問させていただいたように、/public_html/file.zipではなく、/file.zipの ファイルをダウンロードさせるために以下の方法を取りました。 print "Content-type: application/x-tar\n\n"; open( FH, "$filename" ); binmode FH; binmode STDOUT; print <FH>; close( FH ); この方法では、ブラウザで表示させてダウンロードできるようになったのですが、 これをperlで、wgetか、何かを使って取得したいと考えています。 ところが、wgetで試したところ、zipファイルではなく、cgiページ自体のソースの取得になってしまいました。 zipファイルを取得するにはどのようにしたらよいのでしょうか。 perlの知識があまりないので、どうしても解決できません。 宜しければ具体的に書き方を教えていただけると大変助かります。どうぞよろしくお願いいたします。
/publick_html/に、ホームページファイルがあります。 /publick_html/a.zip をCGIで読み出す時は、 print "Location: "./a.zip"\n\n"; でいいのですが、 /a.zip　を読み出す時の方法がわかりません。可能でしょうか？ お手数をおかけいたしますが、よろしくお願いいたします。
お世話になります。 すいません教えてください。 $bannerには、GIFバナーにリンクが付いている内容です。 内容としては、 <a href="http://www.homepage.com/"><img src="mihon.gif"></a> とします。 これを、 print "$banner\n"; と書くと、バナーが表示されてしまいます。 これを、ウェブ上でHTMLで<a href="http://www.homepage.com/"><img src="mihon.gif"></a>と表示させるにはどうしたらいいのでしょうか？ よろしくお願い致します。
日付をファイル名とし、データ量で「-」と「数字」を付加した ２ページ目以降が作成され、日によって１～１０ページ程度の htmlファイルが以下のように出来上がります。 ./hoge/20141106.html ./hoge/20141106-2.html ./hoge/20141106-3.html 以下の処理で「./hoge/20141106.html」は削除できましたが、 「-2」や「-3」以降も削除する記述をご教示お願いします。 unlink("hoge/$temp.html"); どうぞ宜しくお願いします。
WEB開発業者に委託したWEBアプリの開発言語が「perl」で 作成されたものでした。 知り合いの業者さんに聞くと、「滅び行くコード」を使っているとの事です。 まだローンチしていないサービスですが、「perl」で作られたサービスを 今後、数年間運用してゆけるのか不安に想い今回質問させて頂きました。 もし、最短３年ほどの運用に耐えられないものでしたら、ある程度のコストを かけてでも、別会社へ再委託したいと思います。 忌憚のない意見をお聞かせ下さい。
いつもお世話になっております。Perl初心者です。 以下のサイトを参考に、XML::Parser::PerlSAX を使用して、XMLファイルをフィルタリングするプログラムを作成しようと考えています。 http://mkweb.bcgsc.ca/intranet/perlbook/pxml/ch0 … ここで、ある要素のある属性の、異なる属性値ごとに、文字データイベントを処理する方法を変えたいのですが、どのようにすればよいでしょうか。 各種SAXイベントハンドラも、XML::Handler::Subs も考えましたが、何を使えばよいか検討がつきません。よろしくお願いします。
例えば、与えられた配列が (1, 3, 5, 7, 9, 2, 4, 6, 8, 10) だった場合に、 入力配列が (1, 2, 3, 4, 5) だったら、(1, 3, 5, 2, 4) のように並び替えた いと考えています。 下記のような方法を考えましたが、いずれもできそうにありません。 grep { @ref } @input map { grep { $_ } @ref } @input forループ等を使えば容易にできるのでしょうが、なるべく自前のコードは書き たくなく、map, grep, sort等を組み合わせてできればよりベターだと考えてい ます。 なんとか、スマートな方法でこれを実現することはできないでしょうか。
CGI RESCUE さんの 簡易データベースでdatファイルを検索しようとしています。。 http://www.rescue.ne.jp/cgi/database/ キーワードで検索をしようとしているのですが、うまくヒットしません。 CGIは以下のようになっています。 # キーワード(フリーワード) 　if ($FORM{'keyword'} ne '') { 　　if ($com5 =~ /^([\x00-\x7F]|[\x8E\xA1-\xFE][\xA1-\xFE]|\x8F[\xA1-\xFE]{2})*$FORM{'keyword'}/i) { ; } 　　elsif ($com4 =~ /^([\x00-\x7F]|[\x8E\xA1-\xFE][\xA1-\xFE]|\x8F[\xA1-\xFE]{2})*$FORM{'keyword'}/i) { ; } 　　else { next; } } $com5には「スズキ用<br>ドアトリム<br>バックミラー」と入っていたとします。 「スズキ」または「ドア」・「ドアトリム」・「トリム」と入力すると、ヒットします。 「バック」または「バックミラー」で検索するとヒットしません。 改行が悪いのかと思い、 $com5を「スズキ用ドアトリムバックミラー」に修正してみました。 同じように「スズキ」等はヒットするのですが、「バック」または「バックミラー」で検索するとヒットしません。 「バックミラー」と言う語句がヒットしないのかと思ったのですが・・・ $com5を「バックミラードアトリムスズキ用」に修正したとします。 「バック」・「バックミラー」でヒットします。 また、「ドア」・「トリム」まではヒットしますが、「スズキ」・「スズキ用」になるとヒットしなくなります。 全くヒットしなかったり、動作しないわけではないので、そもそもが間違っているとかではなく検索する部分で何か文字数制限があるような感じですが、これはどこを修正したら良いでしょうか? 他に情報を記入しないといけない物があれば指摘お願いします。
素人質問で恐縮です。 perlからphpに変数の値を渡す事は可能でしょうか。 同一サーバー内に、/hoge/aaaa.pmと/sample/bbbb.phpがあります。 置き場所はそれぞれで特に関連性はありません。 aaaa.pm内で定義した my $data = "あいうえお"; のような変数を、 bbbb.php内で受け取って使いたいです。 jQuery.ajaxでphpとjs間で変数の受け渡しが可能なのですが、 そんなイメージでやり取りできたらいいなと思っています。 難しい話であれば諦めます。 perlもphpも素人ですが、簡単なやり取りで済みそうなら取り入れたいです。 不明点などありましたら、ご質問ください。 よろしくお願いいたします。
perlプログラムにて、住所から　緯度経度を一括取得したいと考えております。 入力ファイル（住所データ　リスト）1万レコード程度 　千代田区○○1-1-1 　港区XX2-2-2 　・・・ 出力ファイル（住所<ＴＡＢ>緯度<ＴＡＢ>経度） 　千代田区○○1-1-1<TAB>3Ｘ．ＸＸＸ<ＴＡＢ>13Ｘ．ＸＸＸ 　港区XX2-2-2<TAB>3Ｘ．ＸＸＸ<ＴＡＢ>13Ｘ．ＸＸＸ 　・・・ ＧｏｏｇｌｅＡＰＩを使えばよいのかと思いますが、全くperlからの呼び出し方法がわかりません。 教えてください。（ｗｉｄｏｗｓにperｌをインストールして　使っています。）
Perlで、変数に既に格納されているエスケープされた特殊文字を、もとの文字に展開するには どのようにしたらよいでしょうか。 つまり、\t という値で格納されているのをタブ文字にしたり、\\ という値であれば\の一文字に するという事です。 ダブルクォートで定義すれば展開されると思いましたが、展開は変数の代入時に行われるだけで、 既に変数中にエスケープされて入っているものはダブルクォートを使い変数を囲んだりしても展開されません。 下記は簡単な例でやろうとしてる事を示したものです。 add変数に\tというタブを意味するエスケープされた特殊文字を含んでいるとして、その\tを タブとして展開し、abc defのようにさせたいのですが、abc\tdefと入ってしまいます。 $ cat unescape.pl #!/bin/perl $add = '\tdef'; #シングルクォートで代入すると、もちろんエスケープされたまま代入される #$add = "\tdef"; #ダブルクォートで代入すると代入時にタブへ展開される #$add = $ARGV[0]; #本当はAGRVからエスケープ特殊文字を含んだ文字列を取りたい。ARGVから代入すると、シングルクォートの時のようにそのまま代入される $tgt = 'abc'; print "add: " . $add , "\n"; print "before: " . $tgt . "\n"; $tgt .= "$add"; #既にエスケープされた形で代入されているものを、ダブルクォートで囲んで使っても展開されない print "after: " . $tgt . "\n"; $ perl unescape.pl add: \tdef before: abc after: abc\tdef
条件に一致した塩基配列を含むデータの抽出方法を教えて下さい。(perl) 下記のように、塩基配列（ACTTC…）と、その上に配列名（>id_000)が 数百万配列ならんだデータがあります。 （fasta形式） >id_001 CGCTGCCGGGGAACGGTCTGGTCAGGGATCTATCATGAGG CGTGGGAATTTCGCCCCGGACAGTGAGGATTTGGGTGCTT CCTTTGCTGTGATTTTAAGTTACCTCACCAAA >id_002 GCAGTCCTTCGCCTGAAGTGCAGGACGGGTAGTAACGTAG AGAGATCTTGCTTAGTTACTACTGC >id_003 　・ 　・ この中から、指定した塩基配列（例：TGAAGTGCA）を含むデータを、 下記のように別名のファイルに、配列名と塩基配列を一緒に出力したいのですが、 どのようにすればよいかが、分からず困っています。 >id_002 GCAGTCCTTCGCCTGAAGTGCAGGACGGGTAGTAACGTAG AGAGATCTTGCTTAGTTACTACTGC >id_015 ATGTGAAGTGCAGTGTGTTAGT 　・ 　・ 「BioPerl」のSeqIOオブジェクト?を使用することで、 何とか同じ結果を出せるようにはなったのですが、 実際に、どのような処理がされているのかは、理解できていません。 今後、色々なパターンに活用できるよう、perlだけの記述では どのような記述をすればよいのか、理解したいのです。 perl初心者なので、より基本的な記述だと助かります。 よろしくお願い致します。
Windowsのバッチファイルで、Perlを使って特定の文字列を含む行を抽出する処理を行っているのですが、うまくいかないケースがあります。 例えば、以下の線内のようなテキストがあって、 ---------------------- 〔a 〔A ゜a ゜A ---------------------- 大文字/小文字を問わず、「〔a」を含む行を抽出し、 以下の線内のような結果を得たいとします。 ---------------------- 〔a 〔A ---------------------- 検索対象ファイルの文字コードが「Shift-JIS」で、 「print if ( /〔a/i );」という構文で行を抽出すると、 以下の結果になってしまいます。 ---------------------- 〔a 〔A ゜a ゜A ---------------------- 「print if ( /〔a/ );」なら以下の結果になってしまいます。 ---------------------- 〔a ---------------------- 検索対象ファイルの文字コードを「UTF-8」にし、 「print if ( /〔a/ );」という構文で、 「〔a」を含む行を抽出しようとすると、何も行が抽出されません。 他のコマンドでの大文字/小文字問わない「〔a」を含む行の抽出は、 findstrでは得たい結果が得られ、 grep、AWKでは、Perl同様、「゜a」を含む行が抽出されてしまいます。 しかし、私が行いたい処理は、数百～数千程度の単語が書かれた単語のリストがあり、そのリストをスクリプト形式に置換して行を検索するので、スクリプトファイルに対応していないfindstrコマンドでは不便なのです。 上記の問題の原因が分かる方がおられましたら、お教え頂けないでしょうか。
例えば１つのディレクトリに１０万個の画像があった場合に、同じディレクトリ内にperlで新しい画像を作ったり削除したりすると、処理速度が遅くなってしまいます。(作成や削除に時間がかかったりする) 違うディレクトリではスムーズに画像を作成したり、削除したりできるのですが、大量のファイルがあった場合は遅くなってしまうようです。 perlでファイルを作ったり削除するのに、ファイル数が多いからという理由で速度が遅くなるものでしょうか。 また、何か対策をご存知であれば教えていただけると嬉しく思います。 よろしくお願いします。
更新記録CGI(perl)を利用して、それを改造したいと思っています。 記事は1つだけ表示して、記事下に「←次へ」「前へ→」のようなリンクを作って前後に移動したいです。 素人考えで以下のようにしました。 $no =5; (現在の記事NO。数字が入ります) $new_no = $no--; $old_no = $no++; print "<a href=\"news.cgi?vno=$new_no\">「←次へ」</a>\n"; print "<a href=\"news.cgi?vno=$old_no\">「前へ→」</a>\n"; しかしこれだと、2つの問題が発生します。 1.最新記事・最古の記事の次または前ページが存在しないのに行ってしまう。 2.何らかの理由で記事を消した場合でもそこに行ってしまう。 この2点を回避するにはどうしたら良いでしょうか? $no =5; open(IN,"$logfile") || &error("Open Error : $logfile"); while (<IN>) { ($no,$year1,$month1,$day1,$name,$tail1,$W1,$H1,$item1,$item2,$item3,$item4,$item5,$host) = split(/<>/); <<<--- どうにかして、この記事の次記事があるかを判別する --->>> if($new_no){ print "<a href=\"news.cgi?vno=$new_no\">「←次へ」</a>\n"; }else{ print "<font color=#aaaaaa>「←次へ」</font>\n"; } <<<--- どうにかして、この記事の前記事があるかを判別する --->>> if($old_no){ print "<a href=\"news.cgi?vno=$old_no\">「前へ→」</a>\n"; }else{ print "<font color=#aaaaaa>「前へ→」</font>\n"; } このようにしたいのですが、方法を教えてください。
aaa.txt 06011800, 5.3 06012100, 5 06020000, 4.5 06020300, 6.2 … bbb.txt 06011800, 5.1 06012100, 7.5 06020000, 5.1 06020300, 9.3 … という二つのファイルがあります。 以下のプログラムを用いて、 06011800, 5.3, 5.1 06012100, 5, 7.5 06020000, 4.5, 5.1 06020300, 6.2, 9.3 … といった感じでデータを作る事に成功したのですが、どうしてもループに無駄が多く、時間がかかってしまいます。 連想配列などを使えば時間が短縮出来そうなのですが、よくわかりません。 ご教示いただけないでしょうか。 以下、作成したプログラム。 $csvfile1 = $ARGV[0]; $csvfile2 = $ARGV[1]; open(DAT1, $csvfile1) || die $!; while($line=<DAT1>) { chomp($line); @dat = split(/,/,$line); open(DAT2, $csvfile2) || die $!; while($line2=<DAT2>) { chomp($line2); @dat2 = split(/,/,$line2); if($dat[0] == $dat2[0]){ print "$dat[0],$dat[1],$dat2[1]\n"; } } } close(DAT);
プログラミングが得意な方お願いします。 下図のリンクのページランクをPerlで実装したいのですが、 まずPDLモジュールをダウンロードし、リンク隣接行列を下記のように定義しました。 use PDL::Lite; my $mat1 = pdl [ [0, 1, 1/2, 0, 1/4, 1/2, 0], [1/5, 0, 1/2, 1/3, 0, 0, 0], [1/5, 0, 0, 1/3, 1/4, 0, 0], [1/5, 0, 0, 0, 1/4, 0, 0], [1/5, 0, 0, 1/3, 0, 1/2, 1], [0, 0, 0, 0, 1/4, 0, 0], [1/5, 0, 0, 0, 0, 0, 0] ]; そして下記の列ベクトルと上記の行列をかけてその答えと上記の行列をかけてさらにその答えと上記の行列をかけて・・・を繰り返し、掛けても答えが変わらなくなったところでその列ベクトルの値を取り出し正規化して出力するという方法を考えました。 my $mat2 = pdl [ [1], [1], [1], [1], [1], [1], [1] ]; ここで質問ですが、上記の処理をwhile文で実行したいのですが掛けても答えが変わらなくなったところでwhileからループを抜ける処理はどのように書いたら良いのでしょうか？ Perlは初心者で、行列同士の比較はwhileの条件文ではできないでしょうし、列ベクトルの要素を一つ一つ比較する方法も分かりません。 以上写真のページランクをperlで取得する方法、宜しくお願い致します。
Perlの正規表現で、「)」（カッコ閉じ）は、「(」（カッコ開け）同様メタ文字で、もし/)/のようなマッチ演算子を書いて、「)」という文字列を検索しようとすると、Unmatched ) in regexというエラーになります。 しかし、「]」（角カッコ閉じ）や、「}」（中かっこ閉じ）は、メタ文字ではなく、/]/、/}/のようなマッチ演算子は正当で、それぞれ]、}をきちんと検索するのです。 「[」（角カッコ開け、文字クラスを作る）や、「{」（中かっこ開け）はメタ文字なのに、です。 開けがこないのに閉じが来た場合、]と}はエラーにならないのに、)だけはエラーになります。 これは、なぜでしょうか。
あるCGIを組んでてアップロードしたらエラーが出ました。 もちろんInternalServerErrorでerror.logには (8)Exec format error: exec of 'ほげほげ/test.cgi' failed Premature end of script headers: test.cgi とありました。（ほげほげは気にしないで＾＾；） ぐぐって見たものの原因はわからず、簡単なcgiをアップロードしてもこのエラーが出ます。 Shift_JISで改行コードLFにしてます。 ASKIIモードにしました。 ヘッダーも入れてます。 いろんな方法を試しました。 ちなみにレンタルサーバーで、CGIはOKです。 都合上期限がやばいので、すぐに回答お願いします！
perlを勉強していて、似たような配列やハッシュの場合でしたらなんとか解決出来たのですが、以下の場合が思うような結果が得られず困っているので、どなたか教えていただきたく質問しました。 例） my $hoge1=10; my $hoge2=9; my $hoge3=8; my $hoge4=7; my $hoge5=6; my $hogehoge; for(1..5){ $hogehoge+=$hoge$_; } 上記の書き方の場合、「$hoge$_」でエラーが出ます。 このような場合は、どのように書けばいいのでしょうか。 よろしくお願いします。
初歩的な質問で恐縮ですが、以下のPerlのワンライナーを、スクリプトファイルに記述するには、どのように書けば良いのでしょうか。 perl -ne "print if ( /aaa/ ); print if ( /bbb/ ); print if ( /ccc/ );" "in.txt" > "out.txt" 下記のようにしてみたのですが、ダメでした。 perl "script.pl" "in.txt" > "out.txt" ----- script.plの内容 ----- print if ( /aaa/ ); print if ( /bbb/ ); print if ( /ccc/ ); --------------------------- 環境はWindowsのコマンドプロンプトです。バッチファイルでの使用を想定しています。 自分はPerlに関する知識が無いので、Perlに関するサイトも見てみたのですが、情報が膨大で、ピンポイントでこの問題を解決する情報を探し出す事が出来ませんでした。 やり方が分かる方がおられましたら、お教え頂けないでしょうか。
perlにてCSVファイルの中で特定の条件の時に 文字を削除する分を書きたいのですがうまくいかず困っております。 1111,11110000,4 2222,11110000,4 3333,11111100,2 4444,11000000,6 このようなデータで 3番目のフィールドを元に2番目のフィールドの文字を削除したいと思っております。 4の場合はお尻から4つの0を削除　→　1111,1111,4 2の場合はお尻から2つの0を削除　→　2222,111111,2 上記のデータですと最終的には以下のような形にしたいと思っております。 1111,1111,4 2222,1111,4 3333,111111,2 4444,11,6 お手数おかけしますがお力添えただけたら幸いです。
はじめまして、お世話になります。 内容はdata.csvを開いて$a1の値が、ban1の時に、 該当の一行を読み出して、カンマ区切りでわかれている順番に、 $a1 $a2 $a3という変数に代入して他のプログラム内で、利用できればと思いますが、 思うように値が取得できません。 下記、参考サイトなどを見ながら、 動作の部分をかいてみました。 まだ理解が浅く、見当はずれな指示があるかもしれませんが、 ご参照いただき具体的な、 ご指摘をいただければと思います。 よろしくお願いいたします。 my $dataFile = 'data.csv'; open FH,"<$dataFile" or error_msg("データファイルが開けません : $!"); flock(FH, LOCK_EX); while(<FH>){ chomp(); my@dummy = split(/,/,$_); if($a1 == $ban1) { $hoge = $_; last; } chop $hoge; ($a1,$a2,$a3,$a4,$a5,$a6,$a7,$a8,$a9,$a10,$a11) = split(/,/); } flock(FH, LOCK_NB); close FH;
初めて質問させていただきます。 Perlを使って下記のことをじっそうしたいと思っています。 □テーブルから抽出したdata.csvの中に、外字文字コードが存在するか確認する。もし存在する場合は、その行を別のファイル(output.csv)へ出力する。 Perlで下記のような構造でプログラミングしたいと思っていますが、知識が乏しいため、どなたかサンプルコードをご提供いただけますでしょうか。 □外字文字コードをもつtest.txtを一行ずつ読み込み、そちらを検索キーとして、data.csv内をgrepし、該当行があったら、output.csvへ出力する。 test.txt \x40\xB0, \x41\xB1, \x43\xB2
アクセス元の端末（たとえばスマホなのかＰＣなのか）で表示する画像を変えたいため、アクセス端末の解像度を取得したいのですがどうすればよいでしょうか？ いろいろ探してみたのですが、javascriptばかりヒットし、use Term::ReadKeyというものも出てきたのですが、その参考ページをそっくり入れてみても動作しません。 sub agent{ %agent_type = ( qr/MSIE/i => 'p', qr/iPhone/ => 's', qr/iPad/ => 't', qr/Android/ => 's', 一部省略 ); } sub browser{ &agent; my $ua = $ENV{'HTTP_USER_AGENT'}; foreach my $key(keys %agent_type){ if ($ua =~ $key){ $ua_type = $agent_type{$key}; last; } } } 上記のような環境変数で振り分けることも考えたのですが、Androidだとスマホとタブレットと解像度が大きく違うものでも同じものをはき出してしまうかと思い、正確な振り分けができず困っています。 どうかperlだけで解決できる方法がありましたらぜひ教えてください。 よろしくお願いします。
フォームメール送信の文字化けについてお教え下さい。 よろしくお願い致します。 まずは環境より申し上げます。 環境 xampp-win32-1.7.7-VC9 同封 apache2.2.21 php5.3.8 perl 同封されているもの ----------------------------- 　xmailサーバーも動いています。 内部、外部、外部から外部、ともに正常に送受信できています。 以前はANHTTPDとperlとsendまね～るで問題なく動いていましたが このたびPHPが必要になりましたので以前のperlをアンインストールしてXAMPPをインストールしました。 以前からの自作のメールフォームを設置してメールを送信すると 受付確認メールと問い合わせ報告メールのすべてが文字化けしています。 一応　文字コードはUTF-8で　mail.html、 perlプログラム、ともに統一しています。 apacheのhttpd.confの中にはAddDefaultCharset・・・の設定項目がなぜかありませんので apacheについては文字コードの設定などはおこなっておりません。 症状ですが メールフォームに入力して確認ボタンを押すと現れる確認画面は 文字化けしておりません、高崎、申す、表示という文字も化けていません。 このあと送信ボタンを押すと　メールは宛先へ正常に届きますが タイトルからすべてが文字化けで読む事はできません。 原因探しが三日くらい続き、気になって寝られません。 ひろいあつめて書いたコードですが、 よろしくお願いいたします。 # MIMEエンコード $mail_to = mimeencode($MAILTO); $mail_from = mimeencode($FORM{'name'}); $mail_subject = mimeencode($FORM{'subject'}); # 文字コードの変換 $body = jcode::jis($user_owner); # メールヘッダーの生成 $header = <<END; To: $mail_to From: $mail_from<$FORM{'email'}> Subject: $mail_subject Mime-Version: 1.0 Content-Type: text/plain; charset=ISO-2022-JP # サーバー出力 print <<END; Content-type: text/html; charset=utf-8 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"> # メールの送信 open(MAIL, "| $SENDMAIL -i -t -f $FORM{'email'}") or die("エラー：sendmailへのパイプが開けません"); print MAIL $header, $body; close MAIL; 部分的で分かりにくいかもしれませんが どなたか　どうぞよろしくお願いいたします。
perlでメールフォームを作成しています。 メールの送信にはsendmail をopen関数で使用していたのですが openはセキュリティ上の問題があることを知り、対策を調べているうちに sysopenを使用することが有効だという情報にたどり着きました。 しかし、単純にopenをsysopenに書き換え、オープンモードも設定したのですが sysopenに失敗してしまいます。 sendmail以外のテキストファイルのオープンには成功しているので sysopenの使用方法が間違っている sysopenを使用したsendmailの実行方法を教えていただけませんでしょうか？ [ソース] use Fcntl; … $sendmail = '/usr/xxx/sendmail -t -io'; … sysopen(MAIL,"$sendmail ", O_WRONLY ) or die "error!!" my $mailstr = &MAILHEADER($to,$subject); my $mailbody = &MAILBODY($fileId); $mailstr .= $mailbody; print MAIL $mailstr; close MAIL; &MAILHEADER() 　　→To,From,Subjectの設定 &MAILBODY() 　　→メール本文の設定 ・sysopen部分は今まで以下の記述で、メールの送信をしていました。 　　open(MAIL,"| $sendmail") or die "error!!" 　・念のため、-fで「/usr/xxx/sendmail」の存在チェックをおこない、 　　存在していることを確認しました。 　・sysopenの使用方法が間違っているのかと思い、以下のサンプルを作成してみましたが 　　問題なく動きました。 my $file = 'test1.txt'; sysopen(MSG,$file, O_WRONLY|O_CREAT|O_APPEND ) or die "sysopen error!!" print MSG "sysopen OK"; close MSG; サンプルが動いたことで、ますますsendmailをオープンできないことに 行き詰ってしまいました。 どうぞよろしくお願いいたします。 質問内容でわかららない部分があればご指摘ください。 可能な限りソースも載せます。
おそらく単純な事だと思われますが、 不慣れなものでお付き合いいただけますとありがたいです。 if( $hoge == $testdata){ # 条件が一致した場合の処理 } $hoge には、2 が入っています。（文字列） $testdata には、2,6,10 が入っています。（文字列） 1対1であれば、上記の記述でいけるのですが、 カンマ区切りの復数の値と一致判定する方法がわかりません。 まず、配列にして my @testdata_hairetu = split(/,/, $testdata); などやってみましたが、 その後の条件文との絡みなどで詰まっています。 復数値がある場合に一つ一つ照合（判定）していく方法をご教授いただけないでしょうか。 foreachの内部でifとかかなと調べ中です。 perlは記述方法がいろいろあるようなのですが、できれば短さよりもわかり易い方が有難いです。 どうぞよろしくお願いします。
Perlスクリプトで、以下のような置換をしようとしています。 置換前　piyo … fuga … piyo 【piyo … fuga … piyo … hoge … piyo】 fuga … piyo 置換後　【ぴよ】 … fuga … 【ぴよ】 【piyo … fuga … piyo … hoge … piyo】 fuga … 【ぴよ】 【】が入れ子にならないように、【】の外の部分でだけマッチ、置換しようと正規表現を考えていたのですが、いくらやってもできません。調べていたら、Perlでは可変長の先読み戻り読みをサポートしていないらしいことがわかりました。 正規表現一つでも、複数行のスクリプトでも構いません。どのようにすればよいでしょうか。
ファイル内の「1 2 3 4 5」などの数字の箇所を、「1回 2回 3回 4回 5回」のように、「回」をつけた形に変えることを考えています。 以下のようなスクリプトを書きましたが、うまくいきません。 # 「$search_replace」の参照先のテキストファイルの内容 (\d) タブ記号 $1回 ・ ・ EOF # 問題のスクリプト（一部） chomp($search_replace); (my $search, my $replace) = split(/\t/, $search_replace); $string[$i+1] =~ s/$search/$replace/g;　#ここが問題と思われる箇所 ほしい結果は右のとおり。「1回 2回 3回 4回 5回」 現実の結果は右のとおり。「$1回 $1回 $1回 $1回 $1回」 置換文字列の$1の部分がうまく展開（？）できないようです。 どうすればよいか、ご教示ください。
perlのfork機能を使いたい者ですが、その挙動について質問しています。 ここ数日fork機能について勉強しましたが、 その挙動がどうでしても理解できないので、質問をさせていただいています。 質問内容を具体的にするため、以下に簡単なコードを書いておきます。 #!/usr/bin/perl use strict; my $i=0; while ($i<3) { if(fork()) { print("parent hello -> $i\n"); last; } else { print("child hello -> $i\n"); sleep 3; print("child exit -> $i\n"); $i++; } } print("parent finish\n"); このコードをlinux上で起動させますと、下記の結果が得られました。 parent hello -> 0 parent finish child hello -> 0 child exit -> 0 parent hello -> 1 parent finish child hello -> 1 child exit -> 1 parent hello -> 2 parent finish child hello -> 2 child exit -> 2 parent finish ここから質問です。 上記の結果の中で自分が理解できないのは、 なぜ、「parent finish」が４回も出てくるのかということです。 自分の理解している部分では、「parent finish」はwhile loopの外にあるので、 「parent finish」をプリントするには、一度while loopを出る必要があると思います。 しかし、それが２、３回と続いてプリントされていることがなぜなのか理解できません。 理想としては、 parent hello -> 0 child hello -> 0 child exit -> 0 parent hello -> 1 child hello -> 1 child exit -> 1 parent hello -> 2 child hello -> 2 child exit -> 2 parent finish という具合に、「parent finish」を一回だけ表示させたいのですが、それは可能でしょうか？ ご教授をお願いします。よろしくお願いします。
今まで長い間、何か勘違いしていたのか、条件が2つ以上になると、 長い間このように書いていたのですが、 if( ($a%2==1 && $b==1) && ($c eq 10 && $d == 5) ) { print "ok"; } 下記スクリプトでも正常に動作しますか？ if( $a%2==1 && $b==1 && $c eq 10 && $d == 5){ print "ok"; }
IEのバージョンを10に上げたらTIFF画像へのリンクでメッセージが表示されるようになりました。 HTMLのソースは、以下のように書いています。 <a href="test.tif" target="_blank">tiff</a> ローカルのWindowsには、.tifに対してフリーウェアの画像閲覧ソフト(IfranView)に関連付けしています。 以前のバージョンのIEでは、上記のリンククリックで直接メッセージを表示することなくIfranViewでTIFF画像が開いていました。 IE10で、メッセージを表示させずにリンククリックでtiff画像が開くようにすることはできますでしょうか？ サーバー側の設定変更でも、ローカル側の設定変更でもかまいません。 Perlでtiff画像を表示するプログラムを作っています。 画像へのリンクが多く、大量の画像を確認しながら作業を進めるプログラムです。 クリックのたびにメッセージから「ファイルを開く」をクリックするのが面倒です。 ■環境 サーバー ・Perl5 ・Apache（自分に直接の権限はありませんが、業者に設定変更お願いすることできます) ローカル ・Windows7 ・IE10 ・IfranView(画像表示ソフト)←tiffが表示されるのでしたら別アプリでもかまいません。
WEBで自作mp3を公開しています。再生時にカウンタを入れています。 （各所に出ているHTMLカウンターです） カウンター自体の機能はちゃんと動くのですが、 何１０曲ものカウントが一斉に瞬時に行われているのです。再生時の時刻もIPアドレスも同じなのです。 普通に1曲1曲聞いていれば数分おきに、カウント数もバラバラになるはずですが。 何かプロバイダの検索収集かなと思うのですが、こんなのはカウントしたくないのです。 何かいい方法はありませんかね？ そういうIPアドレスを１つ１つ除外するというロジックを入れるしかないかと思っているのですが。
現在Perlでソフトの管理プログラムを作っています。 1万件くらいまではまま順調に動いていたのですが 現在1万5千件くらいになって表示的にはそこそこ高速なのですが サーバー(ドリームホストの一番安いの・・・すいませんケチで)が 月に1度程度、極端に遅くなります。 どうも私の巨大データに問題が有るようなのですが・・・ で、サーバーの負荷をすこしでも減らしたいと思っているのです。 現在、検索の場合等は、全1万5千件余りのデーターを @all_data=<DATA>; で全読みし、各行の照合作業をした後、結果を出力しています。 これを1000件ごとのファイルに分割し、 1枚目ファイルオープン→@all_data=<DATA>;→結果収集、 2枚目ファイルオープン→@all_data=<DATA>;→結果収集、 　　　　　　　　　　　・　 　　　　　　　　　　　・ 　　　　　　　　　　　・ 15枚目ファイルオープン→@all_data=<DATA>;→結果収集、 で、結果を出力 の様に変更した方がサーバー負荷(CPU使用率やメモリー消費)は 少なくなる物でしょうか? または1行づつ照合作業し、結果を出力、 と言う手も有ると思うのですが・・・。 余り詳しくないので・・・出来ましたら素人向けの回答を背宜しくお願いします。
HTMLでメールフォームを作りCGI（Perl）で次のプログラムを作りました。 #!/usr/local/bin/perl print "Content-type: text/html\n\n"; print "$mail\n"; print "$namae\n"; print "$naiyou\n"; 動作確認のためプログラムは少しにしました。何も表示されません。
#/usr/local/bin/perl print "Hello!"; と入力して実行したらエラー500が出ました。 Windows7で Active　Perl　5.16.3（x86） Apache httpd-2.0.65-win32-x86-no.ssl.msi(x86) のインストール済みです。 原因がわかりません。
%array = ( 'A' => { 　 'a' => 7, 　 'b' => 3, 　 'c' => 9, 　 'd' => 1, }, 'B' => { 　 'a' => 3, 　 'b' => 8, 　 'c' => 3, },); のようなハッシュがあったとして、値の降順、1つ目のキー昇順、2つ目のキー昇順でソートし、下のような形で出力したいのですが、どのようにすればよいのでしょうか。 A　 c　 9 B　 b　 8 A　 a　 7 A　 b　 3 B　 a　 3 B　 c　 3 A　 d　 1
Windows7(64bit)にPerlをインストールしようと思います。(CPANも利用したい) Cygwin, Active Perl, Padre など、いろいろな方法があると思いますが、おすすめは何ですか？ 将来的にMacやLinuxに機種替えをすることを射程に入れた場合を考えて、使い勝手をWindows特有の環境ではなく、なるべく汎用的なものにしたいと思うのですが、違いがわかりません。ターミナルの選択も合わせておすすめを教えていただければと思います。
CGI(Perl)でメールアドレス、名前、内容のメールフォームを作ったのですがうまくいきません。 http://homepage.biglobe.ne.jp/errorpage/500.html CGIプログラムのエラーが発生しました。 原因 CGIプログラムの実行に問題があります。 まれに、予期しないサーバのエラーが原因でこのメッセージが出る場合があります。 と表示されます。 CGIのプログラムを作る前はHTMLだけで作っていました。 <form action="mailto:メールアドレス"～ メールアドレスを非公開で送信するには。
perlで先頭の数値をみて昇順にならびかえたい。 以下のようなデータの先頭の二桁の数値をみて、昇順に行ごと並び替えをしたいです。 sort を使えば簡単にできるのでしょうか？ perlをはじめたばかりでよくわかりません。 ぜひ詳しく教えてください。お願いします
GD::SecurityImage::AC Image::Magick 上記のモジュールをactive_perlのppmでインストールしたいのですが、リポジトリがなかなか見つかりません。リポジトリ の場所をご存じでしたら教えていただけませんでしょうか。よろしくお願いいたします。 動作環境と登録済のリポジトリは以下です。 ちなみにppmはGUIを使っています。 os : windows8.1 perl : active_perl 5.16.3 登録済のリポジトリ　 : http://www.bribes.org/perl/ppm http://www.bribes.org/perl/ppm/package.xml http://log4perl.sourceforge.net/ppm http://trouchelle.com/ppm10/ http://cpan.uwinnipeg.ca/PPMPackages/10xx/ http://www.wxperl.co.uk/repository/ansi http://www.wxperl.co.uk/repository http://ftp.nara.wide.ad.jp/pub/CPAN/authors/id/H … です。 宜しくお願い致します。
LWPで別サーバーのtest.cgiに以下のようなコードで POST送信しています。 use HTTP::Request::Common; use LWP::UserAgent; $query="param1=dummy"; $ua = LWP::UserAgent->new(); $req = HTTP::Request->new(POST => "http://xxx.xxx.xxx/test.cgi"); $req -> content_type('application/x-www-form-urlencoded'); $req -> content($query); $res = $ua->request($req); $success = $res -> is_success; if(!$success){ die("error"); } $con = $res -> content; この場合、$conにtest.cgiの出力が入るだけで、 URLのhttp://xxx.xxx.xxx/test.cgiに遷移することはできません。 HTMLのformタグでPOST送信したときのように、 POSTでデータを送信してかつ、その送信先に移動するということはできるのでしょうか。 LWPでなくてもいいです。 要するにHTMLのformタグでのPOST送信を手動ではなく、自動で行いたいわけですが、 <form action="http://xxx.xxx.xxx/test.cgi" method="post"> <input type="hidden" name="param1" value="dummy"> </form> このようなタグのあるHTMLを表示して、 JavaScriptでonLoadでsubmitすればできるのですが、 JavaScriptを使っているとSSLの場合にセキュリティのアラートがでる場合があるので、 できればPerlだけでできないかと思ったのです。
jcode.plの jcode::tr() のかわりを探しています。 jcode.plの jcode::tr(\$val,'０-９Ａ-Ｚａ-ｚ　（）＿＠－','0-9A-Za-z ()_@-'); をPerl5.18.2で使用するとエラーが出てしまいます。これを回避したい。 プログラムがUTF-8であれば $val =~ tr/０-９Ａ-Ｚａ-ｚ　（）＿＠－/0-9A-Za-z ()_@-/; のようにすれば実現可能みたいですが、プログラムはEUCで書かれています。 影響範囲からプログラムの文字コードをかえることはできれば避けたい。 一文字ずつ変換することも考えましたが、この方法ではパフォーマンスに懸念があります。 jacode.plなるものもありますが、これに置き換えるだけでは文字化けしてしまいました。 jcode::tr()のかわりになるような手段はあるのでしょうか？
サンプルプログラムで Perl を勉強しているのですが、以下の「stringify」の意味がいまいちわかりません。 画像検索APIから画像URLを引いてきて、その画像をダウンロードするサンプルです。 ---- $ua->get($image_url, ':content_file' => $filepath->stringify); ---- ※http://yusukebe.com/archives/20120229/072808.html LWP::UserAgent のリファレンスを見ても、:content_file => $value と書いてあるだけで、stringfy についてはわかりません。ほか検索もしてみたのですが、でてくる結果が JSON.stringify ばかりで、それのことなのかも判断できません。 この「stringify」はどういう意味なのでしょうか。
下の画像のようのデータを一行一行みていき、先頭二桁が上の行と同じ場合それを同じファイルに一行一行はきだしたいです。 例　3,4,5行目は3.txt ファイルにはきだす。6.7行目は2.txtファイルにはきだす。その他は1.txtファイルにはきだす。 シンプルでわかりやすい方法を教えていただきたいです。 よろしくお願いいたします。
ActivePerlの初心者ですが基本的なことが分からないので教えてください。 まだ覚えたばっかりで1行入力でいろいろ書式を入力して確認しながら覚えているのですが 例えば、ネット上に 各行の最初の10文字を捨てる perl -lne 'print substr($_, 10) = ""' file というようなサンプルが記述されているのですが 実際に入力してみると 「Can't find string terminator "'" anywhere before EOF at -e line 1.」 というようなエラーが出ます。 どうも　'　が使えないようなのですが なぜエラーになるのかがよく分かりません。 この原因が分からないので試行錯誤で ' を " で行ったりして エラーを回避しながら確認しているのですが 上記のように ' と ' の中にさらに " と " がある場合には どのように回避したらよいのかがよく分かりません。 上記のような例の場合にはどのように入力すれば エラーが出なくなるのでしょうか。
WindowsXPにActivePerl(5.16.3.1603)をインストールして、 コマンドラインに「perl script.scr」と入力して スクリプトファイルは実行できるのですが、 スクリプトファイルの1行目に「#!/usr/bin/perl」を記述して、 コマンドラインに「script.scr」と入力して実行しようとすると、 「C:\・・・\script.scrは有効なWin32アプリケーションではありません。」 というメッセージが表示されて正しく実行できません。 perl.exeのあるフォルダをC:\usr\binフォルダにして、 1行目を #!/usr/bin/perl #!C:/usr/bin/perl #!C:\usr\bin\perl などいろいろ試してみましたが、どれも 前述のメッセージが表示されて実行できませんでした。 コマンドラインに「script.scr」と入力するだけで 実行することができるようにするには どのようにすればいいのでしょうか。 script.scrの拡張子scrをplなどに変更して この拡張子のファイルに対してperl.exeに関連付けることにより script.plだけでも実行できるようにはなりますが 拡張子.scrではこの関連付けができませんので #!/usr/bin/perl等を使用する方法で解決したいです。 ジャンクションとかApacheなどが全く分かりませんので これらを使わずに簡単にできる方法がありましたら教えてください。 (なお使っても分かりやすい手順があれば可です) よろしくお願いします。
Perlでcgiのページを作っています。文字コードはEUCです。 最近、IEのバージョンを８から１０にアップグレードしたのですが、 自分の作ったページが、たまに文字化けするようになりました。 IE10のエンコード設定は「自動選択」にしていますが、 自動で「西ヨーロッパ言語(ISO)」に判断されてしまいまうことがあります。 Perlのcgiの文字コードはEUCで、ソースには以下のようにEUC-JPを指定しています。 <meta http-equiv="Content-Type" content="text/html;charset=EUC-JP"> 手でIE10の文字コードをEUCに設定すれば文字化けは直るのですが、 数日経つとまた同じように文字化けで「西ヨーロッパ言語(ISO)」に自動判断されてしまいます。 metaでEUC-JPをしていればブラウザ側で自動判断してくれると思っていたのですが、違うのでしょうか？ HTMLでmeta以外に文字コードを指定するところがあるのでしょうか？
私はperlのsend mailを使ってメールを配信するシステムを作っているのですがタイ語で送ると文字化けになってしまいます。文字コードの設定などの問題なのでしょうか？
菊池と申します。 perlスクリプトで下記のような文字列を検索し、検索されたら指定したフィールドの値を変数に入れたいのですが、grepやawkを使うと、ファイル中のすべてが検索対象になってしまい困っております。 文字列検索の表現方法をご教授頂けると大変助かります。 下記へperlスクリプトの一部を記載させて頂きました、データはcsv形式です。 変数に入れる事が出来なかったので、抽出した値をファイルへ出力させています。 検索文字列＝2013/11/19,09:00:00,13:00:00 データの中味 <94>N/<8c><8e>/<93>ú,<89>ð<90>Í<8a>J<8e>n<8e><9e><8d><8f>,<89>ð<90>Í<8f>I<97>¹<8e><9e><8d><8f>,<8c>ö<8b>¤<8d>À<95>WX(m),<8c>ö<8b>¤<8d>À<95>WY(m),<95>W<8d><82>H(m),<88>Ú<93>®<95>½<8b>Ï<92>lX(m),<88>Ú<93>®<95>½<8b>Ï<92>lY(m),<88>Ú<93>®<95>½<8b>Ï<92>lH(m),<8f><89><8a>ú<92>l<82>©<82>ç<82>Ì<95>Ï<93>®<97>ÊX(m),<8f><89><8a>ú<92>l<82>©<82>ç<82>Ì<95>Ï<93>®<97>ÊY(m),<8f><89><8a>ú<92>l<82>©<82>ç<82>Ì<95>Ï<93>®<97>ÊH(m),2D<8b><97><97>￡(m),3D<8b><97><97>￡(m),<88>Ú<93>®<95>½<8b>Ï2D<8b><97><97>￡(m),<88>Ú<93>®<95>½<8b>Ï3D<8b><97><97>￡(m),<91>ª<88>Ê<83>t<83><89><83>O,<91>ª<88>Ê<90>¸<93>x,<88>Ù<8f>í<92>l<83>t<83><89><83>O<81>i<8f><89><8a>ú<92>l<81>j,<88>Ù<8f>í<92>l<81>i<8c>x<89>ú<83><89><83><93><83>N<81>j,<94>ò<82>Ñ<92>l<83>t<83><89><83>O, 2013/11/18,01:00:00,05:00:00,-68213.2327,17746.2653,2093.7982,-9999.0000,-9999.0000,-9999.0000,5.0099,-0.5989,-4.8100,16215.1100,16255.8006,-9999.0000,-9999.0000,4,0.0019,0,0,0, 2013/11/18,05:00:00,09:00:00,-68213.2273,17746.2666,2093.7872,-9999.0000,-9999.0000,-9999.0000,5.0153,-0.5976,-4.8210,16215.1061,16255.7959,-9999.0000,-9999.0000,4,0.0014,0,0,0, 2013/11/18,09:00:00,13:00:00,-68213.2256,17746.2692,2093.7792,-9999.0000,-9999.0000,-9999.0000,5.0170,-0.5950,-4.8290,16215.1030,16255.7923,-9999.0000,-9999.0000,4,0.0016,0,0,0, 2013/11/18,13:00:00,17:00:00,-68213.2236,17746.2737,2093.7682,-9999.0000,-9999.0000,-9999.0000,5.0190,-0.5905,-4.8400,16215.0981,16255.7866,-9999.0000,-9999.0000,4,0.0014,0,0,0, 2013/11/18,17:00:00,21:00:00,-68213.2306,17746.2741,2093.7672,-9999.0000,-9999.0000,-9999.0000,5.0120,-0.5901,-4.8410,16215.1015,16255.7899,-9999.0000,-9999.0000,4,0.0016,0,0,0, 2013/11/18,21:00:00,01:00:00,-68213.2308,17746.2739,2093.7882,-9999.0000,-9999.0000,-9999.0000,5.0118,-0.5903,-4.8200,16215.1017,16255.7916,-9999.0000,-9999.0000,4,0.0016,0,0,0, 2013/11/19,01:00:00,05:00:00,-68213.2221,17746.2743,2093.8062,-9999.0000,-9999.0000,-9999.0000,5.0205,-0.5899,-4.8020,16215.0968,16255.7880,-9999.0000,-9999.0000,4,0.0017,0,0,0, 2013/11/19,05:00:00,09:00:00,-68213.2140,17746.2808,2093.7982,-9999.0000,-9999.0000,-9999.0000,5.0286,-0.5834,-4.8100,16215.0870,16255.7777,-9999.0000,-9999.0000,4,0.0013,0,0,0, 2013/11/19,09:00:00,13:00:00,-68218.2472,17746.8587,2098.6543,-9999.0000,-9999.0000,-9999.0000,-0.0046,-0.0055,0.0461,16217.2238,16258.2532,-9999.0000,-9999.0000,4,0.0017,0,0,1, 2013/11/19,13:00:00,17:00:00,-68218.2538,17746.8600,2098.6633,-9999.0000,-9999.0000,-9999.0000,-0.0112,-0.0042,0.0551,16217.2263,16258.2563,-9999.0000,-9999.0000,4,0.0014,0,0,1, 2013/11/19,17:00:00,21:00:00,-68218.2603,17746.8538,2098.6473,-9999.0000,-9999.0000,-9999.0000,-0.0177,-0.0104,0.0391,16217.2349,16258.2638,-9999.0000,-9999.0000,4,0.0016,0,0,1, 　 ＜＜スクリプトの一部＞＞ #`grep "'2013/11/19,09:00:00,13:00:00'" $SS | awk -F"," '{print \$13}' $SS > $SS-2D`; #`grep "'2013/11/19,09:00:00,13:00:00'" $SS | awk -F"," '{print \$14}' $SS > $SS-3D`; `awk -F"," '\$1 ~ \/2013\/11\/19\/ && \$2 == \/09\:00\:00\/ {print \$13}' $SS > $SS-2D`; `awk -F"," '\$1 ~ \/2013\/11\/19\/ && \$2 == \/09\:00\:00\/ {print \$14}' $SS > $SS-3D`; 以上　よろしくお願いいたします。
gazou_element.txtにurlを保存していて、それらを一つずつ取り出してダウンロードするようにしようとしているのですがError:Invalid argument at C:User～～～となってしまいます。 どうすればいいかよろしければお教え下さい。 use Encode; use LWP::UserAgent; use IPC::Open2; use warnings; $file = "gazou_element.txt"; open (IN, $file) or die "$!"; my @url =<IN> ; my $time = time; for(my $i = 0; $i < scalar(@url); $i++){ my $request = HTTP::Request->new('GET', $url[$i]); my $ua = LWP::UserAgent->new; $ua->agent('Mozilla/4.0'); my $response = $ua->request($request); my $prefix = get_prefix($url[$i]); my $count = $i + 1; if($response->is_success){ open($OUT, ">","$time$i$prefix") or die("Error:$!"); binmode $OUT; print $OUT $response->content; close $OUT; }else{ } } #拡張子を取得する sub get_prefix{ my $url = shift; my $start = rindex($url, "."); my $end = length($url); my $string = substr($url, $start, $end - $start); return $string; }
下記のような文字列からhttp://.......jpや....pngなどの部分だけ抜き出したいのですがどうすればいいかわかりません。 どうすればいいでしょうか？？ <img src="http://i.yimg.jp/images/bloom/v201212/anonymous_ … width="24" height="24"> <img src="http://i.yimg.jp/images/clear.gif" alt="??????????????" width="1" height="1"> <img src="http://amd.c.yimg.jp/im_siggUafHxX5zBqYXXUl0MFuD … width="172" height="200" alt="???????????????????????????????????????????????????????" onContextMenu="javascript:return false;"> <img src="http://i.yimg.jp/images/news/cobranding/dal.gif" alt="????????????" width="170" height="40"> <img src="http://iwiz-talent.c.yimg.jp/im_siggAkAHOLx3UJ96 … alt="???????????" border="0" width="80" height="80"> <img src="http://i.yimg.jp/images/news/v2/loading_32_b_2x. … width="32" height="32"> <img src="http://amd.c.yimg.jp/im_siggdUHHiAjMx0Vtxw6UiBjX … alt="?????????????????????????????????Ф????????????"> <img src=" http://i.yimg.jp/images/evt/sochi/images/banner3 … alt="????????????????????????" width="300" height="90"> <img src="http://lpt.c.yimg.jp/im_siggOxcR1sffKraZiSLM4Tvl … alt="????????????μ???????????裲?????????Τ???"> <img src="http://lpt.c.yimg.jp/im_siggd24L.DRjsSsOFQzvcUud … alt="???Ρ???????Ф???????????????????????"> <img src="http://lpt.c.yimg.jp/im_sigg5ySCgAEx9Mr.pAnTk_BL … alt="?????????????????????Ρ?????????"> <img src="http://lpt.c.yimg.jp/im_siggbLLaxB6uLw4PgQNbIotT … alt="???????????????Τ????????????????????????????????????????"> <img src="http://amd.c.yimg.jp/im_sigg9vWalgQCOQonMxnTWgrp … alt="??????????????????????????????????????????"> <img src="http://i.yimg.jp/images/clear.gif" width="1" height="1" alt="?????????????"> <img src="http://i.yimg.jp/images/clear.gif" alt="???Υ???????????" width="1" height="1"> [Finished in 0.9s]
hello.pl というファイルに print “hello”; と、書きました。 ターミナルに perl -cw hello.pl と、入力しました。 Unrecognized character \xE2; marked by <-- HERE after print <-- HERE near column 7 at hello.pl line 1. と、メッセージが出ました。 解決方法を教えて頂きたいです。 よろしくお願いします。
Perl初心者です。 システム上の任意のプログラムを実行しようと考えています。system関数のように呼び出し元に戻っては欲しいのですが、プログラム完了までwaitしないようにしたいのです。何か良い方法はあるのでしょうか。是非、ご教授いただきたく存じます。
初歩的な質問ですが、perlでプログラムを作っているのですが困っています。 現象はinput動作のとき、TYPT=textや、input=radioで入力を待っている画面で、マウスカーソルを枠の中に入れた時点から、マウスカーソルの形が「手」の形になり、その領域で（枠の中で）マウスをクリックすると初期画面(トップのHTMLページ)に戻ってしまいます。 一方、マウスカーソルをinputの入力範囲、あるいはradioのボタンの中に移動するとマウスカーソルは「手」の形から「矢印」の形になりinput入力やボタン選択が正常に出来ます。 この状態では、マウスを正確にinput入力範囲やradioボタンをクリックしないと初期画面に戻るため、マウス操作に大変神経を使うため困っています。 ほかの人の画面を見ていると、マウスカーソルはinput領域やボタンの中に入ったときだけ有効となり、ほかのどの領域でマウスをクリックしても初期画面に戻ったりせずに、何のアクションもしません。 私はそのようなマウス制御をしたいと望んでいます。 下記は色んな部分を端折ったプログラムですが原因を教えていただきたく。よろしく、お願い致します。 ==== <HTML> <BODY bgcolor="white"> <FORM ACTION="index.cgi" METHOD=get> <DIV style="top:148px; left:50px; position:absolute; z-index:3; id="Layer1"> <DIV><TABLE border="3" width="884" height="350"><TBODY><TR> <TD bgcolor="#ffffff" height="350" valign="top"><B><FONT size="+1"><BR></FONT></B> <FONT color="#ff0000">パスワードを５桁で入力してください</FONT> 　　⇒⇒　　<INPUT TYPE=text NAME=mypasswd size=6 value=></FONT></B> </TD></TR></TBODY></TABLE></DIV></DIV> </FORM> </BODY></HTML> ===
PerlのIF文の判断式につきまして、式全体を変数にしたいのですが、うまくできません。 初歩的な質問で大変恐縮ですが、他の言語を使っている人に聞いてもできるということなので、Perlでもできるような気がするのですが、うまく動かないので教えていただけませんでしょうか。 $ifbun="index(文字列, 検索したい単語) >=0"; if($ifbun){ 　処理 } とっても簡単な式なのですが、このままですと条件式を加味しない処理結果になっています。 $ifbunの中身をそのままIFの条件式に入れると問題なく条件式どおりの結果が得られるので、プログラムは間違っていないと思うのですが、変数に入れると、条件を加味していない結果が出てきます。 どなたかお分かりの方がいらっしゃいましたら教えてください。 どうぞよろしくお願いいたします。
最近になって、自サイトをチェックしてたらおかしな事になっている事に気がつきました。 この現象は、windows7のIE10、11についてのみです。 windows7でも、google chrome、firefoxにおいては正常です。 windows8においては、全て正常です。 ロジックは、下の通りです。 $MENU.="<td><a href=\"$backurl\">HOME</a></td>\n"; if($mode eq "man"){$MENU.="<td bgcolor=\"$b_col\">";}else{$MENU.="<td>";} $MENU.="<a href=\"$cgi_f?mode=man&no=$no$pp\">HELP</a></td>\n"; これでhtmlで表示してみると。 <td><a href="../../../index.shtml">HOMEa href="./yybbs.cgi?mode=man&no=0">HELP</a></td> と言う具合におかしな表示になってしまいます。 一体なにが起こったのか、検討も付きません。 解る方、宜しくお願い致します。
ネットで無料配布されているAmigodatabaseというPerlで、データベースのサイトを作っております。 以下は、データベースの結果一覧を出力するための、default.htmlというページのソースの一部です。 print <<"<!---ＨＴＭＬ--->"; <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <HTML lang="ja"><HEAD> <link rel="canonical" href="$FORM{$SEARCH{1}{Name}}.htm"> （中略） <META name="description" content="$FORM{$SEARCH{1}{Name}} の名産果物です"> <TITLE>$FORM{$SEARCH{1}{Name}} の果物</TITLE> 上記、$FORM{$SEARCH{1}{Name}}には、 検索した際に使ったキーワードが表示自動挿入されます。 このキーワードが、例えば「りんご」だった場合に、 URLエンコードを行って、「%e3%82%8a%e3%82%93%e3%81%94」と 上記、<link rel="canonical" href="$FORM{$SEARCH{1}{Name}}">の $FORM{$SEARCH{1}{Name}}を、%e3%82%8a%e3%82%93%e3%81%94として、 つまり、<link rel="canonical" href="%e3%82%8a%e3%82%93%e3%81%94.htm"> としたいのですが、どのようなソースを書けば、実現できるのでしょうか？ どうかアドバイスのほど、よろしくお願い致します。ｍ（＿　＿）ｍ
Perlでデータベースサイトを作成しています。 通常、Perlでcgiを作成すると、動的なURLになると思いますが、それを静的なURLへ変換しています。 問題なのが、検索エンジンがクロールする時に、静的なURLと動的なURLの両方をクロールしており タイトルタグの重複が発生しています。 link rel="canonical"　で重複を解消できることは知っていますが、 諸事情によりこの機能が有効ではない状態です。 もし動的なURLになった場合に、自動的にHTMLのTITLEタグ内の最後に「★」を表示させて、 静的なＵＲＬと動的なＵＲＬとで発生しているタイトルタグの重複を解消したいと思っています。 どのようなコードを記載すれば、希望通りにできますでしょうか？ どうぞよろしくお願い致します。
Perlで、変数Aに代入された文字を変換し、変数Bに代入するプログラムを作りたいと思っています。 具体的には、「北海道」が変数Aに代入されると、「hokkaido」を変数Bに代入するというものです。 これを47都道府県全体でやりたいと思っています。 プログラムの都合上、 北海道 → 変数A → hokkaido → 変数B という流れで変換する必要があります。 具体的なソースを何卒ご教示いただければ幸いです。 お手数をお掛けいたしますが、アドバイスのほど、よろしくお願い致します。
Perlで書かれたプログラムの内容を変更せずに、 プログラムで参照するデータの一部を変更した上でプログラム実行すると、 処理どおり動作しないことが何度かありました。 その際、Perlで書かれたプログラムの内容を変更せずに 保存時刻を変更（上書き保存）すると、正しく動作していました。 そのようなことはあるのでしょうか？
http://xxx.jp/xxx/xxxxxxx/xxxxxx.cgi?cmd=s&xxxx& … 上記のようなURLがブラウザに表示されていて、末尾に「page=1」という文字がある時だけ HTMLのMETAタグのDESCRIPTIONに　page=1　を挿入したいです。 ちなみに、そのページには、以下のように DESCRIPTIONが記載されており、下記の★の部分に 「page=1」というURLの一部の文字を挿入したいと考えています。 <META name="description" content="説明文 ★"> Perl でどのように記述すれば宜しいでしょうか？ どうかアドバイスをお願い致します。 ｍ（_　_）ｍ
shellスクリプトに複数の引数を渡したいと考えています。 下記のようなperlスクリプトを兼ねる事でやりたいことは達成できました。 これをシェルスクリプトだけでやろうとしていて、ハマってしまい、やり方がわからなかったので、質問しています。 ・echo.shの中身 $ cat echo.sh echo $1 $2 ・imglist.plの中身 $ cat imglist.pl my@imglist= `ls -1 *{.gif,.bmp,.jpg,.jpeg,.png} 2>1&`; foreach(@imglist){ my@name=split /\./,$_; system("bash ./echo.sh $name[0] $name[1]"); } ・実行すると、無事echo.shに引数が２つ渡る。 $ perl imglist.pl abc1 jpg abc10 png abc11 png abc2 jpg abc3 jpg これをシェルのみでやろうとして、はまってしまいました。 以下は、パイプ処理等を使ったりしてやってみたのですが出来ませんでした。 ・awkでファイル名と拡張子に分解し、パイプで渡そうとしても何故か渡らない・・ $ ls -1 *{.gif,.bmp,.jpg,.jpeg,.png} | awk -F . '{print $1,$2}'| bash ./echo.sh ・ファイルに一旦保存し、catコマンドでパイプで渡しても駄目 $ ls -1 *{.gif,.bmp,.jpg,.jpeg,.png} | awk -F . '{print $1,$2}' > imglist.txt $ cat imglist.txt | bash ./echo.sh ・echoコマンドを使ってパイプで渡しても駄目 $ echo `cat imglist.txt` |bash ./echo.sh ・for.shというファイルを作成し、for構文でimglist.txtの中身を渡すと引数が一つずつしか渡らない $ cat for.sh for id in $(cat imglist.txt); do echo $id done $ bash for.sh tile1 jpg tile10 jpg どうやれば、コマンドライン上やシェルスクリプトだけで、今回はファイル名と拡張子という形で複数行からなる２つの引数を渡すことができますでしょうか
普段PHPerなんですがbatchの関係でperlを使用しなければならなくなり書いていたんですが、 下記のソースコードの中でINSERT INTOの部分でエラーが発生してしまいます。 最初selectしている部分はcreate tableで作っているテーブル構成と同じです。 それからサイト名に関するレコード部分は*で隠しています。 よろしくお願いいたします。 #!/usr/bin/perl use DBI; # データソース $d = 'DBI:mysql:a_anime'; # ユーザ名 $u = '************'; # パスワード $p = '************'; # データベースへ接続 $dbh = DBI->connect($d, $u, $p); $sth = $dbh->prepare("select * from tweet where tweetid BETWEEN '1' AND '21562745' limit 5"); $sth->execute; while( @row = $sth->fetchrow_array ){ $priduct_id = @row['3']; $user_url= @row['6']; $sth2= $dbh->prepare("show tables from a_anime like 'tweet_@row['3']'"); $sth2->execute; @row2 = $sth2->rows; $sth2->finish; if (@row2 != 1){ $sth22= $dbh->prepare("CREATE TABLE `tweet_@row['3']` ( `id` int(255) NOT NULL auto_increment, `userid` int(25) DEFAULT NULL, `text` text NOT NULL, `product_id` int(255) NOT NULL, `product_name` varchar(30) NOT NULL, `date` varchar(20) NOT NULL, `user_url` varchar(160) NOT NULL, `username` varchar(100) NOT NULL, `flag` int(1) NOT NULL DEFAULT '1', `rev_point` int(1) NOT NULL DEFAULT '1', `t_tweetid` bigint(255) DEFAULT NULL, `rev_id` int(10) DEFAULT NULL, `rev_flag` int(1) NOT NULL DEFAULT '0', `*****_flag` int(1) DEFAULT NULL, `res_info` int(100) DEFAULT NULL, `fav_info` int(255) DEFAULT NULL, `user_img` varchar(200) DEFAULT NULL, PRIMARY KEY (`id`), KEY `index3` (`flag`), KEY `user url` (`user_url`), KEY `t_tweetid` (`t_tweetid`), KEY `index4` (`flag`,`rev_point`,`product_id`), KEY `index5` (`flag`,`product_id`), KEY `index6` (`userid`,`flag`), KEY `index7` (`username`,`flag`), FULLTEXT KEY `index2` (`text`) ) ENGINE=MyISAM DEFAULT CHARSET=utf8"); $sth22->execute; $sth22->finish; } $sth3= $dbh->prepare("select user_url from tweet_@row['3']"); $sth3->execute; print "@row['3']\n"; print "@row['6']\n"; @row3 = $sth3->fetchrow_array; $sth3->finish; #if ($user_url != $row3){ print @row['2'] ; print "\n"; $sth4 = $dbh->prepare("INSERT INTO tweet_@row['3'] VALUES (@row['1'],@row['2'],@row['3'],@row['4'],@row['5'],@row['6'],@row['7'],@row['8'],@row['9'],@row['10'],@row['11'],@row['12'],@row['13'],@row['14'],@row['15'],@row['16'])"); print $sth4; print "\n"; $sth4->execute; $sth4->finish; } } $sth->finish; $dbh->disconnect;
#通常休診設定 $hdayfl = "./datas/hday7.txt";open (DT,"<$hdayfl");$hday = <DT>;close (DT); #重要休診日 #$regular = "./datas/regular.txt";open (DT,"<$regular");$hday = <DT>;close (DT); @HOLIDAY = split(/\,/,$hday);$SHOWHOLIDAY = "";@TPHOL = (); foreach $p (@HOLIDAY){if(index($p,"-") > 0){push(@TPHOL,"\"$p\"");}} $SHOWHOLIDAY = join(",",@TPHOL); というプログラムで現在重要休診日をコメントアウトしてるのですが、それは通常休診日と、重要休診日の二つのファイルを同時に読み込ませたいのですが、このままコメントアウトを外すと、/datas/regular.txt"　のファイルしか読み込まれなくなり、通常休診日ファイルが読み込まれなくなります 同時に、二つのファイル(通常・重要ともに）をオープンさせて読み込ませるには、何が足りないのでしょうか？ ご教示くださいませ。
perl やり始めたばかりです。宜しくお願いします。 入力ファイル data.txt があるとします。 data.txt は、 123 456 789 333 555 777 以上のようなテキストファイルといたします。このファイルを 以下の様に100分の1にして出力したい。 1.23 4.56 7.89 3.33 5.55 7.77 と言うことで、この場で教えていただきました。それが、以下です。 #!/usr/bin/perl open(IN, "data.txt") or die ; @x = <IN>; close (IN); foreach $line (@x){ chomp($line); @elms = split(' ',$line); foreach $data (@elms){ print $data/100," "; } print "\n"; } おかげ様でこれはこれで上手く動きました。そこで、出力値をファイルに 書き込みたいのです。　もちろん、以下の様な方法でファイルに 書き込めるのは判っております。 計算プログラム.pl > outfile.txt しかし、上のプログラムをベースにファイルに書き込めないかと色々と 試してはみましたが、どうも上手く行きません。 どなたか教えて頂けないでしょうか？ 宜しくお願い申し上げます。
初めまして、perl をやり初めたばかりです。作業は Linux 上で行ってます。 あるテキストファイル data.txt があります。 data.txt の中は、以下のようになっているとします。 100 200 300 400 500 600 これを読み込んで、例えば、 1 2 3 4 5 6 以上の様に各数字を百分の一にして出力したいと思ってます。 一応、色々と調べながらプログラムを書いてはみましたが 思う様に出力されません。以下そのプログラム。 #!/usr/bin/perl open(IN, "data.txt") or die ; @x = <IN>; close (IN); $ref_x = \@x; $n_data = @x; for ($i = 0; $i< $n_data; ++$i) { $$ref_x[$i] /= 100 ; print $x[$i], " "; } print"\n"; どなたか、perl にお詳しい方教えていただけないでしょうか？ 宜しくお願い申し上げます。
掲題の通りです。 よろしくお願いします。
現在、さくらのレンタルサーバにてperlスクリプトを稼動しています。 今回、さくらのレンタルサーバのメール認証がPOP before SMTPからSMTP認証(SMTP-AUTH)に変更になりましたので、perlスクリプト内で自動メール送信させるのにNet::SMTP::TLSモジュールを利用することにしました。そこで (1)SMTPサーバー名、ポート番号、ユーザー名、パスワードを設定する (2)宛先などの必要な設定をする (3)メール内容を設定する (4)メールヘッダを設定する (5)メールを送信する という流れで現在perlスクリプトを以下のように記述しました。 #!/usr/bin/perl use CGI::Carp qw(fatalsToBrowser); use Net::SMTP::TLS; use Authen::SASL; my $smtp = Net::SMTP::TLS->new($mailhost, Port => $mailport, User => $mail_username, Password => $mail_password ); $smtp->mail($from_mail); $smtp->to($tomail); $smtp->data(); $smtp->datasend($header); $smtp->datasend($message); $smtp->dataend(); $smtp->quit; 変数の値は割愛していますが、 上記のスクリプトは、POP before SMTPの時は問題なくメール送信できたのですが、サーバのメール認証がSMTP認証(SMTP-AUTH)に変更になってからは以下のようなエラーが出ます。 invalid SSL_version specified at /usr/local/perl/5.8/lib/perl5/site_perl/5.8/IO/Socket/SSL.pm line 418 何か間違いであるとか、他に必要な設定がありますでしょうか? 宜しくご教授お願いいたします。
下記のプログラムをベースにして置換を行いたいです。 use File::Basename; use File::Copy; use File::Find; use File::Path; my @filelist = (); $inputfile='C:\Users\test.txt'; $outputfile='C:\Users\test_new.txt'; open (IN, $inputfile) or die "$!"; open (OUT, ">$outputfile") or die "$!"; while(<IN>) { $str = $_; if ($str =~ / ・・・・・ ・・・・・ } print OUT $str; } close (IN); close(OUT); sub wanted{ push(@filelist, $File::Find::dir."/$_") unless ($_ =~ /^\.$/); } Perlプログラムで下記の２つのソースを一括置換しようとしてます。 (1)　paramIdとparamNameの文字列が同一の場合 <html:link styleClass="push" action="/numa.do" paramId="Id" paramName="Id" onclick="URL">ソース</html:link> (2)　paramIdとparamNameの文字列が同一でない場合 <html:link styleClass="push" action="/numa.do" paramId="Id" paramName="Name" onclick="URL">ソース</html:link> やりたいことは ・　html:linkをs:aに変換 ・　styleClassをcssClassに変換（これはわかるのですが位置の修正がわかりません。。） ・　action="/numa.do"を/numaに変換 ・　paramIdとparamNameを文字列が同一か同一でないかで分岐処理したい。 目標は以下のように置換したいです。 (1)　paramIdとparamNameの文字列が同一の場合 <s:a href="/numa?Id="%{ Id }" cssClass="push" onclick="URL">ソース</s:a> (2)　paramIdとparamNameの文字列が同一でない場合 <s:a href="numa" paramId="Id" paramName="Name" cssClass="push" onclick="URL">ソース</s:a> どうしてもこの置換ができません、、誰かぜひ教えてください。 お願い致します。
お世話になります。 以前、Windows Server 2003 にてWebサーバーを構築し、そこでPerlで掲示板を公開しておりました(社内イントラ)。 先月サーバーをリプレースしOSがWindows Server 2012となり、この掲示板を移行しようとしましたがうまくいきませんでした（OSが64bitだから？） ※元々掲示板は別の人が作成した為、私自身あまりよく分かっておりません(Perlも含め)。 なので、現状は掲示板を公開できずにおります。 新サーバーの方で新たに掲示板を作成すればよいのですが、以前使用していた掲示板に登録された内容も参照できるようにしたいところです。 <質問> 旧サーバーのC:\Inetpub\cgi-bin\log　フォルダをみたところ、cgiファイルがたくさんあり中身を見てみると掲示板に登録されていた内容でした(1件1ファイル)。 しかし、<>0 <br> <>1などが文字列の中に混在しておりました。拡張子cgiをhtmlに書き換えて開くと、改行はされるようになりますが、<>や<>0はやはり文字列に混在した状態で表示されます。 掲示板に登録されたときのように、普通に表示するにはどうやればよいのでしょうか。 ※リプレース後、旧サーバーは色々いじってしまい掲示板も開けない状態になってます。 最終的にはその表示された内容を、何らかの方法でExcel等にコピーしそのファイルをとりあえず公開できたらと考えております。 以上、ご教授の程よろしくお願い致します。
質問です。文字列の置換を行いたいのですが、まずはソースから・・・ use File::Basename; use File::Copy; use File::Find; use File::Path; my @filelist = (); $inputfile='C:\Users\test.txt'; $outputfile='C:\Users\test_new.txt'; open (IN, $inputfile) or die "$!"; open (OUT, ">$outputfile") or die "$!"; while(<IN>) { $str = $_; if ($str =~ /html:text/) { $str =~ s/html:text/s:textfield/g; $str =~ s/property/name/; $str =~ s/styleClass/cssClass/; elsif($str =~ /html:textarea/) { $str =~ s/html:textarea/s:textarea/g; $str =~ s/property/name/; $str =~ s/style/cssStyle/; $str =~ s/styleClass/cssClass/; } print OUT $str; } close (IN); close(OUT); sub wanted{ push(@filelist, $File::Find::dir."/$_") unless ($_ =~ /^\.$/); } Perlプログラムで下記のソースを一括置換します。 <html:text property="xxx" styleClass="yyy"> <html:textarea property="abc" styleClass="def" style="ghi"> 目標は以下のように置換したいです <s:textfield name="xxx" cssClass="yyy"> <s:textarea name="abc" cssClass="def" cssStyle="ghi"> しかし、上記のプログラムを実行すると <s:textfield name="xxx" cssClass="yyy"> <s:textfieldarea name="abc" cssClass="def" style="ghi"> となってしまいます。 どこをどう直せばよいのかわからないので誰か教えてください。 お願い致します！！
Perlでgrep -Aのようなことがしたいです。 ---------------grep.pl------------------------------- use strict; use warnings; #コマンドライン引数の確認 if(@ARGV != 3){ die "USAGE: \0 [num] [regex] [file]"; } #数字の読み込み my $num = $ARGV[0]; #正規表現の読み込み my $regex = qr/$ARGV[1]/; #ファイル名の読み込み my $file = $ARGV[2]; #該当行を保存する配列 my @lines = (); open my $fh, '<', "$file" or die "$!"; my @file = <$fh>; close $fh; for(my $i=0; $i<@file; $i++){ if($file[$i] =~ /$regex/){ push @lines, $file[$i]; for(my $j=1; $j<=$num; $j++){ if($i+$j < @file){ if($file[$i+$j] !~ /$regex/){ push @lines, $file[$i+$j]; }else{ last; } }else{ last; } } } } foreach my $item (@lines){ print $item; } ------------------------------------------------- ところが、正規表現がうまく読み込めません。 perl grep.pl 2 \d{4}\/\d{2}\d{2} test.txt などとしても、\d{4}\/\d{2}\d{2}の部分が機能しません。 コマンドライン引数から正規表現を指定するにはどうしたらよいでしょうか。
例えば make compile |& tee log とすると、tee のせいでmake の戻り値が得られないということに関しての相談です。 いま、perlの中で、 > $cmd = "$make compile 2>&1| tee compile.log"; > $rval = system($cmd); > if($rval){ print "Error\n"} のような使い方をしています(実際は$rval >>8 とする必要があるようです)。 上記のようにログを端末に表示し、ファイルにも落とし、かつ戻り値も利用したい、という場合、どのようにしたらよいのでしょうか。 # BASHでは echo ${PIPESTATUS[0]} で得られる、 # Perl のTee Moduleがあるなどの情報だけは発見できたのですが。。。 宜しくお願い致します。
Perlで文字列置換の業務をすることになりした。 Struts1からStruts2のJSPのタグの変換です。 (1)html:textarea property="aaa" styleClass="bbb" (2)s:textarea name="aaa" cssClass="bbb" (1)から(2)に変換したいです。 「html:textarea」が「s:textarea」に対応しており、その属性の「property="aaa"」が「name="aaa"」に対応、 「styleClass="bbb"」が「cssClass="bbb"」に対応するといった内容です。 aaaとbbbは任意の文字列 if ($str =~ /html:textarea/ ) { $str =~ s/html:textarea/s:textarea/; $str =~ s/property=\"(.+)\"/name="$1"/; $str =~ s/styleClass=\(.+)"\"/cssClass/; というように参考書を元に作成してみたのですが、変換は行われるものの、属性のpropertyとstyleClassの順番が逆だったり、ここに記載していない他の属性を間に入れたりすると変換ができません。 どなたか教えて下さい。
Perlを利用し、ファイル内の置換操作を行いたいと思います。Perlに関して全く無知なので誰か教えてください。 変換したい内容を下に記載します。 (1)html:button value="aaa" name="bbb"　c:button property="${aaa.bbb}" 　　　　　　　　　　　　　　　　　　　　　↓↓　 (2)html:button value="aaa" name="bbb"　c:button property="${aaa.bbb}" 上記の変換ではvalueとnameがpropertyになる (3)html:button value="xxx" var="yyy" 　　　　　　　↓↓ (4)c:button prop="xxx"　id="yyy" (3)に関してはvalueとvarの間に何か他の処理が入ってもvalueとvarだけを特定し、変換できるScript文にしたいです。 言葉足らずだったらすみません。誰か教えて下さい。
合致する番号のデータを抽出する方法をおしえてください perlの勉強を始めたばかりの初心者です。 下の画像のようにタブで区切られたデータです。一行で一人分のデータです。 先頭の4桁の数値がユニークで、この数値をつかって抜き出します。 0125 0251 2650 : : : 上記のように与えられた別ファイルの数値と合致する行だけを抜き出し別ファイルにはきだす方法を教えていただきたいです。 シンプルでわかりやすいもの、メモリに負担のすくないものなど複数の方法を教えていただきたいです。 説明もいただけるとありがたいです。よろしくお願いします。
perlを使い、複数行に渡る情報をdatファイルから読み込み、<form>～</form>を含むhtmlより 表示する順番を<select>～</select>にて指定し、またdatファイルに書き出しを行っています。 例として以下の様になります。 1(ID)<>1(並び順番)<>… 2<>5<>… 3<>4<>… 4<>2<>… 5<>3<>… この際に並び順番の指定の数字が被ってしまったまま送信を行ってしまうと、 そのdatファイルを使用する他スクリプト上で問題が発生するため、 並び順番の数字が （1・1・2・3・4・4・5の様に）被ってしまっても 再度降順に1・2・3・4・5～と数字を書き直す様にしたいと考えておりますが 非常に難しく、難儀しております。 並び順番の数字が被ってしまった場合にエラーメッセージを表示させ、 再度入力させる方が簡単なのかとも考えますが、 こちらもどの様にすれば良いのか、困っております。 どうぞ知恵をお貸しください。
当方perlの知識はないので困っております。 あるオープンソースのcgiを使っているのですが cgiファイルが呼び出すhtmlファイルにJavaScriptで記述された アクセス解析の記述をしたのですが、うまくいきません。 アドレスを見ると×××.cgiのままとなっており、表示するhtmlの中に JavaScriptの記述を埋め込んでいるという形になります。 <script type="text/javascript"> document.write("<img src=http://・・・/index.cgi?page=XXXX&r=" + document.referrer + ">"); </script> 最初に表示されるときはlogへの書き込みがなされないのですが 更新ボタンを押すと書き込みがされます。 この記述をヘッダーの中に入れたり、外部で呼び出したりいろいろやりましたがすべて同じような挙動になります。 cgiファイルの中身の最後の方はこうなっております。 my $tmpl = HTML::Template->new( die_on_bad_params => 0, filename => './html/' . $page ); # HTMLテンプレートにデータベースから読み込んだ情報を設定 $tmpl->param( dlid => $dlid, sid => $sid, message => "$message" ); #HTMLの表示 print "Content-Type: text/html\n\n"; print $tmpl->output(); この部分をいじってもダメでしょうか？ また、何か対策はないでしょうか。 よろしくお願いいたします。
candy-cgiのAnalyzer Type1というアクセス解析を使っております。 http://www.candy-cgi.com/ 検索エンジンのリンク元の表示がされません。 yahooやgooに関してはリンク元が「none」と表示されます。 googleに関してはリンク元はgoogleのページが開きますが検索語は表示されません。 検索エンジンの仕様が変わって検索語は解析できなくなってきているのでしょうか？ これはどのCGIを使っても無理なのでしょうか？
サンプルスクリプトのなかに use CGI qw(:cgi :form); use CGI::Carp qw(fatalsToBrowser); use Image::Magick; と書かれていたのですがuse CGI::Carp qw(fatalsToBrowser);は意味わかったのでコメントアウトしましたがuse CGI qw(:cgi :form);は何を読み込んでいるのですか?コメントアウトしても大丈夫でしょうか? イメージマジックは使うのでそのままにしてあります よろしくお願いします
お世話になります。 win7 ActivePerl 5.16.3 Apache HTTP Server 2.0 perlからエクセルファイルを読み込むプログラムを作成しています。 ---- use Win32::OLE; use Win32::OLE::Const 'Microsoft Excel'; Win32::OLE->Option(Warn => 3); eval{ Win32::OLE->GetActiveObject('Excel.Application'); }; if($@){ die "Excelが使用できません。$@"; } unless (defined $Excel){ $Excel = Win32::OLE->new('Excel.Application', sub {$_[0]->Quit;}) or die "Excelが起動できません。"; } my $Book = $Excel->Workbooks->Open("Excelファイルのフルパス") or die Win32::OLE->LastError(); $Book->Close; $Excel->Quit(); ---- 現在は単純に、開いて、閉じるだけの状態です。 ワークシートが1つのエクセルファイルは問題ないのですが、 2つ以上ワークシートがあるエクセルファイルを開くと、$Book->Closeのところで戻ってこなくなります。(ブラウザで待機中の状態) 該当のエクセルファイルは、開いた状態です(直接エクセルで開いてみると編集のためロックされていますと出る)ので、Openは出来ているような気がします。 $Book->Closeを書かなければ下に流れていきますが、 プロセスが残ってしまいます。 ワークシートが1つのときと、複数のときで違いがあるのでしょうか？
javascriptからcgiを呼び出して表示した場合、何個も同じファイルを呼び出すと以下の場合3回オーバーヘッドが発生して負荷がかかりますか？それとも同じファイルだから何回よびだしても1回の負荷ですみますか？ <script type="text/javascript" src="hoge.cgi?new=1"></script> <script type="text/javascript" src="hoge.cgi?new=2"></script> <script type="text/javascript" src="hoge.cgi?new=3"></script> 質問2 phpで同じようにすると、1回のオーバーヘッドで済むのですか？
perl 初心者です。 perl を使ってデータ整理を試みていますが、方法がわからなくて困っています。 やりたい操作は、 １、ディレクトリ内にある特定の拡張子をもつすべてのデータファイルを読み込む ２、データソート ３、データファイル名を変更せずに、ソートしたデータを出力する 例 ディレクトリに以下のデータファイルがあるとします aaa.data bbb.data ccc.data : zzz.data これらのデータファイルをすべて読み込み、中身を整理した後に aaa.txt bbb.txt ccc.txt : zzz.txt となるように、それぞれのデータの名前を変更せずに出力したいと思っています。 スクリプトのサンプルなんかがあればありがたいです。
下記URLにて入手可能なCGIを設置しましたが、 画像アップロード機能でpng形式だけアップロードできません。 以下のエラーメッセージが表示されます。 「ERROR! - アップロードできないファイル形式です」 CGI本体の設定項目も見つけられません。 アップロードできる形式とはあるのですが・・・。 imgフォルダも属性値777に設定してあります。 その他は問題なく動きます。 当方なにぶんズブのド素人で恐縮ですが問題を解りやすく ご指摘いただける方はいらっしゃいませんでしょうか？ 何卒宜しくお願い申し上げます。 CGI配布場所 http://www.minicgi.net/cgi2/list.html
perlでdb（mysql）に接続し、取得したデータを 表示させるというようなことをしたいのですが、うまく いきません。 ファイル名test.cgi mysqlのバージョンは 5.0.45で 記述は以下です。 #!/usr/bin/perl use DBI; my $dbh = DBI->connect("DBI:mysql:database, "userid", "password"); my $sth = $dbh->prepare('SELECT * FROM tablename'); $sth->execute; print "Content-Type: text/plain\n\n"; print "\n"; while(my @row = $sth->fetchrow_array) { print "$row[0]:$row[1]\n"; } $sth->finish(); $dbh->disconnect(); exit; ブラウザで確認すると何も表示されず、ログとして 以下のエラーが確認できます。 DBD::mysql::st execute failed: Table 'database.tablename' doesn't exist at test.cgi line 8. DBD::mysql::st fetchrow_array failed: fetch() without execute() at test.cgi line 11. my $sth = $dbh->prepare('SELECT * FROM tablename'); で指定したテーブルは存在しておりますし、SQL文の記述も 問題ないと思われます。 また、ファイルのパーミッションは705（755でも同様の結果）です。 perl初心者のため、どこが問題なのか検討がつきません。 ご助言いただきたく存じます。 よろしくお願いいたします！
●perl $seireki = "2013";　　　　　# 変数 #------------- $123 = "$seireki";　　　　　# 代入 $nengou = "$abc"."$123";　# 結合 #------------- $abc2013 = <<"EOF"; あいうえお EOF $abc2014 = <<"EOF"; かきくけこ EOF #------------- ●html <strong>$nengou</strong> ーーーーーーーーーーーーーーーーーーー 上記、htmlの$nengouに　あいうえお　と表示したいのですが、 2013　と表示されてしまいます。 解決法として、 $は特殊文字なので、エスケープシーケンス（¥$）をして、 $nengou = "¥$abc"."123"; にしたら、 htmlの中の$nengouは、$abc2013　と表示されてしまいます。 どのようにしたら、 特殊文字入りの文字結合を、変数として扱うようにするのでしょうか？ いろいろ試してみてもどうしても出来ません。 どなたか解決していただけますと、ありがたいです。
Image::Magickで画像に文字を書こうと思っています。 レンタルサーバーを使うので一定の制限の下でCGIを作成するとします。 ・フォントはウィンドウズのフォントでも可能なのでしょうか？ ・フォントはサーバーに単にアップロード任意のディレクトリのパスを指定しても使えるものなのでしょうか？ よろしくお願いいたします。
PerlをDBIでMySQLに接続しています。 MySQLの“country”テーブルに“name_en”カラムがあり、これをハッシュのキーにして、 下記構文で“name_jp”カラムに文字列を挿入しようとしたのですが、 ----------------------------------------- $sth = $dbh -> prepare ("update country set name_jp = \'$name{name_en}\' where id between 1379 and 1396"); ----------------------------------------- 結果は何も入りませんでした。 カラム名をハッシュのキーにするには、どう書けばいいのでしょうか？ 宜しくお願いします。
レンタルサーバ上でPerlのプログラムを作成しているの ですが、動作でよくわからないことがあるので、教えてください。 Perlのプログラムがあるサーバで動作していて、それを 他のサーバに移したのですが、正しく動作しなくなりました。 調べてみると、関数を呼んでいるところで配列の値がうまく 引き継がれていませんでした。 呼び出しの処理は次の通りです。 ●呼び出し元 ret= &SubModule(*DATA1); ●呼び出し先 sub SubModule { local(*DATA1) = @_ if @_; while(($key, $value) = each(%DATA1)) { #配列に対する処理 } #以下省略 このような処理の時に呼び出し元では配列DATA1に 値が入っているのに呼び出し先のSubModuleでは 空になりwhile文を素通りして「#配列に対する処理」 を実行しません。 いろいろ試しているうちに、呼び出し先に１つ余計な whileを入れると配列DATA1に値が入ってきました。 つまり次のように変更すると、うまくいきました。 呼び出し先 sub SubModule { local(*DATA1) = @_ if @_; while(($key, $value) = each(%DATA1)) { } while(($key, $value) = each(%DATA1)) { #配列に対する処理 } #以下省略 こうすると 「#配列に対する処理」が実行されました。 教えていただきたいのは以下の２点です。 (1)元のサーバでは問題なく動作していたのですが、 　別のサーバでは、配列の引数がうまく引き継がれ 　なくなりました。どういう原因が考えられるでしょうか。 　処理上何かまずいところがあるのでしょうか。 (2)呼び出し先でwhile文を一つ入れることで、配列の 　値が参照できるようになったのですが、これは 　なぜでしょうか。 よろしくお願いします。
CGIに関してです。 下記にて入手可能なフリーのCGIが動かなくて困ってます。 詳しい友人曰くソースが古すぎるのではないか？ ということでした。 当方所有のサーバーはロリポップレンタルサーバーで もちろんCGI設置可能です。 過去にも何点かフリーのCGIを動かしたことはあります。 本当にCGI本体の問題なのか検証できる方はいらっしゃいませんでしょうか？ CGI本体： http://www.minicgi.net/cgi2/list.html 紹介サイト（サンプル2） http://www.minicgi.net/cgi2/
http://www.tagindex.com/tool/url.htmlにあるようなURLエンコードの処理を行いたいのですが、ソースはどのようになりますでしょうか？ 下記のようなものできるのかと思いましたが、「テスト」の文字列ですと、「%83e%83X%83g」と表示されてほしいのが、「?e?X?g」となってしまいます。 お分かりの方がおられるようでしたら、ぜひ教えてください。 $str='テスト'; use Encode 'encode'; $str = encode('sjis', $str); print "$str";
行き詰まってしまったので教えて下さい。 ＜やりたいこと＞ とあるAPIからXMLファイルを取得し、解析して出力する、ということをやっているのですが、元のXMLがShift-JISでエンコーディングされており、これをUTF-8に変換して出力しようとしています。 ＜問題＞ XMLを取得して解析、取り出したいパラメータが出力できるようにはなったのですが、文字のエンコーディングが上手く行っていないためか、文字化けしてしまいます。 ＜元のXML＞ <?xml version="1.0" encoding="Shift_JIS"?> 　<test> 　　<prod count=3> 　　　<record> 　　　　<code>アイウエ</code> 　　　</record> 　　　<record> 　　　　<code>カキクケ-</code> 　　　</record> 　　　<record> 　　　　<code>ABC</code> 　　　</record> 　　</prod> 　</test> ＜XML解析用のコード＞ #!usr/bin/perl use utf8; use Encode qw/ from_to encode decode /; use Encode::Guess qw/ euc-jp shiftjis 7bit-jis /; use LWP::UserAgent; use XML::Simple; use Data::Dumper; #--XML取得部分省略 #--XMLはgetで$xmlに格納 $from = guess_encoding($xml)->name; &from_to($xml,$from,"utf8"); $XML::Simple::PREFFERRED_PARSER = 'XML::SAX::PurePerl'; $xs = new XML::Simple(); $ref = $xs->XMLin($xml); $xml =~ s/<\?.*\?>//; for($i=0;$i<=$#{$ref->{'test'}->{'prod'}->{'record'}};$i++){ 　$name = $ref->{'test'}->{'prod'}->{'record'}[$i]->{'code'}; $name = encode('utf-8',$name); print "$i : $name\n"; } ＜結果＞ 黒ダイヤに？文字で文字化けして出力される。 どなたか原因がお分かりになりますでしょうか。 よろしくお願いいたします。
例えばsijisの「、」を削除しようと思い $body =~ s/\xa4//g; とすると\xa4を含む「う」などにも作用し、\xa4を削除してしまいます。 そこで２キロバイトの文字には作用しないようにするにはどうしたらいいか考え 「う」などがあった際には\xa4を削除しないようにしたのですが その場合、例えば「う」と「、」の両方があった時に「、」を削除しなくなってしまいます。 1キロバイトの文字を削除しても２キロバイトの文字には影響しない 何かいいアイデアはないでしょうか？
シフトJIS使用時の日本語のマッチングにおいて 正確なマッチングができないことは分かっているのですが いわゆるダメ文字が含まれていないにもかかわらず マッチングがおかしいことがあります。 ちょう、きゅうなど最後「～う」で終わる言葉のマッチングさせると マッチングするはずがしないのです。 この理由は何が考えられますか？ UTF-8に変換してマッチングさせればいいのは分かっているのですが どうしてなのかという理由が知りたいので投稿させていただきました。
ファイルを読み書きする場合に使用するflockですが、closeする前に別ファイルのflockは使用できるのでしょうか？ テストしてみたところ、うまくいってるような気もするのですが、確証が持てないので質問させていただきました。 例) $file1="file1.txt"; $file2="file2.txt"; open(OUT,"+<$file") flock(OUT,2); $count1=<OUT>; open(DAT,"<$file2") flock(DAT,1); $count2=<DAT>; close DAT; $count=$count1+$count2; truncate(OUT,0); seek(OUT,0,0); print OUT "$count "; close OUT; ちょっとあえて複雑な書き方としてみましたが、上記のようにflockを使ってる最中に別ファイルのflockを使用することは出来ますでしょうか？ 参考URLでも結構ですので、どなたかよろしくお願いいたします。
例えば、下記のようなスクリプトの場合、一度画像が保存された後、ファイルサイズをを抜き出すようになります。 ダウンロード前に、ファイルサイズをあらかじめ知りたいのですがどのようにしたら良いでしょうか？ use strict; my $url = "http://img.www.goo.ne.jp/img/gh_logo.png"; use LWP::UserAgent; use HTTP::Cookies; use HTTP::Request; use HTTP::Headers; my $req = HTTP::Request->new(GET => $url); my $ua = LWP::UserAgent->new; $ua->agent( 'Mozilla/5.0 (Windows NT 6.0; rv:12.0)' ); $ua->timeout('10'); $ua->max_redirect(); $ua->cookie_jar( HTTP::Cookies->new( file => '', autosave => 1, )); my $res = $ua->request($req, "save.png"); my $file_size = $res->header("content-length"); print $file_size;
$messageの中に○○○○<br>△△△△<br>□□□□の文字列が入っています。 最初の<br>以降を削除して○○○○だけを取り出すにはどうしたらよいですか? $message2 = "$messageの改行以降を消す" の方法を教えてください!
perlで書いたCGIファイルがあるのですが、スマホ用のリダイレクトhtaccessファイルをトップディレクトリに置いた所、CGIのページが403エラーになってしまいました。 .htaccessファイルを外すと正常に表示するので、原因は.htaccessなのですが、理由が思い当たりません。 CGIのソースは出せないですが、お問い合せフォーム用のCGIです。 何かお気づきの点がありましたら助言お願い致します。 ● .htaccess(トップディレクトリに設置) <IfModule mod_rewrite.c> RewriteEngine on RewriteCond %{REQUEST_URI} !/sp/ RewriteCond %{HTTP_USER_AGENT} (iPhone|Android.*Mobile|Windows.*Phone) RewriteRule ^(.*)$ sp/$1 [R] RewriteBase / RewriteCond %{REQUEST_URI} /sp/ RewriteCond %{HTTP_USER_AGENT} !(iPhone|Android.*Mobile|Windows.*Phone) RewriteRule ^sp/(.*)$ $1 [R] RewriteBase / </IfModule> ● ディレクトリ構造 /index.html・・・トップページ /.htaccess・・・上記内容 /contact/all/index.cgi・・・403エラーになるCGI /contact/all/.htaccess・・・「Options ExecCGI」のみ記述 /sp/・・・スマホ用のリダイレクト先ディレクトリ（以下略）
tr を使って文字列を置換する時に 検索文字列や置換後の文字列のリストとして変数を使いたいのですがうまくできません。 ｔｒ はコンパイル時に変数を展開するので eval を使わないといけないという記述を見つけたのですが そこから先のやり方がわかりません。 eval "tr/$ab/$cd/"; のように書くというような記述までは見つかるのですけれど これを使ってどうすれば変換ができるのかわからないのです。 どなたか教えてください。 （初心者でごめんなさい。eval とか全然使い方がわかりません…）
お世話になります。 下のサンプルコードは、CGI.pmのperldocに載っていたサンプルを改造したものです。 #! /usr/bin/perl # # simple.cgi -- CGIフォームの実験 use CGI qw/:standard/; use CGI::Carp qw/fatalsToBrowser warningsToBrowser/; print header( -expires=>'-1d', -pragma => 'no-cache', 'Cache-Control' => 'no-cache'), start_html('Simple Script'), h1('Simple Script'), start_form, "What's your name? ",textfield(-name=>'name', -default=>""),p, submit, end_form, hr,"\n"; if (param) { print "Your name is ",em(param('name')),p, } print end_html; 改造点はheader関数にexpires、pragma、Cache-Controlを入れてみたこと、 textfieldに-default=>""を入れてみたこと、 UIと表示項目を１つに減らしたことです。 やりたいのは、上のテキストボックスに名前を入れて、submitを押した瞬間に、上のtextboxをクリアすることです。 ぼくの理解では、最初に上記のCGIがあるURLにアクセスしたときにはプログラムは全部走ってしまう、paramがゼロだからそのときは入力表示を出すだけ、 実行を押した後もう一度このプログラムは最初から走る、paramに値があるから出力が表示される、というものです。 となれば、２度目に（入力を得て）実行されるときは、headerのcache関係の項目や、textfieldのdefaultが効いて空白になりそうな気がしますが、現実には最初に入った値がそのまま動き続けます。 これをPerl側で空白になるように制御できるでしょうか。 サーバーはFreeBSD（レンタル）、Ｐｅｒｌは5.12、WebサーバーはApacheです。 クライアントはWindows7でIE9、Firefox22、Chrome28を使っています。 よろしくお願いします。
perlでファイルAから読み出した値を別ファイルBに出力させたいです。 イメージとしては -------------------------------- open(FILE,ファイルA); while(<FILE>){ my $line = "$_"; system("ls -l $line"); #←ここの結果を1行ずつファイルBに出力したい } close(FILE) --------------------------------- 上記の場合どのように記述すれば良いのでしょうか？ bashでは簡単にかけるのですが、 業務上perlを使用する必要がある為こまっております…。
for $each(@man){ 処理； } これを下記のように指定回数回したいのですが、どうすればよいでしょうか？ for ($j = 0; $j < 7; $j++){ 処理； }
---あああああああああああああ---------------- いいいいいいいいいい ううううううううううううう [2013/07/10 00:00:00] ええええ [2013/07/10 00:00:01] おおおお 上記のようなデータが複数格納されたファイルを読み込み、出力が ---あああああああああああああ---------------- 2013/07/10 00:00:00,ええええ 2013/07/10 00:00:01,おおおお となるようなプログラムをperlで実現させたいと考えていますがうまくいきません。 文字列のマッチング等試してみましたが期待する結果が得られませんでした。 ご教授よろしくお願いします。
お世話になります。 Perlの書き方について教えてください。 Perlのファイルハンドルで、昔はINやOUTやFILEのようにベアワード（裸のワード）を使っていたと思います。 ★（プログラム１） #! /bin/perl # # fh_bareword.pl use strict; use warnings; open IN, '<', 'in.txt'; open OUT, '>', 'out.txt'; while (<IN>) { print OUT; } close IN; close OUT; ★（実行例） C:\Perl\perl>type in.txt This is a pen. That is a book. C:\Perl\perl>fh_bareword.pl C:\Perl\perl>type out.txt This is a pen. That is a book. ★★★ ところが、これだとIN、OUTがグローバル名になってしまい、他のモジュールと衝突することがあるということで、myつきのスカラー変数にした方が良いと言われました。 それで、以下のように書いてみましたが、想定のように動作しません。 ★（プログラム２） #! /bin/perl # # fh_scalar.pl use strict; use warnings; open my $in, '<', 'in.txt'; open my $out, '>', 'out.txt'; while (<$in>) { print $out; } close $in; close $out; ★（実行例） C:\Perl\perl>fh_scalar.pl GLOB(0x146ea34)GLOB(0x146ea34) C:\Perl\perl>dir out.txt ドライブ C のボリューム ラベルは eMachines です ボリューム シリアル番号は 89C9-F870 です C:\Perl\perl のディレクトリ 2013/07/09 23:05 0 out.txt 1 個のファイル 0 バイト 0 個のディレクトリ 23,226,032,128 バイトの空き領域 ★★★ たぶん print $out; の部分で、私はファイルハンドル$outに$_を表示してくださいと意図していたのですが、「ファイルハンドルSTDOUTに$outを表示してください」という意図に受け取られたらしく、上記のようにGLOBのリファレンス？が表示されてしまいました。 print $out $_; と書くと、確かに正しく表示されますが、これが正しい書き方なのでしょうか。 printの後ろに来るのは出力する文字列ではなくファイルハンドルだと、正しく判断してもらえるもっと美しい書き方はあるのでしょうか。 よろしくお願いします。
お世話になります。 Unicodeの文字プロパティの使い方を学ぶために、以下のようなスクリプトをUTF-8で保存しました。 ＝＝＝＝＝＝＝＝＝＝＝＝ #! /bin/perl # # utf8_unireg.pl use 5.010; use strict; use warnings; use utf8; binmode STDOUT, ":encoding(shift_jis)"; my $str = "a:b:c:"; say join "|", ($str =~ /\p{ASCII}/g); say join "|", ($str =~ /\p{AsciiAlpha}/g); sub AsciiAlpha { return <<END; 0041005A# A-Z 0061007A# a-z END } ＝＝＝＝＝＝＝＝＝＝＝＝ 実行するとこうなります。 ＝＝＝＝＝＝＝＝＝＝＝＝ C:\Perl\perl>utf8_unireg2.pl a|:|b|:|c|: Can't find Unicode property definition "AsciiAlpha" at C:\Perl\perl\utf8_unireg2.pl line 14. ＝＝＝＝＝＝＝＝＝＝＝＝ \p{AsciiAlpha}というプロパティの作成に失敗しているようです。。 なぜか分かりますでしょうか? よろしくお願いします。
こんにちは。 掲示板をperlで作るという課題に取り組んでいるのですが、下記の部分の 動きだけがどうしても期待する動作がえられず、困っています。 なにか試した方が良い事がありましたら、ご指摘いただけないでしょうか。 プログラムの説明： POST されたコメントを data.dat に追記していくプログラムです。 ファイルハンドラから一行づつ読み込んで、行数を $count でカウントし、 『X行目&&コメント』のようにコメントの先頭に行数を表示します。 #!/usr/bin/perl $myfile = 'data.dat'; (省略) sub piyo{ open(HOGE, ">> $myfile"); flock(HOGE, 2); my $count = 1; while(<HOGE>){ $count++; }; print HOGE "$count行目&&in{'comment'}\n"; close(HOGE); }; data.dat の期待する結果は下記です。 1行目&&コメント 2行目&&コメント 3行目&&コメント ..... 実際に data.dat に書き込まれた結果は下記でした。 1行目&&コメント 1行目&&コメント 1行目&&コメント ..... 試した事１： open(HOGE, ">> $myfile"); を open(HOGE, "+>> $myfile"); した。 試した事２： while(<HOGE>){ $count = $count + 1; }; とした。 どちらでも結果に違いがありませんでした。 よろしくお願いします。
perlで、外部のCSVファイル(01_01.csv)を読み込み、「先頭の9行」とその行以降の「先頭9文字」を削除したものを [01_01_out.csv]として保存したいのですがどのようにしたらいいのでしょうか。 ご回答、よろしくお願い致します。 例） 読込ファイル：01_01.csv ---------------------------------------- AAA BBB CCC DDD EEE FFF GGG HHH 00:00:00,1 00:01:00,2 00:02:00,3 00:03:00,4 00:04:00,5 00:05:00,6 (略) 10:00:00,101 10:01:00,102 10:02:00,103 10:03:00,104 10:04:00,105 10:05:00,106 ---------------------------------------- 出力ファイル：01_01_out.csv ---------------------------------------- 1 2 3 4 5 6 (略) 101 102 103 104 105 106 ----------------------------------------
ローカルPC内で動くCGIで 特定の（固定）URLのファイルをダウンロードするようなものを作りたいのですが どのように記述すればよいでしょうか？ 参考になるHPなどありましたら教えてください。
perlの文字マッチについて「？」が含まれる場合のマッチさせる方法について教えていただきたいです。 例） $hoge="papa?no=1,mama?no=2,cat=?no=3"; $hogehoge="cat=?no=3"; $hoge =~ m/$hogehoge/i; 上記の場合、文字内に「?」がある為にマッチしません。メタ文字として判断されているのでしょうか…。 この場合、マッチさせるにはどのような方法がありますでしょうか。 一度、「?」を違う文字に変換すれば出来るのではないかと思いますが、そのままの形でのマッチを求めています。 どうかよろしくお願いいたします。
フォートランで作られたデータを、perlで作り直そうと始めました。 なんとか、perlの中で値の計算までは出来たのですが、 下記データの２フィールド目に対して積算の仕方が解りません。 awkでは、awk '{SUM += $2;printf("%s %10.4e\n", $1, SUM)}'でできましたが、 perlで中ではどのようにするのか？ 1998-04-20T16:16:00 　　6.533078e+05 1998-05-01T01:59:00　　 1.501809e+06 1998-05-05T07:20:00 　　7.202719e+05 1998-05-05T07:24:00　　 9.799618e+05 ついでに、御存じでしたら、御教授ください。 awkとperlの計算結果は全く同じにでましたが、フォートランの結果は 下記のように微妙に違ってしまう処がございます。 それは、どうしてでしょうか？ 　　 　awk,perl の結果　　　　フォートランの結果　　　フォートランの７ケタの結果 　7.202719e+05　 　　　 7.202718e+05　　　　　　7.202718１e+05　　　　　　　　 　9.799618e+05 　　　 9.799616e+05 9.7996169e+05 以上　よろしくお願い致します。
こんにちは。 私は普段はCでゴルフを楽しんでいるのですが、そろそろPerlも学ぼうと思っています。 基礎的な文法等はググれば幾らでも出てくるので、マニアックな書籍を求めています。 何かおすすめの本などありますか？
Perl でメールを１００通送るプログラムを作りました。ただし、これは実験用なので　「自分から自分へメールを１００通おくる」　というプログラムです。 for ( my $i = 0; $i < 100; $i++ ) { $body_text{subject} = $i . ":test"; &sub::mail_push( $cf{server}, $cf{account}, $cf{password}, $cf{port}, $cf{form_mail}, $mail_add , $body_text{subject}, $body_text{body_text} ); } &sub::mail_pushというサブルーチンはメールを送信するために自分が作ったものです。 うまく１００通おくれたので良かったのですが、ここでメールサーバーに溜まっているメールをみて疑問が２点浮かびました。 １）このプログラムでメールタイトルは　0 ～ 99 までの連番が頭につき、その順にメールが送られ（るハズ？）ます。しかしメールサーバー上では連番どおりにメールは届いておらずバラバラになって並んでいます。これはなぜでしょうか？ ２）単純になにかのミスだと思うのですが、これは本日（6/17）動かしているのですが、メールの日付は（6/18）になっています。なにかサーバー上のミスでしょうか？ちなみにサーバーはXREAを利用しています。
main_01.plというプログラムがあります。 これは１０分毎にバッチファイルから起動の命令が下ります。ただしプログラムの処理によっては１０分以上かかることがあります。 この時、main_01.pl がすでに起動していた場合、main_01.pl はすぐに exit; になるように組みたいのです。僕が考えた方法は、あるテキストファイルにロックをかけ、そのファイルがロック中であるならばプログラムは処理を行わずすぐに終了する、といった感じです。 ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ # タイムアウト処理 my $timeout = 5; # 排他処理 my $lockfile="lock.txt"; # 多重起動停止 （ここに　$lockfile　が書き込めなかったらmain_01.plは別に起動していることになるので起動しない。） # 排他処理開始 open(LOCK,"$lockfile"); flock(LOCK,2); # 処理開始 eval { # タイムアウト local $SIG{ALRM} = sub { die "alarm\n" }; alarm( $timeout ); # プログラムスタート print "\n◆スタート\n\n"; sleep(4); # プログラム終了 print "\n◆終わりました。\n\n"; }; # タイムアウト処理 if ( $@ ) { # タイムアウト print "\nタイムアウトしました。TIMEOUT= $timeout \n"; } else { # タイムアウトせずに正常終了 print "\n正常終了しました。\n"; } # 排他処理終了 close(LOCK); exit;
恐れ入ります。 Perlのデキスト操作で、 文字列を順不同に比較して一致率をみることはできるでしょうか。 例えば、123456 654321を比較した場合、一致率は100% 162534と234651も一致率100%という感じです。 この比較をカタカナ標記の文字列で行いたいと思っています。 よろしくお願いします。
ユーザー名とパスワードを入力してもらい、パスワードが一致していればOK、違っていればNGがでてくるプログラムを作りました。 if ( $password eq &sub_db( "SELECT password FROM login WHERE user LIKE '" . $user . "'") ) { print "OK!"; } else { print "NG!"; } ちなみに　&sub_db　というのはSQL文を実行するだけのサブルーチンです。 想定通りに動きましたが、SQL文の "SELECT password FROM login WHERE user LIKE '" . $user . "'" の '" . $user . "'" なんですが、最初はこうしてました "SELECT password FROM login WHERE user LIKE $user" これだと動きませんでした。多分シングルコーテーションで囲まなければいけない決まりがあるんだと思います。変数を文字列比較するときはこうしなければいけないのでしょうか？
【 windows7 64bit + MySQL5.5 + ActivePerl 5.16.3 】 コマンドプロンプトで直接、 c:\>ppm install DBI No missing packages to install というメッセージがでます、これは「もうインストールされてるよー」という意味だと思いますが、プログラムを実行しても、 Software error: DBD::MySQL initialisation failed: Can't locate object method "driver" via package "DBD::MySQL" at C:/usr/local/lib/DBI.pm line 808. Perhaps the capitalisation of DBD 'MySQL' isn't right. at C:/Apache2.2/htdocs/00001/shinki_data_sakusei.pl line 33. というエラーがでます。 ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ # 初期設定部分 use strict; use warnings; # エラーをブラウザに表示 use CGI::Carp qw(fatalsToBrowser); use utf8; binmode STDIN, ':encoding(UTF-8)'; binmode STDOUT, ':encoding(UTF-8)'; binmode STDERR, ':encoding(UTF-8)'; use Encode; use DBI; # プログラム開始 # ユーザ名とパスワード my $dbname = 'login_data'; my $dbhost = 'localhost'; my $user = 'root'; my $pass = 'root'; #データベースへ接続 my $db = DBI->connect( "DBI:MySQL:dbname = $dbname;host = $dbhost", $user, $pass ); if ( ! $db ){ print "エラー： $db->err $db->errstr\n"; } # 命令 my $sth = $db->prepare( "SELECT * FROM login" ); # 実行 $sth->execute; # 出力 while( my @row = $sth->fetchrow_array ){ print "@row\n"; } #データベースから切断 $db->disconnect; __END__
以下のようなCSVファイルがあります。 xxx,yyy,"z,zz",XXX,"YY,Y",ZZZ,111,222 これを、 xxx,yyy,zzz,XXX,YYY,ZZZ,111,222 の様にperlで ""内のコンマを取りたいのですが、どうしたらよいでしょうか？ xxx,yyy,z zz,XXX,YY Y,ZZZ,111,222 の様に""内コンマを別の文字に置き換えても可です。 よろしくお願いします。
「windows7 64bit に ActivePerl をいれています」 以下のプログラムを書いて実行したところ、エラーメッセージがでてきました。 Software error: DBD::MySQL initialisation failed: Can't locate object method "driver" via package "DBD::MySQL" at C:/usr/local/lib/DBI.pm line 808. Perhaps the capitalisation of DBD 'MySQL' isn't right. at C:/Apache2.2/htdocs/00001/shinki_data_sakusei.pl line 33. これはつまり、DBD：：MySQL　がないよ！という意味であると思うのですが、ppmを起動してDBDにあたるモジュールをインストールして再実行してもまだ同じエラーがでます。どうしてもwindows7上で作らなければならないので、困っています。どこか参考になるサイトはないでしょうか？ ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ use strict; use warnings; # エラーをブラウザに表示 use CGI::Carp qw(fatalsToBrowser); use utf8; binmode STDIN, ':encoding(UTF-8)'; binmode STDOUT, ':encoding(UTF-8)'; binmode STDERR, ':encoding(UTF-8)'; use Encode; use DBI; # プログラム開始 # ユーザ名とパスワード my $user = 'root'; my $pass = 'root'; #データベースへ接続 my $db = DBI->connect('DBI:MySQL:localhost', $user, $pass,); if ( ! $db ){ print "エラー： $db->err $db->errstr\n"; } # 命令 my $sth = $db->prepare( "SELECT * FROM login" ); # 実行 $sth->execute; # 出力 while( my @row = $sth->fetchrow_array ){ print "@row\n"; } #データベースから切断 $db->disconnect; __END__
すいません、初心者です。 ActivePerl を使用して MySQL にアクセスしたいです。 windows7 64bit にActivePerlとMySQLを入れ込みました。 MySQLにアクセスするためのユーザー名やパスワードは　root です。 login_data　というテーブルを適当作成しました。 実際にアクセスしてみるには、どのようなコードを書けばいいでしょうか？ ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ use strict; use warnings; # エラーをブラウザに表示 use CGI::Carp qw(fatalsToBrowser); use utf8; binmode STDIN, ':encoding(UTF-8)'; binmode STDOUT, ':encoding(UTF-8)'; binmode STDERR, ':encoding(UTF-8)'; use Encode; use DBI; # プログラム開始 # ユーザ名とパスワード my $user = 'root'; my $pass = 'root'; #データベースへ接続 my $db = DBI->connect('DBI:MySQL:localhost:login_data', $user, $pass,); if ( ! $db ){ print "エラー： $db->err $db->errstr\n"; } # 命令 my $sth = $db->prepare( "select * from test" ); # 実行 $sth->execute; # 出力 while( my @row = $sth->fetchrow_array ){ print "@row\n"; } #データベースから切断 $db->disconnect; __END__
cgi-binというディレクトリを作り、その中にcgiを設置してブラウザで開いたら、cgi-binの上のindex.htmに飛ばされました。何が原因ですか？
サイトで探してもみつからないためこちらで質問します。 タイトルの通り、どのようにしたら重複を排除するか教えてください。 また、半角に限らず全角も排除できるような方法があればそれも教えてください。 たとえば、以下のソースを例に示します。 ------------------ #!/usr/bin/perl require 'cgi-lib.pl'; require 'jcode.pl'; my $buf1, $buf2, $buf3, $buf4; $buf1 = 'aabbccdd'; $buf2 = 'ああいいううええ'; $buf3 =~ tr///cs; $buf4 =~ tr///cs; print $buf1 . '->' . $buf3, "\n"; print $buf2 . '->' . $buf4, "\n"; #end ------------------ 上記の方法は、aabbccddをabcd、ああいいううええをあいうえにするといった重複排除のつもりでしたが、結果は以下の通り ------------------ aabbccdd->abcd ああいいうう->ああいいうう ------------------ 半角だとうまくいきますが、全角だとうまくいきません。これは基本的にJCodeなど 絡めて処理する必要があるのでしょうか。 また、「あいうえあいうえ」を「あいうえ」のひとつにする方法もわかりません。 よろしくお願いします。
お世話になっております、ぷりんと申します。 当方、現在Perl言語にてCGIを作成->HTMLにて出力をしてサイト運営を行なっています。 その中で、携帯電話の利用者の一部が、「FORMタグでの投稿が反映されない」との連絡がきました。 その方はSH-01B（ガラケー）を使用しており、携帯電話のブラウザキャッシュの問題かな？と思い「携帯電話の電源を入れなおし、クッキーを有効にしてからお試し下さい」と伝えました。 しかし、現状できないようです。 そこで、キャッシュ対策にHTMLのヘッダに print "<meta http-equiv='pragma' content='no-cache' /> <meta http-equiv='cache-control' content='no-cache' /> <meta http-equiv='expires' content='0' />"; を入力したのですが、残念ながら問題の解決にはなりませんでした。 これはキャッシュが悪さをしているのでしょうか？それとも他になにか原因があるのでしょうか？ 言葉足らずかと思いますが、ご教授の程お願い申し上げます。 補足 アクセスログをとっていますが、「投稿が反映されなくなった」と連絡がきた時、その方がアクセスした形跡が見られません。
パターンマッチの勉強をしていたところ 偶然「ちょう」という言葉を以下のように書くとひっかからないことに気づきました。 なぜ「ちょう」という日本語だとひっかからないのでしょうか？ また「ちょう」がパターンマッチにひっかかるようにするのにはどうすべきなのでしょうか？ if($word =~ /ちょう/){ { &error("エラー","「ちょう」という言葉は使用できません"); }
ハッシュ変数の並べ替えをやりたいです。ただ、値の長さでソートをしたいのです。 my %tan_syouhin = ( '佐賀' => 'あいうえお', '滋賀' => 'かき', '無我' => 'さしすせそそそ', '千賀' => 'うりるら', '日我' => 'ぜるだんぽ' ); というハッシュ変数があって「値の長さ」でソートするにはどうしたら良いでしょうか？
いつもお世話になります。 ActiveState.comのActivePerl 5.14.4をwindows 8にインストールしました。 それから去年ActiveState.comから購入した（少し古い） 　Perl Dev Kit 9.2.1とそのライセンスをインストールしました。 PDKのツールたとえばPerlAPPを起動しようとすると Win32:BuildNumber not consistent with perl -v というエラーがでます。 ActivePerl は5.16.3もダウンロードできますが、やはり同じエラーです。 もう一度PDKを買いなおさないとだめでしょうか。。。 ご指導のほどお願いいたします。
Perlでの二重起動？についての疑問があるので質問いたします。 ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ （状況） １）Aというプログラムが存在し、そのAというプログラムはタスクスケジューラーによって１０分毎に起動しています。 ２）Aプログラムは全体の処理が終わるまでに通常５分の時間がかかります。処理が終わればexitで終わります。 （ちなみにAプログラムはファイル書き込みなどの排他処理が必要なフローはありません） ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ というのをふまえ、疑問点が出てきたので質問します。 例えば、あるイレギュラーな出来事が起こり、Aプログラムの処理時間が１５分に伸びてしまいました。 しかし、タスクスケジューラーは１０分間隔でAプログラムを起動させます。 このとき、オーバーした５分間だけAプログラムは二重に起動することになります。 　　　　　　　　　　０　　　５　　　　10 15 20 最初のＡプログラム　＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ 　次のＡプログラム　　　　　　　　　　　＝＝＝＝＝＝＝＝＝＝ この場合、windows7上のActivePerlは、どんな動きをするのでしょうか？ 予約みたいな形になり、最初のAプログラムが終わってから次のAプログラムが動くのでしょうか？ それとも二重起動するのでしょうか？
perlでフォロワー一覧を取りたいのですがよくわからず困っています。 こちら、 http://pplace.jp/2012/10/1058/ 参考にしてやろうとしているのですが、 使えなくなったとされる１が使えて、１．１のほうがむしろエラーになります。 http://api.twitter.com/1/statuses/followers/Twit …のID.xml →　これはOK http://api.twitter.com/1.1/friends/ids.json?scre …のID →　エラーになる {"errors":[{"message":"Bad Authentication data","code":215}]} どうやらOauthの失敗とのことですが、、、 簡単なサンプルは動きました。 ---- こちらは確認　つぶやきサンプルです ------------- use strict; use Net::Twitter; my $consumer_key = '' my $consumer_secret = ''; my $token = ''; my $token_secret = ''; my $nt = Net::Twitter->new( traits => [qw/OAuth API::REST/], consumer_key => $consumer_key, consumer_secret => $consumer_secret, access_token => $token, access_token_secret => $token_secret, ); my $result = $nt->update('Hello World'); ----------------------------------------------------- しかし、 そもそも上のようなURL（GETメソッド？）をどうやってOAuthで呼び出すのかがわかりません・・・ perldoc Net::Twitter も見たのですが、それっぽい記述はありませんでした・・・ perlでTwitter1.1のAPIのGetメソッド（？）はどうやって呼び出すのでしょうか・・・
投票cgiを設置したいのですがうまくいきません、集計を1日一回だったのを少し改造して即時集計にしました 一応動くのですが、連続投票できてしまいます。 連続投票を一定時間制限できるようにしたいのですがうまくいきません 60秒くらい間をおいてから投票できるようにできますか？ ip制限もあるみたいなのですがこれも機能してないです・・・ 改善できるなら元のソースがかなり変わってもかまいません 連続投票制限だけでも機能できればと思っています。よろしくお願いします local $times = time(); sub vote{ if($FORM{id}){ my $fl=0; if(!$CK_ref){$fl=1;} else{ if(index($ENV{'HTTP_REFERER'},index.html>=0){$fl=1;} } if($fl){ $FORM{id}=~s/\n//g; my $vote = $FORM{vt2}?1:0; open(OUT,">>vote_temp.cgi"); #時間用のログファイルに書き込み print OUT "$FORM{id}<>$ENV{'REMOTE_ADDR'}<>$FORM{vt}<>$vote<>".$times."<>\n"; close(OUT); &reset_vote if $VT_RESET < $times; my(@log_lines,%pt,%pt2,%cnt,$name,$value,%CKIP); open(IN,"vote_temp.cgi"); my @log = <IN>; close(IN); if(@log){ my $cktime = $times - 60; #60秒制限 open(IN,"vote_ck_IP.cgi"); #投票した人のIPを記録したログ while(<IN>){ my @ck = split('<>'); next if $_[1] < $cktime; $CKIP{$_[0]} = $_[1]; } close(IN); foreach(@log){ chop; my @rank = split('<>'); #ID<>IP<>評価<>おすすめ<>時間\n next if $CKIP{"$rank[0]_$rank[1]"}; $pt{$rank[0].'_'.$rank[2]}++; $pt2{$rank[0]}++ if $rank[3]; $cnt{$rank[0]}++; $CKIP{"$rank[0]_$rank[1]"} = $rank[4]; } open(OUT,">vote_temp.cgi"); close(OUT); open(OUT,">vote_ck_IP.cgi"); while(($name, $value) = each(%CKIP)){ print OUT "$name<>$value<>\n"; } close(OUT); open(IN,"log.cgi"); my @data = <IN>; close(IN); foreach(@data){ #集計処理長かったので省略 } open(OUT,">vote_bf.cgi"); open(IN,"vote_log.cgi"); while(<IN>){ print OUT $_; } close(IN); close(OUT); open(OUT,">vote_log.cgi"); print OUT @log_lines; print OUT "\n1;\n"; close(OUT); } &make_vote_ck('set'); } } sub reset_vote{ my @log; foreach my $i(1..$LAST_ID){ next if !@{$VT[$i]}; $VT[$i][18] = $VT[$i][7]; $VT[$i][19] = $VT[$i][8]; $VT[$i][20] = $VT[$i][0]; foreach my $j(0..8){ $VT[$i][$j] = 0; } push(@log,'$VT['.$i.'] = ['.(join(',',@{$VT[$i]}))."];\n"); } open(OUT,">vote_log.cgi"); print OUT @log; print OUT "\n1;\n"; close(OUT); &make_vote_ck('reset'); } sub make_vote_ck{ if($_[0] eq 'set'){ my @t =localtime($times + 86400); $VT_TIME = timelocal(0,0,5,$t[3],$t[4],$t[5]); $VT_RANK = $VT_RUI = $VT_RECO = $VT_RCRUI = $VT_COUNT = $VT_CTRUI = $VRK_CK = 1; } if($_[0] eq 'reset'){ my @m =localtime($times); $m[4] += 1; if($m[4] > 12){ $m[4] = 1; $m[5] += 1; } $VT_RESET = timelocal(0,0,2,1,$m[4],$m[5]); $VT_RANK = $VT_RECO = $VRK_RS = $VRK_CK = 1; } if($_[0] eq 'restore'){ $VT_RANK = $VT_RUI = $VT_RCRUI = $VT_RECO = $VT_COUNT = $VT_CTRUI = $VRK_CK = 1; } open(OUT,">vote_ck.cgi"); print OUT "\$VT_TIME = '".$VT_TIME. "';\n"; print OUT "\$VT_RESET = '".$VT_RESET. "';\n"; print OUT "\$VT_RANK = '".$VT_RANK. "';\n"; print OUT "\$VT_RUI = '".$VT_RUI. "';\n"; print OUT "\$VT_RECO = '".$VT_RECO. "';\n"; print OUT "\$VT_RCRUI = '".$VT_RCRUI. "';\n"; print OUT "\$VT_COUNT = '".$VT_COUNT. "';\n"; print OUT "\$VT_CTRUI = '".$VT_CTRUI. "';\n"; print OUT "\$VRK_CK = '".$VRK_CK. "';\n"; print OUT "\$VRK_RS = '".$VRK_RS. "';\n"; print OUT "\$LAST_ID = '".$LAST_ID. "';\n"; print OUT "\n1;\n"; close(OUT); }
楽天のあす楽で「紅茶」と検索すると 「紅茶」の部分は「%E7%B4%85%E8%8C%B6」とUTF-8にエンコードされます。 http://search.rakuten.co.jp/asuraku/mall/%E7%B4% … これをUTF-8の「%E7%B4%85%E8%8C%B6」ではなく、 EUC-JPの「%B9%C8%C3%E3」を使って検索する方法はないでしょうか？ 「http://search.rakuten.co.jp/asuraku/」で始まるURLでなくても結構です。 あす楽の検索ができれば、どんなURLでもOKです。 分かる方がいらっしゃいましたら教えてください。 よろしくお願いいたします。
wiin8にIISとPerl64をインストールしました。「Default Web Site」を「C:\wabs」に設定。 ｔｓｔ.cgi #!/usr/local/bin/perl print "Content-Type: text/html", "\n\n"; print "<HTML>\n"; print "<BODY>\n"; print "こんにちは！<BR>\n"; print "</BODY>\n"; print "</HTML>\n"; で、無事に動いてると確認したのですが、 C:\wabs\lib\jcode.pl を設置して、 require './lib/jcode.pl'; として、実行すると ERROR = Can't locate ./lib/jcode.pl in @INC (@INC・・・・ と、 パスが通っていないようなメッセージが出て、解決策が解らず困っています。 どなたか、解決策を教えてください。よろしくお願いします。
perlを勉強中の初心者です。 以下のような入力ファイル(csv)があった場合、特定のフィールド(この場合"0")を参照して、その数字を元に、出力ファイルには、参照したフィールドからデータ書き込むプログラム方法を教えてください。 ---入力ファイル 0,a,b,c 1,d,e,f 2,g,h,i 10,w,s,x ---出力ファイル 0,a,b,c ,1,d,e,f ,,2,g,h,i ,,,,,,,,,,10,w,s,x
perl5.8.8を使っています。 日本語にマッチする正規表現を書きたいのですが、どうしてもマッチしません。 例えば、以下のファイルtest.txtから「さしすせそ」だけを抽出し、表示させたいです。 ---------test.txt-------------------------------- あいうえお かきくけこ さしすせそ たちつてと -------------------------------------------------- ----------test.pl-------------------------------- use strict; use warnings; open(FILE, 'test.txt') or die "$!"; my @file = <FILE>; close(FILE); foreach my $line (@file){ if($line =~ /^さ/){ print "$line\n"; } } ------------------------------------------------ このtest.plを実行しても「さしすせそ」を抽出することが できません。 どうしたらよいのでしょうか? 自宅の新しいバージョンのperlだとできるのですが 会社のperlは5.8.8で顧客環境でもあるのでバージョンアップも できません。 すみませんが、よろしくお願いいたします。
ファイル内のデータの並び替え処理したく、質問します。 データは、１列目に通し番号、２、３、４列目にデータが入っています（下に例を書きます）。 ５行ごとに５つの行のデータをまとめたいのです。 具体的に言うと、「１、６、１１、１６、２１行目」のデータをまとめて１行（タブ切り）に。新しい行には、真ん中の数字「１１」を先頭列に入れたいです。 それをずらしてゆき、「２、７、１２、１７、２１行目」のデータを１行に、、というようにしたいのです。 扱うファイルの行数は、様々です。 これを統計処理を行う予定です。perl初心者ですので、トライした思案策を載せても参考にならないかと思い、０から教えて頂く形になりますが、よろしくお願いします。 1101010 2202020 3303030 4404040 5505050 6101010 7202020 8303030 9404040 10505050 11101010 12202020 13303030 14404040 15505050 16101010 17202020 18303030 19404040 20505050 21101010 22202020 23303030 24404040 25505050 出来上がりは、 11 10 10 10 10 10 10 10 10 10 12 20 20 20 20 20 20 20 20 20 というようになります。
PerlのImage::Magickで、画像の加工を行っています。 バージョンは下記です。 ＝＝＝＝＝＝＝＝＝ Perl 5.6.1 Image::Magick 5.42 ＝＝＝＝＝＝＝＝＝ iPhone画像の向きがおかしくなってしまうので、正しい画像の向きに変更したいのですが、 $img->AutoOrient(); を使えばいい事はわかりましたが、バージョンの違いによって、使用できませんでした。 都合上、上記のImage::Magickのバージョンは変更できません。 AutoOrient以外で記載したバージョンでも画像を正しい向きに変更する方法はありますでしょうか。
以下のスクリプトでわからなくて困っています。 [A] 以下のスクリプトでサーバー上の同じディレクトリーにダウンロードが可能です。 use LWP::Simple; my $url = 'https://ドメイン名/samples/10000.mp3'; ## DOWNLOAD FROM URL!! my $file = '10000.mp3'; getstore($url, $file); ------------------------------ [B] 以下のスクリプトでPCのローカルフォルダにダウンロードが可能です。 my $path = "samples/10000.mp3"; ##PATH_TO_FILE my $file = "10000.mp3"; print "Content-Type:application/octet-stream; name=\"$file\"\r\n"; print "Content-Disposition: attachment; filename=\"$file\"\r\n\n"; open( FILE, $path ); while(read(FILE, $buffer, 100) ) { print("$buffer"); } ------------------------------ フルパスの URL を指定してローカルPCにダウンロードさせるにはどうしたらいいのでしょうか？
下のテキストをグループ別でabc順にソートしたいのですが AG tanaka abe kaneda BG hayama oota endou CG kawai gennda hirata そのままsort関数を使用し、ソートをするとAG,BG,CGもソートされてしまい、さらに名前もAG,BG,CG関係なしにソートされてしまいます、 AG,BG、CGを動かさず、中身だけをソートする方法はないでしょうか？
.cgiのスケジュール管理システムを編集中です(perlと連動)。 自分自身が作ったものではなく引き継ぎでやっております。 現在管理確認/表示画面にて 月曜～土曜日までしかなく、日曜日だけ日付けも曜日も存在しません。 日曜日をがおそらく省かれていてる(非表示にされている)状況です。 これは今まで日曜日が定休日だったからです。日曜日も営業日として追加するのが目標です。 日曜日を表示さすのはどうしたらいいのでしょうか？ .cgiは初心者のため。。。何十時間かけて調べたりいじってみたのですが、理想の答えもどれだけ調べても見つからず、 自分で触ってもどうにもならずもうお手上げです。。。 色々調べていたら「$en」で非表示にするやり方がある事を知り、 編集しているcgi内に探しましたがこのようなものはありませんでした。。。 おそらく違う方法で日曜日が非表示になっているかと。。。 ＊ログイン後、管理設定では日曜日も表示され、予定を入れる事が出来るのですが、 実際の確認画面には表示されません。 ちょっと説明不足かもしれませんが。。。。 よろしくお願い致します。
恐れ入ります。 Perlで、フォームから送信して、変数に代入したいのですがうまくいきません。 print qq!<form action="./xxx.cgi" method="get">!; opendir(DIRHANDLE, "./xxx"); foreach(readdir(DIRHANDLE)){ next if /^\.{1,2}$/; print qq! <input type="checkbox" name="$_" value="$_"> <input type="submit" value="送信"></form> とし、ディレクトリ内のフォルダ名をnameに格納してxxx.cgiへ送信します。 xxx.cgi側では、 #!/usr/bin/perl use cgi; $form = CGI->new; として、送信されたデータを次々と代入したいのですが、どのようにしたらよいでしょうか。
あるWebシステムで、エラーログに「Malformed UTF-8 character」が大量に出力されています。 意味はわかるのですが、どんな文字列がエラーになっているか分からないので、デバッグできず困っています。 # 全てのアクセスで必ず通るロジックなので、入力文字列を無条件にダンプするわけにも行きません。 もし、「Malformed UTF-8 character」になる見込みの文字列だけダンプするなど、効率的なデバッグ手段があれば、教えていただけますでしょうか。 よろしくお願いいたします。
【できていること】 Cookieの発行 Cookieへのデータの書き込みと参照 【ここから質問】 ログイン認証があるWebアプリケーションにおいて、セッション情報（ID）とユーザ情報はどのように紐付けているのでしょうか？ （ログイン成功時に生成するセッションIDとユーザ情報の紐付け情報をどこにどのように保持するのかがわかりません） Cookie（クライアント側）はセッションIDのみを保持しておいて、サーバ側で紐付け情報を保持するのだと思うのですが、CGI::Sessionではセッション生成時に作成されるcgise_XXXXファイルに書き込むのでしょうか？（そのメソッドか、具体例があれば教えてください） それとも紐付け専用のテーブルを用意しておくのでしょうか、もしくは、ユーザ情報のテーブルにあらかじめセッション情報を格納するカラムでも用意しておくのでしょうか。 よろしくお願いします。
perlの初心者です。 cshスクリプト内に、perlの１ライナースクリプトを入れて、文字の置き換えをしたいのですが、 記述の仕方が解りません教えてください。 【詳細】 テキストファイル内は、下記のようなデータが入っており、perlの1ライナーで文字列が ５フィールドのみMIYAKE_ILFをMIYAKE_ILFU　 MIYAKE_HFをMIYAKE_HFU　MIYAKE_LFをMIYAKE_LFUへ置き換えて、それ以外はそのまま出力したいのです。 130325.142626.281 #p 130325.142627 MIYAKE_ILF tanaka 130331.012203.576 #p 130331.012210 MIYAKE_HF tanaka 130428.132805.796 #p 130428.132809 MIYAKE_LF tanaka 130419.163411.369 #p 130419.163411 MIYAKE_HF tanaka　 #f 13 04 19 16 34 10.565 34.08739 139.52408 1.377 0.2 0.018 0.020 0.042
perl勉強中です HTMLフォーム(cgiのテンプレ)からtest.cgiに送信してmysqlにテキストを登録や取得はできました 1つのtexteraが長いため表示を1ページにtextera一つにしています カラム10まで同じテンプレで登録するのにフォームの切り替えをすることはできますか？ test.html（HTMLのフォームのテンプレ）を10個も作るのは効率が悪いきがします 繰り返し処理でやりたいのですが素人なのでピンときません、部分的でもいいのでお願いします mysqlのカラムは作ってあるものとします 例えば、htmlページの<input type=submit value="カラム2">をクリックするとtest.cgiに送信されて、もう一度、同じフォームのページを表示、しかし、カラム2への登録フォームになっているみたいな感じです
【PerlでHTTPヘッダの最後の\nを１つでも外すとエラーになります】 初歩的なことですみません。 HTTPヘッダーの最後の\n\nなんですが、ヘッダーの文字列の後に改行が２つ？？　と思って この\nを外して、 print "content-type:text/html;charset=utf-8";　とすると、「500 Internal Server Error」 print "content-type:text/html;charset=utf-8\n";　と\nが1つでも　「500 Internal Server Error」 となります。 「\n\n」と２つあればエラーにはならないんですが、なぜ必ず２つ必要なのでしょうか？これは改行が２つって意味ですかね？ print "<html>\n"などの\nはソース上やコンソール出力結果上での改行なのはわかります。 この\nは改行したくなければ書かなくてもエラーになりませんよね。（当たり前ですが・・ #!/usr/bin/perl print "content-type:text/html;charset=utf-8\n\n";　←HTTPヘッダーの\n\n print "<html>\n"; print "<body>\n"; print "<p>テキスト</p>\n"; print "</body>\n"; print "</html>\n";
while( <$_old> ){ if( $_ =~ /^$var\:(?!\*RK\*)/ ){ print "A\n"; }else{ print "B\n"; } } 上記の上から2行目の if( $_ =~ /^$var\:(?!\*RK\*)/ ){ において、 ()の中の先頭に ?!　とあるのですが、 これはどういう解釈なのでしょうか？ ご助言ご鞭撻の程宜しくお願い致します。
以下のコードを実行すると ab が出力されますが理由が分かりません。 if('aabc' =~ /a(.*?)c/){print $1;} $1の部分は最短マッチなので期待値としては b が帰ってくるべきだと思うのですが、 何故このようなことになるのでしょう。（最短マッチは後方のみ有効?） 暇な方よろしくお願いします。
test.txtのファイルの中に以下のコメントがはいっています。 --- test.txt（置換前） 各URLは以下の通りです。 (1)hoge.com (2)hoge123.com (3)hoge222.com --- ファイルの中のhoge.comはそのままで、以下のようにその他の文字は他の文字に置換を行いたいと思ってます。 --- test.txt(置換後) 各URLは以下の通りです。 (1)hoge.com (2)abc.com (3)abc.com --- 指定した文字(hoge.com)を置換する方法は簡単に行えるのですが、指定した文字以外の文字を置換する場合、どのように書けばいいでしょうか？ どなたかよろしくお願いします。
timelog.txtのファイルの中に、[時:分:秒,不特定数値]が入っている状態で、 [00時]台が検出された場合にその前にある23時台で始まる行だけをtimelog_yesterday.txtで出力したいのですが どのようにしたらいいでしょうか？ 例） timelog.txt ------------------------------ 23:58:00,-2 23:59:00,-1 00:00:00,0 00:01:00,1 00:02:00,2 00:03:00,3 00:04:00,4 ------------------------------ ↓ timelog_yesterday.txt ------------------------------ 23:58:00,-2 23:59:00,-1 ------------------------------ timelog.txt ------------------------------ 00:00:00,0 00:01:00,1 00:02:00,2 00:03:00,3 00:04:00,4 ------------------------------ また、この時[00:]で始まるものがない場合はそのままにしたいです。 例） timelog.txt ------------------------------ 00:00:00,0 00:01:00,1 00:02:00,2 00:03:00,3 00:04:00,4 ------------------------------ ↓ timelog.txt ------------------------------ 00:00:00,0 00:01:00,1 00:02:00,2 00:03:00,3 00:04:00,4 ------------------------------ お手数をお掛けしますが、ご教授いただけると幸いです。 よろしくお願い致します。
ブラウザ上のinputタグ内で指定された日時に、サーバー上で処理を実行させるプログラム（Perl）ができないか考えています。 (1)最大指定時間 指定した日時と、入力した日時の差分をとり、ミリ秒に変換してsleep関数で処理しようとおもいつきました。この場合、設定可能な最大日数などがお分かりになる方はいらっしゃいますか？ (2)　(1)以外でいい方法はありますか？ちなみにサーバーはUNIXでサーバー設定の知識は0の初心者です。 どなたかお願いいたします。
PerlでMySQLのデータベース内のテーブル一覧を取得することはできますか？ 自分で以下の様なサブルーチンを作りましたが、返り値に何も入っていませんでした。 コマンドラインでもshow tables;で確認したのでテーブルは確実に存在します。 接続も showでfetchrow_arrayなどは使えないのでしょうか？ またselect文でテーブル一覧を取得する方法がありましょうか？ Error: failed to connect to DB.とは出てこないので、接続も成功しています。 sub mysql_tablesGet{ my @data=@_; my $db_id = $data[0]; my $db_password = $data[1]; my $dbh = DBI->connect("dbi:mysql:dbname=".$ftp_id.";host=$mysql_host", $db_id,$db_password) or die "$!\n Error: failed to connect to DB.\n"; my $sth = $dbh->prepare("show tables;"); $sth->execute; my @response; my $i=0; while(my @var = $sth->fetchrow_array){ my ($table_name) = $var[0]; $response[$i] = $table_name; $i++; } $dbh->disconnect; return @response; } MySQLのログはこんなのが出ています。 130406 17:11:44 70 Connect test2@192.168.11.22 on test2 70 Query set autocommit=1 特にエラーは出ていないので、show tables;は成功していると思います。
一般的なソケットの接続は次のような書き方になっていると思いますが、connectでundefが帰って来た時にdieではなく、別の接続先に接続するような書き方を探っています。 connect(ファイルハンドル, 接続先) || die; 上記のコードを次のように書き換えてみましたが、接続先1で失敗した場合、接続先2に接続されるかと思いきや、そのままdieしてしまいます。 connect(ファイルハンドル, 接続先1) || connect(ファイルハンドル, 接続先2) || die; この書き方はどこがまずかったのでしょうか。 また、想定通りに動作させるにはどのように書いたら良いのでしょうか。 Perl初心者で大変恐縮ですが、何卒宜しくお願い致します。
perl の正規表現について質問いたします。 末尾に記載したスクリプトを実行すると、入力中(__DATA__)の --- <subheadword>ccccc</subheadword> <p>ccccc</p> <p type="A">ccccc</p> <p type="B">ccccc</p> <p type="A">ccccc</p> <p type="B">ccccc</p> --- が、正規表現中の --- ( <subheadword>.+?</subheadword>\n <p>.+?</p>\n <p\stype="A">.+?</p>\n <p\stype="B">.+?</p>\n )+ --- の部分にマッチしてしまいます。 なぜマッチするのか、どなたか教えていただけませんでしょうか ---ここから末尾までがソース--- use strict; local $/ = "</dic>\n"; while (my $block = <DATA>) { if ($block =~ m{ <dic>\n <headword>.+?</headword>\n ( <subheadword>.+?</subheadword>\n <p>.+?</p>\n <p\stype="A">.+?</p>\n <p\stype="B">.+?</p>\n )+ </dic>\n }x) { print STDERR "NG\n"; } else { print STDERR "OK\n"; } } __DATA__ <dic> <headword>AAAAAA</headword> <subheadword>aaaaa</subheadword> <p>aaaaa</p> <p type="A">aaaaa</p> <p type="B">aaaaa</p> <subheadword>bbbbb</subheadword> <p>bbbbb</p> <p type="A">bbbbb</p> <p type="B">bbbbb</p> <subheadword>ccccc</subheadword> <p>ccccc</p> <p type="A">ccccc</p> <p type="B">ccccc</p> <p type="A">ccccc</p> <p type="B">ccccc</p> </dic>
perl5.8でFormから送られてきたデータを取得し、整理しています。 FormはPOSTでperlに送り、データを整理したのですが、checkboxで複数のデータを送ったとき、うまく処理されていません。 Formのあるページも同じperlでcgiページを作り、エラーがあった場合、エラーメッセージ付きで再度そのcgiページを表示するようにしています。 次の内容で、@noにcheckboxで選択した番号が入るようにしています。 valueには　-　が余分にありますが、これは試しにcheckboxで複数選択してデータをsubmitしてみたところ、受け取り先の$in{no}で番号が連続して1つのスカラーで連なるので、番号を後に分割するために-を入れ、受け取り後、@no = split(/-/, $in{no});でばらして@noに番号を格納してあります $r_noは別のデータから受け取った比較先の番号です Formのcheckboxの部分は（実際はこれを複数回ループして$r_noが変化します） my $checkbox; foreach my $l (@no){ my $i = 0; if($l == $r_no){ $i = 1; } if($l == $r_no){ $checkbox = "<input type=\"checkbox\" name=\"no\" value=\"$r_no-\" checked>"; last; }else{ $checkbox = "<input type=\"checkbox\" name=\"no\" value=\"$r_no-\">"; } } print "$checkbox"; ２つ以上checkboxを選択して、わざとエラーが出るように他の部分を間違った選択をするようにして試してみたところ、@noには選択した分だけの番号が格納されているにもかかわらず、 if($l == $r_no){ の部分が真になるのは1つ目の@noとの真偽だけで、2つ目以降は本来真になるべき比較でも偽になってしまいます。 改行コードなどが入っているのかと思い、chompで後ろを削ったり、$l =~ s/\r?\n/K/g; $l =~ s/\r/K/g;で改行コードを可視化して確認してみましたが、それらしきものも入っていませんでした @noには選択した番号全てが収納されていますし、後ろに改行コードなど不要なものも入ってないのに真偽の分岐がうまくいかない原因は何にあるのでしょうか？ 思い当たるものは一通り試したのですが、どうしてもわかりません。 「これが原因かも？」みたいな可能性だけでも結構ですので教えてください。 よろしくお願いします。
perlでのセッション管理を学びたいです。 わかりやすく解説されたサイトなどがありましたら教えてください。 よろしくお願いします。
たとえば、 $out[0] = "いぬ"; $out[1] = "もりくぼしょうたろう"; $out[2] = "うさぎさん"; $out[3] = "からす"; $out[4] = "ねこ"; という @out を用意して以下のようにすると、 my @sorted = sort { length($b) <=> length($a) } @out; 長さでソートが行われます。おそらく長い順に並び替えが行われるので $sorted[0] = "もりくぼしょうたろう"; $sorted[1] = "うさぎさん"; $sorted[2] = "からす"; $sorted[3] = "いぬ"; $sorted[4] = "ねこ"; となると思います。 ここからが質問なのですが、 @out の他にもうひとつ @out と同じ数の変数を用意して、 $out_hitokoto[0] = "わんわん"; $out_hitokoto[1] = "いくぜ！相棒！"; $out_hitokoto[2] = "ぴょんぴょん"; $out_hitokoto[3] = "カァーカァー"; $out_hitokoto[4] = "にゃにゃーん"; @out_hitokoto は @out と対応しています。しかし、@outをソートすれば、 対応している@out_hitokotoも並べ替えを行わなければなりません。 ハッシュ変数はある事情から使えません。 なにかよい方法はないでしょうか？ できれば、 my @sorted = sort { length($b) <=> length($a) } @out; の次の文章で@out_hitokotoに変化を起こさせたいのですが。 みなさんは、どうしますか？
Perl5.8でCSVをダウンロードできる仕組みをつくっています。 utf-8でコードを記述しているため当然ながらダウンロードしたCSVデータもutf-8です。 しかしながらエクセルでダブルクリックで開く場合どうしてもutf-8だと支障があるため、 shift-jis(もしくはcp932)で開きたいのです。 ダウンロード時に文字とファイルをshift_jisに変換する方法はございませんでしょうか？ 以下作成済みのコード ------------------------------------------------------- if(!open(OUT,"$CSV_FILE")){&error('CSVデーターファイルがありません'); } else{ @csvdata=<OUT>; close(OUT); } foreach(@csvdata){ $downloaddata .= $_; } print "Content-Disposition: attachment; filename=$CSV_FILE_NAME\n\n"; print $downloaddata; exit; ------------------------------------------------------- 何卒よろしくお願いいたします。
下記、PERLスクリプトを Windows 7＋ActivePerl　+　UTF-8記述状態 で使いたいのですが、どうやら、「爱」が正常に変換されず、?という文字が発生しファイルの作成ができないようです。 普通に、Windows 7上で、$titleの爱愛aiをコピーしてファイルの作成はできるので、Perl上でもこの動作を何とか実現させたいのですが、どのようにすればいいでしょうか？ ---test.pl(utf8記述)--- use strict; my $title = "爱愛ai"; # 念のためURLエンコードした物も書いておきます＞%E7%88%B1%E6%84%9Bai use Encode; Encode::from_to($title, "utf8", "cp932"); open(F,">$title"); print F $title; close(F); open(F,">title_test.txt"); print F $title; close(F); -------------------------------
インターネット上の情報を参考に作成したCGIでPerlのソケットを用いて通信を行っておりますが、CGIが呼び出されるたびに以下のような動作を行っております。 ソケット生成 -> ソケット接続 -> HTTP通信 -> ソケット切断 このうち、ソケットの接続におおよそ200ミリ秒ほどかかり、このレイテンシを減らすため、ソケットはCGIが呼び出されるたびに生成、接続するのではなく、最初からセッションを張った状態で、CGIが呼び出されるとHTTP通信部分のみを行うようにすることはできますでしょうか。 現在試したこととして、1回目の呼び出しでソケットをクローズせずに処理を終了し、2回目でソケットの生成、接続をせずに直接HTTP通信をしようとしてもうまくいきませんでした。 Perl、ネットワークプログラミング初心者なもので恐縮ですが、何卒よろしくお願いいたします。
ここのページを参考にuse Socketでホームページを読み込むスクリプトを作りました。 http://ash.jp/perl/socket_http.htm httpは問題なく読み込めるのですが、httpsのページが読み込めません。 以下のように'http'を'https'に変更してみたのですが、エラーになります。 $port = getservbyname('https', 'tcp'); ■エラー Your browser sent a request that this server could not understand. Reason: You're speaking plain HTTP to an SSL-enabled server port. Instead use the HTTPS scheme to access this URL, please. ---- use Socketではsslのページを読めないのでしょうか？ Perlでsslのページを読む方法はありますでしょうか？
Perl初心者です。 １～８のうちの数字のランダムな並び変えと、その中から以下の条件で数字を６つ選びたいのですが、方法が分からず、ご教示いただければ幸いです。 やりたいのは、 １）１～８から６つの数字を選びたい。 ２）数字のうち、６，７，８は１つしか選ばれないようにして、かつ３番目か４番目に入るようにしたい です。 たとえば、 2,3,6,1,4,5（6が選ばれて3番目に） 4,5,3,8,1,2（8が選ばれて4番目に） 1,3,7,2,5,4（7が選ばれて3番目に） 等の結果が得られることを期待しています。 ちなみに、単純に８つの数字のランダムを作るときは以下のように記述していました。 可能であれば、これにどう追記したら上記のことが実現できるかご教示いただけると嬉しいです。 どうぞ宜しくお願いいたします。 my @buf = ("","","","","","","","",""); my @buf2 = ("","","","","","","","",""); my $set_flag = 1; my $idx = 0; while(){ if ($set_flag > 8){ last; } $idx = int(rand(8)) + 1; if ($buf[$idx] ne ""){ }else{ $buf[$idx] = $set_flag; $buf2[$set_flag] = $idx; $set_flag++; } } my $q_list = ""; for(my $loop=1;$loop<=8;$loop++){ if ($q_list ne ""){ $q_list .= ","; } $q_list .= "" .$buf2[$loop]; }
恐れ入ります。 perlにて、＆検索を実行する為に、以下のようにしています。 しかしうまく動作しません。 use CGI $word = $form->param('word'); open (IN<, "xxx.txt"); $rec=<IN>; $where="$rec ne '' "; if($word ne ''){ $word =~ s/　/ /g; @word_array = split(/ / , $word); foreach (@word_array){ $where .= "and $rec=~/$_/ "; } } if($where){ @rec=split(/,/, $rec); //省略 xxx.txtを$recに格納して、フォームより送信されてきたスペース区切りの語句を、分割し、各々をマッチさせて検索したいのですが、 どのようにしたらよいでしょうか。よろしくお願いします。
Cygwin TerminalをWin7x64にインストールしました。 インストール完了後、Perlプログラムでuse Text::CSV_XSを実行すると Can't locate Text/CSV_XS.pm in @INC エラーが出てしまいます。 ・エラー Can't locate Text/CSV_XS.pm in @INC (@INC contains: /usr/lib/perl5/site_perl/5.14/i686-cygwin-threads-64int /usr/lib/perl5/site_perl/5.14 /usr/lib/perl5/vendor_perl/5.14/i686-cygwin-threads-64int /usr/lib/perl5/vendor_perl/5.14 /usr/lib/perl5/5.14/i686-cygwin-threads-64int /usr/lib/perl5/5.14 /usr/lib/perl5/site_perl/5.10 /usr/lib/perl5/vendor_perl/5.10 /usr/lib/perl5/site_perl/5.8 .) at mysql.pl line 11. ・やってみたこと perl -MCPAN -e shell install Text::CSV_XS を実行してみたのですがダメでした。 どのように対応すれば解決できますでしょうか？ ご教授お願いします。
BEGIN { open ( STDERR, '>>', '.err.txt' ); } # エラーログ出力する とやると、エラーログをerr.txt に出力する事ができますが、このエラーメッセージの先頭に自動的に日時をつける方法はないでしょうか？
以下のよーに指定すればエラーログの場所を指定する事ができますが、 # エラーログ BEGIN{ open ( STDERR, ">>./log/err_log/err.txt" ); } たとえば変数にファイル名を入れて指定する場合は、 $err_log = "./log/err_log/err.txt"; BEGIN{ open ( STDERR, ">>$err_log" ); } とするとエラーが出てしまいます。変数に入っているものを指定するにはどうすればいいでしょうか？
PerlでIF文の条件式をもっとスマートに書きたいのですが。。。 以下のようなIF文の条件式を上手く書く方法がありますでしょうか？ if($flg[0] == 1 || $flg[1] == 1 || $flg[2] == 1 || $flg[3] == 1 || $flg[4] == 1 || $flg[5] == 1 || $flg[6] == 1 || $flg[7] == 1 || $flg[8] == 1 || $flg[9] == 1)){ $flg[i]は配列@flgの各要素です。 上記のように「||」（論理和：または）でつないで書くのではなく、 もっとスマートに書きたいのですが、 何か良い方法はないでしょうか？？ ご存じの方がいらっしゃいましたら、どうかご教示ください。 よろしくお願い致します。
Perlでモジュールをインストールしない方法をしりたいです。 普通はコマンドを使ったりして必要なモジュールを予めインストールしますが、インストールせずにCPANサイトからモジュールをダウンロードしてきて使用する方法はありますか？ 自分の感覚だと、プログラムの最初に何かを宣言すればいいのかな、と思うのですが。
毎度ご迷惑をおかけしております http://idsc.nih.go.jp/idwr/CDROM/Kako/H18/Syuuke … というExcelファイルの全sheetを.csvに吐き出そうと思い、OKwaveでコードを教えてもらいました しかし Wide character in printという警告が出て文字化けしました。 そこでまたOKwaveで聞いたところ、 http://www.rwds.net/kuroita/program/Perl_unicode … というＵＲＬを教えてもらいました。 これに従って（？）、理屈はわからないながら utf8フラグが立っていたら落とすというような コードにしてみましたが、やはり文字化けします。 全く原理ができておらず、誠にお恥ずかしい限りですが、 どのようなコードを書けばよいか、ご指導よろしくお願い申し上げます。 以下、だめだったコードです（改悪は私です）。 ######################################################################### use Spreadsheet::ParseExcel; #use Encode qw/ encode decode/; use Encode; my $sFN = "Syu_08_1.xls"; my $filename = $sFN; print "filename: $filename\n"; my $parser = Spreadsheet::ParseExcel->new(); my $workbook = $parser->parse( $filename ); if ( !defined $workbook ) { die "Parsing error: ", $parser->error(), ".\n"; } my $sRT = ''; ## シートの数だけ繰り返し for my $worksheet ( $workbook->worksheets() ) { print OUT "*"; my ( $row_min, $row_max ) = $worksheet->row_range(); my ( $col_min, $col_max ) = $worksheet->col_range(); foreach my $nLineY ( $row_min .. $row_max ) { my $rec = ""; foreach my $nLineX ( $col_min .. $col_max ) { my $cDT = $worksheet->get_cell($nLineY,$nLineX); ## セルにデータが在ったときの処理 if ( $cDT ) { $sTMP = $cDT->value(); $sTMP =~ s/,//g; if ( utf8::is_utf8($sTMP) ){ # utf8フラグがたっていたら print "utf flag on: $sTMP\n"; utf8::encode($sTMP);　　# utf8フラグを落とす } $rec .= "$sTMP,"; } } print "$rec\n"; } }
PerlでメールにZIPファイルを添付して送信したいです。 http://homepage3.nifty.com/hippo2000/perltips/pe … http://perltips.twinkle.cc/perl/mail_mime_attach … 上記のサイトを参考に以下のプログラムを組んでみました。 するとエラーメッセージが画像のような感じででてきました。 おそらく、なんか文字コードがおかしいのかもしれないのですが、どこから手をつけていいのかわかりません。 どなたかお助け下さいm(__)m 前回も別の問題で助けていただいたのですが、文字コードの問題でした。他の部分は全くひっかからないのに、この部分で４０時間ほど悩んでおります・゜・(ノД`;)・゜・ ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ sub mail_push { # サーバー、アカウント、パスワード、ポート、送信元アドレス、送信先アドレス、題名、本文、送るべきファイル１（空の場合は無視）、送るべきファイル２（空の場合は無視） my ( $mailhost, $mail_username, $mail_password, $mailport, $from_mail, $to_mail, $subject, $message, $file1, $file2 ) = @_; # 正しいメールの形なのか調べる if ( $to_mail eq '' ) { print "送り先のメールアドレスが空のようです\n"; # ERR } elsif ( $to_mail =~ /^([a-zA-Z0-9\.\-\/_]{1,})@([a-zA-Z0-9\.\-\/_]{1,})\.([a-zA-Z0-9\.\-\/_]{1,})$/ ) { # 実際に送る my $smtp = Net::SMTP->new($mailhost, Port => $mailport); $smtp->auth($mail_username, $mail_password); $smtp->mail($from_mail); $smtp->to($to_mail); $smtp->data(); my $mime = MIME::Entity->build( Type => 'multipart/related', From => $from_mail, To => $to_mail, Subject => $subject, Type => 'text/plain;charset="iso-2022-jp"', Data=> $message, Encoding => "7bit"); # エラーがでてくる箇所 $mime->attach( Path　　 => 'c:/buromaga1.jpg', Type　　 => 'Application/octet-stream', Encoding => 'Base64',); $smtp->datasend($mime->stringify);# ERR $smtp->dataend();# ERR # SMTP終了 $smtp->quit; } else { print "送り先が正しいメールの形式ではありません\n"; # ERR } }
初めて質問します。 今、PerlのDBIを使ってMySQLのトランザクション処理にチャレンジしています。 ところが、rollback処理がうまくできません。 具体的には、 table2 がある状態で下のプログラムを動かすと、 エラーの表示が出るのに、 table1 は作成されました。 何らかのエラーがあれば、どちらも作成されないようにしたいです。 ======================================================= my %sql; $sql{db_name} = "database"; $sql{host} = "localhost"; $sql{user_name} = "user_name"; $sql{password} = "password"; use DBI; my $dbh = DBI->connect('DBI:mysql:'.$sql{db_name}.':'.$sql{host}, $sql{user_name}, $sql{password} ,{RaiseError => 1, PrintError => 0, AutoCommit => 0 }) || &Err(); my $sth; my $re; eval { my $sql_string1 = "create table table1(`id` int);"; my $sql_string2 = "create table table2(`id` int);"; $sth = $dbh->prepare($sql_string1); $re = $sth->execute; $sth = $dbh->prepare($sql_string2); $re = $sth->execute; }; if ($@) { $tag="Err:".$@."\n"; $sth = $dbh->rollback; }else{ $sth = $dbh->commit; } $sth->finish; $dbh->disconnect; ======================================================= 検索して、いろいろいじっても解決しませんでした。 どうかよろしくお願いします。
Perl LWPでのIPv6接続がエラーでつながらず、原因がわかりません。 記載しているソースで、Localhostに接続すると、LWP::UserAgentはエラーとなりますが HTTP::Tiny、wgetコマンドは、問題ありません。（IPv4の場合は、LWPも問題ありません）。 どなたか、よい解決へのお知恵をよろしくお願いします。 perl 5.16.1 CentOS 5.9 ------ソース----- #!/usr/bin/perl use strict; use Net::INET6Glue; my $uri = 'http://[::1]'; use LWP::UserAgent; my $ua = LWP::UserAgent->new; my $res = $ua->get($uri); print $res->content,"\n"; print "********************************\n"; use HTTP::Tiny; my $http = HTTP::Tiny->new; my $response = $http->get($uri); print $response->{content}, "\n"; -----結果----- Can't connect to ::1:80 (接続を拒否されました) LWP::Protocol::http::Socket: connect: 接続を拒否されました at /usr/local/perl-5.16.2/lib/site_perl/5.16.2/LWP/Protocol/http.pm line 51. ******************************** <html><body><h1>It works!</h1></body></html> ---環境--- This is perl 5, version 16, subversion 2 (v5.16.2) built for x86_64-linux cpan[1]> i /INET6/ Reading '/root/.cpan/Metadata' Database was generated on Fri, 01 Mar 2013 03:17:03 GMT Distribution SHLOMIF/IO-Socket-INET6-2.69.tar.gz Distribution SULLR/Net-INET6Glue-0.5.tar.gz Module = IO::Socket::INET6 (SHLOMIF/IO-Socket-INET6-2.69.tar.gz) Module = Net::INET6Glue (SULLR/Net-INET6Glue-0.5.tar.gz) Module = Net::INET6Glue::FTP (SULLR/Net-INET6Glue-0.5.tar.gz) Module = Net::INET6Glue::INET_is_INET6 (SULLR/Net-INET6Glue-0.5.tar.gz) Module < Net::Patricia::AF_INET6 (PHILIPP/Net-Patricia-1.19.tar.gz) Module < Net::Whois::Object::Inet6Num (AASSAD/Net-Whois-RIPE-2.002.tar.gz) 8 items found
perlを勉強中です 掲示板に挑戦してみました 引用の文字色を変えたいと思っています。下記のように>>をいれるとその行の文字色を改行まで変えたいです >>引用文 しかし、やってみると、他の置換えがあってうまくいきません。 どうすればうまくいくのでしょうか？ よろしくお願いします sub form_decode{ if ($ENV{'REQUEST_METHOD'} eq "POST") { read(STDIN, $form, $ENV{'CONTENT_LENGTH'}); } else { $form = $ENV{'QUERY_STRING'}; $NG = 1; } @pairs = split(/&/,$form); foreach $pair (@pairs) { ($name, $value) = split(/=/, $pair); $value =~ tr/+/ /; $value =~ s/%([0-9A-Fa-f][0-9A-Fa-f])/pack('H2', $1)/eg; $name =~ s/%([0-9A-Fa-f][0-9A-Fa-f])/pack('H2', $1)/eg; $value =~ s/>(&gt;[^<]*|>[^<]*)/&gt;&gt;<font color=\"red\">$1<\/font>/g; $value =~ s/>/&gt;/g; $value =~ s/</&lt;/g; $value =~ s/\r//g; $value =~ s/\n//g; &jcode'convert(*value,'sjis'); &jcode'convert(*name,'sjis'); $FORM{$name} = $value; } }
いつも大変お世話になっております。 エクセルブック(.xls)に週報データが保存されています。 １週が１sheetになっているため１ファイルに53sheet入っています。 10年分のため、10ファイルあります。 各sheetは同じフォーマットで入っています。 これらをPERLで一括して読み込みたいと思っています。 従来は、1sheetずつ　.csvに変換して、読み込んでいました。 しかし　これらだと530回　.csvに吐き出す処理が必要で、根気が続きません。 バッチ処理で一気に.csvに吐き出すか、あるいは.csvに吐き出さずに .xlsのまま、読み込みたいと思っています。 PERLは　active perl 5.14.2をWindows 7のコマンドプロンプト上から起動しています。 ご指導のほど宜しくお願い申し上げます。
おそれいります。 abc.txtに保存されたデータを、xyz.cgiから特定ワードに合った最初の行だけを抽出したいのですが、 うまくいきません。 open(OUT, "< ./abc.txt"); while($data = <OUT>){ chomp($data); @ip = split(/,/,$data); if($ip[0] =~ /word/){ 処理 } とすると、マッチする行が全て表示され、 Whileを外すとデータの1行目だけを判定するみたいで、 wordという文字列が含まれるレコードが見つかったらそのマッチした最初のデータだけを表示したいのです。 よろしくお願いします。
以下のような簡単なプログラムを書いて実行させたところ、小数点表示の挙動がおかしくなりました。 ###プログラム ここから #!/usr/bin/perl use strict; use warnings; for(my $i=0.01;$i<=1;$i+=0.001) { print $i,"\n"; } ###ここまで ##結果 ここから . . . 0.685 0.686 0.687 0.688000000000001 0.689000000000001 0.690000000000001 ##ここまで 以上のように、0.001づつ増加する $i に途中から000000000001が加わってしまいます。この000000000001が足される現象をやめさせたいです。原因、解決策等おわかりであれば教えていただけないでしょうか。よろしくお願いします。
はじめまして、初めて質問させて頂きます、ぷりんと申します。 早速ですが、質問です。 私はPerlにてメールフォームの作成に勤しんでいるのですが、どうしても500エラーが出てしまいます。 サーバーはレンタルサーバーのロリポップを使用しております。 私が不思議に思うのは、メール自体は送信されますが、ページには500エラーと表示されてしまうことです。 以下は実際のコードです。（全文）（一部変更有（メール宛先部分）） #!/usr/bin/perl require "../mimew.pl"; require "../jcode.pl"; $sendmail = '/usr/lib/sendmail'; $to = "hogemoge\@gmail.com"; $from = "test\@test.tet"; $subject = "題"; $body = "メール本文"; # 本文をJISコードへ変換 &jcode'convert(*body,'jis'); # 標題をJISコードへ変換してMIME エンコード &jcode'convert(*subject,'jis'); $subject = mimeencode($subject); open(MAIL,"| $sendmail -t"); print MAIL "To: $to\n"; print MAIL "From: $from\n"; print MAIL "Subject: $subject\n"; print MAIL "\n"; print MAIL "$body\n"; close(MAIL); exit(0); と記述し、こちらのcgiファイルはパーミッション700（ロリポップさんが700で動くので）、アスキーコードでアップロード。 mimew.plとjcode.plどちらも一つ上のフォルダにあります。（パーミッションは644） 以上です。 当方初心者ですので、いろいろ試したのですが、どちらが悪いのか見当つきません・・。 簡単な検索をしましたが、Syntax　Errorは見つかりませんでした。 また、いろいろなサイトを参考にしたり、検索したりしましたが、問題解決には至りませんでした。 おそらく初歩的なミスだとは思います・・。 こちらの問題に関してお詳しい方、どうかお手を差し伸べていただけないでしょうか。 何卒、よろしくお願い申し上げます。
フォームに入力された文字が電話番号かどうかを判断したいと考えています。 ハイフンは使いません。 if ($$in{tel} =‾ /¥-/) { &error("電話番号はハイフン（ - ）なしの10桁または11桁でご記入ください"); } if ($$in{tel} =‾ /^＼d{10,}+$/) { &error("電話番号はハイフン（ - ）なしの市外局番からご記入ください"); } このようにしてみたのですが、うまく動きません。 どうすればいいんでしょうか... よければ教えてください。
文字列から、明細と金額にわけてそこから検索できるプログラムを作っています。 テスト用に下記サンプルを作ったのですが、検索明細（$moneyvalue）をコーヒーに した場合のみ、値が戻ってきませんでした。 そこで、中のsplit部分を表示するようにしたところ ★収入=-10000. ★電車=+1000. ★コ=. ★[ヒ=. ★[=+2000. ★雑誌=+240. ★=. ★その他=+500. 0 このように　コーヒーの部分だけ上手くsplitが動いていないことが分かりました。 しかしココから手詰まりでどのように直せばいいのか分かりません。 想定される結果 ★収入=-10000. ★電車=+1000. ★コーヒー=+2000. ★雑誌=+240. ★その他=+500. 2000 このようにするにはどうしたらいいのか、分かる方おりましたら教えて下さい。 なお、当方はperl初心者です（涙) ----以下サンプルコードです---- #! /usr/local/bin/perl use Encode qw(encode_utf8); use CGI; my $moneyvalue = "コーヒー"; my $moneyline = "収入-10000,電車+1000,コーヒー+2000,雑誌+240、その他+500"; print &chkmoneyValue($moneyline,$moneyvalue); exit; #==============================================================================　 subchkmoneyValue { my ($moneyline , $moneyvalue)=@_; my $lp=0; my $flg=0; my @data= split(/[、,]/, $moneyline); my $datavalue = 0; foreach my $wdata (@data) { $wdata =~ s/\+/\,\+/; $wdata =~ s/\-/\,\-/; my @data2 = split(/[,]/, $wdata); print "★$data2[0]=$data2[1].\n"; if($data2[0] eq $moneyvalue){ $datavalue=$data2[1]; last; } } return $datavalue; }
ヨミサーチという検索エンジンを改造して、サムネイル式の画像の検索サイトを作っていますが一箇所行き詰っています。 画像を出すところまでは出来たのですが、ヨミサーチはデフォルトでは縦に1列になってしまうので、横一列に並べ変えたいと思っています。 以下が出力結果の部分の抜粋なのですが、いろいろと試してもうまくいきません。 #<!--(↓修正不可↓) } foreach $line(@log_lines){ @Slog=split(/<>/,$line); &PRlog; } # (↑修正不可↑)--> どこを直せばいいでしょうか？お知恵を拝借したいです。
ここで一週間も止まっています、どなたか助けてください。 あるサーバーにたまっているメールを受信して Net::POP3; MIME::Parser; などを利用して本文を取り出したりしています。 件名などはきちんと解析できて日本語にできるのですが、どうしても本文だけはどうなっているのかわかりません。エンコード、デコードなどの説明が書いてあるサイトをたくさんみて２００回くらいいろんな方法やパターンを試してみて本文を復元しようと試みましたが　「$B$^$7$m?'%7%s%U%)%K!<$N%Q%s$K$c(B」の文字は何も変わることなく、さすがに気が狂いそうになりましたのでここで質問しようとおもいます。 emlで保存したファイルから本文を取り出すことはできますが、読める状態になりません。 どなたか教えていただけないでしょうか？ いったい、どうしたらメールの本文をきちんと読める状態にできるのしょう？ ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ Subject: =?ISO-2022-JP?B?GyRCJF4kNyRtPyclNyVzJVUlKSVLITwbKEI=?= To: test@test.com Status: RO X-UIDL: 1358842469.4950.s323,S=1722 Content-Type: text/plain; charset=ISO-2022-JP Content-Transfer-Encoding: 7bit $B$^$7$m?'%7%s%U%)%K!<$N%Q%s$K$c(B
恐れ入ります。 Perlを使って、時間と時間の差を求めたいのですが、 なかなかうまくいきません。 一度、txtファイルに書き込み日時を保存したあと、 それをperlにて読み込み、現在時刻との差を出して投稿制限を掛けたいのですが、 どのようにしたらよろしいでしょうか。 現在書き込み日時はtxtファイルに保存し、cgiファイル上に、出力済みで、localtimeも出力済みです。 単純に引いて関数に代入しても、正しい時間を得られません。 よろしくお願いします。
perl初心者です、いまperlのプログラムを書いていてxmlのデータとのマッチングをしようとしているのですが <nanka> <hoge>4</hoge> </nanka> <data>1</data> <hoka>1</hoka> このような部分があった場合に </nanka> <data>1</data> ここの１のみを取り出したくてマッチングを考えているのですが /</nanka>.<data>(.*?)<\/data>/s; ではうまくいかず、困っています。 なにか良い方法、もしくはこのようなマッチングは不可能など ご意見いただければと思います。 よろしく御願いします。
お世話になります。 ホストからIPに変換する方法としてgethostbynameを使って変換したところ、違うIPが表示されてしまいます。 うまく取得出来るホストもありますが、一部のホストが何度やっても違うIPとなってしまいます。 正確に取得出来ない原因として、何かありますでしょうか？ よろしくお願いいたします。
sessionIDがページを更新するたびに変わってしまいます。 その結果、前回セッションに保存した値を読み込めません。 my $cgi = new CGI; CGI::Session->name("SESSION_ID"); my $session = new CGI::Session("driver:File", $cgi, {Directory=>'./session'}); print $session->header(-charset=>'UTF-8'); print $session->id(); print $session->param("name"); #表示されず。 というようにしてセッションIDを表示すると、毎回変化します。 どうしたらIDを変わらないように出来るでしょうか？ ちなみに、セッションに書き込むのは、 my $cgi = new CGI; CGI::Session->name("SESSION_ID"); my $session = new CGI::Session("driver:File", $cgi, {Directory=>'./session'}); $session->header(-charset=>'UTF-8'); $session->param("name", "abc"); $session->flush(); undef($session); こんな処理をしてます。
別ファイル(chiiki.pl)のパッケージ内にあるサブルーチンの処理を使用するために require './chiiki.pl'; CHIFOU::postlimit; に書いたのですが、エラーとはならないもののまったく動きません。 別ファイルchiiki.plは package CHIFOU; sub postlimit { いくつかの処理 } 1; となっていますがどこか問題があるのでしょうか？
あるテキストファイルが以下の内容で記述されているとします。 a　　　file1 a　　　file1 a　　　file1 b　　　file1 b　　　file1 b　　　file1 c　　　file2 c　　　file2 d　　　file2 d　　　file2 e　　　file2 e　　　file2 f　　　file3 f　　　file3 f　　　file3 上記のように列が二つあるテキストファイルについて、 2列目のfile名が1列目のどの値とひもづいて いるかを処理するperlプログラムを作ることを考えます。 出来上がったperlによって上記テキストファイルを処理した結果は、 file1は　aとb file2は　cとdとe file3は　f とひもづいていることが分かる　ということにしたいです。 これをperlプログラムで書くとき、条件として 一行一行を読みとるとき if ( $_ =~ /(\S+)\s+(\S+)/ ){ を使っています。 そのため$1と$2に現在行の1列目,2列目が与えられた後、 ハッシュと配列を組み合わせて考えた場合どのようにすれば いいのでしょうか。 また仮にテキストファイルの続きが存在し、 1列目がg 、2列目がfile1　の行があるとき 2列目で既に出てきた同じfile名はエラーとすることも考えた 場合どう記述するのか合わせてお願い致します。 長くなってしまい申し訳ないのですが、 ご指導ご鞭撻宜しくお願い致します。
あるテキストファイルが以下の内容で記述されているとします。 a　　　file1 a　　　file1 a　　　file1 b　　　file1 b　　　file1 b　　　file1 c　　　file2 c　　　file2 d　　　file2 d　　　file2 e　　　file2 e　　　file2 f　　　file3 f　　　file3 f　　　file3 上記のように列が二つあるテキストファイルについて、 2列目のfile名が1列目のどの値とひもづいて いるかを処理するperlプログラムを作ることを考えます。 出来上がったperlによって上記テキストファイルを処理した結果は、 file1は　aとb file2は　cとdとe file3は　f とひもづいていることが分かる　ということにしたいです。 これをperlプログラムで書くとき、条件として 一行一行を読みとるとき if ( $_ =~ /(\S+)\s+(\S+)/ ){ を使っています。 そのため$1と$2に現在行の1列目,2列目が与えられた後、 ハッシュと配列を組み合わせて考えた場合どのようにすれば いいのでしょうか。 ご助言ご鞭撻宜しくお願い致します。
a.perlというのを実行したりしていると、a.pl~、#a.pl#みたいなのがいつの間にか作られているのですがこれは何でしょうか？
前回の投稿で完全に書き間違えた部分がありそのままではよくわからないものになってしまっていたのですが、投稿し直しなどができなかったので再度投稿させてもらいます。 プログラムは use Web::Scraper; use WWW::Mechanize::Firefox; use Parallel::ForkManager; use URI; binmode STDOUT,":utf8"; sub func ; ($sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst) = localtime(); $year += 1900 ; $mon += 1 ; $File = "yuma-$year:$mon:$mday:$hour.txt" ; open (file,"> $File") or die 'fail to open file\n'; print "HOW MUCH PAGE\n" ; my $page = <STDIN> ; print "WITEING...\n" ; my $MAX_PROCESSES = 5; my $pm = new Parallel::ForkManager($MAX_PROCESSES); for ($i = 1;$i <= $page;$i++) { $pm->start and next; my $uri = URI -> new ("www.目的とするＵＲＬ$i.html"); my $mech = WWW::Mechanize::Firefox->new(); $mech->get($uri) ; print file $s->scrape($mech->content) ; print file "\n" ; print file $r->scrape($mech->content) ; print file "\n" ; $pm->finish; } print "WITEID\n" ; my $s = scraper { process 'font',sen => 'TEXT'; result 'sen'; }; my $r = scraper { process 'div#content',ren => 'TEXT'; result 'ren'; }; close (file) ; です。 $i　の順序でファイルへ書き込みをしていきたいのですが、前の処理が終わっていなかった場合に待つ方法がわからないので初心者レベルで教えてください。
こんにちは。 ubuntu12.10上でParallel::ForkManagerを利用しようとしていますが、子プロセスのファイルへの書き込みの順序で困っています。 いくつかの実験の結果$iを子プロセスごとに1づつ増やして表示させても 1,2,4,5,3,6,8,9,7・・・となり子プロセスを作った順序で終了しません。 ｆｉｌｅへの書き込みを順序良く行わせる方法はありませんか？
cgiを直接呼び出して、メールを送信されてしまうエラーについて質問させてください。 以下のように、sendmailを利用するサブルーチンを呼び出しています。 if ($query->param('confirm')) {　#←初期値は""で一番下のelseに飛ぶ # input data check my @err_lst = ();　#←入力チェックしてエラーメッセージを蓄積 if (&InputCheck($query, \@err_lst)) {#←入力内容をチェック # ok &NextPage($query);　#←確認画面を表示 } else { # error &SamePage($query); #入力内容にエラーがある場合、入力画面に戻す } } elsif ($query->param('send') eq "送信") { # send mail & make log &SendMail($query);　#メール送信用サブルーチン } else { # make init form &InitPage($query); #CGI起動直後はこのサブルーチンから入力フォームを表示 } この書き方ですと、 <input type="hidden" name="confirm" value=""> <input type="hidden" name="send" value="送信"> で、直接「&SendMail($query);」が起動してメール送信されてしまいます。 メール本文やアドレスの文字エスケープ処理は動いているのですが、 sendmailを呼び出す前には、必ず入力内容をチェックするサブルーチンを通る事を 強制する方法はないでしょうか。 当方、この修正の為にこの2週間突貫でPERLを独学している素人の為、 上記事例について読んでおくべき参考書などがあれば、お教えいただけますと とてもとても助かります。 どうぞよろしくお願いいたします。
【ファイルパス】 /home/template/test.pm /home/template/test.html 【test.pm内容】 $incFile = "test.txt"; $test->render( 　　'test.html', {incFile => $incFile}, ); 【test.html内容】 [% INCLUDE $incFile %] 上記の場合、pathを設定していない「test.html」のパスは 「/home/template/test.html」になると思います。 このような状態で「test.html」のincludeファイル「/home/inc/test.txt」を 読み込むことは可能でしょうか？ ※ $incFile = "../test.txt"; のように上位ディレクトリを指定した場合にはエラーが発生しました。
とあるソースを解析しているのですが、 Perlを初めてまだ日が浅いので 下記の計算式の最後の(1./60.)の意味がよくわかりません。 なぜ数字の後にドットが入っているのでしょうか？ どなたかご教示お願いいたします。 $d = ($t - $dly - $t0) - ($c - $c0)*(1./60.);
コマンドラインからだと作成されるpngファイルがブラウザからだと作成されません。 ブラウザにデバッグ用のprint文は、表示されます。 http://localhost/~.../sample.pl を実行しても、 ブラウザに　hello-helloが表示されるだけで、 file.pngが作成されません。 file.pngをブラウザから作成するには、どうしたら良いのでしょうか？ よろしくお願いいたします。 コマンドラインからだと、gnuplotで作成されたfile.pngが作成されます。 bash-3.2$ perl sample.pl Content-type:text/html hello-hello 使用したプログラムは、以下のとおりです。 < sample.pl > #! /usr/bin/perl print "Content-type:text/html\n\n"; #use strict; #use warnings; use CGI; use Chart::Gnuplot; my $chart = Chart::Gnuplot->new( output => "file.png" ); my $dataSet = Chart::Gnuplot::DataSet->new( datafile => "test.data" ); print "hello-hello\n"; $chart->plot2d($dataSet);
perl の文字列カウント こんにちは。初質問になります。perのlプログラミングについての質問です。 ある文章の「文末」の文字列をカウントし、出力するプログラムをつくりたいと思っています。 以下の文字列カウントプログラムを元に作りたいのですが、正規表現の文末指定のつけどころが恥ずかしながらわかりません。 ＜テキストデータ例＞ やまだくんはみかんを食べています！！たかしくんはりんごを食べています！！ ひろしくんは好きなみかんを食べています！！ ？？よしこさんは嫌いなりんごを食べていますか？？ かなえさんはいつもぶどうを食べています(^-^) ひろしくんはみかんが好きです(^-^)しかし、ゆうじくんはみかんは好きではありません(^-^) ひろみさんはみかんとぶどうは嫌いです！！しかし、りんごは好きです。 たとえば上のテキストデータを読み込み 文末のビックリマーク、クエスチョンマークの文字列を検出し 個数をカウントし出力するするようなプログラムです。 ＜出力結果＞ （＾-＾） 2 ！！ 2 ？？ 1 となるようにしたいです。 以下のプログラムだと文末に限らずリストにあてはまる全ての記号がカウントされてしまいます。 @arr = qw('（^-^）','!!','??' ); $fname = "input.txt"; open(IN,"$fname") || &error("Can't open $fname"); read(IN,$buff,-s IN); close (IN); foreach (@arr){ $cnt = scalar( () = $buff =~ /$_/g ); print "$_ $cnt\n"; }
ロシア文字の排除をしたいと思い、 以下のように記述してみたのですが カタカナの「ヤツ」「ヤッ」に以下でマッチングしてしまいます。 文字コードはShift-jisを使用しているのですが 誤判定を回避する策はないでしょうか？ roshia_moji=qw(А Б В Г Д Е Ё Ж З И Й К Л М Н О П Р С Т У Ф Х Ц Ч Ш Щ Ъ Ы Ь Э Ю Я а б в г д е ё ж з и й к л м н о п р с т у ф х ц ч ш щ ъ ы ь э ю я); foreach (@roshia_moji) { if (index($a,$_) >= 0){ push(@error, 'ロシア文字は使用できません。');last; } }
フォームから入力された文字列をデータファイルの中から検索し、重複していなければ追加登録したい。 ・問題点 重複していても登録できてしまう。 昨日からperlを触り始めたばかりなので、基本的な部分が分かっておらず、 おかしい部分が多々あるかもしれませんが、ご指導よろしくお願い致します。 データは全て"["から始まるので、登録できませんの部分は、簡単な入力チェックです。 -------------------------------------------- test.html <html> <head> <meta http-equiv="Content-type" content="text/html; charset=UTF-8"> </head> <body> <form action="test2.cgi" method="post"> <input type="text" name="shirolist" size="50" /> <input type="submit" name="submit" value="送信" /> </form> </body> </html> -------------------------------------------- test2.cgi #!/usr/local/bin/perl use utf8; use CGI; $q = new CGI; $flag = 0; $data = $q -> param('shirolist'); $data =~ s/\s+//g; open(IN , "<:uft8" , "data.dat"); while($line=<IN>){ if ( $line eq $data ) { $flag = 1; } } close(IN); if($flag == 0){ if ($data =~ /^\[/) { open(OUT,">>data.dat"); print OUT "$data\n"; close(OUT); $pr="を登録しました"; } else { $pr="は登録できません"; } } else { $pr="は登録済みです"; } print "Content-Type: text/html; charset=UTF-8\n"; print "$data $pr<br>\n"; ※Yahoo知恵袋で同様の質問をしましたが、 回答者への個別のコメントや追加質問が出来ず、 非常に使いづらく感じたのでこちらに投稿させて頂きました。
@tangoa = ('A','B','C','D','E','F'); @tangob = ('K','L','M','N','O','P'); の２つの配列の各要素を結合させて AK AL AM AN AO AP BK BL BM BN BO BP CK CL CM CN CO CP DK DL DM DN DO DP EK EL EM EN EO EP FK FL FM FN FO FPという配列(@tangoc)を作りたいのですが、 ２つの配列の各要素を結合させるにはmapを用いてどのように書くべきか具体的に教えてください。
Perlを用いてテキスト中の文字列 /^\d+$|^\d+\.[05]{1}$/ を、以下の文字列に置換したい場合、 うまくやる方法はないでしょうか？ /^[0]+$|^[0]+\.[0]+$/ 正規表現を使いたいですが、 １つ１つエスケープしていくのはさすがに・・・ よろしくお願いいたします。
元のファイルを処理して新しいファイルとして保存するＣＧＩを組もうと思います。 新しいファイルの保存フォルダの指定で困っています。 <input type="text" name="Filename" size="100"> とやると、新しいファイルを保存するフォルダも全部手入力です。複数の人が使う予定です。使う人によって保存フォルダは違います。そこでフォルダ指定をグラフィカルに出来たら良いなと思いました。 そこで <input type="file" name="Filename" size="100"> とtype属性を変えてみました。なかなか使い勝手が良いなと思ったのですが、"file"はアップロードするファイルを指定する際に使うもので、保存するファイルの指定には使えません。 何か良い方法はないでしょうか。
Jcodeについて教えてください。 Shift-jisで処理している文字列でJcodeを使用すると 半角カタカナ→全角カタカナ 半角小文字英字→半角大文字英字 への変換は文字コードをecuにしなくてもうまくいくのですが 全角英数字→半角英数字 に変換するとうまくいきません。 これはどうしてなのでしょうか？
HTMLは何となく分かる範囲で記述しました。 CSSで体裁を整える予定ですので、ここでは割愛させていただきます。 Perlも勉強したのでやってみたのですが、何故か目的とするメアドではなく送信元にメールが送られ、困っています。 HTMLはこんな感じで書いてみました。 <body> <form> <p>お名前<input type="name" size="30" maxlength="30" value=""><br> メールアドレスを入力して下さい<input type="mail" size="50" maxlength="50" value=""><br> ご質問・メッセージなどを入力して下さい。<br> <textarea name="mess" cols="50" rows="5"></textarea></p> <p><input type="submit" value="送信する"><input type="reset" value="やり直し"></p> </form> </body> Perlのソースも記述すべきでしょうが、参考書をなくしてしまいました。 使った参考書はマイコミから出版された「よくわかるPHPの教科書」です。 みなさんのお力を貸していただきたいです。
PC上のデータに含まれる機種依存文字（(1)(2)IIIなど）をEBCDICコードを使用しているホスト機にファイル転送をする時、表示可能な文字に変換を掛けようと思っています。 Perlで変換を行うところまではなんとか辿り着きました。 ところが、(1)を1.に変換すると、PC上では文字数は変わりませんが、ホストにアップロードした時に、シフトコードが入るために、最悪前後に全角文字が入っている場合は、２バイトのプラスになり、ホスト上のデータベースにインポートする時にエラーを引き起こしてしまいます。 これを防ぐため、Perｌ上で、文字コード変換を行う時にシフトイン＆シフトアウトの発生した場合の文字列長のチェックを行いたいのですが、全角文字と半角文字の識別と長さのカウントを行う方法、なにか参考になるサイトがありましたら、教えて頂けると助かります。 よろしくお願いします。
<?xml aaa=111 bbb=222 ccc=333> <A>$var</A> <B>$var</B> <C>$var</C> | | | <Z>$var</Z> <END></END> 上記のようなテキストファイルをperlプログラムで 作成したいときについて。 上記記述をプログラム内であらかじめ雛形として記述しておき $varの変数の中身をかえることで違うテキストファイルが 出来上がることを達成するにはperlでどのような記述を すればいいのでしょうか。 自分が調べた範囲では、"ヒアドキュメント"を 使えばいいのかなと考えていますが、もっと良い方法や 文法があれば御教授願います。 宜しくお願い致します。
質問させていただきます。 by ***.***.hoge.jp を正規表現で表すならば、 by\s+(ここに何が入るからわからない).hoge.jp この（）の部分は何が入るのでしょうか？ 初めの”by”　と　最後の”hoge.jp”　は確定で入るのですが、途中の部分は何の文字が来てもいいように正規表現を組みたいです。 何の文字が来てもいい、というような表現方法はありますでしょうか？
再度質問させていただきます。 本当は質問などせずに自力で解決したいのですがなかなかうまくいかなくて困っています… 前回質問させていただいたとき（http://oshiete.goo.ne.jp/qa/7855819.html）には問題なかったのですが、事情がかわってしまい、ifの中の条件を変更しなければならなくなりました。今回はIPアドレスではなく時間抽出です。 以下のメールヘッダに対して、後述するプログラムを実行します。 Received: from ************.jp (**********.jp [158.217.43.2]) by **********.abc.jp ; Wed, 29 Feb 2012 12:17:31 Received: from ************** (localhost [127.0.0.1]) by localhost (Postfix) with SMTP ; Wed, 29 Feb 2012 12:16:23 Received: from **************.jp (***********.jp [158.217.208.11]) by ************.abc.jp ; Wed, 29 Feb 2012 12:15:54　#ここがほしい Received: from **************.jp (***********.jp [158.217.208.11]) by ************.xyz.jp ; Wed, 29 Feb 2012 12:15:14　　 From: ************** To: *********@***********abc.jp Subject: = ***** Date:Wed, 01 Mar 2012 21:06:24 　　#ここがとれてしまう . . . 本文 ～略 $file_data_str = join("", @file_data); @received_datas = split(/Received:/, $file_data_str); @received_datas = reverse(@received_datas); foreach $sorted(@received_datas){ if(($sorted =~ /abc.jp/) and ($sorted =~ /(\w+,\s+\d+\s+\w+\s+\d+\s+\d+:\d+:\d+)/)){ 　　$new_file_name = str2time($1); 　　$min1 = $new_file_name / 300; 　　$min1_cut = int( $min1 ); 　　print $min1_cut; last; } } } exit; まず、Received:で区切って、reverseしているのではじめの要素は、元のメールヘッダの最後のReceivedフィールドから本文まであることになります。更にIfで指定してる条件のアドレスがTo:にも出現するのでそこも判定されます。なのでプログラムを実行すると、To:のabc.jpとDateの時間にひっかかってしまい、Dateの時間情報を抽出してしまいます。 あくまで取りたいのはReceivedフィールドの中の時間情報なのですが、何かいいやり方はありませんでしょうか？ちなみに やり方としては、初めの要素を消す、shiftとか使えるかな、と考えたりもしましたがうまくいかず…、Receivedフィールドのみで判定させたいです。 ご教授願えたらと思います。よろしくお願いします。
質問させていただきます。 IPアドレスは普通、114.114.96.20という風に四つに分かれていますが、これを一つの数字にまとめる、ということはPerl言語でできるでしょうか？ 各数字ごとに進数変換して、ピリオドを取ってまとめる、という形を考えたのですが… 例えば２進数変換すれば 01110010011100100110000000010100 という感じになります。 これ以外に何か方法はありますでしょうか？
質問させていただきます。 メールヘッダに対して以下のプログラムを実行します。 ～略 $file_data_str = join("", @file_data); @received_datas = split(/Received:/, $file_data_str); @received_datas = reverse(@received_datas); foreach $sorted(@received_datas){ if(($sorted =~ /by\s\w+.abc.jp/) and ($sorted =~ /(\[\d+\.\d+\.\d+\.\d+\])/)){ $& =~ /(\d+\.\d+\.\d+\.\d+)/; $ipadd = $1; print $ipadd; print "\n"; } } } exit; すると、by\s\w+.abc.jpを含むReceived行のIPアドレスが全て抽出され、複数出力されます。（以下実行結果） 114.114.96.20 158.217.208.15 私はこの初めの"114.114.96.20"のみを出力したいのですが、どうしたらいいでしょうか？ 助言のほどをお願いいたします。
質問させていただきます。 メールヘッダに対して以下のプログラムを実行します。 ソースコード ～略 my $file_data_str = join("", @file_data); my @received_datas = split(/Received:/, $file_data_str); my @received_datas = reverse(@received_datas); foreach my $sorted(@received_datas){ if($sorted =~ /by\s\w+.abc.jp/){ $sorted =~ /(\[\d+\.\d+\.\d+\.\d+\])/; print $sorted; print "\n"; } } } exit; を実行すると以下のようにに実行結果が出てきます。 from 158.217.207.30 (114.114.96.20 [114.114.96.20]) by ************abc.jp from ****************.jp (***************.jp [158.217.208.15]) by ***********abc.jp 私は [114.114.96.20]だけを取りだしのですがどうしたらいいでしょうか？ foreach my $sorted(@received_datas){ if($sorted =~ /by\s\w.abc.jp/){ $sorted =~ /(\[\d+\.\d+\.\d+\.\d+\])/; ここをどうにかすればいけると思うのですが詰まってしまって… 申し訳ないですが助言をお願いします。
初歩的な質問で恐れ入ります。 Perlで、@array('りんご','キャベツ','バナナ','みかん'); の中身を、順次10回ずつ繰り返し実行したいのですが、どのようにしたら良いでしょうか りんごりんごりんごりんご・・・（10回）キャベツキャベツキャベツキャベツ・・・（10回）という感じで、 ひとつめのリストの処理が10回終了したら次のリストを10回という感じです。 よろしくお願いします。
CGI(perl)勉強中です。 2012年12月18日22時15分 のように文字列で記録されている時間があります。 (事情によりこの時刻は上記のような文字列型式でしか記録できません) この時間が、現在時刻と比較し、何日経過しているかを表示させたいと思っています。 time 関数を使えば現在時刻の取得が可能ということは分かりました。 この現在時刻から上記の日時をマイナスすれば経過秒数が分かり、 これを日数に計算しなおせばできると思うのですが、 2012年12月18日22時15分をtime関数で取得した現在時刻と同じ型式に 変換させる方法が分かりません。 また、他によい計算方法があればよろしくお願いします。
perlのsystem関数内で変数展開について困っています。変数展開はできるのですが、その変数の後に':'(コロン)をつける必要があるのですが、それがモディファイアとして認識されてしまうようです。コロンをそのままperlに評価させずにsystem(shell)に渡す方法はないでしょうか？ $host = "xxxx.com"; system("program ${host}:22"); ちなみに、$host:22ではうまく変数展開されないそうで、{}を使うまでは良かったのですが、その後のコロンでつまっています。programの都合でhost、コロン、ポート番号を渡す仕様のため変更できません。よろしくお願いします。
下記のような文字数の多いマッチング演算子について。 if($test =~ /^\s+\S+\s+(\S+)\s+(\S+)\s+\S+\s+(\S+)\s+(\S+)\s+\S+\s+\S+\s+\S+\s+\S+ \s+\S+\s+(\S+)\s+\S+\s+\S+/){ 上記は一行に続けて記述しています。 (見た目は2行に見えますが1行記述です。コンパイルすると正常に動作します) これを if($test =~ /^\s+\S+\s+(\S+)\s+(\S+)\s+\S+\s+(\S+) \s+(\S+)\s+\S+\s+\S+\s+\S+\s+\S+ \s+\S+\s+(\S+)\s+\S+\s+\S+/){ のように改行して、コンパイルしてみると うまく動きません。ドット演算子を使用して下記のように記述し直しても うまく動作しません。 if($test =~ /^\s+\S+\s+(\S+)\s+(\S+)\s+\S+\s+(\S+) .\s+(\S+)\s+\S+\s+\S+\s+\S+\s+\S+ .\s+\S+\s+(\S+)\s+\S+\s+\S+/){ 改行して記述するにはどうすればよいのでしょうか？
Hoge*なtfield型の *head構造体を生成してPerl側で参照し、 再度同じ関数に通して*headと同じ構造体*pを作りたい。 下記のソースを 実行すると二度目にDataListを通すと tfield *pはバラバラな構造体が生成される。 *headと同じ構造体が 生成されるにはどうしたら良いか。 ご教授お願いします。m(_ _)m ちなみに使用環境はWindow7です。 ----------------------------------------- MyTpe.xs側 struct tfield { struct tfield *left[30]; int num; char str[30]; struct tfield *right[30]; }; struct tfield *talloc(void) { return ((struct tfield *)malloc(sizeof(struct tfield ))); } MODULE = MyTypePACKAGE = MyType SV* DataList(data,num) SV* data int num PREINIT: struct tfield *p,*head[30]; INIT: int i,j; CODE: if(num!=0){ p=INT2PTR(struct tfield *,SvSTASH(SvRV(data))); f(SvTYPE(SvRV(data))==SVt_PVMG) printf("MG Success\n"); or(i=0;i<6;i++){ printf("\np->left[%d]=%p\n",i,p->left[i]); } } for(i=0;i<6;i++){ /*無意味な構造体*/ head[i]->left[0]=head[i]->right[0]=head[i]=talloc(); printf("head[0]->left[%d]=%p\n",i,&head[0]->left[i]); } ref=newRV_noinc(newHV()); sv_setref_pv(ref,"main::Tie",(void*)head); RETVAL=ref; OUTPUT: RETVAL ----------------------------------------- Perl側 #!usr/bin/perl use MyType; use Devel::Peek qw/Dump/; $value1=MyType::DataList(NULL,0); print Dump $value1; $DB::single=1; $value1=MyType::DataList($value1,1); ----------------------------------------- Devel::Peekの実行結果 SV = IV(0x1209078) at 0x120907c REFCNT = 1 FLAGS = (ROK) RV = 0x5bbbcc SV = PVMG(0x18cf78c) at 0x5bbbcc REFCNT = 1 FLAGS = (OBJECT,IOK,pIOK) IV = 1243644 NV = 0 PV = 0 STASH = 0x12089bc "main::Tie"
以下のように英数字を小文字から大文字に変換し、 その後、パターンマッチさせるように記述し、 $nameをテニスコートてみてもマッチしませんでした。 たぶん\Qテニスコート\Eの\Q～\Eが問題なのだとは思うのですが \Q～\Eがないとエラーとなってしまうため、外せません。 このような場合、どうしたらいいのでしょうか？ $name = uc $name; if($name =~ /\Qテニスコート\E|TENNIS/){ push(@error, 'テニス関係は入力できません'); }
初質問させていただきます。 まず環境は、Perlversion5.16.1でActivePerlを用いております。 GD::Graphモジュールを使って棒グラフ、点グラフを作りたいと思っています。 しかし、（数字は変えてあります） .... (1)my @labels = qw(0 5 10 15 20 25 30); #X軸の目盛り (2)my @dataest = qw(3 6 9 12 15 18 21 24); #グラフにするデータ (3)my @data = (\@labels,\@dataset); ..... と、入力して出力しても、ラベルはちゃんと(1)の目盛りが置かれるのですが、肝心なグラフ化したいデータの(2)が反映せず、何故か(1)の値が再度取られ、グラフが一定になってしまいます。 http://www.gadgety.net/shin/tips/unix/perl-gd.html 上記のURLの参考プログラムのままだったらちゃんと実行されるのですが、(2)のdatasetの値をいれかえると何故かこのような現象に… どなたかご教授願えませんでしょうか？他に必要な情報があれば補足・返信いたします。
perlを使って、下記のXMLファイルを出力したいです。 <?xml version='1.0' encoding='UTF-8' ?> <member> <No>00001</No> <Product> <ProductSeqNo>0</ProductSeqNo> <ProductName>スマートフォン</ProductName> </Product> <Product> <ProductSeqNo>3</ProductSeqNo> <ProductName>モニタ</ProductName> </Product> <RegistDate>2012/11/29</RegistDate> </member> <Product>タグの部分は、編集情報を設定するため、下記のようにプログラミングしています。 my $p = { member => [ { No => "$id", Product => {}, RegistDate => "$RegistDate" } ] }; my $AddData = { Product => { ProductSeqNo => ["$seqno"], ProductName => ["ProductName"] } }; push(@{$p->{member}}, $AddData); # データを追加 my $x = new XML::Simple; my $xml = $x->XMLout($p, NoAttr=>1, KeepRoot=>1, OutputFile => "$dir/$Details", XMLDecl => "<?xml version='1.0' encoding='UTF-8' ?>"); 上記を動かすと、以下のように出力されます。 <?xml version='1.0' encoding='UTF-8' ?> <member> <No>00001</No> <Product></Product> </member> <member> <Product> <ProductName>ProductName2</ProductName> <ProductSeqNo>1</ProductSeqNo> </Product> </member> 最初のイメージで出力する方法をご存知の方は教えて下さい。
はじめまして。 以下の動物をを指定した割合でランダムに表示しようと思いますが、どのような方法がありますでしょうか。 ゴリラ(割合4) パンダ(割合2) ラッコ(割合3) スズメ(割合1) ウサギ(割合2) rand関数を使って出来そうだったのでやってみたのですが、うまく割合で分ける事が出来ませんでした。 どなたか、何かアドバイスいただけないでしょうか。 よろしくお願いいたします。
こんにちは。 PHPとPerlのリダイレクトの処理ついて質問です。 PHPのリダイレクトには、exit;を付けないとその後の処理も行ってしまいます。 header("Location:index.php"); exit; Perlのリダイレクトにも、このexit;は必要でしょうか？ print "Location:index.cgi\n\n"; exit;　←　？ 以上です。 どうぞよろしくお願いします。
Perlにおいて複数行コメントを記述するには =for comment コメントを記述 =cut と書けるとのことですが =for commentと=cutの間に 以下のように1行のコメントが記述されていても問題ありませんか？ =for comment #名前をチェック if ($FORM{'name'} eq "") { $error .= "「名前」が入力されていません。$br"; } #タイトルをチェック if ($FORM{'title'} eq "") { $error .= "「タイトル」が入力されていません。$br"; } #コメントをチェック if ($FORM{'comment'} eq "") { $error .= "「コメント」が入力されていません。$br"; } =cut
png2jpegと、resize.plを使ってサムネイルを作成しようと考えています。 ファイルをアップロードするupload.cgiは作成し、画像をサーバーに転送することはできるのですが、 上の2つのファイルをどのように関連付ければ良いのかがわかりません。 check.cgiを見ると、 PerlMagick NG NetPBM + libjpeg-progs NG cjpeg -> /usr/bin/cjpeg djpeg -> /usr/bin/djpeg pngtopnm -> Not Found giftopnm -> Not Found pnmscale -> Not Found repng2jpeg(i386-linux) dynamic :OK standard:OK static :OK libjpeg -> /usr/lib/libjpeg.so.62 libpng -> /usr/lib/libpng.so.2 libz -> /usr/lib/libz.so.1 libm -> /lib/libm.so.6 libc -> /lib/libc.so.6 ldlinux -> /lib/ld-linux.so.2 ---------------------------------------- ./repng2jpeg Found SIZE : 59556 MD5 : 6f03c0ec0 ./repng2jpeg Permisson:OK ./repng2jpeg Exec:OK ->(repng2jpeg TestMode:OK version 1.0.4) $ldd ./repng2jpeg libpng.so.2 => /usr/lib/libpng.so.2 (0x00a36000) libjpeg.so.62 => /usr/lib/libjpeg.so.62 (0x002c2000) libc.so.6 => /lib/tls/libc.so.6 (0x005fe000) libm.so.6 => /lib/tls/libm.so.6 (0x00736000) /lib/ld-linux.so.2 (0x005e4000) ---------------------------------------- と表示され、使用可能な状態ではあると思います。 以上よろしくお願いします。
Perl初心者です。 下記のようなXMLファイル(test.xml)を、CSVに変換したいと考えています。 <MODESMESSAGE> <DATETIME>20121129045500</DATETIME> <MODES>8515C4</MODES> <CALLSIGN>JAL1406</CALLSIGN> <ALTITUDE>03075</ALTITUDE> <GROUNDSPEED>177</GROUNDSPEED> <TRACK>330</TRACK> <VRATE>-832</VRATE> <AIRSPEED>000</AIRSPEED> <LATITUDE>35.4003</LATITUDE> <LONGITUDE>139.8822</LONGITUDE> <SQUAWK>3341</SQUAWK> </MODESMESSAGE> <MODESMESSAGE> <DATETIME>20121129045500</DATETIME> <MODES>86CF11</MODES> <ALTITUDE>20100</ALTITUDE> <VRATE>0</VRATE> <AIRSPEED>000</AIRSPEED> <LATITUDE>0</LATITUDE> <LONGITUDE>0</LONGITUDE> </MODESMESSAGE> データによって、要素が欠けている場合もありますが、最大で11個の要素が並んでいます。 これをCSVに変換するため、書籍を参考にしながら以下のスクリプトxml2csv.plを作りました。 使用している環境はLinuxです。 use encoding "utf8", STDOUT=>"Shift_JIS"; use XML::Parser; $parser = new XML::Parser( Handlers => {Start=>\&element_start, Char => \&cdata, End => \&element_end}); $element_name = ''; %records = {}; eval ( "\$parser->parsefile( \@ARGV[0] );"); if ($@) { chomp($@); $@ =~ s/^\n//; $@ =~ s/ at (?:[A-Z]:)?\/.*//; print @ARGV[0] . " :Error $@ \n"; } sub element_start { my ($expat, $name, %attributes) = @_; $element_name = $name; $records = {} if ( $name eq 'MODESMESSAGE' ); } sub element_end { my ($expat, $name) = @_; if ( $name eq 'MODESMESSAGE' ) { print $records{'DATETIME'} . "," . $records{'MODES'} . "," . $records{'CALLSIGN'} . "," . $records{'ALTITUDE'} . "," . $records{'GROUNDSPEED'} . "," . $records{'TRACK'} . "," . $records{'VRATE'} . "," . $records{'AIRSPEED'} . "," . $records{'LATITUDE'} . "," . $records{'LONGITUDE'} . "," . $records{'SQUAWK'} . "\n"; } $element_name = ''; } sub cdata { my ($expat, $context) = @_; $records{$element_name} = $context if ($element_name); } 実行すると、 > perl xml2csv.pl test.xml 20121129045500,8515C4,JAL1406,03075,177,330,-832,000,35.4003,139.8822,3341 test.xml :Error junk after document element at line 14, column 0, byte 345 > 上記の通り1つ目のデータについてはCSVに変換できているようなのですが、２つ目以降が変換されずエラーとなってしまいます。 お気づきの点がありましたら教えていただけないでしょうか。 よろしくお願いします。
KentWebさんのClipmail ver3.0を使用してwebformを作りたいと思っています。 http://www.kent-web.com/mail/clipmail.html ≪質問≫ 確認画面を出さずにフォーム 内容を送信することは可能でしょうか？デフォルトでは確認画面が必ず出ます。 ≪理由≫ form各項目の送信value値を数字にしてcsvファイルで出力したいのですが、質問項目数が増えると確認画面で数字で埋め尽くされてしまうのでこれを防ぎたいのです（数字を見せたくない）。 例： 質問1(name=Q1) = 満足(value=3) ⇒ Q1 = 3 http://q.hatena.ne.jp/1328250297 上記のリンクに似た質問があったので試してみましたが上記clipmailよりもversionが新しいためか、 上記リンクのcgi部分と送信ボタンのnameを変えて、送信ボタンを押すと「不正なアクセス」とエラーが表示されます。 フォーム記入後の送信ボタン(1)（<form action="clipmail.cgi method="post"">）と確認ページで表示される送信ボタン(2)(<form action="!mail_cgi!" method="post">)に違いがあるので送信ボタン(1)で(2)のアクションを呼び込めば良いのだと思いますが、どこを触ればいいのかが思考錯誤してもまだわかりません。 確認画面は入力ミス等を防ぐ重要なステップと認識していますが、form記入値を確認画面なしでダイレクトに送れないものか（もしくは確認画面で表示されるvalue値とcsv出力されるvalue値を変えることはできないのかどうか）と思い質問させていただいております。 私のcgi等に対する知識はど素人レベルです（webpageの知識としてはhtml/cssだけが少しわかる程度です。）どなたかわかる方がいらしたら、どこを変更すれば良いのかを教えて頂けると助かります。よろしくお願い致します。 Ｐ．Ｓ． Kentwebさんのサポートページで質問をしようとしたのですが問題のあるページのアドレスhttp://を入力しないと質問できませんでした。動作や不具合に関する質問ではなかったのでこちらで質問させてもらっています。
perlにてテキスト書き出しをしをしたとき 書き出したテキストファイルの先頭にどうしてもスペースが入ってしまうので そのテキストを別のcgiにて読み込み表示するときに 先頭のスペースを削除しようとしていますがうまく行きません 多分スペースをパターンマッチさせるのだろうと思うのですが いまいち私の理解が足らないようでぜひどなたか教えてください。 （1つ目のcgi）------------------------------- フォームから入力$title $subtitle $contentsとしそれを下記のような形で読み込み（途中省略） use CGI; $query = new CGI; $title = $query->param('title'); $subtitle = $query->param('subtitle'); $content = $query->param('content'); #タブ区切りにし@memoryに代入 @memory="$meday\t$title\t$subtitle\t$content\t$number\t$namberc\n"; open(FILE,">>../data/memory.txt")||&error("$datafile 外部ファイルが開きませんでしたエラー"); print FILE"@memory"; close(FILE); ----------------------------- それを違うcgiのソースで読み込み------------------------------------ （2つ目のcgi) open(IN, "< sys/data/memory.txt"); eval{flock(IN,1)}; @inbun=<IN>; for($i=0;$i<@inbun;$i++){ @retudata=split(/\t/,$inbun[$i]); $inbun[$i] =~ s/^\s+//g; $retu =~ s/^\s+//g; @retudata[$i]='$retu[0]\t$retu[1]\t$retu[2]\t$retu[3]\t$retu[4]\t$retu[5]\n'; ; }@data=@inbun; open(FILE,">sys/data/memory.txt")||&error("../data/memory.txt 外部ファイルが開きませんでしたエラー"); print FILE"@data"; close(FILE); close (IN); --------------------------------------------------- 追加するとなぜか先頭にスペースが入りどうしてもとれないんですが どうしたら良いでしょうか？ ちなみに結果は下記のとおりです。 20121122test1test1test1あいうえおABCDEFG1112223157 20121122test2-rtest2-rtest2-rあいうえおABCDEFG21122231647 20121122test3test3test3あいうえおABCDEFG3112223254 乱筆乱文ご容赦ください。 宜しくお願いします。
インターネットでpingサーバーに更新pingを送信する方法を調べておりましたところ、 以下のような方法が見つかりましたので、試してみました。 すると、たまに動作するのですが、たいていの場合は以下のエラーになります。 The script did not produce proper HTTP headers. 使用しておりますサーバーはコアサーバーです。 #!/usr/bin/perl use XMLRPC::Lite; my $name = "サイト名"; my $url = "http://www.hogehoge.net/"; #PING送信先######################################## my @ps = ( 'http://pinghoge.jp/ping/', 'http://pinghogehoge.jp/ping/', ); ################################################### foreach (@ps) { my $result = eval { XMLRPC::Lite ->proxy($_) ->call('weblogUpdates.ping', $name, $url) ->result; } } エラーの解決方法など、おわかりになる方がおられましたら、ご教示を頂けますと幸いです。 どうぞ宜しくお願い申し上げます。
perlでバッチ処理を書いています。ループ処理に時間がかかるのでParallel::ForkManagerというモジュールを使いマルチスレッド化しています。 ふと思ったのですが、マルチスレッドにせず、単純にこのperlのスクリプトを同じタイミングで複数起動するだけでもマルチスレッド並に速度は向上するのでしょうか？ ご教示くださいませ。
タブ区切りのテキストファイルの中から、タブで区切られた3列目～5列目だけを抜き出す、というような作業を実施したいのですが、どのように書けばよいでしょうか? いろいろグーグルで検索してみましたが、解にたどり着けず、ご存知の方がいらっしゃればご教授いただければ幸いです。 よろしくお願いします。
WindowsでActivePerlを使っています。一部の処理を高速化するためにInline Cを導入したのですが、出来れば、このCの部分でOpenMPが使えればベストです。単純にプロンプトから > perl ***.pl /openmp としても動かないようですし、Inline CにおいてOpenMPによる並列化は実装可能なのでしょうか。
Perlで繰り返し計算をする部分を高速化しようとInline Cを使ってC言語のサブルーチンを作りました。 C言語単体なら、巨大な配列はポインタを使って引き渡すのですが。 Inline Cを使って、PerlからCへの巨大配列の引渡し方法が分かりません（＞＜； 以下のように、リファレンスで渡してポインタで受け取る事もできないし。。。助けてください use Inline C; my@data; for(my $t=0;$t<=10000000;$t++){ $data[$t]=$t; } # C言語による処理 my $x = my_function_1(\@data); print"0から10の合計は$x\n"; __END__ __C__ // サブルーチン_1 long my_function_1(long *data){ long t; long t1=0; for(t=0;t<=10000000;t++){ t1=t1+data[t]; } return t1; }
たびたびお世話になっております。 PERL 5.14.2 (Windows 7)を　コマンドプロンプト上から動かしています。 use strict; use warnings; @multi_dimension_arrays; # $multi_dimension_array[$x][$y][$z] というような配列の中身を最初に０初期化したいのですが $x, $y, $zがどれだけ増えるかわかりません。 （0初期化していないので、大小比較などでエラーとなることがあります） 0初期化の方法をお教えください。
たびたびお世話になっております。 PERL version 5.14.2 をWindows 7 のコマンドプロンプトから起動して使っています。 use strict; と一行目に書くと　宣言されていない変数があれば拒絶されるとのことで #!/usr/bin/perl use strict; use warnings; $a = 10; print "$a\n"; というスクリプトを書きました。が、すんなり動いてしまいます。 use strict; は　どうすればうまく効くのでしょうか。 ご指導お願いします。
perlを使ったcgiを作ろうと思い、こんなプログラムを書いてみたのですが、htmlのタグに囲まれた部分の日本語が文字化けしてしましいます。ファイルの文字列は上手く表示できるのですが… どうすればいいでしょうか。 文字コード判別をしてみたところ、このプログラム自体はShift-JISで書かれているようです。 開いているファイルはutf-8のようです。 #!/usr/bin/perl #ヘッダの表示 print "Content-Type: text/html; charset=utf-8\n\n"; print "<html>\n"; print "<head><title>掲示板</title></head>\n";#これが文字化け print "<body>\n"; print "<input type=\"text\" name=\"mail\" size=\"20\" value=\"\"><br>\n"; print "メッセージ<br>\n";#これも文字化け my $File = 'party0339.html'; if (-e $File) { #####@ファイルを開く…上でファイルが存在してることを確認して開けない場合はエラーメッセージ open(FF,"<:utf8",$File) or die "ファイル：$File を開けない $! \n"; my @FILE = <FF>; close (FF); ####@読み込んだデータを$Dataに格納する foreach (@FILE) { $Data = $_; print "$Data<br>\n"; } } #フッタの表示 print "</body>\n"; print "</html>\n"; exit (); 対策や原因などを教えてくださるとありがたいです。よろしくお願いします。
カレントディレクトリにディレクトリaaa, bbb, cccが在り、さらにそれぞれのディレクトリに11_2とか9_20などのような1から20までの数字を_で2個つなげたディレクトリが在ります。そのディレクトリの中のファイル名を出力する以下のスクリプトgetname.plを作成したのですが、 Unrecognized escape \d passed through at ./getname.pl line 9. Unrecognized escape \d passed through at ./getname.pl line 9. というエラーが出ます。全く原因がわからないでいます。もしよろしければ解決法をご教示いただけないでしょうか。どうぞよろしくお願いします。 #!/usr/bin/perl use strict; use warnings; my @directory=qw/aaa bbb ccc/; foreach my $dname (@directory) { opendir(DIR,"./$dname/\d+_\d+"); my @dir=readdir(DIR); close(DIR); print join("\n",@dir); } print "\n";
"a.csv"と"b.csv"を比較して、一致しない場合は"a.csv"を"b.csv"に置き換えたいと思っています。 しかし、"a.csv"と"b.csv"の先頭9行は必ず一致しないデータが入っているので、 1行目～9行目まではチェックせずに、以降の行からチェックするようにしたいです。 このようにプログラムするにはどのようにしたらいいのでしょうか。 お手数をおかけしますが、ご教授いただけると幸いです。 また、見本のソース等をいただけると嬉しいです。
windows7, ActivePerlです。 ppm-shell↓ install Tk↓ とすると install failed: Can't find any package that provides Tk となります。 他のモジュールも同様です。 分かるかたいらっしゃいますか。
use Win32::API; my $MessageBox = Win32::API->new("user32", "MessageBoxA", "NPPN", "N"); $MessageBox->Call(0, "Hello, World!\n", "Message", 0); #------------------------------ my $test = Win32::API->CreateWindowEx("user32", "MessageBoxA", "NPPN", "N"); #------------------------------ 以上の記述はXP(32bit)だと動いたと思うのですが、 7(64bit)だと致命的エラーらしきものが出るようになりました。 分かるかたいますか？
Perl 初心者です。　いい足し算ができず、困っています。my $Aの数字を足していくだけなのですが、 うまくいきません。　何が悪いのかわかる方教えてください。　よろしくお願いいたします。 Perlではsumをつかわないでしょうか？　下記は４と２と３なので、９になるはずなのですが。。。。 その１ my $A = 4,2,3; $B = (sum($A)); print "$B" その２ my $A = 4,2,3; $B = subsum($A); print "$B"
perlでパターンマッチを使ったifの条件が必ずTRUEになってしまいます。 以下は条件です。二つのファイルがあって、片方のファイルのある列の文字列と別のファイルのある列の文字列が一致したら一致した行の1列目を出力するというプログラムです。 perl v5.12.3 『oct_gene.csv』は以下のような2列のファイルで、2列目であるalphabetの群は空白で区切られています。文字コードはASCIIです。 1zinc finger protein of the cerebellum 3 0stathmin-like 2 . . . . 『RNA.csv』は以下のような3列のファイルで、3列目のalphabet群は同じく空白で区切られています。文字コードはUTF-8です。 1NM_324891 sin3 associated polypeptide 2 NM_53344 Nanog homeobox . . . open (WRITE, ">RNAseq_Oct.csv"); open(FILE, "RNA.csv"); while($line = <FILE>){ chomp $line; @fact = split /\t/, $line; open(OCT, "oct_gene.csv"); while($octline = <OCT>){ chomp $octline; @oct = split /\t/, $octline; if($fact[2] =~ /$oct[1]/){ print WRITE $fact[2] . "\t" . $oct[1] ."\n"; last; } } close (OCT); } close (FILE); close (WRITE); この中のif文がうまく働かず、whileで繰り返すまでもなく必ず if($fact[2] =~ /$oct[1]/)　が成り立ってしまいます。 どなたか詳しい方、どうかご教示願います。 それではよろしくお願いします。
毎分、特定の数値を取得し、外部のファイルに保存しているのですが、 前の時間と比較してデータの抜けがあった場合、 "データが抜けている時間"＋"前回の数値"を追加して上書きをしたいのですが、どのようにしたらいいのでしょうか。 ご教授いただけると幸いです。 例） 補完前（読み込むファイル ・・・ acf.csv） ----- 00:01:00,227 00:02:00,234 00:04:00,254 ---- 補完後（書き込むファイル ・・・ acf.csv） ----- 00:01:00,227 00:02:00,234 00:03:00,234 00:04:00,254 ---- また、できればソースも書いていただけるとありがたいのですが。。。 よろしくお願いいたします。
データベース的なCGIを作ろうとしています。 1つ目の情報を見た後に次のを見る時の「次へ」ボタン(1つ前のデータに移動)なのですが、各データを削除せず続き番号なら、$noから1を引いた数のデータに移動すればいいだけですよね。 $nxt=$no--; <A href="$script?no=$nxt">次へ</A> しかし、これだと過去データを削除してしまった際に削除したデータを参照することになってしまう場合があります。 これを回避するにはどのようにしたらよいでしょうか?
perlプログラムについて 処理１　の　アウトプットデータを用いて、処理2を行うというのを１つのperlのプログラム内で実装したいと考えています。 処理１のアウトプットファイルの書き出しに時間がかかり　処理２が先に動き、ファイル読み込みできずに終わってしまいます。 処理１のアウトプットファイル書き出しが終了を待ってから、処理２を実施したいのですが、 どのように記載すればよいのでしょうか？ 例）　perl　program.pl AAA > BBB program.pl　内 open(OUT1,">　program1_work"); open(ARG,$ARGV[0]); while(<ARG>){ 処理１ print OUT1 "XXXXXX"; ｝ close(ARG); open(ARG1,OUT1); while(<ARG1>){ 処理2 print "XXXXXX"; ｝ close(ARG1);
ファイルをopenできない時、エラー表示しているのを 　if (!open(IN,"$userfile")) { &error("投稿データファイルを開けません "); 別のページを(abc.cgi)表示したいのですがよろしくお願いします
【データ】 (A) A　A2　"one"　7 A　3C　three　9 B　DD　"two"　11 C CDE　four　25 C　4D　five　33 D　YY　six　27 ・ ・ (B) A　okinawa kagoshima miyazaki B　kumamoto oita D fukuoka E　saga nagasaki ・ (A)と(B)のデータを比較し、先頭の単語が一致した時のみ、先頭の単語を除いた(B)の行を (A)の末尾に加えるという処理をしたいです。 【目標】 A　A2　"one"　7　okinawa kagoshima miyazaki A　3C　three　9　okinawa kagoshima miyazaki B　DD　"two"　11　kumamoto oita C CDE　four　25 C　4D　five　33 D　YY　six　27　fukuoka ・ ・ 以前、回答して頂いた方法を踏まえ、以下の処理を行いましたが上記のような結果がでません。 宜しくお願いします。 #!/usr/bin/perl open(FILE1, "<aaa.txt") || die "File1 Open Error! \n"; open(FILE2, "<bbb.txt") || die "File2 Open Error! \n"; open(OUT, ">zzz.txt") || die "OUT Open Error! \n"; my @data1 = <FILE1>; my @data2 = <FILE2>; chomp @data1; chomp @data2; foreach my $line1 (@data1) { my @array1 = split(/\t/, $line1); push @{$hash1{$array1[0]}}, @array1[1, -1]; for my $key1 (sort keys %hash1){ foreach my $line2 (@data2) { my @array2 = split(/\t/, $line2); push @{$hash2{$array2[0]}}, @array2[1, -1]; for my $key2 (sort keys %hash2){ if($key1 eq $key2){ print OUT join("\t", ($key2, @{$hash2{$key2}}, @{$hash1{$key1}})), "\n"; } } } } }
perlのハッシュでキーから値を得ることは出来ますが、その逆に値からキーを得るような関数ってありますか？探してもみつかりませんでした。識者の方々教えてください。
以下の環境にてURLエンコード（shiftjis)された文字を、UTF8として ブラウザに表示させたいのですが、上手く表示されません。 環境： サーバ：linux apache レンタルサーバ ※Encode.pm、Jcode.pm無し。追加モジュールインストール不可。 Perl version: 5.006001 ソースエンコード：utf-8 実行ソース： ------------------------------------ use utf8; require 'jacode.pl'; #　$mojiに予めURLエンコードされた文字が格納されています。 #　例として「マウス」デコード前（%83%7D%83E%83X）とします。 #URLデコード $moji =~ s/%(..)/pack("c",hex($1))/ge;　 #デコードされたsjis文字をUTF8へコンバート jcode::convert(\$moji, "utf8","sjis"); print ($moji); ----------------------------------- 例のように「マウス」と言う文字が$mojiに格納されている場合、 以下のような文字化けとなってしまいます。 ï¾ãç¿ï½¾ï¾ã¹ 正常にマウスと表示させるにはどうすればよろしいのでしょうか。 アドバイスを宜しくお願いします。
現在、Perlにて外部のcsvファイルを読み込み、"重複行"と"空白行"を削除するプログラムを作成しています。 重複行を削除する部分は ------ open(IN, "csvtime.csv"); @data = <IN>; close(IN); @data = grep {!$count{$_}++} @data; open(OUT, "> csvtime.csv"); print(OUT @data); close(OUT); ------ でできたのですが、空白行を削除する部分がわかりません。 申し訳ないのですが、お教えいただけないでしょうか。 また、空白行で最初の空白行は残すようにしたいです。 よろしくお願いいたします。 例） 読み出しデータ ----- (ヘッダ1行目) (ヘッダ2行目) (ヘッダ3行目) (必要な空白) (ヘッダ4行目) 00:00:00,302 00:01:00,274 00:02:00,272 00:03:00,248 00:04:00,237 00:05:00,239 00:05:00,239 00:06:00,256 00:07:00,260 00:08:00,250 00:09:00,253 00:10:00,241 ----- 加工後データ ----- (ヘッダ1行目) (ヘッダ2行目) (ヘッダ3行目) (必要な空白) (ヘッダ4行目) 00:00:00,302 00:01:00,274 00:02:00,272 00:03:00,248 00:04:00,237 00:05:00,239 00:06:00,256 00:07:00,260 00:08:00,250 00:09:00,253 00:10:00,241 -----
同じような質問をしていると思うのですが、外部ファイルの数値をそのまま出力するのではなく、外部ファイルの数値を、ある値で代入した数値を出力したいと考えています。 以下の.plファイルを作成しました。 for($line =0;$_ =<stdin>;$line++){ if($line < 400){ @line = split/,/,; $calibration1 +=$line[1]; $zero +=$line[2]; }elsif($line < 800){ @line = split/,/,; $calibration2 +=$line[1]; }else{ @line = split/,/,; $pressure =$line[2]; } } $zeroten = $zero / 400; $calibration = ( $calibration2 - $calibration1 ) / 400; for ($i=0;$i <= $pressure;$i++) { $pressure_data = ( $i - $zeroten ) / $calibration; print"$pressure_data \n"; } 13行目までで、外部ファイルの数値の合計を算出しました。（15、16行目で平均値としていますが・・・） 19行目以降で、9～12行目の値を15、16行目で算出した値を代入して、その代入した数値を出力したいと考えています。 上で示した.plファイルでは何も表示(エラー表示もないです)されませんでした。 外部ファイルは下のようになっています。 1,10,22 2,20,33 3,30,44 ・ ・ ・ 19行目以降が間違っていると思うのですがどうすればよいのでしょうか。（基本的なことかもしれないですけど・・・） お願いします。
同じ行で重複した単語を削除したいです。 テキストファイル sapporo　aomori　akita　iwate　akita　yamagata sendai　miyagi　hukushima　miyagi akita mito ・ ・ 上記のようなファイルの同じ行で重複した単語を削除し下の形にしたいです。 sapporo　aomori　akita　iwate　yamagata sendai　miyagi　hukushima　akita mito ・ ・ open(FILE1, "<xxx.txt") || die "File1 Open Error! \n"; open(OUT, ">zzz.txt") || die "OUT Open Error! \n"; $string1 = <FILE1>; my @array = split(/\t/,"$string1"); my %count; @array = grep {!$count{$_}++}@array; foreach my $element (@array) { print OUT "$element\t"; } close(FILE1); close(OUT); このプログラムを実行すれば初めの一行は重複した単語を削除できるのですがそこで終了してしまいます。2行目、3行目・・といったように複数行に対して重複した単語を削除するためにはどのようにすればいいのですか。宜しくお願いします。
繰り返し処理の使い方について質問です。以下の.plファイルを作成しました。 for($line =0;$_ =<stdin>;$line++){ if($line < 400){ @line = split/,/,; $data1 +=$line[1]; } } for($line =0;$_ =<stdin>;$line++){ if($line < 800){ @line = split/,/,; $data2 +=$line[1]; } } $data_1 = $data1; $data_2= $data2; print"$data_1 \n"; print"$data_2 \n"; この.plファイルで合計計算の実行を試みたのですが、data_2の値が0でした。(data_1は合計計算が出来ています。) 繰り返し処理の2つ目はなぜ0なのでしょうか、またdata_2の合計計算を実行するにはどうすれば良いのでしょうか。 お願いします。
perlの出力結果を.txtにして出力しているのですが、出力先が.plのあるところ以外に指定することはできるのでしょうか？ <STDIN>でtxtデータを読み込んでいるのですが、例えば入力したtxtがCドライブのＡというフォルダにある場合Aのフォルダ内に出力結果を出し、WドライブのＢというフォルダのtxtを入力した場合はBのフォルダ内に出力結果を出したいです（入力したtxtと同じ場所に出力したい）。 わかる方がいたら教えてください、お願いします。m(_ _;m)
正規表現の質問となります。 現在 perl にて開発中です。 やりたいこととしては、任意の文字列の中から "-" "0-9"以外を削除したいです。 例） my $str = "iPhone4s\x{306f}\x{753b}\x{8cea}\x{306f}\x{3010}\x{3010}\x{3044}\x{3044}\x{3011}1.00\x{3011}\x{3051}\x{3069}\x{3001}\x{5f62}\x{304c}\x{3010}\x{3010}\x{53ef}\x{611b}\x{304f}\x{3011}-1.50\x{3011}\x{306a}\x{3044}\x{ff01}iphone3Gs\x{306f}\x{4e38}\x{3044}\x{5f62}\x{304c}\x{3010}\x{3010}\x{7d20}\x{6575}\x{3067}\x{3057}\x{3087}\x{3011}3.00\x{3011}\x{3002}\x{3042}\x{ff5e}\x{3042}\x{3001}\x{3042}\x{3068}\x{306f}\x{96fb}\x{6ce2}\x{304c}\x{6539}\x{5584}\x{3055}\x{308c}\x{305f}\x{3089}\x{3010}\x{3010}\x{3044}\x{3044}\x{3011}0.00\x{3011}\x{306e}\x{306b}\x{306a}\x{3041}"; # $strの値はランダムとします $str =~ s/\D//g; print "$str\n"; 出力結果 -> 41001503300000 成功すれば -> 4100-1503300000 どなた様か教えて頂ければと思いますmm
perlで.txtファイルを読み込むのはどうすればいいのでしょうか？ コマンドライン引数ではなくC言語でいうscanfのようにプログラム実行した後にtxtファイルを指定して読み込ませたいです。 わかる人がいたら教えてください、お願いしますm(_ _;m)
perlでデータを並び替えて整理したいです。 【元データ】 A　a　b A　c　d A　e　f A　g h B　i　j B　k　l B　m　n C　o　p C　q　r C　s　t C　u　v ・ ・ ・ 上記のデータを下記のように並び替えしたいのですが上手くできずに困っています。 どのような記述をすれば良いのでしょうか。間の空白はタブ区切りです。 【目標】 A　a　b　c　d　e　f　g　h B　i　j　k　l　m　n C　o　p　q　r　s　t　u　v D ・ 現在、元データから A B C D ・ ・ というデータを作り、元データと比較していますが上手くいきません。 for($i=0; $i<@key; $i++){ print OUT "$key[$i]"; for($j=0; $j<@data; $j++){ if($key[$i] =~ /$data[$j]/){ 　　　#部分一致 print OUT "$'"; } } print OUT "\n"; } 部分一致の行を正規表現を用いて上手く処理したいのですがやり方がわからず躓いています。 宜しくお願いします。
Windows7でCygwinコマンドを使用しています。 コマンドに次の2通りを入力しました。 1. $ head -2 data.csv 1000,-60 2000,-30 　　　・ 　　　・ 2. $ perl test.pl <data.csv 1000,-60 2000,-30 　　　・ 　　　・ test.plは次のように書きました。 for($line =0;$_ =<stdin>;$line++){ if($line < 5){ print"$_\n"; } } １つ目、2つ目ともにdata.csvのデータをコマンド上に出力していますが、どうして行間があったりなかったりしているのですか。 また、行間設定とかできるのですか。
フリーのＣＧＩプログラムを探しています。 利用者に最初にメールアドレスを入力してもらい、 そのメールに記載されたＵＲＬをクリックするとメールフォームのページが開くというＣＧＩです。 これならメールアドレスの間違いが防止できると思いますので、どなたかご存じでしたら教えてください。 よろしくお願い致します。
外部ファイル(ここではCSVファイル)内の列ごとの数値を合計し、結果をコマンドに表示したいです。 数値を合計するためsum関数を用いることは分かったのですが、各列ごとの出力・数値の合計はどのようにすればいいのですか。 合計計算のイメージはこんな感じです。 CSVファイル内 1 , 25 2 , 50 3 , 75 　・ 　・ 　・ プログラムで外部ファイルを読み込み、各列ごとの和を計算し、 Σx=1+2+3+・・・ Σy=25+50+75+・・・ コマンド(Cygwinを使用しています)上で、 x = (数値) , y = (数値) と表示することです。
こんにちは。Perlについて教えていただきたいことがあります。 こう書くと$temp_pathに値が入ります。 ----------------------------------- my $e = CGI->new(); my $q = CGI->new(); my $fh = $e->upload('file'); my $temp_path = $e->tmpFileName($fh); ----------------------------------- こう書くと$temp_pathに値が入りません。 ----------------------------------- my $q = CGI->new(); my $e = CGI->new(); my $fh = $e->upload('file'); my $temp_path = $e->tmpFileName($fh); ----------------------------------- tmpFileNameは最初に作成されたオブジェクトでないとならないような 仕様があるのでしょうか？ それとも、他に原因があるのでしょうか？ どうかよろしくお願いします。
PerlでCSVファイルの処理をしようとしています。 CSVファイル（ここではdata1.csvとします）の中身は、A列とB列に数値が1000行程表記されています。 -5,1 -4,2 -3,3 　・ 　・ 　・ 作成したPerlのファイル（ここではtest1.plとします）下のようにし、 while ($_=<stdin>){ print"$_\n"; } Cygwinコマンド上で、 $ perl test1.pl <data1.csv と入力すると、CSVファイル(data1.csv)の数値がCygwinコマンド上に全て表記されます。 前置きが長かったのですが、CSVファイル(data1.csv)の3行目までの数値だけをCygwinコマンド上に表記したい場合、どのようにプログラムすればよいのですか。 お願いします。
フリーのＣＧＩをパーミッションを変える程度で設置できる程度のPerl超初心者です。 下のプログラムは、フォームを使って利用者のメールアドレスに送信してメールアドレスの確認のためのに書かれた部分らしいと思いますが、 通常のパソコンでは、届いたメールは文字化けしていません。 しかしながら、私が持っているauのiPhoneでは着信したメールが見事に文字化けしています。 ここより上も下も関係ない感じがするので、この辺りを切り取ってみました。 auのiPhoneで文字化けしないようにするにはどうすればいいのでしょうか？ それともこの辺りの記述じゃないのでしょうか？ お手数をお掛けしますが、教えてください。 お助けください。 よろしくお願い致します。 if ( $mail =~ /^[a-zA-Z0-9_\.\-]+?@[A-Za-z0-9_\.\-]+$/ && $mail !~ /[\[\]\,\;\:\\\s\r\n\t]/) { $print .= "<CENTER><BR><BR>$mail宛てにメールを送信致しました。<BR><BR>しばらくたってもメールが届かない場合はメールアドレスが間違っている可能\性があります。<BR><BR>メールが届かない場合は再度お願い致します。<BR><BR>\n"; open(OUT,"| $sendmail -t"); &jcode'convert(*mailcheckkenmei,'jis'); print OUT<<"EOM"; To: $mail From: $mastermail Subject: $mailcheckkenmei EOM print OUT "お客様のメールアドレスを確認しました。\n下記URLにアクセスしてください。\nこのメールに心あたりがない場合はお手数ですが返信してお知らせください。\n\n\n"; print OUT "$basedir/formmail.cgi?query=$encmail"; close(OUT); &print($print); exit; }else{ if ($mail){ $print .= "<p><Font color=\"red\">メールアドレスを確認してください</FONT></p>\n"; } }
以下のCGIでは$MAILTO に送信されますが、追加的に、申込者に自動返信（文章つき）をするにはどのように修正するのですか。 #! c:/perl/bin/perl require "jcode.pl"; require "mimew.pl"; $SENDMAIL = 'c:\sendmail\sendmail'; # sendmailのパス $MAILTO = 'のがわ <nogawa@example.net>'; # メールの宛先 # フォームデータの取得 if($ENV{'REQUEST_METHOD'} eq 'POST') { read(STDIN, $query, $ENV{'CONTENT_LENGTH'}); } else { $query = $ENV{'QUERY_STRING'}; } # フォームデータの復元 foreach $pair (split(/&/, $query)) { ($key, $value) = split(/=/, $pair); # 文字のデコード $value =~ tr/+/ /; $value =~ s/%([0-9a-fA-F][0-9a-fA-F])/chr(hex($1))/eg; $FORM{$key} = $value; } # MIMEエンコード $mail_to = mimeencode($MAILTO); $mail_from = mimeencode($FORM{'name'}); $mail_subject = mimeencode($FORM{'subject'}); # 文字コードの変換 $body = jcode::jis($FORM{'msg'}); # メールヘッダーの生成 $header = <<END; To: $mail_to From: $mail_from<$FORM{'email'}> Subject: $mail_subject Mime-Version: 1.0 Content-Type: text/plain; charset=ISO-2022-JP END # メールの送信 open(MAIL, "| $SENDMAIL -i -t -f $FORM{'email'}") or die("エラー：sendmailへのパイプが開けません"); print MAIL $header, $body; close MAIL; # サーバー出力 print <<END; Content-type: text/html; charset=Shift_JIS <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"> <html> <head><title>めーるふぉーむ</title></head> <body> <p>メールを送信しました。</p> </body> </html> END
SJIS、EUC、UTF8、のどれがくるかわかりませんが、 かつ、その中で、どの言語がくるかわかりませんが、 その中で、日本語だけを、可能な限り容易に判別する方法は ありますでしょうか？ また、既存のモジュールを可能な限り使用しない方法でもあります。 ＃pureperlで書かれていれば、移植はできますが ひらがな、カタカナを抽出すればいいのもありますが、 仮対処にしかならず、漢字だけの場合の抽出が できなくなってしまいます。 以下、参考までに・・ 内部コードがSJIS？ ＃内部コードも、SJIS、EUC、UTF8のどれになるかわかりません。 UTF8の日本語がきたら、SJISになる UTF8の中国語がきたら、化ける（捨てる対象 EUCの日本語が来たら、SJISになる EUCの韓国語がきたら、化ける（捨てる対象） SJISの日本語が来たら、そのまま ・・のような感じになってしまいますので。。 よろしくお願いします。
'2012/04/03-20:14:00' => 'WIND' => '5.7' '2012/04/03-20:14:01' => 'WIND' => '5.9' … という風に時間と風速が書かれたテキストデータがあるのですが、この風速が'20'以上の場合の行のみを抽出して表示したいのですが、どのようなプログラムを書けばよろしいでしょうか。
メモ帳で以下のようなプログラムを書きました。(file_1.plで保存しました) #!/usr/bin/perl $file="data.csv"; $cityfile="name.txt"; $outfile="data_out.csv"; open (IN, $file) or die "$!"; open (FILE, $file) or die "$!"; open (OUT, ">$outfile") or die "$!"; @city = <FILE>; ・ ・ ・ これをCygwinコマンド上で、 perl file_1.pl と入力し、Enterを押すと「No such file or directory at file_1.pl line 9.」と表示されます。 line9はopen (FILE, $file) or die "$!";という文です。 どこが間違えで、どのように修正すればよいのでしょうか。 よろしくお願いします。
現在アンケート収集のため、アンケートフォームの作成を行っています。 試行錯誤しているのですがどうしてもinternal server errorとなってしまうためご質問させてください。 下記がhtml、plの記述です。 ---------------------------------------------------------------------------------------- [HTML] <form action="check.pl" method="post"> <table> <tr> <td>■実施日</td> </tr> <td><input type="text" name="date" value="" /></td> </tr> <tr> <td><input type="submit" value="送信確認" /></td> </tr> </table> </form> ---------------------------------------------------------------------------------------- [Perl] #!/usr/bin/perl/ use CGI; $cgi = new CGI(); $date = $cgi->param('date'); $cgi->charset('Shift-JIS'); $date = $cgi->escapeHTML('$date'); use Date::Simple; if($date eq Date::Simple::data($date)) { $date_check ='ok'; } else { $date_check = ''error; } print $cgi->header(-type=>'text/html',-charset=>'Shift-JIS'); print $cgi->start_html(-title=>'送信確認',-lang=>'ja'); print '実施日'; print $date; if($date_check eq 'error') { print '(入力形式を確認してください。)'; } print '<br />'; print $cgi->end_html(); ---------------------------------------------------------------------------------------- Date:Simpleなどのエラーチェック機能を削除するとperlのエラーは検出されなかったのですが、動作しません。 パーミッションは755です。 念のため拡張子を.cgiに変更して試しましたが変化はありませんでした。 (※テスト用のcgiは動作しました。) 原因がお分かりの方がいらっしゃいましたら、ご回答お願い致します。
単方向じゃなくて双方向でなおかつ切り替え可能なリファレンスがほしいです。 AAA = bbb とするとき、 AAAからbbbを返し、bbbからAAAを返す物がほしい。 さらに、AAA = ccc と書き換えた場合、 bbbとの関係は解除される。 具体的には、座標 x y に物体 a とb があるとき、 xyからaとbが得られます。 a b 自体はそれぞれリファレンスであり、物体の詳細データが書き込まれてます。 同様、xyもリファレンスであり、位置についての情報が書き込まれています。 ここまでは単純な相互参照で解決できるのですが、 困ったことに物体は移動をおこないます。車が走って隣町に行くように。 その時、座標から物体にアクセスする場合と、 物体から座標にアクセスする場合がおかしくならないように一発で解決する手段を教えてください。 なお、現在は全く無関係な単方向なリファレンス(ようは普通のリファレンス)を二つもちいています。 位置を書き換えるときは、物体から座標にアクセスし、 その座標から自分自身へのリンクを検索し、 そして削除し、 自分自身の座標へのリンクを削除し、 自分自身の新しい座標へのリンクを埋め込み、 そしてその座標にアクセスし、 自分自身へのリンクを埋め込むという、かなりカオスなことになっています。 普通、位置と物体って同時に平等に存在するものじゃなかったっけ？うーむ。 記述がカオスにならない良い方法を教えてください。 あと、何万回もループするプログラムなので出来れば速いやつがいいです。
プログラミングを始めたばかりです。 Cygwin上でPerlを行っています。 下に示すように、計算プログラムの中にデータを記入し、そのデータを処理することは出来たのですが、外部のファイルを読みそのデータを処理する方法が分かりません。 # y = ax + bを求める @x=(1,2,3); @y=(1,4,9); for($i=0;$i<$n;$i++){ $A = $A + ($y[$i] * $y[$i]); $B = $B + ($x[$i] * $x[$i]); 　　・ 　　・ 　　・ $a=・・・ $b=・・・ print("a=$a,b=$b"); パールファイル（.pl）内に @x=(1,2,3); @y=(1,4,9); のように記載すると、データが変わるたびにファイル内の数値を入れ替えないといけないと思うのですが、cygwinのウィンドウに、 $ ./lesson.pl 10 <data1.csv のように入力しEnterすると、ファイル内の数値を入れ替えないで指定したファイル（ここではdata1.csv）のデータが処理されると思うのですが、その場合パールファイルをどのように記述すればよいのでしょうか。また、cygwinのウィンドウにどのように入力すればよいのでしょうか。 よろしくお願いします。
プログラミングを始めたばかりです。 Cygwin環境でPerlを行っています。計算プログラムをPerlで書いています。 下に示すように、計算プログラムの中にデータを記入し、そのデータを処理することは出来たのですが、外部のファイルを読みそのデータを処理する方法が分かりません。 # y = ax + bを求める @x=(1,2,3); @y=(1,4,9); for(<stdin>){ for($i=0;$i<$n;$i++){ $A = $A + ($y[$i] * $y[$i]); $B = $B + ($x[$i] * $x[$i]); 　　・ 　　・ 　　・ $a=・・・ $b=・・・ print("a=$a,b=$b"); open (IN, $file) or die "$!"でｃｓｖファイルに記載されてある数値をCygwin上で実行することは出来ました。 作成したプログラムとcsvファイルをCygwinで入力して、入力したｃｓｖファイルのデータを処理（直線近似して傾きを求めたりなど）したいのですが、どうすればよいのでしょうか。 よろしくお願いします。
Perlで書かれたソースを以下のように書き換えたいと考えています。 【変換前】 my $message = Convert( From => 'Shift_JIS', To => 'utf-8', Text => "（UTF-8の文字列）", ); 【変換後】 my $message = Convert( "（UTF-8の文字列）" ); ソース・ファイルは非常にたくさんあるのでスクリプトを組んで一括で行いたいと考えています。 容易く書き換えを完了できる方法はないでしょうか？ ■前提条件 - 別の場所に出力するようにする場合はディレクトリ階層も維持する。 - インデントされている場合はインデントを保持する。 perl -pi -e 's///'で置換することが最も簡単そうですが、今回は複数行に渡るため、 s///の部分が非常に複雑になりそうです。なので、s///の部分をスクリプト・ファイルかなにかに 置き換えて、下記のように実行できればと考えているのですが、（何かしらのオプション）の部分が よくわかりません。。 perl -i （何かしらのオプション） （ファイル名） （ソースファイル名）... もちろんもっと良い方法があれば、その方法が良いです。 よろしくお願いいたします。
私はレス機能付きの掲示板を作成しました。 そこで質問なんですが、親記事に対してレスが付けられた場合、その親記事をトップへソートしたいんですが、どうすればよろしいでしょうか？ ソースコードはこれです。 http://daisykatsura.dip.jp/bbs.txt
Windows2003上でActivePerl(V5.14)を使用しています。 SMTP送信に使用するため、ppmでEMail-MIME関係のモジュールをインストールしました。 その状態で実行したところ、Email-Simpleというモジュールの2.102が必要であるというエラーが出ました。現在のモジュールは2.101が入っています。 PPM上ではEmail-Simpleの最新は2.101ということで最新と見なされているようですが、リフレッシュをしても2.102が適用可能という状態になりません。 提供元がcpanとなっているので、以下のレポジトリを追加してみましたが、表示されません。 http://cpan.uwinnipeg.ca/PPMPackages/10xx/packag … cpanのサイトを見ると、2.102が最新でPerl5.14にも適用と書いてあります。 コマンドラインで手動アップグレードすることも可能なのでしょうか？ また手動でアップグレードした場合、GUI画面にも反映されるものなのでしょうか？ ご存じの方がおられましたら、よろしくご指導お願いします。
ある、１から５までのスロット（またはセル）に１から２００までの数字がランダムに出てくる（登録される）とします。その出てきた、数字が同一のものであれば数を数えたいのですが、どなたか教えていただけないでしょうか？ たとえば １　に 123 ２ に　45 ３　に　3 ４ に　62 ５　に　45　とあったとします。　 そうすれば、２と５のスロット（またはセル）に45が　２個あるので　表示を45が2 123が1、3が1、62が１のように表示させたいのです。　 123, 1 45, 2 3, 1 62, 1 どうもいいサイトもなくうまくできません。　どうすればできますでしょうか？　よろしくお願いします。
Mecab　http://mecab.googlecode.com/svn/trunk/mecab/doc/ … ---perl script[UTF-8]-------- # my $cmd = `"C:/Program Files (x86)/MeCab/bin/mecab.exe" "C:/Program Files (x86)/MeCab/bin/test.txt"`; my $cmd = `"C:/Program Files (x86)/MeCab/bin/mecab.exe" "今日は晴れだ。"`; open(F,">test_out.txt"); print F $cmd; close F; ------------------- 1行目の方法で行うと成功しますが、2行目の方法で行うとファイルの読み込みを行っているようで失敗します。 直接文字を入れることで動作させたいのですが方法はありますでしょうか？ また、様々なプログラムの知識をネットで拾い読みする感じで付けてきて、あまり体系的に勉強していません。こういった、事の分かる書籍などあれば教えて頂ければ幸いです。 宜しくお願い致します。
入力待ちにならないようにSTDINを使いたいのですが、 通常はどのような方法を取るのでしょうか？ 定期的なチェックが出来るだけで構いません。 普通は別プロセスを立ち上げるのでしょうか？ その時はどのような方法が楽でしょうか？ またプロセス間通信はどのような方法を取るのが一般的ですか？ いくつかの一般化された方法があるなら複数でも構いません。
いつもお世話になっております。 標題についてご教授願えないでしょうか Perl+Postgressqlで取得したレコードを連想配列化にしたいのですが、 @data = (); my $conn = Pg::connectdb(接続情報) my $query = "SELECT * FROM data; my $result = $conn->exec($query) if($result->resultStatus ne PGRES_TUPLES_OK){ exit; } my $cnt = $result->npuples my $fields = $resut->$rset->nfields; for ($i=0; $i<$cnt; $i++){ for(j=0; $j<fields; $j++){ $data[$cnt][$result->fnam($fields)] = $result->getvalue($j,$j) } これではいけないんでしょうか。
お世話になります。 真になる演算子が１を、偽になる演算子がundefを返すことを研究しています。 print "3 == 3：【", 3 == 3, "】\n"; であれば、3 = 3が1を返すので 3 = 3:【1】 となります。 print "3 > 4：【", 3 > 4, "】\n"; であれば、3 > 4がundefになるので 3 > 3:【】 になります。 さて、and 演算子を使ったところも見たいと重い、 print "3 == 3 and 3 > 4：【", 3 = 3 and 3 > 4, "】\n"; と書いて実行すると Useless use of a constant in void context at C:\Perl\perl\showAndTF.pl line 8. という警告と共に 3 == 3 and 3 > 4：【1 と出力されてしまいます。 これはなぜでしょうか。 よろしくお願いします。
http://hole.sugutsukaeru.jp/archives/10 こちらのサイトでPerlでのファイルのアップロードを行なおう思い、 作成しているのですが、 エラーになり表示されません。 コードを貼り付けると、 #!/usr/bin/perl -w #使用するモジュールをロード use File::Basename; use CGI; #変数宣言 my ($form, $dir, $filename, $parsename, @filename, $error, $ok, $type, $newfile, $i, $buffer, @ext_ok); #ファイルを保存するディレクトリを設定 #（CGIの実行ユーザで書き込み権限が必要） $dir = './files'; #受付可能な拡張子（正規表現） @ext_ok = qw ( txt zip pdf doc cgi ); #CGIオブジェクトを作成 $form = new CGI; #転送できるファイルの最大サイズを設定 #（実際は、post送信されるコンテンツ合計の最大サイズ） #この値は、CGIオブジェクトを作成する時には既に #設定されていなければならない $CGI::POST_MAX = 1024 * 1000; #max = 1MB #CGIオブジェクトを作成 $form = new CGI; #クライアントにヘッダを送信 #これは、結果メッセージ表示のため binmode STDOUT; print "Content-Type: text/plain;charset=euc-jp\r\n\r\n"; #ファイルの転送のチェック if (!defined($filename) and $error = $form->cgi_error){ #ファイルが転送されていなかったら、$filename は 未定義値となっている。 #フォーム上でファイルを選択しないままフォームがサブミットされた場合は、 #通常はこの変数 $filename は空文字列として定義されている（＝未定義ではない）。 #このため、以前のバージョンでは $filename が定義されている #かどうかをエラーの判別の基準としていたが、 #2007年3月 Mac OS X 上の Netscape 7.1 で試したところ、 #ファイル選択されていない場合に未定義値になることが判明。 #このため、エラーの場合に設定される（筈の）値 $form->cgi_error も判別の #基準に追加した。 print "ファイルが転送できませんでした：$error\n"; exit; } if ($filename) { #ファイルが転送されていれば、値は真 #ファイルパス内の「\」を「/」に変換 # $parsename には、送信元クライアントマシン内での #ファイルパスが格納されている。 #注：Shift_JISで実装する場合、このあたりには工夫が必要。 $parsename =~ s#\\#/#g; #ファイル名を（ベース名, ディレクトリ名, 拡張子）に分解 @filename = fileparse($parsename, "\.[^\.]+"); #ベース名のチェック（アスキー文字列であること） $filename[0] =~ /^[\.\w~-]+$/ and $filename[2] =~ /^[\.\w-]+$/ and $ok = 1; unless ($ok) { $error = 'ファイル名は、半角英数字にして下さい。'; print "ファイル転送ができませんでした。: $error\n"; exit; } $ok = 0; #フラグのリセット #拡張子のチェック foreach (@ext_ok){ $filename[2] =~ /^\.$_$/ and $ok = 1 and last; } unless ($ok){ $error = "許可されていない拡張子($filename[2])です。"; print "ファイル転送ができませんでした。: $error\n"; exit; #サーバ側ファイル名の決定 #まず、セッションごとに一意のディレクトリ名を作成 while (-d "$dir") { $dir = $dir.'/upload_'.&gen_unique_key(15); } #ファイルを格納するディレクトリを作成 unless (mkdir($dir, oct(777))){ print "保存ファイル用ディレクトリの作成に失敗しました。: $!\n"; exit; #サーバ側のファイルパスを設定 $newfile = $dir."/".$filename[0].$filename[2]; #既に同名のファイルが存在した場合 #（複数の同名ファイルを同時にアップロードした場合など）は、 #ベース名にアンダースコアと番号を付けて別名にする $i = 0; while (-f "$newfile"){ $i++; $newfile = $dir."/".$filename[0]."_".$i.$filename[2]; } #ファイルの保存 unless (open (OUTFILE,">$newfile")){ print "サーバ側の保存ファイルの作成に失敗しました。: $!\n"; exit; } #保存用ファイルを無事 open できた場合 #改行コードの自動変換を停止 binmode (OUTFILE); binmode ($filename); # $filename から内容を読み出して #保存用ファイルに書き出す #この場合、変数 $filename はファイルハンドルとして #機能する while (read($filename,$buffer,1024)) { print OUTFILE $buffer; #ファイルを close して終了メッセージを表示 #この場合、$filename は、送信元クライアント #マシン内でのファイルパス（ブラウザが送信してきた値）を返す close (OUTFILE) and print "送信されたファイル ($filename) を右のファイル名で保存しました： $newfile\n" or print "サーバ側の保存ファイルのクローズに失敗しました。: $!\n"; } else { # ファイルが転送されていない場合 # $filename は 偽 print "ファイルはアップロードされていません。\n"; } #一意の文字列を作成するための関数 sub gen_unique_key($){ #生成する文字列の長さを引数で指定 my $length = shift; my ($i, $tempval, $key, $chars, @chars); #引数で指定された文字列長さが、 # 5以上 30以下の数値でない場合、15に設定 #（範囲は、長からず短からず...。） ($length =~ m/^\d+$/ and $length >= 5 and $length <= 30 ) or $length = 15; #使用する文字を指定（ディレクトリ名として使用できる文字を指定する） $chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890~-_'; @chars = split(//, $chars); #乱数のタネを作る srand(time|$$); for ($i=0; $i<$length; $i++){ # @chars 配列の最大の添字までの乱数を生成する $tempval = int(rand(scalar(@chars))); $key .= $chars[$tempval]; } return $key; } となりますが、どこが間違えているのでしょうか。 上記コードは、サイトからのコピペになります。 よろしくお願いします。
$today = "2012"; my @file = qw( result_001_${today}.txt result_002_${today}.txt result_003_${today}.txt ); for(@file){ print ; } 例えば、こういったスクリプトがある場合、$todayが代入されることなく出力されます。 なぜか分かりますでしょうか？
半角スペースを一度削除してから禁止語句などがないかチェックし、 その後、半角スペースなどが入っている場合、元状態に戻したいと思います。 以下のように記述することで半角スペースを削除してから チェックはできると思うのですが、 それを元の状態に戻すということは不可能でしょうか？ $str =~ s/[\s　]+//g if($str =~ /バカ/){ push(@error, 'バカと投稿はできません'); }
以下の環境にてメール送信プログラムを作成していますが、 ありがちな文字化け、且、ボディーが表示されない不具合が発生しています。 サーバ：linux apache レンタルサーバ ※Encode.pm、Jcode.pm無し。モジュールインストール不可。 Perl version: 5.006001 ソースエンコード：utf-8 自分の解釈としてはutf8で記述しているので、 charset=utf-8にしておけば、 MIMEエンコードさえしてやれば 表示できると考えているのですが、 やはり甘い考えなのでしょうか? また、同サイト質問NO2868794も参考にさせていただきましたが、上手くいきません。 以下ソース（エンコード:utｆ-8) use utf8; use MIME::Base64; use POSIX; ※アドレス表記はこのサイトの投稿チェックに引っかかるので省略します。 my $to = 'XXXX@XXXX'.XXX; my $from_nm = "送信者名"; my $from_adr = "XXXXX@XXX.XXX"; my $subject = "メール表題"; my $body = "本文"; # 送信者名を MIME エンコード encode_base64($from_nm,""); # subjectを MIME エンコード encode_base64($subject,""); $subject = "=?utf-8?B?" . $subject . "?="; # 本文を MIME エンコード encode_base64($body); my $MailPass = "XXXX/XXXX/XXX"; #SendMail Pass open(MAIL,"| $MailPass -t"); #======================================================== print MAIL <<"EOF_MAIL"; From: $from_nm<$from_adr> To: $to Subject: $subject Content-Type: text/plain; charset=utf-8 Content-Transfer-Encoding: base64 MIME-Version: 1.0 $body EOF_MAIL #======================================================== close MAIL; その他、色々ググっては見たのですが、自分ではみつけられず、 どうかアドバイスありましたらよろしくお願いいたします。
試しに次のようにしてみましたがエラーになりました。 #!/usr/local/bin/perl use strict; use warnings; my $mystr = "abcde"; my @{$mystr} = (1,2,3); $mystrの内容はいろい変わっていきます。 ご存知の方いらっしゃいましたらすみませんが教えてください。 よろしくお願いいたします。
一定時間が経過したファイル削除のsauceを使って、サーバーのディレクトリを削除しようとしましたが指定した時間内のディレクトリが削除できません。間違っている個所をご指摘くださいますようお願い致します。 #古いディレクトリの削除 $dir='./z'; opendir(DIR, "$dir"); my @dirlist = grep /^*/, readdir DIR; closedir(DIR); my $expire_t = 15552000; #180日以上経過したファイル指定　　(1日は86400) my $expire_d = 31536000; #365日以内に生成されたファイル指定 my $now = time; foreach my $deldir (@dirlist){ my $mtime = (stat("$dir/$deldir"))[9]; if ($now > $mtime + $expire_t && $now < $mtime + $expire_d){ rmdir("$dir/$deldir"); } } どうぞ宜しくお願いします。
Cookieの有効期限を半年間にしようと思い、 プログラムを覗いてみたところ、以下のような記述がありました。 どこをいじれば半年間に伸ばすことができるのか教えていただけますか？ どうかよろしくお願いいたします。 sub set_cookie { ($secg,$ming,$hourg,$mdayg,$mong,$yearg,$wdayg,$ydayg,$isdstg) = gmtime(time + 30*24*60*60); $yearg += 1900; if ($secg < 10) { $secg = "0$secg"; } if ($ming < 10) { $ming = "0$ming"; } if ($hourg < 10) { $hourg = "0$hourg"; } if ($mdayg < 10) { $mdayg = "0$mdayg"; } $month = ('Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec')[$mong]; $youbi = ('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday')[$wdayg]; $date_gmt = "$youbi, $mdayg\-$month\-$yearg $hourg:$ming:$secg GMT"; $cook="name\:$FORM{'cntr'}\,email\:$FORM{'email'},pswd\:$FORM{'pswd'}"; print "Set-Cookie: TORBBS=$cook; expires=$date_gmt\n"; }
Perlのintについてですが、以下の3の計算結果が異なる理由を教えてください。 1：print 1080/1.08; 　→「1000」と表示される 2：print int 1080/1.08; 　→「1000」と表示される 3：print int(1080/1.08); 　→「999」と表示される Perlのバージョン：ActivePerl v5.14.2 OS：Windows XP
恐れ入ります。 一定時間後にプログラムを実行したいのですが、sleepですと、すべてのプログラムが停止してしまいます。 プログラムの一部を、一定時間後に実行するにはどうしたらよいのか苦戦しています。 $SIG{ALRM} = \&timeout; eval { alarm 5; print qq! 再生中!; alarm 0; }; alarm 0; sub timeout{ print qq!5秒経ちました!; } としてみましたが、うまくいきません。再生中を表示しながら、5秒後に5秒経ちましたと、 再生中を表示しながら表示したいのですが、どのようにしたら良いでしょうか。 よろしくお願いします。
Yamamoto TaroをTaro Yamamotoにしたいです。ただし間のスペースの個数は維持したいんですが・・・ Perlで簡単にやる方法ありますか・・・
設定ファイルにこのように設定されている際に use constant SUUCHI_MAPPING => { 'one' => 'xxx', 'two' => 'yyy', 'three' => 'xxx', 'four' => 'zzz', 'five' => 'yyy', 'six' => 'yyy' } 下記のような持ち方にして使用しやすくするにはどのような処理をしたらいいでしょうか。 use constant SUUCHI_FORMAT => { xxx => ['one','three'], 　　　　　　yyy => ['two','five','six'], zzz => ['four'] };
例えば以下のように記載するとエラーとなります。 if($::FORM{'body'} =~ /パターン/){ push(@error, '投稿できません'); } しかし、以下のように記載するときちんとパターンマッチします。 このふたつともエラーが出ておかしくないと思うのですが なぜ以下ならＯＫなのか教えてください！！ @word=qw(パターン); foreach (@word) { if (index($::FORM{'body'},$_) >= 0) { push(@error, '投稿できません。'); } }
関数のプロトタイプ宣言と、それに関するwarningsプラグマについてお教えください。 関数のプロトタイプ宣言は、その関数を呼び出す側がコンパイルされる時点で、すでに存在する必要があり、また、use warningsによってプラグマを有効にしておくと、遅いプロトタイプ宣言について警告してくれると理解していました。 以下の2例は、どちらもプロトタイプ宣言が遅いために、うまくプロトタイプが働かない例です。 しかし、(例1)ではwarningが表示されるのに対し、(例2)では表示されません。 どこか私の理解が誤っているのかと思うのですが、このようになる理由についてご教授いただきたく、よろしくお願いいたします。 ■ (例1) #!/usr/bin/env perl # -*- mode: cperl; coding:utf-8 -*- use strict; use warnings; my @a= 1..4; mypush( @a, 5..8); print join( ",", @_), "\n"; sub mypush(@@){ if( @_== 2){ print "ok.\n"; }else{ print "Prototypes does not work, arg. num=", 0+ @_, "\n"; } } □(出力1) main::mypush() called too early to check prototype at ./chk_prototype.pl line 10. Prototypes does not work, arg. num=8 ■(例2) #!/usr/bin/env perl # -*- mode: cperl; coding:utf-8 -*- use strict; use warnings; test_2(); exit 0; sub test_2{ my @a= 1..4; mypush( @a, 5..8); print join( ",", @_), "\n"; } exit 0; sub mypush(@@){ if( @_== 2){ print "ok.\n"; }else{ print "Prototypes does not work, arg. num=", 0+ @_, "\n"; } } □(出力2) Prototypes does not work, arg. num=8 ---- なお、Perlは、 perl -v This is perl, v5.10.1 (*) built for x86_64-linux-thread-multi を使用しております。
CGI::Sessionなどを使ったことがない初心者です。 どの端末から掲示板に投稿されたか識別するだけのために （セッションの画面遷移は不要） PerlのCGI::Sessionを使ってセッションＩＤを発行し、 CGI内のセッション記録用ファイルにいつどの端末から投稿されたか記録したいと思っています。 そこでCGI::Sessionについて調べてみたのですが my $session = new CGI::Session("driver:MySQL", $cgi, {Directory=>'./session'}); データーベースはMySQLでなければいけないのでしょうか？ My SQLではなく例えばディレクトリ内のdate/session-date.textなどに記録し、 扱いことはできないのでしょうか？ またそのような場合にはどのように記述するのか教えてください！
お世話になります。 Perl正規表現プログラムで、 s置換演算子の末尾に、 カンマと丸カッコでスカラ変数を囲んで、 存在している箇所 たとえば、 s/あいうえお/($hensu = $&) =~ tr{ＡＢＣ}{abc}, ($hensu) =~ s{１２３}{123}, ($hensu) /eg; のような正規表現であれば、 上記のtr置換演算子や、s置換演算子それぞれの末尾に、 「 , ($hensu) 」 として、カンマと丸カッコでスカラ変数を囲んで、 存在している箇所は、 どのような意味があるのでしょうか？ 以上になります。 ＰＳ： ネット上や正規表現の本などを読んでも、 上記したような、 カンマと丸カッコでスカラ変数を囲んでいる パターンの解説を、 見つけられなかった為、 ご質問させていただきました。 ご存じの方がいらっしゃいましたら、 教えてください。 よろしくお願いします。
ソート機能がうまく動作しなくなりました。 CSVが以下のようなものとなったときにソートがうまく動作しなくなってしまいました。 CSVデータの区切りが「","」と「,」の混在で区切られてます。 (ここから)　データa "山田","埼玉県","男性" "田中","埼玉県","男性" "井上","栃木県","女性" "志村","千葉県","男性" (ここまで) だったり (ここから) データb 1,山田,埼玉県,男性,50,"予算2,000円",0 2,田中,埼玉県,男性,36,予算なし,0 3,井上,栃木県,女性,30,予算100円,0 4,志村,千葉県,男性,27,"予算300,000円",0 (ここまで) このようなテータの時もあります。 以前のアドバイスをもとに以下のように作成いたしました。 (ここから) while (my $line = <$ifh>) { if ($socnt == 0 ){$socnt++;next;} my $key = (split /\",\"/, $line)[$ccsv]; push @{$sorted{$key}}, $line; if (@{$sorted{$key}} == 1000) { open OUT, ">>./$key.tmp" or die "Can't open: $!"; print OUT @{$sorted{$key}}; close OUT; @{$sorted{$key}} = (); } } (ここまで) この場合だと my $key = (split /\",\"/, $line)[$ccsv]; データaはうまくいくのですが、データbがうまくソートが動作いたしません。 my $key = (split /,/, $line)[$ccsv]; ではデータbはうまくいくのですが、データaうまくソートが動作いたしません。 条件式で混在認識方法があるかと思っている(ないかもしれませんが、わたしには分かりません)ので質問いたしました。 ご教授いただけますと幸いです。 よろしくお願いします。
Pealを始めようと思いApache2.2をダウンロードしようと思いました。 こちらのサイトです。 http://httpd.apache.org/download.cgi ところがダウンロードしようとしたら８つもソフトがあるようなのです。 httpd-2.2.22.tar.gz httpd-2.2.22.tar.bz2 httpd-2.2.22-win32-src.zip httpd-2.2.22-win32-x86-no_ssl.msi httpd-2.2.22-win32-x86-openssl-0.9.8t.msi httpd_2.2.22-netware.zip Security and official patches Other files そのためどれをダウンロード指定医か分からないためできませんでした。 ですのでどれを使っていいのかがわからないのでどのようなものが私向きなのか教えていただけますか？ 用途は掲示板やチャットを製作予定です。
今までPerlをWindows環境で書いていました。 エディターはずっとVimです。 最近になって、Macを手に入れたのでMacで開発したいのですが Macでは円記号ではなくバックスラッシュでないと変数が認識されないことに気づきました。 バックスラッシュでも書けないことはないのですが、optionキーを押さないといけないことと Windows環境に慣れていたため、バックスラッシュだと変数が見づらいということもあり、macのVimでも円記号をそのまま使えないかと思っていますが、Vimの設定がいまいちよくわかりません。 もしお分かりになる方がいたら教えて頂けないでしょうか？
Perl初心者です。 簡易なタイマーのプログラムです。 (1)$s=shift||60; この部分の shift と || はどういった意味合いを持っているのでしょうか。 (2)for(1..$s) このfor構文の括弧内はどういった意味合いを持っているのでしょうか。 $s=shift||60; $|=1; for(1..$s){ sleep 1; print"$_\r" } print"\n"
Perl初学者です。Perlでのインターネット通信に興味があります。 webサイトのテキストボックスにテキストを入力し、それを送信・結果を取得するためのプログラムを教えてください！ (例) 単語を英訳するプログラムが作りたかったので、”http://ejje.weblio.jp/”の検索ボックスに単語を入れて送信し、帰ってきたＵＲＬのhtmlを取得する、といった感じ？ 少し勉強したLWPモジュールを使って頂けると嬉しいです。 もちろん、こっちの方が効率がいいよ、といった方法があれば是非教えてください！ よろしくお願いします。
csvファイルが存在するかどうか確認するためif節でheadを使っています $data_hokkaido = "http://denkiyoho.hepco.co.jp/data/juyo_hokkaidou … if (head "$data_hokkaido" ){ use LWP::Simple; $content = get($data_hokkaido); } こうするとエラーになるのでperlチェックをしてみたところ String found where operator expected at test.cgi line 393, near "head "$data_hokkaido"" (Do you need to predeclare head?) と警告が出ました if節を外して $data_hokkaido = "http://denkiyoho.hepco.co.jp/data/juyo_hokkaidou … use LWP::Simple; $content = get($data_hokkaido); とするとエラーは出ず、問題なくデータ取得できるので、headに原因があるのだと思いますが、具体的に何が悪いのでしょうか？ ちなみに何のデータを取得しているかと言いますと、電力各社の電気予報のデータで、 エラーが出るのは北海道電力ので、同じようにファイルがダウンロードされる形式になっている関西電力部分 $data_kansai = "http://www.kepco.co.jp/yamasou/juyo1_kansai.csv"; if (head "$data_kansai" ){ use LWP::Simple; $content = get($data_kansai); } ではエラーは出ません 理由がお分かりの方ぜひ教えてください。 よろしくお願いします。
ＲＳＳからデータ取り出しについて、ご教授ください。 use XML::RSS; をperlに実装して、ＲＳＳファイルを分解し、必要なデータだけ取り出すスクリプトを使用しています。 データがとれなくなったので、ソースを調べたところ、配布元が改造をしたらしく <rss version="2.0"> <channel> <title>ＲＳＳによる順位公開</title> <item> <title>タイトル１</title> <rank>1</rank> <preranks> <rank>3</rank> </preranks> </item> <item> <title>タイトル２</title> <rank>2</rank> <preranks> <rank>10</rank> </preranks> </item> のようになっていました。 <rank> はそのときのタイトルの表示ランキングで、<preranks>は、ＲＳＳが更新される以前の表示ランキングを示しています。 ちなみに、preranks　からネストしている　rank　を別の表記にしたり、ネストしない構造に変更することは、対応できないとの回答でした。 $rss->parse( RSSのURL ); for (@{$rss->{'items'}}) { $el00 = $_->{title}; $el01 = $_->{rank}; } と実行すると、$el00は、タイトル１　や　タイトル２　と希望通りの形に分解できるのですが、$el01　は　13 や 210 など、<preranks>　の内側の　<rank>　と並べた数字で表示されてしまいます。 といって、 $el01 = $_->{preranks};　でも数字がとれません。 こうした構造のＲＳＳで、<rank>　と　<preranks>　をデータとして分解するには、どんな記述をしたらいいのでしょうか？ よろしくご教授お願いします。
Perl の XML::LibXML モジュールを使用して XML を処理しています。 例えば、 <?xml version="1.0" encoding="UTF-16" standalone="no"?> <!DOCTYPE aaa PUBLIC "-//bbb//CCCC//EN" "ddd.dtd" []> <doc> ....... </doc> のようなXMLに対してPerlで処理をして、 最後に documentElement を toString して書き出しています。 しかし、この場合、DTD宣言部分を書き出すことができません。 XML::LibXMLでこの部分を取得して書き出すことはできますでしょうか。 どうぞ、よろしくお願いします。
perlプログラムで for文で　ループ分の配列定義するには　どうしたらよいですか？ 下記のようなことができないかと　考えております。 for(my $i = 0; $i < $file_no; $i++){ my @{"segments$i"} =();　#配列定義 my ${"line$i"}="";　　　　　#変数定義 my %{"hash$i"}= ();　　　　#ハッシュ定義 open(ARG1,$ARGV[$i]); while(<ARG1>){ ${'line'.$i} = $_; chomp ${'line'.$i}; @{'segments'.$i} = split(/\t/,${'line'.$i}); 　　　　　　　${'hash'.$i}{${'segments'.$i}[0]}=${'segments'.$i}[1]; 　　　　｝ close(ARG1); } #下記で、その後　各ハッシュに設定したデータをもとに　いろいろ計算したい foreach my $a (keys %{'hash'.$i}){ ・・・ ｝ 今は、Can't declare array dereference in "my" at test.pl line XX, near "} ="　と　配列定義でエラーとなり処理できません。
※　箇条書きで現状を書きます。 ●現在、ローカルにapacheを入れてwordpress（サイト制作）の勉強をしています。 　　　　↓ ●Perlを使えるようにしたいと思い、perlを使っている友人に相談。 　すると、httpdをインストールするように言われインストールする。 　　　　↓ ●しかし、ポート番号が塞がっているらしくhttpdを起動できない。 　　　　↓ ●ググった調べてみると、appacheの設定をイジることで、apacheでperlを動かせられるということを 　 知る。 　　　　↓ ●現在、解決方法に対する自分の認識は、[１]httpdで使うポート番号を他のものに変える 　 [２]apacheの設定をイジってperlを使えるようにする。 【質問】 wordpressを使いながら、perlも使えるようにする最もおススメの方法を教えて下さい。 (※wordpress上でperlを書くという意味ではありません。wordpressで作ったサイトを開く時もあれば、perlで書かれたサイトを開く時もあるという意味です) よろしくお願いします。
{$CNF::pda{'browser'}{'agent'}{'list'}}というユーザーエイジェントのリストがあり、 そこに７つ登録されていて 7つすべてが条件不一致の場合に 以下のような構文だとホームというリンクが7回表示されてしまい困っています。 ７つの条件不一致であった場合でも 1回しか（ホームへのリンクを1回しか表示しない）実行ようにしたいのですが どのようにしたらいいのか具体的に教えてください。 どうかよろしくお願いいたします。 foreach (@{$CNF::pda{'browser'}{'agent'}{'list'}}) { length($_) or next; unless (index($ENV{'HTTP_USER_AGENT'}, $_) != -1) { push(@menu, qq|<a class=Menu href="$CNF::base{'home'}{'url'}">ホーム</a>|);}}
こんにちは。 Perlの引数について質問です。 サブルーチンに引数を渡し、サブルーチンの中で他のサブルーチンをよんでいます。 すると引数を渡していないサブルーチンにまで引数が与えられてしまっているようです。 @_で受け取ると引数が渡されてしまい、$_[0]だと渡されずにすみます。 これはなぜなのでしょうか？Perlには引数を引き継ぐルールでもあるのでしょうか？ 以下、サンプルです。 -------------------------------- &test('引数です'); sub test { &test2; } sub test2 { (my $hoge) = @_; } -------------------------------- $hogeに「引数です」が入ります。 &test2;を&test2();とすると大丈夫です。
文字コードがShift-JISのCSVファイルを読み込み、UTF-8のテキストファイルに出力するのに プログラムの中で変更しようとしているのですが、うまくいきません。出力ファイルの文字コードを 確認するとShift-JISのままです。 どなたか教えていただけないでしょうか？ ActivePerl v5.16.0を使用し、Encodeモジュールのfrom_toを使用しています。 #!/usr/bin/perl use strict; use warnings; use utf8; use Encode; my $input_file="input.csv"; my $output_file="output.txt"; open (IN, $input_file) or die "$!"; open (OUT, ">$output_file") or die "$!"; while (<IN>){ chomp ($_); my @data=split(/,/,$_); for(my $i=0;$i<@data;$i++){ $data[$i]=Encode::from_to($data[$i],'shiftjis','utf8'); #Shift-JISからUTF-8に変換 $data[$i]=~s/\s+//g; print OUT $_; } print OUT "\n"; } close (IN); close (OUT);
perlでファイル内を検索して読み込みを行いたいのですが どのようにすればよいでしょうか。 環境は、Solaris10 以下のようなファイル（test.txt）から 　#start1～#endの間にある、”01:”で始まっている値をすべて取得する。 　複数行になっている場合、カンマで１つにする。 　”01”ではじまっていないものは無視する。#などで始まっているものも。 ●ファイル：test.txt #start1 01:abc,aaa,bbb 01:1234 #01;a1,b1,c1 02:（省略） 03:（省略） #end #start2 01:（省略） 02:（省略） 03:（省略） #end #start4 01:（省略） 02:（省略） 03:（省略） #end ●結果 abc,aaa,bbb,1234 として読み込みたい。
Perlのコマンドで、パラメータにURLを指定すると、サムネイル画像を作成して、サーバに JPGファイルを保存するツールを作成したいのですが、ImageMagick モジュールでできるものでしょうか？ いろいろ調べたのですが、探しきれませんでした。。
phpとperlでメールフォーム＋DB登録機能を作っていますが、 だいぶ煮詰まってしまいました。 ●設計概要 https://dl.dropbox.com/u/85274673/form.jpg ●参考にしたが解決しなかったURLの一部掲載 http://oshiete.goo.ne.jp/qa/3086758.html http://ml.php.gr.jp/pipermail/php-users/2003-Oct … ●使用しているsend.cgi(配布フリー) http://www.synck.com/contents/download/cgi-perl/ … ●状況 cgi(perl)もしくはphpだけでdb登録＋メール送信両方行うプログラムが 必要となりました。 php単体でdb登録+mb_send_mailをスクラッチで書いてうまくいったと思ったのですが、 ユーザー側に送るメール内容(本文)と管理者側に送るメール内容(本文)を 分けることができず、現状使っているsend.cgiでメール送信し、phpでDBに登録 はできないかと思い、調べながらやってみました。 (cgi(perl)はphp以上に完全素人なので、dbへの登録を行うプログラムが書けませんでした。) form.html→db.php→thanks.html from.html→send.cgi→thanks.html は問題なく動作しました。 設計の通り 1. form.html→db.php→send.cgi→thanks.html もしくは 2. from.html→send.cgi→db.php→→thanks.html を実現したいと思っています。 $_POSTの値さえ渡せれば 1.は実現できそうなのですが、話はそう単純ではないのでしょうか。 ヒントでも貰えれば幸いです。宜しくお願いいたします。
OS(CentOS 6.2 / 64bit)にデフォルトでインストールされているPerl(version 5.10.1)を使って勉強しているのですが、参考書に記載されているメジャーなモジュールがインストールされてなく、困っています。 自分でインストールする必要があるのかと思い、モジュールのインストール方法を調べたところ、CPANというモジュールを使えば簡単にモジュールがインストールできると知ったのですが、このCPANモジュールも入っていない模様。 ではまずはCPANモジュールから手動でインストールしようかと思ったところ、CPANモジュールインストール時のMakefile.PLを実行すると、ExtUtilsというモジュールが無いと怒られてしまい実行できませんでした。 このような場合、通常よく使われるようなモジュールをまとめてインストールするような方法は無いのでしょうか。 ※ちなみに、@INCでは以下のディレクトリが登録されていました。 ・/usr/local/lib64/perl5 ・/usr/local/share/perl5 ・/usr/lib64/perl5/vender_perl ・/usr/share/perl5/vender_perl ・/usr/lib64/perl5 ・/usr/share/perl5
perlでwin32を使ってマウス操作とかのプログラムを書きたいので、書籍をさがしてるのですがありません。perlを使ってとにかくwin32を扱いたいのですが、入門書とかあれば教えて欲しいです。無い場合この書籍読めば基礎が分かるようなのあればお願いします。
レキシカル変数の書き方について質問なのですが、色々なスクリプトを見ると書き方が色々あり、違いが分かりません。 例） my $test=0; my($test)=0; my @test=(0,1,2,3,4,5); my(@test)=(0,1,2,3,4,5); 上記の場合、それぞれカッコがある場合とない場合の違いはあるのでしょうか？ 参考になるサイトでも構いませんので、どなたかご存知の方教えていただけませんか。
お世話になります。 $filename = "abc-123"; $filename_check = "./data/$filename.html"; if(-e $filename_check) { $ok=1; } 上記ですと、abc-123.htmlと言うファイルが存在していた場合に$ok=1になりますが、 これを、 scv-abc-123.html ert-abc-123.html 上記のようなファイル名でも$ok=1になるようにしたいのですが、 ($filenameで指定したものが含まれるファイル） どのようにすれば良いのでしょうか。 お手数をおかけしますがご教授いただけましたら幸いです。
恐れ入ります。 perl 上でJSON出力された情報を、 別ファイルのinput フィールド上に付随情報を表示したいのですが、苦戦しています。 例）Mysql上に以下のデータがあり、 0001|花|ガーベラ 0002|酒 | ビール 0003|菓子|ピーナッツ {"pro_code":"0001",bunrui":"花","pro_name":"ガーベラ"}, {"pro_code":"0002",bunrui":"酒","pro_name":"ビール"}, {"pro_code":"0004",bunrui":"菓子","pro_name":"ピーナッツ"} と、JSONにより出力したデータを、 別ファイルから読み込み、 input フィールドに0001を入力すると、別フィールドに花、ガーベラと表示されるイメージです。 よろしくお願いします。
質問が二つあります。 ($;@) と書けば、一つ以上の引数を受け付けます。 (\@;\@) と書けば、一つもしくは、二つの配列を引数として受け付けます。 では、一つ以上の配列を引数として受け付けたい場合はどうしたらいいんでしょうか。 (\@;\@\@\@\@\@\@\@\@\@\@……) みたいな感じです。 これが一つ目の質問です。 二つ目の質問は、 ([@])これなんでしたっけ？ (\@)とは何か明確な違いがあると思いましたが、思い出せないし、どこに書いてあったのかも覚えてません。
Perlのプログラミングでつまづきました。 # ファイルから指定文字列を含む行を収集する # 入力ファイルのオープンと読み込み print( "入力ファイル名?" ); $n = <STDIN>; chomp( $n ); open( FIN, "<$n" ) or die "入力ファイルオープンエラー: $!\n"; $n = @a = <FIN>; close( FIN ); print( "$n 行読み込みました\n" ); # 行の収集 print( "検索文字列?" ); $x = <STDIN>; chomp( $x ); $ptn = $x; #指定の文字列 $x = @b = grep( /$ptn/, @a ); print( "$x 行見つかりました\n" ); # 出力ファイルのオープンと書き出し print( "出力ファイル名?" ); $y = <STDIN>; chomp( $y ); open( FOUT, ">$y" ) or die "出力ファイルオープンエラー: $!\n"; print FOUT ( $ptn, "\n" ); print FOUT ( $x, "\n" ); print FOUT ( @b ); close( FOUT ); というプログラムで実行すると C:\My Perl\pl>perl プログラムの実行.pl 入力ファイル名?sample1.txt 168 行読み込みました 検索文字列?k 45 行見つかりました 出力ファイル名?out3-24.txt 続行するには何かキーを押してください . . . となり出力ファイルの中身が表示されません。 どこを間違えているのかご指摘いただけないでしょうか？
perlのプログラミングについて詳しい解説をお願いいたします。 sub list_reverce{ my $old=shift; my&new=undef; while (my $cur=$old){ $old=$old‐>[NEXT]; $cur‐>[NEXT]=$new; } return $new } 全くの初心者です。連結リストに対してのreverseなのですが、わかりません。 ご回答お願いいたします。
ファイルの容量が大きく。perlを使用してデータの集計をしています。 "A"がきたらflag1をたてなさい。 "B"がきたらflag2をたてなさい。 "C"がきたらflag3をたてなさい。 これでAとBとCを抜き取ること＆AからCまでの時間を取得したのですが、 Bの数のmaxの値だけを抜き取りたいのですが、Bがきたときの数をすべて 出力してしまいます。下記の文だと、Bが４回きたら、１，２，３，４と出力してしまいます。 それで４だけを出力したいのですがどのように書き換えたらようか教えて頂けますでしょうか。 '----------------------------------------------------------------------------- open (IN,"< $ARGV[0].txt") or die; open (OUT,"> $ARGV[0]_out.txt") or die; $flag =0; my $a, $b, $c; $count = 0; ####################################################### while($line =<IN>){ ($time,$data) = split(/\s+/,$line); if($data eq "A") { $flag=1; $a = $time; #print OUT $line; #print OUT "\n"; } elsif($data eq "B"){ $flag=2; $count++; $count == $data; print OUT ("$count\n") } #print OUT ("$count\n"); elsif($data eq "C"){ $flag=0; $count=0; $b = $time; $c = $b - $a; print OUT ("time $c\n") } } -------------------------------------------------------------------------------
perl初心者です。いつもありがとうございます。 perlでcsvファイル(1行のカラム数は200)、総行数は約３万行のファイルを37番目のカラム(-25以上25未満の数値データ)で降順ソートしその値によって行数がだいたい均等になるよう3分割し、2番目のカラムに文字でも数字でもよいのですがその４つのグループごとにフラグ(例えば1,2,3)を入れたいと思ってます。グループ化については境目の37番カラムの値は重複している場合が多いと思うのですがその場合は下(別に上でもかまいません)に入れるものとします。 ソートロジックは過去の質問を参照して理解しましたがグループ化しフラグを入れるルーチンがうまく作れません。下記のように作ったのですがこの先同じことを何度もやらなくてはならないので先に進めません。どなたかお助けください。最終的にやりたいことはカラム37でグループ化→カラム2にフラグを立てる、次にカラム2とカラム38(-25から0までの数値)でソートし同様に同じ行数になるようにグループ化→カラム3にフラグを立てる、さらにカラム2とカラム3とカラム39(-25以上25未満の数値データ)でソートし・・・同様に繰り返し最終的に1グループが100件(行)～150件(行)になるようにしたいのです。つまり約３万件のデータを3*4*2*4*2=192分割(5列の値で分類)したい、そしてどのような範囲で分割したかという情報も得たいのです。 use strict; use warnings; use utf8; use Encode; binmode STDOUT, ':encoding(utf-8)'; my $dir = './data'; # 処理するディレクトリ my $motoFile = 'customer.txt'; # もとファイル open my $fh, '<:encoding(cp932)', "$dir/$motoFile" or die 'ファイルが開けません。',"$!"; my %sorted; while (my $line = <$fh>) { my $key = (split /,/, $line)[37]; push @{$sorted{$key}}, $line; if (@{$sorted{$key}} == 1000) { open OUT, '>>:encoding(cp932)', "$dir/$key.tmp" or die "Can't open: $!"; print OUT @{$sorted{$key}}; close OUT; @{$sorted{$key}} = (); } } open OUT, '>:encoding(cp932)', "$dir/out.txt" or die "Can't open: $!"; foreach my $key (sort { $b <=> $a } keys %sorted) { if (-e "$key.tmp") { open IN, '<:encoding(cp932)', "$dir/$key.tmp" or die "Can't open: $!"; print OUT while <IN>; close IN; } print OUT @{$sorted{$key}} if @{$sorted{$key}}; } close OUT; #↓↓↓↓ここからフラグを作成するルーチン # 行数を調べ3つに分けるルーチン my @colum37; open IN, '<:encoding(cp932)', "$dir/out.txt" or die 'ファイルが開けません。',"$!"; my @in = <IN>; close IN; my $gyousuu = scalar(@in); my $amari = $gyousuu % 3; if ($amari == 0) { my $groupGyousuu = ($gyousuu-$amari)/3; print "総行数は$gyousuu","で、1グループの行数は$groupGyousuu","ほど、余りは$amari\n"; # あまりが0の時、group1は@inの0行 ～$groupGyousuu-1行まで # 　　　　　　　 group2は@inの$groupGyousuu行 ～$groupGyousuu*2-1行まで # 　　　　　　　 group3は@inの$groupGyousuu*2行～$groupGyousuu*3-1行まで foreach my $num (1..2) { push @colum37, (split /,/, $in[$groupGyousuu*$num])[37]; # これは境目の先頭の37番目 } print "@colum37\n"; #これでここまでは完成、分けるべき値がこの配列に入っている。 open OUT, '>:encoding(cp932)', "$dir/out.txt" or die "Can't open: $!"; foreach my $line (@in) { my @line = split /,/,$line; if ($line[37]>=$colum37[0]) { $line[1] = 1; }elsif ($line[37]>=$colum37[1] and $line[37]<$colum37[0]) { $line[1] = 2; }elsif ($line[37]<$colum37[1]) { $line[1] = 3; } $line = join (',',@line); print OUT $line; } close OUT; } elsif ($amari == 1) { この後未作成
ある変数に　文字列として　数値が格納されている。 ノイズがあり、時には　その変数に　英字数字のごちゃ混ぜ文字列が入るときがある。 文字列には数字だけが入っている前提で処理すると、時に その場合、Argument "○○"isn't numeric in addition・・・エラーがでてしまう。 このエラーを出力したくない、エラーログファイルに　読込エラーだったレコード内容を吐き出すようにしたい。 文字列が数字のみで構成されている場合は　○○を実行し、数字以外で構成されている場合は　XXを実行するという　if文を作成したいと考えている。よい判定方法を教えてください。 現在は、 $i=$i＋0； if( $i =~ /^\d+$/ ){　○○｝　else｛　XX｝としているが、 $i=$i＋0；　の行でエラーが出てしまうときがある。
Perlにおいて、「元号を判定させる」ようにしたく、if-elsif文章を書いてみたのですが、上手くいきません。 （そもそも起動してくれないです・・・文章も合っているかわからないのですが。。） 年号を入力させて、 (meizi) X nenと表示させたいのです。 あと、明治以前の数字を入れたら、エラーと出すようにする。 被っている年号、例えば1912年と入れたら、meizi45nen/taisyou1nen ともしたいのですが、これらはどう入れたらいいのか分からなかったです。 どこを直せばいいのか、一部でもいいので、教えていただけると嬉しいです。 chomp($year = <stdin>); if($year<=1912 and $year>=1868){ $A=$year-1867 print("meizi $A nen \n"); } elsif($year<=1926 and $year>=1912){ $B=$year-1911 print("taisyou $B nen \n"); } elsif($year<=1989 and $year>=1926){ $C=$year-1925 print("syouwa $C nen \n"); } elsif($year>=1989){ $D=$year-1988 print("heisei $D nen \n"); }
WWW::Mechanizeついて 質問させて頂きます。 他でも質問しておりますが、回答が無かったためマルチですがご了承ください。 WWW::Mechanizeを使ってログインしようとしてるのですが、うまく行きません。 <form action="login.cgi" name="form1" method="post"> <input id=id name='id' type='text' /> <input id=pass name='pass' type='text' /> <input type="submit" name="submit" value="LOGIN" /> 上記のフォームでは正常に取得できます。 しかし、ログインチェックをJavascriptからPHPに渡ってるページでの ログインがうまく行きません。 ソース //入力チェック /*login_checkたとえです*/ function LOGIN(){ $( "userid" ).className = ""; $( "userpassword" ).className = ""; if( login_check( "id" ) ){ if( login_check( "pass" ) ){ document.form1.action = "login.php"; document.form1.Btn_Type.value = "login"; document.form1.submit(); }else{ $( "pass" ).className = "error"; } }else{ $( "id" ).className = "error"; } } <form action="login.php" name="form1" method="post"> <input id=id name='id' type='text' /> <input id=pass name='pass' type='text' /> <input type="button" name="loginbtn" value="LOGIN" onclick='JavaScript:LOGIN();'/> 上記のフォームにログインしようと下記のようにしました。 my $loginUrl = 'http://hoge.jp/login.php'; my $mech = WWW::Mechanize->new(cookie_jar => $cookie_jar); $mech->agent_alias('Windows IE 6'); $mech->get($loginUrl); $mech->form_name('form1'); $mech->field( id => "test" ); $mech->field( pass => "test" ); $mech->click_button( value => 'Login' ); print $mech->content(); これで実行するとエラーがでます。 Can't call method "header" on an undefined value at /usr/lib/perl5/site_perl/5.8.8/WWW/Mechanize.pm line 2471. $mech->click_button( value => 'Login' ); 上記のclick_buttonでvalueを指定するとエラーになります。 WWW::MechanizeはJavascriptは実行できないのでしょうか？ お知恵をお貸しいただけませんでしょうか。 説明不足かもしれませんがお願い致します。
お世話になります。 Windows7上のActivePerlで、 use XML::SAX; use XML::LibXSLT; モジュールを利用中に、 start_elementイベント時のタイミングで、 取得したタグ文字を、 そのタイミングで、XSL変換することは可能なのでしょうか？ 今回の目的は、 XSL変換した後の各値を、 配列などにセットできればOKという状況ですので、 もしSAXで無理でしたら、 たとえばDOMやXPathなどで、 use XML::LibXML; use XML::LibXSLT; モジュールを利用中に、 随時取得したタグ文字を対象として、 そのタイミングで、XSL変換して配列にセットできれば、 それでもOKという状況です。 ＰＳ： （ちなみに、 　XSLファイル内で、 　<xsl：output method="xml"> 　を指定してから、 　XSL変換を実施すると、 　まとめてXSL変換自体は、 　一通り正常に行われているのですが、 　なぜか、出力されたファイルは、 　XML形式ではなくて、 　text形式でファイルが出力されてしまう為、 　（タグ文字が全て空白文字に置換されています） 　XMLパーサが一切利用出来なくなってしまい、困っています） 以上になります。 もしご存じの方がいらっしゃいましたら、 よろしくお願いします。
【環境】 WinXP / Perl 5.14.2 関数に値を受け渡す際にハッシュを利用しようと思っているのですが キーの typo が気になります。 検索すると Hash::Util::lock_keys() などがヒットしたのですが、 結局これはそのロジックが実行された際にエラーになる仕組みです。（よね？） できれば "プロトタイプを指定した関数に対して正しくない引数を指定した時" のように そのロジックが実行されていなくても Internal Server Error になるような方法があれば欲しいのですが… そういった方法はありますでしょうか。 ---------- 最終的にしたいことは、関数に対して 36 個の引数を渡す際に できるだけミスがないように、もしあった場合すぐわかるようにしたいです。 （しっかりテストすれば良いというのはなしで… 勿論テストはしっかりしますが） なのでハッシュでなくても何か良い方法があればそちらでも良いのですが、 引数を順番に指定する方法よりはハッシュで渡したほうが良いですよね？ 他になにか渡し方あるでしょうか。 ---------- ご存知の方がいらっしゃいましたら教えてください。 よろしくお願いします。
cookieを書込んだ直後、書込めたか（cookieをオフにしていたり、cookieを書込めない携帯端末からのアクセスかもしれないので）確認をしようと、cookieを読込もうとしたのですが、cookieが書込まれているにもかかわらず情報を取得することができません 実験環境として、htmlファイルにボタンを作って、cgiへ飛び、そのcgi内でcookieを書込み、cookieが書込めたかどうかで分岐して、表示するようにしています （cgiを一度実行したあと一旦ブラウザで前のhtmlファイルに戻って）cookieが既に書込まれた状態で、改めてhtmlファイルのボタンを押せばcookieは読込めますが、最初にcookieを書込んだ時に同じcgi内で即読込みを行ったら読込めません 書込が完結する前に読込みに行っているから読込めないのかとも思い、読込み前にタイムラグを作っても見ましたがやはり読込めません どうすれば書込み直後に読み込めるのでしょうか？ 色々ネットで調べても見ましたが、いっこうに解決策が見つかりません ご存じの方ぜひご教授下さい よろしくお願いします なお、下にperlのコードを書いておきます #クッキーを書込 $test{sid} = "12345"; &set_cookie($test{sid}); #タイムラグ use Time::HiRes; Time::HiRes::sleep(0.8); #クッキーを読込 ($cookie{test}) = &get_cookie; if(!$cookie{test}){ print "読み込めてない"; } else{ print "読み込めた"; } ######→読み込めません##### #クッキー書込sub sub set_cookie { local(@cook) = @_; local($gmt, $cook, @t, @m, @w); @t = gmtime(time + 2*60*60); @m = ('Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'); @w = ('Sun','Mon','Tue','Wed','Thu','Fri','Sat'); $gmt = sprintf("%s, %02d-%s-%04d %02d:%02d:%02d GMT", $w[$t[6]], $t[3], $m[$t[4]], $t[5]+1900, $t[2], $t[1], $t[0]); foreach (@cook) { s/(\W)/sprintf("%%%02X", unpack("C", $1))/eg; $cook .= "$_<>"; } print "Set-Cookie: SID=$cook; expires=$gmt; path=/;\n"; } #クッキー読込sub sub get_cookie { local($key, $val, *cook); $cook = $ENV{'HTTP_COOKIE'}; foreach ( split(/;/, $cook) ) { ($key, $val) = split(/=/); $key =~ s/\s//g; $cook{$key} = $val; } foreach ( split(/<>/, $cook{'SID'}) ) { s/%([0-9A-Fa-f][0-9A-Fa-f])/pack("C", hex($1))/eg; push(@cook,$_); } return (@cook); }
以下は、OTRSというパッケージのソースコードに含まれる正規表現（置換）ですが、 どのような解釈がなされるのでしょうか？ s{_<!--_[]_dtl:place_block:_$SubLayer_[_]_-->_}{$SubLayerString}xms; （アンダー・スコアは、実際にはスペースです） [ ]を文字集合だとすると、括弧の中にはスペースしか含まれていないので、 わざわざ括弧で括る必要がないように思えます。
変数の値と別のハッシュのキーに一致するものがあれば、ハッシュの値を別のスカラー変数に代入したいのですが、その場合のプログラム例を教えてください！
入力ファイルには AAA␣aaa␣AaAa というように文字列がスペースおきに３つ記載されている文が１行ある場合、 文の２つ目のaaaのみを変数に格納したい場合のプログラムを教えてください。 ␣は空文字です
データファイルＡとデータファイルＢからデータを受け取って、データファイルＢ中の第i番目の文Siの重要度を式１に基づいて計算して、重要度と順位（重要度の高い順に１位、２位、、）を各文Siに付与するアルゴリズムを考える場合、式１のWi,jは文Siに出現するj番目の単語で、niはSiに出現する単語の数となる。Wi,jの出現頻度はファイルＡから得られるものとする。 /*データファイルＡ*/ はじめ：␣１２ 改行 こる：␣１　改行 いく：␣２３　改行 みせ：␣４　改行 ... というように前に文字列（基本形）が入り後ろに数字が記載されているデータ /*データファイルＢ*/ はじめ␣はじめ␣形容詞　改行 こる␣こる␣形容詞　改行 ．．． ＥＯＳ　改行 ．．． ␣は空文字 １．ファイルＡにまだ読み込んでいない行がある限り繰り返す 　　　１－１．ファイルから一行読み込む 　　　１－２．その行の基本形用のカウンタを用意して、そのカウンタにその基本形の出現頻度を代入する。 ２．文番号カウンタと文重要度変数を用意して、初期値をそれぞれ１と０にする。 ３．データファイルＢにまだ読み込んでいない行がある限り繰り返す ３－１．ファイルから１行読み込む ３－２．もしその行がＥＯＳであれば、文番号カウンタと文重要度変数の値を出力する。その後、文重要度変数を０にして、文番号カウンタを１増やす。 ３－３．これ以降のアルゴリズムが解けないので教えてください。
入力ファイルには AAA␣aaa␣AaAa 改行 BBB␣bAb␣BbBb 改行 CCC␣Abc␣CcCc 改行 DDD␣.... というように文字列がスペースおきに３つ記載されていて最後は改行されている文が複数行ある場合、 文の２つ目のaaa、bAb、Abc…のみを配列に格納したい場合のプログラムを教えてください。
solaris10(x86)のOSでユーザーパスワードを自動変更するためのスクリプトを作成しています。 ※使用言語はperlでExpectモジュールを使っています。 仕様としては以下のパスワード制限を満たす文字列を自動生成し、 リストファイル(list.lst)を元にExpectモジュールを使って、 ユーザーパスワードを自動変更後に結果をファイル(result.log)へ出力します。 パスワード制限 ・アルファベット大文字小文字(1文字以上)含む ・数字を(1文字以上)含む ・記号を(1文字以上)含む ですが、実際に変更しようとすると、 稀に記号を含まないパスワードが出来てしまいます。 以下の場合は「test1」ユーザーがそれに当たります。 # cat result.log User: test1 password: 14P2YiZy User: test2 password: @u1iXr%q User: test3 password: EQ2t6H(6 rand関数の使い方が良くないのか、 正常に記号部分の配列にpushされていないのか、 正直お手上げです。 以下にスクリプトの内容を記載しますので、 記号含むパスワードを自動生成するにはどうしたらよいか、 どなたかアドバイス頂けませんでしょうか。 宜しくお願い致します。 #-------------------------------- #!/usr/bin/perl -w use strict; use File::Copy; use Expect; ##### password configuration ##### my $lng = 8; #Length my $num = 1; #Number (0=disabled, 1=enabled) my $cap = 1; #Upper (0=disabled, 1=enabled) my $sml = 1; #Lower (0=disabled, 1=enabled) my $mark = 1; #Symbol (0=disabled, 1=enabled) my ($sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst) = localtime(time); $mon += 1; $year += 1900; ##### Variable initialization ##### my $ps; my @words; ##### log files ##### my $LGFILE = 'result.log'; my $LGFILE_OLD = "result.log.${year}${mon}${mday}"; ##### file list PATH ##### my $file='list.lst'; my $SADW = '/etc/shadow'; if ($num == 1) { push @words, (0..9); } if ($cap == 1) { push @words, ('A'..'Z'); } if ($sml == 1) { push @words, ('a'..'z'); } if ($mark == 1) { push @words, ('#', '$', '%', '(', ')', '-', '=', '^', '~', '|', '@', '`', '[', ';', ':', '+', '*', '/', '?', '_'); } if (-e "$LGFILE_OLD"){ exit(1); } copy "$SADW", "$SADW.${year}${mon}${mday}" or die "Copy failure $!"; chmod(0400, "$SADW.${year}${mon}${mday}"); if (-e "$LGFILE"){ move("$LGFILE", "$LGFILE_OLD"); chmod(0400, "$LGFILE_OLD"); } open(F, "<$file") or die "Cannot open $file: $!"; while( my $line = readline F ){ chomp($line); open(IN, ">>$LGFILE"); for (my $var = 0; $var < $lng; $var++) { my $words_num = @words; $ps = $ps . "@words[rand($words_num)]"; } my $command = Expect->spawn("passwd ${line}") or die "Can't start program... $!\n"; $command->log_stdout(0); $command->expect(1, "New password:"); print $command "$ps\n"; $command->expect(1, "Re-enter new password:"); print $command "$ps\n"; print IN "User:\t${line}\n"; print IN "password:\t${ps}\n"; $command->soft_close(); undef $ps; chmod(0400, "$LGFILE"); close(IN); } close(F); exit(0); #--------------------------------
エクスプローラからPerlを起動する際のカレントディレクトリが、Windows 7 (x64) と Windows XPで違ってしまいます。 Windows XPの場合は起動した.plファイルの場所がカレントディレクトリとなり、特に問題はないのですが、Windows7の場合 C:\Windows\System32 がカレントディレクトリになってしまうようです。 以下の前提条件で、Windows 7 でも XPと同様の動作を実現する方法はないでしょうか。 [起動方法] .plファイルを右クリック ⇒「プログラムから開く」⇒ Perl Command Line Interpriter （既定のプログラムはメモ帳に設定） [環境] Windows (7 x64 or XP) + ActivePerl 5.14.2
コマンドライン引数で　入力ファイルからデータ受け取って結果を出力ファイルに書き込みたいのですが、プログラムは #!/usr/bin/perl while ( <> ) { @words = split(" "); $wc{@words[0]} += 1; } foreach $key (keys %wc) { print "$wc{$key} $key\n"; } で今のコードでは、コンソールに出力されるだけとなってしまいます。 ファイル入出力を行うにはどうすればいいですか？
Windows7上にインストール済のActivePerlへ 「XML::LibXSLT」モジュールを 追加でインストールする方法を教えてください。 （ちなみに、以前に、XML::LibXML;はインストール済であり、 　今も正常に動いているのですが、 　以前と同じ方法 　　↓ コマンドライン上から、 ppm-shell upgrad -i install XML::LibXSLT を実行すると、 ”ppm install failed: Can't find any package that provides XML::LibXSLT” エラーメッセージが出て、 インストール出来ない状況です。 なお、Windows7内に対して、 libxslt（xsltprocツール）をインストールして、 xsltproc --version を実行すると正常にバージョン内容が表示されている状況です。 しかし、 Eclipse3.6の、Perlソース内、 「use XML::LibXSLT;」 行のみ、 ×印の赤丸印が消えない（XML::LibXSLTがインストールされていない為） 状況です。 以上になります。 よろしくお願いします。
Perlのintをつかって整数化をしているのですが、すこし挙動がおかしいというか 正確な数値が出ませんので質問させていただきました。 $aaa = 21000*0.7; $aaa = int($aaa); print $aaa; 結果：14699 となります。 21000×0.7は14700のはずかと思いますが、なぜか14699になってしまいます。 どう考えてもわからなくなってきました。 どなたかご教授いただけませんでしょうか？
Perlで、XMLのDTD内の、 たとえば以下のような 　　↓ <!ENTITY rt4 "ルーチン4"> （キー”rt4”と、値”ルーチン4”）を、 読み込むには、どうすればよいのでしょうか？ 単純にXML(DTD)をテキストファイルとしてオープンして、 正規表現などで読み込むのではなく、 この<!ENTITY～ タグを利用して、 簡単に読み込める方法があるのでは？ と思い、ネット上を探しておりましたが、 具体的な方法が見つけられなかった為、 ご質問させていただきました。 よろしくお願いします。
ウィンドウズ環境でactive perlを利用しています。 あるディレクトリーの中に2000位のファイルが入っており、このファイルを読み込んで置換処理を行うため下記のようなperlを作っています。 1ファイルはおおよそ3000行くらいです。 foreach(<*.html>) { open(IN_FILE, $_) || die; open(OUT, ">$_.tmp") || die; @record=<IN_FILE>; foreach $record (@record){ $record =~s/aaa/bbb/isg; } print OUT @record; close( IN_FILE); close( OUT); rename("$_.tmp", $_) ; } 当たり前かもわかりませんが、メモリー不足になり処理が中断します。 ディレクトリーの中のファイル数を600程度に少なくすると処理が完了します。 そこで質問なのですが、ディレクトリーの中のファィルを一度に全部読み込まず、1ファイルずつ順次読み込んでいくことはできないでしょうか。 最初の1行目のforeachをwhileに変えたりしたのですがうまくいきません。 対応策あればご教示ください。
perl cgiでまだまだわからないことだらけなので、まだ質問します・・・ print $q->start_html(-title=>"画面", -BGCOLOR=>'#ffffff'), $q->header(-charset=>"Shift_JIS"),# Content-type: text/htmlを書き出します $q->p('<body bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#ff00ff">'), $q->p('<FONT COLOR="red">aaa</FONT>'), $q->hr, $q->p('<form method="post" action="ppp.cgi">'), $q->p('<FONT color="blue">【a】</FONT>'), $q->p('<INPUT TYPE="text" NAME="mmm" VALUE="" SIZE="25" MAXLENGTH="25">'), $q->p('<FONT color="blue">【b】</FONT>'), $q->p('<INPUT TYPE="text" NAME="nnn" VALUE="" SIZE="25" MAXLENGTH="25">' $q->p('<FONT color="blue">【c】</FONT>'), $q->p('<INPUT TYPE="text" NAME="ttt" VALUE="" SIZE="25" MAXLENGTH="25">' $q->p('<FONT color="blue">【d】</FONT>' $q->p('<select name="question" size="1" multiple="multiple">' $q->p('<option selected="selected" value="aaa">aaa？</option>'), $q->p('<option selected="selected" value="bbb">bbb</option>'), $q->p('<option selected="selected" value="ccc">ccc</option>'), $q->p('</select>'), $q->p('<FONT color="blue">【e】</FONT>'), $q->p('<INPUT TYPE="text" NAME="ans" VALUE="" SIZE="25" MAXLENGTH="25">'), $q->p('<FONT color="blue">【f】</FONT>'), $q->p('<textarea name="freeans" rows="5" cols="30" value="$initText" wrap="hard">$initText</textarea>'), #$q->p('<textarea name="freeans" rows="5" cols="30" value=$initText wrap="hard">あいうえお </textarea>'), $q->p('<input type=submit value="送信">'), $q->p('</form>'),# 送信データここまで $q->end_html; としているのですが、表示のほうが 【a】 テキストボックス入力欄 【b】 テキストボックス入力欄 【c】 テキストボックス入力欄 ・・・ と、テキストボックス入力欄の上下に改行が入っていしまいます。 消す方法はございますか？pタグがダメなんでしょうか？ それとContent-Type: text/html; charset=Shift_JIS が最上部に表示されてしまいます。 　　　 　　　$q->header(-charset=>"Shift_JIS"),# Content-type: text/htmlを書き出します の行が原因だということはわかるのですが・・・・変更方法がわからないです。 教えて頂きたいです。よろしくお願いします。
perl cgiにて作成したtextarea内に初期文字列を入力しておくプログラムを組んだのですが、 その初期文字列内で改行を行いたいと思い、何種類か改行を入れてみたのですが、 うまくいきません。 $testbr = "\r\n"; print $q->start_html(-title=>"１２３", -BGCOLOR=>'#ffffff'), (中略) q->p('<textarea name="freeans" rows="5" cols="30" value=$initText wrap="hard">あいうえお"$testbr"かきくけこ </textarea>'), (中略) $q->end_html; textarea内に あいうえお(改行) かきくけこ という表示をしたいのですが・・・
お世話になります。Googleやｂｉｎｇなどで調べて見ましたが検討もつかず困っております。 PerlでDBIを使用し、データベースのテーブルＡに対してSelectした場合に、fetchrow_hashrefを使用しSelect結果を取得した場合に、テーブルの列名が文字ではなく文字コードが格納されてしまいます。 テーブルＡの列名はUTF-8の日本語文字になります。 以下、列名 ID｜登録者｜登録日 fetchrow_hashrefを使用した場合、以下のように返ってきます。 $VAR1 = { "\x{767b}\x{9332}\x{8005}" => '106.190.xxx.xxx', "\x{767b}\x{9332}\x{65e5}" => '2012-05-06 00:52:40.39496', 'id' => 38 }; 問題は目的のデータに対して列名（'登録日'など）で参照する事が出来ない事ですが、今のままテーブルの列名は日本語のままで回避する方法をご教授いただけないでしょうか？ hashrefを使いたい理由はテーブルの列順番が変わった場合でもプログラム上の変更を減らすために、列名にて参照したいためです。ですのでarray系の取得メソッドはなるべく使わないようにしたいです。 出来ればなぜこのようなことが起こるのか原因も含めてご教授いただけると大変助かります。。 ちなみに、データベースはPostgreSQLの8.2で日本語文字に対応していることは、自分でselectなどのコマンドを叩き確認済みです。 ヒントでもかまいませんので、どうかよろしくお願いいたします。
Perlモジュールwin32::mediaplayerを使って以下のスクリプトを作成しました。 (使用環境 Apache HTTP Server 2.2(win32), Perl : ActivePerl-5.14.2.-MSWin32-x86) use Win32; use Win32::MediaPlayer; 　$winmm = new Win32::MediaPlayer; $winmm->load('****.wav'); $winmm->play; これで、コマンドラインからは実行できるのですが、これを以下のように 　　　　<!--#exec cgi= "../cgi-bin/****.pl" --> 　　　　SSIで実行できないのでしょうか？ 試行錯誤の末、 モジュール Audio::Beep,と Win32::MediaPlayer,の組み合わせで以下のようにしたら <!--#exec cgi= "../cgi-bin/****.pl" --> で実行できました。 　use Win32::API; use Win32; use Audio::Beep; use Win32::MediaPlayer; $winmm = new Win32::MediaPlayer; $winmm->load('****.wav'); $winmm->play; $beeper = Audio::Beep->new(player => 'Audio::Beep::Win32::API'); # $music = "g' f bes' c8 f d4 c8 f d4 bes c g f2"; $music = "g' f f f";　　 $beeper->play( $music ） 思うに$winmm->load('****.wav');で指定したwavファイルが $music = "g' f f f";の音声データを上書きしているのであろうと思うんですが、いまひとつ理解できません。これも合わせてお教え願えれば幸いです。 よろしくお願いします。
PORT監視がしたいのですが、下記のように書くと ”NG”にならずに常に”OK”となってしまいます。 使用していないPORTを指定しても常に”OK”となります。 LAN内ではうまく動かないのですが、何か良い方法がありましたら アドバイスをお願い致します。 #!/usr/bin/perl use Net::Ping; $target = '192.168.xxx.xxx'; $ping = Net::Ping->new("tcp", 2); $ping->{port_num} = 3306; if ($ping->ping($target)) { print "OK\n"; } else { print "NG\n"; } $ping->close(); exit;
Calendar::SimpleとHTML::Templateを利用しtableタグを使ったカレンダー表示を行いたいのですが、１週間ごとに＜tr＞タグで区切るループの記載の仕方がわかりません。 見本にした他所様のbaseサブルーチンでは１週間ごとに＜tr＞タグで区切られたきれいなカレンダー表示がされますが、myplanサブルーチンでは現状＜tr＞タグで区切る部分が作られていないため、日にちの数字が１週間ごとに区切られずにずらっと横並びとなってしまっている状態です。 Calendar::Simple http://perldoc.jp/docs/modules/Calendar-Simple-1 … HTML::Template http://perldoc.jp/docs/modules/HTML-Template-2.6 … baseでの表示 日月火水木金土 　　　　12345 6789101112 13141516171819 20212223242526 2728293031 現状のmyplanでの表示 日月火水木金土 12345678910111213141516171819202122232425262728293031 use HTML::Template; use Calendar::Simple; local $cal = calendar; local @caps = qw( 日 月 火 水 木 金 土 ); local @wdays = qw( sunday monday tuesday wednesday thursday friday saturday ); #&base; &myplan; exit; sub base{ print "Content-type: text/html; charset=\"utf8\"\n\n"; print qq|<table>\n|; print qq|<tr>\n|; for (my $i = 0; $i < 7; $i++) { my $cap = $caps[$i]; my $wday = $wdays[$i]; print qq|<th class="$wday">$cap</th>\n|; } print qq|</tr>\n|; foreach my $week ( @$cal ) { print qq|<tr>\n|; for (my $i = 0; $i < 7; $i++) { my $mday = $week->[$i]; my $wday = $wdays[$i]; print qq|<td class="$wday">$mday</td>\n|; } print qq|</tr>\n|; } print qq|</table>\n|; }#end base sub myplan{ for (my $i = 0; $i < 7; $i++) { my %row_data; $row_data{cap} = $caps[$i]; $row_data{wday} = $wdays[$i]; push(@loop_data, \%row_data); } foreach my $week ( @$cal ) { for (my $i = 0; $i < 7; $i++) { my %row_data; $row_data{mday} = $week->[$i]; $row_data{wday} = $wdays[$i]; push(@loop_data_3, \%row_data); } } my $template = HTML::Template->new( filename => "html_template/calender.tmpl", ); $template->param( THIS_LOOP => \@loop_data, THIS_LOOP3 => \@loop_data_3 ); print "Content-type: text/html; charset=\"utf8\"\n\n"; print $template->output; }#end myplan ##calender.tmpl <html> <body> <table> <tr> <TMPL_LOOP NAME=THIS_LOOP> <th class="<TMPL_VAR NAME=wday>"><TMPL_VAR NAME=cap></th> </TMPL_LOOP> </tr> <tr> <TMPL_LOOP NAME=THIS_LOOP3> <td class="<TMPL_VAR NAME=wday>"><TMPL_VAR NAME=mday></td> </TMPL_LOOP> </tr> </table> </body> </html>
Calendar::Japanese::Holiday を利用して以下の様な祝日判定のルーチンをテストしているのですが、なぜか#(1)あるいは#(2)のようにサブルーチン内部で値を明示してやらないと正常動作（祝日判定）しません。 そこでCalendar::Japanese::HolidayのisHolidayルーチンの方に値が正常に渡っていないのかと考え、#(3)のようなチェック用のソースを組み入れてみたりもしたのですが、$year, $mon, $dayそれぞれ正常に値は渡っていました。 どのようにすれば正常動作するようになるのでしょうか？ my %spdate = (#すでに$y、$m、$dにはそれぞれ2012、05、05と値が入っています。 'year' =>$y, 'month' =>$m, 'day' =>$d, ); $spdate = \%spdate; &check_date($spdate); sub &check_date{ my($spdate) = @_; #($spdate->{year},$spdate->{month},$spdate->{day})=(2012,05,05); #(1) #my $jpholiday = isHoliday(2012,05,05); #(2) my $jpholiday = isHoliday($spdate->{year},$spdate->{month},$spdate->{day}); if($jpholiday){ push(@error, 'It is a holidays today'); } }#end #Calendar::Japanese::Holiday #http://search.cpan.org/~kztomita/Calendar-Japane … sub isHoliday { my ($year, $mon, $day, $furikae) = @_; #test #(3) print "Content-type: text/html; charset=utf8\n\n"; print "$year"; print "$mon"; print "$day"; my $holidays; if ($year == $Cache_holidays_Year && $mon == $Cache_holidays_Month) { $holidays = $Cache_holidays;# From Cache } else { $holidays = getHolidays($year, $mon, 1); return if not defined $holidays; # Cache $Cache_holidays = $holidays; $Cache_holidays_Year = $year; $Cache_holidays_Month = $mon; } return if !exists $holidays->{$day}; return if (!$furikae && $holidays->{$day} eq $FurikaeStr); return $holidays->{$day}; }#end
(1)のプログラムではtest.txtの内容を表示することができました。 (2)ではaaaが表示されつづけると思いますが、何も表示されません。 なにかまちがっていると思いますが、わかりません。 よろしくお願いします。 --------------------------------------------------------------------------------- (1) --------------------------------------------------------------------------------- sub Main() { LAST:while(){ if(defined(open(FILE,"test.txt"))){ flock(FILE,1); while(<FILE>){ print $_; last LAST if($_ == 0); } } sleep(1); } close(FILE); } &Main(); ------------------------------------------------------------------------------- (2) ------------------------------------------------------------------------------- sub Main() { LAST:while(){ if(defined(open(FILE,"test.txt"))){ flock(FILE,1); while(<FILE>){ print "aaa";　　←変更箇所 last LAST if($_ == 0); } } sleep(1); } close(FILE); } &Main(); -------------------------------------------------------------------------------
Perlでファイル入出力のプログラムをコーディングしたいのですが、いまいちハッシュが理解しずらく困っています。わかる方よろしくお願いします。 moto.pl の中にあらかじめ AAA aaa AaAa AAaa BBB bbb BbBb BBbb CCC ccc CcCc CCcc AAA aaa AaAa AAaa .... というように一行ずつ文字列があり、この場合では最初の大文字AAAが二つあるので、その結果を例えばsaki.plに AAA 2 ... というように出力するプログラムを教えて頂けませんか？
よろしくお願いいたします。 Perlのprint文で、&(半角の&)文字を含む 文字列を、テキストファイルに出力しようとすると、 ”undeclared entity[Ln: 37, Col: 22]” という、その&文字の箇所で、 エラーが出て、強制終了されてしまい、 そこまで（途中まで）しか、テキストファイルに出力されません。 どうすれば、Perlで、 &(半角の&)文字を含む文字列を、 テキストファイルに出力出来るようになるのかを 教えてください。 どうぞよろしくお願いいたします。
初めまして、説明がうまく伝わらないかもしれませんがよろしくお願いいたします。 同じ値がN回続いた場合、その値をすべて出力するPerlのプログラムを作成中なのですが とても長くなってしまい、スッキリとしたプログラムにしたいのです。 どうかお知恵を貸していただけないでしょうか。 現在、&&を使用してこのようになっています。 例：Aの値が5回連続して同じ値だった場合 for($i=1; $i<=1000; $i++){ 　if(@A[$i]==@A[$i+1] && @A[$i+1]==@A[$i+2] && @A[$i+2]==@A[$i+3] && @A[$i+3]==@A[$i+4]){ 　　for($j=0; $j<=9; $j++){ 　　　printf "@A[$i+$j], @B[$i+$j], @C[$i+$j]"; 　　} 　} } データはすべて数値で、スペース区切りのテキストデータです。 # ヘッダー 0.00　2.0　11.5 0.01　6.3　17.2 0.01　2.1　14.2 0.01　1.2　14.3 0.01　2.1　14.3 0.01　3.7　14.3 0.01　3.7　14.3 0.01　4.1　14.3 0.06　4.1　14.3 0.01　4.1　14.9 0.01　4.1　14.9 0.03　4.1　14.8 ・・・ 連続した値が50回、100回だった場合になるとif文の条件式が長くなってしまい その都度変更がとても大変になってしまい困っています。 どうか、よろしくお願いいたします。
お世話になります。 Perlでの正規表現について質問させていただきます。 とあるフォームに入力した値が、特定の条件を満たさない場合に エラーメッセージを表示させたいのですが、うまくいきません。 以下に条件を記載いたします。 条件 1.　小文字、半角英数字、（一部の）記号で2～32文字以内。 2.　使用できる記号は、ハイフン(-）・アンダーバー(_)・ドット(.)のみ。 3.　上記記号が使用できるのは文中のみで、先頭及び末尾には使用できない。 当方、Perl初心者でして、 解説サイト等から、見よう見まねで試してみたところ、 条件１と２は、何とか成功したのですが、 ３の記述の仕方がどうしてもわかりません。 どなたか、おわかりの方がいらっしゃれば ご教授いただけませんでしょうか。 if($FORM{"account"} ここの記述の仕方がわかりません{ $msg = '文頭・文末に記号を使用する事はできません'; &error; }
いつもお世話になっております。 下記件でご教授頂けないでしょうか [Perlにおいてopen(INS,$common)の時の戻り値で後続を処理しない方法] (dieではない) [ソース] my $command = "grep -c ,'abc' acount.log |"; open (INS, $command) || die "command error $command \n "; 上記の場合 grepの結果が 0件の場合 row number 0 is out of range 0..-1 とメッセージが出ます。 どうにか回避したいのですが、 回避案あれば教えて下さい。
初歩的な質問なのですが、 if($test =~ /&amp;n=$in{n}&amp;/){} という正規表現は正しいのでしょうか？ $in{n}が変数になるのですが、何か"などで囲まないといけないとかありますでしょうか？ それとも別の箇所(例えば&や;）をエスケープしてやる必要があるのでしょうか？ エラーは返ってきませんが、思った行動をおこしてくれず(必ずヒットするものがあるはずなのにif節内に行ってくれない)、また、何度もトライアンドエラーできる環境下のものではなく、さらにネットで正規表現について検索しても、持っている本に羅列されている内容ばかりで、今望んでいることについて触れているページが見つからないため、みなさまのお力お借りしたく思います。 どうぞよろしくお願いします。
if ($pattern eq 'p2') { foreach $key (sort{ ($re_key{$b} <=> $re_key{$a}) || $b cmp $a } keys %re_key) { } else { foreach $key (sort{ ($b <=> $a) || $b cmp $a } keys %re_key) { } $pattern の選択で検索の種類を切り替えたいのですが、上のように指定するとコンパイルエラーになってしまいます。 foreach 文以降の処理は全く一緒なので、foreach 文の行だけ変更したいのですが、どうすれば良いですか？
自分の浅い知識では手詰まりとなりどなたか助けていただきたいです。 さくらのレンタルサーバのスタンダードプランにおいて、"Facebook::Graph"のモジュールを使いたいので、まずはユーザ領域にCPANをインストールするところから始めているのですが、CPANの途中でどうしても"Killed"となり中断され、先に進めないでいます。 手順としては、以下のサイトを参考にしています。 http://www.ookawara.com/archives/155 http://www.otsune.com/bsd/tips/usercpaninstall.h … http://d.hatena.ne.jp/charsbar/20080222/1203662508 ■手順１ さくらのレンタルサーバ（スタンダードプラン）でSSHとFTPで接続。 仮にユーザディレクトリ名を「hoge」とした場合、 /home/hoge/直下には、まだ.cpanフォルダもlocalフォルダも無い状態です。 ■手順２ % perl -MCPAN -e shell と打ち、最初の Would you like me to configure as much as possible automatically? にNoで答えて、手動で設定をしていきます（基本的にはほとんどEnterキー押下）。 ■手順３ /home/hoge/.cpan/CPAN/MyConfig.pm をFTPでダウンロードして、以下を書き換え ----------- 'make_install_arg' => qq[SITEPREFIX=$ENV{HOME}/local], 'makepl_arg' => qq[PREFIX=~/local], 'mbuildpl_arg' => qq[./Build --install_base $ENV{HOME}/local], ----------- 結果、MyConfig.pm全体の中身は以下のようになっています。 これを再度FTPで上書きアップロードします。 ----------- $CPAN::Config = { 'applypatch' => q[], 'auto_commit' => q[0], 'build_cache' => q[10000], 'build_dir' => q[/home/hoge/.cpan/build], 'build_dir_reuse' => q[0], 'build_requires_install_policy' => q[ask/yes], 'bzip2' => q[/usr/bin/bzip2], 'cache_metadata' => q[1], 'check_sigs' => q[0], 'colorize_output' => q[0], 'commandnumber_in_prompt' => q[1], 'connect_to_internet_ok' => q[1], 'cpan_home' => q[/home/hoge/.cpan], 'curl' => q[/usr/local/bin/curl], 'ftp' => q[/usr/bin/ftp], 'ftp_passive' => q[1], 'ftp_proxy' => q[], 'getcwd' => q[cwd], 'gpg' => q[/usr/local/bin/gpg], 'gzip' => q[/usr/bin/gzip], 'halt_on_failure' => q[0], 'histfile' => q[/home/hoge/.cpan/histfile], 'histsize' => q[100], 'http_proxy' => q[], 'inactivity_timeout' => q[0], 'index_expire' => q[1], 'inhibit_startup_message' => q[0], 'keep_source_where' => q[/home/hoge/.cpan/sources], 'load_module_verbosity' => q[v], 'lynx' => q[/usr/local/bin/lynx], 'make' => q[/usr/bin/make], 'make_arg' => q[], 'make_install_arg' => q[SITEPREFIX=$ENV{HOME}/local], 'make_install_make_command' => q[/usr/bin/make], 'makepl_arg' => q[PREFIX=~/local], 'mbuild_arg' => q[], 'mbuild_install_arg' => q[], 'mbuild_install_build_command' => q[./Build], 'mbuildpl_arg' => q[./Build --install_base $ENV{HOME}/local], 'ncftp' => q[], 'ncftpget' => q[], 'no_proxy' => q[], 'pager' => q[more], 'patch' => q[/usr/bin/patch], 'perl5lib_verbosity' => q[v], 'prefer_installer' => q[MB], 'prefs_dir' => q[/home/hoge/.cpan/prefs], 'prerequisites_policy' => q[ask], 'scan_cache' => q[atstart], 'shell' => q[/bin/csh], 'show_unparsable_versions' => q[0], 'show_upload_date' => q[0], 'show_zero_versions' => q[0], 'tar' => q[/usr/bin/tar], 'tar_verbosity' => q[v], 'term_is_latin' => q[1], 'term_ornaments' => q[1], 'test_report' => q[0], 'trust_test_report_history' => q[0], 'unzip' => q[/usr/local/bin/unzip], 'urllist' => [q[ftp://ftp.ring.gr.jp/pub/lang/perl/CPAN/], q[ftp://ftp.u-aizu.ac.jp/pub/CPAN/], q[ftp://ftp.yz.yamagata-u.ac.jp/pub/lang/cpan/]], 'use_sqlite' => q[0], 'wget' => q[/usr/local/bin/wget], 'yaml_load_code' => q[0], 'yaml_module' => q[YAML], }; 1; __END__ ----------- ■手順４ /home/hoge/.cshrc をFTPでダウンロードしてきて以下を追記して再びFTPで上書きアップロード。 ----------- setenv PATH $HOME/local/bin:$PATH setenv PERL5LIB $HOME/local/lib/perl5:$HOME/local/lib/perl5/site_perl setenv PKG_DBDIR $HOME/local/var/db/pkg setenv PORT_DBDIR $HOME/local/var/db/pkg setenv INSTALL_AS_USER setenv LD_LIBRARY_PATH $HOME/local/lib ----------- ■手順５ %source .cshrc を実行して変更を反映して、さらに mkdir ~/local mkdir -p ~/local/var/db/pkg を実行してlocalフォルダを準備します。 ■手順６ cpan -i Bundle::CPAN を実行します。 すると、 Going to write /home/hoge/.cpan/Metadata CPAN: YAML loaded ok (v0.68) CPAN: LWP::UserAgent loaded ok (v5.835) Fetching with LWP: ftp://ftp.ring.gr.jp/pub/lang/perl/CPAN/authors/ … の後に、 Killed と表示され、処理が終わってしまいます。 「.cpan」と「local」のフォルダを削除して、同じ手順で何度試しても、手順６でKilledとなり先に進めないでいます。 申し訳ありませんが、なぜ「Kiled」となるのかヒントをいただきたいです。
同じ件数あるとして -e $file　でファイル検索するのと open　してそのファイル中を検索するのでは、どちらが早いでしょうか？
LWP::UserAgentでperlスクリプトから別のスクリプトを呼び出して my $val print $res->as_string; で目的の値を取得したんですが値の前半部分にhttpヘッダーが入っており これを撮り省きたいです。 データの内容はバイナリなので$valの中の改行コードを区切り文字として 配列に格納し末尾の配列の値だけ取りだそうと思っています。 それで指定した区切り文字で配列に格納する方法を調べたのですが よくわからず教えていただけないでしょうか？ phpでいうところのexplode関数みたいなことがやりたいです。
下記は、メールフォームCGIに書き込まれた日時などの情報をlog.cgiというファイルに書き出すスクリプトです。 2012/01/04 21:05:45　のような感じで、日付が刻まれるのですが、このうち月の部分がどの月に処理を行ってもいつも01になってしまうのですが、当方直し方がわかりません。 下記が実際の記載箇所です。4行目がおかしいのだと思いますが、どなたかお分かりの方、教えていただけないでしょうか。 my $path = "log.cgi"; my $ip = $ENV{'REMOTE_ADDR'}; ($sec, $min, $hour, $mday, $month, $year, $wday, $stime) = localtime(time()); my $time = sprintf("%04d\/%02d\/%02d %02d\:%02d:%02d", $year + 1900, $mon + 1, $mday, $hour, $min, $sec); my $message = $in{'メッセージ'}; $message =~ s/\r\n/ /g; $message =~ s/\n/ /g; if (open(FOUT, ">> $path")) { print FOUT "$time\t$ip\t" . $in{'お名前'} . "\t" . $in{'E-mail'} . "\t" . $message . "\r\n"; close(FOUT); } よろしくおねがいいたします。
環境はＵＮＩＸです。 以下のようなテキストファイルを 変換してＯｒａｃｌｅのテーブルに 取込みたいのですがよい方法をご存知の方 いらっしゃいませんでしょうか？ まずはテキストファイルを変換前の状態から 変換後のようにしたいのです。 シェルまたはPeｒlで実現可能でしょうか？ ＜変換前＞ 地域名称　コーラ　　お茶　　　ミルク　 北海道　　10,000　　20,000　　30,000 青森　　　10,000　　20,000　　30,000 ＜変換後＞ 北海道　コーラ　10,000 北海道　お茶　　20,000 北海道　ミルク　30,000 青森　　コーラ　10,000 青森　　お茶　　20,000 青森　　ミルク　30,000
CGIのページにアクセス制限を掛けたいと思い 検索エンジンを使い色々探しまして下記のアクセス制限方法を見つけました。 http://easycgi.xrea.jp/perltips/acclimit.htm を参照して CGIの最初（#!/usr/bin/perl の次の行）に下記スクリプトを埋め込みました。 sub check { @hosts = ('hoge.ne.jp','hoge.co.jp'); $host = gethostbyaddr(pack("C4", split(/\./, $ENV{'REMOTE_ADDR'})), 2) || $ENV{'REMOTE_ADDR'}; foreach $i (@hosts) { if ($host =~ /$i/) { print "アクセスが許可されていません。\n"; exit; } } } リモートホストでアクセス制限を行いたいのですが 上記の方法を試しても、hoge.ne.jpとhoge.co.jpからアクセス出来てしまいました。 htaccessを使わずにCGIページへアクセス制限を掛ける方法はないでしょうか？ 何かアドバイス頂けると助かります。
こんな感じでチェックボックスを作りました。 <td><input type="checkbox" name="youbi" value="月1"></td> <td><input type="checkbox" name="youbi" value="火1"></td> <td><input type="checkbox" name="youbi" value="水1"></td> <td><input type="checkbox" name="youbi" value="木1"></td> 複数選択し、 $youbiの変数データをブラウザに表示すると、ちゃんと「月１、火１、水１」 と表示されます。 これをそのままメールで送ろうとしたところ、 $youbiを表示すると、「月１」しかメール本文に表示されていません。 どうやったらちゃんとメールに表示できるようになるでしょうか？
perlは何個かプログラムを作ったことがあるのですが、 本当に単純なものしか作ったことがない初心者です。 CSVを読み込んで、そのCSVを元に、あるURLにアクセスし、 そこで取得した特定のデータを書き出すということを行いたいのですが、 どのようにしたら実現できるのでしょうか。 お手数ですがご教授ください。 ---------------- 【持っているCSVデータ】 　　A　　| 　　B　　｜　　C　　　　｜ 　　１　　| テキスト｜テキストｘｘｘ｜ 　　２　　| テキスト｜テキストｙｙｙ｜ 　　３　　| テキスト｜テキストｚｚｚ｜ 【１行づつ以下のようなURLにアクセス】 http://www.abcd/テキストｘｘｘ 【表示されると以下のようなXMLが返ってくる】 <result> <version>1</version> <text>タイトル</text> <coordinate> <main_id>14231245234</main_id> <div>テキストテキストテキスト</div> </coordinate> <needs_to_verify>yes</needs_to_verify> </result> ↑ １行づつCSVを読み込んで、 ここのmain_idを一行づつテキストデータに書き出したい。 ---------------- perl でファイルを読み込んだり書き出したりすることは出来るのですが、 URLにアクセスして、 特定のタグに含まれるもののみを書き出すというやり方がわかりません。。 お手数ですがどうぞよろしくお願いいたします。
0 1 2 3 4　　　　　 9 8 7 6 5 6 5 4 3 2 7 8 6 9 2 8 0 9 8 1 　　↓ 0 1 2 6 4 9 8 7 3 5 6 5 4 9 2 7 8 6 8 2 8 0 9 最初の行のひとつの数字(左から４つ目：3)を抜いて、行をずらしたいのですが、つまづいています。 open (IN,"< $ARGV[0].csv") or die; open (OUT,"> $ARGV[0]_out.csv") or die; ####################################################### while($line =<IN>){ ($a, $b, $c, $d, $e) = split(/\s+/,$line); if($d == "3"){ $d == "" } print OUT (////////\n); } 分割してから、３を抜いてずらしたいのですがうまくいきません。 お助けいただきたく、どうぞよろしくお願い致します。
$dm1の値は変化させずに$dm2に変換後の数値を入れるにはどのようにしたら良いでしょうか？ $dm1 = a1234 $dm2 = $dm1 =~ tr/[a-zA-Z]//d;　　※これだとうまくいかない。 結果以下のようにしたい。 $dm1 = a1234 $dm2 = 1234
$dm = a1234 $dm =~ tr/[a-zA-Z]//d; $dm は　「1234」になりますが、 $dm =~ tr/[^0-9]//d; これだと　「a」　になってしまうのは何故でしょうか？
Perlで書いているCGIで、 HTTP リクエストヘッダのIf-Modified-Sinceを取得したいのですが、 %ENVには入ってこないようです。 取得する方法があれば、教えて下さい。 ・.htaccess にSetEnvなどで記述することでできそうですが、方法が分かりません。 ・HTTP Request Header 全体を取得する方法でも結構です。 よろしくお願い致します。 環境は、さくらインターネットのレンタルサーバーのApacheです。
お世話になります。 サーバー会社のトラブルで移転しなければならなくなったのですが、 移転後、cgiの挙動がおかしくなってしまいました。 バージョンperl5.8.8 サーバーOS CentOS なぜかperlのパスに-wをつけないと500のエラーになってしまう状態 #!/usr/local/bin/perl -w print "Content-type: text/html\n\n"; print "test"; これだけのスクリプトでも -wをつけないと500エラーになってしまいます。 -wをつけると動作します。 以前、稼働していたcgiもすべて-wをつけないと稼働しなくなってしまいました。 考えられる原因はどのような事がございますでしょうか。 （root権限のある専用サーバーとなります） 四苦八苦しているのですが、どうしても解決できない為、何卒宜しくお願い致します。 他に必要な情報などございましたらご指摘いただけますと幸いです。
Perl　で　「12345678」　の数値を　「1234/56/78」　と置き換えるには どうすれば良いでしょうか？
perl で XML::LibXML モジュールを使用して下記のようなXMLのテキスト部分の置換をしようとしています。 <item id="1"> <name>hoge</name> <description> テスト<b>テスト</b>テスト </description> </item> <item id="2"> <name>hoge2</name> <description> テスト2<i>テスト2</i>テスト2 </description> </item> これに対して、 for $node ($dom->findnodes('//item/description/text()')){ $text = $node->toString; $text =~ s/.../.../; $node->setData($text); } のように置換する処理を考えたのですが、description の中に <b> や <i> のようなインライン要素があると正しく置換、書き戻しがされません（置換対象は、これらインライン要素の中にも外にもあります）。 これをなんとか正常に動作させる方法はあるでしょうか。 どうぞ、よろしくお願いいたします。
アクセスされた際の端末の画面サイズ取得方法について教えてください。 私の調べた限り、携帯以外では直接サイズを取得できる環境変数もないようなので、その他の方法としてJavascriptを使用して画面のサイズを取得するのが一番かなと思いました。 そこで色々検索したところ、perlで使用された変数をJavascriptで使用するといった内容のページはいくつか見つかったのですが、逆に、Javascriptで取得した変数をperlで使用する方法がなかなか見つかりませんでした。実際そのような事が出来るのかも分かりません。。。 locationで変数を送ればとも思いましたが、今回の場合訳があってlocationが使えないので、その他の方法で何かないかと…。 どなたかそのような方法について分かる方は教えていただけないでしょうか。 出来れば詳しく書き方なども教えていただけるとありがたいです。 よろしくお願いします。
処理速度について質問です。 ファイルを大量（4000～8000程度）に扱う処理でディレクトリ内にあるファイルを 　「-f $file」　で検索する処理ありますが、 ファイルが8000あったとして、半分づつディレクトリを分けて検索した場合、 処理速度は変わるでしょうか？ ※この処理は　2万～3万回/１日　は実行されます。
Perlをいじって２日の者です。 WindowsVistaを使っております。 現在renameを使ってファイル名を変更しようとしています。 現在のファイル名がIDだけで、 Web上にあるそのIDに対応する情報をファイル名に追加しようとしています。 Web上の情報を取得するまではできたのですが、 変数に入れたその情報を、ファイル名に入れようとすると文字化けします。 ただ、その情報をコマンドプロントで扱う時も、テキストへ出力してみても文字化けしません。 文字化けは、文字コードなるものが原因らしいということで、 とりあえずよく見かける「UTF-8」というものにエンコードしてみたところ、 テキストへの出力が、ファイル名へのそれと同様に文字化けしました。 エンコードした上でファイル名に入れようとすると 情報のそのものがないものとして扱われるようになりました。 これはどう解釈すればいいのでしょうか？ どうすれば文字化けを解決できるでしょうか？
Pealでメルマガシステムを作って運用してました エラーメール処理をしたいのですが ユーザーがいない場合などに自動的に削除したいと思います どういう風に作ればよいのか分かりません あればぜひ教えてください
<a href='?????' target='_blank'> 上記のような変数から「?????」　部分を取り出すにはどうしたら良いでしょうか？ ※「?????」にはいろんな数値が入ります。長さも違う。 また、　href=' ' のシングルクォーテーションは固定です。
変数に半角文字が何文字入っているか調べるにはどうすれば良いでしょうか？ ’あ1い2うえ3お’ 上であれば半角文字が3文字入っていることを調べる。
Perl初心者です。 perlで簡単なソフトを作り、時々変化する情報をテキストファイルから読み込むようにしています。 昔は、Shift-jisでしたが、文字化け対策が嫌になり、UTF-8に統一しました。 皆様は、何を使われていますでしょうか？ また、読み込みや出力には、そのファイルの文字コード指定していますか？ 質問させていただいた動機について（無駄に長いです） 最近パソコン初心者の友達へ、プログラムを作ってあげたのですが、どうもうまく動かない。 設定ファイルに書いてある内容が何か合わないようです。 色々試行錯誤して、3日ほど悩んだ結果、相手のパソコンで編集（Vista）すると、BOMというものが付くことが分かり、とりあえず、それを削除することで無事動作致しました。 UTF-8であれば、文字コードなど気にせず万能だと思っていたのですが、これだけ悩まされると、UTF-8以外の方にもっと良い方法があるのではないかと思い質問させていただきました。
こんにちは！　Perlの漢字コード(UTF8)の扱いについて詳しい方，おしえていただけないでしょうか？ 数年前に自作した，ファイル加工用のシェルスクリプトを久しぶりに取り出してみたら，訳が分からなくなってしまいました。 シェルスクリプトは，大きなファイル(文字コードはUTF-8)の中から特定の表現を削って小さくする物で，例えば次のような行が並んでいます。 perl -pe 's/\343\200\220\.*?\343\200\201//g' | \ 困っているのは，文字コードをどうやって決めたか思い出せない点にあります。 新しい記述を足したいのですが，文字コードの指定の方法をすっかり忘れているのに気付いて，呆然としているところです。 以前はネット上にある，どこかのエンコーダーを使ったように記憶していますが。 うまく見つけらずにいます。 ご存じの方，ご教示いただけると大変ありがたいです。。 （試行錯誤して，UTF-8の16進6桁の漢字コードから，2桁ずつとって10進に直す，のは違うらしいことが分かりました。(;^_^A)
お世話になります。 perl5でLWPを使用しているのですが、一部のサイトでデータを取得できず困っております。 具体的には my $ua = LWP::UserAgent->new; $ua->agent('Mozilla/5.0'); my $req = HTTP::Request->new(GET => "http://misshiki.blog7.fc2.com/?xml"); my $res = $ua->request($req); my $buf = $res->content; といった感じでＲＳＳを取得したいのですが、$bufが空になってしまいます。 しかし、 $res->as_string とすると、レスポンスヘッダも含めてＲＳＳが取得できていることが確認できます。 また、上記以外のＵＲＬでは正常に$res->contentでデータを取得することができています。 どうもＦＣ２ブログのＲＳＳのみの事象のようではあるのですが、対処方法がわからず困っております。 対策をご教授いただければ幸いです。 以上、よろしくお願いいたします。
perlで下記のような感じでレンタルサーバーで動かしたところ送信が出来ませんでした。 その場合に、レンタルサーバーなのでsendmailのログも見れないで困っていますので、 原因の確認方法が解ればご教示頂ければ有難いです。 my ( $SENDMAIL ) = '/usr/sbin/sendmail'; open(MAIL, "| $SENDMAIL -t "); print MAIL "From: ｘｘｘ@xxx.co.jp\n"; print MAIL "To: ｘｘｘ@xxx.co.jp\n"; print MAIL "Subject: test\n"; print MAIL "Content-Transfer-Encoding: 7bit\n"; print MAIL "Content-Type: text/plain; charset=\"ISO-2022-JP\"\n"; print MAIL "\n"; print MAIL "test_letter\n";
formで送られてきたデータは全てハッシュinで整理しています 様々なデータの中に、$in{way_1}, $in{way_2}.....というかたちでformから送っているものがあるのですが、それぞれにvalueがあるのか分からないので、ループをかけて検証したいと思っています if($in{way_1}){ push(@ok, "1"); } if($in{way_2}){ push(@ok, "2"); } ..... とやれば話は早いですが、way_がいくつまであるかが状況によって違うため、最大値までループで確認したいと思っています そこで次のようにやってみましたが、うまくいきません my $i = 1; while($i <= $max){ if($in{way_$i}){ push(@ok, $i); } $i++; } Internal Server Errorが出たのですが、おそらくハッシュのキーの中の一部に変数を入れたがためだと思われますが、これに変わる検証方法はないでしょうか？ ちなみにあたりまえですが、次のようにやってみても、単なる文字列として認識されてしまうので、うまくいきませんでした my $i = 1; while($i <= $max){ $temp = '$in{way_'.$i."}"; if($temp){ push(@ok, $i); } $i++; }
アクセス端末によって見え方を変えさせるため、条件節ifで =~ を使って分岐させているのですが、ユーザーエージェントがあまりにも多く、コードが長くなりすぎ制作に支障が出てきています 100%完璧に分岐させるところまでは求めていないため（アクセスの95%程度うまく分けられればいいかと思ってます）、たとえばスマホの場合はiPhoneとかAndroid、PCの場合はMSIEなど極力共通の部分を見つけてまとめてはいますが、それでも携帯、スマホ、ＰＣと分けると非常に多くなり、 if(($ENV{'HTTP_USER_AGENT'} =~ /MSIE/) || ($ENV{'HTTP_USER_AGENT'} =~ /Firefox/)){} など比較の片方は同じなのに同じことを何度も書く必要があり、非効率かつ強烈に長くなってしまい何とかまとめられないかと格闘しています たとえば別で $os_pc = "MSIE,Firefox"; $os_mb = "DoCoMo,KDDI"; など別でまとめて、 if($ENV{'HTTP_USER_AGENT'} =~ /$os_pcの,で分解したそれぞれの文字列と比較/){ ＰＣと判定 }elsif($ENV{'HTTP_USER_AGENT'} =~ /$os_mbの,で分解したそれぞれの文字列と比較/){ 携帯と判定 } といったように、スマートに条件分岐させられないかと模索中ですが、=~ で別で用意したデータを,で分解してそれぞれと比べるとかできないでしょうか。 =~での比較ではなく、他の方法でもかまいませんので、ぜひお知恵をお貸しください。 よろしくお願いします。
いつもお世話になっております。 コンストラクタへ引数を渡しsyntaxチェックを行うとエラーとなります。 ご教授願えないでしょうか。 ※Perlは一昨日から初めてです。 [エラー内容] sample.pm: Bareword "SAMPLE_LOG" not allowed while "strict subs" in use at sample.pm line 278. [sample.pm] package sample lib ../common/ use Log.pm my $log = Log->new(SAMPLE_LOG); [Log.pm} package main use constant SAMPLE_LOG = 'sample.log'; 定数を定義しているのですが・・・・
自分のサイトにて自作のCGIを用いたシステムで閲覧者からの投稿を受け付けています。 暗号化が必要な情報はcryptを用いたり、アクセス情報は極力収集しないようにしているのですが、一部の利用者から不安の声が上がりました。 出来ることならソースコードを見せたいのですが、別ファイルとしてアップロードをすると動作中のCGIと同一のものであるというのを証明するのが難しくて悩んでおります。 「動作中のCGIのソースをそのまま見せる」、あるいは「動作中のCGIと同一のソースであることを証明する」といういずれかを実現したいです。 CGIのソースを見せたくないとか見たいという質問は過去に多くあったようですが、見せたいという質問は見当たらず質問させていただきました。 なるべく早く回答していただけると幸いです。 よろしくお願いします。
Perl 初心者です。初めて質問します。 test_sub.pl で宣言した変数を test_main.pl から参照したくて悩んでいます。 環境 ： WindowsXP / ActivePerl 5.14.2 -------------------- * test_sub.pl -------------------- #!/usr/bin/perl use strict; our $hoge = 'HOGE'; 1; -------------------- * test_main.pl -------------------- #!/usr/bin/perl use strict; require 'test_sub.pl'; print "Content-type: text/html\n\n"; print $hoge; -------------------- これを実行すると、 Global symbol "$hoge" requires explicit package name at C:/public_html/cgi-bin/test_main.pl line 7.\r というエラーが出ます。 require する前に、test_main.pl のほうで our($hoge); と宣言したり 参照する際に print $main::hoge; とパッケージを指定したりすればいけるのですが、 これらをしないとできないものなのでしょうか。 use strict; を書かなければ最初のソースでも動くのですが use strict は書きたい… 継承のようなことをしたいのです。 ちなみに以下試してみたソースです。 -------------------- * test_main.pl -------------------- #!/usr/bin/perl ######################################## # NG use strict; require 'test_sub.pl'; print "Content-type: text/html\n\n"; print $hoge; ######################################## # OK our変数を宣言しておくといける =pod use strict; our ($hoge); require 'test_sub.pl'; print "Content-type: text/html\n\n"; print $hoge; =cut ######################################## # OK 参照する際にパッケージ名を指定すればいける =pod use strict; require 'test_sub.pl'; print "Content-type: text/html\n\n"; print $main::hoge; =cut ######################################## ######################################## # NG =pod use strict; use base qw(test_sub); print "Content-type: text/html\n\n"; print $hoge; =cut ######################################## -------------------- * test_sub.pm -------------------- #!/usr/bin/perl package test_sub; use strict; our $hoge = 'HOGE'; 1; -------------------- NG パタンはどちらも Global symbol "$hoge" requires explicit package name のエラーとなります。 もしご存じの方がいらっしゃいましたら教えてください。 よろしくお願いします。
投稿すると自動的にその投稿に対して記事番号なるものが割り当てられ、 その記事番号と自分で投稿時に決めた削除パスワードで 自分の投稿を削除する形式の掲示板なのですが パスワードや記事番号が入力されていない場合には 〇〇〇が入力されていませんと表示されるにもかかわらず 存在しない記事番号が入力して削除しようとすると 「正常に削除いたしました」と表示されてしまいます。 （実際には存在しない記事番号なので何も削除されていないのですが） そこで下記のようにの＃～＃の部分を追加で記述し、 記事番号が存在しない場合にエラーとなるようにしてみたのですが これで本当にいいのか正直不安なのです。 正しいかチェックしていただけませんか？ @new=(); open (IN,"$file") || error("システムエラー","ファイル「$file」を開くことができません。"); while($data = <IN>) { $flag=0; ($no,$res,$date,$cntr,$email,$tall,$weight,$age,$sub,$com,$live,$select,$photo,$pw) = split(/<>/,$data); if ($FORM{'pass'} eq "$ad_pass") { foreach $del (@DEL) { if ($no eq "$del") { $flag=1; last; } } } else { if ($FORM{'del'} eq "$no") { if (!($pw)) { &error("入力エラー","指定された記事には削除キーが設定されていません。"); } if (crypt($FORM{'pass'},$pw) ne "$pw") { &error("入力エラー","パスワードが間違っています。"); } $flag=1; } #記事番号が存在しない時、エラーを表示追加 if ($FORM{'del'} ne "$no") { if (crypt($FORM{'pass'},$pw) ne "$pw") { &error("入力エラー","記事番号が存在しません。記事番号を確認して入力し直してください。"); } } #ここまで } if ($flag == 0) { push(@new,$data); } } close (IN);
素人で大変申し訳ございません。 他の人が作ったPerlを改良しようと思っております。 仕様は、csvのカンマからカンマの間に入っている 文字を取得するというのですが、 英数字の場合は、正常に取得できるのですが、 半角ひらがなが入ると文字の取得ができません。 下記の$outputで、私が必要な情報を得ようと思っているのですが、 下記の右辺をどのように変えれば、半角ひらがなも取得できるでしょうか？ $output =~ s|/\*\s(([A-Z0-9_])+)\s\*/|$D->{$1}|g; ※エンコードが必要でしたら、utf-8を使いたいと思っています。 一部分の大変失礼な質問と思いますが、何卒よろしくお願い致します。
投稿を削除した際に 管理者パスワードで削除されたのか それとも投稿者が設定したパスワードで削除されたのか 追加で削除ログに記録したいと思ってます。（削除ログはすでにあります） 削除パスワード入力フォームを$FORM{'pass'}とし、 管理者パスを$owner_pass 投稿者が設定した削除パスワードを$pw とした場合、どっちのパスが使われたのか分かるようにするには どのように記述したらいいのでしょうか？ 管理者パスが使われたら管理者、 投稿者パスなら投稿者と削除ログに記録したいのですが、 いろいろやってみたのですがなかなかうまくいきません・・・。
日本の総合電機メーカー（F,N,Hのうちの１社）に勤める社会人１年目です。 グリー、DeNA、サイバーエージェントなどのWeb系企業へ プログラマとして転職したいのですが、どうすれば良いのでしょうか？ 会社ではJavaでミドルウェアを設計・開発しています。 ちなみにアジャイル開発です。 ・Java デザインパターンや並列処理プログラミングまでは理解した程度 Javaによるネットワークプログラミングを勉強中 ・C言語 ポインタで困ることはなくなった mallocして線形リストや二分木を使った実装も大丈夫 ・C++ STL、テンプレートの基礎までは理解 ・Unix/Linuxの基礎 基本的なコマンドは知っている grepとかパイプとかシンボリックリンクは分かるし シェルスクリプトもリファレンスを見ながらなら一応は書ける ・英語 TOEIC780点 こんな感じなんですが、 グリー、DeNA、サイバーエージェントなどのWeb系企業の 経験者採用の募集要項を読むと、必須とされている条件が 私の業務経験や現状の知識とはうまくマッチしません。。 （Webアプリ開発の業務経験が必須だったり、独学では埋めることができない） 独学で学べることなら何でもやりますし、 転職まで今後半年間ほど今の会社に勤めながら うまく転職できるようにプログラミングの勉強をしようと思っています。 そこで質問したいのは、以下の３つです。 どれかひとつでも良いので教えてください。 1. グリー、DeNA、サイバーエージェントへプログラマとして転職できる 可能性はありますか？可能だとすれば具体的にどうすれば良いですか？ 何を学べば転職に有利ですか？ 2. 私のような経歴の場合、グリー、DeNA、サイバーエージェントなどよりも もっと他に転職するのに有利な企業はありますか？ （条件としてはプログラマとしてもっと高度なことがやりたい、収入を増やしていきたい） 3. その他なんでも良いのでご意見をうかがいたいです。
perl初心者です。 ｒｓｓを取得して簡易ブログパーツをつくりたいのですが文字コードでうまいこといかず悪戦しています。 以下がコードです。（きたなくてすいません…） #!/usr/bin/perl use LWP::Simple; use XML::RSS; use utf8; use open ":utf8"; $logfile="./syoukai.log"; open(DAT, "$logfile"); @log=<DAT>; close(DAT); my $rss = new XML::RSS; @list = (); foreach(@log){ ($nom,$name,$prof,$xml,$btitle,$ktitle,$klink)=split(/<>/); eval { $rss->parse( LWP::Simple::get($xml) ); }; if($@) { next; } $btitle = $rss->{'channel'}->{'title'}; $prof = $rss->{'channel'}->{'link'}; $item = $rss->{'items'}; $line = @{$item}[0]; $ktitle = $line->{'title'}; $klink = $line->{'link'}; $date = $line->{'pubDate'}; push(@list, "$date<>$name<>$prof<>$xml<>$btitle<>$ktitle<>$klink<>\n"); } open(IN,">$logfile"); print IN @list; close(IN); exit; syoukai.logを呼び出して そこに書かれたｘｍｌを順番に読み込んで ファイルを更新したいのですが これだと何もいじっていない$nameは大丈夫なんですが $btitleや$ktitleが文字化けしてファイルに書かれてしまいます…。 use utf8;ではなく use encoding 'UTF-8', STDOUT => 'cp932';としたら 今度は$nameだけ文字化けしてしまいます。 別々の文字コードを一緒にしてしまってるからだと思うのですが どれがどの文字コードなのかがわからないでいます。 文字コードを統一する方法などがあれば教えてくださいm(__)m 説明＆記述ヘタですいません…。 宜しくお願いします。
QRコードを生成してファイルに保存するプログラムを作っています。 ファイルハンドルをオープン時にエラーがでます。 open OUTFILE, '>', 'C:\inetpub\wwwroot\test.jpg' or die "$!"; # ここでエラーがでます。 binmode OUTFILE; print OUTFILE $qrimg->plot->jpeg; close OUTFILE; エラーメッセージは 「指定された CGI アプリケーションは、正しく動作しませんでした。HTTP ヘッダーの完全なセットが返されませんでした。返されたヘッダーは "Permission denied at C:\inetpub\wwwroot\cgi-bin\qr.cgi line 24. " です。」 です。 環境は Windows 7 / IIS 7.5 / ActivePerl 5.14.2 です。
さくらのレンタルサーバーのcpanmで、 JSONだったりUnicode::RecursiveDowngradeといったモジュールは入るのですが、 Email::Senderなどのモジュールがうまくインストールできないです。 --forceオプションも試してみたのですが、やはりうまくいきません。 どうか解決策をご教授ください。よろしくお願いします。
今現在Perlの並列処理について勉強しているのですが、分からない点があるのでご教授願います。 重並列が可能となるプログラムを作りたいと思い、以下のプログラムを作成しました。countには並列数(例えば３並列にしたいならば3)が入っています。これで重並列ができたと思ったのですが、よくよく考えてみると、このプログラムだと一つ目の子プロセスが終わらなければ、二つ目、三つ目の子プロセスが始まらないということに気付きました。同時に複数のプロセスを実行させるにはどのようなプログラムにすればよいでしょうか。お願いします。 while($count--){ $pid = fork; if(!defined $pid){die "fork failed";} elsif(!$pid){ &process;#子プロセス exit; } } wait; ・・・・・・#親プロセス
今現在Perlの勉強をしているところなのですが、詰まってしまったのでアドバイスをいただきたいです。あるPerlプログラムで作成したファイルを、そのプログラム内でパイプ処理し、その結果を再びそのプログラム内で利用したいと考えています。例えば以下のようなプログラムＰは作成可能でしょうか、可能であればその方法を教えていただきたいです。サンプルコードなどがあれば幸いです。 プログラムＰの概要 あるファイルを作成する→そのファイルを別のプログラムで実行（結果は○か×を出力）→結果が○であれば再びファイルを作成する、結果が×であればプログラム終了
質問させていただきます 最近ちょっとcgiに触れているのですが、perlには次のようなことは可能なのでしょうか 可能ならばもう少し勉強して実際にそういった動きをするcgiを作ってみたく思っています 1.テキストボックスにＵｒｌを入力してもらう 2.送信ボタンが押されたらUrlを参照して対象のページの内容を見にゆき、 3.その中を文字列検索して欲しい情報を持ってきて、表示する cgiに「できること」は様々なページに載っていたのですが、「できないこと」はさすがに載っておらず 2.の部分ができるのかできないのかがよくわかっておりません cgiで可能なのかどうか、もし不可能ならばそういった動作を行うのによいのはどんな言語なのか というのをご返答いただければと思います。
■1.下記の1.cgiからURLに引数として 1.cgi?hoge=●● で2.cgiにhogeの値を送ります。 2.cgiでhogeの値を受け取り、 テンプレートファイルを表示の際に下記のように、 ファイルのパスに取得したhogeを指定しようと思いますがうまく動作しません。 具体的な指示の仕方をご教示いただけないでしょうか？ 宜しくお願いいたします。 my $hoge1 = '../../htdocs/●/●/●/'; my $hoge_2 = $hoge; my $hoge_ok = '$hoge1/$hoge2'; $template = $hoge_ok;
別カテゴリにて質問を載せてしまったので、再度質問させていただきます。 今現在perlの勉強をしており、あるプログラム(Xとします)を作ろうと考えています。 Xの簡単な内容は、以下の通りです。 １．ファイル（Aとします）を別のテキストファイル（Bとします）を元に作成する→AをBを元に更に編集（作成したものをA'とします）→A''を作成→・・・・・・ ２．（Aが作成されるのを待って）Aをあるプログラムにて実行→（A'が作成されるのを待って）A'をあるプログラムにて実行→・・・・・・ １．２．を並行して行う。（何並列にするかは、Xを実行時に決める） 例えば３並列にする場合は、Aを作成、A'を作成、Aを実行→A''を作成、A'''を作成、A'を実行→A''''を作成、A'''''を作成、A''を実行→・・・・・・という具合にしたいと考えています。 以上がXの内容なのですが、この並行して行うというのがなかなかできません。調べてみると、fork、threadなどの方法があるようですが、どうしても上手くいきません。助言をお願いします。可能であれば、簡単なサンプルコードなどを教えていただけたら幸いです。
WEBサイト製作初心者のものです。 Perlで作られたフリーの掲示板をダウンロード、 借りたレンタルサーバーにcPanelをつかってCgi-bin にアップロード。 このようにすれば、レンタルサーバーにアクセス、 Index of のcgi-binを選択すれば、掲示板が表示されるはずですが ４０３　アクセス権のエラーと表示されてしまいます （cPanel付属のCRMソフトはインストール後Index ofから選択すれば正常に表示されます） 3つの条件 Perlのバージョン、アップロード先ディレクトリ、 フォルダごとのパーミッション設定は、推奨設定どおりになってます。 どうしてこのエラーが出るのでしょうか？
perlの勉強を始めました。 ｐｅｒｌの本の最初に Ｈｅｌｌｏ.plというファイルに print”Ｈｅｌｌｏ!”；と記述して perl　Ｈｅｌｌｏ.plとすると画面にHello!と表示されるとあるのですが、何も表示されません。 ファイルの記述をprint　”Ｈｅｌｌｏ!\n";としてやるとＨｅｌｌｏ!と一応表示されるのですがなぜ改行が必要になるのかがよくわかりません。どのように理解すればいいのでしょうか?
文字列 $a に、文字列 $b が含まれているかどう確認したいと思っています。 $a = "abcdefg"; $b = "cde" なら「真」としたいです。 （要するに、シェルの case や fgrep に似たことをしたい） ただし、文字列には記号が含まれている可能性もあるため、 正規表現も使いづらい（？）です。 具体的にやりたいことは、$a にはコンマ区切りのメールアドレスのリストが入っていて、 $b のメールアドレスが $a のリストに含まれていない場合のみ、$b を $a似追加すると いうことがやりたいです。 何か良い方法はないでしょうか？ よろしくお願いいたします。
プログラミング初心者です。 サブルーチンを用いて、ハノイの塔の解を求める課題で詰まっています。 解自体は求めることができたのですが、それぞれの解の順番(輪を移動させる順番)を一緒に表示させよという指示が出ており、この方法がわかりません。 表示順に上から番号を振るという考え方でよろしいのでしょうか。 まず考え方自体が違うようであれば、そこから指摘して頂きたいと思います。 よろしくお願いします。 ちなみに現状ではこのようになっております。 #!/usr/bin/perl sub hanoi { my ($no , $x , $y , $z) = @_; if( $no = $no){ hanoi ($no-1,$x,$z,$y); print "Move", $no ,"from" , "$x" , "to" , "$z" , "\n"; hanoi ($no-1,$y,$x,$z); } } print"入力された枚数のハノイの塔の解(順番付き)\n"; $data=<>*1; hanoi($data , "A" , "B" , "C");
BBSを改変したエントリーフォームで、 アンケート付のイベント参加集計をしています。 設置者が居なくなってしまったため引き継いでいるのですが、 力不足で行き詰まっています。お力をお貸し下さい。 1.現状 入力項目は50個ほどあり、データファイルには、 1行目にデータ項目、2行目以降に入力データが追加されていきます。 例）データ形式 申込日時,イベント名,,,,受理番号,,その他(改行） 20120117,ハイキング,,,,20120505001,,特になし(改行) 2.やりたいこと 管理の都合上、受理番号を発行させたいのですが、 既参加者に発行した受理番号の最大値の取得方法が分かりません。 受理番号はイベント毎に初期値を設定し、連番にしていきます。 例）1人目…20120505001　(初期値) 　　2人目…20120505002　（上8桁の20120505をイベントコードとし、下3桁が連番） 受理番号項目が入力項目50個の45番目にあったとして、 1人目はあらかじめ設定してあった初期値を入力、 2人目以降は受理番号の最大値をはじき出し、最大値+1を入力 という処理をしたいのです。 ※受理番号の入力位置は45番目がベストですが、 処理が複雑になるようなら、先頭でも末尾でもかまいません。 よろしくお願いします。
どのカテで質問するのが適切かと考えたんですが、プログラムに詳しい方なら分かるのではと思いこのカテで質問します。 下記のサイトではブログやサイトの更新情報を取得し日付順に表示しています。 http://soccer.phew.homeip.net/ RSSフィードを配信しているブログなどはまだ分かるのですが、配信していないサイトなどの更新情報も取得し表示しています。 私のサイトもリンクをお願いしているのですが、更新すると30分以内には反映されます。ただブログのように更新した内容(記事名とサイト名)ではなく更新日時とサイト名が表示されるだけです。 私のサイトもTOPページに毎回手打ちで入力してる更新情報(インラインフレーム)を表示するようにしているのですが、RSSフィードは配信していません。 何回か試してみて分かったのですが、この更新情報を記述しているファイルが更新されると自動的に日時やサイト名を取得して表示しているようです。 更新情報は下記のように記述しています。 <a href="更新したファイルのURL" target="_blank">○○更新</a> 調べてみたら更新情報を記述したファイルからRSSフィードを作成する下記サイトのようなサービスもあるそうですが、私のサイトではできませんでした。 http://rssc.dokoda.jp/ そこで質問なのですが、このサイトはどうやって私のサイトの更新情報を取得しているのでしょうか？ 他人のサイトの一ファイルが更新された事を取得する方法ってあるのでしょうか？ ご存知の方いらっしゃいましたらご教示ください。 よろしくお願いします。
また、Perlでわからないことがあるので教えてください。 http://oshiete.goo.ne.jp/qa/7239724.html と似たようなことなのですが、別件なので新しく投稿させて頂きます(^^; 投稿フォームについてなのですが、 「レス記事を書く時に、親記事のデータを引用したい」(「Re:タイトル」等)と思っています Joyfulを、こちらのサイトの方が改造したもので、 http://www.minicgi.net/cgi2/joyful.html その時点では、タイトルなど引用できていたのですが、 更にそれを、私が人に依頼して改造して頂いた(有償でネット上の方に)ので 親記事の引用ができなくなってしまいました； お分かりの方、修正方法を教えて頂けたら凄く助かります！！ サーバー：さくらのスタンダード。「Perlのバージョン5.8.x」 PC:Windows7 ★━━━━━━━━━━━★ ■Perl local($type,$no,$reno,$date,$name,$mail,$micon,$a1,$a2,$a3,$a4,$a5,$apass,$sub,$com,$url,$host,$pw,$color,$color2,$hyde,$plogNo) = @_; local($cnam,$ceml,$cmicon,$ca1,$ca2,$ca3,$ca4,$ca5,$capass,$curl,$cpwd,$cico,$ccol); # 返信 if ($type eq "res" || $type eq "new_html") { if ($res_clip) { print "<form action=\"$script\" method=\"POST\" enctype=\"multipart/form-data\">\n"; } else { print "<form action=\"$script\" method=\"POST\">\n"; } print "<input type=hidden name=mode value=\"regist\">\n"; print "<input type=hidden name=reno value=\"$in{'no'}\">\n"; ($cnam,$ceml,$cmicon,$ca1,$ca2,$ca3,$ca4,$ca5,$capass,$curl,$cpwd,$cico,$ccol,$ccol2,$chyde) = &get_cookie; }～～～～～～～～・・・ ★━━━━━━━━━★ ■データの中身(仮)こんな感じでデータが入っています。 5<>IP<>1234567890<> 3<><>2012/01/12(Thu) 08:42<>ウサギ<>Yahoo<>～・・・ 5<>3<>2012/01/12(Thu) 09:04<>ネコ<><>～・・・ 1<><>2012/01/12(Thu) 08:41<>イヌ<>Google<>～・・・ 2<>1<>2012/01/12(Thu) 08:41<>ウサギ<><>～・・・ 4<>1<>2012/01/12(Thu) 09:03<>タヌキ<><>～・・・ 一番上に、最新の記事の情報 頭から2番目のデータは、親記事の番号 (ネコはウサギの返信記事)
表示したい数字が１桁もしくは２桁でHTML表示を等幅指定で合わせたいので 数字を１桁なら半角、２桁以上は全角にしたいと思っています。 下のように記述して、思い通りの動きはしているのですが もう少しスマートに記述できればと思い質問させていただきます。 みなさんなら、どう記述するか、ご教示ください。 $no = 1; # １桁の場合、半角から全角にする if ($no == 0) { $no2 = "０"; } if ($no == 1) { $no2 = "１"; } if ($no == 2) { $no2 = "２"; } if ($no == 3) { $no2 = "３"; } if ($no == 4) { $no2 = "４"; } if ($no == 5) { $no2 = "５"; } if ($no == 6) { $no2 = "６"; } if ($no == 7) { $no2 = "７"; } if ($no == 8) { $no2 = "８"; } if ($no == 9) { $no2 = "９"; } if ($no >= 10) { $no2 = "$no"; } print "$no2";
現在サイトを開設しているのですがそこのTOPページで下記のRSSリーダーを利用し外部サイトのRSSを読み込んで表示させたいのですが、なかなか上手くいきません。詳しい方なら何か分かるのではと思ってのでこちらで質問します。 http://www.candy-cgi.com/perl/RSS_reader_Type1.h … 一度PHPのスクリプトは設置した事あるのですが、Perlは初めてです。 サーバーはロリポップでコロリポプランです。 私がやった事は (1)上記のサイトからスクリプトをダウンロードしてきて解凍し、index.cgiを開いて設定箇所を変更しました。 パスはサーバ指定のパスと同じだったのでいじっていません。 表示させたいファイルと同じディレクトリに上記サイトからダウンロードしてきた『RSS』というフォルダがありその下にindex.cgiやlog.cgi、style.cssのファイルがあります。 (2)表示させたいファイル(index.shtml)に下記のソースを記述。 <iframe src="./rss/index.cgi" title="rss" scrolling="yes" width="500" height="100"> <a href="http://www.candy-cgi.com/">CANDY CGI</a> </iframe> (3)サーバーにアップロード。 パーミッションを設定。 これで確認してみると500エラーになっています。 このスクリプトはJcode.pm、FeedPP.pmを使用するらしいのですが、これがサーバで用意されてるのかはどこで確認すればいいのでしょうか？ロリポップの掲示板で初めから用意されてるような回答があったので準備はしていないのですが。 表示させたいページがSSIを使用しているから？とか、.htaccessファイルに記述しているのが引っかかっているのか？とかフォルダにもパーミッションを設定しないといけないのか？など素人なりに考えたのですが皆目見当もつきません。 ご存知の方いらっしゃいましたらご教示ください。 よろしくお願いします。
スミマセン。基本だと思いますが、教えてください。 Joyful系の掲示板のファイルなのですが、 各記事の親記事にある特定のデータを、 取り出す方法を教えて下さい。 5<>IP<>1234567890<> 3<><>2012/01/12(Thu) 08:42<>ウサギ<>Yahoo<> 5<>3<>2012/01/12(Thu) 09:04<>ネコ<><> 1<><>2012/01/12(Thu) 08:41<>イヌ<>Google<> 2<>1<>2012/01/12(Thu) 08:41<>ウサギ<><> 4<>1<>2012/01/12(Thu) 09:03<>タヌキ<><> こんな感じで、データが記入されるdatファイルがあります。 「１のレスが２・４」「３のレスが５」です。 それで、親記事に「Yahoo」や「Google」というデータが入っているので、 親記事１にレスしてる２・４でも、 親記事に入ってる「Google」といった文字を反映したいのです。 うまく伝えられ無いので、画像にしてみましたので見てやって下さい。 私が見てるプログラムでは、 レスはレスで、「Google」等の文字を探してしまっているので、望む形にならないのです； どうぞ、よろしくお願いします！ ↓ざっくり。この辺りの最初の方に、親だけ読み込んで、＄search1　とかに、セットできないかと考えています。 ★━━━━━━━━━━━━━━━━━━━━★ local($ipt,$wh,$i,$flag); # 記事を展開 open(IN,"$logfile") || &error("Open Error : $logfile"); $top = <IN>; $i=0; $x=1; $flag=0; # ソート無し：必要最小限だけ読み込み if(!$sort && !$threadsuu){ while(<IN>){ if((split(/<>/))[1] eq "") { $i++; } if ($i < $page + 1) { next; } if ($i > $page + $p_log) { next; } push(@DATA,$_); } } # ソート無し、スレッド表示有り elsif(!$sort && $threadsuu){ @DATA = <IN>; } # ソート有り：全データを読み込んでソート実行 else{ @DATA = <IN>; if($sort == 1){ &ressort; } if($sort == 2){ &nosort; } } close(IN); # 新着スレッドを表示 if($threadsuu || $up_down){ &thread; } # レスの表示制限をする場合には、配列を改造 if($max_res){ &omit; } foreach(@DATA){ ($no,$reno,$date,$name,$mail,$search) = split(/<>/); # ページ処理 if($sort || $threadsuu){ if ($reno eq "") { $i++; } if ($i < $page + 1) { next; } if ($i > $page + $p_log) { next; } } if (!$reno && $flag) { print "</td></tr></table><br><br>\n\n"; $flag=1; } if (!$reno) { print "<table class=\"table1\" align=\"center\" cellspacing=0 cellpadding=2>\n<tr><td>"; $flag=1; } if ($reno && $line_color) { print "<hr noshade size=1 width='85%' color=\"$line_color\">\n"; } print "<table width=100% border=0 cellpadding=2 cellspacing=0>\n<tr>"; if ($reno) { print "<td rowspan=2 width=40><br></td>"; } if($line_color){ print"<td>"; } elsif($reno){ print"<td class=\"b2\">"; } else{ print"<td class=\"b1\">"; } if (!$reno) { print "<span class=\"sub\"> <font color=\"$t_color\"><b>$sub </b></font></span>";} else { print "Re:<font color=\"$t_color\"><b>$sub </b></font></span>";} if($search == "yahoo"){ print "投稿者：<span class=\"name\">$name</span>　yahooで検索";} elsif($search == "google"){ print "投稿者：<span class=\"name\">$name</span>　Googleで検索";} else{ print "投稿者：<span class=\"name\">$name</span>　その他で検索";}
データの文字数を一定の数字で省こうと思い下記の内容を参考にしようと思っているのですが 下記はUTF-8用なので、SJISに対応させるにはバイト列の定義を変更すれば良いのですが どのように変更すれば良いのは分かりません。 my #str = "あいうえおかきくけこさしすせそ"; # 元の文字列 my $view = 10; # 10文字まで表示し後は省略 print &main::round_utf8($str,$view); sub round_utf8 { my ($str,$view) = @_; my $one = "[\x00-\x7F]"; # 1バイト文字 my $two = "[\xC2-\xDF][\x80-\xBF]"; # 2バイト文字 my $three = "[\xE0-\xEF][\x80-\xBF]{2}"; # 3バイト文字 my $bigger = "[\xF0-\xF7][\x80-\xBF]{3,}"; # 4バイト以上 $str =~ s/^(($one|$two|$three|$bigger){$view}).+/$1.../g; return $str; } 私が考えているのは$****に入っている文字列を10文字以降は..で省略させることです。 アドバイスのほどをどうか宜しくお願いします。
プログラム初心者です. 現在,プログラムの書き換えを行っているところです. (言語はperlです 以下のプログラムのnextの前に, 「$bbをカウントし, $bbが２回出てきたらlast」 というプログラムを書きたいと思っています. ------------------------ if($honbun =~ /$boundary/) { $bb++; 　　　　　　　 if($bb >=2) 　　　　　　　　{ 　　　　 last; } next; } ---------------- カウントする変数を使うべきだと思うのですが,どのようにすればいいでしょうか； 初心者質問で申し訳ないです.
現在perlを勉強中の身です。 1行に1英単語があり、それが100～200行に渡ってあるファイルがあります。 このファイルの単語に重複しているものはありません。Xとします。 また別のファイルにも同様に1行に1英単語があり、それが100～200行に渡ってあるファイルがあります。 このファイルの単語は重複しているものがあります。Yとします。 当然、最初のファイルにある単語もない単語もあります。 ファイルXから単語を読み取りYでその単語が何回出現したかチェックして単語と出現回数を出力するようなプログラムを組みたいと考えています。 参考書やインターネットで調べたところ、単語を数えるプログラム等はあるのですが、ファイルを読み込みさらにファイルを読み込んで比較する、といった流れのプログラムを見つけることができませんでした。 遠回りな考え方だと 例えば ファイルX a b c d（本当は単語間は改行があり１行１単語なのですが、見やすさのためにこのように表記しました。） ファイルY c c d e f とあった場合まず二つのファイルを結合し ファイルZ a b c d c c d e f として二回以上出現した単語のみを抜き出し ファイルZ' c 2 d 1　(この時出現回数を-1回する) としてファイルXと結合して出現回数を足して-1すると ファイルX' a 0 b 0 c 2 d 1 のようにできるのではないかと考えてはいます。しかし遠回り過ぎてスマートではないように感じます。 どのような考え方、そしてどのようなプログラムを組めばよいのでしょうか。ご教授お願い致します。
前回の質問で補足すればよかったのですが,ミスしてしまったので＾＾； 同じような質問ですがもう一度・・・ （プログラム初心者です） 「もし,aaaという文字列が2個以上存在する時は,最初のaaaを使う」 を, perl で書きたいと思っております.書いてみたものは以下です. ----------- if (aaa >=2) { 最初のaaaを使う } ----------- いろいろと間違えてそうですが... 「最初のaaaを使う」 という表現がわかりません＞＜ 間違い・こうしたほうがいいよ　などありましたら御願いします！
perl初心者です。 ファイルからデータを読み込んで3列目の要素を取り出すプログラムを作ろうと思っています。 その途中の勉強段階で参考書に $,=','; $\="\n"; @ARRAY=(); while(<>){ chop; split; @ARRAY=(@ARRAY, [@_] ); } print @ARRAY; foreach (@ARRAY){ print @$_; } print $ARRAY[1][2]; というプログラムがありました。このプログラムの大まかな意味は理解できます。 しかし、読み込ませるファイルを 1 2 3 4 5 6 7 8 9 のようにして コマンドプロンプトで実行してみると ARRAY(0x198b9c),ARRAY(0x198998),ARRAY(0x19a830) となり、参考書で紹介される結果の ARRAY(0x198b9c),ARRAY(0x198998),ARRAY(0x19a830) 1,2,3 4,5,6 7,8,9 6; となりませんでした。色々調べたんですが、どうやら　print @_;　に反応(?)してくれてないみたいです。 私の使用しているPCはwindows7です。原因がわからず先に進めない状況です。指導お願い致します。
お世話になります。 PerlのBBSを改造中です。 きちんと勉強してはいませんが、なんとなく弄ることは出来るレベルです。 今、ifで、表示の変更をしているのですが、上手く行かなくて困っています。 お分かりになる方、 何らかの原因に心当たりのある方、 どうぞよろしくお願いします。 ★━━━━━━━━━━━━━━━━━━━━★ データを入れているdatファイル内、 $astrologyというのに、「*Leo*」というのが格納されています。 …で、 if(!$astrology){print "入ってない\n";} else{print "入ってる\n";} …と入れると、「*Leo*」というデータが入っているわけなので、 「入ってる」と、表示されます。 ですが、 if($astrology == "*Aries*"){print "おひつじ座 <br />$astrology \n";} elsif($astrology == "*Leo*"){print "しし座　<br />$astrology\n";} else{print "その他<br />$astrology\n";} ・・・と、書いてみると 「おひつじ座 *Leo*」 と表示されます。 「*Leo*」と表示されているので、呼び込めていない訳ではないと思うのですが…。 ★━━━━━━━━━━━━━━━━━━━━★ 何が原因かわからないので、ちょっとしたアドバイスでも構いません。 ご返答よろしくお願いします。
以下のような形式のCSVデータを入力とします。 ファイル1 赤玉,青玉,緑玉 ファイル2 プレイヤー1,赤玉青玉赤玉 プレイヤー2緑玉赤玉赤玉赤玉 プレイヤー3緑玉緑玉青玉緑玉玉青玉 … これを プレイヤー,赤玉,青球,緑玉 プレイヤー1,2,1,0 プレイヤー2,3,0,1 プレイヤー3,0,2,3 という感じでテーブルを生成して、玉の個数をカウントした結果を対応したところにいれ、なければ0を入れるという感じにしたいです。 ご教授願います。
携帯にも対応した無料スペース用のCGIやPHPを配布しているサイトがありましたら教えて下さい。
テキストファイルを読み込んで、以下のルールに従った文字列だけを.txtで出力するプログラムを書いています。 具体的にはテキストファイル中の "text":"★★★","to_user" で囲まれている★★★の部分のみを抽出したいです。 そこで正規表現に触りだしたのですが、表現がうまくいっていないようで1週間ほどはまっています。。うまく出力できるように直しをいただけないでしょうか。 打ち明けてしまうと、★★★の部分はtwitterの呟き（日本語）になります。 以下がそのソースになります。よろしくお願いします。 print "Input file name: "; $ifname = <STDIN>; open(IN, $ifname); open(OUT, "> out.txt"); #出力ファイル while(<IN>){ if($ifname =" m/"test":(.*?),"to_user"/; next if($_ eq ""); print OUT "$_\n"; #書き出し } close(OUT); close(IN);
あらかじめ作った英語のテキストファイルを入力し、 文字数をカウントするプログラム（perl言語）でつくっています。 あらかたできたと思うのですが、 明らかに１００文字以上あるにも関わらず なぜか３文字とカウントされます。 どこが不具合がわかる方いましたら よろしくお願いいたします。 以下が問題のプログラムです。 print"読み込むファイル名を入力してください。\n"; $input_file = <STDIN>; open(INPUT, "$input_file") or die "$!"; sub count_words{ my @ words = split(/\W+/,$_[0]); my $num_words=@ words; } $num_words = &count_words($input_file); print"単語数は$num_wordsです。"; close(INPUT);
open(DB,"$file") ;でデータを開くだけでデータが破損することはありますか？ たとえば open(DB,"$file") ; flock(DB,2); @lines = <DB>; close(DB); flock(DB,8); のように@linesにデータを格納します。 $fileに上書きはしません。 上記ファイル操作だけで、同時接続があったときにファイルが破損することはありますか？ ファイルロック関数を付けた方がいいですか？
Perlでの配列のソートについての質問です。 実行例） 数学,山田,60,佐藤,80,蓑田,55,岸本,90,小笠原,75 英語,山田,70,佐藤,50,蓑田,81,岸本,99,小笠原,80 上のようなcsvファイルを入力として、以下のように各行の中で点数順にソートしてから出力する 数学,岸本,90,佐藤,80,小笠原,75,山田,60,蓑田,55 英語,岸本,99,,蓑田,81,小笠原,80山田,70,佐藤,50 どのようにすればいいでしょうか？ご教授願います。
お世話になります。 フリー配布のCGI(Perl)をちょっと改造しているのですが カンマを禁止したり別の文字に置き換えたりって 方法ありますか？ コンマで区切っているタイプのCGIなので、 訪問者さんが本文中にコンマを入力して データがズレまくってしまいます； 禁止ワードにすればいいのかと思って if($in{"name"} ~ /,/ ){ &error('コンマの使用は禁止されています'); } と、入れてみたらエラーになってしまいました； 何か方法ありませんか？ よろしくお願いします。
Perl初心者です。お願いいたします。 下記のような動きを実現したいのですが、どのような方法があるでしょうか。 できる限りすっきり書きたいのですが、自分で書きますと全パターンを記述していく・・等しか思いつきませんでした。お分かりになる方お教えいただけますと助かります。 $a1、$a2、$a3、$a4、$a5、$a6の6種類のデータがあり、いずれも「１」または「２」が代入されます。 その時に「１」が代入されたもののうち、aの後ろの数字が大きいほうの変数を抽出したいです。 たとえば、$a1、$a2、$a3、$a4、$a5、$a6　のデータが、1、2、2、1、1、2　であれば、「１」のうち数字が大きいのは$a5　なので　$TOP = $a5； 、としたいです。 宜しくお願いします。
IIS + クラシック asp + ActivePerl 環境下で QR コードを取得するプログラムを作っています。 呼び出し元の asp 内に、 <img src = "./cgi-bin/qr_test.cgi?q=hogehoge"> と書きました。 この q=hogehoge を呼び出し先で取得する方法を教えてください。 ===== 呼び出し元 (qr_test.asp) <html> <head></head> <body> <img src = "./cgi-bin/qr_test.cgi?q=hogehoge"> </body> </html> ===== 呼び出し先 (qr_test.cgi) use strict; use warnings; use GD::Barcode; my $url = $in{'q'}; # ここでエラーが出ます。コメントアウトすると正常に動きます。 my $qrimg = GD::Barcode->new('QRcode',$url,{'Ecc'=>'M',Version=>'7','ModuleSize'=>'4'}); binmode(STDOUT); print "Content-Type: image/jpeg\n\n"; print $qrimg->plot->jpeg; exit(0); ===== バージョンは IIS 7.5 Perl 5.14.2 (64bit) です。 どなたかご教授お願いします。
テキストファイルの中身が divs=SIL,0.070000,-423111.000000/DH,0.400000,-1127673.000000+SIL,0.200000,923920.000000　score=-10487331.000000 acoustic=-10487331.000000 のような形式で10行ほどとなっていた場合に、 SILの-423111と923920の部分、acousticの-10487331の部分を抽出するプログラムを Perlで記述するにはどうすればよいでしょうか。 知識のある方、お願いします。
perl の正規表現を用いて、文字列の抽出を行いたいのですがどのように 書けばいいのかわかりません。 実現したいことは 「Y:/フォルダ名/フォルダ名/ファイル名.拡張子」 というテキストに対して 「拡張子」のみを抽出することと 「ファイル名」のみを抽出することです。 パターンマッチや変換はなんとなくわかるのですが 抽出の仕方がよくわかりません。 よろしくお願いいたします。
下記のようなプログラムを作成しました。 (Perl のバージョンは 5.8.8 となります。) for ($i=0; $i<=105; $i++) { $str1 = "str1"; $str2 = "1234567890str1test"; $str2=~ s/^(\d+)($str1)/test/g; print $i."\n"; print $1."\n"; print $2."\n"; print $str2."\n"; } このプログラムを実行しますと、ループが100回実施するまでは $1, $2の値を 取得できるのですが、100回を超えると取得できなくなります。 (上記で行っている置換処理は100回を超えても正常に処理されます。) 質問としましては、この現象は Perl のバグなのでしょうか。 それとも、私の正規表現の書き方に不備があるのでしょうか。 ネットでいろいろ調べてみたのですが、答えが見つからなかったため、 質問させていただきました。 よろしくお願い致します。
下記のようなファイルがあります。 1234：　4（グループ名：　要素数） AB（要素１） CD（要素2） EFG（要素3） HIJ（要素4） 2345：　1（グループ名：　要素数） XYZ（要素１） ○○：　XX ・・・ ：の行が区切られる単位とし、：の後の数字がそのグループに入る要素数である。 その要素数毎にファイル分割（要素のみ記述されたファイル）したいです。 perlプログラムで　どのように書けば　よいのか教えてください。
perlを用いて、1列目の数字が連番じゃなくなったら印をつけたいと思っています。 ---＜data.txt＞--- 1　A　1　2 2　B　5　2 3　C　2　3 4　D　4　4 10　J　5　10 11　K　6　12 13　M　2　28　 －－－＜result.txt＞－－－ 1　A　1　2 2　B　5　2 3　C　2　3 4　D　4　4 > 10　J　5　10 11　K　6　12 > 13　M　2　28 このようにしたのですが、いい方法はありますか？ perl初心者ですがよろしくお願いします。
HTMLで入力フォームを作った時にチェックボックスにチェックを入れ送信した後に、またそのＨＴＭＬのアンケートフォームを開いた時に初期値として前回送信したチェックが入っているようなプログラムを書きたいのですが、どうすればいいのかわかりません。Ｐerlやhtmlで書きたいと思っているのですが書けますか？？　どなたか教えてください！！
初めて質問させて頂きます。 iCalendarのデータを吐き出すプログラムを作成中です。 長い項目に関して、75オクテットごとに改行(CRLF)と半角スペースを入れないといけないのですが、方法がわかりません。なお、文字コードはUTF-8で、全角・半角文字がまじっています。 なお、データ中に\nを含む場合は、それがぶった切られないようにする方法はないでしょうか？ 具体例） DESCRIPTION:あいうえおかきくけこさしすせそたちつてとなにぬね\nのはひふへほ ↓ DESCRIPTION:あいうえおかきくけこさしすせそたちつてとなにぬね [半角スペース]\nのはひふへほ ※上記のように75オクテット目の\とnが途中で改行されないこと。
perlで次のようなプログラムがあります。 sub { 中略 $USERS{$xy}　　　　　　　＃$xyは変数 　中略 ｝ <form name="user" action="$ENV{'SCRIPT_NAME" method="POST"> ユーザー名：<input type="text" name="username"><br> パスワード：<input type="password" name="pass" value=""><br> <input type="submit" value="ログイン"> ------------- このとき$USERS{$xy}　の要素を別ファイルに渡すことができますか。可能ならばどのようにすればよいでしょうか
お世話になります。 次のような文字列から「81.59」を数字として取り出したいのですが Perlを始めたばかりで途方に暮れています。 <td bgcolor="#c7c7c7">81.59円</td> 上記から81.59を数字として取り出す方法を教えて頂けませんでしょうか。
perlでの、ファイル読み込みについてお尋ねしたいことがあります。 a b c d e f g h i というような内容のテキストファイルがあったとき、この成分を「○行×列」の個別に読み込みたいのですが、 （C言語でいう、「A[0][0]=a A[0」[1]=b A[0][2]=c A[1][0]=d ・・・のように） どのようにしたらよいのでしょうか？ perlに関しては全くの初心者なのですが、どうしてもperlを使わないといけない事情があり、 稚拙な質問かとは思いますが、どうぞよろしくお願いします。
毎度お世話になっております。 今夜も躓いてしまってどうにもならないので、お力をお貸しいただけませんでしょうか。 以下のようなリストファイルがあります。 ------------------ 項目1 項目2 ・・・ ------------------ このリストにマッチした行を、リストの項目ごとにランダムに３行選んで出力したいです。 マッチした行を取り出すところまでは、以下のような形でできたのですが、 ここから先をどのように書けばいいのかわかりません。 ------------------ my $list = 'リストファイル'; open (IN, "$list"); my %l; while(<IN>) { chomp; $l{$_}++; } close IN; while(<DATA>) { my ($xx,$yy) = split(/\t/,$_); if (exists($l{$xx})) { # print; # ここから先がわかりません } } __END__ 項目1 N1 項目1 N2 項目2 N3 項目2 N4 項目2 N5 項目1 N6 項目2 N7 項目2 N8 項目2 N9 項目1 N10 ------------------ 以下のような出力結果にしたいです。 ------------------ 項目1 N2 項目1 N6 項目1 N10 項目2 N3 項目2 N5 項目2 N9 ------------------ どうぞよろしくお願いいたします。
Perlのデータ処理に関する質問です。 afcb7dc0,"福岡県","天神","福岡県","博多・福岡空港" 09f115fc,"東京都","東急沿線","東京都","東急沿線","東京都","代官山、恵比寿-五反田","東京都","東急沿線","東京都","三田、浜松町-品川","東京都","東急沿線" 3933245b,"東京都","新宿・代々木" ・・・ という形式のCSVファイルがあるときに、これを afcb7dc0,"福岡県",2,"天神",1,"博多・福岡空港",2 09f115fc,"東京都",6,"東急沿線",4,"代官山、恵比寿-五反田",1,"三田、浜松町-品川",1 3933245b,"東京都",1,"新宿・代々木",1 の形式に変換するにはどうすればいいでしょうか？ ご教授願います。
データを取得するため、他のサーバーにあるファイルの存在確認をしたいのですが、どのようにすればいいでしょうか？ ファイルは普通に公開されているファイルです 他の方の質問の回答にもあった if(head "$data"){ use LWP::Simple; $content = get($data); } #$dataは別行でURLを指定してます という方法を試したのですがわざと存在しないファイル名を指定したところtrueが返り、ifの中に入っていって存在しないファイルを取得しようとしてgetでエラーになってしまいましたし、存在するファイル名を指定してみてもやはりifの中に入ってそのままデータの取得ができました （ファイルが存在するしないにかかわらずif分岐がtrueになりました） 他に if(-e "$data"){ use LWP::Simple; $content = get($data); } #$dataは別行でURLを指定してます とやってみましたがこれは逆に存在するファイル名をしていても全てifの中に入っていかずfalseが返ってきました なお、確認したいファイルはcsvです
Perlを用いて、数百あるhtmlファイルの一括検索＆置換作業がしたいです。 作業としては、 1.webに上がっているhtmlファイルを取得してローカルに保存　（完了） 2.meta系テキストの記述 例：<meta property="og:title" content="" /> 3.さきほど保存したファイルの中から、titleタグの中身を取得して変数に格納 例<title>今日の日記</title>の「今日の日記」部分 4.og:titleのcontent要素に格納したデータを記述する 例：<meta property="og:title" content="今日の日記" /> 以上です。 現在1は出来ていて、2も一括置換で可能です。3.4のローカルに保存したhtmlファイルの操作で躓いています。 お分かりの方どうぞよろしくお願いします。
perlのsystem関数を使って、コマンドを実行したいのですが、 実行ファイルの引数にフォルダを指定すると、うまく動作しません。 以下のように書いています system "実行ファイル フォルダ"; 実行ファイルは　.BATファイルで、 指定しているフォルダには複数のテキストファイルが入っています。 perlで書いたcgiファイルは実行ファイルと同じディレクトリにあります。 コマンドからではなく、手動でドラッグ＆ドロップすると正常に動作します。 windous7でperlはActivePerlを使用しています。 引数にはフォルダを指定できないのでしょうか？ またフォルダを指定できない場合、解決策などはあるのでしょうか？ よろしくおねがいいたします。
# 正規表現　\s が、\n に、ヒットする。 # # Windows XP(sp3) ActivePerl # # This is perl 5, version 12, subversion 3 (v5.12.3) built for MSWin32-x86-multi-thread # (with 9 registered patches, see perl -V for more detail) # # Copyright 1987-2010, Larry Wall # # Binary build 1204 [294330] provided by ActiveState http://www.ActiveState.com # Built Feb 9 2011 14:38:22 # use strict; use warnings; use utf8; my $a = "\n\n"; $a =~ s/\s/aaaaa\n/ig; print $a; __END__ [出力結果] aaaaa aaaaa
perlで、テキストを形態素解析し、専門用語を抽出するコードを書いています。 Text::MeCab　と　TermExtract::MeCab;　を利用しているのですが、 よくわからないエラーがでます。 以下　ソースとエラー文になります。 <ソース> #! /usr/bin/perl use Text::MeCab; use TermExtract::MeCab; my $text = "私はももが好きです。"; my $mtext = getMecabText($text); sub getMecabText{ my ($text) = shift @_; my @arg = ($0,"Ochasen"); my $mecab = new Text::MeCab::Tagger(\@arg); my $exdata = new TermExtract::MeCab; $text = $mecab->parse($text); return $text; } printKeyWord($mtext); sub printKeyWord{ my ($mtext) = shift @_; my $data = new TermExtract::MeCab; my $output_mode = 1; $data->use_TF; my @noun_list = $data->get_imp_word($mtext,'var'); foreach (@noun_list) { next if $_->[0] =~ /^(昭和)*(平成)*(\d+年)*(\d+月)*(\d+日)*(午前)*(午後)*(\d+時)*(\d+分)*(\d+秒)*$/; next if $_->[0] =~ /^\d+$/; printf "%-60s %16.2f\n", $_->[0], $_->[1] if $output_mode == 1; printf "%s\n", $_->[0] if $output_mode == 2; printf "%s,", $_->[0] if $output_mode == 3; } } <エラー文> Can't locate loadable object for module Text::MeCab in @INC (@INC contains: C:/usr/site/lib C:/usr/lib .) at C:/usr/lib/DynaLoader.pm line 21 BEGIN failed--compilation aborted at C:/usr/lib/Text/MeCab.pm line 21. Compilation failed in require at ./lab/a.cgi line 2. BEGIN failed--compilation aborted at ./lab/a.cgi line 2. C:/usr/site/lib と　C:/usr/lib　の中に　MeCab.pmファイルを置いても同じエラーがでます。 DynaLoader.pm line 21　や　MeCab.pm line 21　は改行のみでした。 MeCab.pm　は　http://search.cpan.org/~dmaki/Text-MeCab-0.20013 … の　Source　にあるものをコピペして設置しています。 いろいろと格闘したのですが、お手上げ状態です。 原因がわかる方いらっしゃれば教えていただきたいです。 よろしくお願いしいたします。
perl　で　TermExtract　というものを使って専門用語抽出をしたいと思っています。 参考ページ http://gensen.dl.itc.u-tokyo.ac.jp/termextract.h … 形態素解析ソフトは「和布蕪」を使っています。 参考ページの 「和布蕪」の場合の、TermExtract::MeCab サンプルスクリプトを参考にして 動かしてみたんですがうまく動作しません。 ＜ソース＞ #! /usr/bin/perl use TermExtract::MeCab; my $data = new TermExtract::MeCab; my $InputFile = "./CGI/mecab_out.txt"; $SIG{INT} = $SIG{QUIT} = $SIG{TERM} = 'sigexit'; my $output_mode = 1; my @noun_list = $data->get_imp_word($InputFile); print "Content-type: text/html; charset=EUC-JP\n\n"; print <<"EOM"; <!DOCTYPE html> <HTML> <HEAD> <TITLE>mecab</TITLE> </HEAD> <BODY> EOM foreach (@noun_list) { # 結果表示 printf "%-60s %16.2f\n", $_->[0], $_->[1] if $output_mode == 1; printf "%s\n", $_->[0] if $output_mode == 2; printf "%s,", $_->[0] if $output_mode == 3; } sub sigexit { $data->unlock_db; } print <<"EOM"; </BODY> </HTML> EOM ＜---------------＞ mecab_out.txtには、和布蕪」を使って出食された形態素解析済みのデータ が入っています。 ブラウザでみると、真っ白のページが表示されます。 なにか使い方を間違えているのでしょうか？ よろしくお願いいたします。
DBI.pmのメソッドで、 selectall_arrayref()は配列の配列形式、 selectall_hashref()はハッシュのハッシュ形式でレコードセットを返しますが、 配列のハッシュ形式で返すメソッドは存在するのでしょうか。 ハッシュのキーは列名として、 ハッシュの値はORDER BY句で指定したとおりに整列された配列へのリファレンスとなるような、ハッシュを生成しようとしています
perl初心者です。 下記のような同時刻の2つのデータを1つのデータに統合させたいのですが うまく出来ず困っています。 どうかお知恵を貸していただけないでしょうか。 データは時刻(時:分:秒), 値1, 値2になっています。 test1.txtの同時刻の後ろにtest2.txtの値1と値2を入れ、 欠測値には-999を入れるプログラムを作っています。 厄介なのは、 開始時刻がtest1.txtよりtest2.txtが早い場合や 終了時刻がtest2.txtよりtest1.txtが遅い場合がある事です。 test1.txt 10:13:14, 3.1, 0.1 10:13:15, 6.1, 0.3 10:13:16, 8.7, 0.2 10:13:17, 12.8, 0.3 10:13:18, 13.4, 0.5 10:13:19, 15.2, 0.4 test2.txt 10:13:16, 32.5, 0.01 10:13:17, 33.1, 0.03 10:13:18, 36.2, 0.02 10:13:19, 34.3, 0.01 10:13:20, 33.8, 0.04 10:13:21, 32.6, 0.09 10:13:22, 32.1, 0.08 希望結果 test.txt 10:13:14, 3.1, 0.1, -999.0, -999.00 10:13:15, 6.1, 0.3, -999.0, -999.00 10:13:16, 8.7, 0.2, 32.5, 0.01 10:13:17, 12.8, 0.3, 33.1, 0.03 10:13:18, 13.4, 0.5, 36.2, 0.02 10:13:19, 15.2, 0.4, 34.3, 0.01 10:13:20, -999.0, -999.0, 33.8, 0.04 10:13:21, -999.0, -999.0, 32.6, 0.09 10:13:22, -999.0, -999.0, 32.1, 0.08 以下が自分が作成したプログラムです。 open IN_1, "test1.txt"; open IN_2, "test2.txt"; open OUT, ">test.txt"; while ($input1 = <IN_1>) { # test1.txtの処理 chomp $input1;# 改行削除 @input1 = split(/,/, $input1); # カンマ区切り $n = $n + 1; $time1[$n] = @input1[0]; @time1 = split(/:/, $time1[$n]); # 時刻をコロン区切り @hours1[$n] = @time_l[0]; @min1[$n] = @time_l[1]; @sec1[$n] = @time_l[2]; @a[$n] = @input1[1]; # 値1 @b[$n] = @input1[2]; # 値2 } while ($input2 = <IN_2>) { # test2.txtの処理 chomp $input2; @input2 = split(/,/, $input2); $m = $m + 1; $time2[$m] = @input2[0]; @time2 = split(/:/, $time2[$m]); @hours2[$m] = @time2[0]; @min2[$m] = @time2[1]; @sec2[$m] = @time2[2]; @c[$m] = @input2[1]; # 値1 @d[$m] = @input2[2]; # 値2 } # 開始と終了時刻の計算 # test1.txtの時刻 $hours1_S = @hours1[1]; # 開始時 $hours1_E = @hours1[$n]; # 終了時 $min1_S = @min1[1]; # 開始分 $min1_E = @min1[$n]; # 終了分 $sec1_S = @sec1[1]; # 開始秒 $sec1_E = @sec1[$n]; # 終了秒 $time1_S = $hours1_S*3600 + $min1_S*60 + $sec1_S; # 開始時刻を秒に計算 $time1_E = $hours1_E*3600 + $min1_E*60 + $sec1_E; # 終了時刻を秒に計算 # test2.txtの時刻 $hours2_S = @hours2[1]; $hours2_E = @hours2[$m]; $min2_S = @min2[1]; $min2_E = @min2[$m]; $sec2_S = @sec2[1]; $sec2_E = @sec2[$m]; $time2_S = $hours2_S*3600 + $min2_S*60 + $sec2_S; $time2_E = $hours2_E*3600 + $min2_E*60 + $sec2_E; if($time1_S <= $time2_S){ # 開始時刻の比較 $starttime = $time1_S; }else{ $starttime = $time2_S; } if($time1_E <= $time2_E){ # 終了時刻の比較 $endtime = $time2_E; }else{ $endtime = $time1_E; } $j = $endtime - $starttime;# 全体のデータ個数 # test.txtへ出力 for($i=1; $i<=$j; $i++){ if(@hours1[$i] != @hours2[$i] && @min1[$i] != @min2[$i] && @sec1[$i] != @sec2[$i]){ printf OUT "%2d:%2d:%2d %5.1f% 5.1f %5.1f %7.2f\n", @hours1[$i], @min1[$i], @sec1[$i], @a[$i], @b[$i], -999, -999; }elsif(@hours1[$i] == @hours2[$i] && @min1[$i] == @min2[$i] && @sec1[$i] == @sec2[$i]){ printf OUT "%2d:%2d:%2d %5.1f% 5.1f %5.1f %7.2f\n", @hours1[$i], @min1[$i], @sec1[$i], @a[$i], @b[$i], @c[$i], @d[$i]; }else{ printf OUT "%2d:%2d:%2d %5.1f% 5.1f %5.1f %7.2f\n", @hours2[$i], @min2[$i], @sec2[$i], -999@, -999, @c[$i], @d[$i]; } } close IN_1; close IN_1; close OUT; とても汚いプログラムになってしまいました… このプログラム以外でも構いませんのでどうかよろしくお願い致します。
こんばんは。 自分の力では解決できないので、お力をお貸しいただけないでしょうか。 以下のようなフォーマットのデータがあります。 「--」で一区切りです。 a b c d -- e f g h -- i j k l -- これを、以下のようなフォーマットで、 「--」で区切られたまとまりの行を全て結合して、 各行の後ろに付け加えたいのですが、 a -> abcd b -> abcd c -> abcd d -> abcd -- e -> efgh f -> efgh g -> efgh h -> efgh -- i -> ijkl j -> ijkl k -> ijkl l -> ijkl -- 自分で色々やってみましたが、うまくできません。 どうかよろしくお願いいたします。
perl、HTML::TreeBuilderモジュールを使ってHTMLからほしい情報を抽出しています。 探したタグがない場合に、次の処理にいけるように判定したいのですが、うまくいきません。 以下抽出部分のソースです。 my $tree = HTML::TreeBuilder->new; $tree->parse($html); my $items = $tree->look_down('class', 'referencelink')->find('li'); $items = $items->as_text; 　 HTML内に<li class="referencelink">というタグがない場合 $items　にどんな値が入るのでしょうか。 if (!defined($items))　や　if ($items=="")で判定しても、 my $items = $tree->look_down('class', 'referencelink')->find('li'); で処理が止まってしまいます。 どうしたらよいでしょうか？ よろしくお願いいたします。
WindowsXPにActivePerlを導入し、Net::SSH::Perlを使用してLinuxサーバにssh接続をしたいのですが、どうもうまく動いてくれません。 ■ソース #!perl use Net::SSH::Perl; use strict; my $host = "192.168.1.250"; my $user = "test"; my $pass = "testtest"; my $cmd = "id"; my $ssh = Net::SSH::Perl->new($host); $ssh->login($user, $pass); my($stdout, $stderr, $exit) = $ssh->cmd($cmd); ■Windowsのコマンドプロンプトから実行すると Can't locate Math/Pari.pm in @INC (@INC contains: D:/add_program_files/perl/site/lib D:/add_program_files/perl/lib .) at D:/add_program_files/perl/lib/Net/SSH/Perl/Util/SSH2MP.pm line 6, <GEN0> line 1. BEGIN failed--compilation aborted at D:/add_program_files/perl/lib/Net/SSH/Perl/Util/SSH2MP.pm line 6, <GEN0> line 1. Compilation failed in require at D:/add_program_files/perl/lib/Net/SSH/Perl/Util.pm line 56, <GEN0> line 1. BEGIN failed--compilation aborted at D:/add_program_files/perl/lib/Net/SSH/Perl/Kex/DH1.pm line 10, <GEN0> line 1. Compilation failed in require at D:/add_program_files/perl/lib/Net/SSH/Perl/Kex.pm line 6, <GEN0> line 1. BEGIN failed--compilation aborted at D:/add_program_files/perl/lib/Net/SSH/Perl/Kex.pm line 6, <GEN0> line 1. Compilation failed in require at D:/add_program_files/perl/lib/Net/SSH/Perl/SSH2.pm line 6, <GEN0> line 1. BEGIN failed--compilation aborted at D:/add_program_files/perl/lib/Net/SSH/Perl/SSH2.pm line 6, <GEN0> line 1. Compilation failed in require at D:/add_program_files/perl/lib/Net/SSH/Perl.pm line 52, <GEN0> line 1. 上記を解決しようにも検索にHitせず、対処に困っています。 どなたか同じ境遇の人がいらっしゃったら教えてください。
モノの本によるとファイルを開く際にファイル入出力記号を +> にすると、追加書き込みは出来ないものの、読み取り、書き込み、新規作成、上書きが出来るとのこと。 ファイルからデータを読み込んで、読み込んだ内容を加工して、すぐにファイルに保存する用途に最適だなと思いましたが、実際に使ってみると読み出しをしてくれません。 何がいけないのでしょうか。 my @s; my @t=('a','b'); open IO,'+>test.txt'; @s=<IO>; print "\$@の要素数は ".@s."個\n"; for(@t) { print IO $_."\n"; } close IO;
作業に時間がかかるプログラムを組んでいます。 プログラムの実行をどうしても中断したい場合、ctrl＋Ｃで強制終了することが出来ます。しかしそれでは、その時点の作業状況を保存できません。 何かの操作をしたら、その時点の作業内容を保存してから終了する。次回、その保存内容を元に、そこから続きを始められるという仕組みを考えたいのですが、どのようにすれば良いか、まるで分かりません。 具体的に教えてくださらなくても、これを勉強しなさいで構いません。アドバイスをいただけないでしょうか。
ーーーーーーーーーーーー SRR_1 X1 Y1 SRR_1 X2 Y2 ～ SRR_1 Xn Yn SRR_2 X1 Y1 SRR_2 X2 Y2 ～ SRR_3 X1 Y1 ～ SRR_xxx X1 Y1 ーーーーーーーーーーー このようなタブ区切りのファイルを、一列目のSRR以降の数字が変わるごとに以下のようにファイルを分割したいと思っています。 SRR_1.txt ーーーーーーー X1 Y1 X2 Y2 ～ Xn Yn ーーーーーーー SRR_2.txt ーーーーーーー X1 Y1 ～ Xn Yn ーーーーーーー perl初心者ですが、どうかよろしくお願いします。
お世話になっております。 下記要件を満たす記述をご教授頂けますでしょうか。 ＜概要＞ アンケートデータを結合してアウトプットします。 ・アンケートデータ １～10までの項目を当てはまるものだけ回答してます。 例）Aさん：1/5/6/8　 Bさん：3/4/7/8/9/10 ・アウトプット形式 1～10のカラムがあり、回答された所を1とし、回答されてないものを0とする。 例）Aさん：1/0/0/0/1/1/0/1/0/0（1,5,6,8を1とし、それ以外を0とする） Bさん：0/0/1/1/0/0/1/1/1/1（3,4,7,8,9,10を1とし、それ以外を0とする） よろしくお願い致します。
初心者で至らぬ点が多々有りますが、宜しくお願いします。 環境はWindows7-64bit、ActivePerl 5.12.4 Build(64bit)を使用しています。 テキストが数百個有り、全て以下のような構成になっています。 文章１ 文章２ 文章３ kwd 文章４ kwd 文章５ 文章６ kwd 　　　～以下略～ ファイル郡をリストとして読み込み、それぞれのファイルに対して kwdをキーとして検索し、該当した行の上の行を抽出しようとしています。 ～ファイルリスト読み込みルーチンは省略、以下各ファイル毎のサブルーチン～ sub execute { open(INP, "$inp"); #ファイル読み込み open(OUT, ">rep\\$inp"); #ファイル書き出し(フォルダを変えて同名) while(<IN>){ if($_ =~ m/kwd/){ #現在の行が"kwd"を含んでいたら print OUT $prev; #前の行を抽出のつもり } $prev = $_; #現在の行データを$prevに格納 } close(INP); close(OUT); } $_には現在の行データが入っていると認識しており 上記の書き方で$prevには一段上の行データが入るのでは と思ったのですが、現状$prevを出力してもカラです。 文法ミスよりも、そもそも考え方が間違っているような気がして なりませんが、どうか解決法を教えて頂きたく。
正規表現の\Gの使い方で質問です。 ものの本によると、\Gをつけるとパターンマッチは前回の処理の続きから行われるとのこと。すると以下のようなコードなら、 ta tb tc td te となるべきと思われます。 ところが実際は ta ta ta ta ta 明らかに\Gは無視されて、毎回$testの先頭から処理が行われています。 どこに間違いがあるのでしょうか。 #! c:/perl/bin/perl $test='tatbtctdtetftg'; for($i=0;$i<5;$i++) { $test=~/(\Gt.)/; print $1."\n"; }
htmlのフォームタグ内で、inputtyp=file で受け取ったwordファイルやPDFファイルを perlで書いたCGIプログラムのほうで、MYSQLのデータベースへ保存したいのですが どのように書けばいいのかわかりません。 保存する型はBLOB型でよいといくつかのサイトで書いてあるのですが、 SQL文の書き方や、フォームから受け取ったデータの処理の仕方などの詳細が わかりません。 フォームで受け取ったファイルをデータベース（mysql）へ保存する 簡単なサンプルコードなどが知りたいです。 よろしくお願いいたします。
正規表現の質問です。 言語はPerlで組んでいます。 いくつかのhtmlファイルを順に開き、以下のようなコードを実行します。 $http{BODY}=~ /(?<=\[ No\.)([0-9]{$digit})(?= \/ $num)/o; ここで $http{BODY} 読み込んだhtmlファイル $digit 変数。整数値。 $num 変数。整数値。 この正規表現で、 ・・・・[ No.2 / 3 ]・・・・ といった感じの文字列から、この場合は「2」をマッチさせようとしました。 ところが最初に読み込んだファイルではうまくマッチしたのですが、２番目のファイルではマッチしません。 o オプションを外すとうまくいきました。o オプションは変数展開を１回行うとのことです。元のファイルはやたらとでかいので、o オプションを付けたら少しは早くなるかなと思いつけていたのですが。。。 ネットで調べると、 while( $s = <FH> ){ # 一度だけ展開する if ( $s =~ /$arg/o; ){ .... } このような用例で、$argは変数というよりも、セットされた文字列として評価されるとあります。でも前述の正規表現の２つの変数、$digitと$numは普通に値を書き換えられていましたけど。。。 それとも o オプションを付けた正規表現では、その正規表現を処理するためのメモリ領域に一度変数の値を取り込むと、二度と読み込むことをしないということでしょうか。だから変数の値が変わっても、正規表現が用いるメモリ領域の値は変化しない。。。 でも $http{BODY}=~ /(?<=\[ No\.)([0-9]{$digit})/o; だったらちゃんと$digitの値が変わったことに対応しているんです。他にもいっぱい o オプションを付けた正規表現を用いていますけど、全部正常に作動しています（バグに気づいていないだけかもしれませんけど）。 前述の正規表現とこれら正常に作動する正規表現の違いは、後者が変数１個であるのに対して、前者は２個であるということです。「変数展開を１回行う」の意味は、変数１個にしか対応しないという意味なのでしょうか。でも前者も最初のファイルだけなら２個の変数に対応しているのです。 どういうことなのでしょう。
掲示板でログファイルへの書き出しの際に文字コードをshift-jisに変更したいのですが， #投稿された値を受け取る if ($ENV{'REQUEST_METHOD'} eq 'POST') { read(STDIN, $alldata, $ENV{'CONTENT_LENGTH'}); } else { $alldata = $ENV{'QUERY_STRING'}; } foreach $data (split(/&/, $alldata)) { ($key, $value) = split(/=/, $data); $value =~ s/\+/ /g; $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack('C', hex($1))/eg; $value =~ s/\t//g; $in{"$key"} = $value; } #ヘッダの表示 print "<html>\n"; print "<head><title>掲示板</title></head>\n"; print "<body>\n"; #受け取ったデータをファイルに書き込む if ($in{'handle'} ne '' && $in{'message'} ne '') { if (open(FH, "bbs.txt")) { @file = <FH>; close(FH); use CGI; $cgi=new CGI; $name1=$cgi->param('handle'); $name2=$cgi->param('number'); use Encode; use Encode::Guess qw(euc-jp shiftjis 7bit-jis); encode("shiftjis",decode('Guess',$name1)); encode("shiftjis",decode('Guess',$name2)); unshift(@file, "$name1\t$name2\n"); ＃＃この部分で if (open(FH, ">bbs.txt")) { print FH @file; close(FH); } else { print "<p>ファイルに書き込めません。</p>"; } } else { print "<p>ファイルを読み込めません。</p>"; } } #投稿フォームの表示 print "<form method=\"post\" action=\"bbs.cgi\">\n"; print "<p>\n"; print "ハンドルネーム<br>\n"; print "<input type=\"text\" name=\"handle\" size=\"20\" value=\"\"><br>\n"; print "メッセージ<br>\n"; print "<input type=\"text\" name=\"message\" size=\"20\" value=\"\">\n"; print "</p>\n"; print "<p><input type=\"submit\" value=\"送信する\"></p>\n"; print "</form>\n"; #記事の一覧表示 if (open(FH, "bbs.txt")) { while ($data = <FH>) { ($handle, $message) = split(/\t/, $data); print "<p>\n"; print "投稿者：$handle<br>\n"; print "メッセージ：$message\n"; print "</p>\n"; } } else { print "<p>ファイルを読み込めません。</p>"; } #フッタの表示 print "</body>\n"; print "</html>\n"; exit; このような感じでかいたのですが文字コードを変更し，unshift(@file, "$name1\t$name2\n");と記述すると何も書かれずに空白になってしまいます．．なぜでしょうか？困っています．教えて下さい． ちなみにunshift(@file, "$in{'handle'}\t$in{'message'}\n"); と文字コードの変更を意識しなかった場合にはちゃんとファイルに書かれています． jcode.plなどは使わずにencodeで行いたいです．
perlでファイルへの書き込みができません！ 教えてください． webプログラミング初心者なのですが， フォームから送信されたデータをshift-jisに変換させてからbbs1.txtへの内容の書き出しを行いたいのですが， #!/Applications/XAMPP/xamppfiles/bin/perl print "Content-type: text/html; charset=utf-8\n\n"; # フォーム部分を表示する print <<EOL; <html> <body> <h2>一行掲示板</h2> <form method="post" action="bbs1.cgi"> メッセージ：<input type="text" name="message" size="60"> <input type="submit" value="送信"> </form> <hr> EOL &ReadParse(*form); # フォームの値を取得 $message = $form{"message"}; use Encode; use Encode::Guess qw(euc-jp shiftjis 7bit-jis); encode("shiftjis",decode('Guess',$message)); # ログファイル読み込み open(IN, "bbs1.txt"); @log = <IN>; close(IN); # メッセージが入力されているときは書き込み処理を行なう if ($message ne "") { # ログ先頭にメッセージを格納 unshift @log, "$message\n"; # ログファイルに書き込み open(OUT, "> bbs1.txt"); print OUT @log; close(OUT); } # ログ表示 foreach $data (@log) { chop $data; print "$data<br>\n"; } print "</body>\n</html>\n"; このような感じにし実行して後でtxtファイルを見ると何も書かれていません＞＜ なぜでしょうか．．．？ 教えて下さい＞＜ 今気づいたのですがそれに関連してなのかログも表示されていませんでした．．．＞＜ txtファイルのアクセス権は読み書き可になっています encodeはあえてつかっています．
Webプログラミング初心者です． ファイルへの保存について質問です＞＜ フォームから受け取ったデータを文字コード変更させてファイルに保存する場合 $name1=$cgi->param('name'); $name2=$cgi->param('number); このように一度変数にいれ． 次に文字コードの変換をし変換した内容を再び$name1,$name2に格納した場合， ファイルの書き出し•保存のソースコードは， if (open(FH, "form.txt")) { @file = <FH>; close(FH); unshift(@file, "$in{'name1'}\t$in{'name2'}\n"); ／／ココの部分です． if (open(FH, ">form.txt")) { print FH @file; close(FH); } else { print "<p>ファイルに書き込めません。</p>"; } } else { print "<p>ファイルを読み込めません。</p>"; } このような感じで良いのでしょうか？ unshift(@file, "$in{'name1'}\t$in{'name2'}\n"); の変数名の部分では例題はフォームから受け取ったものを そのまま書いてある例が多くどのように記述したら良いかわかりません． 一度やってみてできなかったので他の部分にミスがあったのかと探し中ではありますが．．． 教えてください．お願いします＞＜
my @shop = [ {'start_hour'=> '1100','shift'=> [1,2] }, {'start_hour'=> '1130','shift'=> [1,3] } ] という配列があってそれをループで回したいのですが、 ▼以下だとNG foreach my $data (@shop){print $data->{start_hour};} ▼以下だと最初の1つだけOK foreach my $data (@shop){print $data->[0]->{start_hour};} という状況です。なぜ$data->{start_hour};で取得できないのでしょうか？ 助けて頂けるとうれしいです★
自作のCGIを実行したところ Can't locate BASE64 in @INC (@INC contains: C:/Perl/site/lib C:/Perl/lib .) at g etHTTP line 71. のようなエラーが出ます。 BASE64がインストールされているかどうか確認するために、次のサイトのcheck.cgiを実行してみました。 http://perl.shtml.jp/check/check.html インストールされているということなので、検索を掛けてBase64.pmのパスを調べました。 C:\Perl\lib\MIME そこで以下のコードを追加して実行しなおしました。 unshift @INC, "C:/Perl/lib/MIME"; 残念ながらうまく動きませんでした。 Can't locate BASE64 in @INC (@INC contains: C:/Perl/lib/MIME C:/Perl/site/lib C: /Perl/lib .) at getHTTP line 71. どうすれば良いでしょう。 お手数をお掛けします。
要素のない配列を消したいです。 do\n be\n usual\n become\n get\n look\n watch\n このような複数行の文があり"a"が入っている行だけ配列に突っ込みたいと思っています。 自分が試した方法として。 @line = split(/\n/,$content); とりあえず改行で区切り配列にぶち込んでいき。 foreach $line (@line){ 　　　　　　unless ($line =~/a/){ 　　　　　 $line = undef; } } その次に"a"が入っている以外の配列にundefを入れるようにしていました。 しかしこれだとundefが入っている配列がたくさん出来てしまい納得がいきません。 要素のない配列を消したいです。 どなたかご教授お願いします。
このスクリプトの間違いを指摘してください。 <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"> <title>test</title> <script type="text/javascript"> <!-- function doCountDown() { setInterval('countDown()', 500); } function countDown() { var now = new Date(); var tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1); var diff = Math.floor((tomorrow.getTime() - now.getTime()) / 1000) + 1; var hour = Math.floor(diff / 3600); diff %= 3600; var min = Math.floor(diff / 60); var sec = diff % 60; document.getElementById('cd').innerHTML= "明日まで、あと" + hour + "時間" + min + "分" + sec + "秒"; } //--> </script> </head> <body onload="javacript:doCountDown();"> <div id='cd'></div> </body> </html> 自動更新のカウントダウンタイマーを作ろうと思ってるのですが....
Mac OS10.6.8でXAMPPをインストールした後 htdocs/test/というフォルダを作って http://test/ となるような環境を作りました。 httpd-vhosts.confファイルには <VirtualHost *:80> DocumentRoot "/Applications/XAMPP/xamppfiles/htdocs/test" ServerName test </VirtualHost> <Directory "/Applications/XAMPP/xamppfiles/htdocs/test"> Options Indexes FollowSymLinks MultiViews Includes ExecCGI AddType text/html .shtml .html AddHandler server-parsed .shtml .html AddHandler cgi-script .cgi .pl AllowOverride All Order allow,deny Allow from all </Directory> このように記述しております。 http://test/test.cgiにアクセスしたら Error message: Premature end of script headers: test.cgi このように言われてしまいました。 これは何が原因なのでしょうか？ パスが間違っているのかな？と思ったのですが、XAMPPを使った場合 test.cgiファイルのパスはどうすればいいのでしょうか？ よろしければ教えて下さい。 ※ とりあえず usr/bin/perl としました。
perl初心者です。 辞書ファイルを編集するのに必要外な文字が多く、手作業では限界がありperlを使おうと思います。 ちまちまと自分で打ったのですが、いざ実行するとうまくいきません。 右も左もわからず途方にくれてます。 下が編集したい文です。 行の最初の”を削り、読んだものに上書きしたいのです。 "さ来週 [さらいしゅう]","(n-adv,n-t) week after next","",0,0,0,"" "さ迷う [さまよう]","(v5u) to loiter/to putter/to prowl/to wander about/to roam about/to knock around","",0,0,0,"" "ざあざあ","(adv) sound of rushing water/sound of pouring rain/white noise sound/(P)","",0,0,0,"" そして下の文が打ったperlの内容です。 $inputfile="DicA.csv"; open(DIC,"$inputfile") or die "$!";　　　-----------画面に表示される while ($line1 = <DIC>){ $string =~ s/"//g; open(OUT,"> DicA.csv");　　　　----------上書きされ空のファイルができる $out1 = join(",",@array); print OUT; } close(DIC) お手数をおかけしてすみません。 困っています。 どうかよろしくお願いします。
# 正規表現　最長マッチが、機能しない。 # # Windows XP(sp3) ActivePerl # # This is perl 5, version 12, subversion 3 (v5.12.3) built for MSWin32-x86-multi-thread # (with 9 registered patches, see perl -V for more detail) # # Copyright 1987-2010, Larry Wall # # Binary build 1204 [294330] provided by ActiveState http://www.ActiveState.com # Built Feb 9 2011 14:38:22 # use strict; use utf8; use Encode; my $doc = "(L)12×(H)34×(W)56\n"; $doc =~ s%(\([LHW]\)(\d+))([^×cm])%$1cm$3%ig; # ←この部分 print encode("cp932", $doc); {出力結果} (L)1cm2×(H)3cm4×(W)56cm
お世話になります。 下記のCGIで掲示板を作成したいと思っているのですが、エラーが出てしまい設置できずにおります。 http://plus-code.net/cgi-flash-bbs/perlbbs/ サポートも終了してしまっていてお手上げ状態です・・・。 エラー内容は以下の通りです。 DBD::mysql::st execute failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type=InnoDB' at line 1 at C:/www/users/○○○/cgi-bin/config.cgi line 87. 87行目近辺のソースはこのような感じでした。 *********************************** my $dbh = DBI->connect("DBI:mysql:$in{d_databasename}:$in{d_hostname}", $in{d_username}, $in{d_password},{RaiseError => 1, PrintError => 0, AutoCommit => 0 }) || &error_html($ref_ini->{action_error}{db_er1});　　　　　　//line 70 my $user="forum"; my $pass=&Cf::Random::d_crypt($user); my $random_url=&Cf::Random::az09($ref_ini->{setup}{adjust30}); my @que=( "insert into public values(1,'','','','','','','http://','',0,1,0,3000,10,10,10,30,7,0,1,3000,1, …);", "insert into member values('u$tm','$user','$ip','$pass','','webmaster',0,0,'',0)", "insert into section values('s$tm',0,'section_title','section_explain','webmaster','$user')", "insert into forum values('f$tm','s$tm',0,'forum_title','forum_explain','webmaster','$user')", "insert into contact values('c$tm','$user','webmaster','to_forum','webmaster','message title','message comment','','')", "insert into clap values('s$tm','f$tm','t$tm','p$tm','w$tm','$user','$ip','testclap',10)", "insert into post values('s$tm','f$tm','t$tm','p$tm','$user','webmaster','$ip','test title','test message','','',1,'')", "insert into report values('r$tm','p$tm','$user','report title','report message')" ); eval{my ($sth); for (my $j=0;$j<scalar(@{$$ref_sql{create_table}});$j++) {　　　　　　//line 87 $sth = $dbh->prepare($ref_sql->{create_table}[$j]);$sth->execute; }#for end for my $j(@que){$sth = $dbh->prepare($j);$sth->execute; $sth->finish;}$dbh->commit;$dbh->disconnect;}; if($@){$dbh->rollback;$dbh->disconnect;&error_html($@);}　　　　　　//line 95 *********************************** 何卒宜しくお願い致します！
perlで初歩的な質問です。 辞書ファイルで編集していたら必要以外な文字が多くて自力で削っていたら大変なので、perlでしてみました。 参考資料を見ながら一応打ったのですが、どうもうまくいきません。 実は、最初のファイル入出力のところです。 open(DIC,"> $inputfile"); 初期化されて空ファイルになる open(DIC,"< $inputfile"); とすると画面には表示されるが処理が進まない。 下が打った文です。 $inputfile="DicIn.csv"; open(DIC,"+> $inputfile") or die "$!"; while (<DIC>){ @array = <DIC>; @Array = (@Array1,@Array2); $a1 = ~ s/"//g; $a2 = ~ s|///|---|g; print(DIC); } close(DIC) 本当に初歩的ですみません 困ってます、よろしくお願いします
こんばんわ。 Perlで一点伺いたいことがございます。 SMTP認証して、メールを送信したいのですが ネット上でサンプルをさがしてきて実際に試したのですが うまくいきません。 どうしたらいでしょうか？以下が実施に動かしているコードです。 #!/perl/perl/bin/perl use strict; use warnings; use CGI::Carp qw(fatalsToBrowser); print"content-type: text/html\r\n\r\n"; print "Hello World!\n"; use Net::SMTP; #SMTPサーバの指定 my $mailhost = 'smtp.gmail.com'; my $mailport = 587; my $mail_username = 'XXX@gmail.com'; my $mail_password = 'パスワード'; my $to_mail = '宛先'; my $from_mail = '送信先'; my $smtp = Net::SMTP->new($mailhost,Port => $mailport); $smtp->auth($mail_username, $mail_password); #メールの送信先 $smtp->mail($from_mail); $smtp->to($to_mail); #メールの内容 $smtp->data(); $smtp->datasend("From: $from_mail\n"); $smtp->datasend("To: $to_mail\n"); $smtp->datasend("Subject: test\n"); $smtp->datasend("\n"); $smtp->datasend("test\n"); #メール内容終わり $smtp->dataend(); #接続を切る。 $smtp->quit; print $smtp; ほぼコピーアンドペーストなのですが、うまくいきません。 とりあえず、newしたオブジェクト $smtpを出力してみると アドレス的なものが表示されます。 Net::SMTP=GLOB(0x7d15ec) ただ、これは認証情報が適当でも出力されるようです。 何度やってもメールは届いていないようなので認証の時点でまちがっているのでしょうか？ ただ、認証情報は実際にメールソフトで使っているものなので、間違いないと思うのですが、識者の方よろしくご教授お願いします。
恐れ入ります。　PerlでVlookupみたいに、マッチしたものの閲覧をしたいのですが、 どのようにしたら良いでしょうか。 lookup.cgi code.csv data.csv というファイルを用意して、 code.csvには、7桁のコードの一覧が並び、 data.csvの中でマッチした7桁のコードの別列のデータの一覧を取得したいのですが、 つまり、code.csvに書かれている７桁のコードにマッチする全てのデータを、 data.csvの中の指定した列から抜き出して羅列する感じです。 よろしくお願いします。
perlスクリプトを使いactive directoryにユーザを登録したいと思っております。 perlもactive directoryも初めてで理解していませんが 仕事でどうしてもやらなくてはならないためどなたかわかる方教えて頂けますと助かります。 環境： windows server 2008R2 active directory 2008 centos 6 やりたいことは、perlを使いactive directoryにユーザ登録をしたいのですが どうやっても登録することができません。 必要なperlモジュールはインストールしてるつもりです。 以下がスクリプトとなります。 =================ここから================== #!/usr/bin/perl use strict; use Net::LDAP; my $ldap_host = 'xxx.xxx.xxx.xxx'; my $bind_dn = 'cn=admin,o=example,c=com'; my $bind_pw = 'password'; my $ldap = Net::LDAP->new( $ldap_host ) or die "$@ $!"; $ldap->bind( $bind_dn, password => $bind_pw ) or die "$@ $!"; $uid = "localuser"; $suffix = ",ou=People,dc=example,dc=com"; $dn = "uid=" . $uid . $suffix; $addResult = $ldap->add( $dn, attr => [ 'cn' => $uid, 'sn' => $uid, 'mail' => $uid . '@example.com', 'uid' => $uid, 'objectClass' => [ 'top', 'person', 'organizationalPerson' ], ] ); if ( $addResult->code == 0 ) { print "added $dn\n"; } else { $ldap->unbind; warn "failed to add entry: ", $addResult->error, "\n"; exit( $addResult->code ); } =================ここまで=================== 上記を実行すると以下のエラーコードが返ってきます。 comment:AcceptSecurityContext error, このエラーについてとあるサイトをみると 「ユーザーは次回ログオン時にパスワード変更が必要」にチェックをいれていると 出力されてしまうとかかれていたのでチェックを外しているのですが結果は同じです。 上記のスクリプトは以下のサイトを参考にして作ったのですが わからない部分があります。 http://d.hatena.ne.jp/askadna/20080326 http://www.knowd.co.jp/yamazaki/index.php?q=node … $ldap->addのメソッド？に$dnとattr～～というパラメータを与えているのですが 配列の階層が異なっていますがaddメソッドはこれを認識することはできるのでしょうか。 例えば、 $ldap->addを部分を消して $addResult = ( $dn, attr => [ 'cn' => $uid, 　～以下省略～ 以下のようにprintで表示すると配列の階層はバラバラです。 これでaddは正常に階層をみて動作するのでしょうかということです。 print $addResult[0]・・・・uid=localuser,ou=People,dc=example,dc=com print $addResult[1]・・・・attr print $addResult[1]->[0]・・・・cn print $addResult[1]->[1]・・・・localuser print $addResult[1]->[2]・・・・sn ～～省略～～～ ちなみに、searchメソッドでldapの情報の取得はできています。 少し気になるのはActive directoryに必須項目があり それをattrに格納させていないことが原因だったりするのでしょうか。 Active Directoryの必須項目というのがわかりませんが基本的に例えばSIDなどは システム自動で入れてくれるとおもっていますが・・・ 上記のスクリプトでADにバインドできていることがAD側のログで確認できております。 addでこけているみたいなのですが、どうかよろしくお願い致します。
Perlの正規表現について質問です． ■質問 aaa bbb aaa bbb ccc "ddd" aaa bbb ccc "ddd eee" aaa bbb ccc ddd eee "fff ggg hhh iii" というような，文字列が書かれているファイルがあるとします． ※ダブルクォーテーションが無い行もあります． ※ダブルクォーテーション内のスペースの数は，行によってそれぞれ異なります． これを，ダブルクォーテーションの中にあるスペースだけ アンダーバーに置換する場合の正規表現を教えて下さい． つまり，下記の出力にしたいです． aaa bbb aaa bbb ccc "ddd" aaa bbb ccc "ddd_eee" aaa bbb ccc ddd eee "fff_ggg_hhh_iii" ■条件 ※ちょっと古いPerlでも動くよう，ゼロ幅肯定/否定後読((?<),(!<))は使わないでください． ※単に実現するだけなら， # cat inputfile | print -pe 'sub f(){}(shift;s/ /_/;return $_;); s/(\".*\")/&f($1)/e;' みたいな感じで置換できそうですが，「正規表現だけで簡単に書けるかどうか」が知りたいのです(正規表現だけで実現出来る場合，そのアルゴリズムを知りたいです)．そのため，関数と/eオプションは使わないでください．
＆#27005;＆#12375;　（＆は半角です。） というような文字コード？で文字が記入されています。これはなんという文字コード名なのでしょうか？ これを通常の文字として読めるように変換したいと考えていますが、可能でしょうか？よろしくお願いいたします。
cgiで変数の中身を表示させたい perlのcgiで変数の中身を表示させたいのですが、うまくいきません ▽環境 　 レンタルサーバ ▽やりたいこと 　 通常のブラウザ画面に、変数の中身を表示させたい ▽現状 　 use Data::Dumper; 　 print Dumper($hoge));もしくは、warn Dumper $hoge; 　 とすると、下記エラーとなります Script Error The script did not produce proper HTTP headers. Please see the error log to see the detail of the errors. Depending on the server configuration, you can also run thisscript under CGIWrap debugging. Usually, either rename or linkthe script temporarily to a file which ends with .cgidextension, or add a AddHandler cgi-script-debug .cgiline to your .htaccess file. 指示に従い、.htaccessへ、AddHandler cgi-script-debug .cgiを追記すると、ズラズラ出てきたと何か出てきた中の一行に、変数の中身が表示されます ■質問事項 　 ▼変数の中身を確認する際、いちいち.htaccessへ追記するのが面倒なのですが、どうやって回避するのでしょうか？ 　 ▼なぜ、変数の中身を確認しようとしただけで、Script Errorとなるのでしょうか？ 　　・書き方を間違えている？ 　　・書く場所を間違えている？ 　　・レンタルサーバの仕様？ 　　・perlのcgiだから？ イメージしてるのは、PHPのvar_dumpなのですが…
私は今、ubuntuを勉強しているのですが、ubuntuにはもともと、 perlを使えるようなソフトが入っていると本に書いてあったのですが、 ubuntuに標準で入っているソフトはactiveperlなどと同じようなプログラミングができるのでしょうか？ また、perlのコードを記述する際、初心者でも使えるようなおすすめのテキストエディタなどがありましたら、教えてください。
perlでｃのプログラム処理を行いたいのですが可能でしょうか。 内容としては、 複数のファイルをｃのプログラムによって別のファイルにアウトプットする形にしたいと思っております。 よろしくお願いします。
お世話になります。 サーバーの変更後に、 それまで使っていたCGIでゾンビプロセスが発生するようになってしまいました。 以前のサーバーはFreeBSDでそのような事がなかったのですが、 新しいサーバーCentOS5になってから発生するようになってしまったのですが どのような原因が考えらますでしょうか。 perlやSSIを使った時にだけ発生してしまいます。 色々しらべてはみたのですが、 mod_cgid.so SSIではこれを無効にすればよいと言うのを見かけまして apache2のhttpd.confを見てみたのですが LoadModule cgi_module modules/mod_cgi.so　のみで 存在していませんでした。 同じプログラムでサーバー変更前はゾンビプロセスは全く発生しなかったのですが、 変更後に今まで大丈夫だったすべてのＣＧＩ（perl）プログラムで ゾンビプロセスが発生するようになってしまいました。 ゾンビプロセス自体は、発生後に消える状態ではあります。 これだけの情報では予測もつかないと思いますが、 もし何かこれが原因では・・・と言うのがございましたらご教授いただけますと幸いです。 お手数をおかけしますが、何卒よろしくお願い致します。
こんにちは。 どうやって書いたらいいのかわからなくて質問しました。 皆様のお知恵を拝借できませんでしょうか。 以下のようなデータがあります。 1行目:100円 りんご 2行目:100円 みかん 3行目:100円 バナナ これを以下のようにマージして一行で出力したいのです。 100円 りんご,みかん,ばなな どうかよろしくお願いします！
2バイト文字、1バイト文字どちらもありうる(構成が不明である)文字列をバイト単位で桁揃えして出力したいのですが、 use encoding 'cp932'; printf "|%2s\n|","あ"; printf "|%2s\n|","aa"; とすると、出力結果は当然 | あ| |aa| となって、桁が揃わないですよね。「バイト単位で2バイト分の巾」という指定を実現するにはどうしたらいいのでしょうか。日本語処理ではよくある問題だと思うのですが。
もう既に散々論じられていると思うのですが、PHPとPerlの利用法などでの違いを教えてください 自分はPHPとJavaScriptしか出来ませんが、Perlに興味があります。 Web系を作成するのにはPHPで特に問題はありません。 しかし、MySQLなどのサードパーティ製ソフトなどをインストール時にPerl（モジュールやMakefile等）を使用しているのが多いですが、PHPを利用しているというものはありません。 PHPはWebに特化し、コマンドラインから操作できないこともないですが、全く見たことがありません。 そういう点で両者は違う点があると思うのですが、それ以上は自分には分かりませでした。 自分はデータを取ってきて、それを加工して利用したいと考えているのですが、PHPでは自分のやりたい事に限界が出来てしまいます。 で、シェルを含めてLinux上で色々と自動化をしたいと考えているのですが、この場合Perlスクリプトで出来るのかなと思いまして。 PHPで出来ることはPerlで出来る、Perlで出来ることもPHPで出来ると見たことがありますが、PHPに出来ない、PHPよりも優れている点、そして特に自分が知りたいのはLinuxで利用するスクリプト（シェル）としての利用法なのですが、その場合の限界などを教えていただけませんでしょうか？ Web上で調べたのですが、いまいち要点を得られませんでした。
ある条件を満たすときだけuse(あるいはrequire)をするということはどうしたらできますか。例えば、次のように、perlの版を判別してuseする/しないを分岐したいのですが、ifではできません。目的は、jperl環境で作成したプログラムを最新のperl環境に移行することです。 if ($]=~/^5\.12/){ use encoding 'cp932'; use Encode; use subs qw(length); sub length { CORE::length(encode('cp932',shift)); } 　　　#以下色々な関数を定義する }
#!/usr/bin/perl require './jcode.pl'; $file = "houkoku.txt"; if ($ENV{'REQUEST_METHOD'} eq "POST") { read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'}); } else { $buffer = $ENV{'QUERY_STRING'}; } @pairs = split(/&/, $buffer); foreach $pair (@pairs) { ($name, $value) = split(/=/, $pair); $value =~ tr/+/ /; $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg; &jcode'convert(*value,'sjis'); $value =~ s/</&lt;/g; $value =~ s/>/&gt;/g; $value =~ s/\t//g; $value =~ s/\r\n/\n/g; $value =~ s/\r/\n/g; $value =~ s/^\s+//; $value =~ s/\s+$//; $FORM{$name} .= (defined $FORM{$name}) ? "," . $value : $value; } open( WRITE, "+< $file" ); print WRITE $FORM{'name'},",",$FORM{'color'}."\n"; close(WRITE); foreach ( keys %FORM ) { if( $FORM{$_} eq '' ) { $FORM{$_} = '入力がありません'; } } #if ( $FORM{'name'} eq '' ) { $FORM{'name'} = '入力がありません'; } if ( $FORM{'color'} eq '' ) { $FORM{'color'} = '入力がありません'; } print "Content-Type: text/html\n\n"; print <<END_HTML; <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"> </head> <body> <center> <table border="1"> <td> $FORM{'name'}</td> <td> $FORM{'color'}</td></tr> </table> </center> </body> </html> END_HTML exit; として、カンマ仕切りでデータを保存できるようになりました。 これを、指定行への書き込みを行いたいのですが、どのようにしたら良いでしょうか。 たとえば、5行目にこのデータを書き込んで、常に5行目を上書き更新するような感じです。 よろしくお願いします。
条件指定して、一致したものを合計するプログラムを作っています。 しかし、条件にまったく一致する行が無い場合、空欄になってしまい、 次の行が表示されません。 open (IFILE, $file) or die "$!"; while ($line = <IFILE>) { chomp($line); @column = split(",",$line); if ((@column[7] eq $kensouken) && (@column[4] eq $tantou1) && (@column[32] >0 ) && ( @column[33] <=0 )) {for($loop = 1;$loop <= 5;$loop++) { $total3[$loop] += @column[32]; }} elsif ((@column[7] eq $kensouken) && (@column[4] eq $tantou1) && (@column[32] <= 0) && (@column[33] > 0)) {for($loop = 1;$loop <= 5;$loop++) { $total4[$loop] += @column[33]; }}} print "$total3[1]"; print "$total4[1]"; としています。上記２つの条件にマッチしない場合、$total3、$total4が無効になっているのでしょうか。 次に書いている行が表示されなくなってしまいます。 条件に一致しない場合、0を表示したいのですが、どうしたら良いでしょうか。よろしくお願いします。
こんにちは。 毎日、その日の日付のフォルダ名を作成して作業をしているのですが、 毎回、その作業に手間がかかるので、Perlを用いてフォルダを作成したいと思っています。 普段、Perlを用いて処理をすることが多いので、 今回もPerlでプログラムを作りたいと思っているのですが、 Windows環境（windows7）でPerlを用いてフォルダを作成することは出来るのでしょうか。 やりたいことは、プログラムを実行するだけで、その日の日付をフォルダ名とするフォルダの作成です。 例えば、2011年09月23日ならば、 フォルダ名が、『20110923』となるようなプログラムを書きたいと思っております。 出来るかどうかをご存じの方は、ヒントもしくはサンプルプログラムをご教授ください＞＜ よろしくお願いします・・！
&あああ("ファイル名１", "AGT"); &あああ("ファイル名２", "ACA"); &あああ("ファイル名３", "TAT"); &あああ("ファイル名４", "TGA"); sub あああ{ open(FILE, "処理させるファイル") or die "$!"; my ($file, $tag) = @_; open(NEWFILE, "> $file") or die "$!"; my $x = 0; my @ti; while(<FILE>){ if($_ =~ "^>"){ $x ++; $ti[$x] = $_; } elsif($_ =~ "^$tag"){ print NEWFILE $ti[$x].$_; } } print "$x\n"; close NEWFILE; } このプログラムをサブルーチンではなく forかなんかで実行させ 自由にファイル数と$tagを設定し 実行できるようにしたいのですが できますでしょうか＞＜ forをまわす回数を指定しSTDINなんかで指定し そのforの中でファイル処理に必要な条件や 吐き出すファイルの名前をSTDINで指定するようなものを書きたいです ちなみにperl初心者です 質問が意味不明かもしれないです＞＜ よろしくおねがいします
メールフォームからのメールが届きません kent-web でclipmailをダウンロード・設置して チェックモードでエラー確認、ＣＧＩも作動しております。 ＨＰ上も正常に動作、相手にも確認メールが届くのですが こちらに届きません 原因が分からずネット上で色々と 検索したのですが答えが見つからずこちらで質問させていただきたく 書き込みしました。 ＨＰはこちらになります。 http://saitamaya.cc/kantan.html どこの記述がおかしいのでしょうか？ 宜しくお願い致します。
perl初心者です。 早速ですが質問です。 複数のファイルが存在するフォルダ内にて、「～.abc.txt」というテキストファイルのみを 読み込みたい場合はどのように指定すればよいのでしょうか。 #open (F,○○)という表記になるかと思うのですが、 #適当な正規表現が分からず苦労しております。 お分かりになる方いらっしゃいましたら、ご教授してくださいませ。 以上です。 宜しくお願いいたします。
PERLでプログラムを作る時、SHIFT-JIS形式で長音符（ー）があると、エスケイプしてもエラーが出てしまい困っています。 また、ホームページそのものがSHIFT_JIS形式のため、UTF-8など他の形式を使うと煩雑になるため避けたいと思っています。 エスケイプさせるなど簡単な方法は無いものでしょうか？ また、こちらはご存じでしたら教えていただきたいのですが、「￥」マークでエスケイプしてもうまくいかない文字には他にどの様なものがありますでしょうか？ ---test.pl---SHIFT_JIS形式---- $| = 1; $test = "\テ\ス\タ\ー"; $test =~ s/\テ\ス\タ\ー/tester/; print $test; エラーを見ると、 Unmatched [ in regex; marked by <-- HERE in m/\テ\ス\タ\ー <-- HERE / at test.pl line 3. とでます。
ローカルにperlプログラムを置いています。 このプログラムでサイトのHPに定期的なアクセスしています。 必要な情報はページの中間程度に入っています。 現在は、LWPを使っているのですが、全て情報を取得してから必要な情報を解析するため速度アップの為の改良余地があるように感じています。 HPを全部読む必要はなく、少しでも速いプログラムを作りたいのですがどの様にすればよいでしょうか？
１行につき４０文字前後で（固定長ではない）、１ファイルにつき約１億行書かれたファイル（１ファイルにつき3-5GB程度のテキストファイル）が３０ファイルあります。ファイルは、すべてアルファベットで構成されていていますが、スペースは含まれておらず、各行の末端は改行(\n)で区切られています。これらのファイルからある特定の文字に完全にマッチする部分が含まれる行が各ファイルごとに何行あるのかを調べたいと思っています。検索する文字列の長さは10-20文字のものをいろいろと調べたいと思っています。 この作業をperlで行う場合、index関数を使って検索をするのと、正規表現を使って検索をするのでは、どちらが早いのでしょうか？もしくは、他に良い方法やmoduleがあるようでしたら教えてください。 よろしくお願いします。
以下のようなデータがあります。そこでカラム１が等しい値をもつものを一グループとし、カラム2の平均値を求めたいのですが、なかなかうまくいきません。どなたかご教授をお願いいたします。よろしくお願いします。 カラム１　　　カラム２ 1 　　　　　　　 123.93 1 　　　　　　　 322.32 1 　　　　　　　 232.21 1 　　　　　　　 124.32 1 　　　　　　　 234.12 2 　　　　　　　 123.43 2 　　　　　　 12.34 2 　　　　　　　　 . 2 　　　　　　　　 . 2 　　　　　　　　 . 3　 3 3 4 4 4 4
現在最新版（開発停止）のJcode.pm は Encode.pmのwrapperとして動作していますが、 「～」という文字という文字を、他コードからUTF-8に変換する 時に、日本語のコードセットの中では 本来「\xef\xbd\x9e」に変換されなければいけないのが、 「\xe3\x80\x9c」に変換されてしまいます。 このような例で他にある文字があれば、教えて頂ければと 思います。
一つ前で質問しました。 そして参考文献を教えて貰い、読んでみました。 以下のサンプルが説明されていましたが分かりません。 1 while s/^([-+]?\d+)(\d\d\d)/$1,$2/; 説明は何となく分かるのですが、実際のコーディングを具体的に教えてください。 目的の数値は　$wkに入っています。 宜しくお願いします。
$wk =~ s/(.*\d)(\d\d\d)/$1,$2/;とやって、 単純に　$1,$2をプリントしています。 桁数が４桁以上なら問題ないのですが、 桁数が４桁未満だとおかしな出方になります。 ４桁未満の時の考え方を教えてください。 宜しくお願いします。
コマンドライン引数から10進数の値を入力して 2進数に変換して出力しようとしています。 ※入力される10進数の値はかなり大きなものを想定しています。 現在は下記のようなコードで変換しようとしていますが失敗しています。 動作環境は『WindowsXP、Activeperl-5.12.4.1205』です。 拙い説明ですが、よろしくお願いいたします。 # コマンドライン引数は「9223372036854775808」 $n = unpack("B8", pack("C", $ARGV[0])); print n; # 実行結果は「11111111」 # 期待している出力結果は「1000・・・000」（←0が64個） 9223372036854775808
メール送信のプログラムを作っています。 本体のプログラムmain.cgiから、 メール送信用のサブルーチンを記入した、 email.plというのを require 'email.pl'; とメール送信が必要な場合だけ読み込んでいます。 この email.plに use Encode; や use Jcode; のようにuse文を記入するのは、 Perlの作法としては適切なのでしょうか。 それともuse文はmain.cgiに記入するのが適切なのでしょうか。 email.plにuse文を記入しても動きますし、 main.cgiにuse文を記入した場合とベンチマークを比べたりしましたが あまり変わらないのですが、 useはコンパイルしたときに実行されるので、 実行のときに読み込まれるrequireしたライブラリに記入していいのか不安なのです。 私としては必要なときだけ読み込みたいので、 email.plにuse文を記入したいのですが。 どうぞよろしくお願いします。
ActivePerl-5.14を使っているのですが、文字コードの変換はどのようにすればいいのでしょうか。 ローカル環境で動かしているのですが、Shift-JISのテキストを読み込んで、EUC-JPに変換したいと思っているのですが、 今まで5.8を使っていたので、Jcodeを使って、&Jcode::convert(\$txt,'euc'); としていたのですが、5.14ですと use Jcode;　 の時点でエラーになってしまいます。 use Encode; を使って、 from_to($txt, 'shiftjis', 'euc'); としてみましたが、 from_to($txt, 'shiftjis', 'euc'); のところでエラーになってしまいます。 ActivePerl-5.14ですと、どのように文字コードの変換をすればいいのでしょうか。 どなたか教えてください。 よろしくお願いいたします。
この前、フォルダ内のファイル一覧を取る関数を教わりました。 @files = glob "$folder*"; そこで質問ですが、 上記の$folderに他のサイトを指定することは出来ないでしょうか。 やりたいことは、ａのサイトに上記のcgiを書いて、 サイトｂのフォルダの一覧を取りたいのです。 （この質問のとおりのcgiが出来れば、$folderを指定することで汎用的に ファイル一覧が可能となるので質問しています。） 宜しくお願いします。
以下のことをやりたいのですが、 教えてください。 在るフォルダ（例えば；abc）にファイルをアップロードします。 そのファイルをユーザーにダウンロードさせるのですが、 条件として、当該ファイルの名称を変更できません。 ファイル名を固定（アップロード時に変更）できれば、 どうにでもなりますが、それが出来ないために、 アップロードされたファイルを見に行って名称を把握、リストする、 ということがやりたいのです。 一言でいうと、 フォルダにあるファイルをリストする方法が知りたいのです。 ユーザーに提供するのは、「ダウンロード.html」という格好を考えています。 このhtmlを作るcgiを考えたいのです。 宜しくお願いします。
windowsサーバーのcgi（※）にて「$ENV{'HTTP_COOKIE'}」でcookieの値が正常に取得できてましたが、 linuxサーバーにそのソースをそのまま移行し、動作確認したところ「$ENV{'HTTP_COOKIE'}」でcookieの値が取得できなくなってしましました。 （※）・・・ショッピングカートの処理 ちなみにSSLを使用しているページです。 (1)画面Ａ（ｈｔｔｐ）から「カート入れる」ボタンをクリックし、画面Ｂ（ｈｔｔｐｓ）に遷移 (2)画面Ｂに遷移した際にcookieに取得、保存 要するにｈｔｔｐｓでセットしたものをｈｔｔｐｓゲットしようとしています。 サーバーの環境は以下となります ■windowsサーバー ・OS　：　Windows 2003 R2 SP2 ・Perl ver　：　5.8.7 ■linuxサーバー ・OS　：　Red Hat Enterprise Linux 4 ・Perl ver　：　5.8.8 ・パーミッション　：　757 ロジックは変更していないのでおそらくサーバーのどこかの設定を変更しなければならないのではないかと思われますが、どこに手を付けてよいのかがわかりませんので ご教授していただきたいです。 宜しくお願い致します。
Active Perlの最新版(x86)を使っています。 C言語側で、 //配列の先頭要素へのポインタと配列の要素数を渡すと、要素の平均を整数で返す関数 int avr(int *array,int kazu) { int value=0; for(int i=0;i<kazu;i++) { value+=*(array+i); } return value/kazu; } などと書いて、avr.dllとしてビルドしたものを(モジュール定義はdefファイルにて指定)、 use Win32::API; my $function = Win32::API->new("avr", "avr", "PN", "N"); @array=(1,2,3,4,5); $avr=$function->Call(\@array,5); print "Content-type: text/html\n\n"; print $avr; と使ってみたのですが、出力値が期待の「3」ではなく、-123343252とか435893497などの無茶苦茶な数値になってしまいます。 配列のポインタの渡し方が違うのかとは思いますが、どう書いたら良いのか分からない状況です。 一応、他のプログラムからこのdllを使うと、正常動作するようです。
パールのファイルサイズ取得について こんにちは。 パールのソースで困っているので、どなたか教えてください。 １つめのファイルサイズと、２つ目のファイルサイズを取得して 比較するソースを書いたのですが、ファイルが0byteであった場合、 変数に入れるところで失敗するのでしょうか？ また、変数に入れるところではうまくいったとしても、比較で 失敗するのでしょうか？ $size_a = -s $filea; $size_b = -s $fileb; if($size_a == $size_b){ ### メッセージを出力 }
以下のような、perlの構文で$infoをmyスコープで宣言しつつ、$datという変数が真なら$infoに$datが入ることを期待しているのですが、まちがっているのでしょうか？ my $info = $dat if ($dat); よろしくお願いします。
以下のような構成のページから、前半２つの twitter ,facebook のみを 　　process '#share_item ul li', 't_url' => '@href'; のような形で抜き出したいのですが、 これだとtwitterからmixi までの情報を一気に取得してしまいます。 process '#share_item ul li', 'twi_url' => '@href'; process '#share_item ul li', 'fb_url' => '@href'; のように、それぞれ分けて取得するよい方法はありますでしょうか？ ----------(ここから)--------- <div id="share_item"> <ul> <li> <a href="http://twitter.com/share?text=（略）&via=test_mk" target="_blank" onclick="s_omni.trackSNS('twitter')"> <img src="http://aaa.com/btn1.gif" alt="twitterでつぶやく" /> </a> </li> <li> <a href="http://www.facebook.com/share.php?u=http://aaa.c … target="_blank" onclick="s_omni.trackSNS('facebook')"><img src="http://www.aaa.com/common/btn2.gif" alt="facebookでシェア" /></a> </li> <li> <a href="mailto:?subject= 　　　　　　　　　　　　　　　　～（略）～alt=" 　　　　　　　　　　　　　　メールで知らせる" /> 　　　　　　　　　　　　　　</a> </li> <li> <a href="http://mixi.jp/recent_voice.pl?from=home_profile" target="_blank" onclick="s_omni.trackSNS('mixi')"> <img src="http://aaa.com/btn4.gif" alt="mixiで知らせる" /></a> </li> <li> <link rel="mixi-check-image" type="image/jpeg" href="http://aaa.com//img/site/3.jpg" /> <a href="javascript:void(0);" onclick="window.open('http://mixi.jp/share.pl?u=http://aaa.com/&k=cf68 …['width=632','height=456','location=yes','resizable=yes','toolbar=no','menubar=no','scrollbars=no','status=no'].join(','));"><img src="http://aaa.com/btn5.gif" alt="mixiチェック"></a> </li> </ul> </div> ----------(ここまで)--------- （２）これは補足的な質問なのですが、 「#share_item ul li」 のように # がつく記述と付かないパターンがあるのですが、 この違い（#が必要な時）が不明です。 ご存知の方、教えて頂ければ幸いです。
コマンドにサクラエディタで書いたファイルで実行すると、サクラエディタがでてきます。 どのようにすればいいでしょうか？ メモ帳ではうまくいきます。
以前もここで質問したものです。皆様の解答をヒントに一歩進みました。 Ｃ言語のソースコードを扱っています。 デバッグのため（関数がどういう順番で呼び出されているかを知るため）、関数の先頭にprint文をつけようと思っています。 例えば、 int hoge(引数の並び) ｛ 関数の中身 ｝ なら int hoge(引数の並び) ｛ printf("hoge"); 関数の中身 ｝ といった具合です。 関数が膨大なので、手作業で一つずつprintfを書くのは現実的ではありません。 ここで、 open(IN,"$ARGV[0]"); @array = <IN>; for($i=0;$i<@array;$i++){ if($array[$i] =~ / _*.+\(.*\)/){ $tmp = $&; if($array[$i+1] =~ "^{\n"){ print $array[$i]; print $array[$i+1]; print "printf(\"FileName:$ARGV[0] FunctionName:"; print $tmp; print "\");"; print "\n"; $i++;} else{ print $array[$i]; } }else{ print $array[$i]; } } というコードを書きました。しかしこれでもうまくいかないケースが多々ありました。 int main(void) { intro(); new_game(); /* @@@ exit(0); */ /* causes a warning in C++ */ return(0); } のように返り値が横ではなく上についていたり、 void __ast_string_field_index_build(struct ast_string_field_mgr *mgr, ast_string_field *fields, int num_fields, int index, const char *format, ...) { のように引数が複数行にわたる場合です。 どのようにしたらよいのでしょうか。 どなたか教えてもらえませんか？
パラメータqの部分にマッチさせる正規表現が分かりません。 # $urlの例 http://foo.bar/?q=hoge?&x=0&y=0 http://foo.bar/?q=perl http://foo.bar/?q=perl+%e6%ad%a3%e8%a6%8f%e8%a1% … hoge, perl, perl+%e6%ad%a3%e8%a6%8f%e8%a1%a8%e7%8f%beだけを切り出したいのですが、現状は # hogeしかマッチしない 　$url =~ /\?q\=(.+?)&+?$/$1/; # 不要なパラメータにもマッチ 　$url =~ /\?q\=(.+?)&*?$/$1/;　# => hoge?&x=0&y=0 となっています。 よろしくお願いします。
http://www9.plala.or.jp/oyoyon/perl/download/ind … こちらのサイトを参考にファイルのダウンロード数をカウントできるようにしました ですがPCからのアクセス(直リンク)はカウントされるのですが スマートフォン(iPhone 3G[S]&4)からは直リンクではカウントされませんでした どうすればカウントされるようになるでしょうか? またこのサイト以外にお勧めの方法はあるでしょうか?
Ｃ言語のソースコードを扱っています。 デバッグのため（関数がどういう順番で呼び出されているかを知るため）、関数の先頭にprint文をつけようと思っています。 例えば、 int hoge(引数の並び) ｛ 関数の中身 ｝ なら int hoge(引数の並び) ｛ printf("hoge"); 関数の中身 ｝ といった具合です。 関数が膨大なので、手作業で一つずつprintfを書くのは現実的ではありません。 関数の最初の１行のパターンマッチは、/int\s\w*(.*)/ でうまくいくのですが、次の行の｛まで含んだ正規表現に対応させるやり方がわかりません。 また、printf文を読み込んだソースコードに挿入するにはどうしたらよいのでしょうか。 どなたか分かる方がいらしたらご教授よろしくお願いいたします。
たびたびお世話になります。 データには、「データNO」「登録NO」「名前」「カテゴリー」「金額」が登録されています。 もともとあったデータをフォームで編集、送信してデータＮＯ（$d_no)と一致した行だけを書替え（上書き）したいんですが、どうしても方法がわかりません。 open(IN,"../save_data/sdeta.txt"); @data = <IN>; close(IN); foreach(@data){ chop($sdata); ($d_no,$s_no,$s_name,$d_class,$s_price) = split (/=/, $sdata); if( $value eq $d_no){ $sdata="$in{'d_no'}=$in{'s_no'}=$in{'s_name'}=$in{'d_class'}=$in{'s_price'}\n"; }else{ $sdata="$d_no=$s_no=$s_name=$d_class=$s_price\n" } } open(OUT,">../save_data/sdeta.txt") || &error("オープンエラー"); print OUT @data; close(OUT); 上のプログラムを書いても、書替えできませんでした。 どのように直せば一行のみの書替えが出来るんでしょうか。 よろしくお願い致します。
PHPを毎日書いている者ですが、たまたまPerlのメールフォームをカスタマイズ しなければならなくなりました。 use strict宣言がある場合、変数はmyまたはlocalで宣言しなければいけないようですが、 サブルーチン内に sub form { ・・・ my ($form_value,$error_list) = @_; ・・・ print $error_list{'inquiry_type1'} としたところ、 Global symbol "%error_list" requires explicit package name at ・・・ と、宣言が無い場合に出るというエラーが出ました。 $error_listには、inquiry_type1は入っているはずなのですが、どのような 宣言をすればよいのでしょうか？ よろしくお願いします。
こんにちは。 sedコマンドは、texに付属していた日本語対応のものを使用しており、 perlはWindows用のActive Perl v.5.12.2を使用しています。 カレントディレクトリにあるファイルやフォルダにおいて、 名前を一括して変換したいと思い、以下のようなNameConv.batというバッチスクリプトを作成しました。 ____________________________________________________________ @echo off for /f "delims=" %%a in ('dir /b !opt!') do ( for /f "usebackq delims=" %%b in (`echo %%a^| sed -e "s/%~1/%~2/g"`) do ( move /y "%%a" "%%b" 1>nul 2>nul if not "%%a"=="%%b" echo 「%%a」→「%%b」 ) ) ____________________________________________________________ このバッチスクリプトを NameConv.bat " " "_" の様にして呼び出すと上手く行きました。 (この場合は、カレントディレクトリの全てのディレクトリとフォルダの名前において、 スペースがアンダーバーに変換されました。) ところが、 NameConv.bat "スペース" " " のように、第一引数に変換文字列に2バイト文字を使用すると、 以下のようなエラーメッセージが出て上手く行きませんでした。 sed: -e expression #1, char 14: Unterminated `s' command どうやら、 echo %%a| sed -e "s/スペース/ /g" といったコードは、上手く行かなかったようです。 そこで、この問題を解決しようと、以下のようなNameRep.plというPerlスクリプトを作成しました。 ____________________________________________________________ #日本語を扱うために必要な設定 use encoding "cp932"; use open ":encoding(cp932)"; use open ":std"; map{ binmode($_,":crlf"); } qw/STDIN STDOUT STDERR/; #置換操作 $name="$ARGV[0]"; $name =~ s/$ARGV[1]/$ARGV[2]/g; print "$name"; ____________________________________________________________ そしてこのスクリプトを for /f "delims=" %a in ('dir /b') do ( @perl NameRep.pl "%a" "スペース" "_" ) の様にしてコマンドラインから呼び出すことで、「スペース」という文字列が、 きちんと処理できるかを試したところ、以下のようなエラーメッセージが出ました。 Unmatched [ in regex; marked by <-- HERE in m/\x{00d8}\x{00f9}\x{005b} <-- HERE \x{00d8}/ at C:\Users\kei\NameRep.pl line 11. どうやら $name =~ s/$ARGV[1]/$ARGV[2]/g; の部分で、$nameや$ARGV[1]に2バイト文字が含まれていると、上手く行かないようです。 #日本語を扱うために必要な設定 以下のコードブロックで、シフトJISに対応できるはず(少なくとも今までは問題なく扱えました) なのですが、何故か上手く行きません。 そこで、sedコマンドやperl、特にperlにおいて、シフトJISコードでの2バイト文字の扱い方を御存じの方に、何かアドバイスを頂きたいと考えています。 長くなりましたが、どうぞよろしくお願い致します。
問題を突き止めるため、コードをここまで小さくしましたが、まだエラーが出ます・・・ use strict; $_ = [0, 1]; grep($_ == $$_[0], 0, 1) このコードはgrepの中で$_をデリファレンスしているだけです。 これを実行すると、 Can't use string ("0") as an ARRAY ref while "strict refs" in use というエラーになってしまいます。 ううむ、どこかでシンボリックリファレンスを使っているのでしょうか
Perlでのテキスト処理について質問です。 テキストファイルの中身が下記のようになっています。 【テキスト編集前】 --------------------------------------- test ,abc ,AB ,VI ,SS ,ma ---1行目 test ,abc ,AC ,PI ,VS ,ma ---2行目 test ,abc ,BA ,SS ,VS ,ma ---3行目 test ,abc ,BA ,VI ,VS ,ma ---4行目 test ,cde ,AA ,VI ,SS ,mb ---5行目 test ,cde ,CC ,PE ,VS ,mb ---6行目 test ,cde ,BC ,PI ,SS ,mb ---7行目 test ,cde ,AC ,PI ,SS ,mc ---8行目 --------------------------------------- 2列目(abc/cde)と6列目(ma/mb/mc)が同じ行に対しては 1行にまとめて出力したいと思っています。 この時、1列目、4列目、5列目はマージした形にし (同一文字は一度だけ出力、同一でない文字は/区切りで出力)、 2列目、6列目は同一文字をそのまま出力し、 3列目に関しては、該当する行の先頭行の文字列を 出力したいと思っています。 下記が当方の希望しているPerl実行後の出力結果です。 【テキスト編集後】 --------------------------------------- test ,abc ,AB ,VI/PI/SS ,SS/VS ,ma test ,cde ,AA ,VI/PE/PI ,SS/VS ,mb test ,cde ,AC ,PI ,SS ,mc --------------------------------------- このような編集をPerlで実行したいと思っているのですが、 どのような記述をすれば実行できるのか教えて頂けないでしょうか。 当方、Perlを始めたばかりで基本的なことを 伺っているのかもしれませんが すみませんが、ご了承ください。 宜しくお願いいたします。
海外製のプログラムを日本語対応に修正しているのですが「～」が文字化け（?）になります。 下記がコードの一部を抜粋したものです。 $message=jcode($message)->sjis; my $msg = MIME::Lite->new( Type =>'multipart/mixed', From =>$fromaddr, To =>"$to", Subject =>"$subject", Type => "text/plain; charset=\"iso-2022-jp\"", Data =>"$message" ); 「～」だけが文字化けします。 下記のように文字コードを UTF-8 にすると文字化けしませんが、 メールで UTF-8 を使うのは良くないのでしょうか。 $message=jcode($message)->utf8; my $msg = MIME::Lite->new( Type =>'multipart/mixed', From =>$fromaddr, To =>"$to", Subject =>"$subject", Type => "text/plain; charset=\"utf-8\"", Data =>"$message" ); これだと文字化けしません。 UFT-8 でメールを送信しても問題ないのか、 また、問題の有無に関係なく iso-2022-jp で文字化けしない方法を ご教授いただけないでしょうか。 よろしくお願い致します。
プログラム初心者です。 Perlで下記のような文字列処理のプログラムの書き方がわからず、質問させて頂きました。 【内容】 FILE_A.txtが「!」マークで区切られていて、「!」マークの下行の文字列をIPアドレスの右横に移動したものをFILE_B.txtに出力するという処理です。 「!」マークの下行の文字列の「name」は共通です。 -------------------------------------------- 【FILE_A.txt】 ! name abcdeLV 123.123.123.123 123.123.123.124 123.123.123.125 ! name fghijLV 10.10.10.11 10.10.10.12 10.10.10.13 10.10.10.15 10.10.10.16 ! -------------------------------------------- ↓ -------------------------------------------- 【FILE_B.txt】 123.123.123.123 abcdeLV 123.123.123.124 abcdeLV 123.123.123.125 abcdeLV 10.10.10.11 fghijLV 10.10.10.12 fghijLV 10.10.10.13 10.10.10.15 fghijLV 10.10.10.16 fghijLV -------------------------------------------- 上記のようなPerlでの処理を具体的に教えて頂ければうれしいです。 本サイトのようなものを利用するのが初めてですので、不手際があるかもしれませんが なにとぞよろしくお願いいたします。
お世話になります。 早速ですが、 cgiで日記を作って、毎日入力しています。 現在の機能として最新分のみは修正が可能です。 （最後のレコードを表示し、修正して、置き換え） このほど、任意の日付分を修正できるようにしたいなと思い検討を開始しました。 そこで質問ですが、 どのような考え方をすればよいのでしょうか。 私のレベルで思いつくのは、 １件ずつ該当の日付が来るまでコピーしながら読んで行き、 該当日付が出てきたら表示、修正させ、置き換える、 そして残り分をコピーする、です。 こんな方法しかないでしょうか。 ズバリ、該当の日付分を抽出できるような考え方は無理でしょうか。 日記のフォーマットは単純なテキストで、１日単位で１レコード（長さ可変）になっています。 宜しくお願いします。
初めて質問します。 Perlを使って下記のようにテキストを変換したいんですけど、やり方を教えてください>< 【変換前】 A 1234 A 2345 B 3456 B 4567 【変換後】 >Af >1234 >As >2345 >Bf >3456 >Bs >4567 というふうに並び変えたいんですけど、なにぶんプログラミング初心者なもので、 よろしくお願いいたします。
テキストファイルをperlを使用して下記のように 変換したいと思っています。 --------------------------- 【変換前】 aaa 8000 52 ---1行目 abc 200 48 ---2行目 cbd 250 31　　　---3行目 efg 98 45　　　---4行目 abc 390 68　　　---5行目 ddd 89 90　　　---6行目 aaa 65 40　　　---7行目 fed 900 66 　　---8行目 efgh 99 49 ---9行目 abc 40 40 ---10行目 【変換後】 aaa 8000 52 　　---1行目 cbd 250 31　　　---3行目 efg 98 45　　　---4行目 abc 390 68　　　---5行目 ddd 89 90　　　---6行目 fed 900 66 　　---8行目 efgh 99 49 ---9行目 ---------------------------- やりたいことはまず行の先頭文字列(aaaやabc)が完全に一致する行が 複数あれば(2,5,10行目のabcや1,7行目のaaa)、2番目の文字列(スカラー値)の値が 小さい方の行は出力しないようにしたいと思っています。 例えば上記の場合ですと、2,5,10行目の最初の文字列はaaaで完全に一致しており、 2番目の列の値は5行目が390に対し、2行目は200、10行目は40と小さくなっているため 2行目,10行目は出力されない、というのが望んでいる動作です。 sortを使用してどうにかならないかとも、考えたのですが そこから先がどうしていいか思いつきませんでした。 何かよい方法を思い浮かぶ方がいましたら、どのようにPerlで記述すればよいのか 教えて頂けないでしょうか？ 宜しくお願いいたします。
皆さんCPANをインストールする際 perl -MCPAN -e shell とコマンドラインで入力されていると思いますが、 perl 以降の引数の中で 「shell」 について正確な意味を教えていただけませんでしょうか。 現在下記のものは理解しております。 ■「-MCPAN」について http://homepage3.nifty.com/hippo2000/perltips/CP … ※こちらの質問でも言及あり http://oshiete.goo.ne.jp/qa/2460025.html ■「-e」について http://www.rfs.jp/sb/perl/02/12.html -eオプション以降にshellと入力するとどんな意味があるのでしょうか。 ご教授お願いいたします。
現在、Perlを用いてtxtファイルから必要なデータだけを取り出し、それをcsv ファイルに出力したいと考えております。 Perlはほとんど触ったことがなく、色々と勉強しながら行っているのですが、期 日が迫っているという事情もあり質問させていただきます。 txtファイルには以下のような文が1000行ほどあります。 *○ △ /△/△/△/△/○.txt, ○|○): ○ ○,△:任意の数字、または文字列です。 この内、"○"のものだけを一つ一つ分けてcsvに出力したいのです。 つまり○は4つありますが、出力する際は1つ目の"○"を1行目に、2つ目の"○"を2行 目にといった形にしたいです。 そして、それが1000列分あるということになります。 上手く△のものだけを除外し、○だけを抽出する方法はあるでしょうか？ どなたかよい方法をご存知のかたいらっしゃいましたら、教えていただけると幸 いです。 エクセルで行うということも考えましたが、htmlファイルが入力ファイルとなる可能性もあるためPerlで行うことにしました。
ユーザーエイジェントを検索して UP.Browserという文字列があった場合、 ユーザーエイジェントをauという置き換え表示したいと思っています。 具体的には KDDI-KC3R UP.Browser/6.2_7.2.7.1.K.4.310 (GUI) MMP/2.0 ↓ au と表示したいのですが、 Perlで記述する場合以下のように書いて間違えありませんか？ 間違いなどありましたご指摘ください。 if($ENV{'HTTP_USER_AGENT'} =~ /UP.Browser/) { $agent=~s/$ENV{'HTTP_USER_AGENT'} /au/g; }
perl超初心者で、初歩的な質問です。 辞書データから不必要な文字を取ろうと思っています。 ところが最初のファイルの入出力から行き詰っています。 処理が終わると空ファイルができます。 下が使いたい辞書データです。 ------------------- word,trans,exp,level,memory,modify,pron,filelink "さらさら","(adj-na,adv,n,vs) (1) rustling/murmuring/(2) fluently/(3) silky (hair)/(P)","",0,0,0,"" "さらば","(conj,int) farewell","",0,0,0,"" "さん","(suf) Mr or Mrs/(P)","",0,0,0,"" "さーたーあんだぎー","(n) type of Okinawan doughnut (donut)","",0,0,0,"" "さ来週 [さらいしゅう]","(n-adv,n-t) week after next","",0,0,0,"" "さ迷う [さまよう]","(v5u) to loiter/to putter/to prowl/to wander about/to roam about/to knock around","",0,0,0,"" "ざあざあ","(adv) sound of rushing water/sound of pouring rain/white noise sound/(P)","",0,0,0,"" ------------------- そして下が組んだものです。 use encoding "cp932"; $/ = "\r\n"; open(DIC, "< dicdata.csv") or die "$!"; while(<DIC>){ } close (DIC); if($a =~ /&quop/){ $a =~ s/&quop//g; } open(DIC, "> dicdata.csv") or die "$!"; close (DIC); -------------- なにとぞお願いします。
最近Perlを勉強し始めたのですが、正規表現の扱いに困っています、よろしくお願いします。 rog.txt <usr1> ～～ (usr2) ～～ usr3 > ～～ <usr1> ～～ usr3 > ～～ というようなテキストの、ユーザー表示部分（ユーザー名の囲い方はcgi側からは指定できない）を、利用者がhtml上のフォームから 「<usr1> 」は「○○」に 「(usr2) 」は「××」に... というように指定して一気に変換するcgiを作っています。 ユーザー名部分だけを配列に溜めて、フォームを表示して、変換指定を受け取るところまではできたのですが 最後の変換の部分で上手くいかなくて困っています。 @oldRog には上記のテキストを読み込んで1行ごとに代入 @tmpOldName にはフォームから受け取った古い名前を代入 @tmpNewName にはフォームから受け取った新しい名前を代入してあります $i = 0; foreach(@oldRog){ 　 　 $j = 0; 　 　 $tmp = $_; 　 　 foreach(@tmpOldName){ 　 　 　 　 $tmp =~ s/^$tmpOldName[$j]/$tmpNewName[$j] /; 　 　 　 　 $j = $j + 1; 　 　 } 　 　 $rog[$i] = $tmp; 　 　 $i = $i + 1; } 実行してみるとユーザー名を囲う印に"("などが使用されているとその名前が全て変換されません おそらく正規表現上で意味のある"("と解釈されているのだろうと考え エスケープさせるために"\"を使おうと思ったのですが、 $tmp =~ s/^\$tmpOldName[$j]/$tmpNewName[$j] /; としてみてもうまくいきませんでした。 先にテキストファイルのほうで半角（から全角（に変換する等して回避はできたのですが できれば変換の部分だけで処理したく思っています よろしくお願いします *タブが消えてしまっていたので上げ直しました、ここの使い方にまだ慣れておらず申し訳ありません
2種類のファイルがあり、これを下記のルールによりくっつけたいと考えています。 データ数の多さから　ファイル１のデータを1行ずつみていき、ファイル２に条件に等しいものがないか確認して書き出しをするというやり方では、 時間がかかってしまい、効率よい書き方を教えていただきたいのです。 ファイル１：100万行 カラム１<タブ>カラム2<タブ>カラム3<タブ>カラム4　　各カラムは可変長の値（各カラム、行重複値あり） 例　AAA<タブ>BB<タブ>CC<タブ>DDDD 　　AAA<タブ>BBB<タブ>CC<タブ>DD 　　XX<タブ>BB<タブ>YYY<タブ>Z 　　・・・ ファイル2：10万行 カラム5<タブ>カラム6<タブ>カラム7　各カラムは可変長の値（各カラム重複値あり、カラム5とカラム7のセットで一意データ） 例　BB<タブ>EEE<タブ>RRR 　　BB<タブ>EEE<タブ>SS 　　BB<タブ>FF<タブ>TTTT 　　W<タブ>EEE<タブ>TTTT 　　・・・ 条件： カラム2=カラム5のとき、 結果： カラム１<タブ>カラム2<タブ>カラム3<タブ>カラム4<タブ>カラム6<タブ>カラム7　というものを出力させる 例　カラム2（BB）=カラム5（BB) AAA<タブ>BB<タブ>CC<タブ>DDDD<タブ>EEE<タブ>RRR AAA<タブ>BB<タブ>CC<タブ>DDDD<タブ>EEE<タブ>SS AAA<タブ>BB<タブ>CC<タブ>DDDD<タブ>FF<タブ>TTTT ・・・ ※カラム2（BB）=カラム5（BB）のとき、ファイル2のカラム5にBB存在する行分　ファイル1の内容がカラム6、7を追加し増えていくようにしたいのです。 よいプログラムを教えてください。
my @a = qw(a b c); my @b = ( qw(e f g) ); これの違いは何なのでしょうか？ perlにおいて()で囲むのはリストとして扱うということなのでしょうが、いまいちよく分かりません。 教えてください
超初心者です。 辞書から不必要な文字を消そうをしていますが、はじめのファイルを読み出すから 行き詰っています。 下が使いたい辞書データです。 ------------ word,trans,exp,level,memory,modify,pron,filelink "さまざまな理由から [さまざまなりゆうから]","(exp) for various reasons","",0,0,0,"" "さめざめ","(adv) sorrowfully/anguishedly","",0,0,0,"" "さもしい","(adj) selfish/self-seeking/self-interested/mean","",0,0,0,"" "さようならホームラン","(n) game-ending home run (baseball)","",0,0,0,"" "さよならホームラン","(n) game-ending home run (baseball)","",0,0,0,"" "さらけ出す [さらけだす]","(v5s) to expose/to disclose/to lay bare/to confess","",0,0,0,"" "さらさら","(adj-na,adv,n,vs) (1) rustling/murmuring/(2) fluently/(3) silky (hair)/(P)","",0,0,0,"" "さらば","(conj,int) farewell","",0,0,0,"" "さん","(suf) Mr or Mrs/(P)","",0,0,0,"" "さーたーあんだぎー","(n) type of Okinawan doughnut (donut)","",0,0,0,"" "さ来週 [さらいしゅう]","(n-adv,n-t) week after next","",0,0,0,"" "さ迷う [さまよう]","(v5u) to loiter/to putter/to prowl/to wander about/to roam about/to knock around","",0,0,0,"" "ざあざあ","(adv) sound of rushing water/sound of pouring rain/white noise sound/(P)","",0,0,0,"" "ざあっ","(n) (onom) sound of water","",0,0,0,"" "ざくざく","(adj-na,adv) lots of coins or jewels/cutting up roughly/mixing gravel/walking on frost","",0,0,0,"" "ざけんなよ","(exp) (X) (vulg) fuck you!/""don't fuck around""/""don't be a screw off""","",0,0,0,"" "ざっくざっく","(adv) crunch crunch/thud thud/tramp tramp","",0,0,0,"" "ざっくばらん","(adj-na,n) frankness","",0,0,0,"" "ざっと","(adv) roughly/in round numbers/(P)","",0,0,0,"" "ざぶんと","(adv) with a splash","",0,0,0,"" ------------------ そして組んだのがこれです。 use encoding "cp932"; $/ = "\r\n"; open(DIC, "+> DicData.csv") or die("Error:$!"); while(<DIC>){ $data = $_; } if($a =~ /&quot/){ $a =~ s/&quot//g; } close(DIC); ----------- お恥ずかしい限りです。 なにとぞよろしくお願いします。
perl初心者です。 以下のxmlデータの「http://www.google.co.jp」をxml解析して値を取得したいのですが、 どのようなプログラムを記述すればよろしいのでしょうか？ <?xml version="1.0" encoding="x-sjis-cp932" ?> <Res_result> <result result="1" /> <result redirect="http://www.google.co.jp" /> </Res_result> いろいろ試してみましたが、どうもうまくいきません。 ちなみにサーバーにインストールされているxml関連のモジュールが XML::Simple XML::Parser となります。 ご教授の方、宜しくお願い致します。
以下のように記述して投稿フォームを作っています。 <form action="******.cgi" method="post" enctype="" > <input type="hidden" name="mode" value="prev"> <input type="hidden" name="name" value=""> 　　　　　　・ 　　　　　　・ 　　　　　　・ <textarea cols="55" rows="8" name="CONTENTS"></textarea> 　　　　　　<input type="submit" value="送信" class="btn"> </form> なぜか一部の携帯で<textarea>内の文字列が送信されません。 name属性が大文字なのが原因でしょうか？ formのenctype属性が空欄だからでしょうか。 ちなみに問題を確認した端末はAUの京セラK002です。
perlについて学習中で、現在フリーのスクリプトを見て勉強しております。 中括弧の使い方を教えて欲しいです。 sub test { print"OK"; } if ($test>1) { print"OK"; }else{ print"NG";} 上記のようにサブルーチンやif文での使い方は分かるのですが、フリーのスクリプトの中に単に中括弧を使用している部分がありました。 例） { ←この括弧 　　　my(@new); 　　　for(0..3){if($tmp[$_]=~/jpg/){push(@new,$tmp[$_]);}} } 矢印の部分の部分の括弧ですが、これはどのような意味があるのでしょうか？ よろしくお願いします。
Perlのコードを動かしながら勉強していて、ふと納得いかない点があったので教えてください。 次のコードを実行すると'0'と表示されます。 Cls->new; package Cls; sub new {bless([])} sub AUTOLOAD {print(0)} つまりAUTOLOADサブルーチンが実行されているようです。 しかし私のコードの中ではAUTOLOADサブルーチンの定義はしているものの、どこからも呼び出していません。 このコードは何も行わずに終了するはずなのですが、そうではありませんでした。 AUTOLOADサブルーチンは、いつ、どこで、何者によって呼び出されるのでしょうか。
さらに調べていたのですが、どうやら登録されているURLのデータに「=」が含まれていると 上手くいかないことが解りました。 以下のスクリプトで保存及び抽出データに「=」が含まれていても上手く処理する方法は無いでしょうか。 #***************************************************************************** sub plink{ #パーソナルリンク &error("現在、パーソ\ナルリンクは使用出来ません。") if !($personallink); my ($a1,$a2,$a3,%temphash); for $a1(split(/; */,$ENV{'HTTP_COOKIE'})){ ($a2,$a3) = split(/=/,$a1); $a3 =~ s/%([0-9A-Fa-f][0-9A-Fa-f])/pack("C", hex($1))/eg; if ($a2 eq 'plink_list'){ foreach(split(/<>/,$a3)){ $temphash{$_}=1; } last; } } &filelock("linkdata"); open (IN,"$linkdata"); while(<IN>){ if ($temphash{(split(/<>/,$_))[15]}){ $totalct++; push(@site,$_) if ($totalct >= $startnum) && ($totalct <= $endnum); } } close (IN); &fileunlock("linkdata"); $endnum = $totalct if $totalct < $endnum; $startnum = 0 if $totalct == 0; $action = "パーソ\ナルリンク"; &searchbar("","<option value=\"\" selected>$searchtitle\n"); &databar(); if ($totalct != 0){ $resultmessage = "$totalct件のリンクが登録されています。<br /><br />"; &linkbar("act=$act&line=$line&indi=$indi"); &siteindicate("",@site); }else{ $resultmessage = "登録が無いか、クッキーが有効になっていません。<br /><br />"; $linkbar = $siteindicate = ""; } &html_output; } #***************************************************************************** sub plink_add{ #パーソナルリンク追加 &error("現在、パーソ\ナルリンクは使用出来ません。") if !($personallink); &get_cookie; $plink_list.=$url."<>" if $plink_list !~ /\Q$url\E/; &set_cookie; &searchbar("","<option value=\"\" selected>$searchtitle\n"); $linkbar = $siteindicate = ""; $action = "パーソ\ナルリンク追加"; $resultmessage = "<b>".&sitename_get."</b> をパーソ\ナルリンクに追加しました。<br />"; &html_output; } #***************************************************************************** sub get_cookie{ #クッキー取得 my ($a1,$a2,$a3); for $a1(split(/; */,$ENV{'HTTP_COOKIE'})){ ($a2,$a3) = split(/=/,$a1); $a3 =~ s/%([0-9A-Fa-f][0-9A-Fa-f])/pack("C", hex($1))/eg; if ($a2 eq 'plink_list'){ $plink_list = $a3; last; } } } #****************************************************************************** sub set_cookie{ #クッキー設定 $plist_link =~ s/(\W)/sprintf("%%%02X", unpack("C", $1))/eg; print "Set-Cookie:plink_list=$plink_list; expires=Thu, 1-Jan-2030 00:00:00 GMT;\n"; } #**************************************************************************** 宜しくお願い致します。
プログラム自体初心者です。というかほぼ知識ゼロです。 次の会社では perl (sledge) で開発をすることになっていて、入社までの間勉強したいと思います。 一番いい覚え方としては、どっかのアプリのコードを読むことだと思っているので、 そういったオープンソース的なの紹介しているサイトってありますか？ moongift以外で・・・。 ちなみに、linux サーバエンジニアとして、3年の経験があります。
Perlで質問です。 「<div class="testclass"> <a href="test.php?filename=1600176008&s2=1307521989&s3=&p=1"><img src="test.jpg"></a>」 上記のデータのリンクのURL「test.php?～～」の部分を抽出したいです。 split("href=\"",$data); みたいな感じで前と後ろをsplit関数で消せば取り出せると思ったのですが、他に良い方法はありますか？
form input type="file" を使ってファイルデータをアップロードし、perl の標準入力からデータを取得します。 この時、約３０メガくらいまでなら正常に取得可能ですが、それ以上になると、CGI側でエラーが出ます。このことについてサーバー業者に問合せをしたところ、 「CGIの動作時間が長くかかる場合、該当のスクリプトの動作が負荷軽減のため、仕様により中断される場合がございます。」という解答でした。 大きなファイルを転送する方法が不明です。 どなたかご回答をお願いできますでしょうか。 宜しくお願い致します。
以下の環境で開発をしています。 OS: windows XP ActivePerl 5.8.8 apache 2.0.64 レンタルサーバで利用しやすいようにperlスクリプトの第1行目に #!/usr/bin/perl を記述していますが、ActivePerl のありどころが　C:\dev\perl\bin\なので第1行目を #!/dev/perl/bin/perl　 にしなければなりません。 #!/usr/bin/perlの記述をそのまま使う為に巷でよく言われているようなwindowsのジャンクション機能を利用しています。 Cドライブ直下に「usr」ホルダを作り、ここにC:\dev\perl\bin\のジャンクションを設定しました。 するとC:\usr\を覗くとbin\が存在します。つまりC:\dev\perl\bin\はC:\usr\bin\でアクセスできるようになります。 しかしこの状態で#!/usr/bin/perlの記述をそのまま使うと500エラーが出ます。 これ以外に何か良い方法はございませんでしょうか? また同じような開発環境の皆様はperlスクリプトの第1行目をどのように対策されていますでしょうか? 宜しく御教授お願いいたします。
perl初心者です。 説明不足の箇所もあるかと思いますが、よろしくお願いします。 テキストデータから指定した１行を抜き出して表示するのにはどうしたらいいんでしょうか。 data.txtの中に＝で区切られた文字が入っているとします。 1=にんじん=150 2=じゃがいも=200 3=たまねぎ=100 左から$s_no,$s_name,$s_priceという変数になっています。 これを print <<"EOF"; <TABLE class="list_index"> EOF open(IN,"../indata/sdeta.txt"); @data = <IN>; close(IN); foreach $sdata (@data){ chop($sdata); ($s_no,$s_name,$s_price) = split (/=/, $sdata); print <<"EOF"; <TR> <TD class="list2">$s_no</TD> <TD class="list3">$s_name</TD> <TD class="list4">$s_price円</TD> <TR> EOF } print <<"EOF"; </TABLE> EOF という感じでテーブルにデータを全て一覧表示させました。 ここから、$s_noで表示されている「1」「2」「3」をクリックすると、 別ページにとんで、クリックした番号の１行を編集用のフォームに表示させたいです。 フォームに表示させる方法はわかっているんですが、 クリックで指定した1行だけを表示する方法がわからずに困っています。 よろしくお願い致します。
MAC OS Xを使用しています。 検索置換のプログラムをperで作成し、Applescript上で呼び出したいのです。 実際はファイルメーカーのスクリプトの中でApplescriptを記述してその中で呼び出したいのです。 do shell script "perl ～.pl"という感じで使えるのではないかと 下記のようなサンプルスクリプトを見つけたのですが 内容の更新の仕方がよく分かりません。 perlについては全くの初心者でいろいろ調べたのですがよく理解できませんでした。 検索置換したいのですが、どういうふうに書けばいいのでしょうか。 (2)の部分を教えて下さい。宜しくお願いします。 use strict; use warnings; use File::Copy 'move'; # (1) ファイルの内容を読み込む my $file = 'F:\共有\PERL\test.txt'; open my $fh, '<', $file or die qq/Can't open file "$file": $!/; my $content = do {local $/; <$fh>}; close $fh; # (2) 内容の更新　▼をリターンに置き換えたいのです。 $line =~s/▼/\n/; # (3) 一時ファイルへの書き出し my $temp_file = "$file.$$." . int(rand 10000); open my $temp_fh, '>', $temp_file or die qq/Can't open file "$file": $!/; print $temp_fh $content; close $temp_fh or die qq/Can't open file "$file": $!/; # (4) 一時ファイル名を元のファイル名に変更 move $temp_file, $file or die qq/Can't move "$temp_file" to "$file": $!/;
現在、以下の内容でメールサーバおよびシステムを運用してます。 レンタルサーバを以下の内容で OS:FreeBsd DB:postgresql　（eucコードで運用） PG:perl5.8.8　　（eucコードで記述） 最近、当システムから携帯電話（スマートフォン含む）へのメール送信で受信側（携帯）で文字化けが多くなっている。それで、システムの一部のUTF8化しようと思いました。それで、メール送信のライブラリを以下のように修正してみたが、本文が文字化けしてしまいます。なぜ文字するか原因がわかりません。 以下のソースはＵＴＦ８Ｎで記述しています。 ※システム全部をＵＴＦ８コード化やＤＢ（ＰＯＳＴＧＲＥＳＱＬ）もＵＴＦ８にする案もありますが、 改修作業が大きくて作業時間が少ない方法も模索しています。 どなたかご教授願います。 binmode(STDOUT, ":utf8"); use Encode; use Encode qw(from_to); use MIME::Base64; use MIME::Entity; use Net::SMTP; use MIME::Words qw (:all); sub sendmail() { my ($mail_date) = @_;　＜＝＝メールのハッシュ配列（ＤＢに登録されているメールの件名、本文） my $smtp_server = $mail_date->{SMTPsrv}; my $smtp_port = '25'; # 送信者のメールアドレスを設定する。 my $mail_from = $mail_date->{MailFr}; # 宛先のメールアドレスを設定する。 my $mail_to = $mail_date->{MailTo}; # メールの件名を設定する。 from_to($mail_date->{Subjct},"euc-jp","utf8"); #UTF8に変換 $utf8_str_sub = $mail_date->{Subjct}; # メールの内容を設定する。 my $message; my $utf8_str; from_to($mail_date->{Message},"euc-jp","utf8"); #UTF8に変換 $message = $mail_date->{Message}; $utf8_str = $message; # メールヘッダを作成する。 # from、to、件名共にMIME-Header(UTF-8)へエンコードします。 my $mail_header; $mail_header = "From: " .encode('MIME-Header-ISO_2022_JP',$mail_from)."\n"; $mail_header .= "To: " .encode('MIME-Header-ISO_2022_JP',$mail_to) ."\n"; $mail_header .= "Subject: ".encode('MIME-Header-ISO_2022_JP',$utf8_str_sub) ."\n"; # UTF-8とbase64 encodeを使う事を明記します。 $mail_header .= "MIME-Version: 1.0\n"; $mail_header .= "Content-type: text/plain; charset=utf-8\n"; $mail_header .= "Content-Transfer-Encoding: base64\n"; $mail_header .= "\n"; # SMTPでメールを送る。 my $SMTP = Net::SMTP->new($smtp_server,Port=>$smtp_port); $SMTP->mail($mail_from); $SMTP->to($mail_to); $SMTP->data(); $SMTP->datasend($mail_header); $SMTP->datasend(encode_base64(encode('utf8', $utf8_str))); $SMTP->dataend(); $SMTP->quit; }
my $packetcount : shared = 0; にある :shared は何でしょうか。 our $packetcount = 0; とおなじでしょうか。 また :shared 以外にもこういった使い方をするものはあるのでしょうか。
起動時に出てくる、アダルト画面が消えません。 スタートアップを全部無効にしても、【C:\WINDOWS\system32\ezsp_PX.exe】というものだけ、無効になりません。
グローバルな特殊ファイルハンドル_（下線）について、プログラミングPerlでは、 最後に実行したstat、lstat、ファイルテスト演算子の情報をキャッシュするのに用いる特殊ファイルハンドル と説明してあります。 これを試すために、 -f('file'); print(<_>) このコードを実行すると、 readline() on unopened filehandle _ となってしまいます。 特殊ファイルハンドル_（下線）はどうやって使うのでしょうか
構文は以下の通りです。IF文のところがおかしいようですが、どこに間違いがあるのか教えていただけないでしょうか。 sub ippack { my ($a, $b, $c, $d) = @_; return ($a << 24) | ($b << 16) | ($c << 8) | $d; } sub ipunpack() { my ($n) = @_; return (($n>>24)&0xFF,($n>>16)&0xFF,($n>>8)&0xFF,$n&0xFF); } open (IN,"<useIP.txt") while(my $input = <IN>) { if ($input =~ /([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+) ([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/){; my $n = &ippack($1,$2,$3,$4); my $m = &ippack($5,$6,$7,$8); $n = $n & $m; $m = ~$m & 0xFFFFFFFF; for(my $i = 0; $i <= $m; $i++) { print join(".", &ipunpack($n+$i))."\n "; } } if-else($input =~ /([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/);{ print "$input\n"; } print "\n"; }
Perlを使用してIPアドレスとサブネットマスクから範囲内にあるIPアドレスを展開できるようにしたいです。 【例】 192.168.1.0　255.255.255.0の場合 ↓↓ 192.168.1.0 192.168.1.1 192.168.1.2 　　　・ 　　　・ 　　　・ 192.168.1.253 192.168.1.254 192.168.1.255 のような感じに展開できるようなものを作成したいと考えております。(サブネットマスクは様々です。) 何卒宜しくお願い致します。 なお、展開したいIPアドレス帯は1000個以上あります。ひとつのテキストファイルに一行にひとつのセットで記入されています。 【展開したいテキストファイル】 192.168.1.0　255.255.255.0 10.1.1.128　255.255.255.128 ・ ・ ・ 172.16.10.192　255.255.255.192 のように記入されています。 宜しくお願い致します。
>AA A AAA aaaaaaaaaaaaaaa aaaaaaaaaaaa >BBB BB B bbbbbbbbbbbbbbb bbbbbbbbbbbbbbb bbbbbbbbbbbbbb ・ ・ こういった形式でテキストが入った大きいサイズのひとつのファイルを ・ファイル名 AA A AAA ・テキスト内 >AA A AAA aaaaaaaaaaaaaaa aaaaaaaaaaaa ・ファイル名 BBB BB B ・テキスト内 >BBB BB B bbbbbbbbbbbbbbb bbbbbbbbbbbbbbb bbbbbbbbbbbbbb となるように個別に出力させたいのですがどのようにすればよいでしょうか？ #!/usr/bin/perl -w use strict; my $first; my $file; $first = 1; open(IN,"分割前ファイル"); foreach(<IN>) { if ( /^>(.*)/ ) { if ($first == 0 ) { close(OUT); } else {$first = 0; } $file = $1; $file =~ s/[\r\n]//; open(OUT,">$file"); } else { print OUT $1; print OUT $_; } } close(IN); このようなプログラムを組んだのですが、出力結果はファイル名についてはいいのですが、テキスト内が思ったようにいきません。 ・ファイル名 AA A AAA ・テキスト内 AA A AAAaaaaaaaaaaaaaaa AA A AAAaaaaaaaaaaaa このような結果になってしまいます。 どなたか対処方をわかるかたがいましたらお願いします。
perlで、URLからサイトが表示されるかを確認するプログラムを作成しました。 ただ現在の方法だと、チェックするデータ件数が多くなるとエラーとなってしまいます。 現在のソース (ここから) open(DB,"$memfile") || &error("Open Error : $memfile"); flock DB, 2; @lines = <DB>; close(DB); @new=(); foreach $line (@lines) { $flag=0; ($num,$url,$title) = split("<>", $line); &url_ckeck("$url"); $data = "$num<>$url<>$title\n"; $data =~ s/\n<>/<>/g; $data =~ s/\r\n<>/<>/g; $data =~ s/\r<>/<>/g; push(@new,$data); } open OUT, "> $memfile"; print OUT @new; close OUT; (ここまで) この方法だと300件を超えると「ページが表示出来ない」エラーがでてしまうので、 チェックの方法を小分けしてエラー回避できないかを考えているのですが、とのようにすれば良いのかがわからず先に進められなくなってしまいました。 プログラムも見よう見真似で作成しているのでおかしな箇所が多々あるかと思いますが、助けていただけないかと思い書き込みました。 「$line (@lines)」を「$start .. $end」として件数を小分けにしてボタンを表示させてクリックして進められるようにしてみたらとも思いましたが データがうまく更新出来ずにいます。 不明点はご指摘ください。 よろしくお願いいたします。
何万行も書いてあるテキストファイルがあります。抽出したい文字列の一覧がテキストファイルにまとめられています(文字列は約1000個)。抽出したい文字列は一行にひとつづつ書かれています。何万行も書いてあるテキストファイルから抽出したい文字列と二つ合致したらその行を抽出したいです。ここで、注意していただきたいのが、抽出したい文字列一覧から二つの文字列にヒットした行を抽出したいです。宜しくお願い致します。 何万行も書いてあるテキストファイル aaaaa abc edi bb aert kkkkkkkkkk lllllll ddddd aaaaa anhi kkk　　　 ・・・・・・・・ ・・・・・・・・ 抽出したい文字列一覧のテキストファイル aaaaa bbbbb ddddd iiiiiiiii eeeee ・・・・・ ・・・・・
sjisで保存されたファイルを読み込んで、別ファイルに書込みを行ったところ、能等の文字が文字化けを起こしました。 open(IN,"$file"); my $data = <IN>; close(IN); $data=~s/\\//g; open(OUT,">$file2"); print OUT $data; close(OUT); 莫大なソース量だったので、原因を探すのに時間がかかりましたが、一つ一つ消去しながら探したところ、 $data=~s/\\//g; これを消すことで解消しました。 文字化けさせずに\を消すにはどのように書けばいいのでしょうか？
何万行もあるACLがあり、使用されていないIPが半分近く混ざっています。、使用中のIPアドレス帯(約1000個)が分かっています。その使用中のIPアドレス帯がソースとデストの両方に入っている行のみ抽出したいです。 抽出するためのツール(perl)を作成していますが、なかなか思いつきません。perlかマクロなどで良い方法がありましたら、ご教授いただけると幸いです。何卒宜しくお願い致します。
read.cgi #------------------------------------------------- # BBCode（特定の文字列をHTMLタグに変換） #------------------------------------------------- sub bbcodecnv { my $str = shift; $str =~ s/\[b\](.*?)\[\/b\]/<b>$1<\/b>/ig; $str =~ s/\[i\](.*?)\[\/i\]/<i>$1<\/i>/ig; $str =~ s/\[u\](.*?)\[\/u\]/<span style=\"text-decoration:underline\">$1<\/span>/ig; $str =~ s/\[s\](.*?)\[\/s\]/<span style=\"text-decoration:line-through\">$1<\/span>/ig; $str =~ s/\[code\](.*?)\[\/code\]/<code>$1<\/code>/ig; $str =~ s/\[url=((?:htt|ft)ps?\:[\w\.\~\-\/\?\&\+\=\:\@\%\;\#\%\,]+)\](.*?)\[\/url\]/<a href=\"$1\" target=\"$target\" rel=\"nofollow\">$2<\/a>/ig; $str =~ s/\[color=(\#[0-9A-F]{6}|[A-Z]+)\](.*?)\[\/color\]/<span style=\"color:$1\">$2<\/span>/ig; $str =~ s/\[list=1\](.*?)\[\/list\]/<ol style="list-style-type: decimal">$1<\/ol>/g; $str =~ s/\[list=A\](.*?)\[\/list\]/<ol style="list-style-type: upper-alpha">$1<\/ol>/g; $str =~ s/\[list=a\](.*?)\[\/list\]/<ol style="list-style-type: lower-alpha">$1<\/ol>/g; $str =~ s/\[list=I\](.*?)\[\/list\]/<ol style="list-style-type: upper-roman">$1<\/ol>/g; $str =~ s/\[list=i\](.*?)\[\/list\]/<ol style="list-style-type: lower-roman">$1<\/ol>/g; $str =~ s/\[list\](.*?)\[\/list\]/<ul style="list-style-type: disc">$1<\/ul>/ig; $str =~ s/\[\*\]/<li>/ig; return $str; } #------------------------------------------------- # BBCode削除 #------------------------------------------------- sub bbcodedel { my $str = shift; $str =~ s/\[b\](.*?)\[\/b\]/$1/ig; $str =~ s/\[i\](.*?)\[\/i\]/$1/ig; $str =~ s/\[u\](.*?)\[\/u\]/$1/ig; $str =~ s/\[s\](.*?)\[\/s\]/$1/ig; $str =~ s/\[code\](.*?)\[\/code\]/$1/ig; $str =~ s/\[url=((?:htt|ft)ps?\:[\w\.\~\-\/\?\&\+\=\:\@\%\;\#\%\,]+)\](.*?)\[\/url\]/$1/ig; $str =~ s/\[color=(\#[0-9A-F]{6}|[A-Z]+)\](.*?)\[\/color\]/$2/ig; $str =~ s/\[list=1\](.*?)\[\/list\]/$1/g; $str =~ s/\[list=A\](.*?)\[\/list\]/$1/g; $str =~ s/\[list=a\](.*?)\[\/list\]/$1/g; $str =~ s/\[list=I\](.*?)\[\/list\]/$1/g; $str =~ s/\[list=i\](.*?)\[\/list\]/$1/g; $str =~ s/\[list\](.*?)\[\/list\]/$1/ig; $str =~ s/\[\*\]/ig; return $str; } patio.cgi # 改行をサニタイジング・BBCode削除 $com =~ s/<br>/&lt;br \/&gt;/g; $com =~ s/\[b\](.*?)\[\/b\]/$1/ig; $com =~ s/\[i\](.*?)\[\/i\]/$1/ig; $com =~ s/\[u\](.*?)\[\/u\]/$1/ig; $com =~ s/\[s\](.*?)\[\/s\]/$1/ig; $com =~ s/\[code\](.*?)\[\/code\]/$1/ig; $com =~ s/\[url=((?:htt|ft)ps?\:[\w\.\~\-\/\?\&\+\=\:\@\%\;\#\%\,]+)\](.*?)\[\/url\]/$1/ig; $com =~ s/\[color=(\#[0-9A-F]{6}|[A-Z]+)\](.*?)\[\/color\]/$2/ig; $com =~ s/\[list=1\](.*?)\[\/list\]/$1/g; $com =~ s/\[list=A\](.*?)\[\/list\]/$1/g; $com =~ s/\[list=a\](.*?)\[\/list\]/$1/g; $com =~ s/\[list=I\](.*?)\[\/list\]/$1/g; $com =~ s/\[list=i\](.*?)\[\/list\]/$1/g; $com =~ s/\[list\](.*?)\[\/list\]/$1/ig; $com =~ s/\[\*\]/ig; エラーが出てしまいます。 どこがどう間違っていますか？？ ※BBCode削除と 改行をサニタイジング・BBCode削除がたぶん ミスっていると思います。
#------------------------------------------------- # BBCode（特定の文字列をHTMLタグに変換） #------------------------------------------------- の中の、文字列なんですけれども $str =~ s/\[url=((?:htt|ft)ps?\:[\w\.\~\-\/\?\&\+\=\:\@\%\;\#\%\,]+)\](.*?)\[\/url\]/<a href=\"$jumpcgi?$1\" target=\"$target\" rel=\"nofollow\">$2<\/a>/ig; urlのものが、変になります。 http://www28.atpages.jp/wrsend1/patio/read.cgi?n … ↑みたいになってしまいます。 http://www.gemani.org/titi4/read.cgi?no=1391 ↑のように文字でリンクさせるにはどうしたらいいでしょうか。
#------------------------------------------------- # BBCode（特定の文字列をHTMLタグに変換） #------------------------------------------------- sub bbcodecnv { my $str = shift; $str =~ s/\[b\](.*?)\[\/b\]/<b>$1<\/b>/ig; $str =~ s/\[i\](.*?)\[\/i\]/<i>$1<\/i>/ig; $str =~ s/\[u\](.*?)\[\/u\]/<span style=\"text-decoration:underline\">$1<\/span>/ig; $str =~ s/\[s\](.*?)\[\/s\]/<span style=\"text-decoration:line-through\">$1<\/span>/ig; $str =~ s/\[code\](.*?)\[\/code\]/<code>$1<\/code>/ig; $str =~ s/\[url=((?:htt|ft)ps?\:[\w\.\~\-\/\?\&\+\=\:\@\%\;\#\%\,]+)\](.*?)\[\/url\]/<a href=\"$jumpcgi?$1\" target=\"$target\" rel=\"nofollow\">$2<\/a>/ig; $str =~ s/\[color=(\#[0-9A-F]{6}|[A-Z]+)\](.*?)\[\/color\]/<span style=\"color:$1\">$2<\/span>/ig; return $str; } #------------------------------------------------- # BBCode削除 #------------------------------------------------- sub bbcodedel { my $str = shift; $str =~ s/\[b\](.*?)\[\/b\]/$1/ig; $str =~ s/\[i\](.*?)\[\/i\]/$1/ig; $str =~ s/\[u\](.*?)\[\/u\]/$1/ig; $str =~ s/\[s\](.*?)\[\/s\]/$1/ig; $str =~ s/\[code\](.*?)\[\/code\]/$1/ig; $str =~ s/\[url=((?:htt|ft)ps?\:[\w\.\~\-\/\?\&\+\=\:\@\%\;\#\%\,]+)\](.*?)\[\/url\]/$1/ig; $str =~ s/\[color=(\#[0-9A-F]{6}|[A-Z]+)\](.*?)\[\/color\]/$2/ig; return $str; } と初期設定でありますが、 リスト形式のものは、どういう風に書いたら 良いのでしょうか？？ いろいろ調べて（試して）みたんですが、 できませんでした。 よろしくお願いします！ ちなみに、 $str =からやっぱり始まるんでしょうか？
http://www28.atpages.jp/wrsend1/patio/read.cgi?n … ↑リンクのことなんですが、 クッションを踏まない場合の設定はどうすればいいでしょうか？？
きりしま式 Web Patio LibertyVerを今作成しているんですが スレッドやレスを編集した時の、日時に自動変更されるっていうのは できるでしょうか？？ 例えば、今日、 2011/06/12 09:41のスレッドを変更するとき、 2011/06/14　何時何分　 としたいわけです。 編集したときの日時にしたいのですが、 どうすればいいでしょうか。
http://www28.atpages.jp/wrsend1/patio/read.cgi?n … ↑リンクが他サイトと共有できないとかいって ジャンプできないのですが、つなげるようにするには どうすればよいでしょうか？？
http://oshiete.goo.ne.jp/qa/6803872.html ↑の質問で、新たにプログラムを書き足すことまでは わかったのですが、どこをどう書き足せば、 リスト形式が使えるようになるのでしょうか？ いろいろしてみたんですが、わからなくて、困っています。
お世話になります。 ラクダ本こと「プログラミング言語Perl」には「2.5 名前」という項目に「厳密な話をすれば、ファニー文字の後ろに続く名前は、識別子でなくても構わない。数字で始まり、数字のみで構成される名前－たとえば$123－を使うこともできる」と書かれています。 しかし、実際に、 $123 = sqrt(5); print "5の平方根は", $123, "です\n"; というプログラムを実行すると、 Modification of a read-only value attempted at foo.pl at line 1 というエラーメッセージが出て終了します。 これは、$123というのが、正規表現でカッコによるサブパターンを取得した、123番目のサブパターンにマッチするからだと思います。 ちなみにこれを、 $012 = sqrt(5); print "5の平方根は", $012, "です\n"; と変えるとちゃんと動作します。 ということで、数字の変数名を付ける場合は、 ・$0で始まる2桁以上 ・すべて数字 という規則である、と考えていいのでしょうか。 （$0はプログラム名という特殊変数になるので。。。） つまり、本の間違いでしょうか？
はじめまして。perl初心者です。 見よう見まねでやりはじめたのですが。どうしてもわからないことがあります。 数十行ぐらいのテキストファイルがあるのですが、その中を訂正するcgiを作成しています。 htmlからそのファイル名を指定して、 open (DATA, "$file1"); #$file1がファイル名 として htmlのテキストエリアに表示して訂正し、それをさらに別のcgiで書き込むようにしています。 print "<form ACTION=\"hensyuu.cgi\" METHOD=\"POST\">\n; print "<textarea name=\"MSG\" cols=100 rows=30>\n"; foreach $gyou ( < DATA > ) { print $gyou; } print "</textarea>\n"; print "<input type=\"submit\" value=\"書込\">\n"; print "</form>\n"; hensyuu.cgiは open ( DATA,">>$file1" ); #ここでtextareaの内容を読み込み print DATA "$in{MSG}"; close ( DATA ); 編集したデータを見ると、各行ごとになぜか空白行が入ってしまいます。 バイナリエディタで見ると通常の０D0Aの前に０Dが追加され、0D0D0Aとなっているために そうなっていると思われます。 これってそういうものなのでしょうか。 それとも根本的にこんなやり方は間違っているのでしょうか。 ご教授のほど、よろしくお願いします。
を、したいのですがperlではどの様に書くのが スマートでしょうか？
perl は初心者です。よろしくお願いします。 ★無名ハッシュを作り、リファレンスをハッシュに格納する方法を採用して、試行錯誤しています。 ファイル内容は、論理行の一行毎に行頭が ”AA” のように””で囲まれています。(例文後述) しかし、行の中には「誤改行」されて正常な行が分割されていて、改行され行頭が””で囲まれていない行が存在します。（正常な行が２分割され、前半部分と後半部分が別な行文となっている） この「誤改行」を、直前にある「元の正常な分割された前半の行文」と連結して、新たな正常な行としてファイルを修正し新規テキストファイルに書きこみたい。この際、分割されていた２個の「行文」は不要になったので、新規テキストファイルには書き込まない。 この修文作業が、途中まで出来ましたが最後の不要な行の削除が出来ないので、困っています。 ------------------------------------------------------------ 対象とするテキスト内容　(下記の行番号と文字列は例示です) 1. "ABCD",あいうえおかきくけこ１２３４５６７８９　XXXXXXXXXXXX 2. "EFGH", 3. さしすせそたちつてと９８７６５４３　XXXXXXXXXXXX # ←「誤改行」の行です。 4. "IGKL",なにぬねのはひふへほ１２３４５６７８９　XXXXXXXXXXX 5. "MNOP",まみむめもやいゆえよ９８７６５４３２１　XXXXXXXXXXX 6. "QRST", 7. らりるれろわいうえを１２３４５６７８９　XXXXXXXXX # ←「誤改行」の行です。 8. 9. ------------------------------------------------------------------ 期待する修文の出力結果 (行内容は、元の行番号の順番と違っても結構です) 1. "ABCD",あいうえおかきくけこ１２３４５６７８９　XXXXXXXXXXXX 2. "EFGH",さしすせそたちつてと９８７６５４３　XXXXXXXXXXXX 3. "IGKL",なにぬねのはひふへほ１２３４５６７８９　XXXXXXXXXXX 4. "MNOP",まみむめもやいゆえよ９８７６５４３２１　XXXXXXXXXXX 5. "QRST",らりるれろわいうえを１２３４５６７８９　XXXXXXXXX 6. 7. ----------------------------------------- 私作成したスクリプトの要約は、 # 対象ファイルを一行づつ読み込む． # 末尾の改行を削除 # 誤改行の場合を正規表現で探す。$ng_gyou に格納 # その他正常行は$ok_gyou, に格納する。 # $falag に誤改行の場合は０、正常な改行の場合は１を格納 # 誤改行の場合の行番号を$count_ng に、正常な改行の場合の行番号を$count_ok に、全部の行番号は$flag_1に格納する。 # 無名ハッシュを作り，リファレンスを $ref に格納する $ref = {'nomber' => $flag_1, 'ng' => $ng_gyou, 'ok' => $ok_gyou, 'ngcount' => $count_ng, 'okcount' => $count_ok, 'flag' => $flag_ok }; $WORD{$flag_1} = $ref; # nomber:$flag_1をキーにして，リファレンスをハッシュ:%WORDに格納 # このハッシュ「%WORDを」 読み込んで、処理しました。 foreach $flag_1 ( sort { $a <=> $b } keys %WORD) { 　　 if($one->{ok} == 0) { ・・・・・・・・・・・・・・・・・ # 細部は、長くなるので省略します。（ 誤改行の連結までは成功しましたが、・・・・・・？？） 以上、質問内容が冗長になりましたが、どうか御教示下さい。
「***************** Version 2 *****************」 ↑という文字列を評価して「2」を取りたい為に「/^\*+\s*Version\s+(\d+)\s*\*+\s*$/」という正規表現を使用しています。 「***************** バージョン 2 *****************」 同様に↑という文字列を評価して「2」を取りたいので「/^\*+\s*[バージョン]\s+(\d+)\s*\*+\s*$/」としましたがうまく動きません。 日本語文字列が正しく動作していないようです。 何らかの形でエンコードして当てはめればよいと思うのですが、どのような値を設定すればよいでしょうか？ 「バージョン」以外にも「ユーザ」、「日付」などの日本語を同様にマッチさせる必要があるため、変換方法を教えて頂けると助かります。 perlはほぼ使えないため、WebやWindows上でのアプリケーションで指定文字列を渡すと変換できる物をお願い致します。 （perlは入っているためコマンドを叩けばOKというのであればそれでも構いません） 与えられる「バージョン」という文字の文字コードはSJISになります。
システム名： Linux リリース： 2.6.9-89.ELsmp バージョン： #1 SMP Mon Apr 20 10:34:33 EDT 2009 Perl バージョン： 5.008005 Archive::Zipがインストールされていないサーバにlibディレクトリを作成して実行したいのですが、実行以前にエラーとなってしまいます。現在、libディレクトリはcgi-bin内にありますが、置き場所が悪いのでしょうか？ 漠然とした内容で申し訳ございませんが、どのような理由が考えられるのかをお聞かせください。
下記のような配列内定義サブルーチン呼び出しを作成し動作を確認しました。 次にソース２行目の「no strict;」を「use script;」に変更すると Bareword "sub1" not allowed while "strict subs" in use at refsub_OK.pl line 4. Bareword "sub2" not allowed while "strict subs" in use at refsub_OK.pl line 4. Bareword "sub3" not allowed while "strict subs" in use at refsub_OK.pl line 4. Execution of refsub_OK.pl aborted due to compilation errors. とエラーになります。 プログラムはやはり「use script;」を記述したいのですが、「use script;」を記述 したままでエラーにならない方法がありましたらおしえてください。 perlのバージョンは5.12.3、OSはWindowsXP SP3です。 よろしくお願いします。 ---ソースここから--- #!perl no strict; use warnings; my @ary = ( ("input1.txt", "save1.txt", sub1), ("input2.txt", "save2.txt", sub2), ("input3.txt", "save3.txt", sub3), ); while (@ary) { my $p1 = shift(@ary); my $p2 = shift(@ary); my $sub = shift(@ary); print "p1=[$p1] p2=[$p2] sub=[$sub]\n"; &$sub("$p1", "$p2"); } sub sub1 { my ($p1, $p2) = @_; print "sub1: [$p1] [$p2]\n"; } sub sub2 { my ($p1, $p2) = @_; print "sub2: [$p1] [$p2]\n"; } sub sub3 { my ($p1, $p2) = @_; print "sub3: [$p1] [$p2]\n"; } ---ソースここまで---
お世話になります。 Perlを使って、計算機には誤差があるという話をしようと思って、 　print "1/3*3=", 1/3*3, "\n"; というプログラムを実行させました。 自分としては、1/3の時点で0.333333333333的な数になるので、それを3倍すると、0.9999999999的な数字になると思いましたが、結果としては1になります。 これはどういう原理でしょうか。 よろしくお願いします。
!isDependency( \( "aaa" , "bbb" , "ccc" ) , \( "000" ) ) ; 配列のリファレンスを渡そうとしていますがうまくいきません。 どう記述すればよいでしょうか？
perlで細かいことを理解できないままに呪文のように頭に require 'cgi-lib.pl'; require 'jcode.pl'; を使っていました。 そのうち文字化けなどの問題も出て、いろいろ調べたり質問したりして、jcode.plは古いからJcode.pmを使いなさいと指摘を受けたので、 require 'cgi-lib.pl'; require 'Jcode.pm'; と呪文変更を行いましたが、これについての使い方を理解せぬうちに、use Encode qw(from_to encode);としなさいと指摘を受け、 require 'cgi-lib.pl'; use Encode qw(from_to encode); と変えて使っていました。 ところが、このパターンを使っていたところ、GETでのデータの受渡がうまくできない(internal server error)となることに気づきました。 ２つ目のパターンでも同じでした local($key,$val); undef(%in); &ReadParse; my($method) = $ENV{'REQUEST_METHOD'}; if ($method eq "GET"){ $QUERY_DATA = $ENV{'QUERY_STRING'}; }elsif ($method eq 'POST'){ read(STDIN, $QUERY_DATA, $ENV{'CONTENT_LENGTH'}); }else{ &error; } データの受信はこのようにはじめています。 そもそもJcode.pmやuse Encode qw(from_to encode);というのはjcode.plに変わる日本語変換のパッケージなのでしょうか？ また、 require 'cgi-lib.pl'; require 'jcode.pl'; use Encode qw(from_to encode); とするとGETでの受渡も問題なかったのですが、２つを混在させても問題ないのでしょうか？ というのも、メール送信で文字変換させるときに sub jis{ my $msg = $_[0]; Encode::from_to($msg, "shiftjis", "iso-2022-jp"); return $msg; } としているので、use Encode qw(from_to encode);がないとEncode::from_to()が使えないのかなと想像し２つをセットで使用しています。（冒頭でuse Encode qw(from_to encode)を宣言し、変換部分でEncode::from_to()を使用） jcode.pl、Jcode.pm、use Encode qw(from_to encode)、Encode::from_to()の関係について教えてください。 もちろん自分でもネットで調べてみましたが、思うように解説してあるところが見つからず困っています。
csvファイルをperlで取扱っています。 ,（カンマ）が含まれるデータは""で括ってやれば行がずれることなく入るのは分かっているのですが、今度は取り出すときどのようにしていいのか分かりません。 各行毎に一連のデータが羅列されていますが、それの分割方法を教えてください。 たとえば、 $bに,（カンマ）入りの文字列が入っていた場合、 ($a, $b, $c) = split(/,/, $query); とすると本来$bに入って欲しいデータの,（カンマ）から後の部分が$cに格納されてしまいます。（そこから先が１つずれます） これをずれずに分割させるにはどのようにしたらいいでしょうか？ ちなみに ($a, "$b", $c) = split(/,/, $query); と試しにやってみましたが、エラーになってしまいました。 実は長年の悩みで、データを格納する際に,（カンマ）を別のあり得ないような文字列に置き換えて、取り出したあと,（カンマ）に戻すというやり方でやっていたのですが、１つのデータファイルを複数のperlで取扱うようになり、対応が難しくなってきたので、これを機にきちんとした方法でデータを取扱いたいと思っています。
Linux＋Perlでのお話です。 内部でsystem関数を使ってrshコマンドを実行しているperlスクリプト（以下、スクリプトＡという）があります。 スクリプトＡをフォアグラウンドで実行するとうまく流れるのですが、バックグラウンド実行すると、rshコマンドを実行した直後でjobが止まってしまいます。 もっと詳しく言いますと、スクリプトＡのrshコマンドは、ディスクを共有しているリモートマシンに対して、スクリプトＢを実行するように指示しています。 スクリプトＢではとある計算を行なっており、その計算結果をファイルに出力しています。 そして、その結果をスクリプトＡで読み込んで後処理を行うというものです。 ----- …(前処理)… system("rsh (ホスト名) \"(スクリプトＢ実行コマンド及び引数) 1> /dev/null 2> /dev/null\""); # ここでjobが止まってしまいます。 # ここで標準出力（ログファイルにリダイレクトしてる）に何か出力しようとしても、何も出力されてません。 (スクリプトＢの結果ファイルの読み込み) …(後処理)… ----- Jobが止まってしまうと言っているのは、jobsコマンドで見ると"job stopped"となっている状態のことを言っています。 この状態でスクリプトＢの結果はファイルに出力されているので、rshのコマンドはうまく投げられていると思います。 （「rshやsshは標準入力が期待されてるとバックグラウンド実行が出来ない」（？）というような記述をどこかで見かけたので、念のためrshに"< /dev/null"の記述を加えてもみたのですが、変わりませんでした） その後、止まっているjobをfgコマンドでフォアグラウンドで再開させると、最後まで問題なく実行されます。 フォアグラウンドで実行すればうまくいくのに、バックグラウンドで実行すると止まってしまうのが理解出来ません。 これは何が原因なのでしょうか。 そして、どうしたら解決出来るのか。 どなたかご存知でしたら、ご教示頂きたくお願い致します。
perlでホームページのURLが正しいか判定したいのですが、ネットで調べていても出てくるのがメールアドレスの判定方法ばかりで、ホームページに関してのことがなかなか見つかりません。 if($url !~ /^https?:\/\/[\w\.-~\?&=\/]{4,}/) { } こんな感じで適当にやっていたのですが、なぜか ,(カンマ） のチェックをスルーしてしまったりと思うように制御できておらず、 http://www.din.or.jp/~ohzaki/perl.htm#httpURL このページを読んでもちんぷんかんぷんで、とりあえず if($url !~ /\b(?:https?|shttp)://(?:(?:[-_.!~*'()a-zA-Z0-9;:&=+$,]|%[0-9A-Fa-f ][0-9A-Fa-f])*@)?(?:(?:[a-zA-Z0-9](?:[-a-zA-Z0-9]*[a-zA-Z0-9])?\.) *[a-zA-Z](?:[-a-zA-Z0-9]*[a-zA-Z0-9])?\.?|[0-9]+\.[0-9]+\.[0-9]+\. [0-9]+)(?::[0-9]*)?(?:/(?:[-_.!~*'()a-zA-Z0-9:@&=+$,]|%[0-9A-Fa-f] [0-9A-Fa-f])*(?:;(?:[-_.!~*'()a-zA-Z0-9:@&=+$,]|%[0-9A-Fa-f][0-9A- Fa-f])*)*(?:/(?:[-_.!~*'()a-zA-Z0-9:@&=+$,]|%[0-9A-Fa-f][0-9A-Fa-f ])*(?:;(?:[-_.!~*'()a-zA-Z0-9:@&=+$,]|%[0-9A-Fa-f][0-9A-Fa-f])*)*) *)?(?:\?(?:[-_.!~*'()a-zA-Z0-9;/?:@&=+$,]|%[0-9A-Fa-f][0-9A-Fa-f]) *)?(?:#(?:[-_.!~*'()a-zA-Z0-9;/?:@&=+$,]|%[0-9A-Fa-f][0-9A-Fa-f])* )?/){ } こんな感じで代入してみても予想どおり構文エラーとなってしまい、どうやればいいのか困っています。（あまりの長さに理解できていないためエスケープも一切させてないので、エラーが出て当然といえば当然ですが） そこまで厳密にでなくてもかまわないのですが、ホームページのURLに間違いがないかチェックする方法はないでしょうか。 （特に　.　と　,　や　:　と　;　や　~　と　^　の入力間違い、スペースが入っていないかとか全角入力になっていないかなどをチェックしたいです）
たとえば あるファイルhttp://xxx.xxx.xxx/xxx/xxxx.xxxを Perlで*.cgiのあるフォルダにそのファイルを ./yyyymmdd_hhmmss_xxx.xxx.xxx_xxx_xxxx.xxxとして 保存したいのですが 検索してもヘッダがついていたり、そのままな感じだったりして思うようなものは見つからず Perlではファイル入出力を少しと$ENV{'～'}とか時刻とかしかつかったことがないので ほとんどわかりません。 環境は 自宅では　Windows95でAnHTTPD サーバーは＠PAGESのものです よろしくお願いします
Perlからリモートファイルを参照する方法がわかりません。 参照というのは、ファイルをOPENして順次読み込みをするという意味です。 リモートファイルはURLでのみ指定して参照しようとしています。 FTPは使えません。 いろいろと調べたのですが、そもそもPerlでは出来ないのか、または何か方法があるのかわかりません。 是非よきアドバイスをお願い致します。
例えばphpの場合、下記の<?php～?>の間にphpの記述をしますが、同じことをperlで行おうとした場合、どのように記述すれば良いか分からなかったため、アドバイスいただける方がいらっしゃいましたら、ご教示の程、よろしくお願いします。 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitio … <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>title</title> </head> <body> <?php ?> </body> </html> なお、既存のhtmlにperlを追加したいと思っているため、上記のhtml自体をperlで書きなおす以外でお願いします。 以上、宜しくお願いします。
ホームページのカウンターなどPERLでかけると聞きました。 これはhtmlファイルやCSSファイルのほかにPERLファイルみたいのがあって、HTMLファイルからPERLファイルにリンクで飛んで、PERL言語を動かして、カウンターを表示させる、みたいな手順でしょうか？ プログラム素人なので、なるべく簡単にお教えいただければあり額存じます。 よろしくお願いいたします。
ローカルに保存してあるファイルをMySQLにバイナリデータとして格納して保存したいと思ってます。 データは格納できるのですが、文字エンコード？の問題でファイルが壊れてしまっているみたいです。 格納後、出力した際にjpgなどの画像は問題なく表示されるのですが、xlsやpdfなどのファイルが開けなくなります。MySQLの文字コードはUTF8です。 #!/usr/bin/perl use DBI; my $dbh = DBI->connect('DBI:mysql:database:localhost:3306', 'user', 'password'); # ファイルパス my $file = '/tmp/test.xls'; # ファイルサイズ my $size = -s $file; # バイナリデータ読み込み my $line; open(IN, $file); binmode(IN); sysread(IN, $line, $size); close(IN); # DBに格納 my $sth = $dbh->prepare(qq|INSERT INTO file_table ( `file_name`, `file_data` ) VALUES (?, ?)|); $sth->execute('test.xls', $line); $dbh->disconnect; 上記のようなコードなのですが、おかしな点があれば教えてください。 よろしくおねがいします。
何をしてもサーバーエラーがでます。 たとえば$a=1;　の数字を変えてまた元に戻してサーバーにアップすると エラーが出ます。 プログラムの部分をいじるとエラーが出ます。 パラメーター設定の部分の数値を変更するだけではエラーがでません。 何が原因なのでしょうか。 サーバーの設定上エラー番号はわかりません。 編集ソフトを変えても同じでした。 コードはシフトJISでFTP転送はバイナリとアスキー両方試しましたが エラーはでます。 文法的には間違いありません。 プログラムの部分に手を加えるだけでエラーが表示されます。
こんにちは。 かなりハマってしまいました。 多分これ以上は、自身の力で解決できそうにないと思い質問させて頂きます。 現在、Perlを使ったシステムを作っています。 そこでページが見つからなかった場合に、どのページが見つからなかったのか、そのURLに合わせて 「ページが見つかりません。○○を確認してください」のような動的なページを作成したいと思っています。 ■現状 htaccessで、 ErrorDocument 404 /maintainace/cgi/make_page_err.cgi の記述をしています。 ■期待する結果 呼び出し先のCGI側で$ENV{'REQUEST_URI'}から エラーとなったURLを取得し、それに合わせて「Print　ｘｘｘｘ」をする (さらに最終的にはHTMLを作成し、それを表示したい) ■現在の結果 無反応。 ただし、処理が走っているかを確認するために、呼び出し先のCGIに open File, ">>./404_log.txt"; を入れると正しくテキストファイルが書き込まれる　→　通っていることまでわかる。 試しにCGIの先頭に print "Content-type: text/html\n\n"; print "aaa"; exit; とすると「Oops! This link appears to be broken.」(Firefox)のエラー画面が表示。 上記のテキスト書き込みなし。 更に ErrorDocument 404 /maintainace/cgi/make_page_err.cgi を絶対パスにしたところ 動作はするが、$ENV{'REQUEST_URI'}の値が「make_page_err.cgi」とCGI自身なり、 元のURLが拾えない。 このような状態です。 ネットでもいろいろ検索しましたが、求めている回答は見つかりませんでした。 直接の回答でなくても、参考になるURLなどでも構いませんので ご存じある方お願いいたします。
こんばんは。 最近perl言語を授業で習い始めたので、家でも出来るようにとcygwinをダウンロードして使い始めたのですが、terapadに入力したプログラムを呼び出すことができません。 学校でやったときは、ホームディレクトリにcheminfというファイルを作り、その中にterapadで入力したファイルを入れていました。 おそらくファイルを置く場所に関係があると思うのですが、調べはしたもののさっぱり分からず…＾＾； また、terapadのプログラムには#!/usr/bin/perlって打ち込んでいるのですが、いったいこれがなんなのかも気になります。 相当初歩的な質問だとは思いますが、どうぞよろしくお願いします。
Perlに詳しい方教えてください。 WinXP(SP3)＋ActivePerl-5.10.0.1004の環境で、重複データのチェックプログラムを 作成していますが、foreach文の挙動がよく分かりませんので教えてください。 ※Perlは独学です。 ＜入力ファイル＞ あいうえお あいうえお かきくけこ あいうえお ＜出力期待値その１＞ あいうえお,重複しています あいうえお,重複しています かきくけこ あいうえお,重複しています ＜出力期待値その２＞ あいうえお,重複しています あいうえお,重複しています かきくけこ あいうえお ＜プログラムの要約＞ open(IN,$input_file); # 入力ファイルを読み込み @BASE = <IN>; close(IN); @BASE_2 = @BASE ; # 配列のコピーを作成 $count_1 = '0' ; foreach $data_1 (@BASE) { 　　$count_1++ ; # 何行目を処理しているかのカウンター 　　$flag_1 = '0' ; # フラグの初期化 　　$count_2 = '0' ; 　　foreach $data_2 (@BASE) { # ←★ここの記述方法の質問です★ 　　　　$count_2++ ; 　　　　if ( $count_1 == $count_2 ) { next; } # 自分自身の行とは比較しない 　　　　if ( $data_1 eq $data_2 ) { $flag_1 = '1' ; } # 一致したらフラグを立てる 　　} 　　 　　if ( $flag_1 == '0' ) { # フラグが立たなかったらそのまま新しい配列へ追加 　　　　push(@kekka,$data_1); 　　} else { # フラグが立ったらコメントを追加して新しい配列へ 　　　　$data_1 =~ s/\n//g; 　　　　$data_3 = $data_1 . ",重複しています\n" ; 　　　　push(@kekka,$data_3); 　　} } $kekka_2 = join("",@kekka) ; # 配列のデリミタ対策 open(OUT,"> $output_file"); print OUT "$kekka_2"; close(OUT); exit; ＜質問＞ 上記プログラムの★マークの箇所で、 foreach $data_2 (@BASE_2)　としますと、＜出力期待値その１＞が得られます そして、 foreach $data_2 (@BASE) としますと、＜出力期待値その２＞が得られます プログラムの途中で　@BASE_2 = @BASE　としていますので、一見しますと 同じ処理をしているように感じるのですけれども、実際には出力結果が異なり ますので、何かが違うのだと思います。 その違いを教えて戴きたいです。 ※投稿確認画面でTABが消えてしまいますのでTABは全角スペースに変更して 　おります。 　見えづらい場合には申し訳ありません
「Twitterから学ぶ，Web APIのキホン」（http://gihyo.jp/dev/serial/01/perl-hackers-hub/0 …）のサンプルプログラムを参考にitunesの検索apiの検索結果を解析しようとしているのですが解析できなく、何も表示されない状態になります。 itunes 検索api http://www.apple.com/itunes/affiliates/resources … まずは上のSearch Examplesにいくつか示しているitunes　apiの検索結果（jsonデータ）から"artistId"に対する項目や"artistName"に対する項目を抜き出そうと試みています。 以下は実際に私が実行しているプログラムです。 ----------------------------------------------------------------- print <<"HTML"; Content-type: text/html <html> HTML use LWP::UserAgent; use URI; use JSON qw(decode_json); use Encode qw(encode_utf8); my $uri = URI->new('※ここにitunes apiの検索結果のurl入れています'); my $ua = LWP::UserAgent->new; my $res = $ua->get($uri); my $json = $res->content; my $ref = decode_json($json); for my $applist ( @{ $ref->{results} } ) { print encode_utf8("$applist->{artistId}: $applist->{artistName}\n");} -------------------------------------------------------------------------------------- としているのですが結果は何も表示されません。※cgiはmac 環境にてUTF-8 Mac(CR)で保存しております。 「Twitterから学ぶ，Web APIのキホン」のサンプルプログラムは正常に動いて表示出来ているのでモジュールやPerlのパスには問題ないと思います。 どうすればitunes 検索apiのjsonデータがPerlでちゃんと解析されるのかご教示お願いします。
以前も質問させていただきましたが、 大量データから抽出する際の効率よいperlプログラム作成について また、教えてください。 例） 大量データ　Aファイル　3列　可変値（数値、URL、数値）タブ区切り　重複値あり 123　http://www.XX.co.jp/XX　4567 1111　http://www.XX.co.jp/XX　3333 3　http://www.XX.co.jp/YZ　4567 1111　http://www.YYY…　116 … 抽出対象データ　Bファイル　1列（URL）重複なし http://www.XX.co.jp/X http://www.YYY.co.jp … BファイルにあるURLで始まるURLがAファイルにある場合　Aファイルのその行を抽出したい。 grepで実施すると　すごい時間がかかってしまうため、効率よい抽出方法をおしえてください。 今回は、完全一致ではなく、Bファイルに入っているリストのURLから始まるものにしたいと考えているので、前の手法（hash連想配列）が使えないと考えております。 Aファイルが容量大きいため、ｇｒｅｐ処理では1週間たっても終わらないのです。
現在、jcode.plを使用したShift JISで構成されていた Perlのcgi を UTF-8 に改造しています。 フォームに書き込んだPAGETITLEを別ファイルへUTF-8で書きこむ際に、文字化けしてしまいます。 書きこんだファイルを開けてみると、日本語が文字化けしています（アルファベットは大丈夫） 以下のPerlのPAGETITLEをどのように改造すれば、文字化けしないで、$foundations_fileへUTF-8で書き込みすることができるのでしょうか？ ※個人的にはデータ書き込みの sub REGIST 以下を改造すれば良いのではと推測していますが、どうやれば良いのか分かりません。 どうかご教示、よろしくお願い致します。 m（＿ ＿）m ------------------------------------- #!/usr/bin/perl use utf8; binmode STDIN,":utf8"; binmode STDOUT,":utf8"; #基本セットアップファイル読込 require './setup_manage.cgi'; #このファイル $cgi = "./foundations.cgi"; #デコード処理 &DECODE; sub VIEW { #基本設定ファイルの読み込み &FOUNDATIONS_READ; 【省略】 <TABLE width="100%" border="0" cellspacing="0" cellpadding="1"><TR> <TD width="70%">変更するデータを直接書き換えて [ 編集実行 ] を押して下さい。</TD> <FORM method="post" action="./login.cgi"> <TD width="30%" align="right"><INPUT type="submit" value="メインメニューに戻る"></TD> <INPUT type="hidden" name="mode" value="main"> <INPUT type="hidden" name="pw" value="$in{'pw'}"> </FORM> </TR></TABLE> 【省略】 <TABLE border="0" cellspacing="1" cellpadding="4" bgcolor="#999999"><TR> <FORM name="SUBMIT" method="post" action="$cgi" onSubmit="return kakunin()"> <TD width="160" bgcolor="#eeeeee"> <TABLE border="0" cellspacing="0" cellpadding="1"><TR> <TD>ページタイトル</TD> </TR></TABLE> </TD> <TD width="400" bgcolor="#ffffff"> <TABLE border="0" cellspacing="0" cellpadding="1"><TR> <TD><INPUT type="text" name="PAGETITLE" size="60" value="$PAGETITLE"></TD> </TR></TABLE> </TD> 【省略】 ------------------------------------------------- # データ書き込み #------------------------------------------------- sub REGIST { #全角英数字を半角に変換 $zenkaku = '０１２３４５６７８９'; $hankaku = '0123456789'; $in{'PAGETITLE'} =~ s/\,/&%/g; $in{'PAGE1'} =~ s/\,//g; $in{'PAGE2'} =~ s/\,//g; $in{'PAGE3'} =~ s/\,//g; $in{'CATECOL'} =~ s/\,//g; $in{'PERIOD'} =~ s/\,//g; $in{'TABLECOL'} =~ s/\,//g; $in{'SIZECOL'} =~ s/\,//g; $in{'SIZEROW'} =~ s/\,//g; $in{'COPYRIGHT'} =~ s/\,/&%/g; #ファイルロック開始 if( $lockkey ne '0' ){ &LOCK; } #ファイルに書きこむ if (!open(OUT,">:utf8",$foundations_file)) { &ERROR( read_foundations ); } print OUT "$datenow,$in{'PAGETITLE'},$in{'INIMODE'},$in{'MODECHG'},$in{'PAGE1'},$in{'PAGE2'},$in{'PAGE3'},$in{'CATEVIEW'},$in{'CATECOL'},$in{'INICATE'},$in{'PERIOD'},$in{'RANKING'},$in{'CMODE'},$in{'RANKVIEW'},$in{'TITLEVIEW'},$in{'SRCHVIEW'},$in{'INPVIEW'},$in{'DATAROW'},$in{'TABLECOL'},$in{'BARCLR'},$in{'BARPER'},$in{'IMGPRT'},$in{'IMGSIZE'},$in{'SIZECOL'},$in{'SIZEROW'},$in{'IMGFRM'},$in{'COPYRIGHT'},$in{'GPVIEW'},"; close(OUT); #ファイルロック解除 if( $lockkey ne '0' ){ &UNLOCK; } &COMP; }
プログラミング初心者です。うまくいかないので、ご教授願います。 Mac(Snow Leopard)でperlを学びたいと思い、 CPANモジュールをインストールしましたが、 いざ、XML：：Feedを使用しようとすると、下記のエラーが出ます。 「Can't locate XML/Feed.pm in @INC ...........(続く)」 これはきちんとモジュールがインストールされていないことでしょうか？ 考えられる可能性と回避方法を教えていただけないでしょうかm(_ _)m
(1) <input type="hidden" name="word" value="大阪市"> (2) if ($wd =~ /^[\w.']+$/ ? $address =~ /$wd/i : index($address, $wd) >= 0) (1)のHTMLタグから受け取った「大阪市」を(2)のCGIによってデータ検索します。 東大阪市だと問題ないのですが、大阪市だと東大阪市も一緒にヒットしてしまいます。 何処を書きかえれば良いか教えて下さい。お願いします。
現在、jcode.plを使用したShift JISで構成されていた Perlのcgi　を UTF-8　に改造しています。 冒頭で　use utf8;　を宣言した後、jcode関連の文は、全てコメントアウトしてきました。 複数ある別ファイルからデータ読み込む場合も、 open(IN,"<:utf8","$別ファイル"); という形で、"<:utf8"を挿入して、うまく読みこめています。 ただ、読み込んだ後、別ファイルへUTF-8で書きこむのが、どうしてもうまくいきません。 書きこんだ後、文字化けしてしまいます。 書きこんだファイルを開けてみると、日本語が文字化けしています（アルファベットは大丈夫） 以下のPerlをどのように改造すれば、文字コードをUTF-8で書き込みすることができるのでしょうか？ どうかご教授、よろしくお願い致します。 m（＿　＿）m --------------------------------- #------------------------------------------------- # 編集内容登録処理 #------------------------------------------------- sub EDITREGIST { #全角英数字を半角に変換 $zenkaku = '０１２３４５６７８９'; $hankaku = '0123456789'; #Jcode::tr(\$in{'CLICK'}, $zenkaku , $hankaku ); $in{'attach_file'} = &AttachCheck($attach,$attach_name); #ファイルロック開始 if( $lockkey ne "0" ){ &LOCK; } if (!open(IN,"<:utf8","$linkdata_file")) { &ERROR( read_linkdata ); } @BASE = <IN>; close(IN); foreach $data (@BASE) { &LINKDATALIST; if( $in{'editnum'} eq $CNTNUM ){ if( $in{'attach_file'} eq '' ){ if( $in{'CHDEL'} eq '1' ){ $in{'attach_file'} = ''; unlink("$updir/$IMAGE"); }else{ $in{'attach_file'} = $IMAGE; } }else{ unlink("$updir/$IMAGE"); $in{'attach_file'} =~ s/$updir\///g; } $in{'LINKNAME'} =~ s/\,/&%/g; $in{'LINKURL'} =~ s/\,/&%/g; $in{'LINKURL'} =~ s/&amp;/\&/g; $in{'COMMENT'} =~ s/\,/&%/g; $in{'COMMENT'} =~ s/\<br \/\>/!%/g; if( $in{'CLICK'} eq "" ){ $in{'CLICK'} = 0; } $new_data = "$CNTNUM,$datenow,$DATE_LMT,$DATE_ESY,$in{'OPN'},$in{'NEWMARK'},$in{'CATEGORY'},$in{'LINKNAME'},$in{'HONORIFIC'},$in{'LINKURL'},$in{'COMMENT'},$in{'CLICK'},$in{'attach_file'},\n"; }else{ $new_data = "$CNTNUM,$DATE_LINKDATA,$DATE_LMT,$DATE_ESY,$OPN,$NEWMARK,$CATEGORY,$LINKNAME,$HONORIFIC,$LINKURL,$COMMENT,$CLICK,$IMAGE,\n"; } push( @TOTAL,$new_data ); } #実際にファイルに書き込む if( !open(OUT,">$linkdata_file") ){ &ERROR( read_linkdata ); } print OUT @TOTAL; close (OUT); #ファイルロック解除 if( $lockkey ne "0" ){ &UNLOCK; } &SendFinish2; }
OS：Windows7でサーバーはロリポップを使用しております。 Perlのcgiを「utf-8」で保存し、Perl内のhtmlも、「<meta http-equiv="Content-Type" content="text/html; charset=utf-8">」などのutf-8の設定にしていますが、ffftpでutf-8の文字コードで転送すると、「※ＣＧＩ もしくは ＳＳＩ が正しく動作していません。」と表示されてしまいます。 ffftpのホストの設定での、文字コードは「ホストの漢字コード Unicode(UTF-8)」、「ファイル名の漢字コード　Unicode(UTF-8)」にしています。 何パターンか試してみましたが、ffftpの転送時の設定が「Unicode(UTF-8)」だと、「※ＣＧＩ もしくは ＳＳＩ が正しく動作していません。」と表示されるみたいです。 転送時の設定を「ホストの漢字コード 無変換(SHIFT-JIS)」、「ファイル名の漢字コード　SHIFT-JIS」 にすると、cgiは動作します。但し、文字化けします。→　黒い菱形に？マークの文字化け。 どうすれば、上記問題を解決できるでしょうか。 アドバイスをお願いします。 ｍ（＿　＿）ｍ
携帯メールをCGIで受け取って処理するスクリプトを書いているのですが 文字コードの処理について行き詰っています。 $str = " $B$F$9$H (B";　#jisコードで"てすと" として、この文字列をjcode.pmでシフトjisに変換したいのですが $body = Jcode::convert($str, 'sjis'); このようにしても$bodyの中身は" $B$F$9$H (B"のまま変わりません。 MIME::parserでうけとったjisコードの文字列はちゃんと変換されるのでjcode.pmに問題はないと思われますが、 文字列操作をして変数に入れるとMIME::parserで受け取った場合とおなじ内容でもデコードされないとゆう結果になります。 なにか根本的に違うのでしょうか… スペースを省いてみたり $body = Jcode::convert($str, 'sjis','jis'); としてみたりしたのですが まったくダメでした。 ちょっとしたアドバイスだけでもいいのでよろしくお願いします。 あとお金がかかってもよいので、そういった問題を解決できそうなサイトなどがあれば紹介していただければと思います。 よろしくお願いします。m(__)m
お世話になります。 フォームから送られてくるデータを動的に作ったハッシュで参照出来るように取り組んでるんですが、思ったように出来ず思い悩んでおります。 どうすれば、意図した形でデータを取り出すことが出来ますでしょうか my %FORM = ( 'd01' => 'あ', 'd02' => 'い', 'd03' => 'う', 'd04' => 'え', 'd05' => 'お', 'd06' => 'か', 'd07' => 'き', 'd08' => 'く', 'd09' => 'け', 'd10' => 'こ', ); for(sort { $FORM{$a} cmp $FORM{$b} } keys %FORM){ print "$_ = $FORM{$_} \n"; } $list="d01,d02,d03,d04,d05,d06,d07,d08,d09,d10,"; $i=-1; foreach (split/,/,$list){ $i++; $hash{$_}=$i; } for(sort { $hash{$a} <=> $hash{$b} } keys %hash){ print "$_ = $hash{$_} \n"; $view = ${"FORM$_"}; print "$view\n"; }; 最後のprint "$view\n";箇所で、 $list="d01,d02..." を split/,/,$list したので、 $FORM{d01} $FORM{d02} となるようにして、 「あ い う え お」と取り出したいのです。 ご教授のほど、よろしくお願い致します。
お世話になります。 標題のとおりですが、 $ymdに20110517のように日付が指定されます。 この前日を求めたいのですが、コーディングを教えていただけますか。 宜しくお願いします。
現在、Perlでcgiを作成していますが、ページの最上部にヘッダー、ページの両端にメニューや広告、中央にメインコンテンツを配置する3カラム（三段組み）、最下部をフッターにしたいと考えています。 現在、メインコンテンツは完成しております。 cssは、使わないで上記のようなレイアウトをPerlで組みたいのですが、上記にようにしたい場合は、どのように書けば良いのでしょうか？ 横幅全体は800。(ヘッダーとフッターも横幅は800) 左メニュー180、中央メインコンテンツ 440 、右メニュー180 で組みたいと思っています。 お手数をおかけ致しますが、アドバイスよろしくお願い致します。
CGIメールです。 元々shiftjisなので、これをiso-2022-jpに変換させようとしてます。 $charset = "iso-2022-jp"; open(MAIL,"| $sendmail -t") || &error("失敗"); print MAIL "To: <$to>\n"; print MAIL "From: <$from>\n"; &jis("タイトル"); &base64("$msg"); print MAIL "Subject: $str\n"; print MAIL "MIME-Version: 1.0\n"; print MAIL "Content-type: text/plain; charset=$charset\n"; print MAIL "Content-Transfer-Encoding: 7bit\n"; foreach ( split(/\n/, $body) ) { &jis("$_"); print MAIL $_, "\n"; } close(MAIL); sub jis{ $msg = $_[0]; Encode::from_to($msg, "shiftjis", $charset); ####1#### } sub base64 { use MIME::Base64; $str = $_[0]; if($str =~ /[^!-~\s]/){ $str = encode_base64($str, ""); if($charset eq "utf8"){ $str = '=?utf-8?B?' . $str . '?='; }else{ $str = '=?iso-2022-jp?B?' . $str . '?='; } } } このようにしてみたのですが、タイトル部分はきちんと表示されるのですが、ボディー部分が文字化けしてしまいます。（メーラーで手動にてshit-jisにエンコードしたらボディー部分が読めタイトル部分は文字化けする） Encode::from_to($msg, "shiftjis", $charset); の$charsetを"$charset"にしても同じ現象です また、元々参考にしたものでは####1####に retern $msg; があったのですが、これを入れるとsyntax errorになったので、これをコメントアウトしたらエラーにはならず送信そのものはできました ただ目的の文字変換ができないのですが、どこをどう改善すればいいでしょうか。 どうかご存じの方ぜひ教えてください。 よろしくお願いします。
プログラムのアクセスカウンターをするプログラムを作成しましたが、アクセスカウンターのデータが消去されてしまいます。 プログラム抜粋 (ここから) #アクセスカウンターカウント数計上ロジックを入れる $data = ""; open(IN11,"$countcsv") || &error(" countcsv をopen出来ません"); flock(IN11,1); while($lines11 = <IN11>) { ($seq,$acc) = split("\,", $lines11); if ($page == $seq) {$acc = $acc +1; } $data .= "$seq,$acc\n" } close(IN11); open(IN21,">$countcsv")|| &error(" countcsv をopen出来ません"); flock(IN21,2); print IN21 "$data"; close(IN21); (ここまで) count.csvの構成は以下のようになってます。 (ここから) 1,0 2,0 3,0 4,0 5,0 6,0 7,0 8,0 9,0 10,0 (ここまで) カウンターを計測するデータ(行数)が多いと、データが全てなくなってしまいます。 ファイルロックの方法に問題があると思ってますが、どこが悪いのかがわかりません。 ご教授いただけますと助かります。 よろしくお願いいたします。
Perl言語のプログラムで多次元配列について 教えて欲しい。 1.Ｄｅｔａ1（evt.dat）ファイル 2.Ｄｅｔａ２（men.dat）ファイル 多次元配列のＤｅｔａ３（kad.dat）ファイル 縦方向にＤｅｔａ1　　$n(配列順番） 横方向にＤｅｔａ２　 $t(配列順番） 　　　　　　Ｄｅｔａ２　→ Ｄｅｔａ1　　Ｘ0　 　Ｘ1　　 Ｘx ↓　Ｙ0　　Ｚ0,0　　Ｚ1,0 Ｚx,0 　 　Ｙ1　　Ｚ0,1　　Ｚ0,1 Ｚx,1 　　 Ｙx　　Ｚ0,ｘ　 Ｚ0,x Ｚx,x Ｄｅｔａ３には($joi,$com)のデータがある ・プグラム1としいはＺ1,0からＺ0,xまで新規登録 及び変更登録をするプグラム ・あと一つのプグラム2はＺ0,1の変更登録をするプグラム 表示プグラムは不要です。 open(FILE, "$kad_file"); @joi=<FILE>; close(FILE); foreach ($joi,$com) この間のプグラムを教えて欲しい。 　・プグラム1 　・プグラム2 　 open(FILE, ">$kad_file"); print FILE @joi; close(FILE);
投票cgiを作成していますが、以下のPerlでは、同一IPから1日１回の投票しかできません。 同一IPからの投票を１日連続５回まで許可する仕組みにしたいと考えています。（６回目以降は単にカウントされないだけで警告等は出さない） 以下のPerlをどのように改造すれば良いか具体的にアドバイスを頂けると大変助かります。 かなり専門的な内容で恐縮ですが、困っておりますので、何卒よろしくお願い致します。 ｍ（＿　＿）ｍ --------------------- # IPアドレスのチェック sub IpCheck { if (!-e $iplog) { &TimeLog; } $last = (localtime((stat($iplog))[9] + $jisa))[3]; $today = (localtime($nowtime))[3]; if ($last != $today) { unlink($iplog); &TimeLog; } open(TLOG,"<$iplog"); @IP = <TLOG>; close(TLOG); $l = 0; foreach (@IP) { $_ =~ s/\r|\n//g; if ($_ =~ /^$addr/) { &NoCnt; } elsif ($l == $#IP) { if (!open(RTIP,">>$iplog")) { &Error(4); } print RTIP "$addr\n"; close(RTIP); &CNTUP; } $l++; } } sub TimeLog { if (!open(TIME,">$iplog")) { &Error(5); } print TIME "$addr\n"; close(TIME); chmod(0666,$iplog); &CNTUP; } #------------------------------------------------- # クリックカウントアップ sub CNTUP { #ファイルロック開始 if( $lockkey ne '0' ){ &LOCK; } if (!open(IN,"$linkdata_file")) { &ERROR( read_linkdata ); } @BASE = <IN>; close(IN); foreach $data (@BASE) { #データリスト読込 &LINKDATALIST; if( $in{'targetno'} eq $CNTNUM ){ $COUNTERUP = $CLICK + 1; $targeturl = $LINKURL; $new_data = "$CNTNUM,$DATE_LINKDATA,$DATE_LMT,$DATE_ESY,$OPN,$NEWMARK,$CATEGORY,$LINKNAME,$HONORIFIC,$LINKURL,$COMMENT,$COUNTERUP,$IMAGE,\n"; }else{ $new_data = "$CNTNUM,$DATE_LINKDATA,$DATE_LMT,$DATE_ESY,$OPN,$NEWMARK,$CATEGORY,$LINKNAME,$HONORIFIC,$LINKURL,$COMMENT,$CLICK,$IMAGE,\n"; } #ファイルの最初にデータを保存する push( @TOTAL , $new_data ); } #実際にファイルに書き込む if (!open(NOTE,">$linkdata_file")) { &ERROR( read_linkdata ); } print NOTE @TOTAL; close(NOTE); #ファイルロック解除 if( $lockkey ne '0' ){ &UNLOCK; } #HTML出力 print "Location: $targeturl\n\n"; exit;
ある、複数行の文章内に散在する 最低4桁以上の金額を全て抽出するには？ 例えば \#### \####- ####円 と、それぞれ3桁を「,」で区切った数値を金額とみなす場合 1度のパターンマッチで、 上記3つのバリエーションとカンマ付き全種の 不純物が入らない厳密なパターンを記すことは、できますでしょうか？ 追記、 以下のような場合は金額とみなしません。 ####(金額に関する記号が前後に付かないため) ####-(頭に\が足りないマイナス単独なため) ###(3桁しかないため) # ###(数値の間の区切りがカンマ以外のため)
perl, v5.8.6で、Perl/Tkを利用した環境です。 従来は、Windows-XP(x32）で利用していて、特に問題なかったのですが、 同じ環境をWindows7（x32）に導入して利用しようとしたところ、 Menu メソッド呼び出しのところで、ちょうど Devel::peekのdumpで表示させた ような内容のものが、DOSプロンプト上に出てしまいます。 ↓こちらの記事（英文）に書かれていることも試してみましたが、解決できませんでした。 http://community.activestate.com/forum-topic/per … Windows7だからということではなさそうですが、 この表示が出てしまう原因、出さなくする方法について、教えてください。 何かご存知の方、よろしくお願い致します。 サンプルスクリプト： test.pl ----------------------------- use strict; use Tk; my $mw = MainWindow->new(); my $menu = $mw->Menu(); MainLoop; ----------------------------- このスクリプトをWindows7環境上で実行すると、 MainWindowのダイアログは画面に正しく表示されていますが、 DOSプロンプトで、下記のメッセージも出てしまいます。 ⇒４行目（my $menu = $mw->Menu();）をコメントアウトするとこの表示は出ません。 ----------------------------- C:\Perl\Tk\Win7>test.pl @ 535 not utf8 SV = PV(0x3d4f9d0) at 0x3d53870 REFCNT = 2 FLAGS = (POK,pPOK,UTF8) PV = 0x3d0d9e4 "\203\201\203C\203\212\203I 9"\0 [UTF8 "\x{c1}C\x{c3}C\x{ca}\x{283}\x{c9}I 9"] CUR = 10 LEN = 11 SV = PVMG(0x214bf74) at 0x3d53870 REFCNT = 2 FLAGS = (SMG,POK,pPOK,UTF8) IV = 0 NV = 0 PV = 0x3d0d9e4 "\203\201\203C\203\212\203I 9"\0 [UTF8 "\x{c1}C\x{c3}C\x{ca}\x{283}\x{c9}I 9"] CUR = 10 LEN = 11 MAGIC = 0x3d5d5a4 MG_VIRTUAL = &PL_vtbl_utf8 MG_TYPE = PERL_MAGIC_utf8(w) MG_LEN = 10
配列の配列について教えてください。 以下のようなテキストから値を取得し、A,B,Cの値をそれぞれ別の配列に格納し、A,B,Cの平均値を出す処理を行っているとします。 ----- A=100 B=200 C=300 A=110 B=210 : ----- 現状、以下のような状態です。 @arrayA=(); @arrayB=(); @arrayC=(); ： (テキストを読み込み) ： ・読み込んだ行がA=XXXならarrayAにpush push(@arrayA,"100"); ・読み込んだっ行がB=XXXならarrayBにpush push(@arrayB,"100"); ： (各配列の要素の平均値を出す) このやり方だと、グループが増えるとそのまま行数が増えて冗長なので、グループごとの配列を１つの配列にまとめたいのです。 Webで初期値を入れた形で説明しているのはよくみるのですが、今回のように空の配列に値をいれていくにはどうすればよいのでしょうか？(そもそも宣言の仕方もわかりません)。 また、配列の配列？とした場合、以下のような処理はできるのでしょうか？ (1)配列の１つ目の要素(の配列)にpushする(現状でのarrayAにpushに該当) push(@arrayAll[0],"test");
おそれいります。 親プロセスから子プロセスを複数呼び 子プロセスが全て終わった後に次の手順に移行する。。。という処理をflockを使って作っているのですが、 うまくいきません。 下の「main.pl」を実行すると、「lock.pl」を10回呼び出して、 すべて終了したら「OK」と表示したいです。 lockというファイルを全部のプロセスで共有して、 子の全部の処理が終わった時点で、mailにロックが移る。。。という動きを想定したのですが、 なぜか、数回実行しているとMAIN LOCK(1)　が最後に発動しているにもかかわらず、 子プロセスが終了していないのに「OK」の表示を出してしまいます。 flockは順番を守らないのでしょうか・・・・？？？？？ どのようにしたらうまく動くでしょうか。。。。 ==> main.pl <== #!/usr/bin/perl use Fcntl ':flock'; for (1..10){ system("./lock.pl $_ &"); } sleep 5; # 子プロセスが開始するまで待つ print qq("MAIN LOCK\n"); # ... (1) open LC,"+<lock" or die; flock LC,LOCK_EX; sleep 1; print qq("OK\n"); ==> lock.pl <== #!/usr/bin/perl use Fcntl ':flock'; print qq(lock $ARGV[0]\n!); # ... (2) open LC,"+<lock" or die; flock LC,LOCK_EX; sleep $ARGV[0]; print qq(release $ARGV[0]!\n);
Perlで以下の通り、 htmlファイルを全て読み込んだ後に正規表現を当てたいのですが、うまくいきません。 恐縮ですが、原因をご存知の方いらっしゃいましたら教えて頂けませんでしょうか。 また、他に良い解決方法がありましたら教えて頂けると幸いです。 ※PC環境はwindows7, perl5.12です。情報に不足がございましたらご指摘下さい。 ----- #--test.html(左側の数字は行数) 000001 <dl> 000002 <dt>aaa</dt> 000003 <dd>12345</dd> 000004 </dl> （中略） 120001 <dl> 120002 <dt>bbb</dt> 120003 <dd>6789</dd> 120004 </dl> #--test.pl open IN , "test.html"; local $/ = undef; $data = <IN>; close IN; $data =~ s|<td>bbb</td>|<td>ccc</td>|; print "$data\n"; ----- ファイルの始めの方だと当たるのに、後半では当たりません。 正規表現の対象として大きすぎるんでしょうか・・・。 $data =~ s|<td>aaa</td>|<td>ccc</td>|; は、当たりますが $data =~ s|<td>bbb</td>|<td>ccc</td>|; だと当たりません。 どうぞよろしくお願いいたします。
本日、同じ質問をしたものです。 前回の問題は解決したのですが、ファイルがアップロードできないで悩んでします。 ＣＧＩのプログラムは以下のソースです。 #! c:/perl/bin/perl use CGI; #　CGIヘッダーの出力 print "Content-type: text/html\n\n"; my ($query,$fileName); $query = new CGI; $fileName = $query->param('fileName'); open(OUT, ">./a.csv"); binmode(OUT); while(read($fileName,$buffer,1024)) { print OUT $buffer; } close(OUT); close($fileName); #ファイルハンドルをcloseしています。 exit ; ファイルは、作られるのですが、中身が書き込まれません。 どなたか教えてください。 お願いします。
perlでＣＳＶ形式ファイルのアップロード方法を教えてさい。 htmlで <HTML> <BODY> <FORM action="excel読み込み.cgi" enctype="multipart/form-data" method="post"> フレアシステムのファイル: <INPUT type="file" name="upload_file" size="60"><BR> <INPUT type="submit" value="読み込み"> </FORM> </BODY> </HTML> として、ファイル名の指定をして、読み込みボタンを押すと、excel読み込み.cgiを呼び出すのですが、プログラムの内容が表示されるだけで終わってしまいます。 excel読み込み.cgiのプログラムは以下の内容です。 #! c:/perl/bin/perl use CGI; $query = new CGI; $filename = $query->param('upload_file'); while(read($filename, $buffer, 2048)) { $file .= $buffer; } @files = split(/\\/, $filename); ($basename, $exp) = split(/\./, $files[-1]); $new_file = $basename . "." . $exp; # ファイルを指定ディレクトリにコピー #open(OUT, "> c:\\foo\\$new_file"); open(OUT, "> c:\\$new_file"); binmode(OUT); print(OUT $file); close(OUT); print "Content-type: text/html\n\n"; print "[$basename] [$exp]\n"; print "正常終了\n"; exit; CGIのプログラムを色々と調べて、別のないようにしても同じようにプログラムがそのまま表示されてしまいます。 どなたか教えてください。 宜しくお願いします。
Perl初心者です。 「Learning Perl」（オライリー社、第５版）を勉強中なのですが、４章の練習問題３でつまずいています。 #!/usr/bin/perl use strict; sub total { my $sum; foreach (@_) { $sum += $_; } $sum; } sub average { if(@_ == 0) {return} my $count = @_; my $sum = total(@_); $sum/$count; } sub above_average { my $average = average(@_); my @list; foreach my $element (@_) { if($element > $average) { push @list, $element; } } @list; } my $average = average(100, 1..10); print "\$average = $average\n"; my $barney = above_average(100, 1..10); print "\$barney = $barney\n"; とやったのですが、結果が $average = 14.0909090909091 $barney = 1 となってしまいます。 （$averageの値は正しいのですが、$barneyの値が100となってほしいのに、１になってしまっています。） すみませんが、識者の方、どこが悪いのか、ご教授お願いします。
お世話になります。 くじのプログラムを書いていますが、 ４桁の番号のくじを引いて貰い、 毎回数人ずつ抽選します。 当選者を選ぶところで教えて欲しいのですが、 例えば、0100　2455　4782　といった３個が当選となったときの 命令です。 if ($kekka =~ /[0100][2455][4782]/){ とやったのですがダメでした。 [　]の中は１桁しかダメなのでしょうか。 ここら辺が分かっていません。 正しい書き方を教えてください。 宜しくお願いします。
perl初心者です。RSSを取得してタイトルや内容をhtmlに吐き出すというプログラムを作成しています。Xサーバーで指定時間に指定コマンド（プログラム）を自動的に実行させるサーバーの機能（cron）といものがあったのでマニュアル　 http://www.xserver.ne.jp/man_program_cron.php を見て自動更新しようと試みているのですがプログラムが実行されません。 hello.cgiというプログラムを実行しようとしているので マニュアルにある絶対パスの記入例の通り /home/●●●/▲▲▲/public_html/hello.cgi とXサーバーのCron設定で記入しています。自動更新の時間になったら「Cron結果の通知アドレス」で設定したメールは届くのですがプログラムは実行されてません。 cronの機能を使う際perlのほうで（ここではhello.cgi）何か記述する必要があるのでしょうか？もしくは何かモジュールとか必要なのでしょうか？ ps. cron以外でもperlのプログラムを自動的に動かす方法があったら教えて下さい。宜しくお願いします。
早速ですが、 ”１５日分”のように始まるフィールドを持つレコードがあります。 このレコードを抽出基準日付（２桁、例えば”09”）で抽出したいのですが、 抜きたいレコードの日付は１桁の時には前にゼロがありません。 （例えば　”９日分”の如く） どのように考えればよいでしょうか。 抽出基準日付の２桁を１桁にするということは別の理由で出来ません。 宜しくお願いします。
perlでCSVファィルの加工するプログラムを作ろうと思っております。 プログラム初心者な為どれから手を付ければ良いのか 判りません。 宜しければ　サンプル等作っていただければありがたいです。 １．指定されたフォルダの中の 最新更新日付のファイルを読み込みむ ２．5分置きに可変CSVで出力されるデータを出力を 10分単位の固定CSVへ出力する ３．出力の際には以下の固定数字、時間、文字、数字等を入れ 加工した上で固定系CSVの出力をしたいです。 ・固定の数字20450△△△, ・固定の数字 01, 　 ・年月日時間　　　　YYMMDDhhmm, ・固定数字 01, ・固定文字 TP, ・固定数字 01, ・固定文字 +か-, 　元データが△△△19.2の場合は+を出力　　-19.2の場合は-を出力　 　4カラム目を19.5 の場合△△195 ・固定文字 TA, ・固定数字 01, ・固定文字 +か-, 　元データが△△△12.2の場合は+を出力　　-12.2の場合は-を出力　 　4カラム目を19.5 の場合△△195 入力のファイル名　20110301.csv ファイルの中身 17549,2011/3/25,0:00:00,19.5,12.2 17550,2011/3/25,0:05:00,19.6,12.2 17551,2011/3/25,0:10:00,19.5,12.2 17552,2011/3/25,0:15:00,19.5,12.2 17553,2011/3/25,0:20:00,19.4,12.2 17554,2011/3/25,0:25:00,19.4,12.2 17555,2011/3/25,0:30:00,19.4,12.2 17556,2011/3/25,0:35:00,19.3,12.2 17557,2011/3/25,0:40:00,19.3,12.2 17558,2011/3/25,0:45:00,19.2,12.2 17559,2011/3/25,0:50:00,-19.2,12.2 ↓ 出力のファイル名　10_200203.dat 20450 , 01,201103250010,1,TP,1,+ 195,TA,1,+ 122 20450 , 01,201103250010,1,TP,1,+ 195,TA,1,+ 122 20450 , 01,201103250020,1,TP,1,+ 194,TA,1,+ 122 20450 , 01,201103250030,1,TP,1,+ 194,TA,1,+ 122 20450 , 01,201103250040,1,TP,1,+ 193,TA,1,+ 122 20450 , 01,201103250050,1,TP,1,+ 192,TA,1,+ 122
初めて記載します。宜しくします。 perlでプログラムするのが初めてでなので、大分間違ってるかもしれません。 ※UNIX環境でシェルで日付差分(yyyymmddhhmmss)を求めたいのですが、「date -d」コマンドは使用出来ません。 シェルを実行しコマンドラインにて入力された【引数1】：実行区分(1 or 2)【引数2】：日付(yyyymmddhhmmss)、【引数3】：日付(yyyymmddhhmmss)と区分をperlに引数として渡して、perlでは"引数3-引数2"をして日数を算出しファイルに出力させたいです。 perl名：MCPFZAR_Compl.pl 実行コマンド例： perl MCPFZAR_Compl.pl 1 20110302000000 20110306000000 以下にperlのプログラムを掲載します。 #!/opt/perl/bin/perl ⇒入力パラメータチェック実行 # 日付1を年、月、日、時、分、秒に切り分け $L_Year = int(substr($ARGV[1],0,4)); $L_Mon = int(substr($ARGV[1],4,2)); $L_Day = int(substr($ARGV[1],6,2)); $L_Hour = int(substr($ARGV[1],8,2)); $L_Min = int(substr($ARGV[1],10,2)); $L_Sec = int(substr($ARGV[1],12,2)); # 取得日付チェック関数を実行する。 ($L_Ret, $L_Ret_Msg) = &MCPFLCF_DayExists($L_Year, $L_Mon, $L_Day, $L_Hour, $L_Min, $L_Sec); # 異常終了した場合 if( $L_Ret != 0 ){ # エラーを返却する。 return ($L_Error_End, "$L_Err_MSG_4 [$L_Ret_Msg]"); } # 日付1を秒に変換 $L_Time1 = timelocal($L_Sec, $L_Min, $L_Hour, $L_Day, $L_Mon - 1, $L_Year); ⇒同様に日付2も変換 # 日付1と日付2の差分を取る。 $L_TimeRet = ($L_Time2 - $L_Time1); # ファイルに書き込む為に、ファイルopenしてから書込み open (OUT,"> $outfile"); # 結果形式種別が1の場合 if($ARGV[0] == 1){ # 結果を日数で参照渡しする。 $L_LET = int($L_TimeRet / (60 * 60 * 24)); print OUT "$outfile"; } # 結果形式種別が2の場合 elsif($ARGV[0] == 2){ # 結果を秒で参照渡しする。 $L_LET = $L_TimeRet; print OUT "$outfile";; # CLOSEする close(OUT); シェルを実行すると、エラーにはなりませんが ファイルの出力もされません。 かなりどうしたらよいかわからない状態なので回答宜しくお願い致します。 足りない情報がありましたらご教授願います。
いつもお世話になります。 現在、jperlを使用し、 あるフォルダ内の中にあるサブフォルダをlaplusを使用し コマンドラインから圧縮をかけるというスクリプトを作成しております。 そこで、下記ロジックを実行するとエラーになります。 【ロジック】 　$cmd = "\"c:\\Program Files\\Lhaplus\\Lhaplus.exe\" /c:lzh 　 o:\"C:\\Users\\testtaro\\Documents\\LAPLUS_TEST\" 　 \"C:\\Users\\testtaro\\Documents\\LAPLUS_TEST\\2011-03-11(0100)\""; 　system($cmd); 【エラーメッセージ】 　'c:\Program' は、内部コマンドまたは外部コマンド、 　操作可能なプログラムまたはバッチ ファイルとして認識されていません。 「$cmd 」の内容をデバック出力しそれを直接コマンドプロンプトで実行すると 正常に圧縮されます。 おそらく「Program Files」の半角スペース内で切れてしまっているのだと思いますが、 ダブルクォテーションでくくるやり方が間違っているのでしょうか。 超初心者の質問で大変申し訳ありませんが宜しくお願いします。
プログラムの学習を始めようと思いますが、MySQL・CGI/Perl言語を学ぼうと思っております。 そこでどの言語から始めたらいいのか？お薦めの書籍はどんな物か等など教えて頂きたいです。 学びたい言語とは異なりますが以前、やさしいJava第2版で学習していましたが、中盤以降から何故この機能が必要なのか？また具体的にどういった場面で使用するのかが書かれてなく只やり方しか書かれてなく、挫折してしまいました。 時間が出来た事もありまして最近になって又興味を持ち始めたので、どの言語からの学習がいいのか、 そしてお薦めの書籍（どういった場面で使用するプログラムか具体的に書かれている等）がありましたらよろしくお願いします。 最終的にはCGIプログラムからデータベースにアクセス？してデータの追加・削除、不特定多数の方が出来るログイン機能等の作成（簡単に言えば通販サイトの仕組や、よくあるCGIゲームの様な代物）到達するくらいのレベルが目標です。
Perlで月盤の60進数を作って頂きたいんです。 西暦2008年12月=1 西暦2009年1月=2 西暦2009年2月=3 ・・・ 西暦2013年11月=60 アルゴリズムを教えてください。 宜しくお願い致します。
http://www.plusmb.jp/2008/10/03/444.html こちらのページを参考にvpopmailを使って空メールの自動返信プログラムを作ってます。 固定のメールアドレス(hoge@hogehoge.jp)では問題なく出来たのですが、引数を絡めて処理する必要(hoge_hige1@hogehoge.jp※hoge1は引数)が出てきたため、そのように拡張したいのですが、どういう風にプログラムに流していいかわからず困っています。 まとめると hoge@hogehoge.jpで空メール送信⇒hoge.plを起動⇒hoge.plで送られてきたアドレスに返信 はできるのですが、 hoge_hoge1@hogehoge.jpで空メール送信⇒hoge1があるためhoge.plを起動できない ということです。 小さなことでもかまわないのでよろしくお願いいたします。
以下のPHPソースをPerlで書き直したいのですが、Perlのコンストラクタがイマイチわからないので どなたかご教授ください。 可能であれば以下のソースのperlバージョンを記載して頂けると幸いで御座います。 ○呼び出し側 ・index.inc require_once('common.inc'); require_once('db.inc'); class index { 　　　　var $objCommon= ''; 　　　　var $objDB= ''; 　　　　function index() { 　　　　　　　　$this->objCommon = new common; 　　　　　　　　$this->objDB = new db("mysql"); 　　　　} 　　　　function main() { 　　　　　　　　//DB接続 　　　　　　　　$db_connect = $this->objDB->connect(); 　　　　　　　　//DBから値を取得 　　　　　　　　$data = $this->objDB->sample($db_connect); 　　　　} } ○呼び出される側 ・db.inc class db{ 　　　　var $db_dsn_type; 　　　　function db_wrap($db_type){ 　　　　　　　　$this->db_dsn_type = $db_type; 　　　　　　　　$this->objCommon = new common; 　　　　} 　　　　各function } ・common.inc class common{ 　　　　各function } ※コンストラクタなし
$_ = [ [1, 2, 3], [4, 5, 6], [7, 8, 9] ] 例えばこのような2次元配列からリスト(2, 5, 8)を一発で取る式はありますか イメージ的には、 $$_[0, 1, 2]->[1] のようなことをしたいのですが・・・
perlの初心者です。下記のCGIを実行しましたが、全く表示しません。 最初の「環境変数」と言う文字も表示しません。 どこか初歩的なエラーがあると思いますが、わかりませんので質問させていただきます。 --- #!/usr/local/bin/perl print "Content-type: text/html", "\n\n"; print "<HTML><BODY>", "\n"; print "<H1>環境変数</H1><HR>", "\n"; foreach my $key( keys %ENV ){ print "$key: $ENV{$key}<BR>", "\n"; } print "<HR>", "\n"; print "</BODY></HTML>", "\n";
PerlCGIのデコードでつまづいています。ｊcode.plで$valueの値を「%E3%81%BF%E3%81%AE%E3%82%8A%E5%8F%B0」から「みのり台」の日本語に変換しようとしたのですが「%E3%81%BF%E3%81%AE%E3%82%8A%E5%8F%B0」が返されてうまくいきません。申し訳ありませんが知恵を貸して頂けないでしょうか、よろしくお願い致します。 #!/usr/bin/perl require './jcode.pl'; #デコードするためのプログラム # プラウザからのデータ取込み #if ($ENV{'REQUEST_METHOD'} eq "POST") { # read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'}); #} #else { $buffer = $ENV{'QUERY_STRING'}; #} # プラウザからのデータ変換 #$i = 0;　#※２ @pairs = split(/&/,$buffer); foreach $pair (@pairs) { #１行毎に$name,$valueを取り出す ($name, $value) = split(/=/, $pair); # 変換演算子　tr　+　を　スペースに置き換え # $value =~ tr/+/ /; # 変換演算子　s/// 単語の構成文字にマッチ # $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg; # " を &quot; に変換 # $value =~ s/"/&quot;/g; #\n を "" に変換 # $value =~ s/\n//g; print qq( 　 <tr><td>やった</td></tr> 　 ) , "\n"; # jcodeでデコードがうまく出来ませんでした。 # 日本語に変換(デコード処理部分) &jcode'convert(*value,'sjis'); &jcode'convert(*$name,'sjis'); # $FORM{$name} = $value; #※１ # @num[$i]=$value; #※２ # $i=$i++; #※２ # $str = decode('shiftjis', $value); # $value = encode('shiftjis', $str); } @varuee = split(/&*q=/,$ENV{'QUERY_STRING'}); print qq( 　 <HTML> 　 <HEAD> 　 <TITLE>画像の検索結果</TITLE> 　 </HEAD> 　 <BODY bgcolor="#FFFFFF"> 　<H2 align="center">画像データベースの検索結果</H2> 　<!--画像の検索結果を２～３件ためしに表示--> 　<BR> 　 <hr> 　 <CENTER> 　 <table> ); print qq( 　 <tr><td>$value</td></tr> 　 ) , "\n"; exit;
たとえば、ショッピングサイトのオーダーフォームなどで、 お客様情報（氏名、発送先住所、決済方法）を入力してもらい、「注文確定」ボタンを押す。 このとき、「決済方法」で「銀行振り込み」が選択されていたら、次に起動する画面は「終了画面」。 「クレジットカード決済」が選択されていたなら、合計金額などの情報をPOSTしてクレジット決済代行会社の決済ページを起動する。。 ということは可能なのでしょうか？ Perlでなら、そのような分岐処理は実現可能でしょうか？
Perl my $fhandle = $query ->upload('A'); HTML <INPUT TYPE="HIDDEN" VALUE="C:\temp\1.txt"/> ボタンクリックで、JavaScriptでHTMLのhiddenに値をセットしています。 その値をPerlでuploadすると、値がセットされません。 <INPUT TYPE="FILE" で、手動でセットすると上手くいきます。 なんんとかHIDDENでできないでしょうか？ FILEでしか駄目な場合、JavaScriptで、FILEにセットする方法をご教授下さい。 今、現状はIFRAMEでFILEで選択したファイルパスをボタンクリックで、メインのFORMのHIDDENに渡して、CGIを呼んでいます。
早速ですが、 覚えたことをメモ（形式は普通の日本語テキスト）しており、 あとから検索でキーワードを与えると該当の文章を抜き出し表示するようなcgiを作っています。 基本的には上手く行くのですが、漢字をキーワードに入れると抜き出せるときと、抜き出せないときがあります。 抜き出しは此処で教わった、 if($target =~ m/$key/i) {実行rtn を使っています。 どのような対処が必要でしょうか。 理由と対処法を教えてください。 宜しくお願いします。
対象サイトの内容を取得するCGIを構築したいのですが、うまくいきません。 対象サイトがJavascript中心に構成されているせいでしょうか。 原因の判る方、どうかご教示願います。m(__)m #!/usr/bin/perl use LWP::Simple; my $html = get("http://jun.sakura.ne.jp/~dk3/result/result225.ht …); #相対指定部分の置換 $mae = '\.\./'; $ato = 'http://jun.sakura.ne.jp/~dk3/'; $html =~ s|$mae|$ato|g; print "Content-type: text/html\n\n$html\n";
お世話になります。 Perl の OLEを使用して、エクセルの解析を行なっています。 そこで、エクセルの１つのセルに入っている文字の赤色の部分だけを取得したいと思います。 、 例えば、そのセルには [ わたしは　チョコレート　が好きです ]　と書いてあり、 「チョコレート」が赤、その他は黒で書かれています。 それらのようなセルがＡ列に１０行あり、 赤い部分の文字だけPerlのOLEで取得したいのですが、うまくいきません。 試しに ColorIndex　を使用してみたのですが、取得できませんでした。 どなたかご存知の方がいらっしゃいましたら、方法をご教授いただけませんでしょうか。 よろしくお願いいたします。
教えてください。 例えば、perlの次の様な要素が３つある配列で、 @t = ('A',,'C'); 2要素目が空で有ることを判別したいのですが、どうしたら良いでしょうか？
WinXP　SP3,IE8を使っています。 この環境で、クッキーを自動削除するアプリを作りたいのですがうまくいきません。 どの様にすればいいでしょうか？ ちなみに、PERL下記スクリプトを作って見ましたが、 opendir(DIR, "C:/Documents and Settings/main/Local Settings/Temporary Internet Files/"); @dirs = readdir(DIR); closedir(DIR); open(F,">>filenames.txt"); print F join("\n",@dirs); close(F); 出力結果を見ると、 . .. AntiPhishing Content.IE5 Content.MSO Content.Word desktop.ini gegl-0.0 となっており、削除するためのファイル名すら取得できずお手上げ状態です・・・ どなたか、詳しい方教えて頂けないでしょうか？ 宜しくお願い致します。
下記のPerl正規表現ですが、どんな意味か分かるでしょうか？ $var =~ s!/([^/]+|~(\.\.))/\.\./!/!g 参考書も読んでみたのですが分かりませんでした（セットされている文字列にどんなマッチング、置換をしているのでしょう） お分かりの方いれば、よろしくお願いします。
(1)Perl(cgi)から(2)Perl(cgi)へ引数（データ）を渡す方法を教えてください。 プログラムの流れとしましては、 (1)：データベースを検索＆該当結果の番号をリンクで表示 (2)：(1)でクリックしたリンクと対応する結果を表示 となっております。 また、セキュリティの事を考えて「POST」で送りたいと考えています。 よろしくお願いいたします。
パールのプログラムを作成して拡張子「.pl」で保存するとアイコンがパールのマークになりますよね。 プログラムファイルにデータファイルをドラッグすると、プログラムファイル（拡張子.pl）のアイコンが白黒反転して、目的の加工データをファイルとして出力するプログラムがるのですが、プログラムを作成したパソコンともう一台しか動作しません。他のパソコンでは、プログラムファイルにデータファイルをドラッグしても、プログラムファイル（拡張子.pl）のアイコンが白黒反転せず、パールプログラムが動作しません。 どこの設定をどのように変更すればいいのでしょうか。（プログラムファイルのアイコンを白黒反転させるにはどうしたらいいのでしょうか。） コマンドプロンプトでパスが通っているか確認をしたのですが、どのパソコンもパスは通っています。 プログラムの動作するパソコンの「システム環境変数のpathとPATHEXT」をプログラムの動作しないパソコンにコピーペーストしてもNGでした。 ※perl.exeが入っているディレクトリは同じにしています。プログラムファイとデータファイルをperlフォルダに入れても駄目でした。 　OSは、Windows　XPです。
以前も問い合わせさせていただいた件なのですが、 未だ解決していないので、再掲させていただきます。 やりたいことは、 個人認証のページを作り、ログオフ後、ブラウザの戻るボタンを押しても、 ログイン中となるのを避けたい。 以下のような感じで、cookieを使って実現しようとしているのですが、 ログオフ時にcookieの削除は、うまくいったのですが、 ブラウザの戻るボタンでログイン中のページに戻ると、 $ENV{'HTTP_COOKIE'}の中身を見ると、実際にはCookieは削除されているにも関わらず、 Cookieの情報がよみこまれているため、ログイン中となってしまいます。 何か基本的なやり方を間違っているような気がします。 どなたかご教授願います。 ↓a1.cgi（ログイン画面）-------------- 　： （ID、パスワード認証後） #Cookie書き込み print "Content-type: text/html\n"; print "Set-Cookie: NAME=aaa; expires=Tue, 1-Jan-2030 00:00:00 GMT;\n"; print "\n"; 　： ↑a1.cgi（ログイン画面）-------------- ↓a2.cgi（ログイン中）-------------- 　： #Cookie読み込み $cookie01 = "$ENV{'HTTP_COOKIE'}\n"; 　： <HEAD> <!-- キャッシュクリア --> <meta http-equiv="Pragma" content="no-cache"> <meta http-equiv="Cache-Control" content="no-cache"> <meta http-equiv="Expires" content="Thu, 01 Dec 1994 16:00:00 GMT"> 　： </HEAD> 　： ↑a2.cgi（ログイン中）-------------- ↓a3.cgi（ログオフ）-------------- 　： #cookie削除。 print "Content-type: text/html\n"; print "Set-Cookie: NAME=aaa; expires=Fri, 31-Dec-1999 23:59:59 GMT;\n"; print "\n"; 　： </HEAD> 　： ↑a3.cgi（ログオフ）-------------- ※a1.cgi、a2.cgi、a3.cgiは同じディレクトリです。 よろしくお願いします。
アップロードするファイルを指定して同じファイル名で拡張子を変えてログを出力したいのですが、半角カナなどがあると化けたファイル名になってしまいます。 どう変換すればよいのでしょうか？
お世話になります。 現在perlを勉強しているのですが(ActivePeal5.12.2) コマンドプロンプトから test.pl > test.log と実行した場合、test.pl内で標準出力した文字列がtest.logにリダイレクトされますが test.pl内で ～die "ERROR～"とした場合、"ERROR～"はtest.logに出力されません。 これを簡単にtest.logに出力する方法はないでしょうか。 リダイレクトせず実行した場合、画面に出力されているのでリダイレクトすればそのまま良いと思っていたのですが・・
以前、ORACLEにアクセスする方法で悩んでいたものです。 結局、ORACLEを直接アクセスすることをあきらめてACCESS経由にしました。 自分のパソコンでCGIと同じフォルダにACCESSのDBを作って試験しました。 この環境では、成功しました。 そこで、ACCESSのDBをファイルサーバー上（色々なPCからアクセスさせるため）に おいて、同じことをしようとしましたら、DBへCONNECTできなくなりました。 ホスト名やポート番号はあっています。 何か他に必要なことがあるのでしょうか？ どなたか教えていただけないでしょうか？ 宜しくお願いします。
お世話になります。 現在、perlの勉強中です。 状況は　mac osx 10.6.6です。 使用参考書は「perl言語プログラミングレッスン[入門編]」です。 CGIは関係なしで行っております。 open関数について参考書を読みながら、 勉強をしているのですが、openでファイルをオープンするときについてなのですが、 参考書上では、「関数openは、指定されたファイル名を持つファイルをハードディスクから探し出し、オープンしようと試みます」と言う説明があるのですが、 今現在、試している文例では、特定の場所にファイルがあるときでないと、 オープンしてくれません。 文例は [test.pl] use strict; use warnings; my $filename = 'file.txt'; open(FILE, $filename) or die "$filename: $!"; while (my $line = <FILE>){ $line =~ s/ /_/g; print $line; } close(FILE); という形で、ファイルの " " (スペース)を抜き出して "_" （アンダースコア）に置き換えるという設問です。 ただ、現況は　　　　　　　　　　　　　　　　　 /Users/(myname)/Documents/test/test.pl　＃(myname)は私の名前のフォルダです。 にあるコードをターミナル上で実行すると、 /Users/(myname)/file.txt に配置しているときしか、読み込んでくれません。 そこから、ファイルを移動させてしまうと、 読み込んでくれないのです。 そこで、ご質問ですが、 １ 「関数openは、指定されたファイル名を持つファイルをハードディスクから探し出し、オープンしようと試みます」 と参考書に記載がありましたが、実際には探し出しはしてくれないのでしょうか？ それとも、自分のパソコン、コードに問題があるのでしょうか？ ２ 自分が指定した場所にあるファイルをオープンするには どのようにすればよいでしょうか？ ターミナルで指示するのか、それともコードに加えるべきか、 ご指示くださいませ。 また、詳しい方がおられましたら、 お答えいただければと思います。 それでは失礼します。
perl でファイルを開きたいのですが、なぜか開けません。何がいけないのでしょうか？エラーは、 Name "main::file" used only once: possible typo とでます。エラーを見るかぎり、コードに間違いはなく、apacheかOSに何か原因があるのではないかとおもうのですが、悩んでいます。OSはubuntuです。 #!/usr/bin/perl -w open (IN, "<test.txt") or die ("Could not open $file: $!"); while(<IN>) { print "$_"; } close (IN);
本日、DBI－＞CONNECTで返ってこないと質問をしたものです。 色々と調べているうちに、もしかしたらDBアクセスはおわり、その後のCGIが表示できなくなっているかもしれないと思うようになりました。 ORCLE9iがあるあとで、PERL,Apacheをインストールしました。 DBアクセスをしない状況ですと、CGIのプログラムは何の問題も無く、動きます。 ただ、DBアクセスしようとするとエラーもでない状況で、画面に何も出ません。 ApacheのORACLEに関する環境設定が必要なのでしょうか？ 環境は、Windows　XP 　　　　　Active　Perl 5.8.7.813 　　　　　　　DBI 1.602 ,DBD-Oracle 1.17 　　　　　Apache 2.0.54 どなたか、わかる方いらっしゃいますでしょうか？ この件で２日悩んでおります。 宜しくお願いします。
perlでプログラムを作成しています。 作成後、複数の人にプログラムを配るために、実行体の形式にしたいと思います。 PARを使えば、できそうと聞いたのですが、具体的にどのようにすればいいかわかりません。 どなたかご教授願えないでしょうか？ 宜しくお願いいたします。
active perlでdbi-connect処理から戻ってきません。教えてください。 以下のテスト的なプログラムで試しました。 Xには、数字が入ります。（会社のファイルサーバーになります） DBI->connectから戻ってきていないようです。（hhhhhhhhが表示されません） ちなみにDBI->connectをコメントにすれば表示されます。 申し訳ありませんが、どなたかご存知の方いらっしゃらないでしょうか？ エラーがかえってこないと、何が悪いかわかりません。 困っています、宜しくお願いします。 ちなみにPerlは、Ver. 5.8.7.813でdbi,dbd-oracleは、昨日ｐｐｍでダウンロードしました。 # DBへコネクトする my $datasource = 'dbi:oracle:usrDB:xxx.xxx.x.xx:8080' ; my $usr = 'usrname' ; my $pass = 'usepass' ; my $dbh = DBI->connect($datasource,$usr,$pass) ; print "hhhhhhhhhhhh\n" ; if( ! $dbh ){ print "gggggggggggg\n" ; } $dbh->disconnect();
Perl初心者です。レンタールサーバでｍｙｓｑlからデータを取得して表示するプログラムを作りたいのですインターネットで捜したのですがよく分かりませんでした。申し訳ありませんが駄目出しでも結構ですので直すポイントになるようなアドバイス、お願い致します。 #!/usr/bin/perl #変数宣言 print "Content-type: text/html;\n\n"; use DBI; $ds = 'DBI:mysql:XXXXXXXXXXX:localhost'; $user = 'XXXXXXXXXX'; $pass = 'XXXXXXXXXX'; print "test<br>\n"; $db = DBI->connect($ds, $user, $pass) || die "Got error $DBI::errstr when connecting to $ds\n"; print "test<br>\n"; #$sth = $db->prepare("SELECT mei FROM name"); #$sth->execute; # バス経路票の中身を表示したかったたのですが出来ませんでした。 $sth= $db->prepare(qq(SELECT * FROM 'バス経路票')); $sth->execute; while(@row = $sth->fetchrow_array) { print qw($row[0]\t$row[1]\t$row[2]\n); } # 経路票の中身を表示したかったたのですが出来ませんでした。 $sth = $db->prepare(qq(SELECT * FROM '経路票')); $sth->execute; while(@row = $sth->fetchrow_array) { print qw($row[0]\t$row[1]\t$row[2]\n); } # 駅バス停関係票の中身を表示したかったたのですが出来ませんでした。 $sth = $db->prepare(qq(SELECT * FROM '駅バス停関係票')); $sth->execute; while(@row = $sth->fetchrow_array) { print qw($row[0]\t$row[1]\t$row[2]\n); } # バス経路票の中身を表示したかったたのですが出来ませんでした。 print "@basskeiro<br>\n"; # 経路票の中身を表示したかったたのですが出来ませんでした。 print "@keiro<br>\n"; # 駅バス停関係票の中身を表示したかったたのですが出来ませんでした。 print "@bassteikeiro<br>\n"; print "test<br>\n"; $rc = $sth->finish; $rc = $db->disconnect; exit;
お世話になっております。 Mac os X 10.6.6でperlに挑戦しています。 私の知識量としては、 プログラムは初めて、macを使いだしてから２ヶ月と超初心者です。 現在、初歩のperlの本を参考に取り組んでます。 ターミナル上から、perldocを見ようと思い、記入しているのですが、 何故か上手く行きません。（perldoc はperlのマニュアルということで私は認識してます。） 例えば、joinと言う関数を調べようと思い、 ターミナル上で １、perldoc join　また　２、perldoc -f joinと記入しているのですが、 １の場合であれば、 No documentation found for "join". ２の場合であれば、 No documentation found for "perlfunc".と表示がされます。 ちなみに、ターミナルで打つのもおぼつかないのですが、 ３、join　とだけ打つと、 Usage: open [-e] [-t] [-f] [-W] [-R] [-n] [-g] [-h] [-b <bundle identifier>] [-a <application>] [filenames] [--args arguments] Help: Open opens files from a shell. By default, opens each file using the default application for that file. If the file is in the form of a URL, the file will be opened as a URL. Options: -a Opens with the specified application. -b Opens with the specified application bundle identifier. -e Opens with TextEdit. -t Opens with default text editor. -f Reads input from standard input and opens with TextEdit. -R, --reveal Selects in the Finder instead of opening. -W, --wait-apps Blocks until the used applications are closed (even if they were already running). --args All remaining arguments are passed in argv to the application's main() function instead of opened. -n, --new Open a new instance of the application even if one is already running. -g, --background Does not bring the application to the foreground. -h, --header Searches header file locations for headers matching the given filenames, and opens them. と表示されます。 １の命令では、　perldocにある「join」を探せ、 ２では　perldocにある関数の「join」を探せと命令していると思うのですが、 ３は何を意味しているのか少々わからないため、怖いなあと思っています。 また参考書上はperldoc -f join で関数の説明が出てくるとの記載があるので、 出てこない私のパソコンには何か問題でもあるのかと不安に思ったりもしています。 そこで、質問ですが １、perldoc -f ～で出てこない私のパソコンは何か問題があるのでしょうか？ また、あるのでしたらその対応方法をご教授ください。 ２、単に関数を打った場合、これはどのような命令になっているのでしょうか？ 上記２点ご回答いただければと思います。お願いします。
perlを使用して指定した先頭文字がヒットした行から 別に指定した先頭文字がヒットする一行前までを 切り出したいと思っています。 [例] 【変換前】 aa bb cc dd ab bc cd de ac bd de ef ad bd de ef ad bc cd ef ae bc cd df 【変換後】 ab bc cd de ac bd de ef 変換内容は上記の例ですと先頭文字がabから始まる行から 先頭文字がadで始まる行の1行前までを抜き出したいと思っています。 この場合どのようにPerlで記述をしてあげればよいか教えて頂けないでしょうか。 よろしくお願いいたします。
以下のようなソースを書きました。 HTMLファイルを読み込み、タグを全て削除して他のファイルに書き込むソースです。 しかし、上手く動作しません。 問題点を教えていただけませんでしょうか。 お願いします。 #!/usr/local/bin/perl package www3sub2; sub main(){ open(FH, "<googlefile3_.txt"); my @file = <FH>; close(FH); open(OUTB,"> googlefile6.txt"); foreach(@file){ my $line = $_; $line =~ s/<("[^"]*"|'[^']*'|[^'">])*>//g; print OUTB "$line"; close(OUTB); } } 1;
perlを使用してcsv形式のテキストファイルを下記のように変換したいと思っています。 【変換前】 10, abc , def , ghi ,jkl　　　　----1行目 10, abc , def , aaa, bbb　　 ----2行目 10, abc , def , ccc , ddd　　----3行目 11, abc , def , eee , fff　　 ----4行目 11, abc , def , aaa , ggg ----5行目 11, zzz , def , aaa , ggg　　----6行目 12, abc , def , aaa ,ggg ----7行目 12, zzz , def, aaa , ggg　　　----8行目 【変換後】 10, abc , def , ghi ,jkl　　　　----1行目 11, abc , def , eee , fff　　 ----4行目 11, zzz , def , aaa , ggg　　----6行目 12, abc , def , aaa ,ggg ----7行目 12, zzz , def, aaa , ggg　　　----8行目 変換内容はcsv形式のテキストファイルで、”,”で区切った先頭3列が 前の行の先頭3列と同じならその行は出力しない、といった 変換をしたいと思っております。 (例えば2行目ですと先頭3列は10, abc ,defになっており、 　1行目の先頭3列と同じ文字列になっているためこの行は出力しない) 当方、Perl初心者で上記のようなことがPerlでできるかも よくわかっておりません。 そこで、上記のような変換はPerlで可能なのか、そしてもし可能であるのなら どのようにPerlで記述すればできるのか教えていただけないでしょうか。 よろしくお願いいたします。
以下のようにカテゴリーとURLが書いてあるファイルがあり これをPerlでカテゴリとURLに分けて処理したいと思っております。 例えば配列としてカテゴリとURLを自由に呼び出せるよう にしたいのですが、あまりに初心者で方法が思いつきません。。。 テキスト ------------------------------------- Search Engine http://www.yahoo.co.jp http://www.google.co.jp Shopping http://www.rakuten.co.jp http://amazon.co.jp Sports http://www.mlb.com http://www.j-league.or.jp その後多数のカテゴリとURLが続く。。。 ------------------------------------- どんな方法でもカテゴリと関連したURLが取り出せればよいのですが、 例えば下記のような配列や、 $shopping[1] = http://amazon.co.jp あるいは下記のような多重配列にしてURLを扱うにはどのようにしたらよいでしょうか？ $url[0][1] = http://www.google.co.jp よろしくお願いいたします。
macで独学でperlを勉強しています。 私の状況としては、 macを使って２ヶ月。 macbookair の　mac os x の　バージョン10.6.6　です。 windowsは５年くらい使っていましたが 映像編集とかネットサーフィンくらいにしか使っていませんでした。 macを買ってからは、 htmlはだいたい使えるようになった。 perlというより、プログラムは初めて勉強する。周囲にプログラム経験者はいない。 という状況です。 perlの勉強を開始して、１週間程、 地道に教科書を勉強して、localhost上でアクセスカウンタは実行できる。 まできました。 ただ、本来であれば作成の環境設定の段階で行うapacheの設定が理解しがたく、 設定を行っていませんでしたので、 フォームをhtmlに送るという段階で躓いてしまいました。 教科書では、ターミナルでapacheの設定を行うとの記載があったのですが、 調べて、Finder上の移動→/etc で隠しファイルを見つけて、 httpd.confを開くまでなんとか、辿り着きました。 ただ、この後、どのように設定を変えればいいのかが、わかりません。 いろんなサイトを見ましたが、 それぞれ書いてあることや記述日が異なり、 また、中級者以上向けに記載のあることがほとんどです。 大変お手数ですが、 この後どのような設定を行えばいいのでしょうか。 ご存知の方がおられればお教えください。
独学でmacでパールを勉強しています。 始めてからまだ１週間すこしくらい。 教科書読みながら、 CGIへフォームを渡す所の段階まで進んできました。 現段階で、htmlからperlへフォームを渡そうとしているのですが、 上手く行きません。 状況としては、htmlのフォームを入力して、登録を押す。 成功であれば→実行結果が表示されるはずなのですが、 現段階ではFinderがその実行htmlの場所を開くだけという形になっています。 下記は実験用に使っているソースです。 ーーーーーーーーーーー htmlは <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitio … <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="Content-Type" content="text/html;charset=utf-8" /> <title>test</title> <style type="text/css"> </style> </head> <body> <h1>メンバーズリスト</h1> <form method="post" action="form.cgi"> <p> 名前:<br/> <input type="text" name="name"/> </p> <p> 性別: <input type="radio" name="sex" value="male" checked>男 <input type="radio" name="sex" value="female">女 </p> <input type="checkbox" name="megane">メガネを付けてる </p> <p> <select name="kankei"> <option value="yuujin">友人 <option value="kaisya">会社関係 <option value="sonota">その他 </select> </p> <p> 住所: <textarea name="jyusyo" rows="5" cols="40" ></textarea> </p> <p> <input type="submit" value="登録"/><input type="reset" value="クリア"/> </p> </form> </body> </html> ーーーーーーーーーーーーーーーーー perlは #!/usr/bin/perl require 'cgi-lib.pl'; &ReadParse(*form); $name = $form{'name'}; $sex = $form{'sex'}; $megane = $form{'megane'}; $kankei= $form{'kankei'}; $jyusyo = $form{'jyusyo'}; print "Content-type: text/html\n\n"; print "<HTML>\n"; print "<HEAD><TITLE>情報受け取り</TITLE></HEAD>\n"; print " <BODY>\n"; print "<H1>情報受け取り</H1><HR>\n"; print "名前:${name}<BR>\n"; print "性別:${sex}<BR>\n"; print "めがね:${megane}<BR>\n"; print "関係:${kankei}<BR>\n"; print "住所${jyusyo}<BR>\n"; print "</BODY>\n"; print "</HTML>\n"; __END__ です。 ちなみに　localhost上で同一ファイルに入れて、 動かしてます。 ご確認の上、ご助言ください、 perlの教科書に書いてあった構文は、 htmlの学習をするために使ってきたものと全く違ったため、 要点だけ残す形で、再度書いたものです。 htmlの文章がおかしいのか、perlがおかしいのか、 頭が変になりそうです。お助けください。
独学でmacでパールを勉強しています。 始めてからまだ１週間くらい。 教科書みながら、print命令でファイルハンドルに指示を出してるのですが、 書き込めはできるのですが、 ファイルが無い場合、 新規に自動でファイルが作成されるはずとの記載があったのですが、 何故か、自動でファイルが生成されません。 調べても、設定が必要等言われてますが、 mac自体も初心者でほとんどわかりません。 どのような設定にすればいいのでしょうか？ また、ソースに何か悪い所があるのでしょうか？ お助けください。 下記は実験用に作ったソースですが、 作動もしてるのですが、　 新規に自動でファイルが作成されるはず が 何故か作成されません。 ちなみに　localhost上で動かしてます。 #!/usr/bin/perl print "Content-type: text/html\n\n"; print "<HTML>\n"; print "<HEAD><TITLE>test</TITLE></HEAD>\n"; print " <BODY>\n"; print "<H1>test</H1><HR>\n"; open ( FH ,">tukuruzo.txt"); print FH "tukuruzo"; close ( FH ); print "</BODY>\n"; print "</HTML>\n"; __END__
独学でmacでパールを勉強しています。 始めてからまだ１週間くらい。 教科書みながら、print命令でファイルハンドルに指示を出してるのですが、 書き込めはできるのですが、 ファイルが無い場合、 新規に自動でファイルが作成されるはずとの記載があったのですが、 何故か、自動でファイルが生成されません。 調べても、設定が必要等言われてますが、 mac自体も初心者でほとんどわかりません。 どのような設定にすればいいのでしょうか？ また、ソースに何か悪い所があるのでしょうか？ お助けください。 　 ちなみに下記がソースです。 ーーーーーーーーーーーーーーーーーーーーーーーーーーーー #!/usr/bin/perl print "Content-type: text/html\n\n"; print "<HTML>\n"; print "<HEAD><TITLE>アクセスカウンタ</TITLE></HEAD>\n"; print " <BODY>\n"; print "<H1>test</H1><HR>\n"; if ( open ( FH , "count.txt")){ $cnt = <FH>; close( FH ); $cnt++; print"<CENTER>あなたは${cnt}人目の訪問者です。</CENTER>\n"; if ( open(FH, ">count.txt" )){ print FH $cnt; close(FH); } else { print "ファイルの書き込みオープンに失敗しました。\n"; } } else { print "ファイルの書き込みオープンに失敗しました。\n"; } print "</BODY>\n"; print "</HTML>\n"; __END__ ーーーーーーーーーーーーーーーーーーーーーーーーーー
超初心者からプログラムを初めて１週間、 プログラム言語にはperlを使用しています。 mac os x です。 perlの教科書読みながら、アクセスカウンタを作ろうとした所、 何故かgif画像が表示されません。 ネットの素材置き場からとってきましたが、パソコン自身、gif自体は認識してくれてます。 ただ、それをperlに組み込んで使おうとすると、表示されません。 ブラウザはfirefoxとsafariで試しましたが、両方認識してくれませんでした。 ちなみにソースは ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー #!/usr/bin/perl print "Content-type: text/html\n\n"; print "<HTML>\n"; print "<HEAD><TITLE>アクセスカウンタ２</TITLE></HEAD>\n"; print " <BODY>\n"; print "<H1>test</H1><HR>\n"; if ( open ( FH , "count.txt")){ $cnt = <FH>; close( FH ); $cnt++; print"<CENTER>\n"; foreach $fld (split (// , $cnt)){ print "<IMG SRC=\"${fld}.gif\">"; } print"</CENTER>\n"; if ( open(FH, ">count.txt" )){ print FH $cnt; close(FH); } else { print "ファイルの書き込みオープンに失敗しました。\n"; } } else { print "ファイルの書き込みオープンに失敗しました。\n"; } print "</BODY>\n"; print "</HTML>\n"; __END__ ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー です。 テキストファイルを確認しているので、 perl 自体の活動と、アクセスのログ？自体は正常に動いているみたいです。 お願いします。 助けてください！
perlのメールフォームが文字化けして困っています。 メールフォームの出力ＨＴＭＬは、shift_jis それを、ISO-2022-JPに直して、送信しています。 また、jode.pl、mimew.plを使用しています。 何が原因で文字化けしているのか、教えていただけないでしょうか？ よろしくお願いします。
あるディレクトリにtest1.txtとtest2.txtというカンマ区切り（拡張子はcsvではないですけど）があったとして、それらのファイルを1行ずつ読み込み、それを追加書き出しで1つのファイルに収めていこうとしています。 そこで以下のようなコードを書いてみたのですが、どうやらtest1.txtしか読み込んで書き出せていないようなのです。その原因が分からずに困っています。 $dir = 'C:/Perl/workdir';# 対象ディレクトリ名 open MYHANDLE, ">>out.txt";# 追加書き出しモードでファイルハンドルをオープン opendir DH, $dir or die "$dir:$!";# ディレクトリを開く while ($file = readdir DH) {# ディレクトリにあるファイル名を取得し、$fileに格納 next if $file =~ /^\.{1,2}$/;# '.'や'..'も取れるので、スキップする open MYFILE, "$file";# 取得したファイルを開く while (<MYFILE>) { chomp; @dat = split /,/;# 読み込むファイルは「カンマ区切り」としてレコードを読み込む。 $n = @dat; for($i=0; $i<$n; $i++){ print MYHANDLE $dat[$i];# ファイルに追加書き出し(ファイルがなければ新規作成される) print MYHANDLE ",";# カンマ区切りで書き出していく } print MYHANDLE "\n";# 1行読み終えるごとに改行 } close MYFILE;# i番目のファイルを読み終えたら閉じる print $file, "\n";# 読み込み・書き出しをしたファイル名を表示する } closedir DH; close MYHANDLE;
早速お世話になります。 標題のように、 <input type=submit value="処理">とやった場合、 「処理」と表示されたボタンになりますが、 これをボタンの形にせず、文字のママにしたいのですが。 方法はありますでしょうか。 宜しくお願いします。
メール送信のシステムをPerlで作っています。 文字コードUTF-8で送信しようと思っていますが、UTF-8の場合の問題点を教えてください。 自分で調べた限りでは、昔は対応していないメーラーだと文字化けしていたが、今は対応していないメーラーはないので、大丈夫、という認識です。 しかしながら、大手のAmazonやYahoo!、プロバイダや銀行などから飛んでくるメールは、ほとんど全てがISO-2022-JPで飛んできます。 自分が知っている限り、UTF-8を使用しているところはありません。 なので、UTF-8でメール送信することに不安を感じています。 AmazonやYahoo!は、UTF-8だと何か問題があったので、あえてISO-2022-JPを使っているのでしょうか？ ISO-2022-JPだと 髙 などが文字化けするはずなのですが、髙→高に変換してメール送信しているのでしょうか？ よろしくお願いします。
-bash: ./test.pl: usr/bin/perl: bad interpreter:　というエラーについてです。 掲題のエラーが出てしまい、perlが動かないので困っています。 どうすればいいのか教えてもらえませんでしょうか。 【状況】 VMwareplayer3.1.2上で、CentOS5.5を動かし、デフォルトで入っているperlを使ったファイル「test.pl」を作っています。 test.plを実行しようとしているのですが、以下のエラーメッセージが表示されます。 -bash: ./test.pl: usr/bin/perl: bad interpreter: そのようなファイルやディレクトリはありません 実行した際のコマンドは./test.plです。 test.plの中身は以下。 ------------------------------------------------------ #!/usr/bin/perl use strict; use warnings; my $name = "morifuji"; print "Hello ". $name . "\n"; ------------------------------------------------------ 【確認済み事項】 　test.plの置き場所は/usr/bin/perlです。 　ls -lで権限をみたところ、rwxr-xr-x furukawa root 4096となっている。 　perl test.plと命令するとエラーは返らずちゃんと表示されます。 　（perlを省いて、test.plと命令するとエラーになる。これだと、webから表示されたときに動きません） 　FTPとかで転送すると文字コードの問題でバグが出る、という風な記事を見かけたが、VMwarePlayerなのでそういったやりかたはしていない。 　which perlと命令してperlの場所を探したが、　/usr/bin/　にある。
比較が上手く機能していません。 下のように書いていますが、全て緑になってしまいます。 （真の結果が採用されてしまいます。） if ($trm14 eq "●") {print "<font color='green'>";} else {print "<font color='red'>";} 全角は比較できないのでしょうか。 $trm14には間違いなく「●」が入っています。 入らない場合は""になっています。 $trm14はファイルの１項目です。 ちなみに、 以下のようにやればチャンと期待通りに機能します。 ●の代わりに「8」を入れてみました。 if ($trm14 == 8) {print "<font color='green'>";} else {print "<font color='red'>";} 宜しくお願いします。
下記のようなスクリプトがあります。 これは、CSVファイルを1行表示し、編集可能にするスクリプトの1行表示部分です。 これを全行表示するスクリプトに変更したいと考えています。 while ($cnt) { foreach(@csv2){ 　.............................. } } とすると無限ループするようです。(サーバーが固まる) webで調べたのですが、$cnt = '1'or die "$!"としても抜けだせません。 行が無くなったら作業を終了するとしたいのですが、どうすればいいでしょうか? 初歩的な質問で恐縮なのですが、レンタルサーバーをこれ以上固まらせるわけ にもいかないため、ご教授頂ければと思います。 @csv2 = split(/\<>/,$csv[$param{'num'}]); $cnt = '1'; foreach(@csv2){ &trString(\$_, "1",); if($_ eq $csv2[-1]){ chomp($_); } print "<tr>\n"; print qq|<td><input type="text" name="$cnt" size="30" value="$_"></td>|; print "</tr>\n"; $cnt++; }
Perlで、大きいソート順になっている配列があります。 その中には重複しているデータもあります @list = (100,80,80, 50, 50, 45, 10, 0, 0, 0); のような配列を @ranking = (1,2,2, 4, 4, 6, 7,10,10,10); と順位を格納させたいです。 簡単な方法がありましたら、教えてください。
perlでメールフォームを作成しようとしています。 fakesendmailでフォームデータを送信するように設定していますが、うまくいきません。 perlは動作しているみたいですし、fakesendmailのエラーログも動作しているので、パイプも問題ないと思います。 ですが、設定したメールアドレスの方にフォームデータが送信されません。 受信サーバ、送信サーバ、メールアカウント、パスワードもプロバイダ（フレッツ光）に教えてもらった通り設定しています。 サーバソフトはhttpdです。 何が原因で送信されないのでしょうか？ 原因だけでも、教えていただけないでしょうか？ よろしくお願いします。
Perl5.8からsendmailを使ってメール送信しています。 髙や﨑が入ると文字化けします。文字化けしないようにする方法を教えてください。 #!/usr/bin/perl require 'jcode.pl'; require 'mimew.pl'; $sendmail = '/usr/lib/sendmail'; print"Content-type: text/html\n\n test\n"; if (!(open(OUT,"| $sendmail -t -i -f xxxx\@hogehoge.co.jp"))) { ; } print OUT "To: xxxx\@hogehoge.co.jp\n"; print OUT "From: xxxx\@hogehoge.co.jp\n"; print OUT "Reply-To: xxxx\@hogehoge.co.jp\n"; $subject = "サブジェクト 髙﨑"; $subject = &mimeencode($mail_subject); print OUT "Subject: $mail_subject\n"; print OUT "Mime-version: 1.0\n"; print OUT "Content-Type: text/plain\; charset=\"ISO-2022-JP\"\n"; print OUT "Content-Transfer-Encoding: 7bit\n\n"; $honbun = "メール本文 髙﨑"; &jcode'convert(*honbun, 'jis'); print OUT "$honbun\n"; close(OUT);
CSVファイルを変換するPGを書きたいのですが、 変換したいCSVには改行コード\nと\r\nが混在しています。 改行コード\r\nはそのままにして \nだけ削除したいのですが どのように書けばよろしいのでしょうか。 Perlは5.12.2です。 よろしくお願いします。
単語をGOOGLEで検索すると、ソースでは以下のように表示されます。 <!doctype html><head><meta http-equiv="X-UA-Compatible" content="IE=8"><meta http-equiv=content-type content="text/html; charset=UTF-8"><title>シュウマイ - Google 検索</title><script>window.google={kEI:"oZQ7TdTAAcLMcNDKlYUH",kEXPI:"17259,20782,28186,28233,28290",kCSI:{e:"17259,20782,28186,28233,28290",ei:"oZQ7TdTAAcLMcNDKlYUH",expi:"17259,20782,28186,28233,28290"},ml:function(){},kHL:"ja",time:function(){return(new Date).getTime()},log:function(c,d, 以下略 この長い文章をテキストファイルに書き込みたいと思っています。 できればCGIフォームを使用して、そこに入力された言葉で検索、検索した結果のソースをtxtファイルに保存したいのですが、どなたか教えていただけないでしょうか。 言語はPerlです。 よろしくお願いします。
perlを利用して文字列処理を行う際に、入れ子になった文字列を削除したいのですが、正規表現のうまいやり方が思い浮かびません。 例としましては 今日は雨（雪ではない（この辺の処理に困っている））が降っている。 という文章を 今日は雨が降っている。 と処理できるようにしたいです。 $data =~ s/（.*?）//g; $data =~ s/）//g; というやり方では、３重以上になった時の処理ができません。 できれば何重になっても可能な方法をご教示ください。
下記のような簡単なスクリプトなんですが、なぜかサーバーにアップすると動きません。 ローカルでコマンドプロンプトから直接実行するとまともに動作します。 パーミッションは「755」と「705」でやってみましたが。 perlのパスは合っていますし、実際同じ場所に置いた他のCGIは動作します。 #!/usr/bin/perl open (DT, "<./data/***/***.csv") or die "File '***.csv' Open Error."; @data = <DT>; $data[0] = ",,,,,,\n"; open (OUT,">./data/***/***1.csv") or die "File '***1.csv' Open Error."; print OUT @data; close (DT); close (OUT); 原因が分からず困っています。 解決策でなく、原因と思えるだけの回答で結構ですので何卒よろしくお願いいたします。
データ管理の為perlで データの保存先のパスを　\から/に変換させる事をしたいのですが、パスの途中、ファイル名に　十 申 曾 箪 貼 能 表　等の文字が入ると　文字が化けてしまいます。いろいろ調べて化ける理由は分ったのですが、やりたい事が出来ません。対応できる方法があれば教えてください。 文字コードはSHIFT-JISです 例：c:\申請表\能力検定\貼付け\十分.txt　を　c:/申請表/能力検定/貼付け/十分.txt　に変換したいがどうしても以下の様になってしまう。　c:/・請・・力検定/・付け/・分.txt　
perl(CGI::Session)を利用したセッション管理について教えてください。 【実現したい機能】 会員ＤＢ（IDやパスワードを保持）を使用し、認証を行い、 認証成功したらCookieを発行し、会員別のページを表示する。 会員DBのIDとCookieを紐づける機能は、CGI::Sessionにあるのでしょうか。 CGI側でCookieから会員DBのIDを結びつけるためには新たにファイルなどを作成する必要があるのでしょうか。
ロボットが回遊してきてcgiを実行され、被害が出るので、 .htaccessでアクセス制限を掛けたく調べています。 .htaccessファイルは以下のとおり作れました。 ***ここから order allow,deny allow from all deny from xxx.xxx.xxx.xxx ***ここまで ただ、このファイルを置く場所が分かりません。 プロバイダーの指定では、 /use/local/www/htdocs/user-id/public_html/目的のディレクトリ と在ります。 これは、.htaccessファイルをここに置け、ということかと思いますが、 ここはどのように指定するのでしょうか。 使っているのは、フリーウェアのffftpです。 ffftpを実行したとき、 サーバー側に表示されているアドレスは / となっています。 そしてそこに、cgi-binフォルダやindex.htmlが表示されています。 .htaccessの説明を読んだ限りでは、 制限を掛けたいフォルダ（ディレクトリ）に置け、となっていました。 であれば、このルート部分に置きたいのですが。 関連でもう一つ、やらなければならないことはこれだけで宜しいのでしょうか。 例えばcgiファイルなどで何か定義し直す必要とか。 宜しくお願いします。
perlプログラム内で、grepを行っております。 grep対象の中身に　+、*、（、）、[、]などの文字列が含まれているため、エラーとなり、 プログラムがうまく動作しません。 grepしたい対象データ例：http://www.XXX.co.jp/○○+▲▲ http://www.XXX.co.jp/○○+▲▲の+を　文字として判断し、正規表現扱いではないとしたい。 http://www.XXX.co.jp/○○+▲▲を含む文字を抽出したい。 perl　プログラムにおいて @line1 = grep(/$url/,<ARG>); という記述しておりますが、どのように変更すればよいでしょうか？ また、grepしたい対象データがファイルに格納されておりますが、 その中で、+を　\+　にファイル一括変換する場合、:%s/+/\+/g　で　やろうとしても、変換されません。 perlプログラムでの対応、grep元ファイルの変換処理方法　それぞれのやり方について教えてください。
早速ですが、 現在、指定された単語を含む文字列を抜き出す様なcgiを作っています。 現在のコーディングです。 foreach $line (@lines) { $an = index $line,$skey; if ($an >= 0) { 上記では、 $skey と全く同じモノしか検索（抽出）出来ないため、 今回、$skey　が英字の時は、大文字、小文字、およびその混在でも 抜き出せるように改善したいと思っています。 例えば、abc と指定されたら、abcでもABCでもAbcでも抜き出せるような。 （英字と数字の混在や、全角は対象外で構いません。） 考え方として、 指定されたキー（文字列）を基に大文字、小文字を作り、 （uc関数、lc関数） 両方で検索してやれば殆どokと思うのですが、 混在の場合はどうやればいいか思いつきません。 また、 そもそも指定されたキーが英字であるかの判断方法が分かりません。 （大文字、小文字の変換は英字に限りますので） ということで、 (1)大文字、小文字の混在時の対応方法 (2)指定されたキーが英字であるかの判断方法 を教えていただきたくお願いします。
Perl　初心者です。 FTP接続時失敗時、接続先名をcsvに出力する(書き出す)プログラムを作成しております。 ※複数FTPサーバがあり順番に接続していき、接続失敗したところをcsvに一覧にして出力したいです。もし、csvファイルがない場合、C:/logの下にERROR.csvを作成する必要もあります。 今現在、私が作成しているプログラムが以下になります。 #!C:/Perl/bin/perl use Net::FTP; use strict; my $i; my $j; my @ftp_data = ( ['ftp','192.168.0.0'], ['ftp2','192.168.0.10'], ); sub error{ my $file = "ERROR.csv"; if(!-d"C:/log/$file"){ open(TFILE,"+>> $file") or die($!); print OUT "$ftp_data[$i][0]"; close(TFILE); } else{ open(OUT, ">> $file"); # 追加オープン print OUT "$ftp_data[$i][0]"; close(TFILE); } exit; } for ($i = 0; $i <= $#ftp_data; $i++){ #FTPサーバーへの接続 my $ftp = Net::FTP->new("$ftp_data[$i][1]") or &error; #ユーザー名とパスワードを指定してログイン $ftp->login('user','password') or die $ftp->message; print "connect $ftp_data[$i][1]\n"; #接続終了 $ftp->quit; } 実行してみると何もでないでずっとループ?しているみたいなのですが、 どこが悪いのかよく分からないのです。 ご教示いただけないでしょうか?
お世話になります。 perlを使用して、 下記の元ファイル[infile.txt]よりstart～endの範囲を各テキストファイルに 分割出力する方法をご教授いただけないでしょうか。 　※出力ファイル名は元のファイル名 (infile) + 1行目の文字列(単語)にします。 　　例>>infile_1111.txt , infile_333.txt よろしくお願いいたします。 [infile.txt] aaaa bbbb start 1111 2222 end dddd eeee start 3333 4444 end
open(IN,"<data/list.cgi"); @list = <IN>; close(IN); このようなプログラムで、 'abc','def','ghi' とだけ書かれた「list.cgi」をdataディレクトリに用意しています。 そして、print "$list[0]";で読み込むと、 'abc','def','ghi' と全て表示されてしまいます。 原因がわからないので、質問しました。 お願いします。
文字列 http://dailynews.yahoo.co.jp/fc/ の http://dailynews.yahoo.co.jp を削除する正規表現を試行中です。 はじめたばかりでスキルが乏しいのですが、 アドバイスいただきたくよろしくお願いします・
csvから接続先名とIPアドレスを多次元配列を利用して引っ張り for文等でcsvに書かれている全接続先につなぎデータを取ってくるプログラムを作成しようと思っております。 しかし、多次元配列の使い方やfor文を調べても良くわからず困っています。 csvは、例えば以下の通り設定します。 【hp_ftp.csv】 hp1　192.168.1.12 hp2　192.168.1.10 hp3　192.168.1.20 以下、perlのプログラムです。 #!C:/Perl/bin/perl use Net::FTP; use strict; #FTPサーバーへの接続 my $ftp = Net::FTP->new('各サーバIPアドレス') or die; #ユーザー名とパスワードを指定してログイン $ftp->login('user','password') or die $ftp->message; #保存先ディレクトリの存在確認・作成 if(!-d"C:/接続先名"){ mkdir "C:/接続先名"; } else{ print"Directory already exists!\n"; } #保存先ディレクトリの変更 chdir("C:/接続先名/") or die; 以下略 #取得元ディレクトリの変更 #データ取得(for文で) #接続終了 【質問】 ・IPアドレス(192.168.1.12....)をcsvから引っ張りperlの'各サーバIPアドレス'に入れたい ・接続先(hp1...)をperlの'接続先名'と書かれている部分に入れたい どのようにプログラムを組めば良いのでしょう? ご教授の程宜しくお願いいたします。
初歩的な質問で失礼いたします。 CentOSのサーバーでcgiでプログラムを作成しているのですが、 「use Util;」を宣言時にエラーが発生してしまいます。 【エラー内容】 Can't locate Util.pm in @INC (@INC contains: ./lib /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi yumやcpanのコマンドでUtilモジュールをサーバーに入れればよいのですが、 「use Util;」はどのモジュールになるのかがわからず困っております。 試しに、yum list　コマンドで　Util　が付いているパッケージを探し、yum install　してみましたが解決されませんでした。 （yum -y install perl-Util-SelfDestruct.noarch　など） ご存じな方がおられましたら、ご教示お願いします。 宜しくお願い致します。
perl初心者です。 FTPの設定で、ホストの設定名・ホスト名(アドレス)などありますが、 FTPホストの設定名(HPSERVER)を変数として代入させ、その変数でフォルダ名として 使用することは可能でしょうか? 例えば、以下の場合 #FTPホスト名(アドレス) 111.111.111.111 #FTPホストの設定名 HPSERVER #作成するフォルダ名(C直下に作成) FTPホストの設定名(HPSERVER)
表題のとおり「ＧＥＴリクエストのヘッダにX-WSSE認証を追加して送出する」方法がわからず困っています。 なぜそれをやりたいかと申しますと ライブドアブログに投稿するのに、XML::Atomを使った方法はわかったのですが、 XML::Atomを使わないでやるにはどうしたらいいのかとおもい試しています。 http://www.witha.jp/Atom/Chapter-3_The_Atom_Publ … によりますと、 ---- エンドポイントのhttp://cms.blog.livedoor.com/atomに認証情報をヘッダに挿入したGETリクエストを送信します． 　生のHTTP通信は以下のようになります． リクエスト： GET http://cms.blog.livedoor.com/atom HTTP/1.1 X-WSSE: UsernameToken Username="＊＊＊", PasswordDigest="eNSBiuFfcLpau1RfWc3lOWufje0=", Nonce="ZGFrZHZueGJ6aGh1", Created="2004-10-31T14:08:34Z" --- と、あっさり書いてあるのですが、 ◆「認証情報をヘッダに挿入したGETリクエストを送信」◆はどうやれば良いのやら・・・ 強引にこうかいてみたのですが・・ -------- use LWP::UserAgent; $request = HTTP::Request->new(GET => 'http://cms.blog.livedoor.com/atom', ['X-WSSE'=>'User nameToken Username="＊＊＊＊＊", PasswordDigest="KxZ4DElJVqsIBXiF9ZIWCp59ghM", Nonce="YWFh", Created="2004-01-20T01:09:39Z"']); $ua = LWP::UserAgent->new; $response = $ua->request($request); print $response->content; ---------- 以下のように成ってしまいました。 ---------------- <?xml version="1.0" encoding="utf-8"?> <error>Invalid login</error> ---------------- どうかよろしくおねがいします。
はじめまして、初心者の質問で恐縮ですが、以下の点を教えて欲しいです。 IIS7.0のWebサーバで、CGIプログラムをPerlで作っているのですが、forkした子プロセス で時間のかかるバックグラウンド処理を行って、親プロセスでWebブラウザに返す処理を しようとしていますがうまくいきません。重たい処理が終了するまでWebブラウザに応答 されません。（子プロセスの終了が終わるまで、親プロセスのHTML表示処理がWebブラ ウザに返答されません）通常、子プロセスでclose（STDOUT）で親プロセスのHTMLの 表示処理が出来ると思っていますが。。。 どのようにすれば良いか教えてもらえると幸いです。以下は参考のプログラムです。 よろしくお願いします。 $|=0； if ( $pid = fork){ #親プロセス &disp_html();　#HTMLを表示させるプログラム wait; }elsif (defined $pid) {　　#子プロセス close(STDIN); close(STDOUT); close(STDERR); &heaby_prog();　#重たい時間のかかる処理 exit 0; } else { die "Can't fork: $\n"; } よろしくお願いします。
以下のようなリンク先の画像の縦横のピクセルサイズを取得することは可能でしょうか。 http://www.hogehoge.com/images/sample.gif 登録式の検索エンジンで登録バナーサイズの判定をしたいと思っております。 もし出来るということであれば具体的なソースも教えて頂ければ幸いです。 どうぞ宜しくお願い致します。
perlで三次元配列をテキスト入力から作りたいのですが、例えば二次元配列の場合 foreach $line (@input) push @data, [split /[:]/, $line]; で@dataが二次元配列になるのですが、三次元配列の場合このあとに push @output, \@data; とするとリファレンスが同じであるためループをまわしてもうまく三次元になりませんよね。 解決法はありますでしょうか？
Perlのサブルーチンで連想配列（ハッシュ）を渡す方法 -------------------------------------- $str=rep::replace(%A,$B,@C); -------------------------------------- sub refidrep ( \%\$\@ ){ my(%A,$B,@C)=(@_); } -------------------------------------- では、上手くいきませんでした。 どのようにしたら、連想配列をサブルーチンに渡せるのでしょうか？ 分かる方いらっしゃいましたらご教授ください。
最近 学習し始めたばかりの Perl ですが、 リファレンスとは、機械語に出てくるメモリ（記憶装置）の アドレス（番地）という解釈でよいのでしょうか？ （画面上１６進数の番地等は表に出てこないようですが・・） また、下記サンプルの場合 リファレンスを番地と仮定しまして、 配列@arrayの番地は、５個ぶんのメモリ領域が確保されるのでしょうか？ そしてスカラー$ref_arrayに代入される番地は、 その５個ぶんの番地の先頭番地でしょうか？ （スカラー変数１つに、５個のデータは入らないですよね？） @array = (1,2,3,4,5); $ref_array = \@array; 表現的にわかりにくいかもしれませんが よろしくお願いします。
perl初心者です。 FTPサーバーのLOGを取得する場合のプログラムをperlで作成しております。 保存先設定を1回(1行)設定しただけで設定先フォルダにLOGファイルが保存されるような方法はありますでしょうか? 今現在以下のように保存先を指定して取得しています。 my $local_file1 = 'C:/log/aaa.csv''; my $local_file2 = 'C:/log/bbb.csv'; my $local_file3 = 'C:/log/ccc.csv'; $ftp->get('取得元パス/aaa.csv',$local_file1); $ftp->get('取得元パス/bbb.csv',$local_file2); $ftp->get('取得元パス/ccc.csv',$local_file3); ただ、1ヶ月分のLOGを取得するとなるとmy $local_fileも$ftp->getも1ヶ月分作成しなければならないため長文のプログラムになってしまいます。 他、1ヶ月分ならFor文でこんな感じでやれば・・・というアドバイスがあればお願いいたします。
このプログラムソースでやりたいことは、 東海と入力すると 地方だと 東海は900円になります。 と表示させたいのですが、 うまく表示されません。 分かる方いましたら、教えてください。 教えて頂けると、助かります。 よろしくお願いします。 以下、プログラムソースです。 print"愛知県から小包の地方を入力してください。\n"; chomp($t=<>); if ( $1=="関東,信越,近畿,東海,北陸") { print"$t地方だと \n"; } elsif ( $1=="東北,中国,四国" ) { print"$t地方だと \n"; } elsif ( $1=="九州") { print"$t地方だと \n"; } elsif ( $1=="北海道") { print"$t地方だと \n"; } elsif ( $1=="沖縄" ) { print"$t地方だと \n"; } if ( $1 == 60 ){ print"$1は700円になります。\n"; } elsif ( $1==80) { print"$1は900円になります。\n"; } elsif ( $1==100 ) { print"$1は1,100円になります。\n"; } elsif ( $1==120 ) { print"$1は1,300円になります。\n"; } elsif ( $1== 140 ) { print"$1は1,500円になります。\n"; } elsif ( $1== 160 ) { print"$1は1,700円になります。\n"; }else { print"$1は1,900円になります。\n"; }
配列 @in=(10,20,30,40) がある、各項目を $n 倍するプログラムを作っていますが、 $n 倍出来ません。 以下、プログラムです。 #!/usr/bin/perl @in=(10,20,30,40) ; print"@inを"; print"何倍しますか？:"; chomp($n=<>); foreach $ni_tall (@in) { $n *= $ni_tall; } $ave = $n * @in; print "結果: $ave\n"; print "結果: $ni_tall\n"; print "結果: $n\n"; print "結果: @in\n"; ＿＿＿実行結果＿＿＿ 10,20,30,40を何倍しますか？:７ 結果：6720000 結果： 結果： 1680000 結果： 10 20 30 40 となってしまいます。 例えば、 ：２ 結果：20,40,60,80 としたいのですが、 分かりません。 分かる方いましたら、教えて頂けると助かります。 よろしくお願いします。
PerllのWeb::Scraperを使って商品の情報を取得するみたいなことをしたいのですが、下のコードでなぜかブランドと製造販売元が取得することができません。 http://www.kenko.com/product/item/itm_6521067072 …のソースを見てみると、<div class="ltxt brand">にブランド情報が、<div class="ltxt">に製造販売元の情報が書かれています。それなので、process "div.ltxt", "maker" => "TEXT";とすれば製造販売元の情報（文字列）が取得されるはずなのですが、なぜかブランド情報（process "div.ltxt.brand", "brand" => "TEXT";として得られるはず？）が得られてます。これはなぜでしょうか？ またこのスクリプトWeb::Scraperでは基本的にclass="***"のようにクラスの定義がされていないものについては情報を取得できないのでしょうか？例えば、同ページのソースコードにある<div>内容量：250ml</div>や<div itemprop="identifier" content="upc:4987222787413">JANコード：　4987222787413</div>から内容量とJANコードの情報を得ることはできないでしょうか？ #!usr/bin/perl use strict; use warnings; use Encode; use Web::Scraper; use URI; use utf8; binmode STDOUT, ":encoding(shiftjis)"; #scraperオブジェクトを作成 my $shinkan = scraper{ #processメソッドで抽出する要素と展開方法を指定 process "div.mainBox","fil_list[]"=> scraper{ #scraperメソッドを渡して,"td.c-table01"要素をさらに展開する process "h1.fn", "goods" => "TEXT";# 商品名 process "div.ltxt.brand", "brand" => "TEXT";# ブランド process "div.ltxt", "maker" => "TEXT";# メーカー process "span.price" => "price" => "TEXT";# 価格 }; }; #scrapeメソッドでスクレイピングを実行 my $res = $shinkan->scrape(URI->new("http://www.kenko.com/product/item/itm_6521067072 …)); foreach my $dat(@{$res->{fil_list}}){ #undefの場合は、""を代入する。 unless(defined($dat->{goods})) {$dat->{goods} = ""}; unless(defined($dat->{brand})){$dat->{brand} = ""}; unless(defined($dat->{maker})) {$dat->{maker} = ""}; unless(defined($dat->{price})){$dat->{price} = ""}; print "goods = ", $dat->{goods}, "\n"; print "brand = ", $dat->{brand}, "\n"; print "maker = ", $dat->{maker}, "\n"; print "price = ", $dat->{price}, "\n"; };
perlで数字の下二桁を削除したい場合、どうすれば宜しいでしょうか？ 例えば、 987654321 112233441 998877 上の数字から下二桁を切り捨て以下の様にしたいのです。 9876543 1122334 9988 よろしくお願いします。
はじめまして。 現在javascriptを勉強中の者です。 PerlからHTML構文内にjavascript構文を追記し出力しようとしていますが、追記してPerlを実行させただけでInternal Server Errorとなってしまいます。 過去ログをいくつか見させて頂きましたが、自分のソースのどこが悪いのかさっぱりです；； やりたいことは、登録完了ポップアップを表示させるだけです。 表示条件等は別として、まずjavascript構文をソースに追記してポップアップを表示させたいです。 どうか良きアドバイスをお願い致します。 #!/usr/bin/perl require "cgi-lib.pl"; print "Content-type: text/html\n\n"; print qq! <HTML> <HEAD> <META Http-Equiv="Content-Type" Content="text/html;charset=EUC-JP"> <META name="robots" content="noindex,nofollow"> <TITLE>登録画面</TITLE> </HEAD> <BODY> <script type="text/javascript"> <!-- alert("登録完了"); // --> </script> <FORM ACTION="test.cgi" METHOD="post"> <FONT SIZE="4"><B>登録画面</B></FONT>　 </BODY> </HTML> !;
お世話になっております。 perlでファイルない文字データを抽出する作業をしたいですが、やり方が分からなくて、ご存知の方ぜひ教えて頂けばと思います。 001.html内の内容 ＜html＞ ＜head＞ ＜/head＞ <body> テキストテキストテキストテキストテキストテキストテキストテキストテキストテキスト＜img　src＝"aaa" \/＞テキストテキストテキストテキストテキストテキストテキストテキスト＜img　src＝"bbb" \/＞＜img　src＝"ccc" \/＞＜img　src＝"aaa" \/＞テキストテキストテキストテキストテキストテキストテキストテキスト</body> </html> 質問内容 (1)このなかの＜img　src＝"aaa" \/＞イメージファイル名を抽出したいです。本文ではイメージファイルの拡張子はなしです。入力の間違いではないです。 (2)抽出した文字列をimg.txtファイルで出力 以上よろしくお願いします。
2ちゃんのように　書き込みがあると　 TOPにスレッドをあげるのは どう作ればいいんですか？ いちいち全部のファイルを書き換えるのは　厳しそうだし。 どんなシステムなんでしょうか？ 教えてください
とあるソースで $hogehoge =~ s!<文字列>! do{ $hoge =qq(hogehoge);} !egiox; $_ = $hoge; というのを見たのですが $hogehoge =~ s/<文字列>/hogehoeg/egiox;とは何が違うのでしょうか？ また修飾子gとoではどちらが評価されるのでしょうか？または二つとも評価されるのでしょうか？ 宜しくお願い致します。
Perlにてファイルの一括読み込みを以下記述で実施しております。 実行環境はAIXです。 ------------------------------- #!/usr/bin/perl open(FH,"/tmp/filename1.txt"); @aaa=<FH>; close(FH); print "@aaa\n"; ------------------------------- 上記内容をWindows XPにて実行した場合、何も表示されません。 print文が動いていないのか、ファイルの読み込みができていないのか不明です。 ファイルのパスは以下のように変更しております。 ------------------------------- open(FH,"C:\filename1.txt"); @aaa=<FH>; close(FH); print "@aaa\n"; ------------------------------- Windowsにて動作するようにはどのようにすれば宜しいのでしょうか？ 初歩的な質問かもしれませんが、宜しくお願い致します。
perlを覚えてみようと思い立ち55歳で始めて見ました。 エクセルを操作しようと思い、 use Win32::OLE; と入れるとエラーになります。それ以外のコードは動いています。 さくらインターネットのレンタルサーバーを利用していますが、何か関係ありますか？ ホームページで調べてもActivePerlをインストールすれば自動的に含まれているとなっていますが？何か大きな勘違いをしているのでしょうか？ よろしくお願いします。
perlスクリプト内でLINUXコマンドのsourceを実行する方法はないでしょうか？ system()を試みたところ、組み込みコマンドだとエラーとなってしまいます。 sourceしたいファイルの内容を解読して$ENV{～～}に設定する方法もあるかと 思いますが、何か単純にできる方法があるのではと思っております。
　cgiやplファイルは殆ど触ったことがないので、わかりやすく教えていただけると助かります。 　今、入力フォームをhtmlで作成しており、郵便番号から住所を自動入力させるAjax利用のフリーサイトを見つけたのですが、郵便番号の更新手順がわかりません。 http://www.kawa.net/works/ajax/ajaxzip2/ajaxzip2 … 上記URLに郵便番号辞書のアップデート手順があるのですが、具体的にどのように行ったらよいのかわかりませんので、教えていただけると大変助かります。 「サーバ上でなくても、Windows 環境（ActivePerl）や Mac OS X クライアントでも csv2jsonzip.pl は実行できそうです。」とありますが、当方はサーバ上ではなく、Windowsクライアントです。
お暇を縫いこの質問を閲覧してくださり誠にありがとうございます。 Perlとプログラミング関連のほぼ初心者です。勉強そして修行中です…。 とあるちょっとした理由から今現在、最低限の機能のみを備えた極簡単なスレッド式の掲示板を作ろうとしています。 おそらく想定できる方法は幾つかあると思うのですが、スレッド（＝すなわち一つ一つ独立したページとして存在する記事（の集まり））そのものを作り、その一つ一つへリンクさせ内容を閲覧するには具体的にどうすればいいでしょうか。 具体的にとは難しいかもしれませんが、重要なポイントを教えて頂ければ嬉しいです。 例えばWebPatioでは、スレッド一つ一つのリンクのURLの最後の部分が read.cgi “ ?no=（スレッド番号） ” となっているのですが、この部分のスレッド番号および“?no”はどういう風に割り振られているのでしょうか。 用意すべきログファイルは、インデックス（＝トップページ、各スレッドへのリンクを表示する一覧・インデックス）に表示するスレッドの情報（スレッドタイトルと投稿者）を保存するものと、各スレッド内で返信された記事の投稿情報を保存するものが必要なのかなと考えています。 仮に一つ一つのスレッドのページを作るような処理を成功させ、そのリンクをインデックスに貼れたとして、各スレッド内にてコメントを返信しその内容を反映させるにはどういう処理を施すのが手っ取り早いのでしょうか。 それから素朴な疑問なのですが、スレッドを作成した際の親記事（＝仮にNo0とする）もスレッド内の記事の一つ（No１以降の記事）と考えるべきですよね？ 現在はまだ、トップのページのフォームから入力したもの（投稿者名、件名、コメント内容）をトップのページにポンと、上から投稿順に表示させるだけ、単一の記事を表示させるだけの状態です。とてもスレッド式とはいえないただの掲示板なので、この状態からどうすればスレッド式（っぽい）の状態を作り出せるのか、初心者なので至らないところもあると思いますが、何でも良いのでアドバイスをくだされば嬉しいです。
先の質問「プログラムのヒントを下さい」でも扱ったのですが、 apple best apple END apple beer beer END zero child death zero のようなテキストから、ENDとENDの間か、ENDと最初もしくは最後の間の重複した文字列を取り除くスクリプトを書こうと思います。出力例は以下のようになってもらいたいです。 apple best END apple beer END zero child death 自分で頑張って下のコードまで書きましたが動きませんでした。特に、ENDと最初もしくは最後の間 の取り扱いがわかりません。どなたかご教授お願いいたします。 open(IN, "datafile"); @xx = <IN>; @zz = (); foreach $yy (@xx) { if ($yy eq "end"){ @uniq = uniqArray(\@zz); foreach my $value ( @uniq ){ print "$value\n"; } @zz = (); }else{ push(@zz,$yy); } } close(IN); sub uniqArray{ my $array = shift; my %hash = (); foreach my $value ( @$array ){ $hash{$value} = 1; } return( keys %hash ); }
C言語は勉強しましたが、perlはまだまだ初心者の者です。 統計ソフトRの処理のためのスクリプトを書こうと思ってますが、うまくいかずに悩んでいます。 ファイルに以下の用に任意個の文字列が記述されています。ただし、ファイルの途中にはEND が複数かかれており、END以降も文字列が続きます。 apple best china dutch END apple beer END child death zero このファイルを受け取って、 c("apple","best,"chine","dutch"),c("apple","beer"),c("child","death", ,"zero") のようにENDが出てくるまでc(" ",...)を繰り返しを出力するスクリプトを書こうと思っています。 open(IN, "datafile.txt"); @xx = <IN>; print "c("; foreach $yy (@xx) { print "\"$yy\","; } print ")"; close(IN); のように書くとこまではいけたのですが、この先が進めません。どなたかご教授ください。
Perlで複数ファイルをアップロードする方法？ Perl勉強中の初心者です。 掲示板などで、フォルダ内にある複数ファイルを一度に ファイルアップロードする方法はどうやるのでしょうか？ 一番は、サンプルプログラムがあれば、教えてほしいです。 また他の言語で可能なら、その方法論を知りたいです。 それを元にPerlで実現できないか検討したく。 よろしくお願いします。
こんにちは。Perlを勉強しはじめた者です。 test1.plファイルにtuika.plを起動することで追加書き込みをしようとしているのですが、 その書き込みをプログラムの途中に行おうとしています。 内容としては、test1.plが文字置換を行うもので、その候補をtuika.plで入れてやります。 tuika.pl #!/usr/local/bin/perl use strict; use vars qw($oldword $newword); print "置換元の単語は？ \n"; $oldword = <STDIN>; print "置換後の単語は？ \n"; $newword = <STDIN>; open (FH, ">>test1.pl") or die "error $!\n"; seek FH, -47, 2; print FH "s/$oldword/$newword/og;\n"; close FH; seek関数は実際には途中書き込みには対応していない（？）ようなので、書き込みが末尾にきてしまい、うまくいきません…。 初心者な質問で申し訳ありませんが、なにか解決策がございましたら、ご教授願います。
連想配列（ハッシュ）のファイルへの書き込み方と、 そのファイルからの読み込み方で困っています。 たとえば以下のような連想配列（ハッシュ）があって %colorFile = ( 'red'=>'5', 'green'=>'10', 'blue'=>'3' ); この情報をサーバーの color.dat ファイルに書き込んで保存し、 変更があったときにファイルからデータを読み込むには どのようにしたらいいのでしょうか？ 連想配列（ハッシュ）のまま保存すると color.datの中身が green10blue3red5 のようになってしまい、 読み込んだときに連想配列（ハッシュ）に復元できません…。 よろしくお願いします。
$ref == 0 が正常に判定されていないようです。なぜでしょうか？ また、if($tag =~ m/^tag$/ && $ref == 0){について、どのように改良するのが適切でしょうか？ $| = 1; my $tag = "tag"; my $ref = "test"; if($ref eq ""){$ref = "0";} $ref =~ s/%([a-f\d]{2})/pack 'H2',$1/egi; if($tag =~ m/^tag$/ && $ref == 0){ print $ref; }
例えばある配列内に @moji = (ak, df, gc); などという値でも文字でもが格納されていたとして、 $x = "ak"; といったある変数に格納されている値・文字（この場合はak）と一致する要素が配列@mojiに格納されていた場合に、その格納されている要素の添え字番号（配列の添え字番号）を返すような関数はないでしょうか？ イメージとして $res = mch($x); とすると、0が返されて$resに格納されるというものです。 ちなみにRという言語では > a <- c("ljj", "B0", "op199") # 変数aに3つの文字列要素を代入する > res <- which(a == "op199") # which()は引数に指定された論理に一致する要素番号を返す > res # aについて，a == "op199"がTRUEとなるのは要素番号3であるから，3を返す [1] 3 というものがあるのですが、これと同じような関数が欲しいのです（泣）
perl勉強中のものです。 perlにてプログラムを作成中ですが、フォルダを ダイアログを使って指定したいです。 参考ページを調べvbsにて以下のプログラムを作ってみました。 ****************************************************************** Set Shell = CreateObject("Shell.Application") Set objFolder = Shell.BrowseForFolder(0, "フォルダを選択してね！", 1, "c:\\") if objFolder is Nothing then Msgbox("ちゃんと選んで頂戴！") else Msgbox(objFolder.Items.Item.Path) end if ****************************************************************** 理解しきれていないのですが、vbsをperlに埋め込む？（変換？）ことができるようで モジュールを使って、上記のプログラムから参考を調べ、見よう見まねでperlで 作ってみましたが、何も表示せず、動作しません。 どこに問題があるか教えていただけないでしょうか？ ****************************************************************** use Win32::OLE; my $Shell = Win32::OLE->CreateObject("WScript.Shell"); my $objFolder = $Shell->BrowseForFolder(0,'フォルダを選択してね', 1, 'c:\\' ); unless ($objFolder) { $Shell->MsgBox('ちゃんと選んで頂戴！',undef,'フォルダ選択',1); } else { $Shell->MsgBox("$objFolder->$Items->$Item->$Path"); } ******************************************************************* とんちんかんなプログラムを作っているかもしれませんが、 ご指導よろしくお願いします。
僭越ながら、質問させていただきます。 タブ記号で区切られたTSVファイルというものを扱っているのですが、まずtest.tsvファイルを配列に格納して、そこから2列目の値すべてを降順にソートし、 (列をソートした結果の行は、ちゃんと最初のまま保持され、バラけずに出力されるようにしたい) その結果をresult.txtに表示させるプログラムを作りたいと思っております。 ですが、自分が書いたプログラムではまったく動かず、どこが悪いのかも情けないことにわかりません…。 　かれこれ何時間も悩んでいますが、まったく方策が見出せません。どこをどう直せばいいのか、ヒントだけでも構いませんので、教えてくださいませんでしょうか。 プログラムは以下です。 #!/usr/bin/perl use strict; use warnings; use Fatal qw/ open /; my @values; my $tsv_file = "test.tsv"; my @tsv = &readtsvfile($tsv_file); @values = sort { $a->[1] cmp $b->[1] } @tsv; open(DATAFILE, '>>result.txt') or die("error :$!"); foreach(@tsv){ print DATAFILE; } sub readtsvfile { open(IN, $_[0]); while(<IN>) { chomp; push @tsv, [ split(/\t/) ]; } close(IN); return @tsv; } close DATAFILE; このプログラムの手直しでも新しい方法でもなんでも構いません、何か教えてくだされば、本当にありがたいです。よろしくお願いします。
perlのスクリプトをダブルクリックするとコマンドプロンプトがでてきて、どんなスクリプトでもそのスクリプトの結果表示の直前に自動的にwindowが閉じてしまいます。 いつもはコマンドプロンプトを開いてドラッグして起動しているのですが、直接スクリプトを開く方法はないのでしょうか？？ 回答よろしくお願いします。
アメリカでサイトを構築しております。FormMailとNMSを使い、メールフォームを作成したのですが、うまくいきません。internal server error と表示されてしまいます。サーバはApacheです。 以下、コピペします。よろしくご指導下さい。サイトはまだ不完全のため 架空の名前(sample)です。またパーミッションは755で指定しております。 #!/usr/bin/perl -wT # # NMS FormMail Version 3.14c1 # PROGRAM INFORMATION # ------------------- # FormMail.pl Version 3.14c1 BEGIN { $DEBUGGING = 1; $emulate_matts_code= 0; $secure = 1; $allow_empty_ref = 1; $max_recipients = 2; $mailprog = '/usr/sbin/sendmail -oi -t'; $postmaster = ''; @referers = qw(sample.com localhost); @allow_mail_to = qw(license@sample.com @sample.com localhost); @recipients = (); %recipient_alias = ( '1' => 'license@sample.com', '2' => 'translation@sample.com', '3' => 'hello@sample.com', ); @valid_ENV = qw(REMOTE_HOST REMOTE_ADDR REMOTE_USER HTTP_USER_AGENT); $locale = 'ja_JP'; $charset = 'Shift_JIS'; $date_fmt = '%A, %B %d, %Y at %H:%M:%S'; $style = '/css/style_screen_black_slogan.css'; $no_content = 0; $double_spacing = 1; $wrap_text = 0; $wrap_style = 1; $address_style = 1; $send_confirmation_mail = 1; $confirmation_text = <<'END_OF_CONFIRMATION'; From: license@sample.com Subject: 翻訳サポート申し込み http://www.samplereal.com/about.html#schedule END_OF_CONFIRMATION これに追加として、 1 入力フォーム記入漏れがあれば、漏れた部分を赤字で警告を出したい 2 申し込みが完了した時点で「ありがとうございました」等のメッセージを表示したい 3 送信者が送信を完了するとわたし宛にメールと送信者のメアドに「申し込みを受付つけました」等のメッセージを 自動送信したい ご面倒ですがよろしくお願いいたします。
正規表現のパターンマッチについて、 質問させていただきます。 現在、EUC-JPでパターンマッチングしており、 文章は、全て、半角から全角から処理に変換しております。 foreach(@list){ if($file =~ /$_/){ print"$_\n"; } } 以上のように、$fileの内容に対して、@listにある項目すべてでマッチングしようとしています。 $fileは、長い文章が格納されています。 $_ が　「ローランド＿ディー．ジー．」（＿は、全角空白）の場合、 print"$_\n"をみると、$file中の「：ランドクルーザー」という部分の”ランド”部分のみが出力されてきました。 文章の途中に出現する単語なので、”＾”や”$”等を用いての完全一致が使えずに困っています。 どのようにしたら、$file中の$_と部分的な一致ではなく完全一致（？）になるのでしょうか？
Apache HTTP Server 2.2.17 と 2.0.64 をインストールして、前者のみをアンインストールしました。 しかしタスクバーに表示されているApacheのアイコンをダブルクリックしてみると、消したはずの2.2が一覧に表示されます。 どうすれば消すことができるのでしょうか。 また、スタートメニューやインストール先にもファイルやフォルダが残っています。 コントロールパネルから追加と削除を行ったのですが、これでは消せないのでしょうか。
Perl言語で例えば　aiueoと入力します そうしたら、あいういお　と返ってくる こんな感じで ローマ字で入力をうけたらひらがなで返ってくる事はできませんか?? botで使用したいと思っているのですが どなたか回答おねがいします
Perlでmyを使う場合、サブルーチンの内外での宣言の違いについて知りたいです。 私はよくある変数をそのプログラム内全体で使う時(カウントするだけの$iみたいなものや、DBのクエリなど)は、同じ変数名をサブルーチン内で毎回宣言するのが嫌（個人的に同じことを重複するプログラムが好きではないという主義）なので、サブルーチンの外でmyを宣言するのですが、myとかはサブルーチン外で宣言するとどんな問題が生じる可能性があるのでしょうか？ また毎回サブルーチン内で宣言するのと外部で宣言するのではどういった時に問題になるのでしょうか？もちろんサブルーチンの外でmy宣言した場合はサブルーチンにその変数が引き継がれることは知っています。 リファレンス部分で変わるような記述を見たことはあります。 さしあたって問題を感じでいないのです、ふと疑問に思ったのですが、どうもそれに書かれたソースが少ないので御存知の方がいればぜひ御教授願いたいです。 <例> my $hoge; sub hoge1 { $hoge = 1; } sub hoge2 { $hoge = 5; } と sub hoge1 { my $hoge = 1; } sub hoge2 { my $hoge = 5; }
ネットで検索しながら、表題のことをやろうとしているのですがうまくいきません。 やりたいことは、eucJPのファイルを読み込み、必要な分だけを整形して取り出し eucJPのファイルとして出力したいです。（少し追記も必要です） 根本的なところが理解できていないので、困っているのですが、 以下のようなコードを組み合わせて試してみています。 use encoding "euc-jp" binmode STDERR, ":encoding(euc-jp)"; （STDINとかSTDOUTも指定してみたりしました） perlを使う場合には、cat input.txt | hoge.pl > output.txtとしています 環境は、Ubuntuを使っていて、perlのバージョンは5.10.0となっています。 なにかアドバイスか参考URLあればお願い致します。
お世話になっております。 フォームから入力された文字を、 「半角カタカナ→全角カタカナ」変換したいのですがうまくいきません。 コーディングは以下の通りですが、問題の箇所がわかりません。 どなたかご教授ください。 なお、jcode.plは、最新のものを使っています。 #↓=============================================== ##### フォームデータ受け取り if ($ENV{'REQUEST_METHOD'} eq 'POST') { 　read( STDIN , $buffer , $ENV{'CONTENT_LENGTH'} ); } else { 　$buffer = $ENV{'QUERY_STRING'}; } # 文字コードを正確に取得するために，全ての送信データをいったん文字コードチェックする $buffer1 = $buffer; $buffer1 =~ s/%([0-9a-fA-F][0-9a-fA-F])/pack("C", hex($1))/eg; $kcode = &jcode::getcode(*buffer1); @pairs = split(/&/ , $buffer); ##### フォームデータのデコード、漢字コードをsjisに変換 foreach $pair (@pairs) { 　($k,$v) = split(/=/,$pair); 　$v =~ tr/+/ /; 　$v =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C",hex($1))/eg; 　&jcode'convert(*v,"sjis",$kcode); 　# 半角カナを全角に変換 　if($kcode eq 'sjis') { 　　&jcode::h2z_sjis(\$v); 　} 　if($kcode eq 'euc') { 　　&jcode::h2z_euc(\$v); 　} 　if($kcode eq 'jis') { 　　&jcode::h2z_jis(\$v); 　} 　$in{$k} = $v; } #↑=============================================== （なお、全角スペースは、半角スペースなどに変更願います。） よろしくお願いします。
大学での研究でperlを使用しているのですが、次のような問題が起こって少し困っています。 Perlで以下のようなscriptを書いたのですが、うまく置換してくれないのです。 *************************************************************************** printf(STDERR "start replacement\n"); $L1_before="+ L1_01\n"; $L1_after=3.14; $string=~ s/(=$L1_before)/=$L1_after/g; printf(STDERR "L1_before=%s",$L1_before); printf(STDERR "L1_after=%.2f\n",$L1_after); printf(STDERR "string=%s\n",$string); printf(STDERR "end replacement\n"); **************************************************************************** 実行結果は、以下の通りです。 **************************************************************************** start replacement L1_before=+ L1_01 L1_after=3.14 string= end replacement **************************************************************************** これは簡易版なのですが、やっていることはそのままです。 何が問題になっているのでしょう。わかる方は教えていただけると助かります。 ちなみに、私はPerlを勉強し始めたばかりです。
perlで一定の範囲ごとにカウントさせる方法について教えてください。 例えば、data.txtに、-10≦n≦10の範囲で様々な数が入ったファイルがあるとして、 -10.0 ≦ x ＜ -9.9 -9.9 ≦ x ＜ -9.8 .... 9.8 ≦ x ＜ 9.9 9.9 ≦ x ≦ 10.0 (←最後は≦のほうがいいですが、＜でもOK) と0.1ごとに区切って、 その範囲に入る数をカウントしたいとき、 ifや+=を使って範囲を指定して、カウントアップさせる方法もありますが、 指定したい範囲の数が多いと、ifばかりをプログラム内に羅列するのは面倒です。 できれば以下のような結果が表示されるとうれしいのですが… 中間値　カウント数 -9.95 3 -9.85 6 ... すっきりした書き方はありませんか？よろしくお願いします。
Perlのプログラムのエラーです。ローカルでは問題なく動きました。サーバはさくらサーバで文字コードはEUC－JPです。 CGIから文章をMECAPIという形態素解析APIに送って、品詞ごとにファイルに書き込みます。 Status: 500 Content-type: text/html Software error: Can't locate object method "content" via package "HTTP::Response=HASH(0x86e9250)" (perhaps you forgot to load "HTTP::Response=HASH(0x86e9250)"?) at test9.cgi line 49. #!/usr/local/bin/perl use strict; use warnings; use LWP::UserAgent; use Encode qw/encode decode/; use utf8; use CGI; use CGI::Carp qw( fatalsToBrowser); my $str; my $i; my $j; &main; sub main{ my $q = new CGI(); $str = $q->param( "words" ); $str = decode('euc-jp', $str); my $title = encode('euc-jp', "MeCab APIを呼出す"); my $h1 = encode('euc-jp', $str . "の品詞"); print $q->header( -type =>"text/html", -charset => "euc-jp" ); print "<meta http-equiv=\"refresh\" content=\"5;URL=./test2.html\">"; print $q->start_html( $title ), $q->h1( $h1 ), $q->start_ul; my $esc = CGI::escape($str); Encode::from_to($esc, "euc-jp", "utf8" ); my $ua = LWP::UserAgent->new; $ua->agent('PerlSample/0.1'); $ua->timeout(5); my $response = $ua->get('http://mimitako.net/api/mecapi.cgi?sentence=' . $esc . '&response=surface,feature'); Encode::from_to($response, "utf8", "euc-jp" ); my @res = split(/<word>/, $response->content); foreach $i (@res){ $i = decode('utf8', $i); my @wc = ("名詞", "動詞", "形容詞", "助動詞", "助詞" , "接頭詞" , "接続詞" , "記号" ); my @fn = ("N" , "V" , "A" , "MV" , "JOSHI","SETTOUSHI", "SETSUZOKUSHI", "KIGOU"); for($j=0; $j<@wc; $j++){ if($i =~ /<surface>(.+)<\/surface><feature>$wc[$j]/){ $str = encode('utf8', $1);#utf8 my $filename = encode('euc-jp', $fn[$j]); open(OUT, ">>./dir/$filename.txt"); Encode::from_to($fn[$j], "utf8", "euc-jp" ); print $fn[$j].$str." "; $str = encode('euc-jp', $1); Encode::from_to($str." ", "utf8", "euc-jp" ); print OUT "$str\n"; close(OUT); last; } } } }
ファイルデータ内容を　SQL条件へ代入する方法を教えてください。 例）ファイル(1) あいう かき さしす あかさたな … これを　SQLのWhere区に　条件設定したい。 SELECT　XXX　FROM　VVV　where（ZZZ　LIKE　'あいう'　OR　ZZZZ　LIKE　'かき'　OR　…）； という風にファイルの行があるだけ　すべてLIKE条件にいれられて、一度に計算できるようにしたい。 Perl（またはShell）プログラムで　ファイル読込、SQLの実行をして、結果を取得する方法をおしえてください。 プログラムは詳しくないので、詳細に書き方を教えていただけると幸いです。 よろしくお願いいたします。
大量データから抽出する際の効率よいperlプログラム作成について教えてください。 例） 大量データ　Aファイル　3列　可変値（数値、URL、数値）タブ区切り　重複値あり 123　http://www.XX.co.jp/XX　4567 1111　http://www.XX.co.jp/XX　3333 3　http://www.XX.co.jp/YZ　4567 1111　http://www.YYY…　116 … 抽出対象データ　Bファイル　1列（URL）重複なし http://www.XX.co.jp/XX http://www.XX.co.jp/ZZZ … Aファイル、BファイルともにURL降順ソートされている BファイルにあるURLがAファイルにある場合　Aファイルのその行を抽出したい。 grepで実施すると　すごい時間がかかってしまうため、効率よい抽出方法をおしえてください。
下記サイトの、正方形メインadのFlashをPerlで作る方法は？ Perl初心者です。本などで勉強しているのですが、まず実際にプログラミングしてみようと思いました。 下記サイトの右側にある正方形のメインadをPerlで、作ってみたいのですが、 入門者向けに作り方をご教示お願いします。 http://www.fbar.jp/ またPerlに関する質問サイトなど、（プログラマー向けhow to質問サイト）などで、 オススメのサイトが御座いましたら、そちらもご教示頂けますと幸いです。 よろしくお願いします。
正規表現内での変数の扱いに関して あるの変数の文字列が別の変数の文字列を冒頭に含むかどうか判別した上でその差分を抽出するコードを書こうとしています。 $a='komekoron'; $b='kome'; if($a=~/^$b(.+)$/){print $1}; このコードを実行すると「koron」が出力されます。 同様に以下のコードで「:」を出力させたいのですが上手くいきません。 $a='*:'; $b='*'; if($a=~/^$b(.+)$/){print $1}; 出力内容は「*:」 これは変数内の文字列がパタンとして扱われているのでしょうか。どうすれば意図する動作になるでしょうか。ご教授願います。
cgiで表示するhtmlページ内でバイナリ画像を出力したい 「CGI 画像出力」でググったページで下記のコードがありました。 下記コードは、 Content-typeをimage/gif等にして バイナリを print すれば表示される という書き方になっていると思いますが、 content-typeがtext/html のページ内でバイナリをprintした場合 バイナリが文字列としてグシャァァァと表示されてしまいます。 ------- $view = 'aaa.jpg'; print "Content-type: image/jpeg\n\n"; #コンテンツタイプを指定する open IMGG,"$view"; #ファイルハンドル IMGGに画像ファイルを読み込む binmode (IMGG); #画像なのでバイナリモードに設定する print <IMGG>; #ファイルハンドルを画面に書き出す close (IMGG); #ファイルハンドルを閉じる exit; ------- content-typeがtext/htmlの状態でバイナリの画像を表示するには どうすればよいのでしょうか？ cgiを２つ用意して、上記のコードを img src=～～.cgi という形で 呼び出すしかないのでしょうか？
コメントアウト以外を置換対象とする正規表現について質問です。 以下の(1)の入力に対して(2)の結果を得たいのですが、 綺麗な正規表現を使って置換する方法を教えて下さい。 とりあえず複数回に分けて無理やり置換したのですが、 とても汚いコードになってしまいました。。。 (前提) ・コメントは/*...*/ と //... の2種類 ・コードは改行を含めて1変数に格納されている ・目的はコメントアウト以外の「abcde」を「aaaaa」に置換すること (1) ---------------------------------------------------- /* abcde fghij */ abcde fghij /* abcde fghij */ abcde fghij // abcde fghij abcde fghij /* abcde fghij */ abcde fghij /* abcde fghij */ ---------------------------------------------------- (2) ---------------------------------------------------- /* abcde fghij */ aaaaa fghij /* abcde fghij */ aaaaa fghij // abcde fghij abcde fghij /* abcde fghij */ aaaaa fghij /* abcde fghij */ ---------------------------------------------------- (考えた方法) ---------------------------------------------------- $st = "#START#"; $ed = "#END#"; s/\b(abcde)\b/${st}$1${ed}/sg; s/(\/\*.*?)${st}(.*?)${ed}(.*?\*\/)/$1$2$3/sg; while(s/(\/\/.*?)${st}(.*?)${ed}/$1$2/g){}; s/${st}abcde${ed}/aaaaa/sg; ---------------------------------------------------- ご回答よろしくお願いします。
アンケートCGI作成について、form actionの呼びだし等について質問です。 初めまして、ＣＧＩアンケートを作成しようとしているＰｅｒｌ初心者です。 説明ページ（ex01.html） ↓ フォーム付きアンケートページ(enk01.html) ↓ 説明ページ(ex02.html) ↓ 以下略 という流れでアンケートを続かせたいのですが (だいたい、ex.htmlとenk.htmlが各20ずつくらいです。) フォーム付きアンケートのフォーム <form action="form.cgi" method="post"> <input type="radio" name="Emotion_Body" value="0" checked> 選択肢１ <input type="radio" name="Emotion_Body" value="1"> 選択肢２ <input type="radio" name="Emotion_Body" value="2"> 選択肢３ <input type="submit" value="次のアンケート"> となっていて、actionに次のページのhtmlをいれ込むことができませんでした。 （form.cgi：formから受け取ったデータを外部ファイルへ書きだすＣＧＩファイルです。） フォームの「次のアンケートボタン」を押すと、 form.cgiにフォームのデータを送りつつ、ex02.htmlを表示させるということはできないものでしょうか？ 過去ログによるＣＧＩに表示させる方法を書くのだと、 フォームページの間に、ただのhtmlファイルを挟むので、 （例：enk01.html→ex02.html→enk02.html→…） 各ページに対応したＣＧＩファイルを書かなければならないということなのでしょうか？ よろしくお願いいたいします。
CGIから複数の別プログラムを同時に呼び出す Web上にある複数の画像を wgetで自サーバー内に取得してから、それにリンクした形のHTMLソースを吐き出すプログラムがあります。 ところが、複数の画像はループで順に取りに行っているものですから、全部取り込んでからHTMLを表示させるのに非常に時間がかかってしまいます。 そこで、wgetでファイルを取りに行くサブルーチン部分を独立させたプログラムを別に作り、接続先などのプロパティを渡した上、それぞれ同時に複数立ち上げて実行させようと思うのですが、可能なのでしょうか？ system()関数だと一応別のプログラムを呼び出せるようですが、結局親プログラムは呼び出した一つの子プログラムの終了まで待って次に行くみたいなので意味ないかと・・・。 どなたかご教授頂ければ幸いです。
外部関数を利用する方法。 初歩的な質問で恐縮ですが、ご教授願います。 perlで、他のディレクトリ(フォルダ)にあるcgiファイルの関数（sub aaa()）を呼び出したいのですが、記述方法がわかりません。 /aaa/a1.cgi #↓=========================== ： &hoge; ： #↑=========================== /bbb/b1.cgi #↓=========================== ： sub hoge{ ： } ： #↑=========================== このような感じです。よろしくお願いします。
Apache HTTP Server 2.0 Apache HTTP Server 2.0を使用しているのですが、パソコンを起動するとタスクバーに勝手に表示されます。 パソコン起動時に自動起動しないようにするにはどうすればよいのでしょうか。
ループ内での置換方法について 以下の内容で置換を行ってみたのですが、書き方が悪いのかうまく取得できません。 $hoge="現在のナンバーは《no》です"; for(1..3){ $hoge=~s/《no》/$_/g; print"$hoge<br>"; } 結果、noの部分は全て１となりました。 私の予定では、１、２、３と順に表示される予定でしたが・・・。 現在のナンバーは1です 現在のナンバーは2です 現在のナンバーは3です と表示されるようにするにはどのように書けばよろしいでしょうか。 どなたか教えていただけませんか。 よろしくお願いします。
sendmailの設定がわかりません。 別会社からアイルへサーバ移行したのですが 以前のサーバ会社で使えていたメールフォームが アイルで試した所、エラーが出て、メールフォームの送信ができない状態です。 メールフォームのset.plというファイル内の # SENDMAILの設定 $sendmail = '/usr/sbin/sendmail'; 上記記述の部分の変更かとは思うのですが どう変更してよいのか、解りません。 知識も少なく、参考になるような事でも構いませんので 教えていただければと思います。 よろしくお願い致します。
Perlでの$ENV{REMOTE_ADD}の信ぴょう性を教えてください。 Perlによる、CGIサイトを運営しています。 IPアドレスを$ENV{REMOTE_ADD}で取得し、Firewall内プライベートアドレス(10.*.*.*)以外はloginをしないと内容が表示されないようにスクリプトをつくり、Firewallの内外から動作確認し、きちんと動いていたのでそのまま運用していました。 ところが、先日海外（ハワイ）に行った際、アップルストアでそのサイトにアクセスした際にloginなしで内容が表示されてしまいました。 アップルストアに置いてあったPCなので、IP偽装などは行っていないと思われますので、どうして見えるのだろうかわかりません。 $ENV{REMOTE_ADD}で取得した値は信ぴょう性がないのでしょうか？それとも、10.*.*.*はグローバルアドレスとして使用可能なのでしょうか？
カウント結果をカレンダー表示するプログラムを教えてください サイトのアクセス数をカウントして、カレンダーデザインで表示したファイル出力できるperlプログラムを教えてください。 カウント済みファイル１（格納形式：カウント数　日付）があります。 10　2010-10-01 11　2010-10-02 8 2010-10-03 4 2010-10-08 6 2010-10-09 … 3　 2010-11-01 … これを　下記のような形式で表示したいです。 2010-10 Sun, Mon, Tue, Wed, Thu, Fri, Sat , , , , , 10, 11 8, 0, 0, 0, 0, 4,　6 … 2010-11 Sun, Mon, Tue, Wed, Thu, Fri, Sat , 3 ,… どのようにすると上記のようなカレンダー上に　カウント数を表示できるのか 教えてください。よろしくお願いいたします。
記号とあらば、１文字でも全て削除する方法（記号全滅作戦） お世話になります。 先日、、、、 http://oshiete.goo.ne.jp/qa/6246444.html で、３文字以上つづく文字を根こそぎ削除する方法について助けていただきました。 （ありがとうございました） この様な事をしたい背景としましては、記号等が２０文字程以上つづくと、TABLEの表組の中で、それらの連続文字が「改行されず」、ぺージのレイアウトをメチャクチャにするからなんです。 （同じ悩みを抱えている方も少なからずいるのではないかと思うのですが。。。） そこで、３文字以上の文字が連続するものは、根こそぎ削除！という、先日教えていただいた方法の導入により、この問題は解決するだろうと、心安らかな日々を送っておりました。 が、今日になって。。。 ∴▼△▼∴△▼△∴▼△▼∴△▼△∴▼△▼∴△▼∴ ★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆ 等という記号の（１文字おき、２文字おき）連続が某APIから吐き出され、それを表示している私のサイトのレイアウトが例によって、むちゃくちゃになっておりました（泣）。 そこで、解決策としては、、、 ●記号とあらば、１文字でも、根こそぎ削除（但し、日本語の句読点、英語のピリオド等は除く） もしくは、、、 ●１文字おき、２文字おきでも、そのパターンが３回以上連続する文字列の場合は、それらを根こそぎ削除 を思いつきました。 後者につきましては、そのマッチさせる手法を想像する事すらできないので（泣）、前者について、あれこれググッてみたのですが、これまた、どんぴしゃりのヒントを得る事ができませんでした。 ※削除したいものは「シフトJIS 第１水準漢字コード表の中の記号群」なので、 http://crocro.com/pc/write/hide/chimarl09_02.htm … こちらのコードでマッチさせればよいのかと思ったのですが、コード表記が 「8140～81FF」 となっており、先日教えていただいた [¥x81-¥x9F¥xE0-¥xFC] 等とは表記が異なる為、適応できません。(^_^;) ということで、SJISの憎き記号達（但し、日本語の句読点、英語のピリオド等は除く）を削除する（マッチさせる）手法について、アドバイスいただければ幸いです。 ※ちなみに、、、、 $contents=~s/★//g; $contents=~s/☆//g; は効果あるのですが、何故か、、、、 $contents=~s/△//g; $contents=~s/▼//g; は効き目がありませんでした。(^_^;) （そこで、文字コードで範囲を指定して根こそぎ削除を狙っています）
perl でrequireされたファイル自身のフルファイル名を取得する方法を教えてください __FILE__ だとパス情報がありません。 また　起動したスクリプトではないので $ENV["SCRIPT_FILENAME"] , $0 では、取得できません。 どこに格納されているのでしょうか？ %INCでは、無理ですし、@INCを使う方法では、信憑性にかけます requireするときにパスをグローバル変数に代入せずに どうしてもrequireされたファイル自身で 確実に正確な同じフォルダ名を取得する必要があるのでお願いします。 (※phpでは、__FILE__でフルパスで返ってくるので私の探し方が悪いだけだと思っています) perlでの取得方法の情報を お手数ですがよろしくお願いします
perlで以下の動作が出来る機能を作っています。 1.ファイル名が載っているfname.txtを読み込む。 2.読み込んだファイル名を開く。 3.ファイルの内容を変換。 4.変換したファイル内容をnew_fileディレクトリに保存。※ファイル名はそのまま。 1～4までを作ったのですが、fname.txtで指定した全てのファイル名を変換して保存したいのに、一番最初に記載されてあるファイル名しか置換されません。書籍などで調べてもわからないのと今日中に製作したいのでここで質問しました。 ご教授お願いします。 以下にソースを貼ります。 #!/usr/local/bin/perl -w use strict; my $x = 0; my $y = 0; my $z = 0; open(IN,"<"."fname.txt")or die "cannot open txt_file: $!";#fname.txtを開く while(<IN>){ #chomp $_;#改行してファイル名を書き込んでいるので、改行を消去 my $fn = $_; my @F = $fn; foreach my $FNAME (@F){ open(FILE,"$FNAME")or die "cannot open txt_file: $!";#fname.txtに記載してあるファイルを開く open(OUT,">". "new_file/$FNAME")or die "cannot write txt_file: $!";#new_fileを開いて書き込む while(<FILE>){#以下、ファイルの置換内容 my @d; if (m/^[X1-9]+ (.*)/s) { ($y,$z)=(0,0); $d[0] = ++$x; $d[1] = 0; $d[2] = 0; $_ = $d[0] . " " . $1; } if (m/^[X1-9]+\.[X1-9]+ (.*)/s) { $z=0; $d[0] = $x; $d[1] = ++$y; $d[2] = 0; $_ = $d[0] . "." . $d[1] . " " . $1; } if (m/^[X1-9]+\.[X1-9]+\.[X1-9]+ (.*)/s){ $d[0] = $x; $d[1] = $y; $d[2] = ++$z; $_ = $d[0] . "." . $d[1] . "." . $d[2] . " " . $1; } print OUT $_; } } close(IN); close(FILE); close(OUT); exit ; }
utf16の記号のutf8へのエンコード（もしくはマッチ又は削除）がうまくいきません。 お世話になります。 前々回、、、、 http://oshiete.goo.ne.jp/qa/6232556.html でUTF-16をUTF-8に変換する方法を教えていただきました。 （その節は、ありがとうございました） $name=~s/\\u([[:xdigit:]]{4})/chr eval "0x$1"/eg; が、この方法だと、記号が変換されず、例えば、、、 ●「～」　は　「\x{301c} 」　と表示され ●「・」　は　「\x{2022}」　と表示されてしまいます。 これらの記号のデコード方法が調べても分からなかったので、いっそ、削除しちゃえ！とばかりに、、、 「「x」から始まり「}」で終わる文字は根こそぎ削除！というプログラムを組み込んでみたのですが、まったく反応せず。 チェックの為に行った「x」だけの削除ですらマッチせず。。。。 （これでは反応しないはずですね。。。） ということで、utf16の「記号」のutf8へのエンコード（もしくはマッチ又は削除）の方法について、アドバイスいただければ幸いです。
Perlを使用して2つのファイルから同じRecordのみ抽出する方法について はじめまして。 Perlを使用してフィイル1にあるレコードのみファイル2から抽出したいのですがhashを使用して実施してもうまく取り出せないため、何か方法やアドバイスが頂ければと思います。 なお、ファイル2にあるカラムで必要な部分はr1とr8のみですのでその部分のみ抽出し別のファイル（ｄファイル3）に出力できればと思います。 宜しくお願い致します。 ■ファイル1（カラム1つ） r1 5aa00000000 5aa00000001 5aa00000002 5aa00000003 　　・ 　　・ 　　・ 約50,000行 ■ファイル2（カラム9つ） r1 ,r2,r3,r4,r5,r6,r7,r8 ,r9 5aa00000000,00,00,00,00,00,00,XXa,00 5aa00000001,00,00,00,00,00,00,XXb,00 5aa00000002,00,00,00,00,00,00,XXc,00 5aa00000003,00,00,00,00,00,00,XXb,00 　　・ 　　・ 　　・ 約200,000行 ■ファイル3（カラム2つ） r1 ,r2 5aa00000000,XXa 5aa00000001,XXb 5aa00000002,XXc 5aa00000003,XXb 　　・ 　　・ 　　・ 約50,000行
ファイルアップロード時の経過表示 既に完成しているファイルアップロードのCGIを経過表示付きタイプに改造したいと考えています。 perlで作成、UNIXサーバで稼働しています。 アップロードしている間の経過表示は無理でしょうか？ 一番簡単に実現する方法はどのようなものかアドバイス頂ければと思います。 なるべく改造は少なく済ませたいので、実現出来るなら有料のものでも構いません。 色々検索してみましたが、捜すことが出来ませんでした。 全面的に違うシステムに作り替えないと無理なものでしょうか？
perlの正規表現について教えて下さい。 【１】next if /^abc￥[1|2|3|4￥]/; 【２】next if /^abc￥[￥[1-4￥]￥]/; 例えばですが、 abc[1] abc[2] abc[3] abc[4] だった場合、next ifでスキップしたいと考えています。 【１】の場合、成功しましたが、【２】だとスキップされませんでした。 abc[ ではじまり、その後ろが「１、２、３、４」のいずれかで、]で閉じる場合、 スキップしたいと考えています。 【1】の場合、現在は[４]までだけですが、これが、[1]から[１００]まであった場合, 1|2|3・・・99|100のように記述する事になってしまいますので 困っております。
Apache HTTP Server 2.0.54 Perlの本に上記のものをインストールするように書いてありました。 しかし本自体が5年ほどの前のものなので、新しいバージョンがあると思います。 新しいバージョンの実行ファイルはどこにありますでしょうか。 公式を見てみましたが、拡張子がmsiのものが見つからず、困っております。 また、2.2.xなどもあるようですが、2.0とどちらが良いのでしょうか。
日本語処理（文字コード）関係のエラーの対処法について ・環境は、XAMPPを使用しています。 perl、phpの簡単なプログラム（hello worldのようなもの）を実行して動きました。 ・asperlを文法チェックに使っています -実行したいサンプルプログラム- 原文（「SPIDERING HACKS中のプログラム」）は下記のutf8がshiftjisです。が、utf8に変更しました #!/xampp/perl/bin/perl use strict; use LWP::Simple; use Encode; use encoding 'utf8'; # 使用しているプラットフォームにあわせてください。 binmode(STDERR, ':raw :encoding(utf8)'); # 同上 my $id = shift @ARGV || '074'; # 引数の取得（デフォルトはニュージーランド） # 外務省海外安全ホームページ my $url = "http://www.anzen.mofa.go.jp/info/info4.asp?id=$i … my $content = get($url); die "$url を読み込めませんでした。" unless defined $content; # $contentを読み込んで危険情報を確認する。 $content = decode('utf8', $content); # コンテンツのコード変換 $content =~ s/<!--(.*?)-->//gs; # HTML内のコメント削除 $content =~ / SELECTED>▼([^<]+)</; # 国名の取得 print "$1\n"; if ($content =~ /現在、危険情報は出ておりませんが、/) { print "　危険情報は出ていません。\n"; } else { print "　危険情報が出ています！\n"; }; print "　詳細はhttp://www.anzen.mofa.go.jp/を見てください。\n"; ローカル環境で、asperlを使用して文法チェックを行うと、エラーはありませんでした。 ところが、ローカル環境で実行すると、 Cannot decode string with wide characters at C:/xampp/perl/lib/Encode.pm line 174. というエラーが出ます。 これは、Encode.pm の 174行目で引っかかってている、ということでしょうか？ だとしても、対処法が分かりません。 日本語処理で問題が発生しているようなのですが…。
オンラインゲームを作ろうと思っています。 多くの人が参加できるオンラインゲームを作りたいのですが、 キャラをキーボード入力で操作させることは可能でしょうか。
プログラミング初心者です。 MACを使用しています。 Perlでプログラムを実行する際に、 % perl ファイル名 とせずに % ファイル名 とする方法としてファイルの一番先頭に % #! perlのフルパス を入れると本に書いてあります。その際、実行する前に % chmod a+x ファイル名 で実行権限を与える、とありました。 実際にやってみると -bash: ファイル名: command not found となってしまいます。 そこでperlのフルパスが間違いなのかとperlのヴァージョンを調べる方法 % perlのフルパス -v を実行するとちゃんとヴァージョン名が出ます。 あとは検索パスがファイルを格納しているフォルダに通っていないからだと思うのです。@INCに検索パスをあらかじめ加えるには % setenv PERL5LIB 加えたいパス で出来るようですが、ターミナルで実行しても Can't open perl script "setenv": No such file or directory となってしまいます。 これはどのように実行するのが正しいのでしょうか？ 基本的な知識が乏しくてすみませんがお願いします。
CSVデータの行と列が一致した値を返すフリーのCGIを探しています。 分かるかとは思いますが、例として、それぞれの友達の家までの距離（m）とした場合、以下のような表（CSV）ができるかと思います。※数値はデタラメです。 ■■｜Ａ君｜Ｂ君｜Ｃ君｜Ｄ君｜Ｅ君 Ａ君｜----｜0100｜0050｜0800｜0200 Ｂ君｜0100｜----｜1000｜1020｜0700 Ｃ君｜0050｜1000｜----｜1340｜0020 Ｄ君｜0800｜1020｜1340｜----｜1000 Ｅ君｜0200｜0700｜0020｜1000｜---- この場合、以下のようなフォームから、行と列の一致する値を表示させたいのですが・・ <select name="select1"> <option value="Ａ君">Ａ君</option> <option value="Ｂ君">Ｂ君</option> <option value="Ｃ君">Ｃ君</option> <option value="Ｄ君">Ｄ君</option> <option value="Ｅ君">Ｅ君</option> </select>の家から <select name="select2"> <option value="Ａ君">Ａ君</option> <option value="Ｂ君">Ｂ君</option> <option value="Ｃ君">Ｃ君</option> <option value="Ｄ君">Ｄ君</option> <option value="Ｅ君">Ｅ君</option> </select>の家までは <input id="submit" value="検索" name="submit" type="button"> 出力値＝0100メートルです 通常レコードは、行1つに対して全ての列を表示されることになると思うので、例でいけば全部で25個のデータを用意しておいて、そのデータを呼び出すか、Ａ君から5人の家までのデータ(列)を表示させれる方法になると思います。 シンプルに、行（Ｘ軸）と列（Ｙ軸）を表示（Ｘ：Ｙ）させるようなフリーＣＧＩがあれば、Perl、PHP問いませんので教えてやってください。 よろしくお願いします。
３回以上連続する文字（どんな文字でも）を削除する方法 お世話になります。 掲示板等の文字列で、、、 ■■■■■■■■ や ＝＝＝＝＝＝＝＝＝ といった連続する文字列を削除したいと思っています。 その際「３回以上、同じ文字がつづいているものは、根こそぎ削除」という形にしたいと思い、 ~s///g; を用いて、あれこれやっているのですが （また、ぐぐって、あれこれ調べたのですが） 全く、うまくいきません。 どの様にすれば、うまくいくのか、アドバイスいただければ幸いです。
ActivePerl,UTF-8環境のCGIにてブラウザからアップロードしたファイルの保存に失敗する件について、原因と対処方法をお願いいたします。 以下の環境でCGIを作成していましたが、 　WindowsXP 　ApacheServer 　ActivePerl 5.10系 先日HDDがクラッシュしましたので、Windowsの再インストールからはじめて同じ環境を構築し動作確認を行っていたところ、新しい環境ではファイルのアップロードに失敗することが判明しました。 ファイルのバイナリが壊れるようです。画像等バイナリファイルをアップロードすると、ファイルサイズが3割程度増えたものが保存され、壊れます。 今回変わったところと言えば、ActivePerlのバージョンが最新になったくらいです。 調べても原因が判明しなかったことに加え、 　クラッシュ前の環境ではこのような問題はなかった 　Linuxサーバでは問題ない ので、悩んでいます。 問題部分のソースはこのようになります。 use utf8; # 略 CGIモジュールを使用しています $fh = $q->upload(key); open (OUT, ">$directoryname$filename"); binmode (OUT); while(read($fh, $buffer, 1024)){ print OUT $buffer;} close (OUT); close ($fh); どこも間違っていないと思うのですが、どなたかこの問題を解決できる方はおられるでしょうか。
ある書籍で、見つけました、perlのソースについて 疑問がありまして、お尋ねします。 ※下記は、perl/cgiソースの一部です。 ある書籍で見つけたものです。 >require 'cgi-lib.pl'; >&ReadParse(￥%test); 私は、(%test)だと思っているのですが。 ()の中の、先頭に「￥」を付けることに、どのような意味 があるのでしょうか >$test = $test{'test'}; 仮に、$testの値が「"<&>"」だったとしまして、以下 をごらん頂きたいのですが、 >open(ファイルハンドル,$fname) >while(<ファイルハンドル>){ >$test =~ s/￥"/￥&quot￥;/g; 私の認識では、「s/"/&quot;/g;」ではと思うのですが、 「￥」はどのような意味なのでしょうか 以下、３行も同じ疑問です。 >$test =~ s/&/\&testmp\;/g; >$test =~ s/￥</￥&lt￥;/g; >$test =~ s/￥>/￥&gt￥;/g; >print $_; >} 書籍で上記のソースを見たのですが、 HTMLのフォームのテキストボックスに、「"<&>"」と入力し submitボタンで、上記コードを含む、cgiを開きます。 そして、「"<&>"」を受取っても正しく、置換し、 cgiから、HTML($fname)を開くプログラムです。 置換後のHTMLファイルには、「"<&>"」と表示されます。 以上、よろしくお願いいたします。
JSON形式の文字データの変換方法で悩んでいます。 （WEB上のAPIを叩いて取得してきたデータです） 例えば、、、 \u30aa\u30c1\u30b2\u30fc\u30c6\u30ce\u30bb\u30eb この様な文字列です。 他のAPIで得られた文字データの場合、、、 Encode::from_to($name ,'utf8','sjis'); で問題なく日本語に変換できていたのですが、この形式の場合、全く変換されません。 上記の様な文字コードを日本語に変換するには、どうしたらよいのでしょう？ 助言いただけると幸いです。
perlのDigest::MD5;でのMD5算出が異なる 下記、スクリプトをレンタルサーバ上と、WindowsOS上で走らせてみたところ、おなじファイルにも関わらず、MD5が異なります。 何故でしょうか？ #!/usr/local/bin/perl use strict; use warnings; use Digest::MD5; my $file = 'test.zip'; my $ctx = Digest::MD5->new; open my $fh, "<$file"; $ctx->addfile($fh); my $md5 = $ctx->hexdigest; close($fh); open my $fh2, ">>md5.txt"; print $fh2 "$file $md5\n"; print "$file $md5\n"; close $fh2;
eval関数？エラーについて 掲示板の設置と設定時に各項目について必須や任意に設定できますが必須項目に無入力で投稿するとeval関数？エラーが表示されるのですが、この仕組みについて知りたいです。
Windowsサーバーでflockはできるのでしょうか？ 言語はPerlもしくはPHPで考えております。 確かWindowsサーバーはflockは利用できなかったと記憶しております。 しかしファイル同時書き込みの排他制御は必ず実装しなければなりません。 代替方法としてファイルをリネームして・・というやり方もあるようですが それしか方法はないのでしょうか？ データベースは使用する予定はありません。
perlでHTMLソースを解析してformタグの要素を取得したいのですが、そのようなライブラリはありますか？ できれば、javascriptでHTMLソースから情報を得られるようなAPIだと良いのですが。 即ち、document.forms[].actionとかdocument.forms[].elements[].valueのように。
DBM::Deepでの配列がうまく動作しない 普段よくgdbmを使うのですが、DBM::Deepを使うと配列も使える人のことで試しているのですが、 ちょっと動作がおかしいです。私が何か間違えているかもしれませんので、一度見ていただければと思います。 --------------------------------- use DBM::Deep; my @array; tie @array, "DBM::Deep", "bar.db" ; # ★３ @array=( [ "123" , "abc" ], [ "456" , "def" ], ); print qq($array[0][1]\n); # ★１ for my $ref(@array){ print "@$ref\n"; # ★２ } --------------------------------- 結果 --------------------------------- abc --------------------------------- これを実行してみますと、★１はちゃんと表示されるのですが、★２が何も表示しません。どうもループにも入りません。。 ここで試しに★３をコメントにしてみますと・・ --------------------------------- 結果 --------------------------------- abc 123 abc 456 def --------------------------------- これはどういう事なのでしょうか？ DBM::Deepでは値の列挙ができない・・・のでしょうか。 それとも何か間違えていますでしょうか？ どうぞよろしくお願いします。
perl でこのマッチは失敗しますか？ my $one = "FEFRGrgarGEEeg+05fweaEFJIEI+A"; my $str = "FEFRGrgarGEEeg+05fweaEFJIEI+A"; if($str =~ m/$one/){ print "same"; }else{ print "difference"; } exit; 5時間ほど悩んでそれらしいところを見つけたのですが、この部分で失敗しているようでした。 「+」記号がある為だと思うのですが、何故、このようなことになるのでしょうか？ このように、失敗するような避けるべき文字ありますか？ また、+記号などがあっても正しくマッチを使う方法はありますでしょうか？
形態素解析の解析内容を各品詞別にファイルに書き込みたいです。 以下のサイトのフォームに文章を入力すると品詞ごとに分解されます。 http://dai-gokuh.sakura.ne.jp/jikkenn/morph11.html その品詞をそれぞれの品詞ファイルに書き込みたいと思っています。 例えば、「餃子はおいしい。」と入力すれば、 餃子　は名詞ファイルに、 は　は助詞ファイルに、 おいしい　は形容詞ファイルに、 ○　はその他ファイルに書き込まれます。 また、「ラーメンはおいしい。」などと書き込むと今度はラーメンが新しいワードとしてファイルに登録されます。このようなプログラムを作りたいと思っています。 どなたかよろしくお願いします。 MECAPIについては以下のサイトもご参考ください。 言語はPerlでお願いします。 http://mimitako.net/api/mecapi.cgi
Perlの超初心者です。 mac osXを使っています。テキストエディットで、#! /usr/bin/perl print "hello world!\n";と書いてperl-test.plと保存しました。そしてターミナルを起動してperl-test.plとタイプしたのですが、-bash: perl-test.pl: No such file or directoryとなってしまいます。 試しにターミナルでperl -le "print 'hello world';"とタイプするとhello worldとかえってきました。 perl-test.plはfinderのデスクトップに保存してあります。いったいどうすればperl-test.plのファイルを実行できるのですか？ 教えて下さい。よろしくお願いします。
Perlで日付を取得する perlで1週間分の日付を取得し、セレクトボックスに格納したいと思っています。 なるべくいま使っているサブルーチンを使いたいです。 # 現在日時を文字列化する sub get_date_string { # local(@week) = ("日", "月", "火", "水", "木", "金", "土"); local(@week) = ("Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"); local($sec, $min, $hour, $day, $mon, $year, $weekday) = localtime(time); $year += 1900; $mon++; # 文字列化する if ($hour < 10) { $hour = "0$hour"; } if ($min < 10) { $min = "0$min"; } if ($sec < 10) { $sec = "0$sec"; } $weekstr = $week[$weekday]; return "$year-$mon-$day ($weekstr) $hour:$min"; # return "$year年$mon月$day日 ($weekstr) $hour時$min分$sec秒"; } これを別のルーチンで、 $today = substr(&get_date_string,0,10); $kinou = $today - 1; $ototoi = $today - 2; として、今日の日付だけでなく、昨日、おととい、その前の日を取得したいと試みましたが、今日は取得できても、$kinouや$ototoiは、すごい数字になってしまいます。 変わりに　-24*3600と引いてみましたがダメでした。 文字列に変更されていないから引けないのでしょうか？ かんたんに処理できそうでできないので、詳しいやり方を教えてください。
perlについて、教えてください。 formからのデータを受け取り、ファイルに書き込んでいく、cgiプログラムを考えているのですが、 その際、ファイルに特定の文字列があった場合、その行を削除して、書き込むという事を行いたいです。 例)test.htmlのテキストボックスに、値を入力（name="a_text")。そして、x.cgiファイルで, 「name=a_text」を取得し、keep.cgiファイルに書き込む。 再度、test.htmlの入力値を受け取り、ファイルに書き込む際に、ファイルに「a_text」があれば、その行を削除してから、a_textの２回目の入力値を書き込みたいと考えています ご存知の方、ぜひ、ご教授下さい。 宜しくお願いします。
　 PerlでCSSは使えますか？ Perlで掲示板を作ろうと思い、 デザイン部分をCSSでと考えいたのですが、 配布されている掲示板を参考に見てみると、 ほとんどCSSを使っていません。 そこで質問ですが、PerlでCSSは使えないのでしょうか？ 何が不具合があれば、教えてください。 宜しくお願いします。
perl/cgiについて、教えて下さい。 下記のようなことを、行いたいと考えています。 とりあえず、 　a.html 　b.html 　c.html があり、 ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿ 1：それぞれ、フォームに、テキストボックスが一つあります。 2:他のフォームに遷移できます。（例：a.htmlからc.hmtlのように） 3：各フォームに「A、B、Cの値を確認」ボタンがあります。 4：3のボタンをクリックすると、各テキストボックスで入力した 値が表示される。 【イメージ】 a.htmlのテキストボックスに、100を入力 b.htmlのテキストボックスに、200を入力 c.htmlのテキストボックスに、300を入力 した場合。 Aで入力された値は１００です。 Bで入力された値は２００です。 Cで入力された値は３００です。 ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿ と表示させる、cgiを作成したいです。 又、その際、hiddenを使用して行う方法（手順）を教えて頂けないでしょうか。 ファイルに書き込むことで、値を保持しておくのではと 考えましたが、a.htmlの値１００を書き込み、再度、a.htmlの 値を書き込むと、a.htmlのフォームから送られた値が２つ（1回目、2回目）書き込まれた 状態になるように思います。 今回のように、例えば、ファームの入力値を保持して他の（b.thmlなど）に 遷移し、ボタンをクリックすると、全フォームの値を表示するような場合、 どのような方法が考えられるのでしょうか? どうぞ、宜しくお願いいたします。
今更ながらdbmopenでutf8環境にハマってます。 #!/usr/bin/perl use strict; use warnings; use utf8; use open ":utf8"; use open ":std"; my $key1='test'; my $key2='test2'; my $val1 = 'あああ'; my $val2 = 'いいい'; print "$key1 $val1\n"; print "$key2 $val2\n"; open(my$fh,">./utf8DB2"); print $fh "$val1\n"; print $fh "$val2\n"; close $fh; my %HASH; dbmopen(%HASH, 'utf8DB', 0666); #utf8::decode($val1) if utf8::is_utf8($val1); #utf8::decode($val2) if utf8::is_utf8($val2); #下記２行が無いとWide character in null operation at ... utf8::encode($val1)if utf8::is_utf8($val1); utf8::encode($val2)if utf8::is_utf8($val2); $HASH{$key1}="$val1"; $HASH{$key2}="$val2"; dbmclose(%HASH); my%DBM; dbmopen(%DBM,'utf8DB',0666); while ( my( $key , $val ) = each %DBM ){ #utf8::decode($val) if utf8::is_utf8($val); #utf8::encode($val) if utf8::is_utf8($val); print "key1 : $key 値 : $val\n" ; } foreach my$key ( keys( %DBM ) ) { #utf8::decode($DBM{$key}) if utf8::is_utf8($DBM{$key}); #utf8::encode($DBM{$key}) if utf8::is_utf8($DBM{$key}); print "key2 : $key 値 : $DBM{$key}\n"; } dbmclose(%DBM); 上記スクリプトを実行時、値を表示する際に文字化けしているのですが、これは、dbmopenで保存時既に文字化けしているのでしょうか、それとも表示する際、適切にエンコードorデコード出来てないから文字化けしているのでしょうか。 また、どのようにすれば解決可能かご教授願えませんでしょうか。 いっその事、DataDumperで保存し、読み出すように修正しようかとも思うのですが、tieに変更した場合も、同様に文字化けするのでしょうか・・ その辺りも含め、アドバイス他ご教授願えますと助かります。
Perlで、文字の出現回数を調べたいのですが、 どうすればよいのかわかりません。 while(<>){ s/あ/あ/g; } これを利用して、数えられないかと思ったのですが、 これだと無理ですよね。 1行に何度も出てくる文字も、ちゃんとカウントしたいのですが、 どのようにすればよいのでしょうか。 ご教示、お願い致します。
-M と (stat())[10] について ----------------------- 実行環境 CGI UNIX系(私のマシンではない)。 開発環境 httpd WindowsXP ----------------------- なにが起きてるかと言うと、 開発環境では -M と (stat())[10] の値が得られるのに、 実行環境では得られません。 どうゆうケースが考えられるでしょうか？ ----------------------- 実際にはどんな処理かと言うと、 1. 特定のフォルダ内のファイルを全部まとめてもってくる。 2. ソートする って感じです。 ソートの記述は sub{ -M $b <=> -M $a } こうで、 今はテスト出力のため sub{ $::test .= (-M $b) . qq[ $b : $a ] . (-M $a) . "<BR><BR>\n"; (-M $b) <=> (-M $a); } こうしてます。 すると、実行環境と開発環境共にファイル(パス)名は得られています。 開発環境では -M の値が得られていますが、実行環境では得られていません。 statを使っても同じです。 私はどんな罠に陥ってるのでしょうか。
CGI(Perl)のメッセージボックス表示について 上記について質問です。 <input type=submit value=" 送 信 "$fm> <input type=reset value="リセット"$fm></td></tr></table></form></ul><hr width=\"95\%\"> _FORM_ 上記のソースで送信ボタンを押した後に メッセージボックスを表示させてif関数等で 「はい」「いいえ」と分けたいのですが、 検索してもサンプルソースが中々見つかりません。 はいを押した時に送信されて、 いいえの時に「送信を中止しました」と表示される メッセージボックスを表示したいのですが・・・・。 どうすれば良いのでしょうか・・・。
　 perlでの掲示板の自作について ネット上で配布されている掲示板に納得できるものがないので、 自分で掲示板を作ろうと考えています。 そこで質問ですが、まったくの初心者がperlを学んで掲示板を作る場合、 できるようになるまで、どれくらい時間がかかりますか？ （スレッドフロート型） また、掲示板の作成にかかる時間も教えてください。 （目安程度で構いません） 宜しくお願いします。
Apache2.2環境でPerlで参照したgifが表示できません！ 今まで自分のPC(Windows Me）でHP（@niftyで公開しています）にアップする前のデバック環境としてApacheとActivePerlをダウンロードをして構築していました。 全く問題無く動作をしていたのですが、PCのハードが調子が悪くなりとうとう動かなくなりました。そこで、この際最新OSのWindows7版PCを購入して可能な限り同じ環境を再構築しようと努力をしているのですが、どうも上手く行かないため助けてください！ 今回の環境は、OS=Windows7、Apache=2.2、ActivePer=l5.12です。 Apache=2.2のhttpd.confファイルの内容が以前のものと違うので、このhttpd.confの修正漏れだとは思うのですが・・・ 具体的には、TOPページはhtmlで記述し、そのhtmlからPerlプログラムを呼び出す形を取っています。 htmlではgifが正常に表示されるのですが、同じgifをPerlからも参照をしているのですが、gifの絵が表示されません。しかしながら、gifに張ったリンクは正常で、制御は正しくリンク先に移行します。 gifファイルは、下記に在ります。 　c:/Program File/Apache Group/Apache2/htdocs/GIF/button-fix.gif Perlプログラムは、下記のようにしています。 　$gif_dir = 'c:/Program Files/Apache Group/Apache2/htdocs'; 　・・・・ 　<INPUT TYPE=\"image\" src=\"$gif_dir/GIF/button-fix.gif\"> そして、気になる事があります。 　$top = 'c:/Program Files/Apache Group/Apache2/htdocs/index.htm'; 　・・・・ 　<A href=\"$top\"><IMG src=\"$gif_dir/GIF/button-fix.gif\" border=\"0\">\"> 　と記述したgifアイコンにマウスを持って行くと、ウィンドウの左下のリンク先アドレスを表示するエリアに下記のように、字化け（スペースが%20になっている）しているように表示されてこのアイコンだけはクリックしても正しく動作をせず、ノンオぺレーションです。 　file:///c:/Program%20Files/Apache20Group/Apache2/htdocs/index.htm' 　この程度の情報で原因が判りますでしょうか？ 　よろしく、お願い致します。
はじめまして。 perlフレームワークCatalystの件につき質問させてください。 現在、ローカルファイルおのPOST(HTTP)の検証をしようと、 Catalyst::Request::Uploadクラスのcopy_toメソッド を使っていますが、デフォルトで/tmpフォルダに一時ファイル を作成し完了しだい所定のパスにコピーしているようです。 しかし、/tmpフォルダのサイズを超えるような巨大ファイル を送信しようとすると空き容量なしのエラーが発生します。 下記に検証コードを示します。 sub index :Path :Args(0) { my ( $self, $c ) = @_; $c->stash->{template} = 'bye.tt'; my $_msg; my $upload = $c->req->upload('upfile'); my $file = $upload->filename; my $base = substr $file, (rindex $file, '\\') + 1; unless( $upload->copy_to('/doc/'.$base) ){ die( "Failed to copy $!" ); } $c->response->body('HTTP POST Completed'); }
Perlで携帯電話の製造番号を取得 Perlで携帯電話の製造番号を取得するスクリプトを作っています。 docomoのD905iしか持っておらず、他の携帯での動作確認ができません。 以下のスクリプトで正しいでしょうか？ 以下のスクリプトで、他にやっておいたほうがよい事など、 何かアドバイスがありましたらお願いします。 やりたいことは、 docomo、au、ソフトバンクのみで取得する。 iPhone、イーモバイルは取得しない。 古い携帯電話で取得できないものは切り捨てる。 携帯電話でアクセスした人が、それぞれに画面をカスタマイズでき、 次回アクセスしたときも同じ画面が表示されるようなサイトを作ろうとしています。 普通はクッキーで本人確認するのだと思いますが、携帯電話ではクッキーが 無いので、代わりに製造番号を使って本人確認しようと考えています。 １ヶ月くらいだけオープンするサイトであり、金銭的な絡みも個人情報も無いので、 携帯電話の所有者が変わったときの問題は無いと思っています。 ■ HTML <a href="./test.cgi" utn>製造番号取得</a> ■ Perl #--ソフトバンク if($ENV{'HTTP_X_JPHONE_UID'} ne ''){ $uid = $ENV{'HTTP_X_JPHONE_UID'}; } #--au elsif($ENV{'HTTP_X_UP_SUBNO'} ne ''){ $uid = $ENV{'HTTP_X_UP_SUBNO'}; } #docomo else{ $agent = $ENV{'HTTP_USER_AGENT'}; $ser_index = index($agent,'ser'); if ($ser_index != -1) { $uid = substr($agent,$ser_index+3); } } print"製造番号:$uid<br>\n"; 以上、よろしくお願いします。
戻るボタンで、ログイン中を維持させない。 お世話になっております。 perlで、ログイン(ID、パスワード)するページを作り、 データ入力が終わるとログアウトさせる画面を作っているのですが、 ログアウト（コマンドボタンをクリックしトップページに戻る）したあと、 ブラウザの「戻る」ボタンで戻ると、また、ログイン中になります。 これを、他のサイトでもよく見る「ページの有効期限切れ」にしたいのです。 この種の解決方法は、検索するといろいろ出ていたのですが、 主に、jspで、 response.setHeader("Pragma","no-cache"); response.setHeader("Cache-Control","no-cache"); response.setDateHeader("Expires",0); などで、「httpヘッダやmetaタグでクライアントにキャッシュをさせない」ようにする方法が 一般的なようですが、jspはよくわからなかったので、 perl(.cgi)だけで実現する方法はないのでしょうか。 ソースは、簡単に書くと以下の通りです。(データ入力部は省略) ↓login.cgi------------------------------ 　： <form name="frm1" action="logout.cgi" method="post"> ＩＤ：<INPUT name="usrid" TYPE="text"> パスワード：<INPUT name="pwd" TYPE="password"> </form> 　： ↑login.cgi------------------------------ ↓logout.cgi------------------------------ 　： <form name="frm1" action="top_page.cgi" method="post"> <input type="button" onClick="submit();" value="ログアウト"> </form> 　： ↑logout.cgi------------------------------ 行き詰っております。 どなたかご助言賜れませんでしょうか。 よろしくお願いします。
VirtualHostの記述を削除するスクリプトについて あるサーバからいくつかのドメインを別のサーバに移して運用することになりました。 そのための設定を行っているのですが、移設先のサーバにはそのまま設定要項を virtualhost.conf(仮定)に追記すればいいのですが、既存のサーバから 楽に削除する方法はないでしょうか。 全部で500くらいあるドメインの中から対象は100くらいあります。 そのため、手動で実行するにはあまりにも非効率でリスクがあります。 対象のServerNameがあるディレクティブを最小マッチで指定して ごっそり置換できればよいのですが・・・ shell(sh/bash),perl,PHPのいずれかを考えています。 ですが、私の知識不足もあり、PerlとPHPはよくわかりません。 詳細は勉強するとして、サンプルを頂けないでしょうか。 もしくは「できない！」なんて意見もお願いいたします。 補足ですが、作業サーバも大量にあり、環境もまちまちになってしまうので、 バージョン依存するようなものは避けていただけると助かります。 （とはいえ、Perlだったら5.x系、PHPだったら4.x系以降くらいで） 今のところPerl案が根強いので本カテゴリにて質問させていただきます。 よろしくお願いします。
Perlで使える正規表現を教えて下さい。 半角英語で、小文字が3文字以上続いた後、大文字が来る場合、その大文字の右にスペースを入れる。 これをPerlで使える正規表現を教えて頂けないでしょうか？ 例 $str = 'AaaAaaaBbbbbCccccDddBbA'; # Aaa Aaaa Bbbbb Ccccc DddBbA ちなみに、色々ネットで調べて試してみて、 $str =~ s/([a-z])([A-Z])/$1 $2/g; が最も近いコードになったのですが、2文字続いただけでもスペースが入り困っています。 宜しくお願い致します。
パソコンから実行したら何のエラーが表示されません。 クローンから実行すると以下のエラーがメールで送信されてきます。 Argument "Sat Sep 4 01:05:24 2010" isn't numeric in localtime at 実行ファイル名 line 26. 該当する行には以下のコードを書いています。 my ($sec, $min, $hour, $day, $month, $year) = localtime($chkday); これはどこが悪いんでしょうか？ よろしくお願いします。
高速に文字列の比較 open(IN,"$file"); while (<IN>) { my($ip,$flag) = split(/,/,$_); if($flag==1){$data .= "$ip,";} } close(IN); open(IN,"$file2"); while (<IN>) { my($ip,$x,$z) = split(/,/,$_); foreach ( split(/,/, $data) ) { if ($ip eq $_) {$xdata.= "$ip,$x,$z\n";} } close(IN); １．$fileで、$flagが1なら$ipを変数$dataに加えます。 ２．$file2の$ipが、$dataの$ipに含まれていれば,$file2のデーターを$xdataに加えます。 上記の書き方で一応比較は出来ているようなのですが、perlの知識があまりない素人が適当に考えた書き方なので、自信がありません。 $data .= "$ip,";の$ipの後ろに,を入れている部分も何だか変なのですが、他の書き方が思いつけません。 書き方が間違っている場合や、こうすればもっと高速に動作させられるという書き方があれば、ご指導いただけると幸いです。 $fileも$file2も、100万行あたりまで増える見込みなので、出来るだけサーバーに負荷のかからない書き方ができればと思っています。 お手数ですが、どうぞよろしくお願いいたします。
外部サーバーにあるファイルを読み込み処理をしたいものがあります。 LWP::Simpleのget関数を使って読み込む方法があるのを知りました。 でも、その外部サーバーにあるファイルを１行ずつ読み込んで処理がしたいです。 getで受け取ったデータをファイルに書き込んで処理するしか方法はないんでしょうか？ 外部サーバーにあるファイルは１行が１つのデーターとなっていで、区切りが改行で仕切っています。 １回の読み込みで出来る方法がありましたら、知恵をお貸しください。よろしくお願いします。
メールフォームからメール送信するページを作成したいのですが、 最初の方の require 'perl-lib.pl'; の所で、処理が止まってしまいます。 #↓======================================= #!c:/Perl/bin/perl print "Content-type: text/html\n\n"; require "cgi-lib.pl"; require "jcode.pl"; require "perl-lib.pl"; # ←ここでとまる。 　： #↑======================================= サーバは、社内のWebサーバです。 サーバの環境は、 ・OS：WindowsXP ・サーバソフト：Apache HTTP Server 2.0.54 ・ActivePerl 5.8.7 Build 813 です。 perl-lib.plの保存先フォルダを変えてもダメでした。 （もちろん、その際、requireのパスも変更） perl-lib.plは、クライアントからアスキーモードでアップロードしました。 パーミッションは777です。ｌ perl-lib.plは、 http://www.tryhp.net/perllib.htm よりダウンロードしました。 原因が分からず行き詰っております。 どのようなことが考えられるでしょうか。 どなたかご存知の方、ご教授願います。
PerlでImage::Magickを使いたい ローカルサーバ上でImage::Magickを使いたいのですが、 設定がうまくいかないので質問です。 Win XP AN HTTPD 1.42p ActivePerl 5.10.1.1007 ImageMagick 6.5.9 Q8 ActivePerlは「C:\usr\local\」以下にインストールしました。 ImageMagickは 「ImageMagick-6.5.9-3-Q8-windows-dll.exe」をダウンロードし、インストールしました。 インストール時に「□Install PerlMagick for ActiveState Perl v5.10.1 build 1007」にチェックを入れました。 インストール場所は初期設定のまま、「C:\Program Files\ImageMagick-6.5.9-Q8」としました。 環境変数の設定が必要との説明を見かけたので、 「MAGICK_HOME」「MAGICK_PATH」を作り、値を「C:\Program Files\ImageMagick-6.5.9-Q8」としました。 set MAGICK_HOME で、 MAGICK_HOME=C:\Program Files\ImageMagick-7.5.9-Q8 と出るのを確認しました。MAGICK_PATHも同様です。 （説明しているサイトが複数あり、表記が違っていたので両方作ってみました） コマンドプロンプトで ppm list すると、 ウ Image-Magick ウ 6.5.9　ウ　9 ウ 863KB ウ site ウ と出てきます。 設定後再起動を行い、MT4のシステムチェックを行うと、 Image::Magick サーバーに Image::Magickか、Image::Magickの動作に必要な他のモジュールがインストールされていません。 アップロードした画像のサムネイルを作成する場合に必要となります。 Image::Magickのインストールはインストールマニュアルに沿って行ってください。 と出てしまいました。 以前perlで作成したcgiも動作しません。 ImageMagickのバージョンを微妙に変えてみるなども試しましたが、もうさっぱりです。 助けてください。お願いします：）
perlで、可変の個数のファイルをアップロードしたい perlで、可変の個数のファイルをサーバに アップロードさせたいのですが、 どのようにやって良いのかまったく検討がつきません。 参考になるサイト、でもかまいませんが、 こちらにロジックを書いて頂けると幸いです。 どうぞ、宜しくお願いいたします。
詳しい方教えて頂けませんでしょうか？ Sonyの電子ブックリーダーの日本語化を 下記ブログに従って進めていたのですが・・・ http://pc-parts.cocolog-nifty.com/blog/2010/04/p … 最後にフォントを作るバッチ処理を実行させると 'pl2bat' は、内部コマンドまたは外部コマンド、 操作可能なプログラムまたはバッチ ファイルとして認識されていません。 'pl2bat' は、内部コマンドまたは外部コマンド、 操作可能なプログラムまたはバッチ ファイルとして認識されていません。 'ttfunpack' は、内部コマンドまたは外部コマンド、 操作可能なプログラムまたはバッチ ファイルとして認識されていません。 'ttfunpack' は、内部コマンドまたは外部コマンド、 操作可能なプログラムまたはバッチ ファイルとして認識されていません。 指定されたパスが見つかりません。 指定されたパスが見つかりません。 'ttfpack' は、内部コマンドまたは外部コマンド、 操作可能なプログラムまたはバッチ ファイルとして認識されていません。 フォント生成に成功しました 続行するには何かキーを押してください . . . と表示され、ファイルの中に存在すると思われる 最終生成物の　tt0003m_.ttfというファイルが確認できないのです。 （詳細に言えば、tt0003m_.ttfは存在するのですが 18MB程とブログに記載されているようなサイズにはならないのです） お忙しいところ恐縮ですが、バッチプログラムの内容がわからないので 教えて頂けませんでしょうか。 このままだと、Sonyの電子ブックリーダーの日本語化が出来ず、 無用の長物になってしまうのです(T_T) 私のPCのOSは　win7です。 スイマセンm(_ _)m。宜しくお願い致します。 ちなみに、バッチプログラムの内容ですが以下のとおりです。 @echo off if not exist "C:\ttftinker\ipagp-mona.ttf" goto ERROR1 if not exist "C:\ttftinker\tt0003m_.ttf" goto ERROR2 goto PROCESS :ERROR1 echo ipagp-mona.ttfが見つかりません pause exit /b :ERROR2 echo tt0003m.ttfが見つかりません pause exit /b :PROCESS set Path=%PATH%;C:\ttftinker set perllib=C:\ttftinker cd /d C:\ttftinker call pl2bat ttfunpack call pl2bat ttfpack call ttfunpack ipagp-mona.ttf ipag call ttfunpack tt0003m_.ttf tt0003m_ copy /y tt0003m_\name ipag cd ipag call ttfpack 0x00010000 name cvt glyf cmap hmtx post loca maxp head hhea OS_s2 > tt0003m_.ttf cd .. echo フォント生成に成功しました pause
GLIBC_2.4 以上がインストールされていない環境で perlで開発中に、libcのバージョンが古いというエラーが出ております。 しかし、事情により、通常のインストールができません。 どうにかして、別サーバから取得したsoファイルなどを使って、GLIBC_2.4以上を読み込ませることはできないでしょうか。 いま、外部サーバから取得したlibc-2.5.soがあります。これをサーバ上にアップロードして、perlから使用できるようにする方法はありますか？ あまり詳しくないのですが、Dynaloader などは用途が違うのでしょうか。 すみませんが、宜しくお願い致します。 エラーメッセージ(一部伏字)： Can't load '~~~i386-linux-thread-multi/auto/Digest/SHA1/SHA1.so' for module Digest::SHA1: /lib/tls/libc.so.6: version `GLIBC_2.4' not found (required by ~~~~/i386-linux-thread-multi/auto/Digest/SHA1/SHA1.so) at /usr/lib/perl/5.8/DynaLoader.pm line 225. at ~~~~/Digest/HMAC_SHA1.pm line 5
WWW::Mechanizeでfc2にログインする方法 WWW::Mechanizeでfc2ブログ管理画面にログインしようとしたところ、上手くできませんでした。 $mech = WWW::Mechanize->new(autocheck => 1); $mech->get('http://fc2.com/login.php?ref=blog');　・・・※1 $mech->submit_form(　　　　　　　　　　　　　　　 ・・・※2 fields => { email=> [ユーザＩＤ], pass => [パスワード], }, ); $mech->title()や$mech->content()で確認したところ、※1のページ（ログイン画面）までは取得できているようです。 しかし※2のログイン情報の送信後に、同じように確認したところ、ログイン後に表示されるはずの管理画面へ遷移していませんでした。 [ユーザＩＤ],[パスワード]の設定値は正しいことを確認しています。 フィールド名（email,pass）はmech-dumpコマンドで確認しました。 $mech->success()は1を返しています。 どうすればログインできるようになりますか？ 間違いや他に確認すべき項目をご教示いただけたら幸いです。 実行環境：ubuntu
アイネットディーというレンタルサーバーでImageMagickを使って画像にテキストを合成しようとしています。 アイネットディーのページを見るとImageMagickは使えると書かれています。 （Version: ImageMagick 6.3.6 01/09/08 Q16 ） 実際画像の合成などはうまくできるのですが、なぜかテキストだけ合成ができません。 エラーは出ずにテキストを合成してもらいたいところには、何の画像も合成されていません。 同じプログラム（当然パスは変えますが）を他のサーバーで試してみると テキストを合成することができます。 my $font = $path."ttf/azukiB.ttf"; my $image = Image::Magick->new; $image->Read($backimage); $text = jcode($line,"euc")->utf8; $image->Annotate(encoding=>'UTF-8',font=>$font,pointsize=>10, fill=>'red', text=>$text, x=>10, y=>100); 書体を変えたり指定方法をいろいろ変えたのですがうまくいきませんでした。 アイネットディーまたはImageMagick 6.3.6では他に何か設定するのでしょうか。 どうすればテキストを合成できるのでしょうか。
CGI内での条件分岐について教えてください。 買い物カートCGIの中で下記のラジオボタンの選択において入力フォームを表示・非表示に切り替える質問をしたばかりですが、 <input type="radio" value="1" onclick="func1()" name="gift" checked />１ヶ所 <input type="radio" value="2" onclick="func2()" name="gift" />３ヶ所 <input type="radio" value="3" onclick="func3()" name="gift" />５ヶ所 今度は入力後の確認画面にて上記で選択された内容によって。。。 value1の場合は１ヶ所分の発送先住所、value2の場合は３ヶ所分の発送先住所・・・ と言った感じで表示をさせたいのですが、条件分岐に関してどのようにしたら良いのか分からず質問をさせて頂きます。 require "cgi-lib.pl"; ReadParse(*input_data); if ($input_data{'gift'} eq "1") { 　※value1で入力した１件分の発送先住所 } elsif ($input_data{'gift'} eq "2") { 　※value2で入力した３件分の発送先住所 } else { 　※value3で入力した５件分の発送先住所 } とか、試してみましたがだめでした（泣 CGI(Perl)に関しては初心者的で少々初心者レベルで触る程度の技術レベルです（汗 どうしたら良いのか教えてください。 思い当たる点は、そもそも条件式の中にある"gift"はどこかで指示を出さないとCGIの中で認識されていないのでは？とも思っています。 実際に上記の例でカートの確認ページを表示すると、 if ( eq "1") { } else ( eq "2") { } else { } と表示されるので素人ながらそう思いました。 質問がへたですが宜しくお願いします。
PerlでExcelのワークシートを同じファイル内にコピーしたりワークシートの名前を変更することは可能でしょうか？ 環境は、WindowsXPpro、IIS5.1、PerlV5.10でWin32_OLEモジュールを使用しています PerlでExcelのワークシート内セルに書き込み・セルからの読み出しはできています。 VBAではワークシートをコピーする場合は、 「Worksheets("Sheet1").Copy After:=Worksheets("Sheet3")」 でコピーできるようですが、 Perlではどう記述すれば良いか分かりません。 Perlではワークシートをコピーしたりワークシートの名前を変更することは出来ないのでしょうか？ よろしくお願いします。
ロック処理について my$id="abc"; open(IN,"file"); while(<IN>){ my ($cid) = split(/\,/); if($cid eq $id){&error;} } close(IN); open(OUT,">>$file")； print "$id,$pass\n"; close(OUT); いままで上記のような書き方でも普通にロック機構を使っていたのですが、 ふと、追加書込みなら必要ないのではと思い至りました。 上記のようにファイルに追加書込みする場合は、ロックは必要ないのでしょうか？
YAHOOのAPIの形態素解析機をCGIのフォームから扱いたいと思っています。 IDは取得済みです。 自分のページにフォームを置いて、そこに文章を入力すると、そのCGI窓の下に解析結果を出すようにしたいです。言語はPerlです。 どなたか教えていただけますでしょうか。
perlとphpの違いについて perlとphpのどちらを学ぼうかまよっているのですが、それぞれのメリットデメリットについての比較は調べたものの、perlでできてphpでできないことやphpでできてperlでできないことについてよく分かりません。 どなたかご教示いただけますと大変助かります。よろしくお願いいたします。
ディレクトリ内のtxtファイル中の英単語数等をカウントしたいのですがわかりません。 PERLを使って、テキストファイル中の段落数、文章数、単語数をカウントしたいと思っていて、splitをつかって頑張っていますがわかりません。 テキストファイル中では、 I stand here today humbled by the task before us, grateful for the trust you've bestowed, mindful of the sacrifices borne by our ancestors. I thank President Bush for his service to our nation as well as the generosity and cooperation he has shown throughout this transition. Forty-four Americans have now taken the presidential oath. The words have been spoken during rising tides of prosperity and the still waters of peace. Yet, every so often, the oath is taken amidst gathering clouds and raging storms. At these moments, America has carried on not simply because of the skill or vision of those in high office, but because we, the people, have remained faithful to the ideals of our forebears and true to our founding documents. という具合に、 段落は改行で、文章の区切りは. で（.と半角スペース２つ）、単語はスペース1つでそれぞれ区切ってあります。 while($data = <>){ chomp($data); @paragraph = split(/\n/, $data); } 上記のように、ファイル全体を、改行を区切りに要素に分解することはできています。 が、これをどうやってカウントしていくのかがまったくわかりません。 ご教授願います。
perlの1行目が#!/usr/bin/perlだと動かず#!/usr/bin/perl5.8.9だと動くのですが、 #!/usr/bin/perlで動くようにするにはどうしたらいいのでしょうか？ インストールされているperlは This is perl, v5.8.9 built for darwin-2level です。 どこかでパスの設定をしてやればいいと思うのですが、 どこに何を書けばいいのかよくわかりません。 環境はMacOsX v10.6 SnowLeopardです。 どなたかよろしくお願いいたします。
terapadを使って、perlについての問題です。 第一問はある英語の文書ファイルから、その文書の段落の数、文の数、単語の数をカウントするプログラム。段落の区きりが改行で、文の区きりは、「 .」（半角スペース2個に.1個）で、文字の区きりは、「 」（半角スペース）あるとする。 第二問はある単語ファイル(例えばtest.txt)に乗っている単語リスト（1行1単語）の単語の意味を調査し(辞書は先に用意したファイルで調査するdictionary.txt)、その結果をファイルに保存するプログラムを作成するプログラム。（ファイル名をout.txtする）そのプログラムを提出すること。 誰か教えてください、プログラミングの初心者なので…全く思いつかない。＞＜
文字列に半角・全角スペースが入っているかをチェックする関数のおかしな結果？ 下記コードのように「文字列に半角・全角スペースが入っているかをチェックする関数」を作りました。 $textに入る文字列に半角・全角のスペースが入っているかをチェックします。 -------------------------------------------- my $text = "東 京"; if( isSpace($text) ) { 　　print "スペースあり"; } else { 　　print "スペースなし"; } sub isSpace{ 　　my $str = shift || return(undef); 　　if( $str =~ /.*[\s　]+.*/ ){ 　　　　return(1); 　　}else{ 　　　　return(0); 　　} } -------------------------------------------- しかしなぜか1行目を my $text = "メ"; とするとスペースが入っているという結果になってしまいます。 なぜ「メ」が入ると半角もしくは全角のスペースとみなされてしまうのでしょうか？ また、どうすれば正しくチェックできるようになりますか？ よろしくお願いします。
Perl言語を使っています URLを定義して、 その、Webサイトの中を表示するといったようなことは 可能なんでしょうか?? もし、可能であれば サンプルソースなど、 おねがいします 文字だけで構いません あと、10文字表示したいのに その、システムが5文字しか 表示できない場合に 残りの5文字はどのようにして表示させるのでしょう 2つも書いて申し訳ございません print "Prel言語使います" だけど、5文字しか表示できないそうなると "Perl言"こうなります、残りの5文字はどのようにすればいいのでしょう
自分が作っているプログラムの文字コードについて perlにてプログラムを作っているのですが、プログラムの文字コードが何なのかよく分かりません。 自分が作っているプログラムの文字コードってどのようにして調べるのでしょうか？ お恥ずかしいことだとは思いますが、自分が作っているプログラムの文字コードが分からないのです。。 ご回答の程、よろしくお願い致します。
Perl言語を使用してます、 文字制限数が10だったとします、 それ以上の発言をしたい場合にはどうすればいいのでしょうか 例えば：Perl言語を使用しています、 文字数が10を超えています、 それえお超えると落ちてしまったりするので どうやれば文字制限なく、できるのでしょうか Botで使用したいと思ってるのですが・・・
Perlについて教えてください。 私はPerl、Linux(FreeBSD,CentOS)について初心者の為よくわからないので２点質問させてください。 ネットでPerlについて調べたところ １． WindowsでのPerl開発 ＝ Active Perl(ActiveState社) WindowsでのPerl開発 ＝ OSに最初から組み込まれているもの(違っていたらすみません) との記述がありますが、ActiveState社のHPに行くとWindows,Mac,Linux,SunのActive Perl がありますがActive PerlはそれそれのOSで同じソースががつかえるのでしょうか？ ２． Windows XPにActive Perlをインストールしたところ「Perl package Manager」もインストール されていたので、起動してみるとインストールされている(インストールできる)PPMが表示されますが PPM(Perl Package Modeule)＝Win32用Perlモジュール CPANのPerlモジュール＝Linux用のPerlモジュールと考えていたのですが 両方とも表示されています。 CPANで入手できるPerlモジュールはWindows環境下のActive Perlでもしようできるのですか？ 馬鹿な質問と思うのかもしれませんが是非教えてください。
XMLから行列を作成し、テキストに出力しようとしています。 XMLには複数人がそれぞれ好む色が書かれています。 それをもとに、以下のような行列を作りたいと考えています。 Perlのプログラムのコードを教えてください。よろしくおねがいします。 --------XML------------------------------------------------------- <?xml version="1.0" encoding="UTF-8"?> <person_list> <person id="1001"> <keywords><keyword>赤</keyword><keyword>青</keyword></keywords> </person> <person id="1002"> <keywords><keyword>赤</keyword><keyword>黄</keyword></keywords> </person> <person id="1003"> <keywords><keyword>黄</keyword></keywords> </person> </person_list> ------------------------------------------------------------------ --------テキスト------------- 1001 1002 1003 赤 1 1 0 青 1 0 0 黄 0 1 1 -----------------------------
perlのシングルクォートとダブルクォートの置き換えについて お世話になります。 現在、perlにて開発を行っているのですが、一つ問題に当たってしまいました。問題になっているのは、文字列を扱う部分です。perlにおいて文字列はシングルクォートに囲まれたものと、ダブルクォートに囲まれたものがあると思うのですが、この両者の違いは、内部に書かれた変数等を展開するか否かだったと思います。 実は開発の途中でこのシングルクォートで囲まれた文字列を、ダブルクォートに囲まれた文字列に変更しなければいけなくなりました。つまり $test = 'aaa'; 　を　 $test = "aaa"; としたいのです。これってperlの仕様的に可能なのでしょうか？　かなり悩んだのですが、どうしてもわかりませんでした。 ちなみに、なぜこの処理が必要なのかというと、HPの製作をしているのですが、設置したフォームからその内容を得るというプログラムを書いた際に、そのフォームの内容がシングルクォートでしか得られないからです。シングルだとそののちの処理に影響が出てしまうのです。 だれかご存じないでしょうか。よろしくおねがいします。
変数名を任意の数だけ増やしたい。 @convert_keys= qw(name1 name2 name3 name4 name5 name6 name7 name8 name9 name10); for my $key (@convert_keys) { if($FORM{$key}){} } 上記のやりかたで変数を増やしているのですが、 例えば、変数を1000個にしたい場合は、name1～name1000までを一個一個書くとなると大変です。 @convert_keysに効率よくname1～name1000までを入れる書き方はないでしょうか？ 名前（name）の部分は固定で、数値が追加されます。 よろしくお願いいたします。
ブラウザの種類によって、処理を分岐。 以下のような感じで、ブラウザの種類（SAFARI、OPERA、FIREFOX、EXPLORERなど）によって、 perlの処理を分けたいのですが、やり方がわかりません。 （もちろん、以下は、正常に動作しません。） //↓=========================================== <script language="JavaScript"> <!-- window.onload = function(){ str = navigator.appName.toUpperCase(); if (str.indexOf("SAFARI") >= 0) browser_Name = "SAFARI"; if (str.indexOf("NETSCAPE") >= 0) browser_Name = "NETSCAPE"; if (str.indexOf("OPERA") >= 0) browser_Name = "OPERA"; if (str.indexOf("FIREFOX") >= 0) browser_Name = "FIREFOX"; if (str.indexOf("EXPLORER") >= 0) browser_Name = "EXPLORER"; if (str.indexOf("MICROSOFT") >= 0) browser_Name = "EXPLORER"; if (browser_Name == "SAFARI"){ EOM $a="1"; print <<EOM; } if (browser_Name == "NETSCAPE"){ EOM $a="10"; print <<EOM; } 　： } // --> </script> //↑=========================================== どうかご教授願います。よろしくお願いします。
Split関数で文字を文割するのはわかるのですが、 文字を残して一文字一文字表示ってできるのでしょうか 説明が下手ですいません Perl言語を使っています Botで使いたいと思ってます
パターンマッチが、ひっかかりません。ActivePerl のバグでしょうか？ $doc =~ m%<SCRIPT language=javascript type=text/javascript>(.+?)</SCRIPT>%; $1 に、何も入りません。 $doc は、複数行のデータです。（改行が、複数ある） 中身を検索すると、確かに、この文字列は、存在しています。 環境は、ActivePerl 5.12.1 Build 1201 です。 どなたか、助けてください。
<Perl>参照配列の出力に失敗する。 お世話になります。 配列の出力部で以下のエラーが出力されます。 Use of uninitialized value in print at test2.pl line 12. -----コーディングは以下の通りです。----- #!C:\perl use strict; use warnings; my @l = (); #----------- #GetDataへCSVファイル名と、格納用配列を渡す #----------- my $cnt = &GetData("test.csv", \@l); print "COUNT -> ".$cnt; for(my $i=0; $i < $cnt; $i++){ print $l[$i]; } ################################################################## # 概　　　要：指定したCSVファイルをオープンしCSVデータを配列に取得する。 # パラメータ：ファイル名, CSVデータ格納用配列 # 戻　り　値：データ取得件数 ################################################################## sub GetData { my ($f, @bf) = @_; my $rcnt = 0; print "FILE NAME -> ".$f."\n"; if ( open(FP, "<${f}") ){ print "FILE OPEN -> success.\n"; @bf = split(/,/, <FP>); close(FP); $rcnt = @bf; print "CSV GET COUNT -> ".$rcnt."\n"; } return $rcnt; } -----実行結果は以下の通りです。----- D:\>perl test.pl FILE NAME -> test.csv FILE OPEN -> success. CSV GET COUNT -> 5 Use of uninitialized value in print at test2.pl line 12. Use of uninitialized value in print at test2.pl line 12. Use of uninitialized value in print at test2.pl line 12. Use of uninitialized value in print at test2.pl line 12. COUNT -> 5 -----CSVファイルの内容は以下の通りです。（ファイル名：test.csv）----- あいうえお,かきくけこ,さしすせそ,たちつてと,なにぬねの 配列の要素数が取れているので、配列内にデータは格納されているとは思っています。 出力方法をどのように正せばよいがご教示お願い致します。
Windows7 XAMPP使用、ImageMagickインストール MovableType5をローカル環境で使用するために、XAMPPを使用してImage::Magickをインストールしたいのですが、全然うまくいきませので詳しい方がいましたら教えてください。 OS WINDOWS 7 64bit XAMPP Version 1.7.3 (C:\xampp) ActivePerl-5.10.1.1007-MSWin32-x64-291969.msi (C:\usr\lib\ActivePerl) ImageMagick-6.6.2-10-Q16-windows-x64-dll.exe (C:\ProgramFiles\ImageMagick-6.6.2-10-Q16) ActivePerlインストール後に、ImageMagickをインストール。（途中、「Install PerlMagick for ActiveState Perl v5.10.1 build 1007」を選択。） 参考サイト　http://likealunatic.jp/2010/03/xampp_and_mt_2.php 現在の環境変数PATHは、C:\Program Files\ImageMagick-6.6.2-Q16 また、ActivePerlとの対応バージョンがあるとのことだったので、何通りか(x64-dll.exe) 試してみたりもしました。（その度、再起動＆環境変数の削除） 最終的に、Movable Type システムチェック [mt-check.cgi]で、サーバーに Image::Magickか、Image::Magickの動作に必要な他のモジュールがインストールされていません。 となったままです。
split関数について・・・ split関数を使いたいのですが、 どうかいていいかわかりません Perl言語を使用してます、 どなたか、回答おねがいします 試してみましたが、プログラムが終了して しまいます、ボットで使おうと思ってるのですが
さくらサーバ(スタンダード)への Web::Scraper（perl モジュール） インストール方法で悩んでます。 いつもお世話になってます。 Web::Scraperというperlモジュールをさくらのレンタルサーバで使用したいのですが、うまくいきません。 参考にしたのは以下のサイトです。 http://houei.sblo.jp/article/35173969.html 正確にはWeb::Scraperはインストールできましたが、以下の部分で止まってしまっています。 【use lib '/home/bashi/perl/lib/perl';】 上記はモジュールを使用するときの、パスの指定かと思うのですが、参考サイトの通り、cpanでWeb::Scraperをインストールしましたが、上記パスにはモジュール等 何もインストールされていません。 別途、設定などが必要なのでしょうか。 他サイトを色々と調べてはみたのですが、当然のように上記同様のパスにperlモジュールがあるような指定がされています。 自力では解決できず、ご質問させていただきました。 何かご教授いただけませんでしょうか。 宜しくお願い致します。
csvデータの開始行と最終行を全体の4分の1で区切り処理をしたい csvデータの開始行と最終行を全体の4分の1で区切り処理をしたいと思ってます。 csvファイルは20万件あります。4分の1なので1～50000件となります。 今回は50001～100000件までを行いたいのですが、先日教えていただいたwhile($lines = <IN>) ですと、最初から1件ずつ最終行まで処理をしてしまいます。 (ここから) open(OUT,">$csv"); open(IN,"$data") || &error(" $data を読み込みopen出来ません"); while($lines = <IN>) { ($seq1,$categ,$password,$imail,$cont) = split("\,", $lines); $cont .= " "; $data = "$seq1,$cont,1\n"; print OUT "$data"; $data = ""; } close IN; close OUT; (ここまで) 今回は20万件ですが、毎回このデータ量は月次ごとに変わります。 while周辺をいじるような気がしていますがどのようになるのかがわからなかったので質問いたしました。 お手数かけます。 よろしくお願いいたします。
配列を使わずに、数字（連番）を使用した変数に値を代入したい。 お世話になっております。 配列を使わずに、数字（連番）を使用した変数($a1,$a2,$a3・・・)に、 forループを使って、値を代入したい。 #================================= for($i;$i<10;$i++){ $a??? = 10; #←ここがわかりません。 } #================================= どなたかご存知の方、ご教授ください。 よろしくお願いします。
データの日付でソートをしたい データの日付でソートをしたいと思ってますが、うまくいっていません。 $kuchikm2の内容 1,8,,説明文,2010/07/06-01:27,1,,,,,,, 2,8,,紹介文,2010/07/18-02:27,1,,,,,,, 3,8,,コメント,2010/05/19-03:27,1,,,,,,, 4,8,,文言,2010/06/20-04:27,1,,,,,,, ソートした結果@sorted 2,8,,紹介文,2010/07/18-02:27,1,,,,,,, 1,8,,説明文,2010/07/06-01:27,1,,,,,,, 4,8,,文言,2010/06/20-04:27,1,,,,,,, 3,8,,コメント,2010/05/19-03:27,1,,,,,,, (perlソース) 略 #sortロジック use warnings; my @lines = $kuchikm2; print @lines, " a\n"; my @sorted = map { $_->[4] } sort { $a->[0] <=> $b->[0]} map { [(split q{,}, $_)[4], $_] } @lines; print @sorted, " b\n"; (ここまで) 以前ソートで質問したときに、数字でないといけないと言われたような気がしています。 お手数かけます。 よろしくお願いいたします。
perl言語について質問です。 クライアントからサーバへ入力されたファイル名を送信し、サーバが送られてきたものを検索しそのファイルを送り返すというプログラムを教えてください。
perlによる　ファイル内容　検出方法について なかなかPerlに慣れない初心者です。 大量のデータ処理のため、効率よいプログラムを教えてください。 下記のような２ファイルがあります。 ファイル(1)　数千万行　タブ区切り　5列 00:00:00^ 1212bb121ab21^ AAAA^ あいす なつ^ 1 00:00:00^ 1212bb121ab21^ BBBB^ ちゃいろ^ 1 00:00:00^ 3a12bb121ab21^ ABABCDD^ さんすう 理科　100点^ 1 00:00:00^ fa12bb1333b1e^ ACF^ さんすう 理科　100点^ 1 00:00:00^ ea12bb1333b1e^ ZZZZZ^ 社員　会社^ 1 00:00:00^ za12bb1333b1e^ ZZAZZ^ 担当^ 1 … ファイル(2)　百万行　タブ区切り　2列 1212bb121ab21^ あいす 3a12bb121ab21^　　　98点 ea12bb1333b1e^ 社員 ea12bb1333b1e^　　　会社 … この場合、ファイル(2)の内容がファイル(1)にあった場合、そのリストをファイル出力したい。 OUTPUTファイル 1212bb121ab21^ あいす ea12bb1333b1e^ 社員 ea12bb1333b1e^　　　会社 … どのように書けばよいか　教えてください。
文字列の中間位置にマッチするアサーション表現 qr{ ^ \w+ \s+ \d+ \s+ \d+ $ }xms の規則で $strに文字列が複数行格納されています。 スペースの個数に関しては任意です。 my $str = <<EOF ; BBB 0 00 AAA 1 01 AAA 2 10 : EOF 上記例で行頭がAAAで始まる、末尾の連続した数字の先頭にマッチする正規表現を教えて頂けないでしょか？ AAA 1 01 の01の先頭に位置にマッチするアサーションを知りたい 後読みを用いたいのですが、空白の数が任意のためうまく書けずに困ってます。
Perlの継承について (1) クラス Subclass (baseclassを継承) myfunc1 (2) クラス Baseclass myfunc1 myfunc2 (myfunc2内でmyfuncを呼び出している) (3) SubclassとBaseclassのmyfunc1は、引数が異なる。 上記のようにクラスSubclassとクラスBaseclassがあり、SubclassはBaseclassを継承しています。 ここで、SubclassではBaseclassのmyfunc1をオーバーライドしています。 1: my $obj = Subclass->new(); 2: $obj->myfunc2(); とすると、2にて、Subclassにて実装したmyfunc1が呼び出されます。これを、Baseclassのmyfunc1を呼び出させる方法はないでしょうか？ （Baseclassはその他のクラスからも継承されておりいじりたくない。 しかし、SubclassはBaseclassを継承したうえでmyfunc1をオーバーライドしたい。） Baseclassのmyfunc2内の 　$self->myfunc1(...) という記載を、 　Baseclass::myfunc1($self, ...) という記載にしてしまえば動きそうな気もするのですが、何かつっこみがあればお願いします。
正規表現中の()について 繰り返し正規表現を行い、マッチ部分を配列に入れる場合の疑問です。 今回、while文を使わずに書いてみようとしています。 #3個以上数字が連続していたら、配列へ入れる。…(1) my @data = ( $str =~ /\d{3,}/g ); #3個以上連続している、同じ文字を取り出して、配列へ入れる。…(2) my @data = ( $str =~ /（.）\1{2,}/g ); 1つめのほうは期待通りに動きました。 が、2つめは正規表現内の()で囲まれた範囲しか、配列に入ってくれませんでした…。 具体的には、$str='AAABBB'なら、 @data='A','B'になってしまいました。（AAA,BBBを配列に入れたい） たぶん、while文と$&を使えば書けそうだとは思いますが、 今回は、この書式で期待通りに動かす方法を知りたいです。 AAA,BBBを配列に入れるにはどのように書けばよいでしょうか？ どうか、ご教授ください。 よろしくお願いします。
<STDIN>とARGVとの振る舞いの違いが分からず困っております。 Perlといいますか、プログラム初心者です。 現在、Perlでファイル処理を行おうと思っており、下記のようなスクリプトを書き、file_test.plとして保存・実行しようとしたのですが、実行時の命令の仕方により処理が出来たり出来なかったりで、困っております。どなたか、ご教授頂けませんでしょうか。 なお、使用環境はWindows XP, Active Perl 5.8.8です。 スクリプトのソース、読み込みファイル共にShift-JISです。 （ここには記載しておりませんが、処理後の吐き出しファイルはUTF-8になります） -------------------- file_test.plのソースファイル -------------------- use strict; use warnings; use encoding "cp932"; use Encode::Guess qw/euc-jp shiftjis 7bit-jis/; binmode STDIN, ':encoding(cp932)'; binmode STDOUT, ':encoding(cp932)'; binmode STDERR, ':encoding(cp932)'; my $csvname; if(defined($ARGV[0])){ $csvname = $ARGV[0]; print "csvname = $csvname\n"; #文字コード判定 my $enc = guess_encoding($csvname); ref($enc) or die "Can't guess: $enc"; print "encoding is ", $enc->name, "\n"; #UTF-8フラグチェック print utf8::is_utf8("$csvname") ? "UTF-8 Flag\n" : "not UTF-8 Flag\n"; } else{ print "input file: "; $csvname = <STDIN>; chomp($csvname); print "csvname = $csvname\n"; #文字コード判定 my $enc = guess_encoding($csvname); ref($enc) or die "Can't guess: $enc"; print "encoding is ", $enc->name, "\n"; #UTF-8フラグチェック print utf8::is_utf8("$csvname") ? "UTF-8 Flag\n" : "not UTF-8 Flag\n"; } open CSV, '<:encoding(sjis)', $csvname or die "$!"; print "FILE OPEN OK\n"; close(CSV); ------------------- file_test.plのソースファイル END ------------------- このソースを"perl file_test.pl csvfile.csv" で実行すると問題なく処理できます。 しかし、"perl file_test.pl" で実行し、あとからファイル名を入力すると、 "Invalid argument at file_test.pl line 35, <STDIN> line 1."というエラーが出ます。 （35行目はOPENコマンドの行です） しかし、 "perl -CA file_test.pl"と-CAオプションを入れ、後からファイル名を入力した場合、動作します（上述のファイルの実行と同時にファイル名を指定したものでも動きます）。 実際にはコマンドプロンプトからの実行ではなく、plファイルをダブルクリック、その後ファイル名を指定して処理を行いたいため、悩んでおります。 どのようにしたら、うまく実行できるか、ご教授頂ければ幸いです。
find関数が1階層（カレントディレクトリ）にしか利きません。 Active Perl+MS-DOS(WindowsXP)の環境です。 深い階層を持つディレクトリAで　 find(\&dirfiletotal,'.'); を実行し、特定のファイル名を検出しています。 なぜかカレントディレクトリ(A)にあるファイルに対してしか動作しません。（結果は正常です。） find関数は再帰的、つまり下の階層も含めてファイル検出するのだと思っていましたが、間違いでしょうか？ もし間違いであれば、どのように書き変えればいいか、ヒントをいただけると大変助かります。 どうぞ宜しくお願い致します。
MS-DOSでperl実行時にコマンドプロンプトが認識されず困っています。 Active Perlをインストールして、Tera-Padでスクリプトを書き、MS-DOSでテストしています。 "du"や"ls"などのコマンドを(``)で囲ってスクリプトに記述すると、「`du`は内部コマンドまたは外部コマンド、操作可能なプログラムまたはバッチ ファイルとして認識されていません」というエラーが出てしまいます。winfaqを参照し、 http://homepage2.nifty.com/winfaq/w2k/trouble.ht … 環境変数を設定しました。（但し、環境変数に設定しているのは下記の１行のみではありません。すでに１つ別のソフトインストールで自分でPATHを設定していますので、今回は";"で下の１行を追加しました。） %SystemRoot%;%SystemRoot%\System32;%SystemRoot%\System32\Wbem そしてＰＣを再起動しても事象は変わりません。 因みに、Active Perlは「C:\perl」フォルダにファイルがあります。binはその下にあり、環境変数にも「C:\perl\bin」として追加済みです。 いろいろと試してみたのですが、原因がわからず困っています。 ぜひアドバイスをいただければ大変助かります。 どうぞ宜しくお願い致します。
同じフォーム内で、押下するボタンによって、飛び先のページ(cgi)を変えたい。 例えば、 以下のように、同じフォーム内に２つのボタンを用意し、 片方のボタンをクリックすると、現在のページ(aaa.cgi)へ戻り、 もう片方のボタンをクリックすると、別のページ(bbb.cgi)へ飛ぶようにしたい。 なお、何れのボタンもサブミットしたい。 ↓(aaa.cgi)================================= ： <form name="frm1" action="???" method="post"> <input name="t1" type="text"> <input name="t2" type="text"> ： <input name="b1" type="button" onClick="submit();"> <input name="b2" type="button" onClick="submit();"> ： </form> ： ↑(aaa.cgi)================================= 良い方法はないでしょうか。 ご存知の方、ご教授ねがいます。 よろしくお願いします。 　
perl CGIでのhttpヘッダー出力　(Content-type: text/html\n\n) が不要な場合について perlでCGIを作成しています。 多くの場合は、httpのヘッダー出力（Content-type: text/html\n\）を行っています。 毎回ではないですが、HTTPヘッダーの出力が不要な場合が存在します。 （HTMLにContent-type: text/html\n\が出力され表示されます。） そこで、HTTPヘッダーの出力が不要の場合の判断方法を教えていただければと思います。 よろしくお願いいたします。
print文内でのsplice文と代入についてです perlを最近勉強し始めたのですが、 print文中で、spliceと代入を行ったところ、エラーになってしまいました…。 具体的には、以下のプログラムで （array配列から、3つめの要素をspliceで取り出して$itemへ代入するプログラムです） use　strict; use　warnings; my　@array　=　('a',　'b',　'c'); my　$item; この後で、 print　(　$item　=　splice　(　@array,　0,　1　)　)　,　"\n"; と書くとエラーになります……。が、 $item　=　splice　(　@array,　0,　1　); print　$item　,　"\n"; この文ならエラーになりませんでした。 この2つの違いが分からなくて困ってます。 （C言語とかでは同じ意味だったので特に……。） なぜ上はエラーで、下はエラーでないのかの理由を、分かる方ぜひ教えてください。 よろしくお願い致します。
さくらスタンダード perl make install tokyotyrant-perl-1.16.tar.gzをダウンロード 解凍してtokyotyrant-perl-1.16ディレクトリに移動 perl Makefile.PL && makeというコマンドを実行 そして、 make install としたのですが、エラーになります。 sudo make installとしても権限がないと怒られてしまいます。 どうすればインストールすることができるのでしょうか？よろしくお願いします。
perlの比較、ループの使い方について質問です。 perlの初心者でperlを使っていろいろと勉強しているのですが、以下のような場合、簡単に書ける方法ってないでしょうか？ 比較、ループなど調べてみたのですが、なかなか思うようにいきません。 よろしくお願いします。 なお、以下のスクリプトではエラーが出て動きませんが、その点は今回の説明の為ご了承願います。 my @hoge(1,10,100,1000,10000,100000,1000000); my $no=☆　←☆については1～5の間でランダムに設定します。 my(@test); for (my $i=0; $i<$no; $i++) { @test[$i]=@hoge[$i]; } 例えば$noが２の場合、@test[0]と@test[1]を比較(@test[0]<@test[1])して偽の場合は、エラーを出し、$noが３の場合、@test[0]と@test[1]と@test[2]を比較(@test[0]<@test[1]<@test[2])して偽の場合は、エラーを出し、$noが４の場合、@test[0]と@test[1]と@test[2]と@test[3]を比較(@test[0]<@test[1]<@test[2]<@test[3])して偽の場合は、エラーを出し……以下同じような感じで進めたいのですが、簡単な書き方ってないでしょうか？ if ($no==2){ unlss (@test[0]<@test[1]){エラー} }elsif($no==3){ unless (@test[0]<@test[1]<@test[2]){エラー} }elsif($no==4){ unless (@test[0]<@test[1]<@test[2]<@test[3]){エラー} } 上記のような書き方となるかと思いますが、$noが2の場合、test配列に@test[2]と@test[3]が変数としてない為上記の書き方ではスクリプト自体エラーとなります。 説明が分かりにくい点については申し訳ありませんが、どなたかご教授願えないでしょうか。 よろしくお願いします。
Perl言語での画像ファイルの作成を行いたいのですが、 2次元配列中に値をいれていて、 この2次元配列の値を画素値とするグレースケール画像を作成したいのですが、 どのようにすればよいでしょうか？ 画像形式は、bmpでもjpgでもpngでもかまいません。 今のところImagerというperlモジュールを使ってできないかと試しているのですが、 やり方が良く分からず困っています。
Excelのcsv形式の読み込み 前回、http://oshiete.goo.ne.jp/qa/6018540.htmlで 質問させていただきましたJurassic_periodです。 お力を貸していただきました方々本当にありがとうございました。 今回ですが同じプログラムでまた壁にぶつかってしまいました。 どうかよろしくお願いいたします。 Excelのcsv形式の「file.csv」のようなデータを読み込んでいます。 「out.csv」のように出力したいのですが 未入力「""」のデータ箇所が多々ある事に気が付きました。 次データを読み込むため出力データがズレてしまい困っています。 「file.csv」 "2010/1/1","C","こんにちは","田中","end", "2009/10/2","B","おはよう","","end", "2007/3/20","E","Good mor ning","佐藤","end", "1988/8/16","","こんばんは","中 村","end", "","A","Hello","木村","end", "2005/9/17","D","おはようご ざいます","斎藤","end", 「out.csv」(このように出力したいです) C,こんにちは,田中,2010/1/1,end, B,おはよう, ,2009/10/2,end, E,Good morning,佐藤,2007/3/20,end, ,こんばんは,中村,1988/8/16,end, A,Hello,木村, ,end, D,おはようございます,斎藤,2005/9/17,end, 解決法として、正規表現を用いて「半角スペース」を入れようとしました。 また、直接「file.csv」の「,"",」を置換で「," ",」にしましたが 基データを操作するのは好ましくないのでプログラムで どうにか処理ができないでしょうか。 「今書いているプログラムです」 #!/usr/local/bin/perl use strict; use Fatal qw/ open /; my $csv_file = "file.csv"; my @csv; &readCsvFile($csv_file); open(OUT,">out.csv"); for(my $i=0; $i<=$#csv; $i++){ $csv[$i][0] =~ s/"//; #行頭の"を削除 $csv[$i][4] =~ s/"//; #行末の"を削除 $csv[$i][0] =~ s// /; #空データを半角スペースに置換 $csv[$i][1] =~ s// /; $csv[$i][3] =~ s// /; print OUT $csv[$i][1],","; print OUT $csv[$i][2],","; print OUT $csv[$i][3],","; print OUT $csv[$i][0],","; print OUT $csv[$i][4],",\n"; } close(OUT); sub readCsvFile { open(IN, $_[0]); my $line = ""; while(<IN>) { chomp; $line .= $_; next if $line !~ /end/; push @csv, [ grep { length } split(/","|",|"/, $line) ]; $line = ""; } close(IN); } どうか、よろしくお願いいたします。
javascriptの中で、perlのコマンドを実行できないか。 java：クライアント側の処理。 perl(cgi)：サーバ側の処理。 なので、愚問かもしれないのですが、 ↓====================================== <script language="JavaScript"> <!-- function aaa(){ 　： EOM （この間に、perlの処理） print <<EOM; ： } // --> </script> ↑====================================== と言った感じで、javascriptのfuncitonの中で、 perlを使って、データベースへの操作をしたいのですが、 やはり、無理でしょうか。 あるいは、代案などあればご教授願えませんでしょうか。 よろしくお願いします。
perl 「予定」が「嵐閧オ」に化ける!! 商用サイトを運用しています。 その中で、perlを使用しています。PHPを使用したいのだけれど、運営マニアルを読むとPHPを推奨していないようなのです。 で不具合。 perlで「予定」という文字列をprint文でファイルに書き出すと「嵐閧オ」という文字列に化けてしまうのです。 これは「予定」の「予」の字にコード「5C」が含まれている為のようなのです。これを回避して「予定」を書き出す方法はないでしょうか。
office2007形式のファイルをアップロードすると.zipになる HP作成途中で色々調べたのですが、１人では解決できない問題がありましたので、 質問させていただきます 1)office2007形式のファイル（.docx/.xlsx/.pptx）をアップロードすると、 　ダウンロード時.zip形式の圧縮ファイルになってしまい、保存時手動で直さなくては 　いけないのを、プログラムで自動化できないか 2)現在のプログラムでは、ファイル名に日本語が入っていると、アップロードはできるが 　ダウンロードができないので、解決法はないか 以上の２点です。必要であればソースも載せますので、よろしくお願いします。
ファイルの読み込みと出力 Perl初心者です。よろしくお願いします。 file.csvのようなファイルを読み込んで、 out.csvのように出力するプログラムを作成しているのですが 途中で変な改行が度々入っているためどうしてもうまくいきません。 (file.csvですが、実際は1500行以上あります。 また、最後に必ずendが入っています。 下記のcsvですがテキスト形式で表示した内容です。) 初歩的な質問で申し訳ありません。 調べる限り調べたのですが分かりませんでした。 どうかよろしくお願いします。 「file.csv」 "2010/1/1","C","こんにちは","田中","end", "2009/10/2","B","おはよう","斉藤","end", "2007/3/20","E","Good mor ning","佐藤","end", "1988/8/16","F","こんばんは","中 村","end", "1999/1/10","A","Hello","木村","end", "2005/9/17","D","おはようご ざいます","斎藤","end", 「out.csv」(このように出力したいです) C,こんにちは,田中,2010/1/1,end, B,おはよう,斉藤,2009/10/2,end, E,Good morning,佐藤,2007/3/20,end, F,こんばんは,中村,1988/8/16,end, A,Hello,木村,1999/1/10,end, D,おはようございます,斎藤,2005/9/17,end, 「今書いているプログラムです」 #!/usr/local/bin/perl use strict; use Fatal qw/ open /; my $csv_file = "file.csv"; my @csv = &readCsvFile($csv_file); open(OUT,">out.csv"); for(my $i=0; $i<=5; $i++){ 　　　print OUT $csv[$i][1],","; 　　　print OUT $csv[$i][2],","; 　　　print OUT $csv[$i][3],","; 　　　print OUT $csv[$i][0],","; 　　　print OUT $csv[$i][4],","; } close(OUT); sub readCsvFile { 　　　open(DATA, $_[0]); 　　　while(<DATA>) { 　　　　　chomp; 　　　　　push @csv, [ split(/",\"/) ]; 　　　} 　　　close(DATA); 　　　return @csv; }
はじめまして。 現在、無料で配布されているスクリプトを見て、perlを勉強しています。 以下の内容についてですが、どうしても分からないのでどなたか教えてただけませんか。 $test=$_ ? "abc":"def"; $_が0の場合は$testは「def」になり、$_ｇ1の場合は$testは「abc」となるのですが、ここで使われている「?」と「:」の意味というか使い方が分かりません。 「?」はメタ文字かと思って調べてみましたが、それらしい内容のサイトを見つけられませんでした。 どなたかよろしくお願いします。
Perlの正規表現に関する質問です。 下記を実行した場合、$1～・・・には下記のどの正規表現に該当する値が入るの でしょうか？ sub test{ my $text = shift; pos($$text) = undef; while ( $$text =~ m{ (\s*<) ( !-+ | !-+\s*(/|//)?\s*(.*?)\s*(/|//)?\s*-+ | (/)?([!a-z0-9\-]+)\s*((?:[a-z0-9\-]+\s*=\s*[\w\-/]+|[a-z0-9\-]+\s*=\s*".*?"|[a-z0-9\-]+\s*=\s*'.*?'|\s+[^<>]{2,})*)?\s*(/)? ) (>\s*) (.*?(?=(?:<!-+ | </?[a-z0-9\-!]+\s*(?:[a-z-]+\s*=\s*[\w\-/]+|[a-z0-9\-]+\s*=\s*".*?"|[a-z0-9\-]+\s*=\s*'.*?'|\s+[^>]{2,})*)\s*(/)?>?))? }sxgi ) { ・・・ }
Perlで日本語の文章にカナを振りたいのですが 何か良いサブルーチンなど無いでしょうか？ 漢字に読み方が沢山ありますし、活用による語尾の変化もあります。 カナさえ振れればいいです。 あるいは、日本や海外のサイトのサービスでもいいです。 出来るだけ、スパっと一通りの正しい読みが得られるといいですのですが。
入れ子ループで、外側のループ変数$_を、内側のループ内から使えるか？？ ループ変数を指定しない場合、自動的に$_が使われますが、例えば、 BIG: for(0..9) { SML: for(0..9) { expr } } のようなステートメントを書いた場合、SMLループ内でBIGのループ変数$_を参照する手だてはあるのでしょうか？ イメージ的には、 $BIG::_ とやれば、出来そうだと思ったのですがダメでした^^; ださいコードでスミマセン m(__)m；；
Perlの変数に文字数制限（容量制限）はあるか Perlで書いた自作の掲示板なのですが、ずっと普通に動いていたのですが 急にデータが欠けてしまいました。書き込みデータはテキスト形式で、 ↓の様な形で保存しています。 <div>１つの書き込みの中身</div>\n <div>１つの書き込みの中身</div>\n <div>１つの書き込みの中身</div>\n <div>１つの書き込みの中身</div>\n <div>１つの書き込みの中身</div>\n １つの書き込みは１行に収まっていて、書き込み時に \n を付けて保存して、 読み込み時は配列に読み込んで、べろっと出すだけの処理です。 掲示板書き込みなので unshift で上が新しい書き込みにしてあります。 通常のタグ禁止処理や、改行コード処理はしてあります。Perl5.6.1です。 数日前、容量が減っていることに気付き、調べてみると、 <div>１つの書き込みの中身</div>\n <div>１つの書き込みの中身</div>\n <div>１つの書き のような形でデータが欠けていました。欠けていると言っても９割方消えていました。 残っていたのは新しい側の書き込みです。 いつ消えたのか、何をした時に消えたのかが不明のため、原因を探っている段階です。 もちろん、一番怪しいのはプログラムのミスなのですが、それも調べつつ、 ちょっと前から気になっていた点として、データ容量が１．５ＭＢぐらいまで ふくらんでいて重くなっていたんです。 data.dat のような１ファイルにテキストばかり１．５ＭＢ、そして内部の処理でも 普通にその容量を一つの変数に入れたりしています。 データが唐突にぶつっと切れていることと、容量が多くて気になっていたこと、 この辺りでちょっと怪しいのですが、変数の容量制限、ファイルの容量制限が 調べても出てきません。知っている方いましたら教えてください。 他にも、そういうバグの時こういうミスがあったよ、など、ありましたら アドバイスをお願いします。 自分が作った物のデバッグで恐縮なのですが、よろしくお願いします。
リクエストの待ち時間が期待通りになりません。 5秒以内にリクエストが行われた場合は、ループとスリープで待たせて、ログに記録されているタイムから5秒以上経過した時点で、新たにログにタイムを記録させたいと思っています。 複数人で同時アクセスもありますので、ループ内で常に最新のファイルを読み込む必要がある？ので、 以下のように書いてみましたが、5秒以内にリクエストした場合、通常は1秒待てば処理が終わるはずなのですが、ループが途中で終わらずに20秒待たされ、$flag==0のまま終わります。 適当な知識しかなくて恥ずかしいですが、どこか間違えている場所があればご指摘くださると幸いです。 my $logfile = "request.dat"; my $time = time; my $i = 0; my $flag=0; while ($i < 20) { $i++; open(IN, "< $logfile"); my ($request_time) = <IN>; close (IN); if($time < $request_time+5) { sleep(1); } else { $flag=1; last; } } if($flag==0){&error;} else { open(OUT,">$logfile"); print OUT $time; close(OUT); }
perl環境を整えたいのですが、躓いてます。 ここ↓を参考に環境を整えているのですが、 http://d.hatena.ne.jp/fujimogn/20090218/1234924240 localhost:8080/printenv.plにアクセスしても500 Internal Server Errorとなってしまいます。 サイトにあるとおりの修正も加えてみたのですが、変わらず。 知恵をお貸しください。
mod_perl2を複数起動する際のpidファイル指定 既にmod_perl2をインストール済みで動作していたのですが、今、1台のサーバ上で複数起動することを試しています。 設定ファイルやポート番号が重複しないようにして動してみた所、片方ずつならば指定した設定で起動できました。 が、二つを同時に起動すると同じpidファイル /usr/local/modperl2/logs/httpd.pid が指定されてしまい、後に起動した方が上書きしてしまいます。 lsof -i:xxxx など見てみても、片方ずつならば各指定したポートが開かれているものの、両方起動すると後から起動した方のみのポート開いている状態が確認できます。 mod_perl2起動時にpidファイルを指定するには、どうしたら良いでしょうか？
ハッシュを使った集計結果の出力について testフォルダに以下のファイルがあるとします。 　aaa_1、aaa_2、bbb_1、bbb_2、ccc_1、・・・ 各ファイルには○△×がついた行があり、 「aaa」のファイル（aaa_1とaaa_2）の○△×の数、「bbb」のファイルの○△×の数、を集計したいと思っています。 出力イメージは以下です。 　ファイル名の一部,○の数,△の数,×の数 　aaa,13,59,37 ファイル名の一部をキーとして、 ○△×の回数を値にしたハッシュで集計しようとしましたが、 以下のようになってしまいました。 ,0,0,0 ,0,0,0,0,0,0 aaa,13,59,0 aaa,13,59,0,13,59,37 bbb,20,10,0 bbb,20,10,0,20,10,30 ハッシュが十分に分かっていないので、おかしなことをしてるのだと思うのですが。。 ご教授くださいますよう、お願いします。 opendir(DIR, $dir); while ($file = readdir(DIR)){ 　$maru =0; 　$san =0; 　$batu =0; 　$file =~/(.*)_(.*)/; 　$name = $1; 　open(IN, "$dir/$file"); 　　while ( $line = <FIN1> ) 　　{ 　　　chomp( $line ); 　　　if($line =~/○/){ 　　　　　$maru++; 　　　}elsif($line =~/△/){ 　　　　　$san++; 　　　}elsif($line =~/×/){ 　　　　　$batu++; 　　　} 　} push(@{$test{$name}} , $maru,$san,$batu); @gyou = ( $name , join ("," , @{$test{$name}})) ; print OUT join (",", @gyou). "\n"; } close (IN); close (OUT);
Movable Type5 で　ImageMagickのインストールできません。 初めまして　皆様方。 Movable Type5 ImageMagickの検索でこちらに到着しました。 他のサイトを参考にしてImage::Magickのバージョンを変えて試していますが、 以下の内容でエラーになってしまいます。 『サーバーに Image::Magickか、Image::Magickの動作に必要な他のモジュールがインストールされていません。』 と　言うエラー内容です。 現在の環境は下記の通りです。 Win XP pro SP3 Apache2.2.15-win32-x86-openssl-0.9.8m-r2 PHP5.3.2 MT5.2 ActivePerl 5.10.1 Build 1007 ImageMagick 6.6.2 6 Q8 C:\usr\site\lib\Image\Magick.pm　あります。 C:\usr\site\lib\auto\Image\Magick　配下にもありました。 C:\Perl\bin>ppm install http://www.bribes.org/perl/ppm/Image-Magick.ppd PPM でインストールするとImageMagick6.5.7になっています。 Perl Package Manager にて確認しました。 試しに6.5.7もインストールして試しましたが同じ結果です。 ImageMagickはアンインストール後にインストールをしてＰａｔｈも以前の物は削除 してます。 同じ環境をW2KにインストールするとImage::Magicが認識されてます。 W2KはFAT32 Formatです。 お知恵をお借りしたいと思いまして、書き込みさして頂きました。 よろしくお願いいたします。
perlについて質問です ファイルの先頭にデーターを書き込むにはどうしたらいいですか？ 教えてください
Perlにおける（もしくはPHP）日付の比較について csvデータで下記のようなファイルがあります。 ブラウザに表示させる時、古い順に10件ずつ表示させたいと思いますが、初心者なりに調べたのですがどうも分かりません。 こうした場合どういう技術を使うのでしょうか 2010/06/24,りんご,青森 2010/05/10,みかん,和歌山 2010/3/10,もも,山形 お手数をおかけしますがご教授頂ければ幸いです
perlで大容量CSVのsort方法について perlでcsvファイル100MB超のファイルをソートしたいと思ってますが、以下の方法でメモリーの関係上(と思ってます。)できません。 ソートを行う方法がありますでしょうか? 件数も11万件あるので、エクセルでソートしてからの受け渡しが出来ずに悩んでます。 (ここから) #sortロジック sub sort { use warnings; use feature ':5.10'; open my $ifh, '<', $inport or &error("Can't open $inport"); my @lines = <$ifh>; close $ifh; print @lines, "\n"; #csvファイル何番目? my @sorted = map { $_->[0] } sort { $b->[0] <=> $a->[0]} map { [(split q{,}, $_)[0], $_] } @lines; @lines = @sorted; exit; } (ここまで) いつも貴重なアドバイスをありがとうございます。よろしくお願いいたします。
perlのマッチでマッチしたい物の中に空白とコンマがある場合どうしたらいいのでしょうか。 マッチしたい物＝[IF, ELSE] if( $_[ 0 ] =~ m/\[IF, ELSE\]/ ) と試したのですが、間に\sでも入れるのですか？
perlで容量の大きいCSVファイルを開く方法 ファイル容量の大きいcsvファイルから、必要な項目を抜き出して別ファイルにするプログラムを作成したいと思ってます。 csvファイルが少ない場合は動作したのですが、容量が140MBを超えたデータを読み込もうとすると、ブラウザー表示で何も変化いたしません プログラムは以下のようになってます。 ------------------------------------------------- 略 open(IN,"$inport") || &error(" $inport を読み込みopen出来ません"); flock(IN,1); @lines = <IN>; foreach $lines (@lines) { local(@val) = split("\,", $lines); print "$val[0]"; $dat .= "$val[1]\,$val[5]\n"; } open(OUT,">$dcsv"); flock(OUT,2); print OUT "$dat"; close OUT; 略 ------------------------------------------------- 件数も多いので、foreachを$lines (@lines) としないで($start .. $end)として読み込みの件数を制限して対応しようと考えてましたが、うまくいきませんでした。 ご指導いただけますと幸いです。
以下の場合の正規表現の書き方を教えて下さい。 「XXXにはマッチするがXXXYYYにはマッチしない」を一つの正規表現文字列で実現するには、どう記述すればよいですか？ 例えば、「マイナス」にはマッチするが、「マイナスイオン」はマッチさせたくない場合です。 この例の「イオン」の部分は今のところ一種類で良いのですが、もし可能でしたら複数種のワードに対応できると嬉しいです。（マイナスイオンに加えて、「マイナスドライバー」もマッチしないなど） なんか間抜けな質問ですがよろしくお願いします。
日本語を入れた変数の中に指定の文字列が入っているか比較したいのですが、うまくいきません。 ========================================= &find("リスト", 0); sub find { $form = "リストフォーム"; my($text, $num) = @_; if ($form =~ /${text}/) { print num; } } ============================================== 分かる方がいましたら、教えてください。
日付の差を求める関数はないでしょうか。 SQLのDATEDIFFのような単純明快な関数があればいいなぁと思っています。 できれば、Perlの組み込み関数か、標準モジュールで・・・x_x
checkboxをshiftキーを押しながらクリックすると複数選択するソースなのですが、 htmlファイルでは動作するのですが、以下のようにperl(cgiファイル)では複数選択できません。 もしかしたらjavaのコーディングの問題かもしれませんが、行き詰っております。 どなたかご教授お願い申し上げます。 ↓------------------------------------------- #!c:/Perl/bin/perl require 'cgi-lib.pl'; require 'jcode.pl'; print "Content-type: text/html\n\n"; print <<EOM; <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"> <meta http-equiv="Content-Style-Type" content="text/css"> <script type="text/javascript" src="jquery.js"></script> <script type="text/javascript" src="jquery.field_j.js"></script> <script type="text/javascript"> var bIsFirebugReady = (!!window.console && !!window.console.log); $(document).ready( function (){ $("#idPluginVersion").text($.Field.version); setLimitSelection(); $('input[name="chkRange"]').createCheckboxRange(function(bChecked){ $("label[for=" + this.id + "]").css("background-color", (bChecked) ? "#ffffff" : ""); }); $("#frmNavigation").autoAdvance(); window.oSelector = $("#selector"); } ); function setLimitSelection(){ $('input[name="chkLimit"]').limitSelection( { limit: 3, onfailure: function (n){ $("#idCheckboxMsg").html( "You can not select more than " + n + " items." ); return false; }, onsuccess: function (n){ $("#idCheckboxMsg").html(""); return false; } } ); $('select[name="selLimit"]').limitSelection(2); } </script> <title>test</title> </head> <body> <form action="" method="post" id="frmCreateCheckboxRange" onsubmit="return false;"> <p> <table> <tr> <td> <input type="checkbox" name="chkRange" id="chkRange_1" value="1" /> </td> <td> <input type="checkbox" name="chkRange" id="chkRange_2" value="2" /> </td> <td> <input type="checkbox" name="chkRange" id="chkRange_3" value="3" /> </td> </tr> </table> </p> </form> </body> </html> EOM ↑------------------------------
splitを使おうとしてるのですがうまく行きません A 100 A 150 B 800 A 123 A 213 B 121 のようにtxtファイルで保存しているのですが２列目の100,800,213だけを表示したいのですがやり方がわかりません。 また、100と800と213を足すなどの処理もしたいのですが詳しい方教えてください。 txtファイルは空白で区切られています。
フォームから値を配列に渡すときの処理方法 PERLでフォームからのデータの受け取り方、処理の仕方でご教授頂ければ助かります。 よろしくお願いいたします。 配列の要素数の調べ方、処理方法についてご教授頂ければ幸いです。 HTMLよりフォームのデータをcgi-lib.plの[&ReadParse(*in);]受け取っているのですが ●HTML側 セレクトボックスを5つ用意し同じNAME　（select01）のnameを付けて CGI側で受け取りたいと考えております。 （基本的に間違えでしょうか？セレクトボックスの個数分用意したほうがいいでしょうか？） 受け取った値をCGI側で受け取り要素の個数をカウントさせ 条件に合わせてERRORを出したいと考えたのですが・・・ エラーの内容は　1っこ選んであればOKでそれ以外　0の場合はNG　2個以上選択した場合は NGという形を取りたいのですが。 配列の要素数で分岐できるのかと考えたのですが そもそもこの考え、処理方法は間違えでしょうか？ アドバイスを頂ければ幸いですm(__)m require 'cgi-lib.pl'; &ReadParse(*in); ------------------------- # データ代入 @aaa =$in{'select01'};　＃フォームデータを配列に代入 $count= @aaa; この場合だと　要素の数($count)は　1になっております。 いろいろ調べていますと　cgi-lib.pl　を使用した場合はブラウザ上で スペースに見えるが　\0 だそうで・・・・ カンマで区切って　要素数を正しく表示させたいと思ったのですがうまくいきません。。 @aaa = split(/\0/,$in{'select01'}); などいろいろ試してみたのですが区切りがうまくいきません また、 $" = ','; @aaa = split(/\0/,$in{'select01'}); とすると　カウントが変わったのですが・・・・ フォーム側の一番目を選択して送信するとカウントが　1！！　 1と5番目を選択して送信したら　5！え？？ で要素数を正しくカウントされていないようです。 ちなみに　print　@aaa;　としてみると aaa,,,,eee と空の内容がカウントされてる？ようなかたちになりました。 ここで、行き詰ってしまいまして、もともとの私の安易な考えが間違えなのか？ 書き方が間違えなのか。 と思い皆さまのアドバイスを頂ければ幸いです。 ・プログラムの考え方的には間違えなのか ・一般的な正しい処理方法はどうなのか それとも。。。。要素数で分岐することが可能であるのか。 お手数ですがアドバイス頂ければ幸いです。
コマンド実行時に"&"を付けて実行するとバックグラウンドジョブで実行されますが、"&"が付けられてコマンドが実行されたかを判別する方法はありますでしょうか。 @ARGVでは特殊文字は引数として取得できないようでした。"&"も含めてコマンドラインの引数を取得することは可能かお教え下さい。
WWW::Mechanizeの文字コードについて質問 以下のようなソースコードを書いて実行してみたのですが どのサイトを取得しても、すべて文字コードがUTF8だと認識されます。 ------------------------------------------------------- #!/usr/bin/perl #WWW:MechanizeでHTMLの取得 use WWW::Mechanize; $w = WWW::Mechanize->new(); $w->get("URL"); $html=$w->content; #文字コードの判別 use Encode; use Encode::Guess qw/ascii utf8 euc-jp shiftjis 7bit-jis/; my $dec = Encode::Guess->guess($html); print$dec->name; ------------------------------------------------------- 例えば以下のサイトは文字コードがEUC-JPですがこれもprintされるのはUTF8となってしまいます。 http://barukanlog.blog31.fc2.com/blog-entry-541. … WWW:Mechanizeでサイトを取得し、サイトの文字コードを調べてすべてsjisにする ということがしたいのですが、すべてutf8に判断されて先へ進めないんです。 何か設定やメソッドを追加しなくてはいけないのでしょうか？ わかりにくい質問かとは思いますがご回答お願いします。
CGI.pmのcheckboxの-labelにHTMLタグを含んだ文字列を渡すことはできますか 具体的には、CGI.pmのcheckbox関数を使って次のような文字列を生成したいです <label><input type="checkbox" name="abc" value="xyz" accesskey="A" />abc(<span style="text-decoration: underline">A</span>)</label> 次のソースでうまくいくと思ったのですが、 $q->checkbox(-name => 'abc', -value => 'xyz', -accesskey => 'A', -label => 'abc(' . $q->span({-style => 'text-decoration: underline'}, 'A') . ')') 実際に返される文字列は、 <label><input type="checkbox" name="abc" value="xyz" accesskey="A" />abc(&lt;span style=&quot;text-decoration: underline&quot;&gt;A&lt;/span&gt;)</label> のように-labelに指定したHTMLタグが&○○;のようにエスケープされてしまいました・・・(T_T)
どなたか教えて下さい。 仕事でデータのハッシュ値を求める必要がありまして、質問致します。 ハッシュ値はマイクロソフトが提供しているfciv.exeというソフトを使い、希望のファイルのハッシュ値が、正しいことを確認しました。（正しいのは当たり前でしょうが・・・） 多少perlの知識がありましたので、perlで他の方のＨＰを参考にしながら、ハッシュ値を計算したところ、fcivと異なってしまって、誤った値が出ます。 何がおかしいのでしょうか？ 作成したperlプログラム↓ use strict; use Digest::SHA1 qw(sha1_hex); open (INFILE,">c:\a_test.txt"); my %file = <INFILE>; print sha1_hex(%file),"\n"; close(INFILE); ちなみに開くファイルに指定したa_test.txtにはSHIFT_JISで「A」を４０個入れてみました。 FCIVでは、a_test.txtの回答が5cdbb...で上記perlプログラムだとda39a3...になります。 ちなみに、a_testと名前を変え、バイナリーデータも同じように作成しましたが、 FCIVでは、回答が、5efef....上記perlプログラムではda39a3...となり、perlプログラムの方ではバイナリとテキストが同じ値になってしまいます。 ハッシュ値をよく理解してないことに問題があるのは承知ですが、どなたかプログラムの修正、ご指導宜しくお願いします。
Perl の勉強方法（プログラミング初心者） 会社でPerlを使った作業をする必要が出てくる、と聞きました。 今現在仕事はPCの設定、トラブルシュートを日々行っていますが ●●言語やプログラムというものを今までやったことがなく 私自身HTMLの読み書きが不自由しない程度の知識しかありません。 みなさん、とくにPerlからプログラムというものを始められた方は どうやって勉強されたのでしょうか？ 初心者がPerlを覚えるのに、良い方法があれば教えていただけますでしょうか？ 時間としては毎日1時間程度はPCの前で勉強が可能です。 専門学校？も莫大な金額でなければ、考慮にいれたいと思います。 よろしくお願い致します。
Perlで他サイトの情報を取得し一覧表示させる処理の高速化 Perl初心者です。よろしくお願いします。 同サーバ内にあるテキストデータをPerlで読みこみ、HTMLで一覧表示させるプログラムを見よう見真似で作成しました。リストのレコード数は10～30ほど。タイトルとボタンA～Eが配置されており、ボタンAはファイルA、ボタンBはファイルB…とリンクしています。 ファイルは同サーバ内にあり、ファイルの有無を調べてリンクするか、しないかを設定していましたが、この度、訳があってこのファイルが他サーバへ移動、さらにシステムから吐き出される仕組みになって、同じPDFファイルでも「xxxx.pdf」が「http://hoge.com/hoge.aspx?code=1234」のようにファイルの場所を特定することができなくなりました。 仕方なくファイルの有無を指定するHTMLを書き出すようにしてもらったのですが、それをget(url)で取得する方法に切り替えたとたん、一覧表示にするのに5～6秒かかるようになってしましました。 さらにこれが原因でアクセス過多でサーバに負荷がかかり、ページを表示できない要因にもなってしましました。 情報の取得方法や、負荷をかけない方法などご教授いただければ幸いです。 以下CGI抜粋 #!/usr/local/bin/perl use LWP::Simple; use Time::Local; use LWP::UserAgent; $file = @ARGV[0]; $data = $file; $file .= ".txt"; print "Content-type: text/html\n\n"; print <<HTML; <!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.0 Transitional//EN'> <HTML> <HEAD> <META HTTP-EQUIV="Content-Type" CONTENT="text/html;CHARSET=x-sjis"> <META HTTP-EQUIV="Content-Script-Type" CONTENT="text/javascript" /> … </HEAD> <BODY style="margin : 0px; > <TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0"> HTML open(IN, $file); while(<IN>){ @in = split(/\t/); $pdf = "https://www.hoge.com/filecheck/entFileCheck.aspx …[10] $gPdf = get($pdf); ＃ボタン配置の処理とか・・・ close(IN); print "</BODY>\n"; print "</HTML>\n"; exit;
2ファイルの比較 中身が以下のようなファイルがあります。 ---ファイルA中身--- a c c d e f f ----------------- ---ファイルB中身--- a a b b b c d e g ----------------- この2ファイルから、以下のようなファイルを作りたいです。 ---ファイルC中身--- b b g ----------------- つまり、ファイルBにはあって、ファイルAにはない行をファイルCに入れたいです。 while($line_B = <FILEB>){ while($line_A = <FILEA>){ @A = split(/,/,$line_A); if($line_B !~ /$line_A/){ print FILEC $line_B; } } seek(FILEA,0,0); } としてみたのですが、全然ダメです。理由も分かってます。 が、お手上げです。ご教授お願いします。
置換でcsv（tsv?）内の複数行のデータを１行にまとめたい。（超初心者です） 正規表現とperlを一週間くらい前から勉強し始めた超初心者です。htmlとcssを多少知っているレベルの人間です。 AAA,1,2,2 データイ,3,-1,0 データロ,1,0.25,8 BBB,1,2,2 データイ,3,-1,0 データロ,1,0.25,8 CCC,1,2,2 データイ,3,-1,0 データロ,1,0.25,8 のような３行一組のデータを AAA,1,2,2,3,-1,0,1,0.25,8 BBB,1,2,2,3,-1,0,1,0.25,8 CCC,1,2,2,3,-1,0,1,0.25,8 のように一番上の行にまとめようとしています。 miというmacのテキストエディタにcsvのデータを貼付けてやっているのでたぶんタブ区切りのカタチでやっていることになるのではないかと思っています。 いろんなサイトの見よう見真似でやった結果、 (.*?)\t(.*?)\t(.*?)\t(.*?) データイ\t([-]??d+(?.?d+)?)\t([-]??d+(?.?d+)?)\t[-]??d+(?.?d+)? データロ\t([-]??d+(?.?d+)?)\t([-]??d+(?.?d+)?)\t[-]??d+(?.?d+)? で３行ごとにヒットはするようになりましたが、並べ替えの仕方がよくわかりません。 [-]??d+(?.?d+)? をそれぞれ( )で囲んで $1\t$2\t$3\t$4\t$5\t$6\t$7\t$8\t$9\t$10\t$12 のようにやってみましたが、$6あたりから後がでてきませんでした。 たぶんかなりとんちんかんなことをやっている気がしているのですが、20000行近いデータの集計を早急に出さなければならない状況に置かれており焦っています。 よろしくお願いします。
perlでCSVファイルのデータを操作したいのですが… csvファイル内 あああ,1 いいい,3 ううう,2 といったようなファイルで 「あああ」に該当するデータがあった場合 1の部分を+1にしてCSVに戻すカウンター的な物を作りたいのですが なかなか思うように作れません。教えて頂けませんか。 すみませんが、どうぞ宜しくお願いいたします。
PerlのWWW**Mechanizeのオブジェクトから中身を取り出す方法。 WWW:Mechanaizeでリンクの一覧を取得しようと思い 以下のようなコードを書きましたが、リンク一覧がWWW::Mechanize::Linkオブジェクトで取得されます。 解説文を読んでもここからどうやってテキストのアドレスを取得すればいいか分からないです。 何かメソッドを実行すればよいのでしょうか？ わかりにくい質問かと思いますがご回答お願いします。 ……………………………………………………………………………… #WWW:Mechanizeの読み込み use WWW::Mechanize; #サイトの取得 $w = WWW::Mechanize->new(autocheck => 0); $w->get("URLが入ります。"); @link_list=$w->links; foreach ${_} (@link_list){print"${_}\n";} 　　　　↓ WWW::Mechanize::Link=ARRAY(0x243c564) WWW::Mechanize::Link=ARRAY(0x243c564) とオブジェクトで返されてしまう。 ………………………………………………………………………………
Perlでのテキスト置換について 現在、Perlにてテキストの置換について挑戦をしておりますが、なかなかうまくいきません。ｐプログラマーでもないので、参考書を片手にやっておりますが、まったく進みません。 先輩方々のご知恵をお借り出来ればと思っております。 処理した内容は、別ファイルに記載されたテキスト置換一覧を実行ファイルで呼び出して、対象のテキストを置き換えるというものです。バックアップなどが出来れば、なおよいです。 理想として、複数行・正規表現を使いたいと思っております。 先輩方のご知恵を拝借できれば、うれしく思っております。
バッファリング処理を高速化したいです。 perlのプログラムで性能がでなくて困っています。 ファイルの中身からレコードヘッダを検索しつつ可変長なレコードの件数をカウントするツールで バッファリングというかストリーミングっぽい処理をしているのですが 思いの外、性能が出ずこまっています。 (600MBのテキストで10分弱くらい、予定では1分程度で終わる見込みでした) とりあえず、非効率そうなのは、1レコード取得する部分と下記のようなバッファシフトの部分くらいなのですが バッファシフトについて何かもっとよい書き方はありますでしょうか? 処理的なイメージはこんな感じになっています。 LOOP_A: read(IN, $readbuf, 10240); $buf .= $readbuf; LOOP_B: ... レコード長の計算 ... バッファ内にレコード長以上なければ、LOOP_Aへ $buf = substr($buf,$reclen); # 処理済みレコードの削除 LOOP_B へ substr()の部分を C的にいうと先頭アドレスだけ移動するような書き方ができれば一番なのですが～ 1レコード取得は正規表現で探しているのですがこちらはもうすこし調べてからにしようと思います。
perlプログラム　外部複数ファイルの読み込み処理について あるフォルダに　T0001_05_01,T0001_05_02,T0001_05_03,…,T0001_05_31　という31個のファイルがあります。 それぞれのファイルは　下記のような　形式で記述されております。 （例　T0001_05_01のファイルの中身） 2010-05-01 00:00:00.000 N00001　AAAAAA 2010-05-01 00:00:00.108 N00018　BBBBBB 2010-05-01 00:00:10.305 N00002　AAAAAA 2010-05-01 01:00:10.966 N00008　CCCCCC … また、別のlist.txtに　下記のようなユニークなリストが入っております。 AAAAAA CCCCCC WWWWWW … このとき、list.txtの値が　それぞれT0001_05_XXファイルの何行目に出力されているか 出力するperlプログラムを作成したい。 （出力結果イメージ:1ファイル化） T0001_05_01　1行目　2010-05-01 00:00:00.000 N00001　AAAAAA T0001_05_01　3行目　2010-05-01 00:00:10.305 N00002　AAAAAA … T0001_05_31　10行目　2010-05-31 03:00:00.999 N00400　AAAAAA T0001_05_01　4行目　2010-05-01 00:00:00.000 N00008　CCCCCC … perlプログラム知識がないものなので、このようなファイルの出力の仕方がわかりません。 教えていただけると助かります。
perl上からfindを使い検索した結果を、変数に挿入したい perlからsystemを使い、Linuxのfindコマンドでファイルを検索した際に、 system 'find / abcde-*.tar.gz'; で検索はできるのですが、 結果の値（検索した後最後に出るファイル名の事です）を変数に入れたいのです。 どなたか教えていただけないでしょうか？ 尚、検索範囲（全体）の中に該当のファイルは1つしか常に存在しないようになっています
メールアドレス「あいうえお<xxx@yyy.zzz>」@より前の「xxx」と@より後の「yyy.zzz」 を取り出したいと思っているのですが、正規表現でどのように書けばよいのでしょうか。 元のメールアドレスは「xxx@yyy.zzz」だけの場合もあったりします。 よろしくお願いいたします。
read() on unopened filehandle at…というエラーが出て困っています。 Perlで画像ファイルをアップロードしたものをサーバー内のディレクトリに保存するようなものを作っているのですが、ファイルハンドルが開けなくて困っています。 ソースはほぼほぼ以下の通りです。 http://www.jun2065.net/index.php?Perl%B4%D8%CF%A … 宜しくお願いいたします。
perlにてフォームに入力したhtmlの<>タグの外の半角スペース削除 よろしくお願い致します。 Perlのバージョンは［5.10.0]です。 下記の様なhtmlから＜＞の外側の半角スペースを削除する方法を教えて下さい。 ＜＞の外側でスタイル指定部分の半角は残す必要があります。 <style type="text/css"> <!-- #container{*****} h1{border-right:solid #e4dac6 2px;} #<---この部分の半角スペースは残す必要があります。 .discript0 { margin:0;} #col_1{****} --> </style> <div id="container"> <h1>** ***</h1>#<---<h1>の前の部分の半角スペースは削除。 <div id="col_1"> <p class="discript0"> 123123　121 23#<---「123123　121 23」の「123123」の前と「121 23」の間の半角スペース削除。 </p> </div> </div> htmlのbodyに組み込む部分です。 ご回答頂くにあたり必要事項の追加が必要で有ればご指摘下さい。 よろしくお願い致します。 確認するボタンを押すと、自動的に「<」の前のスペースとタブが削除されて表示していますが、 記入時は「<」の前にはタブと半角スペースがあります。
Perlを用いて、XMLファイルの中のキーワードの個数を数えるプログラムを組もうと思っています。 次のようなXMLの中の<keyword>のタグに囲まれた文字列を数えるプログラムです。 <?xml version="1.0" encoding="UTF-8"?> <grant_award_list> <grant_award id="1001"> <title>タイトル1</title> <keywords><keyword>A</keyword><keyword>B</keyword></keywords> </grant_award> <grant_award id="1002"> <title>タイトル2</title> <keywords><keyword>B</keyword></keywords> </grant_award> </grant_award_list> このようなときに、次のようにキーワードとその出現回数が記載されたXMLファイルにしたいと考えています。 <?xml version="1.0" encoding="UTF-8"?> <keywords> <keyword>A</keyword> <count>1</count> </keywords> <keywords> <keyword>B</keyword> <count>2</count> </keywords> 具体的なプログラムのコードを教えてください。よろしくお願いします。
MT::Mailでメールを送信すると文字化けします。文字コードはUTF-8でMovableType5を使用しています。 MovableTypeオブジェクトリファレンスにあるとおり、 use MT::Mail; my %head = ( To => 'foo@bar.com', Subject => '件名' ); my $body = '本文'; MT::Mail->send(?%head, $body) or die MT::Mail->errstr; と、すると文字化けしたメールが送られてきます。 MySQLからデータを取得して件名、本文に入れ、メールすると文字化けせずに送れます。 my $sample = Sample::Object->load(undef,undef); my $body = $sample->text; my $subject = $sample->name; my %head = ( To => 'foo@bar.com', Subject => $subject ); MT::Mail->send(?%head, $body) or die MT::Mail->errstr; mt-config.cgiには DefaultLanguage ja MailEncoding ISO-2022-JP を追記しています。 mysqlの文字コードはUTF-8になってます。 character_set_client | utf8 character_set_connection | utf8 character_set_database | utf8 character_set_filesystem | binary character_set_results | utf8 character_set_server | utf8 character_set_system | utf8 ファイルに直に書いたときに文字化けしない方法はありますか。 よろしくお願いします。
CGI/Perlで作成したプログラムがありまして、今回、ホスティング先をLINUXサーバからWindowsサーバに移行に伴い、テストを実施しているのですが、ファイルオープンがうまくいきません。 open(IN,">temp1.txt") || &error("Can't open $file"); と記述するファイルオープンエラーになります。 open(IN,"temp1.txt") || &error("Can't open $file") と記述するとOKになります。 何か、ファイルの更新権限で引っかかっているように見えるのですが、UNIX系と違って、Windowsのフォルダーにはパーミッションの設定はないものと思っており、どうしてよいか判りません。 詳しい方でアドバイスいただけると助かります。
改行コードから改行コードまでをスプリットして配列に取り込む方法を教えてください。 ファイル「sample.txt」の中に 文字列A 文字列B 文字列C 文字列D 文字列E 文字列F 文字列G と書かれていたとします。このファイルを開き、配列@listに @list = 文字列A\r\n文字列B\r\n文字列C\r\n,文字列D\r\n文字列E\r\n,文字列F\r\n文字列G\r\n となるようなコードを教えてください。 要は二重改行コード\r\n\r\nをスプリッタとして複数の行を配列に取り込む方法です。 よろしくお願いします。
perlを使って、CSVデータからテキストデータを作りたいです。 今、こういうCSVデータで、 ----------------------------------- ID 　　　 | アイテム 　｜　商品名 ----------------------------------- 1111 　　 | AAAAAAAA 　｜　aaaaaaaa ----------------------------------- 1111 　　 | BBBBBBBB 　｜　bbbbbbbb ----------------------------------- 1111 　　 | CCCCCCCC 　｜　cccccccc ----------------------------------- 2222 　　 | AAAAAAAA 　｜　aaaaaaaa ----------------------------------- 2222 　　 | DDDDDDDD 　｜　dddddddd こういうテキストファイルを作りたいです。 ファイル名　⇒　1111.txt ファイルの中身 ---------------------------------- ID:1111 【アイテム】 AAAAAAAA 【商品名】 aaaaaaaa 【アイテム】 BBBBBBBB 【商品名】 bbbbbbbbb 【アイテム】 CCCCCCCCC 【商品名】 ccccccccc ファイル名　⇒　2222.txt ファイルの中身 ---------------------------------- ID:2222 【アイテム】 AAAAAAAA 【商品名】 aaaaaaaa 【アイテム】 DDDDDDDDD 【商品名】 ddddddddd ---------------------------------- 同じIDだったら、そこだけのアイテム名・商品名が、 同じIDのテキストに入るようなことをやりたいです。 それぞれのファイル名で保存するところまでは出来たのですが、 こんな感じになってしまいます。。 ファイル名　⇒　1111.txt ファイルの中身 ---------------------------------- ID:1111 【アイテム】 AAAAAAAA 【商品名】 aaaaaaaa 【アイテム】 BBBBBBBB 【商品名】 bbbbbbbbb 【アイテム】 CCCCCCCCC 【商品名】 ccccccccc 【アイテム】 AAAAAAAA 【商品名】 aaaaaaaa 【アイテム】 DDDDDDDDD 【商品名】 ddddddddd ファイル名　⇒　2222.txt ファイルの中身 ---------------------------------- ID:2222 【アイテム】 AAAAAAAA 【商品名】 aaaaaaaa 【アイテム】 BBBBBBBB 【商品名】 bbbbbbbbb 【アイテム】 CCCCCCCCC 【商品名】 ccccccccc 【アイテム】 AAAAAAAA 【商品名】 aaaaaaaa 【アイテム】 DDDDDDDDD 【商品名】 ddddddddd ---------------------------------- どうしたら同じIDのファイルに、同じIDのアイテムと商品だけを 表示することが出来るようになるのでしょうか、、 すみませんが、どうぞ宜しくお願いいたします。
ブラウザ上からなら実行可能なスクリプトがコマンドラインだと実行しません windowXP, perl5 で開発しています。 簡単なプログラム(test.pl)なのですが ----- #!/usr/bin/perl use IO:Socket メール送信処理 1; ----- ブラウザ上から実行すると正しくメール送信されますが、 これをコマンドプロンプトから ----- perl test.pl ----- とすると、 Can't locate IO/Socket.pm と出てしまいます。 pathが通ってないとか絶対パスとかそのあたりかと思い、 socket.pmのあるパスを通したりしましたが、変化しません。 use IO::Socket を絶対パスとかで指定するのでしょうか？ 解決方法をお教え頂ければと思います。 よろしくお願い致します。
PerlからDB接続し、データ登録時のエラー処理について DBにデータを登録するときにエラー処理を加えたいと思っていますが、 色んなサイトを参考にさせて頂いて、下記のようにしてみたのですが うまくできません。 $sth = $db->prepare(" INSERT INTO DBNAME (hinmei,su,tani,tuikabi) VALUES($hinmei,$su,$tani,$hiduke) "); if(!$sth->execute){ 　print "接続エラー"; 　exit; } または、 $sth = $db->prepare(" INSERT INTO DBNAME (hinmei,su,tani,tuikabi) VALUES($hinmei,$su,$tani,$hiduke) "); $sth->execute or &error('DBに登録出来ません'); 両方とも登録出来なければエラーメッセージを出すように してみたのですが、キー項目が同じものを登録しようとすると $sth->execute この部分でとまってしまうらしく、次の処理に行きません。 もちろん、キー項目が同じでなければDBに登録出来ます。 どうすればエラー処理の設定ができるでしょうか。 教えてください。 お願いします。
perl初心者です。 最初にサイコロを１回振り，出た目の数だけ再度サイコロを振ることができるも のとする．このとき，１振り目を含めて合計が10 以上になる確率を求めるプログラムを作りたいのですが、２回目以降の数値の和の計算方法がわかりません。回答よろしくお願いします。
perlをwindows環境でshift-jisのテキストファイルを読み込み、読み込んだファイルをutf-8でファイルを書き込み(改行コードはLF)をする方法がわかりません。 サンプルプログラムを示してもらえると助かります。 書き込みを”binmode STDOUT, ":utf8";”にするだけでは、下記のようなエラーがでました。エラーの意味が良くわかりませんでした。わかれば教えてください。 Malformed UTF-8 character (unexpected continuation byte 0x82, with no preceding start byte) at utf.pl line 7.
配列のソートについて質問です。 2つのキーで配列の中身をソートしたいのですが、スマートな書き方があれば教えてください。 そもそも間違っている、などのご指摘でもありがたいです。 @t1 = map {(split /,/)[1]} @data; @t2 = map {(split /,/)[2]} @data; @data = @data[sort {$t1[$a] <=> $t1[$b] or $t2[$a] <=> $t2[$b]} 0 .. $#t1]; @dataの内容 A,1,2 B,1,3 C,2,1 D,3,2 E,3,1 F,1,1 出力結果 F,1,1 A,1,2 B,1,3 C,2,1 E,3,1 D,3,2 よろしくお願いします。
XMLパラメータの取り込みに関して http://geocode.didit.jp/ 先日上のサイトと見つけ面白いと思い http://www.kawa.net/works/perl/treepp/treepp.htm … 上のサイトを参考に use XML::TreePP; my $tpp = XML::TreePP->new(); my $tree = $tpp->parsehttp( GET => "http://geocode.didit.jp/reverse/?lat=35.68653&lo … ); print "Title: ", $tree->{"rdf:RDF"}->{channel}->{title}, "\n"; こんな感じでXMLパラメータの住所を取り込もうとしたのですがどうしても上手く取り込めません どなたか取り込み方を教えて頂けませんでしょうか？ お願いいたします。
正規表現でURLを抽出するには。 HTML内リンク先などのURLを正規表現で抽出したいのですが。 HTML内で表記されているURLはhttpやhttps以外にも相対URLなど様々な書き方が できるようですが、それらを抽出する正規表現パターンはどの様に書けばよいのでしょうか？
CGIからデータベースにデータを登録したいのですが。。 ブラウザ（文字コードはUTF-8）からデータをCGIで取得し、そのデータをMySQLに登録したいと考えています。 このようにしています。 $sth = $db->prepare(" INSERT INTO tbl (hiduke,code,namae,suryo,biko,sakuseibi,kosinbi) 　　　　VALUES($hiduke,$code,$namae,$suryo,$biko,$sakuseibi,$kosinbi) "); $sth->execute; $biko　の部分にはデータが入ったり入らなかったりします。 この$bikoにデータが入っているときは、ちゃんとテーブルに登録されるのですが、 空の場合はテーブルに登録されないのです。 試しに、このようにしてみると $sth = $db->prepare(" INSERT INTO tbl (hiduke,code,namae,suryo,biko,sakuseibi,kosinbi) VALUES($hiduke,$code,$namae,$suryo,'',$sakuseibi,$kosinbi) "); $sth->execute; bikoの部分が空でちゃんと登録されます。 テーブル定義もbikoの部分はNULL値OKにしてあります。 bikoのデータ型がTEXTでもVARCHARでもダメです。 どうしてなのかわっぱりわからず、ここ数日、ずっと悩んでおります。 テーブルに登録するコードの直前で、$biko=''; としても登録されません。。 わかりづらい質問かと思いますが、ご不明点がございましたら ご質問ください。 よろしくお願い致します。
Movable Typeで作られたページにバナーを追加するように言われましたが、ＭＴの知識が殆どなく困っています。 管理画面や本を色々見て、ウィジェットの編集か？と思い、バナーを埋め込んで、変更→再構築→サイトの確認をしましたが、変化が見られません。 <li><a href="http://www.×××.com" target="_blank"><img src="<$mt:BlogURL$>img_banner/banner_careplan.jpg" alt="" width="200" height="77" class="imgover" /><br /> &gt;&gt;××</a></li> もともとあったウィジェットは上記のようなもので、画像も変数ですかね？プログラミングで呼び出しているのが分かるのですが、私が作追加したいバナー画自体、どこにアップしてよいのかもわかりません。 あと上記では、リンクは外部リンクになっていますが、今回のバナーは内部にＨＴＭＬで作ったページへのリンクとなります。 ＨＴＭＬで作ったページ自体もＦＦＦＴＰでアップしたのですが、アドレス直入力しても表示されません。 本当に困っています！！！ やはりプログラミングがわかる方でないと難しいのでしょうか？ 当方、普段ＤＷでＨＴＭＬでサイトを作っているものです。 ＭＴお詳しい方、どうかお力をお貸し下さいませ。
Perlの改行で、 print <<HTML; この場合は、ここを自由に改行出来ると思いますが、 HTML print "Content-type: text/html\n\n"; &aaa ("<p style='color:#eee'>色</p>～～～～～～～～"); &aaa ("～～～");　を使う場合、～～～の部分がとても長くなるときに、 テキスト内で改行する場合、自由に改行を入れても良いでしょうか？ どうやれば良いのでしょうか？
@data[0] = "id,http://okweb.com/WE7@x,pass"; @data[1] 以降続く。 foreach (@data) { ($id,$url,$pass)=split(/\,/,$_); if ($id eq $in{'id'}) {last;} } print "$url\n"; これだと $url の@以降の部分が表示されずに http://okweb.com/WE7 このようになってしまいます。 @data = "id,http://okweb.com/WE7\@x,pass"; このように、@の前に\を入れれば大丈夫なのですが、他に何かよい方法はないでしょうか？
CGI.pmで<s>タグは出せないのでしょうか。 同じような質問で恐縮です。 HTMLでは、取消線のための、 <s>と<strike>という全く同じ意味の2個のタグがありますが、 これをCGI.pmの関数で出力しようとすると <strike>は出せるのですが、<s>はどうやって出すのでしょうか。 CGI.pmでは<strike>に統一されて、<s>のための関数はサポートされていないのでしょうか。 それとも<s>なんてタグは既に廃止されて、今では存在しないのか？？？
標準出力上でのファイルポインタの扱いで困っています。 簡単な例で説明すると、 下のプログラムはファイル内で、一秒ごとに左から順に1を0で置き換えていくもので正常に動作します。 open(F, '+< temp'); print F "11111111111111111111111111111111\n"; for(0..31){ seek(F, $_, 0); print F '0'; sleep(1); } close(F); 同様のことが標準出力でも可能かと思って以下のようにしてみたのですが、うまくいきません。 open(STDOUT, '+<'); print STDOUT "11111111111111111111111111111111\n"; for (0..31){ seek(STDOUT, $_, 0); print STDOUT '0'; sleep(1); } close(STDOUT); } 2つ目の例では動作を見るかぎり、ファイルポインタは1111.....の先頭からのオフセットではなく、その次の行（空行）の先頭からのオフセットとなっているように見えます。つまり古い行には戻れていないようです。 Seek()は標準出力上では使えないのでしょうか？
CGI.pmでHTMLのコメントタグを出力する関数はありますか？ 例えば次のような文字列を出力する関数はありますか。 <!--- document.write("abc".bold()) //---> 阿呆みたいな質問ですみません m(__)m
perlで、日本語を含むURL（勿論、エンコード）のページ作成を考えています。 が、ファイルの作成まではうまくいくのですが、いざ、そのURLにアクセスすると 「not found」になってしまいます。 （FTPでのぞくと、確かに、そのファイルは存在するのに、 そのURLにブラウザーからアクセスすると「not found」になってしまいます） そこで、以下の様な小さな実験をしてみました。 ＜実験＞ %A3.html という名前のファイルを手動で作り、それをFTPでアップしたところ、 FTP上では「%A3.html」ではなく、「%25A3.html」と表示されました。 そして、 http://nantoka.com/%A3.html http://nantoka.com/%25A3.html 両方にアクセスしたのですが（nantokaの部分は架空のものです）、やはり両者とも「not found」になってしまいます。 ●なぜ、この様な現象が起るのでしょうか？ ●どの様にすれば、この問題は解決するのでしょうか？ 教えていただければ幸いです。 ちなみに、perlの中では、以下の様な処理をしています。 ---------------------------------------- #　キーワードは、UTF-8エンコードサイトから引っ張ってきます。 $keyword＝"キーワード"; #URLエンコード use URI::Escape; $keyword = uri_escape($keyword); $pageurl ="p/$keyword?.html"; $body ="サイトの中身"; open( FH, '>',$pageurl); print FH "$body"; close( FH ); ---------------------------------------- これで、 http://nantoka.com/p/$keyword.html （例えば、http://nantoka.com/p/%8F%AC%91%F2%88%EA%98Y.html等にアクセスした時に、 ちゃんと表示させたいのです。今現在も、FPTで見ると、当該ディレクトリーに「%8F%AC%91%F2%88%EA%98Y.html」は 存在しているのですが、ブラウザーでアクセスすると「not found」になってしまいます。
正規表現の否定先読みで、複数の否定文字列を指定する方法はありませんか？ 例えば、 /(a)(?!bbb)/ は、後ろにbbbが続かないaを意味すると思いますが、 後ろにbbb、ccc、dddのいずれもが続かないaを表現する方法を探しています。
CSVファイルを読み込み、ファイル名を変更。 使用言語はperlです。perlは初心者です。 アルゴリズムが、 CSVファイルを読み込み→２次元配列に格納→ファイル名変更 という流れになっているプログラムを作成中です。 CSVファイルの中身は あ.txt , a.txt い.txt , b.txt う.txt , c.txt です。 CSVファイルを読み込み２次元配列に格納するプログラムは以下のようにしました。 ----------------------------------- $i= 0; open IN, "sample.csv"; while (<IN>) { my @data = (); @data = split (/,/); for (0..@data) {$jdata[$i][$_] = "$data[$_]";} $i++; } close IN; ---------------------------------------- 「あ.txt」を「a.txt」に変更しようとして、この中に rename $jdata[0][0] , $jdata[0][1] ; と書いてみましたが、変換されません。 どう書けばよいのでしょうか。よろしくお願いします。
ディレクトリの変更 unixで % ls abc/ 7947/ のように、ディレクトリ名が アルファベット何文字かのディレクトリ、数字何文字かのディレクトリがあり 数字何文字かのディレクトリにカレントディレクトリを変更したいです。 system("cd ./*[0-9]*"); ではダメだったような気がするのですが、どうすればよいですか？
2つのデータを統合を効率よく出来ません 2つのデータを統合するプログラムをperlで作成しています。 データはテキストでサーバー環境にあります。 クラスデータ 1,1-1,1年 2,1-2,1年 3,1-3,1年 4,2-1,2年 5,2-2,2年 6,3-1,3年 7,3-2,3年 名前データ 1,田中,たなか 2,伊藤,いとう 3,斎藤,さいとう 4,上野,うえの 5,大阪,おおさか 6,福島,ふくしま 7,矢部,やべ 最終データ 1,田中,たなか,1-1,1年 2,伊藤,いとう,1-2,1年 3,斎藤,さいとう,1-3,1年 4,上野,うえの,2-1,2年 5,大阪,おおさか,2-2,2年 6,福島,ふくしま,3-1,3年 7,矢部,やべ,3-2,3年 以下のプログラムで動作させていますが、件数が多くなると非常に非効率となり動作しなくなります。 ※公開用にプログラムを修正しています。おかしい部分があるかもしれません。 (ここから) 略・・・ open(DB10,"<$namefile") || next; flock(DB10, 1); @lines10 = <DB10>; close(DB10); foreach $lines10 (@lines10) { ($seq,$name,$kana,$classnew,$nennew) = split("<>", $lines10); open(DATA,"$classfile")|| die &error(" $classfile を読み込みopen出来ません"); flock(DATA,1); @lines11 = <DATA>; close(DATA); foreach $lines11(@lines11){ ($seq1,$class,$nen) = split("<>", $lines11); $classnew = $class; $nennew = $nen; open(DATA1,"$classfile")|| die &error(" $classfile を読み込みopen出来ません"); flock(DATA1,1); @line21 = <DATA1>; close(DATA1); foreach $line21(@line21){ local(@val) = split("<>", $line21); if($seq1 == $val[0]){ $line21 ="";} push(@new,"$line21"); } push(@new,"$seq1<>$class<>$nen\n"); open(DATA1,">$classfile")|| die &error(" $classfile をwrite出来ません "); flock(DATA1,2); print DATA1 @new; close(DATA1); @new = ""; } @new1 = ""; open(DB12,"<$namefile") || &error("Can't open $namefile"); flock(DB12, 1); @line12 = <DB12>; close(DB12); foreach $line12 (@line12) { local(@val1) = split("<>", $line12); if($seq == "$val1[0]"){ $line12 ="";} push(@new1,"$line12"); } push(@new1,"$seq<>$name<>$kana<>$classnew<>$nennew<>\n"); open(DB12,">$namefile")|| die &error(" $namefile をwrite出来ません "); flock(DB12,2); print DB12 @new1; close(DB12); } } (ここまで) プログラムの流れとしては(私が解釈している)、2つのファイルを1件読み込み更新を最終行へ毎回行っているというものになります。 恐らく、もっと効率の良い方法があるとは思っているのですが、アイデアが浮かばす止まってしまいました。 このプログラムではなく別のものでもOKです。私がこの方法しかしらないのでこの記述をしています。 ファイルの更新系でアドバイスがいただけたらと思い書き込みます。 ご指導よろしくお願いいたします。
宜しくお願いします。 フレームで分割されたウィンドウA(左)、B(右)があり Aの部分にはsubmitボタン、Bの部分には60個位のセレクトメニューがあります。 Aのsabmitボタンを押すと、Bのセレクトメニューで選ばれた値を 取得しサーバー側に保存したいのですが、上手くいきません・・・。 わかる方がいましたら教えて下さい。 お願いします。 javascriptを使用してcookieに保存する方法で作成していたのですが 保存量オーバーみたい中途半端に保存されてしまうのです・・ すいませんが宜しくお願いします。
正規表現のパターンマッチがうまくいきません。 入力した文字を含むデータを抽出しようとしているのですが、エラーは出ないものの、ヒットしません。 次の構文をそれぞれを試してみました。 目的は入力された文字$matchを含む$textを@queryに入れることです。 if($text =~ /$match/){ push(@query, $text); } if($text =~ /\$match/){ push(@query, $text); } if($text =~ /.*\$match.*/){ push(@query, $text); } if($text =~ m/.*\$match.*/){ push(@query, $text); } 半角英数で何度か試したのですが、どれでやってもヒットしてくれません。 どこをどのように訂正すればいいでしょうか。 お分かりの方ぜひご指導ください。 ちなみによく入力データを$in{aaa}とか$QUERY{aaa}などとまとめることがあるのですが、これを正規表現にそのまま入れるにはどうしたらいいでしょうか。 {}は量指定子になるのでこのままではエラーになるかなとも思うのですが、\などでエスケープすればいいのでしょうか。 上の$matchも元々は$in{aaa}なのですが、 $match = $in{aaa} として変えています。
Perlでのloginモジュールを探しています。 perlでSNSのようなサイトを作っていて、login周りのモジュールを探しています。 基本的にはmixiのような感じのものをイメージしているのですが、そもそもそのようなモジュール等はあるのでしょうか？それとも簡単に環境変数とIDとを一時的に紐付けて処理をおこなっているのでしょうか？ あるかないかもわからないので参考になるものは何でもかまわないので宜しくお願いします。
Perlで作成したCGIについて Perlで作成したCGIについて質問させていただきます。 #################### ##(1)system.cgi ## #################### #!c:/Perl/bin/perl.exe use strict; use warnings; use CGI; use CGI::Carp('fatalsToBrowser'); use CGI qw(:standard); print "Content-type:text/html;charset=utf8\n\n"; system('C:\\test.txt'); ##################################################### C直下にあるtest.txtの中身は「abcd」など 簡単なものです。 ##################################################### ################### ##(2)win32.cgi ## ################### #!c:/Perl/bin/perl.exe use strict; use warnings; use CGI; use CGI::Carp('fatalsToBrowser'); use CGI qw(:standard); use Win32::API; print "Content-type:text/html;charset=utf8\n\n"; my $MessageBox = Win::API -> new("user32","MessageBoxA","NPPN","N"); $MessageBox -> Call(0,"HelloWorld","Message",0); ##################################################### ##################################################### 以下にスペックを書きます。 Microsoft Windows XP Professional version2002 Service Pack2 Genuine Intel(R)CPU L2300 @1.50GHz 1.50GHz,1.49GB RAM ・ActivePerl ver5.10.1 built for MSWin32-x86-multi-thread ・Apache Apache 2.2.14(Win32) ##################################################### 上記の(1)、(2)のプログラムをエクスプローラ上（ローカル）で実行させて(1)ではテキストファイルを、 (2)ではメッセージボックスを表示させたいです。 結果は時間がかかるだけでTimeOutの設定である５分で切れてしまい何も起こりません。 しかし、全く同じプログラムで拡張子を.plに変更してコマンドプロンプトで実行すると、 期待通り(1)はテキストファイルが開かれ、(2)ではメッセージボックスが出てきます。 (1)、(2)ともCGIではsystemおよびMessageBoxの部分をコメントアウトして print文などを書けば普通にエクスプローラに表示されます。 （かなりhtmlとしては不備があると思いますが・・・） どうすればCGIで(1)、(2)のプログラムが期待通りの動きをするのか どうぞご教授のほどよろしくお願いいたします。 何か足りない情報や意味の分かりづらい個所がありましたら、仰ってください。 ちなみにこのプログラムは公開するために作成しているのではありません。 下手な説明、長文すみません。
perlにてcgiを勉強しようと初掲示板を作ってみました。 しかし、日本語を入力すると文字化けしてしまいます。 また、入力フォームの下に[1～][11～][21～][最新10件]のようなリンクを付けたいです。 以上２点のやり方を教えて下さい。お願いします。 #!/usr/bin/perl -w use strict; use warnings; use Encode; use utf8; use CGI; print "location: ./bbs.html\n\n"; print "Content-type: text/html\n\n"; my $q = new CGI; my $name = $q->param('name'); my $body = $q->param('body'); $name =~ s/</&lt;/g; $name =~ s/>/&gt;/g; $body =~ s/</&lt;/g; $body =~ s/>/&gt;/g; $body =~ s/\n/<br \/>/g; my($sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst) = localtime(time); $year += 1900; $mon += 1; $wday = sprintf("%s", qw(日 月 火 水 木 金 土)[$wday]); my $time = sprintf "$year/%02d/%02d($wday) %02d:%02d:%02d",$mon,$mday,$hour,$min,$sec; open LOG, ">> log.txt"; print LOG "$time<>$name<>$body\n"; open LOG, "< log.txt"; my @log = <LOG>; close LOG; open HTML, "> bbs.html"; print HTML << "END"; <html> <head> <style> body{background:#f0f0f0;} span.name{color:blue;} p.body{margin-left:32px;} </style> <script type="text/javascript"> <!-- function check(form){ function id(id){return(document.getElementById(id));} if(form.name.value == "" || form.body.value == ""){ id('err').innerHTML = "入力に誤りがあります<br />"; id('err').style.color = "red"; return false; }else{ return true; } } //--> </script> <title>簡易掲示板</title> </head> <body> <form action="bbs.cgi" method="post" onsubmit="return check(this)"> <fieldset> <legend>入力フォーム</legend> <span id="err"></span> <label>名前</label><br /> <input type="text" name="name" /><br /> <label>本文</label><br /> <textarea name="body"></textarea><br /> <input type="submit" value="書き込み" /> </fieldset> </form> <hr /> END close HTML; open HTML, ">> bbs.html"; my $num = 0; for(@log){ $num++; chomp($_); my @write = split /<>/, "$_"; print HTML "<p>$num：<span class='name'>$write[1]</span> $write[0]</p>\n<p class='body'>$write[2]</p>\n"; } print HTML << "END"; <hr /> <a href="dammy">TOP</a> </body> </html> END close HTML; exit; よろしくお願いします。
perl初心者です。 わかる方がいましたら教えて下さい。 お願いします。 画面上に世界地図の一部があり、各国名の横に セレクトメニューがあります。 そのセレクトメニューから色を選択して submitボタンを押すとサブルーチンを呼び出し、 選択した値をファイル (textファイル:ここではbase.txt) に書き込み、 その後、画面上にある国名のバックグラウンドに 色を付けるということをやりたいのです。 また、国名の色を変更したい場合は、 変更する部分は変更した色が表示され 変更されない部分は以前に設定した色が表示されるように したいのですが、上手くいきません・・・ 教えて下さる方がいましたらお願いします。 #サブルーチン呼出 if( $form->param('btn') ){ &save(); } #呼ばれるサブルーチン sub save { open(FH,"base.txt"); while($bf=<FH>){ push(@before,$bf) } close FH; for($i=0;$i<58;$i++){ push( @submit, $form->param($i) . "\n" ); } for($ct=0;$ct<58;$ct++){ if( $before[$ct] == $submit[$ct] ) { push( @after, $before[$ct] ); }else{ push( @after, $submit[$ct] ); } } open(FH,">base.txt"); print FH @after; close FH; }
perlでWMV形式のファイルをダウンロードしたいです 何かいいスプリクトを教えてください。 WMV形式のアドレスは、WinPcapで解析したものです、http://xxx.xxx.wmvを直接指定で、ダウンロードでき るとうれしいです、お願いします。
圧縮ファイルから復元 system("tar cvzf $backup $base"); 上で作られた圧縮ファイルを、別のフォルダにパーミッション含めて丸ごと 復元するには、どのようにすればいいのでしょうか？
OSはWinXPです。 ちなみにActivePerl-5.10.1.1006-MSWin32-x86-291086.msi(確か)でImage::MagickはImageMagick-6.6.1-Q8です。 perlでためしに作ってみた文章をいじるプログラムを実行すると問題なくできるのですが、画像をいじるプログラムを作って実行すると”core_rl_magick.dllが見つからなかったためこのアプリケーションを実行できません”というエラーメッセージが出ます。ActivePerlとImageMagickをインストールしなおしても同じエラーがでます。 今までは画像をいじるプログラムを実行してもでなかったので対応に困ってます。 最近セキュリティをking softにした時にセキュリティに引っかかったファイルをろくに見ずに消去してしまったので、もしかしたらその中に入っていたのかもしれません。 perlを勉強し始めたばかりなので困っています。もし対処法を知っている方がおりましたら教えてください。 よろしくお願いします。
Ｐｅｒｌを学ぶ理由付けはあるでしょうか？ ＨＴＭＬ、ＰＨＰ、ＪａｖａＳｃｒｉｐｔなどを少し勉強して来ましたが、 その上、Ｐｅｒｌ／ＣＧＩを学ぶ必要があるでしょうか。 Ｐｅｒｌを学ぶ利点を教えて下さい。
cgiとdatデータのパーミッションをcgi提供者の推奨する値にサーバー側で変更しても、数十秒後には元に戻ってしまいます。サーバーはロリポップで、以前他のＨＰで同cgiを導入した経緯もあり、動作環境は問題ありません。 違う点といえば、以前はレンタルサーバを自分で登録しcgi設定をし、今回はクライアントがレンタルサーバ登録し、サーバ情報をもらって自分のPCからデータをアップ、サーバ側でパーミッション変更という形です。 レンタルサーバのユーザーが異なる場合、パーミッションの書き換えが勝手に書き換えられる、ということがあるのでしょうか。 もしその場合、どのように対処すればよいのかご指導ください。
Perlの初心者です。 先ほど、「その他」のカテゴリーで 初めて質問させていただきましたが、 「カテゴリーが違ういますよ」と 指摘いただいたので、改めて、質問させていただきます。 本当は、LINUXで使用したいのですが、 自宅にその環境が無いので、MS-DOSで使用する為、 テキストファイルに下記の記述をしました。 print "\n"; print "どれについて知りたいですか?"; print "\n"; print "\n"; print "(1)いちご"; print "\n"; print "(2)みかん"; print "\n"; print "(3)りんご"; print "\n"; print "\n"; print "回答 ____　"; print "\n"; 私としては、例えば、(1)のいちごを選べば、 任意の場所に保存している、いちごに関するファイルを MS-DOS上で開きたいのですが、上手くいきません。 何かが足りないのは、感じているのですが、 それが何なのかが、わかりません。
Perlのエディタは何が良いでしょうか？ 今まで、ＨＴＭＬ、ＰＨＰ、Javascriptをプログラミングするのに、 エディタとして、Peggy Pad（バージョン4.62）を使っていましたが、 今、Ｐｅｒｌをプログラミングする時、Peggy Padでは、色が変わらないので不便です。 Peggy Padで、Ｐｅｒｌを打ち込んだとき、色を変える方法はあるでしょうか？ それとも、Ｐｅｒｌに適したエディタが、フリーソフトとして何かあるでしょうか？
perlの正規表現の部分を勉強しているのですがわからないところがあります。 /\b123\b/と/^123$/は同じ意味ですか？ 同じだとしたら、/^～$/という書き方があるのに/\b～\b/はどういう場面で効果的なのでしょうか？
my($sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst) = localtime(time); $wday = sprintf("%s", qw(Sun Mon Tue Wed Thu Fri Sat)[$wday]); ２行目のsprintfですが、qw(Sun Mon Tue Wed Thu Fri Sat)[$wday]はどのようなことが行われているのでしょうか？ sprintf("%s", "hello world!");みたいな基本的なものならsprintfの使い方はわかります。ですが、qw(aaa bbb ccc)[$hoge]のような記述についてがわかりません。 上記の例でいえば、どういう結果になるのかはわかるのですが、どういう過程で代入されているのかがわかりません。 qw(Sun Mon Tue Wed Thu Fri Sat)[$wday]という書式はどういうことが行われているのか教えてください。よろしくお願いします。
# 初心者です。opensuse 11.2 です。よろしく、お願いいたします。 # 以下のような chmod.pl を フォルダ　4c がある フォルダに置きま した。 # そして、ターミナルKonsoleで 、 perl -T chmod.pl としました。 # すると、 # フォルダ 4c の中に フォルダ10個 4c01～4c10 を作るのは、うまくいきました。 for (my $i = 1; $i < 11; $i++){ mkdir ("4c/4c0$i", 777); #　次に、フォルダ 4c の中にある フォルダ aa4 の中にあるファイル #　100個 1001.cgi～1100.cgi を　4c01～4c10 へコピーすることも、できました。 for (my $j = 1001; $j < 1100; $j++){ copy "4c/aa4/$j.cgi", "4c/4c0$i/$j.cgi" or die $!; } #　でも、次に、 4c01～4c10 のすべての cgiファイルを #　パーミッション 755 にしようとしたところ。 for (my $k = 1; $k < 10; $i++){ chmod(0755,"4c/4c0$i/*.cgi"); } } # だめでした。エラーの表示はでません。 #どうしたら、よいかお教えください。お願いいたします。
DreamWeaverCS4でフォームを作成しているのです。フォーム内容を自分のメールに送られるようにしたいからです。そこで、プロバイダから配布されたPerlパスとSendmailパスはどのように使用するのでしょうか？アクションの欄には何をどのように記入すればわかりません。 どなたか教えてください！
現在perlの勉強中で、ハッシュの項目まできました。しかし、use strictにするとこのコードがエラーになります。 #!/usr/bin/perl use strict; use warnings; print "Content-type:text/html\n\n"; $hoge{"key1"} = "value1"; print $hoge{"key1"}; exit; ヴァージョンは5.8.9です。use strictをコメントアウトすればエラーはでません。どうしてエラーになってしまうのでしょうか？どうすればエラーを出さずに表示することができるのでしょうか？どうかご教授ください。よろしくお願いします。
perlが分かりません。 この度ドメイン変更に伴い、通販ソフトの入れ替えを行いましたが、そのチェックの際に、購入ボタンを 押すとCan't use an undefined value as a HASH reference at ../tk3lib/Design/TkBasketTable.pm line 662. というエラーが出てしまいます。 該当箇所の近辺は、# 商品・在庫情報取得 GOODS:{ my %where = ( GoodsID=>$RecBasket{GoodsID} ); $GdsDB->load_data({ where=>\%where }); $StkDB->load_data({ where=>\%where }); %GoodsHash = ( FieldList => $GdsDB->{FieldList}, RecordList => $GdsDB->{RecordList}, RecordCount => $GdsDB->{RecordCount}, ); %StockHash = ( FieldList => $StkDB->{FieldList}, RecordList => $StkDB->{RecordList}, RecordCount => $StkDB->{RecordCount}, ); }; my @GoodsList = @{$GoodsHash{RecordList}}; my @StockList = @{$StockHash{RecordList}}; my %RecGoods = %{$GoodsList[0]}; my %RecStock = (); %RecStock = %{$StockList[0]} if ($StockHash{RecordCount} > 0); 該当行は、下から3行目あたりになります。
現在はじめてのperlという本を読みながら勉強を進めているのですが、永続的なプライベート変数という項目で、state変数がでてきました。そこでコードを書いて試してみようと思ったのですが、どうやら使用しているサーバー(さくらのレンタルサーバライトプラン)ではperlのヴァージョンが5.8.9のようでstate変数が使用できませんでした。このような場合、state変数に代わり何を使用すればいいのでしょうか？
外部ファイルに「漢字（かんじ）、片仮名（かたかな）、平仮名（ひらがな）、アルファベット」と書かれていたとします。これをperlのopen(IN,">ファイル名");で読み込んでファイルの中身を$_に代入する時に、漢字（かんじ）や平仮名（ひらがな）などの漢字と括弧で囲まれた平仮名の文字列にマッチしたらルビタグを挿入したいのですが、どうすればいいですか？ 「漢字（かんじ）」や「平仮名（ひらがな）」を「<ruby><rb>漢字</rb><rp>（</rp><rt>かんじ</rt><rp>）</rp></ruby>」のような文字列に置換したいのです。
VirtualBox上でのImage-Magickインストールについて。 Mac Snow Leopard上で、virtualbox で windowsXP をインストールし、 Apacke2.2を使ってWeb環境を作成しています。 Perlはstrawberry perl の 5.8 です。 Image-Magick(PerlMagick)をppmを使ってインストールしたのですが、 インストールは成功するのですが、mt-check.cgiでImagekMagickを認識しませんでした。 (CPANでのインストールや、ppmをbribes.org からインストールも試しましたが、こちらはインストールに失敗しましした) 試しに Perlで画像を縮小するスクリプトを実行してみたのですが、 Apacheのエラーログに、「階層が深すぎます。スタックがオーバーフローしました。」 というエラーが出力されていました。 VirtualBoxではなく、純粋に Windows(2000、XP、Vista、7など)にインストールした際には このような現象が起きませんでした。VirtualBoxだからの事でしょうか。 もし回避方法が分かりましたら教えてもらいたいのですが。 よろしくお願いいたします。
http://brassiere.jp/ ここのTOWNというゲームなのですが、 所持金が1e+20以上になるとエラーが出るようになりました。 これは扱える数字が1e+19までという事なのでしょうか。
perlで異なる名前のファイルを複数保存する方法？ がわからなくて困っています。 やりたいことは、htmlファイルを開いて、文書の一部を置換して、別名で複数のファイルを作成することです。 下記の名前を変更するのところだけ、どうすればよいのかわかりませんでした。 for ( $i = 1; $i <= 10; $i++ ) { 　　template.htmlをコピーして、edit.htmlを開く。 　　edit.htmlを開く。 　　文書内でif条件にマッチするものを置換する 　　edit.htmlを保存して閉じる。 　　rename ("edit.html", "edit$i.html"); #ここで$iがそのままで、edit$i.htmlが作成されてしまう。 } 説明不足の部分もあるかと思いますが、よろしくお願いします。
Perl , javascript 初心者です。 あるページの一番下に，チェックボックスを設置して選択してもらうという簡単なアンケートを作っています。 submit ボタンを押した後，CGI(Perl) で処理を行い，その後元のページの元いた場所（アンケートがあるところ）を表示させることはできますか？ また，できれば submit ボタンの横に「ご協力ありがとうございました」というコメントを表示したいと思います。 良い方法があれば教えて下さい。
perlの最適化に取り組む際のa.outについて 下記IBMのサイトを参考にperlの最適化について取り組んでいます。 http://www.ibm.com/developerworks/jp/linux/libra … 現在、意図しているscript.plでは、http://.../script.plにアクセスした場合、現状エラーのない状態です。 その状態で素直に、 $ perlcc -B script.pl を実行し、a.outというファイルが出来るのを確認しました。 shell上で $ a.out を実行すると、ウェブにアクセスした場合に表示される画面が表示されます。 $ mv a.out /var/www/lib/db/Atest としてリネームしました。 その後、一応パーミッションも実行権限付けました。 ●test.cgiとして下記を作成しました。 #!/usr/bin/perl use lib '/var/www/lib/db'; unshift @INC, '/var/www/lib/db'; use utf8; use open ":utf8"; use open ":std"; BEGIN{ $| = 1; print "Content-type: text/html\n\n"; open(STDERR, ">&STDOUT"); } #1. system(Atest); #2. foreach(`Atest`){ print $_; } #3. open(OUT, "| Atest|"); print OUT; close(OUT); 1; Atestの実行結果をWebからのアクセスで表示可能にならないか検証しているのですが、画面は真っ白な状態です。 サーバーのerror.logにも何も表示されません。 上記IBMのサイトで解説されている 抜粋：「perlccはCソースに埋め込まれたものを生成します。このCソースが、完全なスタンドアローンの実行可能ファイルにまでコンパイルされます。」 とあるように、Cが分かっていないと駄目なのでしょうか Webからアクセス時、表示可能なようにするにはどのようにすれば良いかご教授頂けませんでしょうか
エラーでハマっている為、use AutoLoaderする際の記述法と概念を知りたいです。 ----------------------------------------------- test.cgi use lib '/var/www/lib'; unshift @INC, '/var/www/lib'; use AutoLoader 'AUTOLOAD'; RegistDataList();#ここで存在しない関数を呼び出す ----------------------------------------------- ●自作モジュール(UserEditCommon.pm) ----------------------------------------------- package UserEditCommon; BEGIN{ use Exporter(); @ISA = qw(Exporter); @EXPORT_OK = qw(RegistDataList); } use utf8; use open ":utf8"; use open ":std"; use AutoLoader 'AUTOLOAD'; 1; __END__ ここ以降に色々な関数が記述されていますが、元々ライブラリーだった為、OOP的なコンストラクタやデストラクタは記述していません。 ---------------------------------------------- $ perl -e 'use AutoSplit; autosplit($ARGV[0], $ARGV[1], 0, , 1)' UserEditCommon.pm auto 上記を実行すると、auto/UserEditCommon/関数名.alファイルが沢山出来ました。 それを/var/www/lib/autoとしてUP ●下記を参考にしているのですが http://perldoc.jp/docs/perl/5.8.0/AutoLoader.pod … 抜粋「B<AutoLoader>のAUTOLOADサブルーチンために、 明示的にそれをインポートI<しなければなりません>。」 とある為、 use AutoLoader 'AUTOLOAD'; と記述する際はtest.cgi内ではsub AUTOLOADが必要ないと解釈しています。 実行した際、 Can't locate auto/main/RegistDataL.al in @INC (@INC contains: /var/www/lib ... となり、auto/main/のRegistDataList.alが呼ばれているはずなのに、なぜRegistDataL.alという名前でのエラーなのでしょうか ●またtest.cgi内で use AutoLoader; とした場合のsub AUTOLOAD内の記述をお教え願えませんでしょうか sub AUTOLOAD { #print "$AUTOLOAD は未定義です"; my $sub = $AUTOLOAD; $sub =~ s/.*:://; $AutoLoader::AUTOLOAD = $sub; goto &AutoLoader::AUTOLOAD; } 上記のようにしても、エラー内容が Can't locate auto/AutoLoader/RegistDataL.al in @INC (@INC contains: /var/... となってしまい、どうすればよいか途方にくれています。
正規表現で $ruby = "昨日の天気（てんき）は雨だったが、今日は快晴（かいせい）だ。明日の天気は曇りの可能\性（かのうせい）が高い"; $ruby =~ s/([亜-煕]|[一-龠])（([^）]*)）/<ruby><rb>$1<\/rb><rp>（<\/rp><rt>$2<\/rt><rp>）<\/rp><\/ruby>/g; としたら実行結果がこうなりました。 昨日の天気（てんき）は雨だったが、今日は快・ruby>ー（かいせい）だ。明日の天気は曇りの可能・ruby>ォ（かのうせい）が高い どうすればよろしいですか？
テキストファイルに「今日の天気（てんき）は晴れ」という文章が書かれていたとします。 これを open(IN,"<log.txt"); flock(IN,1); @log=<IN>; foreach(@log){ print "$_"; } というプログラムで開いたとき、「$_」に代入されている「今日の天気（てんき）は晴れ」の「天気（てんき）」の部分を「<ruby><rb>天気</rb><rp>（</rp><rt>てんき</rt><rp>）</rp></ruby>」に置換したいのですが、どうしたらよいのでしょうか？ 「天気」の方は「s/([亜-煕]|[一-龠])/$1/g;」で認識するんですが、「（てんき）」はどうすればいいのか分かりません。
ランキングCGIを作成中なのですが、投票順に並べることは出来たのですが open (IN,"$selfile") || &error("OPEN ERROR"); while (<IN>) { ($sno,$item,$shop,$url) = split(/<>/); open (INC,"$base/c$sno.txt") || &error("OPEN ERROR"); ($cnt) = split(/<>/,<INC>); close INC; $rank{} = $cnt; } close IN; foreach (sort {$rank{$b} <=> $rank{$a}} keys(%rank)) { $cnt = $rank{$_}; print "$_"; } これだと$itemだけが$cntを利用して降順で並ぶ形になってしまいます それに沿って$sno・$shop・$url・$cntも表示されるように並べたいのですがどのようにしたらよいのでしょうか？ テキストデータは下記の通りです 選択肢テキストデータ $selfile($sno,$item,$shop,$urlの順) 2<>ラーメン<>ラーメン屋<>url2<> 1<>チャーハン<>中華屋<>url1<> 3<>うどん<>日本食屋<>url3<> カウントテキストデータ c1.txt→580 c2.txt→230 c3.txt→460 ---------------ここまで--------------------- このように出力したいです(|←セル区切りだと思ってください) 1|チャーハン|<a herf="url1">中華屋</a>|580 3|うどん|<a herf="url3">日本食屋</a>|460 2|ラーメン|<a herf="url2">ラーメン屋</a>|230 どの部分をどのように直したら出来るのか教えてくださいませんでしょうか？ よろしくおねがいします
プログラミングを始めようと思ってPerlをしているのですが プログラムを書いて開くとすぐに画面が消えてしまいます ActivePerlというのはいれてあります 書いたプログラムはこんなものです use strict; use warnings; print "Hello world";
ホームページ上のtextareaで入力してもらった情報を取得するCGI（perl）スクリプトを書いています。流れとしては，フォーム上で入力した情報をCGIで取得→確認画面を表示→問題無ければメールフォームとして送信，となっています。 このスクリプト上で問題となっているのが，textareaでは自動的に改行処理（wrap=softと同じ？xhtmlで書いているので，wrap属性は指定していません。）するときに入力される改行コードと，入力者が意図的に入力する改行コードを判別出来ないということです。自動的に挿入される\n（0x0A）を削除しようとスクリプト上で， $text =~s/\r\n/\n/g; $text =~s/\r/\n/g; $text =~s/\n//g; と入れたところ，全ての改行コードが変換処理されてしまい，入力者が意図的に入れた改行コードまで処理されてしまいます。 スクリプト上，もしくはxhtmlと組み合わせて，自動的に挿入される改行コードだけを消去して，意図的に入力した改行コードだけを残す処理は出来ないものでしょうか？ phpなどを使うと出来るようですが，ある程度perlのcgiで作成してしまったので，このままで出来ればと思っています。よろしくお願いします。
テキストエディッタで asd_**** asd_xxxx というように変数が混じった複数の記述を asd_****.txt asd_xxxx.txt というように置換できるような正規表現の方法がないものでしょうか
NET::POP3を使って空メールシステムで会員登録をするシステムをレンタルサーバーシックスコアで設置しようとしています。 以前までは知り合いの自己サーバーを使用して正常に作動いましたがレンタルサーバーに引越ししようと設定していますが。 返信メール、登録ともにまったく応答がありません。 > #---登録時の自動応答メール情報--- > # POP3ホスト名 > $host_name = 'cacomon.net'; > > # POP3ユーザー名 > $user_name = 'info@cacomon.net'; > > # POP3パスワード > $passwd = '＊＊＊＊＊＊'; > > 以上のよいうに設定いますがどこかの情報がまちがっているみたいなのですが。 > > #---登録時の自動応答メール情報--- > # POP3ホスト名 > # POP3ユーザー名 > # POP3パスワード > はどの部分が上記の部分に当たるのか教えていただきたいのですが。 > また、それ以外が問題になっていいるのか。 > 見つけ出すことができません。 > 宜しくお願いします。 > > レンタルサーバーにはNET::POP3モジュールなどは入っています。 > レンタルサーバーシックスコアに質問してみましたが。プログラムに関する質問が
MovableTypeを使うため、 MacOS10.6 Snow Leopard+XAMPPにImageMagickを インストールしたいのですがうまく行かずにハマっています。 本を読んでみても、「Snow Leopardでは異なります」などと書いてあり、 10.5までとは違うようです。 MacPortsを使ってうまくインストールできたように思っても、 MovableTypeのダッシュボードを開くと 「Image::Magickが設定されていません。」とアラートが出てしまいます。 いろいろと検索してみてどうも、XAMPPで使っているPerlから 「パスが通っていない」ことが原因のように思いますが、 どうやって直せばいいのか分かりません。 そもそも、「/usr/bin/perl」と 「/Applications/XAMPP/xamppfiles/bin/perl」の関係さえ よく分かっていない初心者です。 MacPortsでインストールしたImageMagickは いったんアンインストールしました。 ImageMagickをどこにインストールすれば、 何のファイルのどこを書き直せば、 XAMPPのPerlからImageMagickが使えるようになるのでしょうか？
cgiプログラム内に以下の記述があるのですがlibrariesを呼び出すには # // ライブラリ読み込み use lib 'libraries'; 下記のような記述で呼び出すせるのでしょうか # // ライブラリ読み込み use lib '/home/FTPのID/bbs-cgi/libraries';
PerlはWEB系以外の開発にも使われているのでしょうか！？
日時を取得して、表示する際に「2010/3/16」を、→「2010/03/16」 のように数字が１桁の時だけ「0」を足して表示させたいのですが どのようにすれば良いでしょうか。 ------------------------------------- ($sec,$min,$hour,$day,$mon,$yea,$wdy,$yday,$isdst) = localtime(time); $year = $yea + 1900; $mon++; $nitiji= join("","$year/$mon/$day"," ","$hour","：","$min"); ------------------------------------- 上記の方法で、perlで書き出したhtmlに「$nitiji」を埋め込んで表示させているのですが 「0」をつけることができず困っております。 （システム上、そのようにしたいので） できれば「print(・・・」「「printf(・・・」」などの形式ではなく 「$nitiji」に直接その数値を入れられると良いのですが。 良い方法がありましたら宜しくお願いします。
windows XP でActivePerl　からダウンロードして インストールし、コマンドプロンプトで確認 「perl -v」でバージョンが表示されました。 perl v5.8.9 C:\Perlができました。 そのフォルダにhello.pl 内容　print "Hello world!!\n"; をつくりダブルクリックしても 一瞬何かが立ち上がりかけて消えます。 どうなっているのでしょうか？ ご存知のお方助けてください。
最近Perlを使い始めたものです。 Perlを用いてxmlデータから、組み合わせの情報を取り出したいと思っています。 どのようにプログラムを書けばできるか教えていただけないでしょうか。 例えば以下のようなxmlがあるとします。 -------------------------- <name>A</name> <keywords> <keyword>a</keyword> <keyword>b</keyword> </keywords> ・ ・ <name>B</name> <keywords> <keyword>c</keyword> <keyword>d</keyword> </keywords> ・ ・ ------------------------------ このとき、AとBを選んだら、以下のようにキーワードの組み合わせを表示するようにしたいです。 a-b a-c a-d b-c b-d c-d
if文条件式で配列を使用したい 例えば open (FH, "<data.dat"); @list = <FH>; で不確定要素数を@listに格納したあと if文でその@list内でマッチングする物があればそれだけ表示させたいのですが #ここでは比較対象をabcとして foreach(@list){ if( abc eq @list){ } } としてもtrue処理が出来ません。 どの用に条件を書けばよいのでしょうか？
お世話になります。 ActivePerlでは、UNIXのPerlとの互換性を持たせるために、Windows改行\r\n（0x0d0a）を読み込んだら\n（0x0a）を読み込んだように、\n（0x0a）を書き出したら\r\n（0x0d0a）を書き出したように動作します。 この動作を抑制するためには、binmodeを使います。 ところが、 binmode STDOUT; のように行うと、確かに標準出力で普通に\nを出力すると、0x0aが出力されるのですが、<>（ダイアモンド演算子）に関しては、なんと言うファイルハンドルにbinmodeを使っていいかわかりません。 どうすればいいでしょうか。 具体的にいうと、以下のようなファイルをダンプするプログラムで、現状では0d0aが0aと表示されます。 #! perl #fileDump.pl while (<>) { for (split //) { print unpack "H2", $_; } } PerlのマニュアルによるとARGVというファイルハンドルを使っているという話がありましたが、 binmode ARGV; ではダメでした。 どうぞよろしくお願いします。
perlで一行を一定の文字数で出力させるにはなにか、良い方法はありませんでしょうか？ なお、文字の途中で折り返すのではなく、単語(配列の一単語)単位で処理させたいと思っています。 [プログラム例] #! /usr/bin/perl @list = ("a", "bb", "ccc", "dddd", "eeeee", "ffffff"); { local $, = ", "; print @list; } [出力] a, bb, ccc, dddd, eeeee, ffffff [望む出力] a, bb, ccc, dddd, eeeee, ffffff ※ printする前にlengthでバイト数を調べて、折り返すかどうかの判断をしないとだめなのでしょうか？
質問させてください。 PERL、DBI、MYSQL5でメールアドレスにマッチさせてデータを呼び出したいのですが動きません。 下記の(1)では動くのですが、(2)になるとダメになります。 ■(1) #$noには'1'が入っています。 my $query = "select * from TABLE_NAME where no = $no "; ■(2) #$mailには'test@test.com'が入っています my $query = "select * from TABLE_NAME where mail = $mail"; SQL文以外の部分は過去正常に動いているので問題無いと思います。 今回メールアドレスでwhereするというのが初めてですので、 なにかその部分でダメになっているのではと考えています。 ちなみに直接書いた場合(以下)は正常に動きます。 my $query = "select * from TABLE_NAME where mail = test\@test\.com"; なぜでしょう… 検索しても全く原因がわかりませんでした。 分かる方いらっしゃいましたらご回答いただければ幸いです。 よろしくお願いします。
apache2／mod_perl2で開発を行っているのですが、 Plack::Session::Store::Cache Plack::Session::State::Cookie をインストールしてmod_perl2を再起動したあたりから、 Can't call method "subprocess_env" on unblessed reference at /usr/lib/perl5/site_perl/5.8.8/Plack/Handler/Apache2.pm line 34.\n というエラーが出るようになってしまいました。 Plack::Session::Store::Cache Plack::Session::State::Cookie　の二つをインストールしたのが原因なのか、その際にPlackのバージョンが0.9905(dev版)から0.9914に上がったことが原因なのか分かりません。 plackup --app ./etc/hoge.psgi --host localhost では期待通りに動作するので、mod_perl2の設定の何かが抜けているのかとも思ったのですが、何かしらアドバイス頂けますでしょうか？
RSSリーダを勉強しています。 XML::RSSでpubDateを取り出したのはいいのですが、加工の仕方がわかりません。rss1.0、rss2.0とかに対応したものを自分なりに正規表現でやらないとダメなんでしょうか？いい方法やモジュールなどがあったら教えてください。 例 Thu, 1 Nov 2009 17:00:00 +0900　-＞　2009年11月01日 17時00分
Perlを使い、エクセル表からデータを読み込みテキストファイルを生成したいと思っています。 Perlについて知識はほとんどありません。 サンプル記述等で教えていただけたら助かります。 下記のようなエクセル表があるとします。 <"PARAMETER.xls"> 　　A　　　　B　　　C +-------+------+--------+ 1|　XXX　|　32　|　0000　| +-------+------+--------+ 2|　YYY　|　 8　|　000A　| +-------+------+--------+ 3|　ZZZ　|　16　|　1000　| +-------+------+--------+ 4|　　 　|　 8　|　000A　| (注）"A"列には記入が無いので無視。 +-------+------+--------+ 5|　WWW　|　32　|　F000　| +-------+------+--------+ エクセル表を読み込み、下記の変換方法に従い テキストファイルを生成したいのです。 ●変換方法（基本構文） --------------------------------- if(DTin = "C") <--"C" 列のデータと比較します。 "A" = DTout("B-1":0); <--"A" 列の変数名に、"B-1"の値を代入します。 <-- 改行します。 --------------------------------- 変換後 生成されたファイルは下記を考えています。 ◆生成ファイル "Source.txt" ---------------------------------- if(DTin = 0000) XXX = DTout(31:0); if(DTin = 000A) YYY = DTout(7:0); if(DTin = 1000) ZZZ = DTout(15:0); if(DTin = F000) WWW = DTout(31:0); ---------------------------------- (注）4行目の"A"列には記入が無いので無視します。 以上、ざっくりとした説明で申し訳ありませんが、 よろしくお願いいたします。
現在perlを学習中の大学生です。 文法等は一通り勉強し，今後CPANなどを利用したプログラミングを行おうと考えていますが，CPAN利用の練習のための適切な課題などはありませんでしょうか？ 利用するmodule名なども合わせて教えて頂けると助かります。
こちらにはだいぶお世話になっています。 perlとpostgresを使用してcgiを作成しているのですが、 下記のコードでプルダウンメニューにDBの値を入れて、 DBにデータが追加されてもプルダウンにもデータが追加されているプルダウンメニューを作りました。 $sql="select * from testtable order by code"; $result = $conn -> prepare($sql1); $ref = $result -> execute; while(@ref = $result->fetchrow){ $options.="<option value='$ref[0]'>$ref[1]</option>\n"; } $select="<select name=''>\n<option value=''>選択してください</option>\n$options</select>\n"; print "$select"; データの検索時にこのプルダウンメニューを使っているのですが、選らんだ選択肢を例えばBとして 送信すると、一番上の「選択してください」に戻ってしまします。 これを送信してもその時選択した選択肢を残すやり方を教えて頂けますでしょうか？ testtableの中身：　　　　　　プルダウンメニュー化 ｜code｜name｜　　　　　　｜選択してください▼｜ ｜ 1 ｜ A ｜　　　　　　　　　｜　　　　Ａ　　　　｜ ｜ 2 ｜ B ｜　　　　　　　 → ｜　　　　Ｂ　　　　｜ ｜ 3 ｜ C ｜　　　　　　　　　｜　　　　Ｃ　　　　｜ ｜ 4 ｜ D ｜　　　　　　　　　｜　　　　Ｄ　　　　｜
文字「&」を出力したいのにCGI.pmが自動的に「&amp;」に変換してしまいます。 具体的には、 <a href="abc" accesskey="&">abc</a> のような文字列を出力させるために、 print($q->a({-href => 'abc', -accesskey => '&'}, 'abc')) というコードを実行したのですが、 出力される文字列は、 <a accesskey="&amp;" href="abc">abc</a> のように「&」が自動的に「&amp;」に置き換わってしまいます。 これの解決策として、オブジェクトを使用せずに、直接CGI.pmのメソッドを呼び出すと、なぜか変換されません。 すなわち、上のコードの「$q」の部分を「CGI」として、 print(CGI->a({-href => 'abc', -accesskey => '&'}, 'abc')) とします。 これは何か意味があるのでしょうか。それともただのバグ？ 直接CGI.pmのメソッドを呼び出さなくても解決する方法はありますか。 accesskeyに関するご意見は、先日質問したこちらのスレへ頂けるとうれしいです。 http://oshiete1.goo.ne.jp/qa5707867.html
【Perl】サブルーチンから多次元配列を戻したい サブルーチン内で作った2次元配列と1つの変数（例：@listと$i）をリターンしたいのですが、どのようにすれば良いでしょうか？ ↓サブルーチン（calc） return (@list, $i); ↓メイン my $a = 12; my (@list, $i) = &calc($a); 間違っていると思いますが、現時点でのプログラムを一部書きました。 ご回答よろしくお願いします！
今まで全てのPerlをjcode.plを使って日本語化してきました。 長年根本の構造をきちんと理解せず、jcode.plは呪文のように最初に宣言して使用してきたため、現在文字化け対策をするため、今回Encodeモジュールを使って日本語変換を行うための方法が分からず困っています。 formから送信されてきたものを変換するため、 foreach $pair(@pairs) { ($name,$value) = split(/=/,$pair); $value =~ tr/+/ /; $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C",hex($1))/eg; $name =~ tr/+/ /; $name =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C",hex($1))/eg; &jcode'convert(*name,'sjis'); &jcode'convert(*value,'sjis'); $in{$name} = $value;#ここは状況に応じて変えてます } として最初に一括して変換してやり、 ウェブ上で表示させるときは <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"> を指定してそのまま表示、 メールなどでは &jis("Subject: $sub"); print AAA "$msg\n"; sub jis { $msg = $_[0]; &jcode'convert(*msg, 'jis'); } などとして出力してきました。 これらをEncodeモジュールを使って書き換えたいのですが、参考に http://digit.que.ne.jp/work/wiki.cgi?Perl%E3%83% … このページを読んだのですが、perlの根本が理解できていないので、どこをどうしていいのか分かりません。 上のような形式をEncodeモジュールを使って書き換えるとすればどのようにすればいいのでしょうか。 （どう聞けばいいかも分からないので、うまく伝えられたか不安ですが）
一般に >>120　や　>>19 といったものを (asd)>>120(asd) といったように置換するにはどのようにすれば良いのでしょうか。
linux初心者です。 「さくらのマネージドサーバ」 http://www.sakura.ne.jp/managedserver/index.html でPerlモジュールをインストールしたいのですが、 問い合わせてみたところ、「お客様にroot権限はありませんので、SSHにてコンフィグファイルの編集を行い、インストールしてください」との事でした。これ以上はサポート外なので教えてもらえなかったのですが、 おそらく、やり方としては SSHにてログインして ->なにかの設定ファイルを編集してCPANを一般ユーザのホームディレクトリ下にインストール ->CPANにてモジュールをインストールするのだと認識しております。 質問としましては、 上記の、「CPANを一般ユーザのホームディレクトリ下にインストールための設定ファイルの編集方法」です。 ご存知でありましたら、どうかよろしくご教示お願いいたします。
現在Windows上にて、Perlの開発をしております。 Perlは、ActivePerlを使用し、ツールはEclipseを使用してソースを記述しております。 [環境] OSは、クライアント、サーバ共にWindows [バージョン] ActivePerlは、5.8.9 Apacheは、2.2.4 Eclipse(SDK版)は、3.5 EclipseとPerlとの連携はできたのですが、 Eclipse上で編集したソースをApache上に配備したいと 考えております。 手動でフォルダコピー等で行うという以外で、 何か良い方法をご存知の方、ご教授下さると嬉しいです。 よろしくお願い致します。
問題を出すプログラムで、一定時間後に強制的に採点のページに飛ばされるプログラムを組んでいます。その際問題のデータと隠し属性（HIDDEN）のデータをPOST属性で送信したいのですが、強制移動の際の動作がどうもうまくいきません。詳しい方助言していただけないでしょうか。 構成は以下のようになっています。 <META HTTP-EQUIV="refresh" CONTENT="600;URL='./ans.cgi'"> （略） <FORM ACTION="./ans.cgi" METHOD="POST"> （問題が入ります） <INPUT TYPE="HIDDEN" NAME="id" VALUE="$id"> <INPUT TYPE="SUBMIT" VALUE="決　定">
いつもお世話になっています。 Perlにてセッション管理（ログインして、サイト内はユーザーIDなどを持ちまわるような）を行おうとしています。 CGI::Sessionを使用して実現できると思っているのですが、 疑問があります。 セッション情報の持ち方は、サーバー内にファイルか、DBに格納する ことになると思いますが、不要になったファイルやレコードは、 みなさんどうされているのでしょうか？ （ログアウトボタンがあっても、ブラウザの閉じるボタンを押される ケースが多いと思いますので、必ずdelete（）はできないですよね？） 削除バッチなどで定期的に削除することを考えていますが、 もっとスマートなやり方があればご教示いただければと思います。 よろしくおねがいします。
PerlのWin32::OLEモジュールを使用してMS-Excelファイルを作成しています。 作成したExcelファイルを $book->SaveAs("ファイル名");のように記述して保存はできるのですが、 「名前を付けて保存」ダイアログボックスを表示して保存先を指定できるようにしたいのですが可能でしょうか？ VBAでは、「Application.GetSaveAsFilename」で表示できるようですが、PerlのWin32::OLEモジュールでも同じように表示出来ないでしょうか？
モジュールからの相対パス指定の方法 /index.cgi /lib/mymodule.pm /lib/mymodule.cfg のような構成の時、mymodule.pmからmymodule.cfgを相対パスにて読み込むことは可能ですか？ mymodule.pmとmymodule.cfg間の相対パスは常に一定だけれど、 index.cgiから、mymodule、mymodule.cfgの相対パスは変化するというような事を想定しています。 よろしくお願いします。
perlに関する知識に乏しい者ですが質問です。 windowsserver2008にactiveperl5.8.9をインストールしました。 とあるperlプログラムをcgiで動かそうと、apacheもインストールしました。 ですが、サーバーにアクセスするとそのperlプログラム中のgetpwnamという 関数？が実装されていないとエラーがはかれていました。 getpwnamをググってみたのですが、 この関数はwindowsでは実装されてないようです。 なんとかgetpwnamのエラーを解決できないでしょうか？ PPMで、必要なモジュールをインストールすれば解決できるレベルであれば、 どれをインストールすればよいのか教えていただけると幸いです。
Perlプログラムにおいて、入力されたパスワードをif文で比較させたい。 今、Perlプログラムを使ってホームページでクイズを作成中です。 そこで、教えて頂きたいのですが、ホームページに入れる人は、事前に通知した人にのみで、パスワード入力をしてもらう方式にしたいと思っています。 パスワードも一人一人に違うものではなく、3種類程度を考えています。 Perlプログラムの中に　if ($passwd eq '1234') 程度に考えています。 でも、Perlプログラムソースを見られたら一目瞭然で判ってしまいます。 プロバイダはniftyで、index.cgiのファイル名にします。 基本的な質問で恐縮ですが、もっと良い方法、注意しないといけない点、などを教えて下さい。
Perl初心者ながら一人で開発にはいることになり四苦八苦していますが、 このサイトではいつもお世話になっております。 CPANのモジュールをつかってWEBアプリケーションを つくろうとしているのですが、開発環境がインターネットに接続して いないスタンドアロンな環境です。 このような場合、 ・CPANサイトからtarファイルを１つづつダウンロードしてmake/installするしかないのでしょうか？ ・その場合、モジュールの依存関係はどのように把握するのでしょうか？ いま、必要と思われるパッケージを入れるたびに、芋づるに式前提パッケージが判明しててまたCPANから落としてくるの繰り返しになっており、ちょっと困っています。 CPAN SHELLがつかえると、依存関係を解決してくれるというのは わかりましたが、スタンドアロン環境の場合は一般的にはどのように するものでしょうか？ よろしくお願いいたします。
アクセスもとのページURLの更新日を知りたい アクセスもとのページURLの更新日を知りたいと思ってます。 環境変数で HTTP_HOST は取得出来ることがわかりましたが、いつからリンクが発信されたのかを調べたいと思ってます。 実際に出来るのかすらわかりませんが、環境変数そのものでいろいろな情報が取得できるので ひょっとしたらと思い質問いたしました。 何かのヒントでも良いのでアドバイス頂きたく思います。 よろしくお願いいたします。
ある装置にtelnet接続し、コマンド（ccc dd ee)を送信して帰ってきた値を outou.dat というファイルに保存するプログラムを作っています。 接続すると login: と表示されるので「aaaa」と入力すると Welcome to aaaa > と表示され、「bbbb」と入力するとプロンプトが「#」に変わります。 >bbbb # そこでコマンド「ccc dd ee」を入力したときに帰ってくる応答をファイルに保存します。 #ccc dd ee ------応答データ-------- これを行うのに下記プログラムを実行しましたが、エラーは出ませんがファイルに何も 保存されませんでした。 何がいけないのかわかる方教えてください。 use strict; use Net::Telnet; my $host = '192.168.1.1'; my $login = 'aaaa'; my $enable = 'bbbb'; my $prompt1 = '/>/'; my $prompt2 = '/\S/'; my $telnet = new Net::Telnet( Timeout => 10, ); $telnet->open($host); $telnet->waitfor('/login:/i'); $telnet->print($login); $telnet->waitfor($prompt1); $telnet->print($enable); $telnet->waitfor($prompt2); my @result; $telnet->print("ccc dd ee"); ($result) = $telnet->waitfor($prompt2); open(OUT, "> outou.dat"); print(OUT "@result\n"); close(OUT); $telnet->close;
Perl、オブジェクト指向での初期設定ファイルについて。 最近、Perlでのオブジェクト指向を勉強中です。 今までのプログラムをオブジェクト指向に書き直そうと思っています。 クラスを作成して呼び出す程度までは理解できたのですが、 今まで、サーバの絶対パスや、データベースの名称などを、 config.pl というファイルを作って、グローバル変数で宣言していました。 例 $local_parh = "/virtual/xxx/bbb/public_html"; $dbname = "testdb"; $dbuser = "username"; でも、オブジェクト指向では、グローバル変数を使わないようにするということで、 このあたりをふつうはどんなふうに作成するのかとおもったのですが、 なかなか検索しても見つかりません。（検索の仕方が悪いのかもしれませんが） 今思いつく方法は、config.pm などを作って -------------------------------------------------- package Config; sub new{ my $class = shift; my $self= { local_path => '/virtual/aaa/bbb/public_html', dbname => 'testdb', dbuser => 'username' }; return bless ($self,$class); } sub get_local_path { my ($self, $name) = @_; return $self->{'local_path'}; } -------------------------------------------------- use Config; $obj=new Config(); $local_path = $obj->get_local_path(); -------------------------------------------------- とするような感じなのですが、なんだかスマートじゃない気がするので 普通ははどんなふうに書くのか教えてもらえますか？
初心者です。 Perl の質問じゃないかもしれませんが、カテゴリがよくわからなかったのでこちらで質問させて下さい。 Perl を使えるようになろうとダウンロードしたのですが、インストールが出来ません。 ダウンロードしたのは「ActivePerl 5.10.1.1007 for Windows (x86)」です。 Perl を配布しているサイトで「あなたのＰＣに合うのはコレ」みたいな感じで出てきたのをダウンロードしました。 ライセンスの許諾画面からディレクトリの設定画面までは行くのですが、ディレクトリの設定を特にいじらず「Next」を押すと次のようなエラーメッセージが出ました。 The Windows installer service could not be accessed. This can occur if you are running Windows in safe mode, or if the Windows installer is not correctly installed. Contact your support personnal for assistance. メッセージが出るとインストールがエラー終了してしまい、先に進みません。 エラーメッセージの意味はわかるのですが、といってどうすればいいのかが全然わかりません。 一番最初にインストールをダウンロードしたファイルを開くと「このファイルにはデジタル署名がありません。実行しますか」みたいな警告が出て、よくわからず「制限（危険なプログラムのみ遮断）」を選んだのですが、これが駄目だったのでしょうか… ＰＣのこういうことは全然わからず、困っています。 よければ教えて下さい。お願いします。
perlで置換をするプログラムを作成したい ウエブの更新プログラムをperlで作成しています。 以下の条件式でうまく置換できないときがあります。 (ここから) $oldcont ="書き換え前のコメント"; $newcont ="書き換え後のコメント"; $get_csv = get("http://hoge.foo/index.html"); if($get_csv =~ /$oldcont/i) { $get_csv =~ s/$oldcont/$newcont/g; open(DB3,">./index.html") || &error("Can't write ./index.html"); flock(DB3, 2); print DB3 "$get_csv"; close(DB3); } 以下略 (ここまで) 通常の文字は置換できたのですが、以下のようなリンクを変えようとすると結果が変わりませんでした。 oldcont <a href="http:/hoge.foo/one.html"> newcont <a href="http://hoge.foo/two.html"> プログラムを確認してみたところ if($get_csv =~ /$oldcont/i) で条件式にうまくヒット出来ていない感じです。 タグ禁止処理が悪さしているのがわかり、タグ禁止処理は解除いたしました。 それでもなお動作しませんでした。 何か不足しているものがありましたらご指摘ください。 お手数かけます。ご指導をよろしくお願いいたします。
open(IN,"../../image/$val2/upinfo"); while(<IN>){ ($blank,$blank,$blank,$blank,$blank,$type) = split(/<>/); } close(IN); $imgsize = (stat("../../image/$val2/indeximage"))[7]; print "Contnet-type: $type\nContent-Length: $imgsize\n\n"; open(IN,"../../image/$val2/indeximage"); binmode(IN); print <IN>; close(IN); ----------------- このようなスクリプトを作ったのですが、Ieで開くと画像表示してくれますが、Safariなどで開くと文字列が表示されてしまいます。 サーバーはMac OS X Snow Leopardで、Apache1.3を自分で入れたものを使用しています。 よろしくお願いします。
フリーのカートCGIを基にカスタマイズしているのですが、どうしても解決できない問題が出て困っています。 チェックボックスの「VALUE」で複数の値を設定し、それを分割させて反映したいのですが、どうしても出来ません。 【HTML】 <INPUT TYPE = "checkbox" NAME = "option1" VALUE = "オプション1,5000" /> オプション1を追加（+￥5,000円）　　 <INPUT TYPE = "checkbox" NAME = "option2" VALUE = "オプション2,2500" /> オプション2追加（+￥2,500円） 【CGI】 print <<EOM; <th class="th1">オプション</th> <th class="th1">合計</th> my (%option1name,%option1price); @furirua = split(/,/ , option1); $option1name = $option1[0]; $option1price = $option1[1]; my (%furirubname,%furirubprice); @option2 = split(/,/ , option2); $option2name = $option2[0]; $option2price = $option2[1]; print "<td align=\"center\" class=\"td1\">$option1name<br>$option2name</td>"; my $kei2 = ($price{$code} + $option1price + $option2price) * $num; my $kei3 = &comma($kei2); print "<td align=\"right\" class=\"td2\">$kei3円</td>"; VALUEの最初の値は「オプション名」次が「価格」です。（項目は「製品名」等他にもあります） カート内でそれぞれに分かれて、「オプション名」は「オプション」の項目内に、 「価格」は本体価格（$price{$code}）と合計して個数（$num）で掛けた値を「合計」出す。 上記のやり方だと、「オプション」の項目に、オプション1のVALUEが2つとも表示されてしまいます。 また一つだけ選ぶと、減った分？VALUEの項目がずれてしまいました。 こんな状態です。 【例】 <th class="th1">オプション</th> <td>オプション1<br>5000</td> オプション2の内容は次の項目に反映されてしまいます。 目標は 【例】（本体価格10,000円　オプション1と2を選択） <th class="th1">オプション</th> <th class="th1">合計</th> <td>オプション1<br>オプション2</td> <td>17,500円</td> CGIはまだあまり詳しくなく、いろいろ調べて試しながらカスタマイズしているのですが、今回のチェックボックスは全然解決できず時間も無くなってきました。 すみませんが、宜しくお願いします。
http://www.aimix.jp/cgi/accformkioku.html 上のサイトを参考にログイン画面を作っていまして、 この例の場合のようにセレクトする値が3つ、4つならこの書き方でもよいと思うのですが、 セレクトする値が10個、15個…となればソースが長くなり、とても見づらいものとなってしまいます。もうちょっとスマートな 書き方はあるのでしょうか？(一部略してあります) print "Content-type: text/html\n\n"; print "<html>\n"; print "<head>\n"; print "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n"; print "<title></title>\n"; print "</head>\n"; print "<body>\n"; &analysis; &auth; sub analysis{ if ($ENV{'REQUEST_METHOD'} eq 'POST') { read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'}); } else { $buffer = $ENV{'QUERY_STRING'}; } @pairs = split(/&/, $buffer); foreach $pair (@pairs) { ($name, $value) = split(/=/, $pair); $value =~ tr/+/ /; $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg; $value =~ s/\r//g; $FORM{$name} = $value; } $pass1 = $FORM{'user_name'}; return; sub login{ if($pass1 eq '1'){ $check1 ="selected"; } elsif($pass1 eq '2'){ $check2 ="selected"; } else{ $check3 ="selected"; } print <<HEADER; <center> <caption><h1>ログイン</h1></cption> <table border="5" bgcolor="cfcfcf" width="300" height="150"> <tr> <td align="center" valign="center"> <form name="form" method="post" action="./xxx.cgi"> ユーザー名: <select name="user_name"> <option value="1" $check1>A</option> <option value="2" $check2>B</option> <option value="3" $check3>C</option> </select> <br><br> パスワード: <input type="password" name="password"> <br> <center> <input type="submit" name="submit" value="ログイン"> </center> </form> </td> </tr> </table> </center> HEADER } print "</body>"; print "</html>"; 1;
HTMLとPerl間のページ遷移について。 こんにちわ。 HTML(index.html)でログインフォーム（ユーザ名、パスワード）を作成し、そこに入力した情報を、Perl(login.pl)にPOST送信します。 Perlでは、受け取ったパラメータをチェックし、ユーザ名とそのパスワードが正しければ、もとのHTMLファイル(index.html)にページ遷移し、もともとあったログインフォームをJavaScriptで削除し、「ログイン中」と表示させる、ということをしたいのですがわからないところがあり投稿させていただきました。 現在、クライアントでは、JavaScriptを使ってログインフォームを作っています。そして、フォームの中の値を取得して、POST送信することはできます。次に、サーバにてPerlで受け取ったパラメータをチェックし、ユーザ名とパスワードの認証をとるところまではできています。しかし、その後にどうすべきかがわかりません。locationで、もとのHTMLファイル（index.html）を指定しても、ログインを認証したという情報は保持しておらず、それでは意味がありません。 Perlでログインを認証した後に、認証したという情報を保持したままHTMLページに遷移する事は可能でしょうか。可能であればその方法を教えていただきたく思います。 よろしくお願いします。
こんにちは。 以下の環境でPerl+postgreSQLのCGIを作成していますが、 DBI、DBD::PGのインストールでエラーが出てしまい大変困っています。 どうぞお力添えをお願いします。 環境---------------------- OS：CentOS VERSION = PostgreSQL 8.1.18 Perl:v5.8.8 -------------------------- ●手順 CPANより下記モジュールをダウンロードし、 ・DBI : DBI-1.609.tar.gz ・DBD::PG : DBD-Pg-2.16.1.tar.gz それぞれ ・perl Makefile.PL ・make ・make install を実行。 DBD::PGの perl Makefile.PL で pg_config のパスを聞かれるが存在しなかったため、ネットの情報から以下を実行。 yum install postgresql-devel 再度DBD::PGのperl Makefile.PL を実施しましたが、以下のようなワーニング（※１）が出力してしまい、 make,make installを実施後に動作確認のスクリプトを実行してもやはりエラーとなってしまいます。（※２） ※１ Warning: prerequisite version 0 not found. Could not eval ' package ExtUtils::MakeMaker::_version; no strict; local $VERSION; $VERSION=undef; do { use version; our $VERSION = qv('2.16.1'); }; $VERSION ' in Pg.pm: Can't locate version.pm in @INC (@INC contains: t/lib /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.7/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.6/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl/5.8.7 /usr/lib/perl5/site_perl/5.8.6 /usr/lib/perl5/site_perl/5.8.5 /usr/lib/perl5/site_perl /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.7/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.6/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.8 /usr/lib/perl5/vendor_perl/5.8.7 /usr/lib/perl5/vendor_perl/5.8.6 /usr/lib/perl5/vendor_perl/5.8.5 /usr/lib/perl5/vendor_perl /usr/lib/perl5/5.8.8/i386-linux-thread-multi /usr/lib/perl5/5.8.8 .) at (eval 10) line 7, <FH> line 20. BEGIN failed--compilation aborted at (eval 10) line 7, <FH> line 20. WARNING: Setting VERSION via file 'Pg.pm' failed at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 515 Multiple copies of Driver.xst found in: /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi/auto/DBI/ /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi/auto/DBI/ at Makefile.PL line 263 Using DBI 1.609 (for perl 5.008008 on i386-linux-thread-multi) installed in /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi/auto/DBI/ Writing Makefile for DBD::Pg ※2 install_driver(Pg) failed: Can't locate version.pm in @INC (@INC contains: /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.7/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.6/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl/5.8.7 /usr/lib/perl5/site_perl/5.8.6 /usr/lib/perl5/site_perl/5.8.5 /usr/lib/perl5/site_perl /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.7/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.6/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.8 /usr/lib/perl5/vendor_perl/5.8.7 /usr/lib/perl5/vendor_perl/5.8.6 /usr/lib/perl5/vendor_perl/5.8.5 /usr/lib/perl5/vendor_perl /usr/lib/perl5/5.8.8/i386-linux-thread-multi /usr/lib/perl5/5.8.8 .) at /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi/DBD/Pg.pm line 20. BEGIN failed--compilation aborted at /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi/DBD/Pg.pm line 20. Compilation failed in require at (eval 3) line 3. Perhaps a module that DBD::Pg requires hasn't been fully installed at ./test02.pl line 5 どうぞよろしくお願いいたします。
PerlCGIでクエリの検索結果が途中で途切れる。 環境： Windows 7 Home Premium 32bit Mem: 3.24GB Apache for win 2.2 Perl: v5.10.1 built for MSWin32-x86-multi-thread access の mdb を ODBC 接続し perl cgi をフロントエンドとして クエリを表示させようとしています。 クエリの表示自体はエラーなくできましたが、検索結果が全て表示されません。 # 本来は 200件以上あるはずなのに、半分以下しか表示されない。 感触として、バッファかなにかのバイト制限のような気もするのですが、 全ての検索結果を表示するためにはどうすればよいのかご教示いただけないでしょうか？ コードは以下のとおりです。 -------------------------------------------------------- #!c:/perl/bin/perl.exe use Win32::ODBC; print "Content-type: text/html\n\n"; print "<html>\n"; print "<body>\n"; print "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=shift_jis\">\n"; $db= new Win32::ODBC("DSN=kaigai"); $str_sql = "SELECT q_prestounyu.hiduke, q_factory_master.koujyoryakumei, q_prestounyu.keiyaku, " ; $str_sql .= "q_prestounyu.hinban, q_pres_master.ryakumei, q_prestounyu.nyukousu "; $str_sql .= "FROM (q_prestounyu INNER JOIN q_pres_master ON q_prestounyu.presno = q_pres_master.presno) "; $str_sql .= "INNER JOIN q_factory_master ON q_prestounyu.koujyo = q_factory_master.koujyono "; $str_sql .= "WHERE (((q_prestounyu.hiduke)>=#2010/1/10# And (q_prestounyu.hiduke)<=#2010/1/31#)) "; $str_sql .= "ORDER BY q_prestounyu.hiduke;"; print "$str_sql<BR>\n"; $i=0; $db->Sql($str_sql); # 取得したレコードセットの数だけループして表示 while ( $db->FetchRow() ){ $i ++; undef %FIELDS; # 各フィールドのデータをハッシュに格納 %FIELDS= $db->DataHash(); print "$i "; print "$FIELDS{'hiduke'} $FIELDS{'koujyoryakumei'}\n"; print "$FIELDS{'keiyaku'} $FIELDS{'hinban'}\n"; print "$FIELDS{'ryakumei'} $FIELDS{'nyukousu'}<BR>"; } # データベースを閉じる $db->Close( ); print "</body></html>"; exit;
次のようなスクリプトを書いて、Windows上でDOSプロンプトから scr.pl < aho.txt と実行しましたが何も出力されません。 エラーメッセージなども表示されません。 STDINのpipeが動いていないと思われるのですが、何か書き方に 問題があるのでしょうか？ 教えてください。 よろしくお願いします。 #!/usr/bin/perl-w while (<STDIN>) { chomp; print $_; }
perlの文字列抽出と集計について教えてください。 ファイルAにある文字列をファイルBから探し、その単語の前後の5単語を集計したいと考えています。 fileA（ただの単語列です） たまねぎ かぼちゃ にんじん fileB（|で区切られています） ピラミッド|を|築く|労働者|に|は|たまねぎ|を|食べ|させた|と|いう|記録|も|あり たまねぎ|は|野菜|の|中|で|最|も|糖質|が|多く| ほくほく|した|西洋|かぼちゃ|は|、|料理|野菜|の|中|で|も にんじん|は|、|根|を|食べ|る|野菜|の|中|で|は|珍しく|緑黄色野菜|です 上記のようなファイルがあった場合に、「｜」で区切られた前後５単語をとれるだけ取得すると以下のようになり たまねぎ を,築く,労働者,に,は,を,食べ,させた,と,いう,は,野菜,の,中,で かぼちゃ ほくほく,した,西洋,は,、,料理,野菜,の にんじん は,、,根,を,食べ,る 以下のように出現を集計して、一つのマトリックスにまとめたいと考えています。 　　　　　を　築く　労働者　に　は　食べ　させた　と　いう　野菜... たまねぎ　2　　1　　1　　　　1　2　　1　　1　　　　1　　1　　1 かぼちゃ　　　　　　　　　　　　1　　　　　　　　　　　　　　1 にんじん　1　　　　　　　　　　　1　　1 ... ... 初心者のためなかなかうまいやり方がみつけることができず ご教示いただけると助かります。 よろしくお願いいたします。
次のことをするcgiを作りたいのですが 　1. 起動したらデータを読み込み、その内容を表に表示。(即時） 　2. 5秒ごとにデータを読みに行き（ポーリング）、変化があったら表を 　　 リロードして新しいデータの表を表示する。 下記のようにすると、リロードされずに表がいくつも表示されてしまいます。 （リロード処理を入れてないので当たり前なんですが） また、その表示が5秒ごとではなく、かなり長い時間（数十秒?)たってから 1度に数個表示されるというのを繰り返してしまいます。 　Q1　リロードさせるには、javascriptを使えばよいのかと思うのですが、 　　　どのようなスクリプトを使えばよいのでしょうか。 　　　また、javascriptでなくても他に方法があれば教えてください。 　　　(Perlのプログラム上では無理でしょうか) 　Q2　起動時にまずは最初のデータを表示させたいのですが、sleeを使うと 　　　起動後すぐ表示されないように思いますが、どのようにしたらよい 　　　でしょうか。 なお、下記テストプログラムでは、データを更新して表示する処理は 省いています。 よろしくお願い致します。 －－－－－－－－－－－－－－－－－－－－－－－－－ $kaisuu = 0; $change = 0; while (1) { 　　&data; 　　if($kaisuu == 0 ){ 　　　　&hyou; 　　　　$kaisuu = 1; 　　}elsif (($kaisuu == 1) && ($change == 1)){ 　　　　&hyou; 　　} 　　sleep 5; } sub data { 　　#データの読み込み処理 　　if(データに変化あり){ 　　　　$change = 1; 　　} } sub hyou { 　　print "Content-type: text/html\n"; 　　print "\n"; 　　print "<html>\n"; 　　print "<head>\n"; 　　print "<title>Test</title>\n"; 　　print "</head>\n"; 　　print " <table border=2 frame=border>\n"; 　　print " <tr><td>項目</td>\n"; 　　print " <td>名前</td></tr>\n"; 　　print " <tr><td>１</td>\n"; 　　print " <td>まるまる</td></tr>\n"; 　　print " <tr><td>２</td>\n"; 　　print " <td>ばつばつ</td></tr>\n"; 　　print " </table>\n"; 　　print "</body>\n"; 　　print "</html>\n"; }
当方、サーバ管理でインフラ系の経験しかなく、今回はperlでスクリプトの作成に挑戦しておりますがなかなか理解できていません。お知恵をお貸しください。 やりたいこと： ある入力を受けたら、別ファイルに照会して特定列の文字列を抽出する。以下に例を示します。 入力が gad の場合（小文字です）、file1を参照する。例では一行目にGAD****があるのでこれに該当することとする。最終的にoffice が出力されるようにしたい。 file1の内容： GAD93911 <test1> office HOA14845 <test2> desk ABC52311 <test3> chair KFI33823 <test4> home よろしくお願いいたします。
正規表現で フリーコメントのテキストボックスに 　<　か　>　のカッコが入っているとエラーとなるように 設定をしたいのですがどのような正規表現でできるでしょうか？ 教えてください。 現在、この＜＞が入って保存ボタンを押すと ページエラーと下にでるのですがどこのエラーかわからないので このような正規表現を使いたいのですが、よろしくお願いします。
perlとMySQLでデータベースを作っています。 だいぶ行き詰ってしまったので質問させてください。 以下のような一行の文字列が存在するとします。 ABC DEF @@@2222 EHI J @@@888 KL MN OPQR @@@632 ST この中から、 2222 888 632 を取り出して配列に格納することは可能でしょうか？ 分割することは可能な気はするのですが、 それを配列に入れるとなるとどうにもならなくなってしまいました。 漠然とした質問で大変申し訳ないのですが、 なにかヒントになるものだけでもお気づきの方いらっしゃいましたら、 ぜひご教示くださいませ。
perlでメール送信するプログラムを作りました。 cgiファイル内にメール本文の内容が記述してあり、 別ファイルの複数の送信先にメールを送るというものです。 文字サイズ及び文字色を変えたいという要望があり、 文字の色やサイズを設定する方法（ソース）を探しております。 参考となるサイトや方法がありましたら、教えて下さい。 よろしくお願いします。
お世話になります。 以下のようなことを考えています。 パラメーターを与え、そのパラメーターを「在る条件」で加工してファイルに出力していますが、 この「在る条件」が、結構頻繁に変更されます。 上記処理が１カ所なら条件が変更される都度直せば宜しいのですが、 パラメーターを与えるまでの違いのため、似たようなロジックですが複数本存在します。 a.cgi b.cgi c.cgi d.cgi,,,,と。 （それぞれ前段が少しずつ違いますが、パラメータを渡すところからは同じです） ということから、これらを親と子に分け、 パラメーターを渡すまでを親cgi、パラメーターを貰って加工しファイルに出力する部分を子cgiにすれば、 頻繁に基準が変わる「在る条件」を直すのは子cgiだけで済む、と考えます。 a.cgi コール　x.cgi b.cgi コール　x.cgi c.cgi コール　x.cgi d.cgi コール　x.cgi,,,,のように。 教えていただきたいのは、 親（a.cgi b.cg c.cgi,,,)から子（x.cgi）をコールする部分のコーディングです。 （親はパラメータを与えて子をコールするだけ、 　子はファイルを出力するだけで親に結果を返すなどの処理は不要です、単純に戻るだけで構いません。） 実際の例を挙げていただければ嬉しいです。 宜しくお願いします。
perlのデータクリアーがうまく動きません。 perlでデータからリンクを生成するプログラムを作成しています。 以下のプログラムで動作するようにと思っていたのですがうまく動きません。 $xlkprのデータが$mainlinkぶん蓄積したら、$mainlink分を繰り返し(コピー)してデータ格納させたいのです。 $xliprのクリア my $xlipr = ""; をしてますが、データが残ったままでプログラムは処理されてしまいます。 データ $datfile リンクA リンクB リンクC リンクD リンクE リンクF データが残っているので以下の結果となってしまってます。 格納されるデータ リンクA リンクB リンクA リンクB リンクA リンクB リンクC リンクD リンクA リンクB リンクC リンクD リンクA リンクB リンクC リンクD リンクE リンクF リンクA リンクB リンクC リンクD リンクE リンクF 最終結果　←この結果となって欲しいです。 リンクA リンクB リンクA リンクB リンクC リンクD リンクC リンクD リンクE リンクF リンクE リンクF 以下のプログラムを載せます。 プログラム (ここから) 略 $mainlink = 2; open(IN,"$datfile")|| die &error(" $datfile を読み込みopen出来ません"); flock(IN,2); @lines = <IN>; close(IN); foreach $line(@lines){ ($seq2,$id,$mail,$temp,$purl,$ttitle,$yo1,$yo2,$yo3) = split("<>", $line); #リンクタグ生成ロジック if ($mainsiteurl eq $purl){ $xlink++; if ($temp eq "1"){$xlkpr .= "<a href=\"$purl/$id\">$ttitle</a>\n";} if ($temp eq "2"){$xlkpr .= "<a href=\"$purl/?$id\">$ttitle</a>\n";} if ($temp eq "3"){$xlkpr .= "<a href=\"$purl/?id=$id&m=$mail\">$ttitle</a>\n";} if ($xlink >= $max){ for($i=1;$i<=$mainlink;$i++){ $print_link2 .= "$xlkpr"; } my $xlipr = ""; $max = $max + $mainlink; } } } 以下略 データ格納処理へ (ここまで) もっと効率の良いプログラムもあるかと思いますが、申し訳ございませんご教授頂きたくよろしくお願いいたします。
perlで文字列の大きい順にソートするプログラムが書きたいのですが、サンプルになるような、（てか、どこかにありそうなプログラムだと思うのですが、なければ自分で書きますが）ものを教えてください。検索しましたが、良いのが見つかりませんでした・・・。
Perlのソースコードを隠蔽する＆ActivePerlなどがない環境でも動くようにperl2exeを使って変換して配布しようと思っています。 逆コンパイラされる可能性が０ではないことはわかっています。 しかし、下記コードの実行がなかなかうまくいきません。実際の.plでの起動時ではうまくいくのですが、.exeに変換するとうまくいかないようです。回避方法を教えてください。 -------------------- use HTTP::Request::Common qw(POST); use LWP::UserAgent; my $ua = LWP::UserAgent->new; my %loginform = ('mail' => 'hogehoge@hoge.jp', 'password' => 'hogehoge'); my $request = POST('https://****/login', [%loginform]); my $res = $ua->request($request); my $cookie = $res->header('Set-Cookie'); --------------------
入力ファイルに A1, A2, A3, A4... B1, B2, B3, B4... というように記述されており、 そのファイルを処理した結果 A1 B1 A2 B2 A3 B3 のようになるように処理したいです。 どのようにすれば実現できるでしょうか？ 二次元配列が使用できれば、 入力ファイル情報を配列に保持できると思いますし、 入力ファイルを複数回読めれば、 そのたびに、読む列を変更できるのですが。。 Perl初心者ですが、よろしくお願いします
こんばんは。 Perlで例えば「https://secure.nicovideo.jp/secure/login?site=ni …」にアクセスして、そのログイン情報のまま「http://www.nicovideo.jp/」にアクセスしたソースコードが欲しいです。 下記ためしたコード use LWP::UserAgent; use HTTP::Request::Common qw(POST); $nico_ua = LWP::UserAgent->new; %loginform = ('mail' => 'hoge@hoge.jp', 'password' => '****'); $request = POST('https://secure.nicovideo.jp/secure/login?site=ni … [%loginform]); $nico_ua->request($request); ##この時点でログインはできてる模様 $response = $nico_ua->get("http://www.nicovideo.jp/"); print $response->content; ##↑のprintが上手くいかない。 $nico_ua をそのまま使えばログイン情報も維持されると思ったが甘かったです。 LWPの接続でクッキーなどの情報を保持したまま次に指定したURLのコードを取得する方法が知りたいです。 お願いします。
こんばんは，いつもお世話になっております． Webサイトへのアクセスカウンターを作ってみました． 人がページへ訪問→+1してcount.datに加算→同ページに数値を表示というプロセスです． count.cgi ----------------------------------------- #! usr/bin/perl use CGI::Carp qw(fatalsToBrowser); open(FILE, "+<./count.dat") or die("ERROR"); eval{ flock(FILE, 2); }; $count = <FILE>; #カウントファイルの書き込み seek(FILE, 0, 0); print FILE ++$count; close(FILE); #サーバー出力 print qq[Content-type: text/html\n\n]; print qq[<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">]; print qq[<html>]; print qq[<head><title></title></head>]; print qq[<body>]; print qq[$count]; print qq[</body>]; print qq[</html>]; ----------------------------------------- 非常に簡易的なものなのですが，この数値を個人のIPなど，無二の値を用いて識別し，count.datに保存することは可能でしょうか？ もちろん個人情報なので出力については考慮したいと思っております． 何か不明な点がございましたら随時対応しますので，よろしくお願い致します．
#!/usr/bin/perl print "Content-type: text/html\n\n"; print "<html><head>"; print "<meta http-equiv=\"Content-Type\" content=\"text/javascript; charset=UTF-8\">\n"; print "<title>図書管理システム</title>\n</head>"; print "<body>"; use DBI; $dbname = "bookmanagement"; $host = "localhost"; $user = ""; $password = ""; $table = "booktable"; $conn = DBI-> connect("DBI:Pg:dbname=$dbname;host=$host", $user, $password )|| die "DBI connect failed: $DBI::errstr"; $sql = "select * from $table order by id"; $result = $conn->prepare($sql); $ref = $result->execute; print <<HEADER; <body> <div align="right"><a href="./rental.cgi">ログアウト</a></div> <center> <caption><h2>図書管理システム </h2></caption> <table border=2> <tr bgcolor="#dcdcdc"> <th>ID</th> <th nowrap>本名称</th> <th nowrap>著者</th> <th>説明</th> <th nowrap>登録日</th> <th nowrap>状態</th> <th nowrap>貸出日</th> <th nowrap>貸出人</th> </tr> HEADER while(my @ref = $result->fetchrow) { print <<ROW; <tr> <td>$ref[0]</td> <td>$ref[1]</td> <td nowrap>$ref[2]</td> <td>$ref[3]</td> <td nowrap>$ref[4]</td> <td nowrap>$ref[5]</td> <td nowrap>$ref[6]</td> <td> ROW if($ref[7] eq ""){ print "<br>"; } else{ print "$ref[7]"; } print <<ROW; </tr> ROW } print <<FOOTER; </table> </center> FOOTER $result->finish; $conn->disconnect; 上のコードで今DBの中身が見れるようになっているのですが、一度に全部表示するようになってしまっていて データ数(?)が多すぎてスクロールするのが面倒なので、データを15件ずつに分けて＜前へ　次へ＞みたいなのを 作りたいと思っているのですが、どのようにしたら分りません。おわかりになる方がいましたら実装する為の コードを教えて頂けないでしょうか？よろしくお願い致します。
お世話になっております。 あるファイル群にgrepをかけて結果を取得したいのですが あと半歩という所でつまづいています。 正規表現の考え方のご示唆をいただけませんでしょうか。 宜しくお願い致します。 ■やりたいこと コメントアウトされていない文字列のマッチ ■対象文字列 1行目：ほげ 2行目：//ほげ 3行目：// これは否定 ほげ 4行目：ほげ //ここにコメントがはいるとひっかからない（＞＜） ■コメントアウト文字 // 1行目と4行目の「ほげ」をマッチさせたいのです。 正規表現の先読み否定を使って ^(?!//.*)ほげ$ 行頭から、「//」が後に続かなくて「ほげ」がある行末 とやってるのですが、 4行目がひっかかりません。 (?!//.*)の部分で、「//」から「ほげ」までを否定している為だと思うのですが、どのように考え、どのように記載すればスマートでしょうか。 お忙しい所恐縮ですが アドバイスいただければ幸いです。 宜しくお願い致します。
お世話になります。 具体的な話ですが、 文字列を編集するときに以下のようにしています。 もっと上手い方法があれば教えて欲しいのですが。 文字列　20100122125720 (２０１０年１月２２日１２時５７分２０秒）を １０年１月２２日／１２時５７分　→　10.01.22/1257 と表示したいために、 $wk = substr($dt,2,2).".".substr($dt,4,2).".".substr($dt,6,2)."/".substr($dt,8,4); とやっています。 宜しくお願いします。
学校の課題が全く進まなくて困ってます・・・ 問題：「販売日」，「顧客名」，「商品名」，「単価」，「数量」のデータがコンマ区切りで記述されているCSV ファイルが与えられたとする． そこで，以下のことを実行するプログラムを作成せよ． 1． CSV ファイルのデータに加え，各行に「売上金額」のデータを追加したファイルを出力する． 　なお，「売上金額」は「単価×数量」である． 2．顧客別の売上金額を記述したCSVファイルを出力する．なお，売上金額の降順でデータを記述すること． 3． 商品別の売上金額を記述したCSVファイルを出力する．なお，売上金額の降順でデータを記述すること． 4． 商品別の販売数を記述したCSVファイルを出力する．なお，販売数の昇順にデータを記述すること． 与えられたCSVファイルの一部↓ 販売日,顧客名,商品名,単価,数量 2006/4/1,菓子工房　春,季節のアイスセット,1800 ,5 2006/4/1,有）井上製パン,ゼリーセット,1500 ,3 2006/4/4,グルメット下条,クッキー詰め合わせ,2300 ,2 2006/4/4,北野フルーツプラザ,フローズンフルーツ,2200 ,6 2006/4/5,ＴＥＡ　ＬＯＮ,紅茶ケーキ,1000 ,2 2006/4/5,北野フルーツプラザ,フローズンフルーツ,2200 ,1 2006/4/8,有）井上製パン,シナモンパンセット,900 ,4 ・・・ 1はなんとかクリアできたのですが、2以降で完全に詰まりました。 顧客別（商品別）に売上をまとめる方法が思いつかないんです。 どなたか知恵を貸していただけないでしょうか・・・
htmlやcssの勉強をしていて、そろそろperlに手をつけてみようとしているのですが、設定方法が全くわかりません。かなり調べたのですが、調べ方が悪いのか全然解決できません。具体的に何がわからないのかというと。 ・http://*****.sakura.ne.jp/perltest.plとしてFTPでアップロードしたら、perltest.plの中身がそのまま表示されてしまいました。拡張子をcgiとしてアップロードしたら、ページが表示出来ないエラーとなりました。アップロードするフォルダがいけないのでしょうか？なにか設定があるのでしょうか？ほかのhtmlやcssのファイルは問題なくアップロードできています。 ・コマンドパス/usr/bin/perlなど、なんのことか全くわかりません。 ・DWのCS4を使っているのですが、どうすれば、効率良く.plファイルを編集アップロードできるのでしょうか？（現在.plのファイルをダブルクリックしても編集画面が出てこず、右クリック→エディタを指定して開く→dreamweaverとしないと編集できません。） ちなみに、とりあえずの内容ですがperltest.plの中身は #! /usr/bin/perl print "Content-type : text/html\n\n "; print "<html> <body> \n " ; print "<div>aaa</div> \n " ; print "</html> </body> \n " ; です。 さくらレンタルサーバーのオンラインマニュアルは http://support.sakura.ad.jp/support/manual/rs/te … です。 かなり初歩的なこととは思いますが教えてください。いくら調べても全然わからず、本当に困っています。どうかよろしくお願い致します。
質問したのですが、初心者すぎて何を言われているか分からないので、１部取り出しました。 和の二乗と二乗の和 この二つの和を求めたいです。 プログラム途中からで$X、$Y、$ndataは既に使われています。 my $X = $x[$ndata] my $Y = $y[$ndata] my $sg =0; my $sg1 =0; my $sg2 =0; for($x; $x < $ndata;$x++;){ $sg1 = $sg1 + ($X)**2; $sg2 = $sg2 + ($X); } $sg = $ndata * $sg1 - ($sg2)**2; これが前に質問したものです。 ​http://oshiete1.goo.ne.jp/qa5603956.html​ できれば間違っているところを直したプログラムを書いていただけると嬉しいです。それと前に質問した中で、他にも違うところがあったら直していただけると助かります。
お世話になります。 ”／”で区切られたテキストデータがあるのですが。 各フィールドの長さも、個数も固定ではありません。 そんなデータの最終フィールドを取り出したいのですが。 コードを教えて貰えると嬉しいです。 例； (1)abc/d/efgh/ijklmn/op/qrs (2)1/234/56/789/abcd/e ↓ (1)qrs (2)e 宜しくお願いします。
最小二乗法のプログラムを作ってみたのですが、 これで動きますか？？ データを読みとった後から、つまり途中からなのですが・・・ $ndata、$x,$yはデータから読み取った値でこの前で使われています。 #!/usr/bin/perl # test1.pl use strict; use warnings; my $X = $x[$ndata] my $Y = $y[$ndata] my $sg =0; my $sg1 =0; my $sg2 =0; for($i; $i < $ndata;$i++;){ $sg1 = $sg1 + ($X)**2; $sg2 = $sg2 + ($X); } $sg = $ndata * $sg1 - ($sg2)**2; my $a =0; my $a1 =0; my $a2 =0; my $a3 =0; my $a4 =0; for($i; $i < $ndata;$i++;){ $a1 = $a1 + ($X)**2; $a2 = $a2 + ($Y); $a3 = $a3 + ($X); $a4 = $a4 + ($X)*($Y); } $a = ( $a1*$a2 - $a3*$a4 ) / $sg my $b =0; my $b1 =0; my $b2 =0; my $b3 =0; my $b4 =0; for($i; $i < $ndata;$i++;){ $b1 = $b1 + ($X)*($Y); $b2 = $b2 + ($X); $b3 = $b3 + ($Y); } $b = ( $ndata*$b1 - $b2*$b3) / $sg $Y = $a + ($b * $X) my $sgy =0; my $sgy1 =0; my $sgy2 =0; for($i;$i < $ndata;$i++){ $sgy2 = $sgy2 + ($Y-$a - $b*$X)**2 } $sgy1 =$sgy2 /($ndata - 2) $sgy = sqrt( $sgy1 ); my $sga =0; my $sgb =0; $sga = $sgy * sqrt( $a1 / $sg ) $sgb = $sgy * sqrt($ndata / $sg ) print "パラメータA=$a,パラメータB=$b./n"; print "Aの誤差は$sga、Bの誤差は$sgb./n";
以前、ご質問させていただき、ご回答をいただいたのですが、 'server0[123]', 'client0[1-35-7]', 'client0[13-69]', 'client[1-3][0-9]' の文字判定をお聞きし、自分なりにサブルーチン化して対応いたしましたが、 このたび 'server0[1-3]0','server0[1-3]2','client0[a-z1]',client[a-c][12] 等の文字列も判定する必要がでてきました。 sub host{ my @reg_str = @_; my (@work, @result); foreach my $reg_str (@reg_str) { if ($reg_str = ~/\[/ ){ my $head = substr($reg_str, 0, index($reg_str, '[')); my @num = map { s/(\d)-(\d)/join('', $1 .. $2)/eg; [split //] } $reg_str =~ /\[([\d-]+)\]/g; @ref_result = (); @ref_result = comb(@num); print join(',', map { $head . $_ } @result), "\n\n"; }else{ print "$reg_str\n"; } sub comb { my $ref = shift; @result = (); foreach my $i (@$ref) { push @work, $i; unless (@_) { push @result, join('', @work); } else { comb(@_); } pop @work; } return (@result); } } 'server0[123]', 'client0[1-35-7]', 'client0[13-69]' の分解は可能なのですが、 'client[1-3][0-9]' は client10,client11,client12・・・・・・client37,client38,client39 となってほしいのですが、 client31,client32・・・・・,client38,client39となってしまいます。 また括弧の後ろに括弧無しがきた場合は、うまく展開できません。 お忙しいところ、誠にくだらない質問かもしれませんが、お力をお借りできれば幸いです。 よろしくお願いします。
指定フォルダ内のファイル一括ＤＬ ホームページ訪問者が、指定フォルダ内のファイルを一括してダウンロード できるようにしたいです。ボタンを押せばダウンロード開始…なんて言う事 は出来ないでしょうか？ 出来るとすればPerlではどの様な記述になるのかご教示お願い致します。
WEBアプリケーションを自分で作ってみたいと考えています。 とりあえずしてみたことは、簡単なCGIを作って、レンタルサーバーにそれをちょこっと置いてみました。動きました。 ただ調べていくとMVC構造がどうだとか、CPANからモジュールをインストールするとかいろいろでてきます。 レンタルサーバーにおくばあい場合、CPANからモジュールをインストールして、ローカルで動かせても、まったく意味ないのでは?とか思ったりしています。 そして、自分のところにあるデータベースにも繋がらないのではないでしょうか? どのようにしてするものなのでしょうか? よろしくおねがいします 。
こんばんは．いつもお世話になっております． 会員制のサイトにおいて，利用者が商品を購入ボタンをクリックしたときを1カウントとし，ファイルに顧客別で蓄積していくことは可能でしょうか？ イメージとしては，「●●を購入完了しました！1ポイントを差し上げます．」のような，簡易的なポイント付与機能を目指しております． 手掛かりになるようなことでも構いませんので，何卒よろしくお願い致します． 説明不足による不明な点などございましたら，随時対応致します． よろしくお願いします．
PerlでPDF::API2を使って、PDF帳簿に文字を入れるスクリプトを書いていたのですが、「テ　　　　　　　ス　　　　　　　ト」のように異常に字間が生まれて挿入されてしまいます。 対処方法をご存じの方おられましたら教えて下さい。 use PDF::API2; use PDF::API2::Resource::CIDFont::CJKFont; my $pdf = PDF::API2->open("template6.pdf"); $page = $pdf->openpage(); my $gfx = $page->gfx; my $gfx2 = $page->gfx; my $gfx3 = $page->gfx; my $jfs = $pdf->cjkfont( 'KozGo', -encode=>'shiftjis' ); my $text = "テスト"; $gfx->textlabel(30, 700, $jfs, 10, $text); $pdf->saveas("new.pdf");
10個の選択肢があるクイズを作っています。 プログラムは $問題番号=ユーザーの回答番号 という形でPOSTデータを取得します。 それで、現在1つ1つ if ($問題番号 == 正答番号) { 正解時の処理 } という文で処理を書いているのですが、問題が400近くあり、頻繁に問題を変更するので できればクイズの答えが次の形式で収録されている「test.csv」を使ってforeachあたりで 繰り返しを使いたいのですが…うまく動かすことができません。 問題番号,問題,正答番号 知恵を拝借願えないでしょうか。
KENT WEBのWebpatio（http://www.kent-web.com/bbs/patio.html）を、 この掲示板のデザインの用にカスタマイズしたいのですが、 どのように改造すればできるのでしょうか？ http://mb2.jp/_ztd/ 上の掲示板もWebPatioを使っているそうです。 patio.cgiを書き換えるのかな？と思い、いろいろいじってみたんですが「500エラー」ばかりで…。 どうしてもできません。 枠を２重の線にしたいんです。 ほんの少しでもいいので、アドバイスいただけないでしょうか？ すみません。 アドバイスいただけると幸いです。
現在perlで、 dbmopen関数を使ってDBファイルを作成しようとしています。 できることはできたのですが、幾分わからないところがありまして、、、。 どなたかお助け下さい。。。 というのも、 テキストファイルを、内容・順番を全く同じにしてDBファイルにしたいのですが、、、。 自分で作ると、DBファイルはできても順番がバラバラでした。 どのようなスクリプトを作ればいいのでしょうか？ 自分が作成したperlスクリプトはこんな感じです ↓ dbmopen %a, "ファイル名", 0666; open(TMP,"ファイル名.txt"); while($data=<TMP>){ # chop($data); $n=index($data," "); $key=substr($data,0,$n); $a{$key}=$data; } dbmclose %a; まだperlを触って数日で、どこをどうすればいいのか不明です、、、。 なんとか、テキストファイルを1行ずつひっぱってきて、DBファイル化したいのですが。 ご指導お願い致します、、、。
お世話になります。 早速ですが、 在る欄に回答を入力させるようなｃｇｉを作成しています。 そしてシステム的に内容をチェックし、 結果がｎｇの時にｎｇだった内容を表示しています。 そして同じ画面で誤った箇所の再入力をさせようとしています。 （答えが合うまで繰り返しています。） 画面上には、 入力する前に当該箇所（システムで表示した内容）をクリアできるように 以下のような「クリア」ボタンを付けています。 <input type="reset" value="クリア"> ここで質問ですが、 このボタンだとシステム（ｃｇｉ）で表示した内容は消せません。 （ユーザーが入力した内容は消せるのですが） この書き方では駄目なのでしょうか。 消すにはどんな書き方があるのでしょうか。 宜しくお願いします。
Net::FTPを使いファイル一覧のみを取得したい 以前の質問では大変お世話になりました。 「Net::FTPを使いフォルダ一覧を取得」 http://okwave.jp/qa/q5555220.html 今度は、Net::FTPを使いファイル一覧のみを取得したいと思ってます。 (ここから) use Net::FTP; my $ftp = Net::FTP->new("hoge.sav.ne.jpp", Debug => 0 , Passive => "true"); # 接続 $ftp->login("xxxx", "pass"); # ログイン my @dir = $ftp->cwd('/public_html'); my @dir = grep /^d/, $ftp->dir; # ←　フォルダ一覧をdirコマンドで取得 my @dir_names_full = @dir[2..$#dir]; # 　自フォルダと親フォルダ("."と"..")を除く。 my @dir_names_short = map { (split)[8] } @dir_names_full; # フォルダ名のみを取得 $ftp->quit; print "$_<br>\n" for @dir_names_full; (ここまで) my @dir = grep /^d/, $ftp->dir; # ←　フォルダ一覧をdirコマンドで取得 の部分の「grep /^d/,」を削除したら、ファイルも一緒に表示させることは出来たのですが 正しく表示されませんでした。 (ここから) drwxrwx--- 2 xxxx xxxxx 48 Sep 3 14:59 Maildir drwx---r-x 2 xxxx xxxxx48 Sep 3 14:59 log -rw-r--r-- 1 xxxxnobody 2932 Oct 21 09:34 ent4.html -rw-r--r-- 1 xxxx nobody 2933 Oct 21 09:34 ent5.html -rw-r--r-- 1 xxxx nobody 2878 Oct 21 09:34 index.html (ここまで) 最終的な結果は (ここから) -rw-r--r-- 1 xxxx nobody 2932 Oct 21 09:34 ent1.html -rw-r--r-- 1 xxxx nobody 2932 Oct 21 09:34 ent2.html -rw-r--r-- 1 xxxx nobody 2933 Oct 21 09:34 ent3.html -rw-r--r-- 1 xxxx nobody 2932 Oct 21 09:34 ent4.html -rw-r--r-- 1 xxxx nobody 2933 Oct 21 09:34 ent5.html -rw-r--r-- 1 xxxx nobody 2878 Oct 21 09:34 index.html (ここまで) で表示させたいのです。 検索をしていたら、grepで出来そうなのかと思いやってみましたがうまくいきませんでした。 お手数かけます。 よろしくお願いいたします。
以下の文字列（置換前）で、-aaa について複数存在しているので、 最初の -aaa を残して残りの -aaa をすべて削除したいと考えています。 １回の正規表現＋置換で行いたいのですが、どのようにいすればよいでしょうか？ 【置換前】 -bbb -aaa -ccc -aaa -ddd -eee -aaa -fff 【置換後】 -bbb -aaa -ccc -ddd -eee -fff ちなみに、複数回の正規表現＋置換を使ってよい場合は、 while (m/( -aaa.*) -aaa/) { s/( -aaa.*) -aaa/$1/; } でできると考えています。(動作確認まではしていないので間違ってるかも)
同じファイル内での重複文字列の消去について教えてください。 以下のようなファイルがあった時に ---text--- 100 フランチャイズ 98 二酸化炭素 76 ワールドカップ ・・・ 4 排出二酸化炭素 3 直営フランチャイズ 3 サッカーワールドカップ 1 ２００９年ワールドカップ ------- 「排出二酸化炭素、直営フランチャイズ、サッカーワールドカップ、２００９年ワールドカップ」はファイル上位のキーワードと重複する部分があるので消去したいと考えています。 まず、以下の処理で不要部分の抽出を考えてみたのですが、ループが一度しか回らずに処理が停止してしまいました。どのようにするとよいでしょうか。 よろしくお願いいたします。 my $file = "text"; open( my $fh, "<", $file ) or die "Cannot open $file: $!"; my $lineheader = ''; while (<>) { $lineheader = (split)[1]; while(my $line = readline $fh){ if($line =~ /$lineheader/){ print $line; } $lineheader = ""; } }
変数のデータに改行コードのみを削除したい 変数のデータに改行コードのみを削除したいと思っておりますがうまくできません。 $samのデータに以下の内容でデータがはいってます。 (ここから) これはテストです。<br>\n <br>\n これはテストです。<br>\n <br>\n <br>\n これはテストです。<br>\n これはテストです。<br>\n (ここまで) $sam=~ s/<br>\n//g; だと本来改行コードがほしい内容まで削除してしまいます。 以下の内容もおかしいと思いますが、うまく出来ませんでした。 $sam=~ s/.*?<br>\n//g; この内容の場合改行コードが欲しい。それ以外は削除したい。 タグの除去は以下のサイトを検索で見つけたのですが、ちょっと違うかなと思い質問させていただきました。 HTMLタグを取り除く http://www.nishishi.com/perltips/string4.html 以上、よろしくご指導賜りたく思います。
perlからMicrosoft Visual Studio 2008 Express Editionに移行する場合、簡単な言語はどういった物でしょうか？ perlでは文字列操作を良く行っていたのですが（ホームページから必要な情報を抜き出すような操作）、ActivePerlの入っていないPCで動かすには、毎回、インストールをしたりと面倒です。 そこで、Vectorなどでも気軽に配布できるよう、他の言語で書き換えようと思っているのですが、perlからの移行や移植が簡単で、無料で使える物でお薦めはありますでしょうか？ 宜しくお願い致します。
メールに関することで質問なのですが、機能を使わずにデコードする方法がわかる方いますか？ 初心者なのでいろいろと教えていただけると嬉しいです！ 宜しくお願いします。
(perl)プログラムの先頭に記述するだけで、エラーを飛ばしてくれる方法について プログラムの先頭に記述するだけで、エラーを飛ばしてくれる方法があったのですが 思い出せません、ググっても見つかりません。どなたか教えて頂けないでしょうか？ とにかく、発生するエラーをとことん無視するような物です。 宜しくお願い致します。
perl での正規表現がうまくいかないので質問させてください。 以下のような文章から「や」や「、」で連続に繋がった単語（カボチャ、人参、白菜、野菜）を抽出したいのですが これ|から|は|カボチャ|や|人参|、|白菜|など|の|野菜|が|旬|を|迎え|る|。 これ|から|は|カボチャ|、|人参|や|白菜|など|の|野菜|が|旬|を|迎え|る|。 自分なりに考えた以下のマッチではうまく行きませんでした。 m/(.*)\|[や、]\|(.+?)\|[や、]\|(.+?)\|など\|の\|(.+?)\|/; print "$2 $3 $4 $5\n"; 解決方法がありましたら、ご教示いただけますでしょうか。 よろしくお願いいたします。
perl初心者です。 正規表現で記載された下記のような文字列を以下のように書き換えたいのです。 server0[123] client[1-3][0-9] ↓↓ server01,server02,server03 client10,client11........client38,client39 よろしくお願いします
MySQLと連動したサイトをつくる場合、登録、閲覧、検索時PerlとPHPではどちらが負荷がかからないで早く表示するのでしょうか。
seleniumでperlモジュール使用で質問です。 ------------------------ type ロケータ 値 ------------------------ selenium IDEで短い文字列なら入力できますが、 selenium IDEであれば長くても一行で大きな ファイルデータを並べればうまく動作しました。 そこでseleniumのperlクライアントモジュールで、 undef $/; open(IN2,'test.html'); $vv2 = <IN2>; close(IN2); $sel->type_ok("Description_plain", "$v"); という感じでHTMLファイルデータを、 一気にテキストエリアに流し込む場合、 読み込む文字数が多くなるとエラーになります。 ヴァージョンはselenium RC 1.0.1です。 WARN - null /selenium-server/driver/?cmd=waitForPageToLoad&1=5000&s essionId=f5b37a23daa64c79b6fb1202a1413f33 HTTP/1.1 HttpException(414,Request URI Too Large,null) ちなみにHTMLのデーターを600biteくらいでエラーになりません。 エラーを読む限り、Request URIが長すぎる、との事ですが、 たかだか600bite程度でこんなエラーが出ては、 ユーザーのテキストエリアへの長文投稿 などのシュミレーションができないと思います。 もし、解決方法やヒントを知っている方はご教授お願いします。
submitにてデータを受け渡すときについての質問となります。 変数を一つ受け渡す場合はこのようにすればいいと思うのですが、 print start_form; print submit('abc'); print hidden( -name => 'sample', -value => $a ); print end_form; 2つ以上の変数を受け渡す時には、どのようにすれば良いのでしょうか。 my $a = "red"; my $b = "black"; my @ab = ($a, $b); print start_form; print submit('color'); print hidden( -name => 'sample', -value => @ab ); print end_form; ####################################### my ($a, $b) = param('sample'); print $a; print $b; というふうにすると、print $a;はredを表示してくれますが、 $bにはblackは入っておらず表示してくれません。 どのようにすれば、配列を渡して、変数２つを受け取ることができるのでしょうか？？ ご回答よろしくお願い致します。
文字列のなかの"<タグ>(アルファベット1文字)"すべてに対して置換処理をさせたいのですがうまく動作しません。 現在はこう記述しております。 $str=~ s/(~<(.*?)>\w)/置換文字列/g; 良い方法があれば教えていただけると助かります。
お世話になります。 次のようなフリーの掲示板ＣＧＩのプログラムを探しています。 ご存知でしたらお手数ですが教えてください。 まず、書き込みしたい人は、メールアドレスを入力してもらいます。 そのメールアドレスに届いたＵＲＬをクリックすると掲示板に書き込めるという安全な掲示板です。 以上、よろしくお願い致します。
引数として与えた式を、プログラム中で計算するようにしたいと思っています。 引数に変数を入れることはできないのでしょうか? 将来的には、ファイルを開いてそれぞれの、ファイルごとの定数を式に代入しようと考えています。 よろしくお願いします。 プログラム ################################### my $bb =2; my $str = $ARGV[0]; eval $str; print "$str\n"; 実行文 #################################### perl test.pl 2*3+\$bb 結果 #################################### 2*3+$bb 望んでいる結果 8
perlに関するサイトで 合計を求めるプログラムは @dat(1,2,3,4,5,6,7,8,9,10); $sum = 0; for($i = 0;$i <10; $i++){ $sum+ = $dat[$i]; print "sum = $sum "; } というのを見つけました。 いくつか質問があります。 (1)これは１２３４・・・と続いているから$i++で1の次は２とあらわされているのか、それとも@datの配列の1番目の次が2番目というのを表しているのか。 もしたまたま続いているからならば、列の1番目の次の処理が2番目というふうにするにはどうすればよいか。 (2)$dat[$i]の[]は何を表しているのか (3)$sum＋ = $dat[$i]は合計を求めるものだと思うのですが、$sumが合計のことですよね。$dat[$i]についてなのですが、for文なので順番に$iから足しているということなのでしょうか？？いまいちピンと来ません。それに$sum+の＋は何を意味しているのでしょうか？？？ 分かりやすく教えていただけると嬉しいです。
この間質問したのですが、全く解決できないので再度お願いします。 Aというファイルを読み込んで、最大最小・平均を求めたいです。専門用語をできるだけ使わないで答えてください！！ #!/usr/bin/perl # 12345 STDIN use strict; use warnings; open ( FILEHANDLE , " < A " ) ;　　＃Aを読み取ってnumbersに当てはめる my $Minimum=$ARGV[0];　＃最小値に一番最初の値を当てはめる。 my $Maximum=$Minimum;　＃ひとまず最大値＝最小値（両方とも一番最初）とおく my $Sum=$Minimum;　　　　　＃？　 my $temp=0;　　　　　　　　＃？temp my $i=1; 　　　＃numbersの最初の値iを初期化 while ( $i < $Num_arg){　　＃？（iと最初の値を比べる？？） $temp=$ARGV[$i];　　　　　 ＃？ if ( $Minimum > $temp ) { ＃最小値と数字を比べる。 $Minimum = $temp;　　　　　＃小さかったらその値を最小値と置く }elsif ( $Maximum < $temp ){　＃最小値に当てはまらなかったら最大値と比べる。 $Maximum = $temp;　　　　＃大きかったらその値を最大値と置く。 } $Sum = $Sum + $temp;　　＃？ $i++;　　　　　　　　　＃最初の値iに１を足す。そしてループさせる } my $Average = $Sum / $Num_arg;　＃平均＝合計÷全部の数 my $w = 　　　　　　　　　＃ｗをしたのforeach文で出た値と置く。 foreach my $w(0..$#Numbers){　　＃Numbersの最初から最後までやる（Σシグマとおなじ） ($Num_arg - $Average) ** / $Num_arg;　　＃Numbersのi番目の値から平均値を引き2剰そしてNumbersの数で割る。 } my $Standarddivitation = sqrt ($w);　＃標準偏差＝ｗの平方根 print "Average value = $Average \n"; print "Maximum Value = $Maximum \n"; print "Minimum Value = $Minimum \n"; print "Standard devitation = $Standarddevitation; 私がやっていると思っているのが＃のところです。？の部分はよく分かりません＞＜。 何で違うかと間違っているところを(簡単なものを使って)修正してください。 気がついたのはNumbersとNum_arg（i番目をあらわしていることと総数を表している）とがばらばらなことです。 よろしくお願いします。
よろしくお願いします。 アパッチとアクティブパールはインストール済みです。（vistaです） C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\index.html で「It works!」は問題なく表示されます。 中身： <html><body><h1>It works!</h1></body></html> です。 次にCGIを表示する練習をしようと C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\perlbook というフォルダに ********************************* ファイル名：hello.cgi 中身： #!/Perl/bin/perl print << "eof"; content-type: test/html <html> <head> <title>cgi</title> </head> <body> hello world </body> </html> eof ********************************* を作り、ダブルクリックで開きましたが ブラウザには 「#!/Perl/bin/perl print << "eof"; content-type: test/html hello world eof」 が表示されます。 hello worldだけ表示されるはずだと思うのですが なぜ全てのタグが表示されてしまうのでしょうか？ どこが間違っているのかご指摘よろしくお願いします。
Perlを始めたのですが、本や色いろんなサイトを見てもよく分かりません。 Aと言うデータを読み込んで最大最小・平均・標準偏差を求めたいです。 (1)どこが間違っているのか1部づつでもいいので詳しく教えてください。 (2)一つ一つの意味がちゃんとはつかめていないと感じるので流れを教えてください。 #!/usr/bin/perl # 12345 STDIN use strict; use warnings; open ( FILEHANDLE , " < A " ) ; my @Str=<STDIN>; foreach my $Row (@Str ){ print $Row; } my $Minimum=$ARGV[0]; my $Maximum=$Minimum; my $Sum=$Minimum; my $temp=0; my $i=1; while ( $i < $Num_arg){ $temp=$ARGV[$i]; if ( $Minimum > $temp ) { $Minimum = $temp; }elsif ( $Maximum < $temp ){ $Maximum = $temp; } $Sum = $Sum + $temp; $i++; } my $Average = $Sum / $Num_arg; my $w = foreach my $w(0..$#Numbers){ ($Num_arg - $Average) ** / Num_arg; } my $Standarddivitation = sqrt ($w); print "Average value = $Average \n"; print "Maximum Value = $Maximum \n"; print "Minimum Value = $Minimum \n"; print "Standard devitation = $Standarddevitation;
prelを勉強中ですが 本にはアパッチをインストールするように書かれています。 しかし私が使っているプラットフォームはｗｉｎｄｏwｓｖｉｓｔａです。 それにＩＩＳはすでにインストールしてあります。 この場合、アパッチをインストールする必要はありますか？
こんばんは。Perl初心者（プログラミングの初心者です）。 たびたびお世話になっております。 現在、カレントディレクトリにあるテキストファイルから12文字以上の単語を抽出し、新規テキストファイルにはき出すスクリプトを書こうとしているのですが、うまくいきません。 以下のようなリストを記述して見たのですが、どうやら12文字以上の単語が含む「行」を抽出しているようなのです（その処理自体も不安なのですが…）。 どこがいけないのか、そもそも根本的に間違っているのか、ご指摘いただけると非常に助かります。 ご助言よろしくお願いします。 use strict; use warnings; while ( my $file = glob '*.txt' ) { open my $reading, '<', $file or die; my @content = <$reading>; close $reading; my @results = grep(/[a-zA-Z']{12,}/,@content); foreach my $result (@results) { open (NEWFILE, ">LongWords_12.txt") or die "$!"; print NEWFILE @results; close(NEWFILE); } }
perlを学ぼうと思うのですが 超初心者くらいのhtmlの知識しかありません。 XMLとかDHTMLなどは何がなんだかわかりません。 Perlを勉強する前にまずそちらを先に学んだほうがいいのでしょうか？ アドバイス宜しくお願い致します。
こんにちは、Perl初心者です（プログラミング全般の初心者です）。 カレントフォルダ内のテキストファイルに対して、文字列置換をするスクリプトを書こうとしています。具体的には、以下のようにストリングIDの直下に改行のみの場合（ストリングがない）は、[BLANK]という文字列を挿入したいと思っています。 TEXT_STRING_ID_001＜改行＞ ＜改行＞ ＜改行＞ TEXT_STRING_ID_002＜改行＞ 入門書やこのサイトの皆さまのお力を借りて、なんとか以下のようなリストを書きエラーなく置換処理ができるところまでは確認できました。 しかし、この方法だと結局1行ずつ処理していることになるので、「s/\n{3}/\n[en]\n/gm」のような置換ができません（mオプションをつけてもダメなようです）。 この問題を解決する良い方法はないものでしょうか。 （もしかすると、処理の仕方を根本から変えないといけないのでしょうか） 以下、現状のリスト： use strict; use warnings; my $dirname = '.'; opendir(DIR, $dirname) or die "$dirname: $!"; while (my $dir = readdir(DIR)) { next unless (-f $dir); next unless ($dir =~ /\.txt$/); print $dir, "\n"; open(FILE, $dir) or die "$dir: $!"; my @file = <FILE>; close(FILE); foreach my $line (@file) { $line =~ s/\n{3}/\n[BLANK]\n/gm; } open(NEWFILE, "> $dir") or die "$dir: $!"; print NEWFILE @file; close(NEWFILE); } closedir(DIR);
こんばんは。Perl超初心者です（プログラミングの初心者でもあります）。 フォルダ内にあるすべてのファイルに対して、正規表現を使った文字列置換をしたいのですが、うまくいきません。アドヴァイスをいただけないでしょうか。 具体的には、あるファルダの中に100個程のファイルがあって、その中の改行が3回連続している部分を、「改行+[SAMPLE]+改行」に置換をしたいと表います。 Windows XP Professional SP3 / ActivePerl 5.10 の環境で、以下のように記述したのですが、「Missing $ on loop variable at insert.pl line 5.」とエラーになってしまいます。どこで、間違ったのでしょうか（というか、まるでダメなスクリプトかもしれませんが…）。 use strict; use warnings; my @filename = glob "*.txt"; foreach open(FILE, "$filename(@filename)") { my @content =<FILE>; @content =~ s/\n{3}/\n[SAMPLE]\n/g; print FILE @content; close(FILE); } どなたか、ご教示いただけると非常助かります。 よろしくお願い致します。
こんにちは。Perl（超？）初心者です。 フォルダ内にあるファイルの名前を、「filename_ja.txt」という形式から「filename_en.txt」に変更するスクリプトを書こうとしているのですが、エラーになってうまくいきません。 環境は、Windows XP professional SP3とActivePerl 5.10 で、以下のように記述しました。 use strict; use warnings; my @filename = glob "*.txt"; foreach my $oldname(@filename) { my $newname = $oldname; $newname = ~s/(.+)_ja\.txt/$1_en\.txt/; rename ($oldname,$newname); } これを実行すると、「Use of uninitialized value $_ in substitution (s///) at test_5.pl line 8.」とエラーメッセージが出て、フォルダ内のテキストファイルが消失してしまいます。 また、以下のようにも書いてみたのですが、やはりうまくいきません。 この場合は、エラーこそ出ないものの、なにも起こりません。 use strict; use warnings; for(<\.txt>) { my $old=$_; s/(.+)_ja\.txt/$1_en\.txt/; rename($old,$_); } 初歩的な質問で申し訳ありませんが、ダメな生徒にアドヴァイスを与えるつもりで、スクリプトを添削していただけるとありがたいです。 よろしくお願いします。
2つのお問い合わせフォームから送信します。（仮にZとYとします。） Zフォーム（perl/sendmail） Yフォーム（perl/sendmail） 3つの環境でフォームから送られてくる受信メールを見た場合（仮にA・B・Cとします） Aサーバ A1のPC（XP/outlook） A2のPC（VISTA/outlook） Bサーバ B1のPC（XP/outlook） B2のPC（VISTA/outlook） Cサーバ C1のPC（XP/becky） Zフォームから送られてきたメールは Aサーバの方では文章1行ごとに1行の空白ができる。（BR2回分） Bサーバの方では1行の空白ができない。（BR1回分） Cサーバの方では1行の空白ができない。（BR1回分） Yフォームから送られてきた Aサーバの方では1行の空白ができない。（BR1回分） Bサーバの方では1行の空白ができない。（BR1回分） Cサーバの方では1行の空白ができない。（BR1回分） 問題点１：Aサーバだけ1行の空白ができるので、Aサーバがおかしい 問題点２：Yフォームのメールは問題ないからZフォームがおかしい 現在このような矛盾が起きています。 これはどの部分を改善すればよいのでしょうか？ また原因として考えられることって何でしょうか？ ローカルの問題ってこともありますでしょうか？ （例えば、メールの設定をしなおすことで直るなど） 大変困っております。 宜しくお願いいたします。
題の通りです。 ２００以下の素数を全て表示するプログラムをfor文を使って作りたいのですがどうすればいいのか全く検討がつきません。 自分でもいろんなperlに関するサイトを見ましたが、わからなすぎて困っています。 参考になるサイトでもいいので、 教えてください。
ActivePerl をインストールしました。 早速、Hello worldを表示させようと思うのですが メモ帳に「print "Hello world!!\n";」と記載して 「hello.pl」という名前で保存しました。 それをデスクトップにおきました。 その状態で コマンドプロンプトで「perl hello.pl」を実行しても Can't open perl script "hello.pl": No such file or directory （和訳：開いたperlは、「hello.pl」のスクリプトを書くことができません：そのようなファイルまたはディレクトリ） が返って来ます。 多分、デスクトップにおくのが間違いだと思うのですが どこに「hello.pl」を置いて 「perl hello.pl」を実行すればいいのでしょうか？ ご教授よろしくお願い致します。
KCatch.pmではブラウザにエラー内容を表示できますが、 同じ内容をエラーログとしてファイルに記録していきたいのです。 HTTPDのScriptLogでは、どのようなエラーがあったか判断しにくいし、 CGI::Carp qw(carpout)では日時が記録できません。 望ましい形は、「日時、IP、KCatchのような詳細表示」の３項目を記録したいと思っています。
perlで括弧の対応の妥当性を知りたいのですが どの様にすればよろしいでしょうか？ ex). (X1+X2)+X3 -> OK ((X1+X2)+X3 -> NG ((X1+X2))+X3 -> OK )(X1+X2)+X3 -> NG などチェックを行いたいと思っています
Spreadsheet::ParseExcelでExcelから取得できない文字があります。 取得できない文字： １．前腸 ２．胚 ３．葯 ４．優性 情報をお持ちの方がいらっしゃいましたら宜しくお願いいたします。 環境はSolaris10でPerl5.8.4です。 以下のように取得時のフォーマットをFmtJapanにて指定しています。 my $oFmtJ =Spreadsheet::ParseExcel::FmtJapan->new(Code => 'euc'); わかっていること・・ １）文字コードをeucとすると１から４まで全て取得できません。 ２）文字コードをsjisとすると２、３が取得できません。 ３）文字コードをutf8とすると１のみが取得できません。 １から４まで全て取得したいです。
社内プロキシ環境において Active Perlの ppmコマンドでPerl Moduleをインストールする場合の Windows XPとVistaの動作の違いについて教えてください。 コマンドプロンプトにて次のコマンドを入力すると， ppm install http://www.bribes.org/perl/ppm/XML-XPath.ppd Windows XPでは正常にインストールできるのに，Vistaでは bribes.org:80 に接続できない，とエラーが返されます。 Windows XPでは，proxycfg -u で， Vistaでは，netsh winhttp import proxy source=ie で， プロキシサーバのIPアドレスとTCPポート番号の情報をOSに与えています。 ちなみに，プロキシ環境ではない自宅のVista PCで上記コマンドを実行すれば，正常にインストールできます。 このトラブルに関して何かヒントとなる情報をご存じの方がいらっしゃいましたら，ぜひ教えていただきたいです。
いつもお世話になっております。 以下のようなスクリプトを書き、 imapサーバの死活監視を行おうと思っております。 ################################# my $imap = Mail::IMAPClient->new( Server => $hostname, User => $username, Password => $password, Timeout => 5, ) or die "Cannot connect to $hostname imap:143. $!"; -------処理は続きますが割愛------- ################################# そこで、1つ壁にぶつかったので質問いたしました。 +++壁の内容+++ imapサーバに何らかの理由で接続できなかったケースを考慮して、 die関数を使おうと思ったのですが、 このdie関数は、「引数に指定した値を標準エラー出力に出力」するとのことなのですが、 引数に指定した値を任意のファイルに出力する方法はないのでしょうか？？ +++やりたいことの背景+++ imapサーバを監視するPerlスクリプトは、 実行するたびに指定したファイルに実行結果と実行時間を出力したい。 実行結果と実行時間を出力したファイルを 別の監視プログラムが監視するという二重構造の監視を行いたい。 imapサーバを監視するPerlスクリプトの実行結果を、 どうしても任意のファイルに出力したい。 +++++++++++++++++++++++++++++++++ 以上です。 よろしくお願いします。
初心者です。ｖｉｓｔａです。 ｐｅｒｌの勉強をしたくて ActivePerl 5.10.1 Build 1006をインストールしました。 早速、全てのプログラムから「Perl Package Manager」をクリックして起動させてみようと思ったのですが、何も起こりません。 ちょっと砂時計になり、何事もなかったようになります。 インストールに失敗したのでしょうか？ しかし プログラムの追加と削除にはちゃんとあります。 スタート→全てのプログラムの 「ActivePerl 5.10.1 Build 1006」のフォルダの中には ・Documentation ・OLE-Browser ・Perl Package Manager があります。 私は何か手順を間違えていますか？ ご教授よろしくお願い致します。
perlでテストデータを作成したいのですが、やり方がわからず困っています。 やりたいことは、文字変換テーブルがうまく作成できているかを試すための、テストデータ作成で、データとしては16進でx'97A0'からx'9EDF'までの２バイト文字コードのデータをひたすら打ち込んだ、テキストデータを作成することです。 単純にHEXのデータx'97a1'をunpackで１０進化したデータに対して、１を足しこみ、それをPACKし直してと言うことをしてみたのですが、結果はx'97a1'で、x'97a2'にはなってくれませんでした。 １６進で２バイト文字コードを連番で自動で作るようなことはできないのでしょうか？ 作成するテストデータが多いため、できれば自動でしたいと考えたのですが・・・。 試してみたサンプルを以下に記します。 どなたかお知恵をお貸しください。 よろしくお願いいたします。 -------------------------------------------- $data0 = "97a1" $data1 = pack "H4",$data0; $ctrl = pack "H2","0d"; for ($i = 0; $i < 10; $i++) { 　$data2 = unpack "H4",$data1 ; 　$data5 = $data2++; 　$data6 = pack "H4",$data5 ; 　print NEWFILE $data6,$ctrl; }
PerlかRubyを使って、形態素解析器なしで名詞（句）を取り出すことはできるでしょうか？よろしくお願いいたします。
Windows-XP上で、ActivePerl This is perl, v5.8.6 built for MSWin32-x86-multi-thread を使用しています。 次のようなPerl/Tk スクリプトで、例えば、デスクトップ上にあるJPG画像ファイルを キャンバスに表示させようとしますが、２バイト文字コードを含むファイル名やパス名だとエラーが出て上手く行きません。 use Tk; use Tk::JPEG; my $fn = $ARGV[0]; my $mw = MainWindow->new; my $cv = $mw->Canvas()->pack(); if(-e $fn){ my $ph = $mw->Photo(-format=>'jpeg',-file=>$fn); $cv->createImage(64,64,-image=>$ph); } MainLoop; ------------------------------------------------- エラー例： Cannot open 'C:\Documents and Settings\guest\テつデテつステつクテつトテつッテつプ\aaa.jpg' in mode 'r' at C:\Perl\site\lib/Tk/Image.pm line 21. ２バイト文字コードを含まないファイル名（例：C:\aaa.jpg）などを指定した場合は、 無事にキャンバスに画像が表示されています。 また、ファイル名に２バイト文字コードが含まれる場合でも、 ifの判定文でファイル存在確認が機能していますので、 Photoメソッド側の問題と思われるのですが、 他に、このファイル名をutf8やeucjpへencode/decodeしてみるなど色々なパターンで試してみたのですが、 どうやってもエラーになってしまいます。 Photoメソッドには、そもそも２バイト文字コードを含むファイル名の利用は出来ない仕様でしょうか。 その他、よい回避方法などがありましたら、お教えください。 よろしくお願い致します。
最近、テキストデータを整理する目的でperl勉強を始めました。perl を始まる前まで、プログラミングについて知識が全然ないので、ご教授よろしくお願い致します。 以下のような大量のデータを持っています。 1 a 1 b 1 c 2 d 2 e 2 f 2 g 3 h 3 i 3 j 3 k 3 l 4 m 4 n １列目の数字は文のID番号です。２列目単語です。目的は、同じIDを持っている単語対して単語IDを張ることです。例えば、 1 a １ 1 b ２ 1 c ３ のように同じIDを持っている単語に単語ID 張りたいのです。 よろしくお願い致します。
以前Perlを使用してみたく、ActivePerlをインストールしました。 その後、共有のPCということもあり、他の人が誤ってPerl5をインストールしました。 またActivePerlに切り替えたい場合、どのような方法がありますでしょうか。 さきほどActivePerlの同じバージョンを再インストールしようとしたら既にインストールされていますみたいなコメントがでてきました。。 どなたかご教授お願い致します。 OSはLinuxです。
vistaを使用しています。　 perlを勉強しようと色々調べてみましたが インストールが必要なものは ApacheとActivePerlだけでいいのでしょうか？ インターネット接続環境はあります。（ＡＤＳＬです） yahooジオシティーズもあります。 メモ帳も最初から入っています。 ご教授よろしくお願い致します。
漢字コードについて教えてください。 教えていただきたいのは、windowsでEUC-JPを使ってもいいのかということと、使ってもいいとしても何か制約とか問題が起きる事があるかどうかです。 お聞きしたい詳細は以下のとおりです。 現在は自分のホームページの更新の際に、ネットからデーターをダウンロードし、必要な情報を抜き出した上でデーター処理し、自分のホームページに載せています。 私のパソコンのOSはWIN XPですのでPERL はWINDOWS用のperlを使っています。PERLのプログラムはShift_JISで保存しています。 ダウンロードしてくるデーターはEUC-JPですので、いったんShift_JISに変換し、保存してあるPERLで処理しShift_JISとしてサーバーにアップロードしています。 この処理をもう少し簡単にするために、PERLのプログラム自体をEUC-JPで保存し、ダウンロードしたデーターをEUC-JPのまま処理、<META http-equiv="Content-Type" content="text/html; charset=EUC-JP"> としてサーバーにアップロードしたいと思っています。 自分の環境内では特に不具合はないようなのですが、何か問題になることはあるのでしょうか。よろしくお願いします。
僕はPICマイコン(16シリーズ)を趣味で使っており 言語はアセンブラを使っています。 で、質問なんですが最近ホームページを作りたくなり LINUXの勉強も含め自宅サーバーを立ち上げCGIをやってみようと思いました。 で、CGIといえばPealだろと思っていたので、その手の入門書や ネットの情報を見ると冒頭には大抵「大して難しくない」的な事が 書いてありました。 実際にやってみたんですがチンプンカンプンでした。 イメージとしては下記のような感じなんだと思うんですが マイコンのアセンブラと比べたらよっぽど低級言語な気がしてなりません。 アセンブラ＝低級言語＝人間にわかり難い C、C++等＝高級言語＝人間に解り易い アセンブラもはじめはチンプンカンプンでしたが、ある程度理解してしまえばそれなりに使いこなせるようになりました。 マイコンのアセンブラは命令数も少ないしイエスかノーだけで「もしも～」とかないので単純といえば単純なんですが・・・ 質問1 高級言語の「人間に判りやすい」っていうのは具体的にどういうことなんでしょうか？ 質問2 最近やたらとPHPが流行ってる気がします。 もうPealは廃れてしまったんでしょうか？
Perl初心者なのですが、壁に当たってしまいました。 <種類>シングル <解説>あいうえおかきけこさしすせそ <曲例>千年メダル <作者>ハイロウズ <曲例>人にやさしく <作者>ブルーハーツ <曲例>ニューグランドホテル <作者>矢沢永吉 <曲例>夏の終り <作者>矢沢永吉 <曲例>FLASH IN JAPAN <作者>矢沢永吉 <曲例>STAY <作者>氷室京介 <曲例>旅人 <作者>ブルーハーツ <種類>アルバム <解説>たちつてとなにぬねのはひふへほまみむ <曲例>DUG OUT <作者>ブルーハーツ <曲例>グレイゾーン <作者>ライムスター <曲例>HEAT ISLAND <作者>ライムスター <曲例>ウワサの真相 <作者>ライムスター <曲例>僕の話 <作者>スキマスイッチ <曲例>深海 <作者>Mr.Children <曲例>ケツノポリス2 <作者>ケツメイシ <曲例>ケツノポリス6 <作者>ケツメイシ <曲例>音樂ノススメ <作者>ハルカリ 上記のテキストを <種類>シングル <解説>あいうえおかきけこさしすせそ <曲例>千年メダル <作者>ハイロウズ <曲例>人にやさしく <作者>ブルーハーツ <曲例>ニューグランドホテル <作者>矢沢永吉 <曲例>夏の終り <作者>同上★ <曲例>FLASH IN JAPAN <作者>同上★ <曲例>STAY <作者>氷室京介 <曲例>旅人 <作者>ブルーハーツ <種類>アルバム <解説>たちつてとなにぬねのはひふへほまみむ <曲例>DUG OUT <作者>ブルーハーツ <曲例>グレイゾーン <作者>ライムスター <曲例>HEAT ISLAND <作者>同上★ <曲例>ウワサの真相 <作者>同上★ <曲例>僕の話 <作者>スキマスイッチ <曲例>深海 <作者>Mr.Children <曲例>ケツノポリス2 <作者>同上★ <曲例>ケツノポリス6 <作者>同上★ <曲例>音樂ノススメ <作者>ハルカリ といったように、 連続している<作者>を同上★に変えたいのですが、 配列？とかもよくわからなくて、 よい参考スクリプトの例があったらと、切に感じております。 なにか良い書き方がありましたら、勉強させてください。 よろしくお願いいたします。
「jcode.pl」というファイルはどこにUPすべきでしょう？ ただいまサーバー移転をしているのですが（サーバー移転は初めてです） 移転後、ひとつひとつファイルを確認していると「jcode.pl」というファイルを発見しました。 拡張子から、Perlで記述されたプログラムかな？と判断いたしました。 もしそうならば、サーバーで指定されているPerlのパスにしたがって移動させるべきでしょうか？ ちなみにこのファイルは、サーバーの（いじれる部分の）第2階層にはいっています。 Perlのパスは　/usr/local/bin/perl　です。 しかし、上記のパスの位置に、私が入って行くことは出来ません。 動かす必要はあるのでしょうか？ 当方初心者です。まとはずれな質問をしているかもしれませんが どうぞよろしくお願い致します。
Perl言語（再帰処理）を使ったハノイの塔の解き方を教えてください。 引数は3でお願いします。 他の言語での解き方は解説サイト等があるのですが、Perl言語の解説はあまり載っていないので是非教えてください。
cgiからsendmailを使用してメール配信しています。 今までは問題なく動作していたのですが、最近、一部のお客様でメールが届かなくなったそうです。 迷惑メールとして拒否されているようです。 以下、cgiからsendmailを使用して、zzzz@zzzz.or.jpからxxxx@xx.so-net.ne.jpへメールを飛ばした例です。 迷惑メールに勘違いされるようなところは無いと思いますが、どこか変なところがありますでしょうか？ 以下、見られてまずい部分は、****でマスクしています。 ■Perl(メール送信) if (!(open(OUT,"| $sendmail -t -i -f zzzz\@zzzz.or.jp"))) { &error; } print OUT "To: xxxx\@xx.so-net.ne.jp\n"; print OUT "From: zzzz mail<zzzz\@zzzz.or.jp>\n"; print OUT "Reply-To: zzzz mail<zzzz\@zzzz.or.jp>\n"; $mail_subject = &mimeencode($mail_subject); print OUT "Subject: $mail_subject\n"; print OUT "Mime-version: 1.0\n"; print OUT "Content-Type: text/plain\; charset=\"ISO-2022-JP\"\n"; print OUT "Content-Transfer-Encoding: 7bit\n\n"; &jis($comment); print OUT "$msg\n"; close(OUT); ■xxxx@xx.so-net.ne.jpが受け取ったときのメールヘッダー(Outlook Expressで確認） ■cgiで、zzzz@zzzz.or.jpからxxxx@xx.so-net.ne.jpへメール送信 Return-Path: <zzzz@zzzz.or.jp> Received: from [172.23.*.***] by ms78 with LMTP for <xxxx@xx.so-net.ne.jp>; Tue, 01 Dec 2009 12:45:58 +0900 Received: from www.zzzz.or.jp (www.zzzz.or.jp [210.166.**.**]) by imx01.ms.so-net.ne.jp with ESMTP id nB13jwqP028600 for <xxxx@xx.so-net.ne.jp>; Tue, 1 Dec 2009 12:45:58 +0900 (JST) Received: by www.zzzz.or.jp (Postfix, from userid 80) id A2B9D5A549; Tue, 1 Dec 2009 12:45:57 +0900 (JST) To: xxxx@xx.so-net.ne.jp From: zzzz mail<zzzz@zzzz.or.jp> Reply-To: zzzz mail<zzzz@zzzz.or.jp> Subject: =?ISO-2022-*********************?= =?ISO-2022-******************?= Mime-version: 1.0 Content-Type: text/plain; charset="ISO-2022-JP" Content-Transfer-Encoding: 7bit Message-Id: <20091201034557.zzzzzz@www.zzzz.or.jp> Date: Tue, 1 Dec 2009 12:45:57 +0900 (JST) 以上、よろしくお願いします。
a.txtに下記の内容が書かれています。 ----------------start <--add--> 第2回 Bについて 第1回 Aについて -----------------end $title[0]に第3回のタイトルが入っているので、 s/<--add-->/<--add-->\r$title[0]/ で置換して、「第3回 Cについて」を入れたいのです。 ただ$title[0]には「第3回 」がないので、 --------- Cについて 第2回 Bについて --------- となってしまいます。 第2回の数字をとってきてプラス1して、、か どこかに回数を保存しといて、、 という風に考えているのですが、どうすればいいかわからず困っています。 どなたか方法をご存知の方よろしくお願いします。
linuxのレンタルサーバーを使っているのですが、 root権限が無いためperlモジュールをhomeにインストールしました。 perlスクリプトからhome下にあるモジュールを呼び出すとき ef）lib use '/home/perl/'; use CGI; のように"lib use"を使うことなく 　 use CGI; だけでhome下のモジュールを呼び出すことはできないでしょうか？ 良い方法があれば教えてください。
CGIにてメールを送信しています。 Beckyや一部のWEBメーラーで見ると、本文も件名も正常表示されますが、一部のWEBメーラー(Chicappa)では件名のみ文字化けします。 例えば件名が「お問い合わせの受付」の場合 「 $B$*Ld$$9g$o$;$N<uIU (B」となります。 困っています。原因を教えてください。 ソースはutf8で保存しています。 use utf8; use MIME::Lite; use Jcode; my $msg = MIME::Lite->new( From=> $mail_from, To=> $mail_to, Subject=> jcode("お問い合わせの受付")->jis, Type=> 'multipart/mixed', ); $msg->attach( Type=> 'image/jpeg', Path=> "./picture.jpg", ); $msg->attach( Type=> 'text/plain; charset="iso-2022-jp"', Data=> jcode($mail_body)->jis ); $msg->send();
以下の処理がうまくいきません。 perlで実行すると以下の置換を行ってテキストファイルができるはずなのですが、0KBのテキストファイルができてしまいます。 そこで、手動で置き換えようと思ったのですが。 正規表現を使用した、置換処理を行っているということはわかっているのですが中の処理が分かりません。 詳しい処理の内容を教えていただけないでしょうか。 よろしくお願いいたします。 while(<>){ if(m#^(.+) /// (.+)$#){ $flg = 1; $word = $1; $text = $2; $line = $_; if($word =~ / /){ #熟語なら if(length($word) > 15){ $flg = 0; } elsif($word =~ /([A-Za-z]+) ([A-Za-z]+)/){ if(length($1) > 5 && length($2) > 5){ $flg = 0; } } } if($text =~ m#/#){ $text =~ s#/ .+##g; } } if($flg){ print $word.' /// '.$text."\n"; } }
HTML形式の本文からHTMLのタグを除去して、プレーンテキストのみを抽出するプログラムを作成していますが、うまく処理ができなくて困っています。 使用言語はperl，HTML::Parserを使用してプログラムを作成したいと考えています。 日本語の本文のテキスト抽出を行っているのですが、 うまく抽出できるものと文字化けするものがあります。 nkfモジュールを使用すれば解決できそうだと考え、試行錯誤しておりますが、うまく処理できていません。 perlテキスト処理に詳しい方がいらっしゃいましたら、 教えてください。 よろしくお願いいたします。
こんにちは．いつもお世話になっております． 簡単な質問で恐縮なのですが，ローカルサーバー上でメールを送ることは可能でしょうか？
お世話になっております。 Perl(プログラミング言語)について質問です。 openメソッドで開いたファイルハンドルに print文で書込みを行った際に、ファイルハンドルをcloseせずに、 書込みを反映させる方法はありますか？ 開くのはファイルではなく(他プロセスへの)パイプです。 $| を設定してもだめでした (例としては perl1.pl , perl2.pl を用意する <perl1.pl> $i; open(OUT,"| perl2.pl") while(1){ print OUT "$i" $i++　 } close(OUT) <perl2.pl> while( <STDIN> ) { print $_; } のようなことをやりたいです。 上記のようなスクリプトを実行したところ、 perl1のcloseが実行されるまで反映されません。 これをcloseをせずに反映させる方法はありますでしょうか？ よろしくお願いします。
DNA情報の解析でDNAに含まれる各塩基の数をカウントするperlプログラムを作りたいのですが、やり方が分りません。以下のような配列があったとして、 ATGCATGCATGCATGCATGCATGCAT このとき、A 7,T 7,G 6,C 6と出力されるようにしたいです。 次のようなperlを作ってみたのですが、 my(@bases, %count, $base); @bases = <>; foreach $base (@bases){ $count{$base} += 1; } foreach $base (keys %count){ print "$base $count{$base}.\n"; } この場合、@basesに入るのは元の1文なので上手く動かないと思うので、元の1文を1文字ずつ行に入れるといけると思うのですが、やり方がわからなくて困ってます。 助けてください。
お世話になっています。 今他人が作ったPerlのプログラムを見ているのですが、 その中で、 パラメータを受け取る部分が、、、 sub hogehoge { my $self = shift; my ($one, $two) = @_; .. bra bra bra } と言う感じになっています。 またPerl初心者ですが、私の調べたところでは、 この二つの行は同等の意味なので、 sub hogehoge { my ($self, $one, $two) = @_; ... bra bra bra } と一行でかけてしまうと思うのですが、 $selfと$one, $twoを2行に分けている理由とか あるのでしょうか。 $selfだけ2行目の方法ではかけないとか? それともただ単に、 my $self = shift; と1行目に書くのがならわしだからでしょうか。 詳しい方が居ましたらよろしくお願いします。
perlでhtmlを書き出しています。 そのhtmlにPHPを埋め込みたく思い、書き出されたhtmlにPHPを記述して phpとして保存。動作を確認しました。 perlで書き出している全てのページにこのPHPを埋め込みたく思い、perlの print <<EOF; ～ EOF の間に <?php ～ ?> を埋め込みましたが動きません。 当然の結果なのでしょうか…　何か方法があればご教示願います。　 下記のようなページも見つけましたが、コードをperlに貼り付けても 動作しません。直接貼り付けるのではないのでしょうか？ http://phpspot.org/blog/archives/2006/03/perlphp … どうぞ宜しくお願いします。
今回データベースの内容をRESTを用いて検索できるシステムの開発を行うことになりました。 かなり初歩的な質問になると思うのですが、サーバー側のプログラムをどのようにすればいいか皆目検討がつきません。 言語はperlを用いて書くつもりです。 URIは次のような形のものを受け取る予定です。 ttp://aaa.co.jp/search/query=???? もし、これが ttp://aaa.co.jp/search.pl?query=???? ならわかるのですが、前者のものだとどこでプログラムを指定しているのかわかりません。 乱文でわかりづらいとは思いますが、ご教授のほどよろしくお願い致します。
文字列操作についてご教示いただけますでしょうか。 特定文字列(FFF)を基準にして、次のFFFが現れるまでの行にFFFの行にある文字列を先頭に挿入したいと考えています。 エクセルだと簡単にできるのですが、行数が多いためperlで処理をしようと考えています。 以下のようなテキストを FFF あああ text1 text2 text3 ... FFF えええ text6 text7 text8 ... 以下のようにしたいと考えています。 FFF あああ あああ text1 あああ text2 あああ text3 あああ ... FFF えええ えええ text6 えええ text7 えええ text8 えええ ... どのような処理にするとよいでしょうか？ よろしくお願いいたします。
　perl初心者なのですが質問いたします。 自分のレンタルサーバーのメールアドレスに携帯から 写メールを送信してそのメールを MIME::Parser;を使って 画像と本文を取り出しpost送信してを自分のHPに出力で きるのではと思いスクリプトを書いてるのですが MIME::Parserの取ってきたデーターが素直に送れない 様なので悩んでおります。 流れ的にはNet::POP3で 　my $messages = $pop3->list(); foreach $id (sort (keys %{$messages})) { my $message = $pop3->get($id); ....... と$messageでメールを任意のディレクトリに保存して MIME::Parser;で$messageを解析してます。 #本文の取得 my $entity = $parser->parse_data($message); my $subject = $entity->head->get('Subject'); my $body_entity = ($entity->is_multipart) ? $entity->parts(0) : $entity; my $body = $body_entity->bodyhandle; my $bodylast = $body->as_string; #添付ファイルの処理 my $uploadFile = $entity->parts(1)->bodyhandle->as_string; # リクエストの生成 my $url = 'http://xxx.cgi'; my %formdata = ('perl' => 'rakuda', 'comment'=>"$bodylast",'upfile'=>"$uploadFile"); my $request = POST($url, [%formdata]); # UserAgentを生成して処理 my $ua = LWP::UserAgent->new; my $res = $ua->request($request); print $res->as_string; $pop3->delete($id); $pop3->quit; 一応送られてはいる様なのですが commentの部分は文字化けしてます、大元のレンタルサーバのソース をしらべると Content-Type: text/plain; charset="iso-2022-jp" Content-Transfer-Encoding: 7bit というエンコードがされてるようです。 そしてupfileの部分はxxx.cgiのチェック部分の 　　　　foreach (@in) { if (/(.*)Content-type:(.*)/i) { $content=$2; } if (/(.*)filename=\"(.*)\"/i) { $fname=$2; } 　　　　..... の部分でクリア出来ないようで設定したエラーがでてしまいます。 (因みにxxx.cgiはfirefoxやIEからは問題なくpostできます) レンタルサーバーの添付画像の部分のソースは Content-Type: image/jpeg; name="091108_1053~0001.jpg" Content-Transfer-Encoding: base64 Content-Disposition: attachment; filename="091108_1053~0001.jpg" となっておりbase64エンコードのようです。 調べてMIME::Base64;もレンタルサーバーにインストールされてたので　 my $uploadFile = encode_base64($uploadFile); ともしてpostしてみたのですが上のチェック部分のエラーが出てしまいます。 長くなってしまいましたが、MIME::Parserで取り出したcomment部分と upfile部分をどうにか正常に出力されるように送りたいのですが自分で はもう底です。 もしかしたら無駄に遠回りしてるかも知れませんが御教示していただけたら ありがたいです。
The AAA of claim １, wherein said BBB are CCC. AAAは英語で、日本語は甲とします。 BBBは英語で、日本語は乙とします。 CCCは英語で、日本語は丙とします。 上記英文を、 「前記乙が、丙である、請求項１に記載の甲。」 という日本語に置換したい場合、 数字の部分は、一桁または二桁の半角の数字であり、 単数複数があるため、CCCの直前はisまたはareであるとします。 どのように記述すればよいでしょうか？ なお、Perlの正規表現を前提とします。 変換対象：(.+)(AAA of claims?)([1-9][0-9]|[1-9])(\,)(.+)(said BBB)(are|is)(CCC)(\.) 　　　　　　/1 /2 /3 /4 /5 /6 /7 /8 /9 /1～/9は該当するタグです。 返還式　：前記/6が、/8である、請求項/3に記載の/2。 変換後（期待）：前記乙が、丙である、請求項１に記載の甲 ではうまくいかないようです。 ホントの初心者です。 どうぞ、よろしくお願いします。
perlのreadコマンドを使って超でかいファイルを途中までの分（下例では1G分）を一気に読み進めて途中から処理を進めたいです。 処理は下記コーディングで問題なく出来ているのですが、4行目のreadに結構時間がかかります。大量サイズを扱うのでしょうがないのかもしれないですが、もしかしたら、変数$bufに読み込まむから時間がかかるという部分があるなら、変数に読まずに1G分のデータをそのまま捨ててて、より高速化をはかることは可能でしょうか？（UNIXの/dev/nullに出力するみたいなイメージで。） +1|open (my $if, "< test.dat"); #超でかいファイルを開く +2|binmode($if); +3|my $buf; +4|read $if,$buf,1000000000; #--- 1G分、一気に進める +5|#--- 以降、読み進めたところから処理を進める。 ・・・
Perlに詳しいかたで、もしIE6を制御する方法をご存知のかたがいらっしゃい ましたら教えてください。 <環境> 自宅のWindowsXPにて、ActivePerlとIE6を使用しております。 先ず、Perlとは無関係に、IE6にて適当なページを表示させて 『ファイル』→『名前をつけて保存』 と実行しますと、htmlファイルの他に、そのhtmlファイルに使われている画像 データも保存されると思います。 そして、私の知っているPerlの記述で『getstore』というものがありますが、 この方法ですと、htmlのソースファイルはＤＬ出来るものの、画像データなど は保存されませんので、ＤＬしたhtmlを表示させても、画像のリンク先が無い というエラー表示になってしまいます。 別途IEの制御ソフトなどありましたらそれを仲介してでも構いませんので、 Perlで複数のＨＰを一括ＤＬ出来る方法をご存知でしたら教えてください。 IE6にて毎回『ファイル』→『名前をつけて保存』とするのが面倒なだけで 単純作業はバッチファイル化したいだけなのですけど、宜しくお願いします。
文法というか書き方がそもそもおかしいですか？ if($param{'query_price2'} and $param{'query_price1'}){ unless(($param{'query_price1'} <= $datas[32]) && ($datas[32] <= $param{'query_price2'} <= $datas[33])){ next; } unless(($datas[33] >= $param{'query_price1'} >= $datas[32]) && ($param{'query_price2'} >= $datas[33])){ next; } } elsif($param{'query_price2'} or $param{'query_price1'}){ if(!$param{'query_price2'}){ if($param{'query_price1'} > $datas[32]){ next; } } if(!$param{'query_price1'}){ if($param{'query_price2'} < $datas[32]){ next; } } }
フリーのCGI掲示板を使ってます。ディレクトリ内に複数のログファイルがあるので、一括して編集・削除ができるように管理部分を改造したいのでアドバイスをお願いします。 一応、readdir関数でディレクトリ内にある全てのファイル名を取得でることは分かりましたが、open関数で全てのファイルを読み取らせる方法がわかりません。 open DIR "./log"; @files = readdir DIR; close DIR; #以下、オリジナルのソースです。 open(IN,"$logfile") || &error("Open Error: $logfile"); while (<IN>) { my ($no,$dat,$nam,$eml,$sub,$com,$url,$hos) = split(/<>/); #途中略 } close(IN);
#をAに置換する場合 s/#/A/; というふうに考えますが、コメントアウトされてしまいます。 /を置換するときは\/でエスケープできるのですが、#の場合どうすればよいのでしょう？ また、////という文字列をAに置換する場合、 s/\/\/\/\//A/; というふうに書かなければならないのでしょうか？ 何かうまい方法はありますか？
CSVのデータを検索システムで、 例えば、 賃料　[30000]～[50000] と入力し検索した場合に [35000]～[52000]というデータも引っかかるようにしたいんですがどのようにすればいいんでしょうか？ 現在はこのようになってます。 if($param{'query_price2'} and $param{'query_price1'}){ if($param{'query_price1'} >= $datas[21]){ next; } if($param{'query_price2'} <= $datas[22]){ next; } } elsif($param{'query_price2'} or $param{'query_price1'}){ if(!$param{'query_price2'}){ if($param{'query_price1'} >= $datas[21]){ next; } } if(!$param{'query_tsubo1'}){ if($param{'query_price2'} <= $datas[22]){ next; } } $datas[21]、[22]は賃料のデータが入っている要素数です。 query_tsubo1、2は検索画面で入力したものです。 賃料：[30000(query_price1)] ～　[50000(query_price2)]
perlでできたCGIメールフォームをカスタマイズしていますが、テストをすると、自動返信されるメールに、結果が一部、2重に表示されてしまいます。 尚、inputからパラメータを渡して、送信メールに反映できるようにしたいのです。 何度も試してみましたが、解決できませんでした。 この原因を探るにはどのあたりを疑っていけば早いでしょうか。 ざっくりでもかまいません。ヒントをいただけたら大変助かります。 全コードは難しいので、 疑わしいと思うコードと、カスタマイズの際追加した部分のコードのみ以下に掲載します。 よろしくお願いします。 ======================================================== ～ foreach my $key ($in->param) { my @list = $in->param($key); $in{$key} = join('/',@list); } ～ ======================================================== ～ my $q = new CGI; my $item_name = $q->param('item_name'); # HTMLテンプレート パラメータ $tmpl->param( 'type' => $type, 'item_name' => $item_name, 'error_count' => scalar keys %{$error_list}, ); ～ ========================================================
Windows98でPerl5.6を使っていました。 Windows98でPerl5.8にする懸念事項を教えてください。
foreach (split(/<br>/i,$text)){ #処理 } 今までこのようにforeachでループさせていたのですがxhtml形式に順次対応させていこうと改変中です <br>も旧データの中に残った状態なので、<br>と<br />の両方でループするようにしたいのですが、どう書けばいいでしょうか foreach ((split(/<br>/i,$text)) || (split(/<br />/i,$text))){ #処理 } これじゃあまずいですよね？ 本来ならトライ＆エラーあるのみですが、ループの中が複雑な上にいろんなところに散らばっているデータの書き換えもしてしまうのでテスト用に改変することも大変で、トライ＆エラーをやるにも難しい状況なのでここはどうしても一発目で成功させたいのです。
エクセル（以下の図参照）でAとBのセルの内容が同じの時もしくは文字列の中に「？」マークがある時、Cのセルに「x」をつけたいのですが、マクロもしくはPerlのプログラムで自動的に処理する方法がありますか？あれば教えて頂きたいです。よろしくお願いします。 A B C 1 123ab 123ab x 2 abc acd 3 abcd ad?d? x 4 dog dog 　x 5 cat chat
C言語でいうところの構造体の配列（要素は"hoge"と"fuga"のみ）を perlで表現する場合、連想配列の配列にするのが一般的でしょうか？ 以下の様なソースコードなのですが、perlらしさが失われている気がします。 perlらしく書くとしたらどう書くのが良いでしょうか？ [ソース] @list; #この配列の要素に連想配列を入れる sub input{ #list.txtの中にはhogeとfugaの値がカンマ区切りで記入されている open(IN, "list.txt");　 $i = 0; while ($xx = <IN>) { ($list[$i]{"hoge"}, $list[$i]{"fuga"}) = split /,/, $xx; $i++; } close(IN); } sub output{ for($i = 0; $i <= $#list; $i++){ print $list[$i]{"hoge"}, $list[$i]{"fuga"}; } }
perl初心者です。 自分のwebサイトのコードを取得するプログラムをつくろう と思っているのですが、下のコード -------------------------------------------------------- #!/usr/local/bin/perl use LWP::UserAgent; use HTTP::Request; use HTTP::Response; our $URL = 'http://www.google.co.jp/'; # アクセスする URL my $proxy = new LWP::UserAgent; my $req = HTTP::Request->new('POST' => $URL); # HTTP リクエストを作成 my $res = $proxy->request($req); # $res に HTTP レスポンスが返ってくる print $res->content; # HTML を表示 1; --------------------------------------------------------------- でターゲットのurlが上のgoogleだと取得できるんですが 自サイトのurl'http://○○.××.△△.com/'だと 500 Internal Server Errorとなってしまいます。 因みにレンタルサーバーを利用しています。 サーバーでは技術的な質問は受け付けてないとの事なので、 スクリプトの質問とは少しズレますが分る方がいましたら ご教えていただきたく質問いたしました。
1 　　 　 378 2 　　　　97 3 　　　　1567 . 　　　　. . 　　　　. . 　　　　. というテキストファイルを 378,97,1567,.... という1行のcsvにするプログラムをperlでできませんか？教えてください！
おはようございます．毎回お世話になっております． IDを紛失してしまい，前回まででご回答いただいたのにも関わらず，返信できず申し訳ありませんでした； 今回は前回までの質問と結果を踏まえ，質問させていただきます． 私は現在ホームページの解析機能をいじっています． 解析機能のベースとなっているのは下記で配布されているものです． URL記載失礼します． http://www7a.biglobe.ne.jp/~wwwwww/analyzer/ 私の追加として，検索ワード解析機能（word,word2の部分）に新たにword3を設けて，word2までで分割された各単語を集計し表示させようと思っております． 現在検索ワードの表示はできているのですが，変数がマッチしていないためか，うまく集計してくれません． 以下に追加部分のコードを記載します． elsif($FORM{'mode'} eq "word3") { push my @search_words, $word; my %word_of = map {$_ => 0} @search_words ; foreach my $search_key ( keys %word_of ) { foreach my $words ( keys %word_of ) { $word_of{$search_key}++ if $words =~ /\Q$search_key\E/; } } foreach ( sort ( keys %word_of ) ){ print = qq[<table width="600"><td width="400">[$_ ]</td><td width="50"> $word_of{$_} 件</td><td with ="150"><img src="bar.gif" width=$word_of{$_} height=10></td></table>\n]; } } 初歩的なところで間違っている可能性もあるかもしれませんが，おわかりになりましたら，ご助力ください． 不明な点などございましたら随時お答え致します． よろしくお願いします．
連投申し訳ありません。 「まるごとPerl」（２００６年９月、インプレス刊）という本の「まるごとEncode」という記事に従ってEncodeの勉強をしています。 原記事は UNIX（というか端末コードをUTF-8に出来る環境）ですが、それをWindowsに移植しようとして苦労しています。 #! perl # list3 -- UTF-8モードとバイトモードの切り替え #　　　　　　インデントを表現するために全角空白を使っています use strict; use warnings; binmode STDOUT, ':encoding(cp932)'; # 追加 # ブロックの外側ではUTF-8文字単位で解釈される use utf8; { 　# ブロックの外側ではバイトモードが強制される 　use bytes; 　my $text = '漢字、カタカナ、ひらがなの混じったtext'; 　print Encode::decode('UTF-8', substr($text, 9, 12)); # カタカナと表示されたい } my $text = '漢字、カタカナ、ひらがなの混じったtext'; print substr($text, 3, 4); # カタカナと表示されたい __END__ というプログラムを実行すると C:\>list3.pl カタカナカタカナ と表示されてほしいのですが、 C:\>list3.pl Cannot decode string with wide characters at C:/strawberry/perl/lib/Encode.pm li ne 174. と表示されます。 use utf8 を後ろにズラして #! perl # list3 -- UTF-8モードとバイトモードの切り替え #　　　　　　インデントを表現するために全角空白を使っています use strict; use warnings; binmode STDOUT, ':encoding(cp932)'; # 追加 { 　# ブロックの外側ではバイトモードが強制される 　use bytes; 　my $text = '漢字、カタカナ、ひらがなの混じったtext'; 　print Encode::decode('UTF-8', substr($text, 9, 12)); # カタカナと表示されたい } # ブロックの外側ではUTF-8文字単位で解釈される use utf8; # 移動 my $text = '漢字、カタカナ、ひらがなの混じったtext'; print substr($text, 3, 4); # カタカナと表示されたい __END__ とするとうまく動いて C:\>list3.pl カタカナカタカナ と表示されます。 #! perl # list3 -- UTF-8モードとバイトモードの切り替え #　　　　　　インデントを表現するために全角空白を使っています use strict; use warnings; binmode STDOUT, ':encoding(cp932)'; # 追加 # ブロックの外側ではUTF-8文字単位で解釈される use utf8; my $text = '漢字、カタカナ、ひらがなの混じったtext'; # 移動 print substr($text, 3, 4); # カタカナと表示されたい # 移動 { 　# ブロックの外側ではバイトモードが強制される 　use bytes; 　my $text = '漢字、カタカナ、ひらがなの混じったtext'; 　print Encode::decode('UTF-8', substr($text, 9, 12)); # カタカナと表示されたい } __END__ のようにするとやはり最初と同じエラーになりますが、 #! perl # list3 -- UTF-8モードとバイトモードの切り替え #　　　　　　インデントを表現するために全角空白を使っています use strict; use warnings; binmode STDOUT, ':encoding(cp932)'; # 追加 # ブロックの外側ではUTF-8文字単位で解釈される use utf8; my $text = '漢字、カタカナ、ひらがなの混じったtext'; # 移動 print substr($text, 3, 4); # カタカナと表示されたい # 移動 no utf8; # 追加 { 　# ブロックの外側ではバイトモードが強制される 　use bytes; 　my $text = '漢字、カタカナ、ひらがなの混じったtext'; 　print Encode::decode('UTF-8', substr($text, 9, 12)); # カタカナと表示されたい } __END__ だと大丈夫です。 結果として、ブロックの外で use utf8;、中では use bytes; という記事の著者の意図通りに動作しないようで、ブロックの中まで use utf8; が効いているようです・・・。 これは Perl の実装が変わったのでしょうか。 使用しているのは Windows XP Home SP3＋Strawberry Perl v5.10.0 です。
フリーのCGI(perl)を改良中ですが、submitボタンからCGIに変数を渡せませんか？ ほとんど同じ内容で、少しだけ違う事を実行させたいので、submitボタンを二つ作って 　submit(1)なら$hogeにAを、 　submit(2)なら$hogeにBを与えてCGIに渡す。 と言うようなことをしたいです。 やはり別に書かないと不可能でしょうか？ 宜しくお願い致します。
配列の中に、同じ値があるかどうか、確認して、なければ データを渡すというようなプログラムを書きましたが、どうもうまくいきません.二次元配列が間違っているのだと思いますが、どこがいけないのでしょうか. my @databe=qw(aa:ee:rr:rr aa:rr:tt:aa dd:tt:dd:aa); my @nonumber=qw(ringo mikan tamago susi); my @check=();#not same contents my $p=0; my @array=(); foreach( @databe ){ my @f = split(/:/); my $i=0; foreach(@f){ push( @{$array[$p]}, $_); $i++; } $p++; } for(my $i=2;$i<$#nonumber;$i++){ for(my $p=0;$p<$#databe;$p++){ unless($array[0][$i] eq $array[$p][$i]){ push(@check, $i); } } } foreach( @databe ){ my @f = split(/:/); my %tmp; $tmp{GEBEN1}=$f[$check[0]];#html::template $tmp{GEBEN2}=$f[$check[1]];#html::template push( @alldata,\%tmp); } プログラム初心者です。自分なりに組んでみたのですがどうもうまくいきません. 分かる方御回答よろしくお願いします。
Perl初心者のため、stdio.plにある この関数のやっていることがよく分からず困っています。 sub searchString #($str, $key, $mhmode, $lc, $z2h, $k2h, $igmark) { local($str, $key, $mhmode, $lc, $z2h, $k2h, $igmark) = @_; local($once, $from, $to); #static $key2, $key3; return 0 if ($str eq "" || $key eq ""); if ($key eq $key2) { $key = $key3; $once = 1; } else { $key2 = $key; } if ($jcode'version) { if ($k2h) { $from = 'アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲンガギグゲゴザジズゼゾダヂヅデドバビブベボパピプペポゐゑァィゥェォャュョッ'; $to = 'あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわをんがぎぐげござじずぜぞだぢづでどばびぶべぼぱぴぷぺぽヰヱぁぃぅぇぉゃゅょっ'; } if ($z2h) { $from .= '０１２３４５６７８９ＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚ＋－＝＿｜＊！？”＃＄￥％＆＠：；'; $to .= '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+-=_|*!?"#$\%&@:;'; } if ($igmark) { $from .= '－ー・／＿　'; $to .= '------'; } if ($from) { &jcode'tr(*str, $from, $to); &jcode'tr(*key, $from, $to) if (!$once); $str =~ tr/-_\///d; $key =~ tr/-_\///d; } } if ($lc) { $str =~ tr/A-Z/a-z/; $key =~ tr/A-Z/a-z/ if (!$once); } $key3 = $key; if ($mhmode == 5 || $mhmode =~ /^BOOLEAN$/i || $mhmode =~ /^BLN$/i) { local($i) = 0; local(@str, $eval); $key =~ s/ +AND +/ & /gi; $key =~ s/ *NOT +/ ! /gi; $key =~ s/ +OR +/ | /gi; $key =~ s/\( +/(/g; $key =~ s/ +\)/)/g; foreach (split /( & | \| )/, $key) { $str[$i] .= $_; $i ++ unless ($_ eq ' & ' || $_ eq ' | ') } for ($i = 0; $i <= $#str; $i ++) { local($option, $open, $close, $find, $not, $key); $key = $str[$i]; if ($str[$i] =~ /^( & | \| )/) { $option = substr $key, 0, 3; $key = substr $key, 3; } $open = $1 if ($key =~ /^(\(+)/g); $close = $1 if ($key =~ /(\)+)$/g); $key =~ s/\(|\)//g; if ($key =~ /^ *! +/) { $key =~ s/^ *! +//g; $not = 1; } $find = index($str, $key) >= 0 ? 1 : 0; $find = $find ? 0 : 1 if ($not); $eval .= "$option$open$find$close"; } $eval =~ s/ & /*/g; $eval =~ s/ \| /+/g; return (eval $eval >= 1) ? 1 : 0; } elsif ($mhmode == 4 || $mhmode =~ /^NOR$/i) { foreach (split / +/, $key) { return 0 if (index($str, $_) >= 0); } return 1; } elsif ($mhmode == 3 || $mhmode =~ /^EOR$/i) { local($flag) = 0; foreach (split / +/, $key) { if (index($str, $_) >= 0) { return 0 if ($flag); $flag = 1; } } return $flag ? 1 : 0; } elsif ($mhmode == 2 || $mhmode =~ /^OR$/i) { foreach (split / +/, $key) { return 1 if (index($str, $_) >= 0); } return 0; } elsif ($mhmode == 1 || $mhmode =~ /^NAND$/i) { foreach (split / +/, $key) { return 1 if (index($str, $_) == -1); } return 0; } else { foreach (split / +/, $key) { return 0 if (index($str, $_) == -1); } return 1; } } これを呼び出しているのが、別ファイル内の以下の部分です。 foreach(@datafile){ if($datafile[0] eq $_){ next; }# 1行目は項目名なので next if($param{'query_word'}){ unless(stdio::searchString($_, $param{'query_word'}, $param{'query_search_type'}, 1, 1, 1, 1)){ next; } } push(@search_file,$_); } datafileは 名前,住所,電話番号, 吉田,東京都渋谷区,03xxxxxxxx, といったデータファイルです。 よろしくお願いします。
本のタイトル名を忘れたのですが、とある本の中でpngとgifをブラウザで直接アクセスする(http://hoge.com/hoge.gif)とpngとgifのコメント部分に埋め込まれた悪意のスクリプトが実行される可能性がある。そのため、ユーザからファイルをアップロードされたものを表示するシステムを作るときは、png,gifをjpegに変換し、png,gifに埋め込まれたコメントを消去、その後、元のpng,gifに再変換して戻すといった処理が必要だ、みたいな文章をみたことがあります。 ごく最近この文章を思い出し、そういえばホントのところどうなんだろと思い関連する記事をWEB上で検索したのですが、なかなか目的の記事に辿り付けません。 このpngとgifのコメントが危険という現象は有名なんでしょうか？あまり聞いたことがないし、png,gifをブラウザで表示して悪意のスクリプトが実行された云々の記事も見かけません。関連する参考記事があればURLを教えて頂けないでしょうか。お願いします。
PDFJで配列ブロック（HV）を作ったのですが、そのブロックの全高を調べるheightsメソッドの使い方がよくわかりません。 試しに３行がそれぞれ14、32、65pixelのHVブロック$block1を作り、 $takasa = $block1->heights; としたら、「143265」と返ってきました。 14+32+65の合計（111）の値は どうやったら調べられるのか、どなたか教えていただけないでしょうか。 Matrix.pmあたりを見てもよく解りません； 単に勉強不足なんですが...どうかお願いします。
Perlの中でバッチを実行するとき引数につける中括弧の意味がわかりません。 ---例--- system "$bat $a ${a}"; batにはバッチの実行するバッチのパス、aには数値が入っているとするとaと{a}はなにが違うのでしょうか。 ご教授お願い致します。
a,b,c,d 1,2,3,4 5,6,7,8 以上のような配列のデータを読み込んだときに、 c 3 7 のように縦の列のデータを抜き出すプログラムを考えています。 これはどのように記述すればよいでしょうか。 二次元配列はperlでは不可能と言うことであまりperlでは難しいでしょうか。
perl で 文字列を split で処理する時に、" や ' で挟まれた領域を一つの文字列として処理するにはどうやったらよいのでしょうか？ たとえば $aaa = "aaa bbb 'c d e' fff"; @aaa = split(/ /, $aaa); だと、 aaa bbb 'c d e' fff となってしまいますが、 aaa bbb 'c d e' fff となるようにするにはどうするのでしょうか？
お世話になります。 sprintfを使って編集しています。 ３桁で統一したいため、 $trm01 = sprintf("%3d",$trm01); のようにやっています。 $trm01が０の場合、３桁のスペースとしたいのですが。 宜しくお願いします。
perl初心者です。よろしくお願いします。 間違えてcpanのftp_proxyを設定してしまいました。 内容の削除をしたいのですが ウェブで検索をかける限り、変更の方法しか見つかりません。 何か方法はありますでしょうか？
Perlで、<select multiple>のデータを取得する方法を教えてください。 以下のように複数選択できるselectタグがあります。これで送信したデータを Perlで受けると、ARRAY(0x9bf0d18)のようになってしまいます。 環境は、以下のとおりです。（必要な部分だけ記載しています） ■送信元のHTML <select name="test" size="3" multiple> <option value="a">a <option value="b">b <option value="c">c </select> ■受け側のPerl use CGI_Lite; my %in = $cgi->parse_form_data(); print"Content-type: text/html\n\n"; print"$in{'test'}\n"; ■結果 ARRAY(0x9bf0d18) 以上、よろしくお願いします。
複数のドメインを運用しています。 ドメインが違うため、同じレンタルサーバーの会社ですが、サーバーのマシンも別でファイル管理も別々の状態です。 つまり完全に他人同士のドメインという状態ではありますが、他ドメインのファイルが存在するか確認する方法を教えてください 同一ドメイン内であれば、相対パスでstatの[7]とか-fでファイル確認できるようですが、試しに絶対パスを入れてみましたが予想通りというか何も返ってきません。 ファイルサイズであったり、中身の取得は必要ありません。 単にファイルが存在するかどうかだけ確認できればいいのですが、ドメインを分けてしまっているために相対パスが使えません。 書きながら思いましたが、他サイトのファイルの存在確認となると悪用できるかもしれないので、やはりこういったものは存在しないのでしょうか。 とはいっても制限されているＵＲＬ内のファイル確認ではなく普通にインターネットで閲覧できる状態のものを確認したいだけなのですが
FFFTPではサーバーにアップロードしたファイルを属性変更できるのですがコマンドプロンプトでは属性変更できないのでしょうかできるのだったらどんなコマンドを使えばできるのでしょうか
　<input type="checkbox" name="id" value="0"> 　<input type="checkbox" name="id" value="1"> 　<input type="checkbox" name="id" value="2"> 　<input type="checkbox" name="id" value="3"> のようなフォームのキーと値を、CGIの方では%inで受け取ります。 まずCGIモジュールを用いてキーと値を$keyと$valに格納したのち、idというキーは４つの値を受け取るので、 　foreach my $key ($q->param()) { 　　my $val=$q->param($val); 　　if(defined($in{$key)) { 　　　$in{$key}.="\0"; 　　} 　　$in{$key}.=$val; 　} 私のイメージでは、この処理で 　$in{'id'}="0\01\02\03"; が得られるつもりでした。 ところが実際には$q->param('id')で取り出せるのは最初の"0"のみで、したがって得られる結果は 　$in{'id'}="0"; となります。 CGIモジュールを使わなければ、 　my $buf; 　if(ENV{'REQUEST_METHOD'} eq "POST") { 　　read(STDIN,$buf,$ENV{'CONTENT-LENGTH'}); 　} 　else { 　　$buf=$ENV{'QUERY_STRING'}; 　} 　 　foreach(split(/&/,$buf)) { 　　my ($key,$val)=split(/=/); 　　 　　if(defined($in{$key)) { 　　　$in{$key}.="\0"; 　　} 　　$in{$key}.=$val; 　} のようにして、イメージ通り 　$in{'id'}="0\01\02\03"; を得られますが、CGIモジュールは他でも使うので、どうせならCGIモジュールを使った簡便なコーディングが出来ないものかと思案する次第です。 しかしながら私に思いつく方法は 　<input type="checkbox" name="id0" value="0"> 　<input type="checkbox" name="id1" value="1"> 　<input type="checkbox" name="id2" value="2"> 　<input type="checkbox" name="id3" value="3"> として、まずCGIモジュールを用いた上記の方法で$in{'id0'}～$in{'id3'}までを生成し、次に 　if(/(\w+)\d/) { 　　if(defined($in{$1})) { 　　　$in{$1}.="\0"; 　　} 　　$in{$1}.=$val; 　} とやる方法しか思いつきません。 チェックボックスを用いて複数回答を得るというのはよくある話なので、CGIモジュールにもっと良いコーディングの仕方がありそうな・・・と思ってしまうのですが、これが最善の方法なのでしょうか？
PerlでCGIを作成中、ふと疑問に思ったことがあるので質問します。 例えばCGIで重い処理、またはsleep等の時間がかかる処理が走ったとします。 この際、処理中にブラウザを閉じる、または別のサイトに移動する等を行った場合、処理は中断されるのでしょうか？それともサーバサイドで最後まで実行されるのでしょうか？ 基本的な質問かもしれませんが、よろしくお願いします。
こんにちは、Perl入門者ですがよろしくお願いします。 質問内容はループ中にmy宣言をいちいちすると処理速度は落ちてしまうのかということです。 ソースを例に挙げると まず、$lenをループの外に書く方法と my $i; my $len; for( $i=0 ; $i<1024 ; $i++){ $len = length($str[$i]; } $lenをループの中に書く方法 my $i; for($i=0 ; $i<1024 ; $i++){ my $len; $len = length($str[$i]); } の2種類です(その他の変数については特に言及していません) 使いやすさでいえば、ループ内で宣言をした方が自動的に初期化されるのでうれしいのですが ふと、いちいちメモリの解放と確保を行っているわけですからＯＳ(？)に負荷がかかって遅くなっているのではと考えました。 Perlで処理速度を測ることもできるようですが恥ずかしいながらスキル不足です。すいません。 どなたかご存知の方、自分なりの考えがある方はご教授頂きたく存じます。 よろしくお願いします。
申込フォームを作り、cgi(perl)で送信するのですがperlの中のhtml言語の中でjavascript を使用することは可能ですか
perlにて配列の要素を下のように縦書き表示をするのに、 1文字ごと配列に保管して、2次元配列で表示する方法を思いついたのですが、 perlの知識が浅いもので、もっとスマートなスクリプトがありましたらぜひとも教えて下さい？ @aaa = ( "1234", "ABCDE", "XYZ" ); [出力結果] A 1B 2CX 3DY 4EZ ("A"の左右と、Bの右にはブランクが入っています。)
Perlをインストールして勉強し始めて数十分のものです (まだ一時間経っていません)。いま、超簡単なサンプルで勉強中です。 環境はWinにActivePerlをインストールして、 コマンドプロンプトを立ち上げ「Perl ファイル名」とし実行しています。 これをファイルのダブルクリックで実行できるようにしたいと思っています。 というか実際には実行だけはできるのですが、一瞬で終わってしまい 結果の確認が出来ません。これを処理待ちさせて確認できるように したいのですが、その方法が分かりません。 DOSバッチのpauseとかに相当するものです。 今は分からないので、無限ループで代用していますがショボすぎます。 …と書いているうちに標準入力待ちをするコマンドが分かったので それを使うようにしました。少しはましになりましたが、 より正統な方法を知りたいです。 あと、一定時間待つコマンドもあとで使うようになるかも しれないのでこれもあわせて教えてください。 ・普通の処理待ちコマンド ・一定時間待つコマンド これを教えてください。よろしくお願いします。 $xx = 7; print "答は$xxです\n"; print '答は$xxです\n'; print "\n\n"; print "何か押してください"; $aa = <STDIN>;
はじめて質問です。失礼があったらご容赦ください。 じゃらんAPIのRESTで取得したXMLデータを、単にテキストで 書き出したいのですが、どうしても文字化けしてしまいます。 いろいろ試したのですがどうしても駄目でした。 以下がそのスクリプトです。 どなたかご教示いただければ幸いです。 （作業環境：Windows XP / Perl5.8） use encoding 'utf8'; use Encode; use LWP::Simple; my $key='xxxxxxxxx'; my $url="http://jws.jalan.net/APILite/HotelSearch/V1/?key … my $data=get($url) or die; open W,'>:utf8','MyNouhin.txt' or die; print W $data; close W;
print で書き出したHTMLのページの下に、そのページのソースを表示 しようと思っています。 $source .= "<html><head><title><title></head><body>\n"; $source .= "ソースを表示</body></html>\n"; print "$source\n"; #-------------------------- $source =~ tr/</&lt;/; $source =~ tr/>/&gt;/; #-------------------------- print "<br><div style=\"overflow:auto; width:550px; height:300px\"> $source </div>\n"; あたり前ですが、これだと「<」「>」は「&」になってしまいます。 「<」を「&lt;」に「>」を「&gt;」に変更する方法を教えて頂きたくお願い致します。
YFHのURLを7万件もっているのですが、リンクリストからまとめてIPアドレスを抽出する方法はありますか？
Perlで作成したCGIの中で、JavaScriptのファンクションを使っていますが、この計算結果をPerlに取込みたいのですが、うまくできません。基本がわかっていないので、よろしくご教授お願いします。
こんばんは，お世話になっております． foreach文を現在使っているのですが，決められた回数表示することは可能でしょうか？ それとも，リストが終わるまでループを繰り返してしまうのでしょうか？ 初歩的な問題かもしれませんが，よろしくお願いします．
登録してもらった会員に対して メルマガの配信を行うプログラムをPerlで組みました。 始めはエラーメールが返ってくるのは１％くらいでしたが、 何もプログラムを変更していないにもかかわらず、 エラーメールの割合が1割になったり、2割ほどになったり 配信するたびに状況が違います。 プログラムが原因か、サーバが原因かがわからず、 このような症状に心当たりのある方がいらっしゃいましたら、 可能性として何が考えられるか教えていただいてよろしいでしょうか。 急激に会員数が増えたり減ったりということもありません。 数人に配信する場合は正常に送信できています。 よろしくお願い致します。
$VAR1 = [ 'No', 'a', 'i', 'u', 'e', 'o', ]; #VAR1と同じ数の<>区切りの下記のようなデータを読み込み配列に代入 --List----------------------- 1<>あ<>い<>う<>え<>お<> ------------------------- foreach(0..$#List){ @Array=split(/<>/,$List[$_]); } 最終的なイメージは print "$a{No}"; >1 print "$a{a}"; >a となるよう、上記VAR1の無名配列の値をキーに、読み込んだ<>区切りのデータを関連付けて表示させるようにしたいのです。 foreach my$var(@$VAR1){ ...ここをどうすれば配列の値をハッシュのキーとして作成出来るのか頭を悩ませてます。 } 先輩方のお知恵をお借りできませんでしょうか。 宜しくお願いします。
集計を行いたいテキストデータとして、以下のようなものがあります。 あいうえお かきくけこ さしすせそ あいうえお かきくけこ EOS かきくけこ さしすせそ さしすせそ あいうえお さしすせそ EOS あいうえお かきくけこ かきくけこ かきくけこ さしすせそ EOS このデータに対して、EOSが出現するまでを一つのグループとして重複する文字列の集計を行いたいです。 EOS毎に繰り返し処理を行えば良いのではないかと考えてはいるのですが、そのプログラムがどうしても作れません。 最終的な集計結果としては、 あいうえお 2 かきくけこ 2 さしすせそ 1 さしすせそ 3 あいうえお 1 かきくけこ 1 かきくけこ 3 あいうえお 1 さしすせそ 1 というようにしたいです。 よろしくお願いします。
おはようございます。いつもお世話になっています。 今回は解析機能の拡張についてお聞きしたいと思います。 解析機能については、かんたん作成.comさんのcgiをお借りしました。 http://www7a.biglobe.ne.jp/~wwwwww/analyzer/ これをベースに、検索ワードの集計機能を追加しようと思っております。 word1、word2に検索ワードの表示・分割がありますが、新たにword3を設けて分割されたものを集計し、表示する処理をしたいです。 集計については、前回までで教えていただいた正規表現を用いて自ら組んでみたのですが、変数が一致していないせいか上手く表示できません。 以下に検索ワードを処理しているプログラムを記載します。 elsif($FORM{'mode'} eq "word1" or $FORM{'mode'} eq "word2" or $FORM{'mode'} eq "word3") { #検索ワード my ($n, $pair, $word); if($referer =~ /\?/) { my ($url, $query) = split(/\?/, $referer); for($n = 0 ; $n < @search ; $n++) { if($url =~ /$search[$n][1]/) { foreach $pair (split(/&/, $query)) { my ($key, $value) = split(/=/, $pair); if($key eq $search[$n][2]) { $word = $value; last; } } last; } } if($word) { $word =~ tr/+/ /; $word =~ s/%([0-9a-fA-F][0-9a-fA-F])/chr(hex($1))/eg; if($FORM{'mode'} eq "word1") { ++$freg{$word}; } elsif($FORM{'mode'} eq "word2") { my $word2; $word =~ s/\x81\x40/ /g; foreach $word2 (split(/\s+/, $word)) { if($word2) { ++$freg{$word2}; } } } #=====================================================================EDIT elsif($FORM{'mode'} eq "word3") { my %word_of = map {$_ => 0} %freg; foreach my $search_key ( keys %word_of ) { foreach my $word ( keys %word_of ) { $word_of{$search_key}++ if $word =~ /$search_key/; } } foreach ( sort ( keys %word_of ) ){ print "<table><tr><td>「$_」 </td><td> $word_of{$_} 件</td></table>\n"; } } #=====================================================================END } } } } word3の項目が現在私が編集している部分です。 プログラム全体を通して、私自身が望む動作を可能とする部分の追加は行ったと思うのですが、見落としている点があるかもしれません。 また前述したように、変数が一致していないのかもしれません。 おかしな点に気づかれたら、お手数ですがお教え願えますか。 もしかしたら初歩的なミスをしているかもしれませんが、よろしくお願いいたします。 不明な点などございましたら、随時対応します。 ここでは書ききれないため、現在編集中のcgiファイルを添付データとして貼り付けておきます。
既に作ってあるHTMLファイルをコピーして、CGIファイルの名前を変えて送信ボタンをクリックしました。CGIファイルはTITLEだけの記述にしましたが、TITLEは表示されず、http://～のようにアドレスが表示されます。HTMLファイルの方は、<form action="./A.cgi" method="post">のように修正し、CGIファイルの方には、以下のように記述してあります。何が原因でTITLEが表示されないのでしょうか？ #!/usr/local/bin/perl use CGI qw(:standard); print<<END_OF_HTM; Content-type:text/html <HTML> <HEAD> <TITLE>XXXXXX</TITLE> </HEAD> </HTML> END_OF_HTM
Excelで保存したCSVファイルからcsv2wiki.plを用いてMediaWikiに新しいページを作っているのですが、英語だと上手くいくんですけど、日本語だと文字化けしてしまいます。これはExcelがSJISでしか保存できないのと、MediaWikiのエンコーディングがutf8なのが原因なんですが、csv2wiki.plにSJISから、UTF8に変更するような関数を入れれば直ると思います。ただ、ググってみるとjcode.plとかPerl 5.8ではEncode.pmとか、わけの分からない言葉がたくさん出てきます。PHPみたいにmb_convert_encoding($a,"SJIS","UTF8");みたいに簡単に使える関数はありますか？
open MAIL,"| $sendmail $mailto"; に"|"がありますが、どういう意味でしょうか？
param("X")はラジオボタンなのですが、 unless(param("X") eq "A" and "B" and "C") とすると"A"をクリックしてある場合は、Falseになるのですが、 "B"または"C"にクリックしてある場合は、Trueとなります。 "B"または"C"をクリックしてある場合も、Falseにするには、 どのように記述するのでしょうか？
登録したデータを検索するPerlを制作しています。 #$in{word}は入力されたキーワードで、半角スペースまたは全角スペースでキーワードを分割 @word = split(/\s|　/,$in{word}); $count = @word; #@dataは検索対象となるデータ foreach $data (@data){ 　$a = 0; 　while ($a < $count){ 　　if($data =~ /$word[$a]/){ 　　　push(@query, $data); 　　　last; 　　} 　　$a++; 　} } こんな感じでAND検索できるようにしてみたのですが、エラーになります。 Perlチェックをかけてみると構文はＯＫと出ます 複数語、つまりＡＮＤ検索でなく１つの言葉（@wordが1つだけ）の場合はうまくいきます また、逆にif($data =~ /$word[$a]/){をなしにしてやれば(これをはずすと検索にならず全ヒットになりますが)複数ワードでも正しく表示されます $aや$count、@word、$word[$a]などが正しくできていないのかと思い、それを表示させて確認してみましたが、きちんと代入され、やりとりできているようなのですが、どこに問題があるのでしょうか。 数日間ネットで調べ、色々試し、本も開いて色々検証しましたがどうしてもわかりません。 間違いをご指摘ください ＰＳ　プログラム部分の右へインデントしているところは半角スペースやタブだとこのページでは無視されるようなので、見やすくするため全角スペースでずらしていますが、実際のプログラム中ではここに全角スペースなんぞ使っておりません
このコマンドをCGIにのせて、どうにかユーザーIDを取り出そうと思ったのですが、 何もかえってきませんでした。もしかすると、WEBアプリケーションからはだれが使用してるか分からないからですか? パソコンのユーザーIDをCGI上に表示したいなと思っています。(パソコンにログインするときにでるIDです.) 質問の仕方がへたですいません。 よろしくお願いします。
$a=123という値が入ってきた場合@A=(1,2,3)、 $a=1234の場合@A=(1,2,3,4)という配列変数にしたいと思います。 どのように記述すれば良いのでしょうか？
<html>～</html>の中に複数のperlスクリプトは書けるのでしょうか？ htmlファイル1つの中には、<html>～</html>は1つだと思うのですが、 phpだと<?php>～<?>とすれば、<html>～</html>の中に複数書けるみたいですが、perlでも書けるのでしょうか？
コマンドプロンプトからperl a.cgi find Aと入力して テキストファイルにA,B,Cが存在した場合、 Aが存在するので、A,B,Cと出力する というロジックにしたいのですが、 if(!exists($HA{$ARGV[1]})){ print "$HA{$ARGV[1]}; } を実行すると、,B,Cとなります。 print ??; の??に、どのように書けば、A,B,Cと出力するでしょうか? $HA{$ARGV[1]}は、キーでAのつもりです。 $HAにはA,B,Cが入っているつもりです。
コマンドプロンプトから　A B C D　と入力した場合、テキストファイルに B,C,Dと書きたいのですが、下記のように一行で書きたいのですが、??には、どのように書けば良いでしょうか? $tmp{$ARGV[1]}はキーで、Bの部分です。 $tmp{$ARGV[1]}=??; ??を、",@ARGV"とすると B,A B C D という結果になります。
Perl初心者です。 CGIモジュールを用いてWEBサイトを制作しています。 特定の条件に応じて他のページに処理を委譲したいのですが、 どのようなやり方が一般的なのかを教えて頂きたいです。 requireを使えばそれらしいことが出来ますが、 他に何かやり方がありますでしょうか。 フレームワークなどは用いていません。
パソコン(Windows XP)にActive_Perl Ver5.8.0をインストールしてPerlスクリプトを動かしています。 入力フォームのデータを受け取って処理するスクリプトが既にあるのですが、このスクリプトに入力フォームと同種のデータをループさせて繰り返し送り込むスクリプト作りたいと思っています。 やり方もしくはコード例を教えていただければと存じます。 よろしくお願いいたします。
とても一般的な質問になりますが、 そこそこ規模の大きな(目標会員数一万人)会員サイトをPerlで構築しようとしています。 問題はデータベースへのアクセス負荷なんですが、 ひとつのテーブルのレコード数が100万行ぐらいになると思います。 一般的なホスティングサーバを利用してデータベースはMySQLです。 「大規模なデータベースシステムはJAVAサーブレットが向いている」と言う話をよく聞きますが、上述のような規模のサイトは(Perl or PHP)+MySQLでは難しいのでしょうか? 出来たらPerlで通してみたいと考えております。 ご意見、ご指導よろしくお願いいたします。
アマゾンの評価のようなものを作ろうとしています。 複数の人から★５段階で評価入力してもらい、★の場合は１点、★★の場合は２点として計算します。 平均を出し、例えば平均が１以上２未満の場合は、★ 平均が４以上５未満だった場合は、★★★★として表示します。 この方法で計算した場合、評価する全員が★★★★★を付けた場合のみ、平均も★★★★★になります。 かなり辛口な気がしますが。 満点が出る確率が非常に低くなるような気がしますが、 普通は、このような場合どうやって計算するのでしょうか？ 1 <= 平均 < 2　★ 2 <= 平均 < 3　★★ 3 <= 平均 < 4　★★★ 4 <= 平均 < 5　★★★★ 5 == 平均　　　★★★★★ よろしくお願いします。
perlでパーミッションの変更を使おうと思っているのですが、うまくいきません。 chmod(0750,$file);ではただしく実行されるのですが、 $per = "0750"; chmod($per,$file);にすると、0356になってしまいます。 なぜ変数ではできないのでしょうか。 よろしくおねがいします。
こんにちは。macでperlを使用しています。 実は、 mkdir $file , $in{"per"}; を使用してパーミションを設定するのですが、パーミッションが全く違う出力をします。 $in{"per"}が0777のとき、dr----x--x $in{"per"}が0755のとき、d-wxr----x になってしまいます。 調べてみてumask 0;にすると良いと書いてあり、試してみましたがだめでした。 どのように対処すればよいでしょうか。 お願いします。
正規表現で、文字数は４文字ですが、そのうち１つでもaがあれば マッチするということで、1～3まではマッチし、 4はa無しなのでマッチせず、5は4文字でないのでマッチしない ような正規表現は書くことは可能でしょうか？ 1) aaaa 2) ajjj 3) kaoa 4) jjjj 5) axxxx
最近、bluehostというレンタルサーバでcatalystを使った開発を始めました。 毎回CGIとして実行するのでは重すぎるので、modperlを使う事を考えましたが、このレンタルサーバではFastCGIしか使えないと言われてしまいました。 httpd.confの設定やapacheの再起動も出来ません。 ヘルパーで作成された myapp_fastcgi.pl を使いたいのですが、そちらにアクセスさせただけでは毎回実行されてしまいます。 .htaccessの設定でしょうか。
Perlのメタ文字（選択）に"|"がありますが、どのように読むのでしょうか？
Windows-XP上でActivePerl/5.8.8を利用しています。 テキストファイルなどで、ある文字列が現れた行から、ある文字列が現れるまで、 ということを判定させるときに、範囲演算子が使えるということを知りました。 while(<>){ 　　　　chomp; 　　　　if(/^START$/ .. /^END$/){ # 範囲指定 　　　　　　　　・・・ 　　　　　　　　STARTの行から、ENDの行までこのブロックに入る 　　　　} } １ファイルに対してだけ処理させるときは上手く行くのですが、 連続して複数のファイルを処理させようとすると、 ２番目のファイルからは、開始条件（/^START$/）が既に成立したと 判断されてしまうようで、該当行が現れていないのに、ifブロックに 入ってしまいます。 foreach(@ARGV){# 複数ファイルに対して処理させる 　　　　open(FH,$_) || die; 　　　　while(<FH>){ 　　　　　　　chomp; 　　　　　　　if(/^START$/ .. /^END$/){ # 範囲指定 　　　　　　　　　　　・・・ 　　　　　　　　　　　１つ目のファイルではSTARTの行から、ENDの行まででこのブロックに入るが、 　　　　　　　　　　　２つ目のファイルではSTARTの行が現れないうちからこのブロックに入ってしまう。 　　　　　　　} 　　　　} close(FH); } これを２つ目のファイル以降も、範囲指定の開始条件が成立していない 状態から処理させるためには、どのようにすれば良いでしょうか。 よろしくお願い致します。
requireされる側のファイルに、 $name = "Ａ"; などと特定の文字Ａ（仮に）を変数に代入しておくと、requireしたときにScript Errorになります。この１行というより、この文字Ａを消すだけでエラーは解消されるのですが、これはどういう理由からでしょうか。 特殊な文字ではないので、よくわかりませんでした。
お世話になります。 2006年に発行された「まるごとPerl」というムックの「まるごとEncode」という記事を見て Perl の日本語処理の勉強をしています。 本記事は Perl5.8 対象と思われますが私は Strawberry Perl 5.10.0 を Windows XP SP3 で使っています。 #! perl # list1 -- 日本語の文字を1文字として解釈（UTF-8で保存） use strict; use warnings; use utf8; my $text = '漢字、カタカナ、ひらがなの混じったtext'; print substr($text, 3, 4); というサンプルコードがあって、実行結果は「カタカナ」になると書いてあります。 要するに substr 関数が use utf8; によってバイト単位ではなくて文字単位で効くようになるので、４文字目から４文字が正しく取ってこられるという実験ですが、Windows の DOS 窓で実験すると、当然端末コードは Shift_JIS というか CP932 ですので、 Wide character in print at C:\Marugoto\list1.pl line 8. 繧ォ繧ソ繧ォ繝 となります。 そこで、上のコードに binmode 関数を足して、 #! perl # list1 -- 日本語の文字を1文字として解釈（UTF-8で保存） use strict; use warnings; use utf8; binmode STDOUT, ':encoding(cp932)'; # 追加 my $text = '漢字、カタカナ、ひらがなの混じったtext'; print substr($text, 3, 4); とすると正しく動作しました。 次に、 #! perl # list2 -- 1オクテットを1文字として解釈（UTF-8で保存） use strict; use warnings; my $text = '漢字、カタカナ、ひらがなの混じったtext'; print substr($text, 9, 12); というリストがあって、今度は use utf8; がないのでバイトモードで使う（substr 関数は 9 バイト目から 12 バイトを取ってくる。UTF-8 は全角日本語文字が１文字３バイトなので）という実験ですが、これもそのまま DOS 窓で実行すると 繧ォ繧ソ繧ォ繝 となるので、さっきと同じように binmode 関数を使って、 #! perl # list2 -- 1オクテットを1文字として解釈（UTF-8で保存） use strict; use warnings; binmode STDOUT, ':encoding(cp932)'; # 追加 my $text = '漢字、カタカナ、ひらがなの混じったtext'; print substr($text, 9, 12); と書いたのですが、 ・\x{0082}" does not map to cp932. "\x{0082}" does not map to cp932. "\x{00bf}" does not map to cp932. "\x{0082}" does not map to cp932. "\x{0083}" does not map to cp932. "\x{008a}" does not map to cp932. a\x{0082}≪a\x{0082}\x{00bf}a\x{0082}≪a\x{0083}\x{008a} のようになりました。 もちろん、プログラムを Shift_JIS で保存して substr($text, 6, 8) とすれば正しく実行できますが、プログラムを UTF-8 で保存しつつ、Windows で正しく表示する方法はあるでしょうか。 よろしくお願いいたします。
複数の SELECT タグを連動するようにさせたいです。メインカテゴリを選択すると、サブカテゴリが出てくるというものです。 javaスクリプトの方は確認しました。 http://www.geocities.co.jp/SiliconValley/4334/un … ただ、これをCGI(perl)上で利用したいのですが、方法が分かりません。 CGIは以下のようになっています。 print "<SELECT name=\"cat\">\n"; print "<OPTION value=\"\">カテゴリを選択してください</OPTION>\n"; for ($cnt = 0 ; $cnt<= $#catlist ; $cnt++) { if($catlist[$cnt] eq $cat){ print "<option value=\"$catlist[$cnt]\" selected>$catlist[$cnt]</OPTION>\n"; }else{ print "<option value=\"$catlist[$cnt]\">$catlist[$cnt]</OPTION>\n"; }#if閉じ }#for閉じ print "</SELECT>\n"; 配列変数(という言い方であってますか?@catlist)は別ファイル(data.ini)に保存されています。 サブカテゴリも配列を利用できないでしょうか?(@sub1=(～);@sub2=(～);のような感じ) また、修正画面(selectedを付ける)での使い方も今一つ不明です。 現在は、 print "<SELECT name=\"cat\">\n"; print "<OPTION value=\"\">カテゴリを選択してください</OPTION>\n"; for ($cnt = 0 ; $cnt<= $#catlist ; $cnt++) { if($catlist[$cnt] eq $cat){ print "<option value=\"$catlist[$cnt]\" selected>$catlist[$cnt]</OPTION>\n"; }else{ print "<option value=\"$catlist[$cnt]\">$catlist[$cnt]</OPTION>\n"; }#if閉じ }#for閉じ print "</SELECT>\n"; このような状態ですが、方法があれば教えてください。
初心者にほぼ近いものです。 Config::Simple利用でformの保存ボタンを押した時に 保存させ次のページに移動したいと考えていますが、 正しく動作しません。 解決策をご存じの方お願いします。 【考えているソース】 前後省略 print "<FORM ACTION='hozon_kanryo.html' METHOD='post'>\n"; print "<INPUT TYPE='submit' name='btn' VALUE='登録'>\n"; if($form->param('btn')){ $list->write(); } print "</FORM>\n"; $listには正しくデータが格納してあり if文をなくせば、このページを読み込んだ段階で 保存されてしまいます。 (ifの定義は他のサイトで参照し出来るのか分からず 試してみたものです) どうにかformでsubmitされた時に保存する方法は ないでしょうか？
初心者です宜しくお願いします 自作cgiスクリプト動作に必要なPerlモジュールが判るツールてありますでしょうか？自作スクリプトを作成し　httpd.exe　にActivePerl-5.10.1.1006-MSWin32-x86-291086.msi(デフォルト環境でインストール）　をインストールした環境にて動作チェックしたスクリプトをサーバーにUPしましたが画像表示がうまくいきません。サーバー業者に問い合わせたところサーバーは問題なく動作してるとのことでユーザースクリプトのサポートは行わないと回答されてしまいました。そこで自作スクリプト動作に必要なPerlモジュールが判るツールとの質問になりました。 どなたかお分かりになる方よろしくお願い申し上げます。
perlでのルート計算はsqrt()関数が一般的で、便利ですが、 この方法だと√12を3.46410161513775と返します。 こうではなく、√12を2√3のような形で取得したいのです。 ご存じの方がいましたらご教授よろしくお願いします。
use strict;と書くとエラーになります。 strict.pmをstrict1.pmにしてuse strict1;にするとエラーはなくなります。 strictは予約語ですか？ これと同じ現象になった人はいませんか？
ネットワークプログラミングのPerl開発環境構築でわからない点があります。コマンドラインからは実行できたのですが、ブラウザのURLにHttp://…/スクリプトファイル.pl　を書き込んで実行できると参考書にはあるのですが、サーバーではないマシンにはlocalhostは存在しないので、そんな無茶な！という状況にあります。どなたか助け船をお願いします。
最近Perlの勉強を始めたものですが、文章を一文一文として処理することが出来なくてすごく困っています。 例えば、 B a I b I c I d B e I f I k I m B h I n が入力されたとき B 4 a I 3 b I 2 c I 1 d B 5 e I 4 f I 3 k I 2 m I 1 m B 2 h I 1 n を出力されたいのです。 B を区きり文字として、いろいろやってみましたが、うまく出来ませんでした。何方か分かりやすい説明して頂ければ大変有難いのです。
現在以下のプログラムでデータを削除しています。 (ここから) print "Content-type: text/html\n\n"; open(IN,"<$memfile") || &error("Can't write $memfile"); flock(IN, 2); @lines = <IN>; foreach $lines (@lines) { ($seq,$name) = split("<>", $lines); if("$del" eq "$seq"){ next; }else{ $data .= $lines; } } close IN; open OUT, "> $memfile"; flock OUT, 2; print OUT $data; close OUT; print "<html>完了しました<br><a href=?mode=menu>戻る</a></body></html>"; exit; (ここまで) このプログラムでも削除出来るのですが、foreachの処理で対応するとパフォーマンスが悪いのかな? と思ってます。(ハッキリとはわかりません) 件数が多くなるとサーバーエラーになるのかな?と思ってます。 もっと効率の良い方法がありましたらと思い質問いたしました。 perlを独学で学んでいるので、見る人が見ると変なつくりだと思ってます。 以上、よろしくお願いいたします。
Spreadsheet::ParseExcelを使っていてよくわからないところがあったので、ご教授お願いします。 Excelの空のセルを正規表現でマッチさせるにはどうすれば良いのでしょうか？ ＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊ use strict; use utf8; my cell = $sheet->{"Cells"}[$row][$col]; my val = ""; if($cell){ $val = $cell->Value; } if($val =~ "？？？"){ print "空のセルです"; }
初心者ですよろしくお願いします 画像をforで回し表示いたいのですが以下3方法試しましたがいずれもうまく表示されません　　Perlは文字列と数値が私にとってあいまいなので----と言うかそれ以前の問題ですね　HTMLに変数名を入れても無理ですね今気がつきました　cgiで画像を表示するのはどうしたらよろしいでしょうか？ご指導お願いします $kaku =".gif"; @bb = ( "0.gif","1.gif","2.gif","3.gif","4.gif"); for($i=0; $i<=$#file; $i++){ $jj=$i.$kaku; $jjj=length($jj);　　#レングス5になってました print "<img src=\"$jj\" width=\"55\" height=\"35\">\n"; print "<img src=\"$bb[$i]\" width=\"55\" height=\"35\">\n"; print <<EOM; <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html> <img src= "$jj" width="55" height="35"> EOM }
Excelファイルを読み込んで、A列をずら～っと上から連続して表示するプログラムを作ったのですが（下記）、句読点の"。"が入ったセルで改行したいです。しかし、うまくいきません。文字コードが原因なのかな・・・と思ってはいるのですが・・・調べても調べてもわかりません。どうか、未熟者にアドバイスお願いします。 ・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・ #! /usr/bin/perl # モジュールの読み込み use strict; use utf8; use Spreadsheet::ParseExcel; use Spreadsheet::ParseExcel::FmtJapan; # ？ binmode STDOUT, ":utf8"; # Excelファイルの処理 my $format = new Spreadsheet::ParseExcel::FmtJapan; my $excel = new Spreadsheet::ParseExcel; my $book = $excel->Parse("xlsファイルの場所"); my $sheet = $book->{"Worksheet"}[0]; my $MaxRow = $sheet->{"MaxRow"}; my $MaxCol = $sheet->{"MaxCol"}; for(my $col=0, my $row=0; $row<=$MaxRow; $row++){ my $cell = $sheet->{"Cells"}[$row][$col]; my $val = ""; if($cell){ $val = $cell->Value; } print "$val"; if($cell=~"。"){ print "\n\n"; } } print "\n";
初めて投稿させていただきます、perl初心者です。 イベントの登録とデータ集計がしたくて、色々なメールフォームCGIを 比較検討しております。 今評価中のプログラムはデータをCSVにかき出してくれるのですが、メールアドレスの重複チェックが付いていません、そこでこのプログラムにメールチェック機能を追加したいと考え、色々見て廻ったのですが、良く分かりませんでした、 頭の中では書き出されたCSVファイルを読み込んでメールの列だけ抜き出し、それをチェックすれば良いのかなと考えています。 perlの本やohzakiさんのPerlメモ等も見ましたが良く分かりません。 何方か分かりやすく教えて頂けると助かります。
ファイル編集について勉強なのですがどうしてもできません。 複数ファイル内よりIF構文を見つけてFILE_A.txtのIF書式へ変換する。 ※編集前にFILE_B.txtの変更箇所をコメント化して編集後に変換、 FILE_A.txtの書式であれば編集しない処理を作りたいと思うのですが・・・ FILE_A.txt if [ $? != 0 ] ； then 　　echo "てすと" fi 編集前 FILE_B.txt -- if [ -f $file ] then 　　echo "てすと" fi 編集後 FILE_B.txt -- #if [ -f $file ] #then if [ -f $file ] ； then 　　echo "てすと" fi 以上よろしくおねがいします。
クリックカウンタについて教えて下さい。 (1)ある特定のカウント（例えば10）になったら隠しページに飛ばしたい (2)その後は何度クリックしてもカウント数はかわらない（動作させない） (3)その後カウントをクリアして再度クリックカウント出来るようにしたい (1)はなんとか出来ました。ですが、その後の動作が上手く出来ません。どなた様かアドバイスをお願い申し上げます。 ＜＜click.cgi＞＞ #!C:\Perl\bin\perl #=================================================== # 各種設定 #=================================================== $lockfile = "./lock"; $jumpurl = "./blog.html"; #ジャンプさせたい隠しページのURL $hikaku = 9; #日時の取得------------------------------ @youbi = ('日', '月', '火', '水', '木', '金', '土'); ($sec,$min,$hour,$mday,$mon,$year,$week,$yday,$sammer) = localtime; $year += 1900; $mon += 1; $yday = ""; $sammer = ""; $now = "$year年$mon月$mday日($youbi[$week]) $hour：$min－$sec秒\n"; #=================================================== # カウントアップ #=================================================== $url = $ENV{'QUERY_STRING'}; &lock; #ログファイルからデータの読み込み---------- open (IN,"<cntdata.dat") || die "Open Error!\n"; $cnt = <IN>; close IN; if($cnt >= $hikaku){ open (FILE, ">text.dat") || die "Open Error!\n"; print FILE "$now<br />10クリックを超えました。ご利用ありがとうございました。"; close FILE; open (OUT,">cntdata.dat") || die "Open Error!\n"; $cnt = 1; print OUT $cnt; close OUT; print "Location: $jumpurl\n\n"; exit; } #記録の更新-------------------------------- $cnt++; #カウントアップ $count = sprintf("%04d", $cnt); open (OUT,">cntdata.dat") || die "Open Error!\n"; print OUT $count; close OUT; &unlock; print "Location: $url\n\n"; #元のページにジャンプさせる exit; #=================================================== # エラーと排他処理サブルーチン #=================================================== sub lock { $retry = 3; if (-e $lockfile) { $locktime = (stat($lockfile))[9]; if ($locktime < time - 60) {&unlock;} } while (!mkdir($lockfile, 0755)) { if (--$retry < 0) {&error;} sleep(1); } } sub unlock {rmdir($lockfile);} ＜＜cntdata.dat＞＞ クリック数 ＜＜text.dat＞＞ 日時とありがとうメッセージ ＜＜index.shtml＞＞ <html> <head> <title>サンプル</title> </head> <body> <a href="./click.cgi?./index.shtml">クリック</a> <p>現在のクリック数：<!--#include file="./cntdata.dat"--></p> <p><!--#include file="./text.dat"--></p> </body> </html> 10クリック超えて、カウンタの数字が1に戻るのですが、その後またクリックすると動きません。なので、(3)にしたい場合には何をすればよいのでしょか。また(3)が無理なら(2)のようにクリックしてもcgiを動作しないようにしたいです。
特定の正規表現にマッチする全パターンを出力する方法、もしくはCPANモジュールは無いでしょうか。 例えば、 my $pattern = "[a-z]"; some_sub($pattern); # 出力： a, b, c, d, e, f, g, h, i...z 以上、どうぞよろしくお願い致します。
Perlを始めたばかりの初心者です。 inputで入力した情報を変数として取得する方法は可能でしょうか？ #! c:/perl/bin/perl print "Content-type: text/html\n\n"; print "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\">\n"; print "<head><title>TEST</title></head>\n"; print "<body>\n"; print "<p><input type=\"text\" name=\"name\"></p>\n"; print "</body>\n"; print "</html>"; 上記の入力フォームで、777と入力した場合、サーバーを経由しないで、777を変数に格納したいのですが、可能でしょうか？ 宜しくお願いします。
Perlを始めたばかりの初心者です。 Perlの中にフォームを入れたいのですが、エラーが出てしまいます。 現在は、ローカルで作動させています。 #! c:/perl/bin/perl print "Content-type: text/html\n\n"; print "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\">\n"; print "<head><title>TEST</title></head>\n"; print "<body>\n"; print "<p><input type="text" name="name"></p>\n"; print "</body>\n"; print "</html>"; 【print "<p><input type="text" name="name"></p>\n";】この記述がエラーの対象行となっています。 inputを使用する場合は他にも記述が必要なのでしょうか？ 宜しくお願いします。
perlで.(ドット）のマッチについて 教えて貰えないでしょうか？ test_01.comにマッチした時に test_01_comに変換 .(ドット)以前の文字は可変です。 testwindows.netとか testtesttesttest.jpとかもあります。 以上宜しくお願いします。
INPUTファイルを以下のように作成します。 >input.txt 伝票番号1 伝票番号2 伝票番号3 ・ ・ ・ 特定のフォルダ内の複数ファイル（input.txtと同じ階層でもいいです）に対して grepを順に伝票番号1,伝票番号2,伝票番号3・・・ というようにinput.txtから読み込んで、ヒットした伝票番号をoutput.txtファイルに 「ヒットしたファイル名A　伝票番号1」 「ヒットしたファイル名A　伝票番号2」 「ヒットしたファイル名B　伝票番号1」 「ヒットしたファイル名C　伝票番号3」 ・ ・ ・ というように出力したいと思っております。（最悪、伝票番号だけも可なんですが） どなたかもしよろしけばご教授よろしくお願い致します。
はじめまして perlをかじった程度の初心者です。 会員制のサイトで、空メールを送っていただき自動返信メールにて登録していただきadmin管理にて登録削除管理を行うシステム、登録認証はメールアドレスとパスワードです、このシステムをレンタルサーバーに設置したいのですが、どのように設置したらよいのでしょうか。 ロリポップで試してみましたが メールすら届きません、プログラムの変更のメール設定部分はすべて変更ししたはずですが、許可管理するadmin.cgiにも反映されません。 プロの方のお助けがほしいです。 お願いします。 補足システムは携帯・ＰＣどちらでも対応可能、登録者が練習問題や過去問題を分野別・年度別などに分けて１問ずつ解いていくものです、データ・画像はＣＳＶ形式で保存してあります。 教員をしています、小規模ｅ‐ラーニングのつもりで依頼して作っていただき。作っていただいた方のサーバーをレンタルしていましたが、結構高額で何もせず上メンテナンスなども高額なので自分で色々調べレンタルサーバーに自分でアップを考えています。
ＣＧＩの設置改造方法教えてほしいです。 手持ちのｅ－ラーニング（クイズ）ＣＧＩ/perlの改造方法 空メール会員登録の設置方法を教えてほしい。 質問もどのようにすればいいのかわからない。 教えてください。
ＣＧＩ クイズ（問題）perlの改造、増設、サーバー設置を行いたい。 perlで作成された4択問題、解答1つだけの問題を管理が面などから2～10択問題で回答も１つ解答から複数回答までいろいろ設置できるようにするにはどのように書いて改造付け加えていったらよいでしょうか。 本当に困っています、生徒に問題をクイズ ｅラーニングの形で出題していきたいのです問題はＣＳＶで保存して読み込む形式です。
PERL初心者です。 以下、テキストに複数行になっている箇所の2行目の「BBB」を検索キーとして 3行目の「CCC」を取得したいのと２行目、3行目を1レコードにしたいのですが できません。 test.txt ---------------------------------- 1. AAA BBB CCC DDDD 2. AAA BBB 3. CCC DDDD 4. AAA BBB CCC DDDD ----------------------------------- 以上よろしくお願いします。
CGIカスタマイズについて教えて下さい。 ttp://www.lrlab.to/rd/rcal-1.20/ 上記からフリーのスクリプトを頂いてカスタマイズを 試みていたのですが、どこを変更すればいいのか どうしてもわからなかったので、助言頂ければと思います。 とりあえず、設置を行ったのが以下です。 ttp://press.tmyj.net/rcal2/ こちら側で画像を指定を行うと表示されます。（9/1） ですが、デフォルト、画像の指定を行っていないと HTMLが「.gif」となってしまい×で表示されてます。 これを、指定しない場合、日付がない表の場所のように 「space.gif」を改しておき、こちらで画像を指定したら その画像と入れ替えるようにしたいのですが どこをいじればいいのか分かりません。 「space.gif」と指定している場所かな （IF構文で日付がない場合、space.gifを入れる） と探してみたのですが、見つけきれませんでした。 掲示板等のカスタマイズなどはしたことはあるのですが ほとんど初心者なので、ご指導お願い致します。
ディレクトリ内の画像ファイルの一覧を表示させたいです。 検索したところ、以下の物を発見しました。 #!/usr/bin/perl $filename=$ENV{QUERY_STRING}; $lookdir = "../../image/event/"; $mime{html}="text/html"; $mime{htm}="text/html"; $mime{txt}="text/plain"; $mime{jpg}="image/jpeg"; if($filename eq '') { print "Content-type: text/html\n\n"; print "<html><body>\n"; opendir(DIR,"../../image/event/"); while($dir=readdir(DIR)) { print "<a href=\"$lookdir$dir\">$dir</a><br>\n"; } closedir(DIR); print "</body></html>\n"; } else { $ext=$filename; $ext=~s/.*\.//g; if($mime{$ext} ne '') { print "Content-type: $mime{$ext}\n\n"; open(R,$filename); print <R>; close(R); } } これで、ほぼOKなのですが、"."や".."が表示されてしまってます。 これを消したいのですが、良い方法は無いでしょうか?
お世話になります。 今、ひたすら貯めている（削除していない）ファイルがあります。 容量が大きくなってきたので、適当な（レコード）数を残し、 残りを削除したいと思います。 １つの命令で書けるのでしょうか、 それとも１個づつコピーしていかなければならないのでしょうか。 貯めているレコードはただ経緯を見るためだけに保存しているのであって、 関連性はありません。 やりたいことは、 １００と指定したら最新の１００個を残し、 １０１個目から以降の古いレコードを捨てたいのです。 （今現在７０００個くらい貯まっています） 宜しくお願いします。
Perlに関していつもお世話になっております。 今回も正規表現に関する質問をしたいと思います。 「あ、あい、あいう、あいうえ、あいうえお」というハッシュが存在するときに、「｛あ｝は○○回出ました。」「｛あい｝は○○回出ました。」とそれぞれ表示させるコードを組もうと思います。 前回までで皆様に教えていただいたことを元に組んでみました。 #!/usr/bin/perl use warnings; use strict; use utf8; use Encode; my %word_of = ( 'あい' => 0, 'あいう' => 0, 'あいうえ' => 0, 'あいうえお' => 0, 'かき' => 0, 'かきく' => 0, 'かきくけ' => 0, 'かきくけこ' => 0, ); foreach my $search_key ( keys %word_of ) { foreach my $word ( keys %word_of ) { if ( $word =~ /$search_key/ ) { $word_of{$search_key}++; } } } foreach my $key ( sort ( keys %word_of ) ) { # utf8, shiftjis eucjp ... print encode( 'utf8', "「$key」 は $word_of{$key} 回出ました" ), "\n"; } これを出来ればeucjpで組みたいのですが、可能でしょうか？ 私の思いあたる点、utf8表記の部分をeucjpに直しただけではエラーが出てしまいます。 よろしくお願いします。
perl言語を使用してokwaveのカテゴリごとにテキストを収集しています。 カテゴリ「ビジネス」内のテキストは以下のコードで収集していました。 use Encode::Guess; use LWP::UserAgent; use HTTP::Request; use Encode; open(OUT, ">>java.csv"); for (my $i=20; $i<200; $i+=20){ our $url = "http://okwave.jp/205/221/c253_$i.html"; my $ua = LWP::UserAgent->new; my $req = HTTP::Request->new(GET => $url); my $res = $ua->request($req); my $content = $res->content; while ($content =~ m/<a href=\"\.\.\/(qa[0-9]+\.html)\">/g){ my $ua = LWP::UserAgent->new; my $req = HTTP::Request->new(GET => 'http://okwave.jp/'.); my $res = $ua->request($req); my $content = $res->content; @qa1 = (); @qa2 = (); for (my $i=0; $i<2; $i++){ $content =~ m!<span class=\"_LSUCS\">(.*?)</span>!sg; #Q&AタイトルとQ本文 $a = $1; $a =~ s/\r\n//g; $a =~ s/<br \/>//g; $a =~ s/,//g; push (@qa1,$a); } while ($content =~ m!rowspan(.*?)</span>.*?どんな人：(.*?)<br/>!sg){ $b = $1; $c = $2; $b =~ s/(=\"3\".*?LSUCS\">)//sg; $b =~ s/\r\n//g; $b =~ s/<br \/>//g; $b =~ s/,//g; push @qa2,$b; push @qa2,$c; } $qa1 = join ',',@qa1; $qa2 = join ',',@qa2; $qa = "$qa1,$qa2\n"; print OUT $qa; } } close OUT; カテゴリ「プログラム」内のテキストを収集する際抽出カテゴリの アドレス部分のみ「プログラム」のurlに書き換えたところ csvファイルが0kbのままでテキストを収集することができません。 よろしくお願いします。
メールからDBへbashを使い画像の投稿・更新・削除等できるプログラムは出来たんですが、空メール処理が出来ません。
WindowsにてPerl/Tkを使用しております。 WWW::MechanizeのGETを使って(おそらく)404 not foundを受信した後の動作の制御の仕方がわかりません。 下記ソースを実行して貰うとわかると思うのですが、 GETが失敗したら即sub関数内をreturnしてしまいます。 #!/usr/bin/perl use Tk; use Encode; use WWW::Mechanize; my $mech = new WWW::Mechanize(autocheck => 1); my $main = MainWindow->new; $main->Button(-text=>decode("cp932",'取得'),-font => ["ＭＳ ゴシック", 12], -command => \&get_source) ->grid(-row=>0,-column=>0); my $list = $main->Listbox(-selectmode=>'single',-font => ["ＭＳ ゴシック", 12]); $list->grid(-row=>1,-column=>0,-sticky=>'ew'); MainLoop; sub get_source{ my $uri = "http://www.google.co.jp/abcd"; $mech->get($uri); print "get_source end\n"; } 上記の「print "get_source end\n";」は実行されません。 データ取得先サイトがメンテナンス中は404になるようで困っています。 イメージでは「$mech->get($uri) or die "get_source error";」みたいな感じにエラーの場合の時の処理を記述したいのです。 ご存知の方いましたらご教示願います。 使用環境 ・Windows XP Professional SP3 ・Active Perl v5.8.6 for MSWin32-x86-multi-thread build811 ・自作PC(CPU:Athlon 64 3800+)
多人数参加型シミュレーションのCGIゲームを知合い（知合いは知識あり）とperlかphp言語で作ろうと考えておりますが、自分はプログラムに関しては全くのど素人です。 どなたか上記のゲーム作成の参考になるサイトか書籍を教えてくれませんか？
お世話になります。 フォームに関しての質問です。 <input ,,,,などは使えるようになりましたが、 今回やりたいことは、 表示した時刻をそのまま取り込むにはどうしたらよいか、 と言うことです。 もう少し詳しく説明します。 あるテスト問題をやらせ、 回答内容と、回答するまでの時間の２本立てで評価をしたいために、 cgiで問題を表示したときに開始時刻を表示し、 回答ボタンが押されてcgiに戻ったときに終了時刻を求め、 その間隔を把握したいのです。 しつこいですが、 開始時刻を表示し、その開始時刻をそのまま取り込みたいのです。 構想は、 &timeのように現在時刻を調べ、 取得した時刻を20090817 101225の様に開始時刻として表示し、 この表示した20090817 101225を回答内容と一緒に取り込みたいのです。 （取り込んだ後に同じく&timeで時刻を求め、間隔を割り出します） 以上、宜しくお願いします。
フリーのCGIで「プルダウン方式のメールフォーム」を探しています。 具体的には ・相談内容(プルダウンから選択) ・具体的な内容（フリー記入） ・送信ボタン ※PC、携帯(3キャリア)対応 こんな感じの条件を満たす物はありますでしょうか？ 私はCGIを学び始めて日が浅いので 改造等もたいして出来ないのですがどなたか親切に教えてくださる方、 よろしくお願いします。
初心者ですが、ご教授ください。 Perlなどで、データを書き出す時に、よく、<>とか、,(カンマ)とか使うと思うのですが、その他の区切り文字として何がオススメなのでしょうか？アフィリエイトなどのリンク先URL内で、<>とか、,（カンマ)とか、"（ダブルクォーテーション）などが使われているため、これに換わる、区切り文字は、何がよいのか教えてもらいたいです。
以下のスクリプトで困ってます。質問をスクリプトの下に書きましたので、よろしくお願いします。 #------------------------------------------------------------------ #!C:/strawberry/perl/bin/perl use strict; use Web::Scraper; use URI; use YAML; use encoding 'shiftjis'; my $stuff = URI->new("http://table.yahoo.co.jp/t?s=9503.t&a=5&b=13&c=2 …); my $scraper = scraper { process "table table table tr td small", 'news[]' => { title1 => 'text' }; }; my $result = $scraper->scrape($stuff); print YAML::Dump $result; #------------------------------------------------------------------ 上記のPerlスクリプトでは、 --- news: - title1: 年 - title1: 月 - title1: 日 - title1: から - title1: までのデータ - title1: デイリー - title1: 週間 - title1: 月間 - title1: '銘柄コード： ' - title1: 2009年8月14日 - title1: '2,075' - title1: '2,090' - title1: '2,070' - title1: '2,080' - title1: '1,449,300' - title1: '2,080' - title1: 2009年8月13日 - title1: '2,090' - title1: '2,090' - title1: '2,080' - title1: '2,090' - title1: '1,137,900' - title1: '2,090' のような結果が出ます。 結果を以下のようにCSVで取り出したいのですが、ロジックをどのように変更すればよいでしょうか？　 多分正規表現を使うんだと思うのですが、分かりません。 http://weblog.nqou.net/archives/20090301140728.h … ↑このページも確認していろいろ試しましたが、上手くいきません。 ご指導よろしくお願いします。 こういう↓結果にしたいです。 2009年8月14日,2075,2090,2070,2080,1449300,2080 2009年8月13日,2090,2090,2080,2090,1137900,2090 以上
先日質問してから、いろいろと調べて、okwebのサイト検索から以下の内容を発見しました。 「サーバー間でファイルコピーしたい」 http://okwave.jp/qa2052204.html 試しに以下のプログラムをサーバーに設置して実行いたしました。 (ここから) #!/usr/bin/perl use CGI::Carp qw(fatalsToBrowser); use Net::FTP; $ftp = Net::FTP->new('サーバー名'); $ftp->login("ユーザーID", "パスワード"); $ftp->cwd('cm'); $ftp ->ascii(); $ftp->get("index.html"); $ftp ->binary(); $ftp->get("top.jpg"); $ftp->quit; exit; (ここまで) 500のサーバーエラーが表示されるのですが、サーバーにデータはダウンロードされました。 このエラーが表示されたのになぜ動作しているのか? と、エラーができなくなるにはどうしたらよいでしょうか?
初心者なのですが、sendmailのプログラムを勉強していて、意味がどーしても分からないので教えて下さい。 #メール本文 my $mailbody = "以下の通りメールフォームより送信がありました。\n\n"; $mailbody .= "送信日時 = $now\n"; foreach my $i (0..$#key){ #modeはスキップ if($key[$i] eq "mode"){next;} #改行変換（タブ→\n） $val[$i] =~s/\t/\n/g; #メール本文 $mailbody .= "$key[$i] = $val[$i]\n"; } で、 (1)$mailbody .=の.=って何ですか？何で=の前に.が付いているのですか？ (2)(0..$#key){　の所、$#key　なぜ$の次にコメントの始まりである#が付いているのでしょうか？ 自分なりに調べたのですが、どーしても分からなくてどなた様かお教え願えないでしょうか。よろしくお願い申し上げます。
任意文字数のアルファベット＋任意桁数の数値で構成された 単語にのみ部分マッチする正規表現を教えてください。 条件は、前に数字が無いこと、または、後ろにアルファベットが無いことです。 例えば、 　　23*ade3456,ad-r4+4er3456=pol34k#gtu34&-de23knm723a3 この場合、 　ade3456 　r4 　gtu34 に、マッチして欲しいのです。 　4er3456 これは、手前に数字があるのでマッチしてはいけません。 　pol34k こちらは後ろにアルファベットが続いているのでマッチしてはいけません。 　de23knm723a3 これはどこで切っても条件を満たしません。 以上、よろしくお願いいたします。
perlで記号除去を行いたいのですがうまく行かず困っています。 文字列はEUCです。そこから$patternのような記号を削除したいのですが・・・。 http://www.din.or.jp/~ohzaki/perl.htm#Character 正しくパターンマッチさせる を参考に $ascii = '[\x00-\x7F]'; $twoBytes = '[\x8E\xA1-\xFE][\xA1-\xFE]'; $threeBytes = '\x8F[\xA1-\xFE][\xA1-\xFE]'; $pattern=q([\!！\#＃\%％\-－―ーー・・\/／\;；\?？\\￥_＿`‘\{｛\}｝\+＋\(（\)）\[［\] ］\*＊@＠\$＄&＆\:：\>＞\<＜\~￣\^＾\"”\'’ 　\,，\.．\=＝\|｜\、、\。。]); if ($data =~ s/((?:$ascii|$twoBytes|$threeBytes)*?)(?:$pattern)/$1/mg) { print "マッチした $& \n"; } print $data; として$dataに下の2つを与えてみました。 サンプル1 【あいうえお】 サンプル2 【aaa】 ところが・・・ サンプル1 (出力なし) サンプル2 旻aaa桿 何が悪いのかわかりません・・・ ためしにパターンに【】を追加したところサンプル2はうまく行きましたが サンプル１に変化がありません。（あいうえお　も消えてしまう） 何か思い当たる点がありましたら教えてください。よろしくお願いいたします。
POP3サーバーにて取得したメールに添付されたファイルを題名、件名等によって指定された保存先アドレスへ保存する方法が分かりません。 下記は作成途中のソースです。 use File::Basename; use Net::POP3; use Net::FTP; #POPサーバに接続 my $pop = Net::POP3->new('.jp', Timeout=> 120) || die "Cound\'t Connect to POP server\n"; $pop->login('1', '1') || die "Authentication failed\n"; #メールのリストを取得（メッセージ番号 => サイズ からなるハッシュリファレンス） my $list_href = $pop->list; #メールを一通づつ取得 foreach my $msg_id (keys %$list_href){ my $message = $pop->get($msg_id); #メールを取得 print @$message; $pop->delete($msg_id); #メールを削除 } my $parser = MIME::Parser->new; #ファイルの一時保存場所を指定 $parser->output_dir('d:/Root/pub/mail/'); #標準入力からメールを取得 my $entity = $parser->parse(*STDIN); #FromとSubjectのみ取り出し $entity->head; my $from = $header->get('From'); my $subject = $header->get('Subject'); #添付ファイルがある場合のみ処理 if($entity->is_multipart){ #パートの数（本文と添付ファイルの合計数） $count = $entity->parts; #メール本文以外（添付のみ）を取り出し（本文は0番目のため、一番目から取り出し） for($i = 1; $i < $count; $i++){ #ファイル名を含むパスを取り出し $path = $entity->parts($i)->bodyhandle->path; #ファイル名を取り出し $filename = (fileparse($path))[0]; #添付ファイルを書き出し open(FILE, "> d:/Root/pub/temp/$filename"); print FILE $entity->parts($i)->bodyhandle->as_string; close(FILE); } } 添付ファイルを書き出しした後、件名を分析しそこで指定された保存先へ保存する動作がいまいち分からないので教えて下さい。
perlの自作ライブラリについてお聞きしたいのですが use strict;やuse File::Copy;は、 パッケージ宣言でするものでしょうか？ それとも関数内で行うものでしょうか？ package aaa; sub aaafunc { use strict; use utf8; use File::Copy; use File::Basename; #簡単な設定ファイルクラス use Config::Simple; } 1:
私が今回質問したいのはメールサーバー(POP3)にて取得したメールの題名の中で特定の内容が含まれている場合、そのメールに添付してあるものをFTPサーバーに転送するというシステムです。 詳しく言うと、たとえば先頭に"UP"という文字があるとそれより後ろの文字をFTPサーバー内のアドレスだと決めてそこへ添付されたファイルをUPさせたいんです。 (例)[UP User/Photo]という題名のメールが来た場合、その指定したFTPサーバー内のUser/Photoと言う場所に添付ファイルを送信するというシステムです。 厳しいところも含まれているとは思いますが、どう組めばいいかお聞かせください。
フォームの内容をCSVファイルに出力し、CSVファイルをメールに添付して送信する機能をPerlで実現したいのですが、 諸事情によりパッケージ(MIMEなど)の導入ができないため、ActivePerlに標準で入っているNet::SMTPだけを使用して実現する必要があります。 どうすれば実現可能か御教示いただけると幸いです。 IIS6.0 ActivePerl 5.10.0
Shift-jisで作ったPerlにて、テキストをEUC、UTF-8、Shift-jisにエンコードし外部検索サイト等にテキストリンクを飛ばしたいのですが、うまくいきません。 過去ログにUTF-8から、EUC、UTF-8、Shift-jisへのエンコード方法をみつけ http://oshiete1.goo.ne.jp/qa3745875.html 試行錯誤しましたが、Shift-jisからはうまくいきませんでした。 perl のバージョンは5.8.8です。 ご教示のほどよろしくお願いします。
200908.txt 01,2009/08/01,2009,08,日記タイトル,日記本文,302 02,2009/08/02,2009,08,日記タイトル,日記本文,303 03,2009/08/03,2009,08,日記タイトル,日記本文,304 上記のようなログがあり 「日,日付,年,月,タイトル,本文,通しナンバー」の順に並んでいます。 たとえば、8/1なら「8/1のみ表示」するには、どのように条件付けすれば宜しいのでしょうか？ 色々やってみましたが、出来ませんでした。どなたか教えて下さい。
現在、業務でperlプログラムを書いてます。 perlを初めて２か月、プログラムは ほぼ初です。 よろしくおねがいします。 例えば以下のようなコードで、「sub_func」というメソッド内で「main」メソッド内の配列データを直接編集したいのですが、うまくいきません。 これは、引数で渡しているのは配列の「ポインタ」ではなく「リファレンス」であるため、「sub_func」というメソッド内で、新たに「array_ref」という配列の実態を作成してしまっているのだと認識しています。 そのため、「main」メソッドに戻ったタイミングではデータは元に戻ってしまうのだと思っています。 sub sub_func { 　　　my ($self, $array_ref) = @_ ; 　　　$array_ref = [4,5,6];　　　# returnはせずに、引数で指定したデータに格納したい } sub main { 　　　my ($self) = @_ ; 　　　# メソッドに渡すデータ 　　　my $data = { 　　　　　　array => [1,2,3], 　　　}; 　　　my $data2 = [1,2,3]; 　　　my @data3 = (1,2,3); 　　　# メソッドの中で、$data->{array}を [4,5,6] に変えたいが・・・ 　　　$self->sub_func( $data->{array} ); 　　　$self->sub_func( $data2 ); 　　　$self->sub_func( \@data3 ); 　　　# この時点で、どれも [1,2,3] のまま } 私の認識は間違っているのでしょうか？？ また、どのようにすれば配列の要素を別のメソッド内で編集できるのでしょうか？？ 御助言をお願いします。
プログラム #!/usr/bin/perl my $str = "abc,def,ghi"; ($a,$b,$c) = $str =~ /(.*),(.*),(.*)/; print $a,"\n"; print $b,"\n"; print $c,"\n"; 実行結果 abc def ghi このようなプログラムで ($a,$b,$c) = $str =~ /(.*),(.*),(.*)/;は それぞれ$a,$b,$cにabc，def，ghiが入ります． キャプチャしたすべてを変数に入れるならこの方法ですが， defだけが欲しいのに変数を３つ用意する必要がないと思います． 間違った表記ですが， ($b) = $str =~ /(.*),(.*),(.*)/$2/; ２つ目にキャプチャした$2が変数$bに入るような表記は出来ないのでしょうか？
以下の加算プログラムhoge.plがあります $aaa = <STDIN>; $bbb = <STDIN>; print($aaa+$bbb); hoge.plを別プログラムから以下のように実行し open(OUT,"| hoge.pl"); hoge.plの$aaa、$bbbに値を代入したい場合どのように渡したらよいのでしょうか？
７桁の数字が，A～Z・a～z・0～9で構成された９桁の文字列になるとき，3103364はどうなるでしょうか。 3181008は0c8DgWWOz，3854944は0eJ9w3vyzになります。 お願いします！ 【参考】(トリッププログラム) $tripkey = "#istrip"; #文字列 $tripkey = substr($tripkey,1); $salt = substr($tripkey.'H.',1,2); $salt =~ s/^.-z/./go; $salt =~ tr/:;<=>?@\^_`/ABCDEFGabcdef/; $trip = crypt($tripkey,$salt); $trip = substr($trip,-9); $trip = '◆'.$trip; print "$trip";
現在さくらのメールサーバを利用しています。 メールの本文に、指定した特定の文字が含まれているメールのみ転送したいと思っています。 そこでこちらのwiki（http://faq.sakuratan.com/wiki/wiki.cgi?%c3%e5%bf …）を参考にしたのですが、Perlは扱ったことがないので分からず行き詰まっています。 上記のwikiにあるスクリプトをどのように記述し直せば本文の文字で転送ができるようになるのでしょうか？ よろしくお願いします。
バイナリ、asciiのファイルの一部を読み込み、ファイルへ書き出したいのですが、ファイルへ書き出しが上手くいきません。 以下、一部です。 open(FH,$c_file); binmode FH; open(CTFH,">$cd_tmp"); binmode(CTFH); if($i == 1){ $result = read(FH,$cd,677); print $result."\n"; print CTFH $cd; print $cd; } 後でcloseしています。 677byteまでをCTFHに書き込みたいのですが、書き込めていません。 実行した際にprintで$resultには677が出力され、$cdも同様に 677byteの内容が実行時に出力されます。 ちなみにCTFHのファイルは作成されますが0byteと いう形で何も書き出されていない状態になっています。 どうしてなのかわからず煮詰まっています。 アドバイスをください。
改行ではなく半角スペースと全角スペースだけを■に変換したくて $FORM{'body'} =~ s/\s/■/g; $FORM{'body'} =~ s/\x81\x40/■/g; としたのですが、これによって改行も■に変換されてしまいます。 改行ではなく全角および半角スペースだけを■に置換することは不可能でしょうか？
お世話になります。 perlで画像処理をするツ－ルを作成していて、有効なドライブを判定する処理が必要なのですが、やり方がわかりません。 ご存じの方がいればご教授ください。 c:が有効な前提で、if (-e "C:\*****")は使えるのですが、c:自体が有効でない場合、Exceptoin Processing Message c00000013～　のようなエラ－が出てしまいます。
perlでmixiなどログイン処理のあるサイトのhtmlファイルを取得したいのですがなかなか上手くいきません。 どなたかご教授をお願いします。 ----------------------------------------------------------------- #!/usr/bin/perl use LWP::UserAgent; use HTTP::Cookies; use HTTP::Request::Common; use LWP::Simple; my $mixi_email = 'メールアドレス@yahoo.co.jp'; my $mixi_password = 'パスワード'; my $login_url = 'http://mixi.jp/login.pl'; my $home_url = 'http://mixi.jp/home.pl'; my $mixi = LWP::UserAgent->new($mixi_email, $mixi_password); #Cookieを有効にする# my $cookie = sprintf('cookie_%s_%s.txt', $$, time); my $cookie_jar = HTTP::Cookies->new(file => $cookie, ignore_discard => 1); $mixi->cookie_jar($cookie_jar); #ログインする# my @form = ('email' => $mixi_email, 'password' => $mixi_password, 'next_url' => $home_url);#POSTで送る内容の配列 my $request1 = &HTTP::Request::Common::POST($login_url, [@form]); #リクエストヘッダの生成 my $response1 = $mixi->request($request1); #ログインする getstore("http://mixi.jp/search_community.pl?from=global(取得先の指定)", "test.html"); ---------------------------------------------------------------------- 試しに書いてみたのですがうまくいきませんでした
Perl/TkでGUIプログラミングをしております。 プログラム中のButtonを押した時に自分のパソコンに設定している 既定のブラウザでWEBサイトを開くにはどうすればいいでしょうか？ イメージは下記のような感じです。 use Tk; use Encode; $url = "http://okwave.jp/"; $main->Button(-text=>decode("cp932","URLを開く"),-font => ["ＭＳ ゴシック", 12], -command => \&open_url) ->grid(-row=>0,-column=>0); sub open_url{ # 既定のブラウザでURL($url)を開く処理 } よろしくお願いします。
Perl/CGIにてプログラミングを行っております。 ただいま条件分けにより処理を分けていく処理を作っているのですが、C言語でやったスイッチ文があれば便利だなと思っております。 しかし、Perlにはスイッチ文が無いようなのです。 手持ちの参考書を見ても載っておらず、諦めようかと思いましたが大量にならぶifとelsifをみてやはり思い直しました。 スイッチ文、もしくはそれに近いものってありますでしょうか？ 理想としてはC言語のままの switch(式or変数){ case hoge: ... case hoge2: ... } のような形式を望んでおります。 何か有益な情報等ありましたらお知恵をお貸しください。
中島さんがフリーで配布されておられるPDFJを使ってPDFファイルの生成をしようとしています。（http://hp1.jonex.ne.jp/~nakajima.yasushi/） cgiでいろんな操作をしている中の１つとして、生成したxmlファイルからPDFファイルを作りたいので、次のようにツリー構成しました。 xxx(http://xxx.comのトップフォルダ) ├cgi/(705)┬aaa.cgi(705) 　　　　　　　 ├bbb.xml(606) 　　　　　　　 └lib/(705)┬PDFJ.pm(604) 　　　　　　　　　　　　　　 ├XPDFJ.pm(604) 　　　　　　　　　　　　　　 ├macro/(705)（はじめからセットされていた物すべて604で収納） 　　　　　　　　　　　　　　 ├PDFJ/(705)（はじめからセットされていた物すべて604で収納） 　　　　　　　　　　　　　　 └util/(705)（はじめからセットされていた物すべて604で収納） └data/(705) aaa.cgiで操作している中で、bbb.xmlを生成し、その後pdfファイルをdataフォルダに生成しようとしています。 bbb.xmlファイルは次のように記述し生成しています。 <?xml version="1.0" encoding="x-sjis-cp932"?> <XPDFJ version="0.2"> <do file="macro/stdders.inc"/> <do file="macro/toc.inc"/> <do file="macro/index.inc"/> <HXOUTLINE/> <BODY> ...中身... </BODY> <print file="$Args{outfile}"/> </XPDFJ> xmlファイルを作った後、aaa.cgi内で BEGIN { push @INC, 'フルパス/xxx/cgi/lib'; } use XPDFJ; $xpdfj = new XPDFJ; $xpdfj->parsefile($xmlfile, outfile => $outfile); #$outfileはaaa.cgiの冒頭で「$outfile = "../data/print.pdf";」と指定 として実行してみたのですが、Internal Server Errorとなり、当然ながらprint.pdfは生成されません。 perlチェックではエラーはありませんでしたし、BEGINの直前にxmlファイルを作っていますが、そこまではうまく機能しています。 説明を全部読みましたがうまくいきません。 ネットで使い方などを書いたサイトがないか探してみましたが、他の方が書いたサイトが全然見つかりませんでした。 上記のどこを修正すればいいのでしょうか、おわかりの方是非アドバイスください。 よろしくお願いします。
中島さんのXPDFJ（http://hp1.jonex.ne.jp/~nakajima.yasushi/）を利用してＰＤＦファイルの生成を試みています。 分らないことだらけではあるのですが、試行錯誤しながらやっておりまして、cgiファイルでいろんな操作をしている中の１つにＰＤＦファイルの作成ができるように、次のように書き、perlチェックをしてみたところその下の内容のエラーが表示されました。 書いた内容 $outfile = "○○.pdf"; $xmlfile = "○○.xml"; use XPDFJ; $xpdfj = new XPDFJ; $xpdfj->parsefile($xmlfile, outfile => $outfile); 出てきたエラー内容 Can't locate XPDFJ.pm in @INC (@INC contains: /usr/lib/perl5/5.8.5/i386-linux-thread-multi /usr/lib/perl5/5.8.5 /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.4/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.3/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.2/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.1/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.0/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.5 /usr/lib/perl5/site_perl/5.8.4 /usr/lib/perl5/site_perl/5.8.3 /usr/lib/perl5/site_perl/5.8.2 /usr/lib/perl5/site_perl/5.8.1 /usr/lib/perl5/site_perl/5.8.0 /usr/lib/perl5/site_perl /usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.4/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.3/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.2/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.1/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.0/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.5 /usr/lib/perl5/vendor_perl/5.8.4 /usr/lib/perl5/vendor_perl/5.8.3 /usr/lib/perl5/vendor_perl/5.8.2 /usr/lib/perl5/vendor_perl/5.8.1 /usr/lib/perl5/vendor_perl/5.8.0 /usr/lib/perl5/vendor_perl .) at ○○.cgi line 2760. BEGIN failed--compilation aborted at ○○.cgi line 2760. readme.txtを読むと「PDFJを構成する次のモジュールファイル群をPerlから利用できる（すなわち@INCにセットされた）ディレクトリにおけば利用できる」とあるのですが、この@INCにセットされたディレクトリとはどこのことを言っているのでしょうか。 レンタルサーバー（専用サーバーではありません）では扱えない領域なのでしょうか。
perlでrequire後、関数を実行時にサブルーチンが存在すれば実行させたいのですが、どうやれば調べられるかご存知でしたらご教授願えませんでしょうか。 foreach(...){ require "$file"; &Print;・・・ここでエラーが出てしまうのを関数が存在する場合だけ実行するようにしたいのです。 } 宜しくお願い致します。
初心者です。よろしくお願いします。 WindowsXP,ProffesionalでApache,LANの中だけでやっています。 以下の(1)、（2）が　Apache の　error.log に　非常にたくさん出てきて困っています。 (1) Argument "-" isn't numeric in numeric comparison (<=>) at C:/ApacheGroup/--- line 235., referer: http://--- (2) Argument "\\n" isn't numeric in numeric comparison (<=>) at C:/ApacheGroup/--- line 235., referer: http://--- このファイルは、だいたい以下のようになっています。 #!/usr/bin/perl -T use strict; use warnings; use CGI qw(-debug :standard); # 45個のファイルから一行目を取り出します。 open(FILE, "../4k/4k01/+score.txt") or die "$!"; my $line1 = <FILE>; close(FILE); #------------------------------------------ open(FILE, "../4k/4k02/+score.txt") or die "$!"; my $line2 = <FILE>; close(FILE); #------------------------------------------ # これを繰り返します。 #------------------------------------------ open(FILE, "../4k/4k45/+score.txt") or die "$!"; my $line45 = <FILE>; close(FILE); #------------------------------------------ # 取り出した行の例は # 82,問題番号,1548,2009年07月15日 14時11分20秒 ( = $line1) # です。 # この行は、別の cgi ファイルで、以下のように書き込んだものです。 --------------------------------------------- # open(FILE, '<+score.txt') or die "$!"; # my @data = <FILE>;my ($e, $f , $g, $h) = split(/,/, $data[0]); # close(FILE); # my $data2 = $e +1; # open(FILE, '>+score.txt') or die "$!"; # print FILE $data2; # print FILE (",問題番号,$num,$year年$mon月$day日 $hour時$min分$sec秒\n"); ------------------------------------------- # これを　@array に　入れます。 my @array = ("$line1,4k01","$line2,4k02", ---繰り返し--,"$line45,4k45"); # ソートして、表示します。 @array = sort { (split(/\,/,$b))[0] <=> (split(/\,/,$a))[0]} @array; #-- line 235 for my $val (@array){ #-- line 236 print $val . "<br>"; #-- line 237 } すると、--- 104,問題番号,1541,2009年07月15日 14時26分46秒 ,4k06 102,問題番号,1541,2009年07月15日 14時29分43秒 ,4k18 94,問題番号,1541,2009年07月15日 14時20分07秒 ,4k20 82,問題番号,1541,2009年07月15日 14時30分14秒 ,4k25 以下省略 ---　と　表示されます。 error.log に表示されないようにするには、どうしたら、いいでしょうか？ お教えください。
CGIでの処理で、今 http://xxxx.com/ok.cgi?id=123&pass=abc&page=inde … でindex.html が表示されているとします。 それで、このindex.htmlから別の拡張子のファイルへリンクさせ、ファイルをダウンロードできるようにしたいと思っています。lzh ならURLはこん感じになります。 http://xxxx.com/ok.cgi?id=123&pass=abc&page=samp … 　しかし　ok.cgi　の最後で print "Content-type: text/html\n"； exit; を指定しているのでリンク先へ行ってもindex.htmlは表示されますが、リンク先のファイルは動きません。 どうすればダウンロード出来るようになるでしょうか？　なるべくこのok.cgi の外に出したくないのです。 　また、この中で、リンク先が隠れるphpを入れたいと考えましたが、phpも同様に機能しません。これもどのようにすればよろしいでしょうか？ 　どなたかよろしくお願い致します。
POST形式で読み込んだデータを３通りで書きだしてみました。しかしながら１番最初のファイルにしかデータは書き出されていません。 ひょっとしてSTDINはコンピュータがアクセスしてきた時の行を覚えていて、次のアクセスがあった時はそこから処理が行われるのでしょうか。それなら１度ファイルに全ての入力データを書き出した際にアクセスポイントはファイルの最後になっているから、２度目、３度目の書き出しの際はループが廻るはずがありません。 そこで書き出しまえに$-を書き出してみました。でも１度目のループを行う前から値は0。 前にファイルハンドル名など何かを付けなくては$-は死んでいるのかと思って、$=を書き出してみると60という値を取ります。でも書き出された１度目のループのファイルを数えてみると$=80なんです。何なんでしょう、この60という値は。 どうもSTDINの挙動が分からないのですが、どういう理由でこうなっているのか。どうしたら３回ループを廻すことが出来るのかご教授いただけないでしょうか。 ********************************************** #!/usr/bin/perl -d use CGI; use SR; open(OUT,'>stdin_main.txt'); print OUT $-."\n"; print OUT $=."\n"; while(<STDIN>) { print OUT $_; } close(OUT); &SR::parse_form; our $q=new CGI; print $q->header(-charset=>'utf-8'), $q->start_html(-charset=>'utf-8', -lang=>'ja-JP'), $-,"<br />\n", $=,"<br />\n"; while(<STDIN>) { print $_; } print $q->end_html; ********************************************** package SR; sub parse_form { open(OUT,'>stdin_SR.txt'); print OUT $-."\n"; print OUT $=."\n"; while(<STDIN>) { print OUT $_; } close(OUT); } 1;
配列の中から特定の文字を取り出す処理がうまくできません @test = ("aaa","bbb","t=1","v=3"," test:", " test:") 上記のような配列があったとして 一文字目がaからzで二文字目が=のものを取り出す処理と 一文字以上の空白の後ろにtest:があるものを取り出す処理は どのようにすればいいのでしょうか？ 下記のような感じで書いたのですがうまくいきません @test = ("aaa","bbb","t=1","v=3"," test:", " test:") my $test = "test:"; foreach( @test ) { if( $_ =~/^[a-z]+k/) { print $_; } if( $_ =~/^\s+$test/) { print $_; } } よろしくお願いします
perlでパラメータを取得する際、 文字に決まりがあるIDやpass は $q='&'.$ENV{'QUERY_STRING'}; $q=~/\Wpass=(\w+)/; $pass=$1; 等で取得出来るのですが、メールアドレスの取得となるとどのようにメタ文字で表現すればいいのか分かりません。 どなたかご教授下されば幸いです。
Ｐｅｒｌを動かしていると、時々、 Attempt to free unreferenced scalar: SV 0xXXXXXXX, Perl interpreter: 0xXXXXXX at XXX.cgi line XX. という感じのエラーがでてプログラムが停止します。 なぜか理由も分かりませんが、VirtualPC環境の為、OSがフリーズするなどは問題ないですし、データが正常に記録されるよりも、より長時間動いてくれる方が助かるため、こういったエラーを出して、停止しない様にしたいのですが方法はありますでしょうか？ どなたがご存知の方がおられましたら教えて頂けないでしょうか。 宜しくお願い致します。
cgi(perl)でデータを整理し、格納しようとしています。 値が0という実数をファイル(csv)に格納したいのですが、"0"としても'0'としてもcsvファイルを開いて確認してみるとそのセルには何も入っていません（Null扱いになっているようです） データとして０を入れたい場合どうすればいいのでしょうか。 なお、全角の０ではなく半角の0を格納したいです。
CGI(Perl)でデータを抽出したり作成したりし、その結果出てきたものをPDFファイルでレイアウトし、プリントアウトできるようにしたいのですが、どうすればいいのでしょうか。 色々調べておりましたらPFDJというファイル？（モジュール？）に行き着いたのですが、サンプルを見ていたらとても手に負えそうもなかったのでもう少し簡単に作成する方法がないか模索しています。 レンタルサーバー上でcgiを動かしますので、勝手にソフトの追加ができませんし、また自宅PCなどにインストールするタイプのソフトでは対応できません。 ですのでソフトのインストールなどをせずにできる方法がありましたら教えてください。 よろしくお願いします。
こんにちは、perlについての質問です。 ２つの配列を比較するで調べたところ、"@deff = grep { !{map{$_,1}@array2 }-> {$_}}@array1;"で比較ができると書かれていました。perl初心者ですので、よくわからず、自分なりにこの処理について調べてみましたが、わかりませんでした。この処理の詳細がわかる方いましたら、教えてください。（特にmap($_,1)@array2 の部分がよくわからなかったです） よろしくお願いします。
こんにちは。 Perlでログを複数同時に削除する方法が分かりません。 ログファイル「log.txt」に Num=1234<>タイトル=あいうえお Num=1235<>タイトル=かきくけこ Num=1236<>タイトル=さしすせそ Num=1237<>タイトル=さしすせそ のようなデータが入っていて フォームのチェックボックス（name=delck）から送られてきた値と マッチするデータを削除したいと思っています。 例：1234と1236 最初はラジオボタンにして1行だけ削除できるようにしたのですが やはり複数同時に削除できた方が便利なので 試しているのですが、どう書けば良いのかわからない状態です。 複数の値が送られてきた場合は @delckに入るようになっています。（$delck[0]が1234、$delck[2]が1236） ログの各行を、delckの数だけチェックすれば良いのかなと思って わからないなりに↓こんな感じで、 foreachの中にforeachを入れたりしてみたのですが foreach $data (@log){ foreach $del (@delck){ $ck = "Num=$del<>"; if($data =~ /$del/){$match = 1;} else{push(@newdata,$data);} } } これだと1個目のdelckにマッチしても、2個目のdelckにはマッチしないから結局@newdataに入ってしまうようで 思った通りの動作をしてくれませんでした。 他の書き方をしてみても、結局発想は↑と同じになってしまって 結果は同じになってしまいます。 どなたか詳しい方、アドバイスいただけると助かります！ よろしくお願いします。
いつもお世話になります。 perl+mechanizeで、スクレイピングスクリプトを書いております。 $mech->reload(); にて、44秒～2分程度、サーバーから反応がない場合があります。この場合$mech->contentからは、"500 Server closed connection without sending any data back"というエラーを得ることができます。 この$mech->reload()時に、例えば、5秒待って、サーバーから反応がない場合は、次の処理に進ませる実装方法はありますでしょうか？ $mechの生成時に、 $mech = WWW::Mechanize->new(timeout => 5); などとして、タイムアウト時間を5秒に設定することも出来るようですが、前記$mech->reload()時の時のみ5秒間のタイムアウト時間としたいのです。というのも、その他の箇所で、$mechは時間をかけてもよいからです。 以上、すみませんが、ご存知の方がいらっしゃいましたら、ご教示願います。
こんにちは。 いつもお世話になっております。 早速ですが表題にもあるように、Perlを用いて形態素解析ツールを作成することは可能でしょうか？ 質問文が簡潔すぎるので経緯を。 複数の文字列から自動的に意味のある単語を抽出したい考えたときに、形態素解析というものに辿り着きました。 これを使って文字列の処理が出来ないかと考えました。 マッシュアップも検討中ですが、まずは自らが組めるプログラムなのかどうかをお尋ねしたいと思います。 何か不明な点がございましたら、随時対応致します。 宜しくお願いします。
Perl モジュールのImage::MagickをPHP5にて使用しています。 サーバーはレンタルでImageMagickのバージョンは6.2.8です。 いろいろな画像からJPEGサムネイルを自動生成したいと考え、最近ImageMagickを勉強しています。 そこで今引っかかっているのが アニメーションGIF や PDF を JPG に変換する際にできる複数画像の問題です。サムネイルなので適当に１枚あれば事足りるのですが、実際は全部処理されるため無駄が多く、何十ページもあるPDFですと処理に何十秒もかかります。 １ページだけ処理しておしまい…　といったオプションはないものでしょうか。 お詳しい方、よろしくお願いいたします。
正規表現の学習中です。読んでいる本の中に次の式がありました。 　(?<=^|。)[^。]+。 日本語の文章の中から一文を抽出するための正規表現です。 　。以外の文字がダーッと連なった後に。が来る文字列 とのことです。 　[^。]は。以外の文字 　+はそれが１個以上ある ですから 　[^。]+ は 　。以外の文字が１個以上ある という意味です。 その後に。が付きますから、 　[^。]+。 だけで 　。以外の文字がダーッと連なった後に。が来る文字列 ということになります。 では 　(?<=^|。) の意味は何でしょう。 　(?<=なんたら) は後方参照を意味しますから、 ^|。 のすぐ後に [^。]+ が続くと言いたいのでしょうか。 だとすると 　^|。 が問題です。 　^もしくは。 という意味なら、＾は正規表現で記号として使われている文字ですから、 　\^|。 と表現されそうなものです。 それに、。は文末でしか利用されない文字ですから、これに注目して検索を行うというのは理解できますが、^は日本語でなんら特徴を持つ文字ではありません。 　^もしくは。 という理解は間違いでしょう。 それでは^を記号として考えるとして、その前後を[]で囲んでいないから、この^は文字列の先頭を表すのでしょうか。そうすると件の正規表現は 　先頭の|。のすぐ後から。以外の文字が連なった後に。が来る文字列 という意味になります。日本語の一文を抽出する正規表現という解説にかなり近づいてはいます。 しかし 　|。 とは一体何？ |はorを意味する記号ですが、 　何とか or 。 という意味でしょうか。 でも「何とか」は「何とか」なりに何か文字表現がなされていても良さそうですし、それに 　先頭の「何とか」または。のすぐ後から・・・ という解釈は意味不明。 　|。 はどのように解釈すべきなのでしょうか。 お手数をお掛けします。
log(フォルダ) ┣200907.txt ┣200906.txt ┣200905.txt ┗num.txt 日記のログなのですが、logフォルダの中には上記のようなデータが有り、現在はファイルを開くとき下記のプログラムで開いています。 open(FILE, './log/200907.txt') or die "$!\n"; my @file = <FILE>; close(FILE); これを、新しい月の「200908.txt」が作成されたとき、自動的に「200907.txt」→「200908.txt」に更新する方法を教えていただけないでしょうか？ あと、この日記は記事毎にNo.が割り振られており「num.txt」には、最新ナンバー数字のみ記録されてます。
Yahooのトップページのトピックスをクリックすると、 そのトピックスにはコメントができるものがあります。 （一種の掲示板ですよね） そこには、「私もそう思う」「私はそう思わない」 というボタンがあります。 そして、「並べ替え」「そう思う順」「そう思わない順」 「注目順」「共感順」というボタンがあって、並べ替えが できるようになっています。 このような”掲示板”を作るにはどうしたらいいのでしょうか？ 一応、「Perl/CGI入門」のような本を読んでみましたが、 「並べ替え」が出来るような記述は見当たりませんでした。 もっと、たくさん本を読んで勉強すれば出来るのかもしれませんが、 やみくもに本を買うのは得策ではないと思うので、 経験者の方、知識のある方のアドバイスをいただけたら 幸いです。 どうか、ご教授願います。
perlの正規表現で、Aというファイルの中から、2に マッチしたらマッチした行から}まで、抜き出すというのは どのようにやるのでしょうか？ # ファイルAの内容 1 parameter { xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz } 2 parameter { aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb } 3 parameter { ccccccccccccccccccccccccccccccccc ddddddddddddddddddddddddddddddddd } 欲しいデータとしては 2 parameter { aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb } を取得したいです。 以上宜しくお願いします。
Ｐｅｒｌを勉強し始めました。 いままでプログラミングを組むことがなかったので、全くの素人 なんですが、いきなり壁に当たりました。 変数のところを勉強してるんですが、 ＄ａ＝1； ＄ａ　+＝２； ｐｒｉｎｔ　＄ａ みたいな感じで書かれてるのをみて、ふと疑問が。 ＄ａに１を代入する。 ＄ａに、＄ａ＋２を代入して、＄ａを表示ってことですよね。 ＄ｂ　+＝２；にして、ｐｒｉｎｔ　＄ｂにしないで、なんで ＄ａに、＄ａ＋２を代入するんでしょうか？？ ＄ａは、すでに１を代入していて、＄ａは『１』としてるわけじゃないですか。 その＄ａに、また＄ａ＋２を代入するという発想がさっぱり理解できません。 普通に、＄ｂにすればいいじゃん、その方がすっきりするじゃん、って思うんですが、なんでこんな記述方法にするのかわかりやすく教えていただけたら助かります。
PerlでCGIを製作しています。 一覧画面-個別画面-編集画面 というページ構成ですが、一覧画面から個別画面、個別画面から編集画面へはURLの後に?をつけて要はGETでデータの受け渡しをしています。 編集画面に入った後、ボタン(submit)を押すとPOSTでデータを受け渡し、内部処理をしたいのですが、編集画面内では受け渡したいデータを<form method="post"></form>で囲んでいるにもかかわらず、どうやらGETで送られているようで、受け渡し先のところで$ENV{'REQUEST_METHOD'}を表示するようにして確認してみてもGETと表示されてしまいます。 きちんとPOSTと指定しているのになぜGETで送られてしまうのでしょうか。 （受け渡し前の画面のURLは、編集画面にくるための都合上http://○○.com?aaa=bbbのようになっています） また、どうすればPOSTで送ってくれるのでしょうか。 ヒントでも何でも結構ですので是非御指南ください。 よろしくお願いします。
「UPFILE1」→「画像１」 「UPFILE2」→「画像２」 このように置き換えたいのですが「UPFILE4」まであり、複数行でしか作る事ができません $a =~ s/UPFILE1/画像１/g; $a =~ s/UPFILE2/画像２/g; $a =~ s/UPFILE3/画像３/g; $a =~ s/UPFILE4/画像４/g; 上記のプログラムを、１行に纏められないでしょうか？ ()で繋げてみたりしたのですが、どうにも上手くいきません。 どなたか、よろしくお願いいたします。
ファイルをアップロード/ダウンロードできるスクリプトを作って運用しています。 ２年ほど運用して特に問題なかったのですが、今日、ユーザーからダウンロードできないと問い合わせがきました。 Conten-typeでアプリケーションをしっかりと指定していないことが原因かもしれないと思っているのですが、 どうでしょうか？ 言語はPerlです。 アップされたファイルは、ダウンロード時に、頭に以下を付けて送信しています。 エクセルやpdf、ファイルの種類が何になるか分からないため、Content-typeには applicationと記入しています。これが問題でしょうか？ ファイル毎に拡張子を見て、Content-typeを書き直すというのが普通なのでしょうか？ print "Content-type: application\n"; print "Content-Disposition: attachment; filename=$in{'filename'}\n\n"; 現象 ファイルをダウンロードしようとすると、エラーメッセージを表示 「サーバーが見つからないかDSNエラーです」 ブラウザ：不明 OS:不明 セキュリティー関連ソフトの有無：不明 すみません、ユーザーにもっと詳細を聞くべきだとは思いますが、予めこちらで調べておいてからコンタクトとろうと思っています。
初心者です。 今、問題をだして、フォームに正解が入力され、送信されると、 その問題番号と解答時間を、別のテキストファイルに 書き込むcgiファイルを作ってなんとかやっています。 約250人を相手にしているので、同じフォルダを約250個作っています。 各フォルダにある上記のテキストファイルを見て、学習履歴を確認しています。 今の私には、1問題1ファイル、ということしかできません。 それで、各フォルダにたくさんの新しい問題ファイルをコピーするのが大変です。 問題ファイルのフォルダを１つにして、「誰がその問題にいつ解答したか」をテキストファイルに記録する方法をお教えください。 同じファイルに複数の人がアクセスして解答するとき、 アクセスした人とその結果を、テキストファイルなどに記録する簡単な方法はあるでしょうか？ Windows XP に Apache と perl を入れて、LANの中だけでやっています。 よろしく、お願いいたします。
＠result として格納されるデータが以下だとすると Type escape sequence to abort. Sending 5, 512-byte ICMP Echos to 201.0.0.11, timeout is 2 seconds: !!!!! Success rate is 100 percent (5/5), round-trip min/avg/max = 4/5/8 ms この Percentの前の数値の値を読み取るのにどうすればいいでしょうか？ Success rate is 100 percent (5/5), round-trip min/avg/max = 4/5/8 ms が$resultの変数であれば if ($result =~ /(\d*) percent /){ print "$1 \n"; } みたいな感じで確認できるのですが。 @がタブを含めた複数行あるのでいまいち分かりません。 初心者ですみませんが宜しくお願いいたします。
ファイルをサーバーへ格納するプログラムを検索して作成しました。 見よう見まねなのでおかしい部分があるかもしれません。 entry.cgi #!/perl/bin/perl my $buffer; my $query = CGI->new; my $fh = $query->upload('file') or die(qq(Invalid file handle returned.)); # Get $fh my $file = $query->param('file'); my $file_name = ($file =~ /([^\\\/:]+)$/) ? $1 : 'uploaded.bin'; open(OUT, ">$file_name") or die(qq(Can't open "$file_name".)); binmode OUT; while (read($fh, $buffer, 1024)) { # Read from $fh insted of $file print OUT $buffer; } close OUT; sample.html <HTM><BODY> <FORM METHOD="POST" ENCTYPE="multipart/form-data" ACTION="./entry.cgi"> <TABLE BORDER="1"> <TR><TD ><B>CSVファイル</B></TD> <TD ><INPUT TYPE="FILE" NAME="filename"></TD></TR> <TR></TR> </TABLE> <BR> <BR> <INPUT TYPE="SUBMIT" NAME="GO" VALUE=" 登録の実行 "> </FORM> </BODY></HTML> 上記のプログラムを実行すると 「CGIWrap Error: Script Execution Failed」と表示されてしまいます。 500のサーバーエラーと同じと調べてわかったのですが、どこがどうおかしいのか?わかりません。 perlの記述が今まで自分が使用していたものと勝手が違うので分からない状態です。 アドバイスもらえると幸いです。
サブルーチンの呼び出し、例えば sr($p); という呼び出しがあった場合、サブルーチンsb()の中で、引数は@_として扱われて、 　$p の値などは 　$_ で知ることが出来ます。 それではサブルーチンsb()の方から、 　$_ が呼び出し側で何と呼ばれているか知ることは出来るのでしょうか？ つまり、この場合、$_は呼び出し側で 　$p と呼ばれているわけですが、この呼称をサブルーチン側で知ることは出来るでしょうか。
prel作成中で壁にぶつかってしまったので質問させてください。 以下のプログラムでdata.txtのデータを$dataに読み込みます。 $datfile = "./data.txt"; open(IN,"<$datfile"); $data = <IN>; close(IN); data.txtのデータは以下のものが入ってます。 --------------- 田中 石田 佐藤 --------------- @dataとすると取り込み出来るのは分かったのですが、どうしても$dataでとりたく思ってます。 上記のスクリプトの場合は、先頭の行の「田中」のみ格納されてしまってます。 改行されていても、1つの変数として取り扱いたいです。 不足している内容があるかもしれません。 すみません。よろしくお願いいたします。
ブレークポイント用に以下のようなサブルーチンを作ってみました。 　sub bp { 　if(not defined $_[0]){return}; 　 　open(OUT,">>$bpfile") || err('ファイルが開けません。bp'); 　eval{flock(OUT,2)}; 　 　my $num=@_-1; 　print OUT $_[0]; 　for my $i(1..$num) { 　print OUT "\t".$_[$i]; 　} 　print OUT "\n"; 　 　close(OUT); 　} ただ 　bp(); と記述すれば何もせず、本当にただのブレークポイントですが、引数に変数を持ってくれば、その位置での変数の値をファイルに記録してくれます。 ただ引数が連想配列だった場合、キーや値が表示される順番が毎回違うので使い勝手に難があります。変数の型をサブルーチン側で判別して、コードを書き分けることは出来ないでしょうか。
if ( $input{'aaa'} !~ /^[A-Z]{2}$/ ) { &Error("エラー"); } 上の正規表現は 『半角アルファベット2桁以外だったら』 エラーという表現ですが、 『半角アルファベット2桁または半角アルファベット+数字一桁以外だったら』 エラーにしたいのですが、どのような記述をすればいいのか教えてください。 よろしくお願いします。
perlプログラミング初心者です。 質問なのですが、ある配列array1に関して foreach(@array1){ ・・・・・・ } という操作をしています。この操作を@arrray2,@array3,@array4に関して、ループを使って行いたいのですがどのようにすればよいのでしょうか。配列の配列を作って @Array = qw/ @array1 @array2 @array3 @array4/; として foreach構文を使うと、@array1が展開されずに処理できませんし・・ 初歩的なことだと思いますがアドバイスお願いします。
初めまして。 私は、今perlを勉強しているのですがperlでどの程度のことが出来るようになったら、人に「俺は、perlが使えるぜ」って言ってもいいんでしょうか？
文字コードで行き詰まりました。 同じUTF8で全く同じ文字列であるにも関わらず（外見上は全く同じにも関わらず）、２つの生の文字コードが異なるということが起きて、どうしたらいいのかわかりません。 WEBサイトから「あいう」という文字を取り出してきて、そいつの文字コードを、生で表示させました。 すると、 E38182E38184E38186 になります。ところが、perl文の中で$testStr="あいう"; として、そいつを同じように１６進数で表示させると、 304230443046 と、違うものになっています。 にも関わらず、「WEBからとってきた文字列」も「perl内で書いた文字列」も両方「Jcode::getcode()」でその文字コードを調べると、utf8になります。 しかも、それら両方とも、print()をすると、同じように「あいう」と表示されます。 「perl内で書いた文字列」の方では、問題なくDBに入れれるのですが、「WEBからとってきた文字列」の方は、文字化けします。 「WEBからとってきた文字列」を「perl内で書いた文字列」のような文字コードに変換するにはどうすればよいのでしょうか？ なぜ同じUTF8として認識されているのでしょうか？ もう気が狂いそうです。 どなたかお助けください。お願いします。 環境 Ubuntu perl v5.8.8 built for x86_64-linux-gnu-thread-multi 以下は詳しいソースです。 use utf8;#この質問に関係がありそうなモジュールです use Jcode; use DBI; use URI; use YAML; use Switch; use Web::Scraper; use HTTP::Request::Common; use LWP::UserAgent; use HTTP::Cookies; use HTTP::Request::Common qw(POST); ##Webサイトから文字列「あいう」を取得してくる。取得過程は略してます。 $testStrFromWeb=@titleArr[$i];#ちなみにWebサイトの文字コードはUTF8です。 print("testStrFromWeb:".$testStrFromWeb);#「あいう」と表示されます。 ##Webサイトから得た文字列「あいう」の生の文字コードを表示。 $strCode=$testStrFromWeb; $strCode =~ s/(.)/sprintf "%X", ord($1)/eg; print "$strCode\n";#E38182E38184E38186と表示されます ##Webサイトから文字列「あいう」の文字コードの種類を表示（utf8が返ってくる） my $getcode = Jcode::getcode(\$testStrFromWeb); print $getcode ,"\n";#utf8と表示される ##perl内で書いた文字列。 $testStrInPerl="あいう"; print("testStrInPerl:".$testStrInPerl);#「あいう」と表示されます。 ##perl内で書いた文字列「あいう」の生の文字コードを表示。 $strCode=$testStrInPerl; $strCode =~ s/(.)/sprintf "%X", ord($1)/eg; print "$strCode\n";#304230443046と表示されます ##perl内で書いた文字列「あいう」の文字コードの種類を表示 my $getcode = Jcode::getcode(\$testStrInPerl); print $getcode ,"\n";#utf8と表示される ここまで読んでくださってありがとうございます。
質問です。 Perlで以下のような処理をしたい場合どういうコードを書けばよいでしょうか 処理の内容を簡単に説明しますと、 店舗情報を格納しているDBがあるとします。 DBから取得した、X件の情報を、子がN店ずつのツリー構造にした上で、DBの取得してきたレコードに親の店舗IDなりを更新するスクリプトです。 親が1店舗からはじまり、子がN店の構成です、子はその下に孫としてまたN店もちます。 分かりづらいですね・・・もう少し細かく説明します。 1.DBから店舗情報を取得してくる 2.10件の店舗があったとする、IDがshop1,shop2,shop3...shop10と続く 3.その中からランダムで一件決める。今回はshop3とする 4.ランダムでshop3の子をN件決める。今回はshop3の子をshop1とshop2とする(N = 2とする) 6.今度はshop1とshop2の子を決める(残りのshop4～10より決める) 7.4の処理に戻り、孫世代、ひ孫世代を決定する 8.端数は一人っ子ができても問題なし、子なしに落ち着くまで繰り返す 9.すべての店をチェックして親をレコードに更新する。 といったような流れの処理になります。 処理の流れは浮かんでいるのですが、Perlでどう書けばいいのか四苦八苦しています。 (自分のIDと親のIDを結びつけつつ保持し続けておくのがとくにわかりません・・・) 以上になりますがよろしくおねがいします
「車」の構造体を以下のように記述します。 my %dat=( 'ID'=>'Car0' ,'Cue'=>\@cue ); $car[0] = \%dat; これで print car[0]{ID}; とすると内容にアクセスできます。 車の行き先を車ごとのスタック配列（@cue）にpushさせたいのですが、 push関数は書式が push(<pushする配列>,<pushしたい要素>) なので push( $car[0]{cue} , $elem ) とか push( @$car[0]{cue} , $elem ) とか push( "@".$car[0]{cue} , $elem ) では無理でした。 （とりあえず、単一の配列に連続して <cueの値>と<$car[0]{ID}>をpushして、 取り出すときも2個同時に…なんて妥協も考えましたが） うまい方法あればお願いします。
下記のような文字列($str)に対して置換を行い、 my $str = qq{ AAA = BBB - 'CCC' }; $str =~ s/★正規表現★/sprintf("DDD(%s)",$1)/xmsge ; 変換後 $str = DDD(AAA) = DDD(BBB) - 'CCC' ; を実現する★正規表現★を書きたいと思っています。 　・AAA,BBB,CCCは[\w]で構成される文字列です。 ですが、シングルクォーテーション('')で囲まれていない文字列にマッチする正規表現が書けなく困っています。 一度、シングルクォーテーションで囲まれているものも含めて全てDDD()をつけて、そのあとで、シングルクォーテーションを含むものは元に戻すことでやりたいことは実現できているのですが、1行で実現できる方法を探しています。 アドバイスよろしくお願いします。
HTMLでWEBサイトを作るときはメモ帳さえあればできますが PerlでWEBサイトを作るときは何かインストールしないとダメですか？
こんにちは。現在、組まれていたCGIを編集しており、いろいろ試行錯誤した結果、煮詰まってしまったので知恵を貸していただきたいと思い投稿致しました。 Perlに関しては初心者で、編集しながら少しずつ理解するのがやっとのことなので、的違いなことを言っていたら申し訳ありません。 やりたいことは、外部から入力されたデータを表示させたいのですが $urlという変数が入力された場合と、そうでない場合に表示方法を変えたいのです。 ↓１．外部から入力するためのフォーム ------------------------------------ <form action="abc.cgi" method="post"> <input type="hidden" name="mode" value="regist"> お名前<br> <input type="text" name="name" value="" size="40"><br><br> URL<br> <input type="text" name="url" value="" size="40"><br><br> コメント<br> <textarea name="comment" cols="50" rows="7"></textarea><br> <input type="submit" value="送信する"> </form> ------------------------------------ ↓２．外部から入力されたものを、datファイルに書き出ししている部分 ------------------------------------ truncate(DAT, 0); seek(DAT, 0, 0); print DAT "$no\t$now\t$in{'name'}\t$in{'comment'}\t$ENV{'REMOTE_ADDR'}\t$in{'url'}\t\n"; print DAT @data; close(DAT); ------------------------------------ ↓３．datファイルからデータを読み込み、最後に表示するための部分（今回はここの部分の編集をしています） ------------------------------------ while (<IN>) { my ($no,$date,$name,$comment,$ip,$url) = split(/\t/); print "<div class=\"line_wrap\">"; print "<div class=\"line_left\">$date\n</div>"; print "<div class=\"line_right\"><a href=\"$url\">\n$comment</a>"; print "\n</div>"; print "</div>"; } close(IN); ------------------------------------ 今現在の状態では、URLが入力されていない場合でも、空リンクがついてしまいます。 それを、入力されている場合と入力されていない場合で変えたいのですが、Excelで言うif関数のようなもの（while？だとしたら、whileの中にwhileを入れられるのか、どう入れればよいのか・・・）を使わなきゃいけない、というところで行き詰ってしまいました。 （URLを入力しなくても、datファイルには“入っていないよ”という、“空”が入ってしまっていて、if系も使えないかもしれないと不安も感じています。） それ以外でも全然かまわないのですが、何か方法がありましたら お教えいただけるとうれしいです。よろしくお願い致します。
自分なりにいろいろ試してみたのですが出来なかったので、お教えいただきたいと思い、質問させていただきます。 現在、perlを使ってCGIを組んでいます。 （というよりは組まれていたCGIを編集しています） その中で、外部から入力された文字列データを変数に格納し それをprintで書き出しています。 以下のような形です。 -------------------------------------------------- open(IN,"$datfile"); while (<IN>) { my ($no,$date,$name,$comment,$ip) = split(/<>/); print "<div class=\"line_wrap\">"; print "<div class=\"line_left\">$date</div>"; print "<div class=\"line_right\">$comment</div>"; print "</div>"; } close(IN); -------------------------------------------------- なんとなくでしか理解できてないのに編集したのでおかしい部分もあるとは思いますが・・・。 今回お伺いしたいのは $comment という変数内に、HTMLタグが入っていた場合、そのままの状態で吐き出されてしまうことになり困っています。 変数内の文字列に記載されているHTMLを、HTMLとして認識して実行したいのですが（要はリンクを貼りたい）可能でしょうか？ 外部から入力されているものですので、HTMLがあったりなかったりします。 何か方法があれば、教えていただきたいです。 よろしくお願い致します。
データファイルを一行ずつ読み込んで、文字列を一文字ずつコンマ区切りにしたいと思っています。たとえば、 　　xyz → x,y,z としたいと思っています。 今、data.txt に 　abc 　defgh という２行が書いてあります。 　perl -nla -e '@chars= split(//,@F[1]); print join(",",@chars);' data.txt とすると 　a,b,c 　d,e,f,g,h という出力が無事に得られました。 どうせ、data.txt は一列しか使っていないので、 @F[0] の代りに $_ を使ってみました。 　perl -nle '@chars= split(//, $_); print join(",",@chars);' data.txt しかし、結果は 　a,b,c, 　d,e,f,g,h, のように、各行の最後に余計なコンマが付いてしまいます。 なぜでしょうか？ 一列しかデータがないので、@F[0] と $_ は同じだと思っていたのですが、なにか違うのでしょうか？
SSL暗号化に関して質問があります。 https://のアドレス下で、ローカルからサーバにデータをPOSTした後、サーバから処理結果等のデータをローカルにかえす場合、行きと帰りのデータどちらとも暗号化されているのでしょうか。 行きのデータは暗号化されているでしょうけど、帰りのデータが暗号化されるのかちょっとわからなかったもので・・・。
はじめまして！ 表記のとおり、CSVファイルのデータを以下のように整形して新しいCSVファイルを作成したいと考えています。 プログラミングはperlとPHPを多少かじったくらいですが、それらで有効なスクリプトを作成することは可能でしょうか？？ ■元データの例 "sakura","5","6","2" "kiri","5,"3","10" "bara","5,"3","10" ■新しいCSVファイルの例 "bara","5,"3","10" "tanpopo","0","0","0" "sakura","5","6","2" "kiri","5,"3","10" １番初めの列をキーとして、並び替える。 （並び順はあらかじめ決まっている。） 元データに存在しないキーは、２列目以降の値に０を入れて行を挿入する。（上記例ですとtanpopoが当てはまります） どなたかヒントだけでもいいので、ご教示頂けると幸いです。 よろしくお願いします。
HTMLで２つのフレームを作成しています。 上のフレームのhrefでCGIを実行し、下のフレームのHTMLファイルを作成しなおした後、再度LocationでHTMLを表示していますが、F5（最新の情報を更新）を押さないと作成しなおしたHTMLが表示されません。 何か方法はありませんか？
前回の質問ではお世話になりました。 おかげで上手く動作させることが出来ました、ありがとうございます。 今回は自動処理について質問したいと思います。 ハッシュに入っている複数の文字列 （あい、あいう、あいうえ、あいうえお） を”あい”としてまとめ、カウントしたいです。 アルゴリズムとしては、前文”あい”が共通しているので、”あい”を含むものを検索してカウントすれば出来ると思うのですが、正規表現など開発の際に単語を指定せずに出来るものなのでしょうか？ 少々伝わりにくいと思うので以下に要点をまとめます。 (1)ハッシュに入っている類似文字列について、ひとまとめにカウントしたい。 (2)その際、開発の段階で文字列を指定しない（正規表現のようにパターンを設けない）で、(1)の処理が出来るかどうか。 どのような形でも良いので、複数ある単語をひとつにまとめ、尚且つキーワードを設けないようなものと言われたので、私としても(2)をどうして良いのか分かりません。 実現可能か不可能かだけでも、ご意見頂ければ嬉しいです。 宜しくお願い致します。
HTMLデータの中から、狙った文章をPerlで抜き出すプログラムを書こうとしています。 (1)urlが並んでいるテキストファイルから、１番上を$urlに入れる (2)urlからHTMLを取得する (3)HTMLを解析、文字列の取得 (4)「author: title: 」のように、形を変えて、新たなテキストファイルに１行printする。 (5)すべてのurlに繰り返す と動くプログラムです。 LWP::Simpleのget関数を使うか、wgetを使うかも考えています。 ここでの質問は、(1)の、URLを上から順に引っ張ってくるプログラムの作り方を聞きたいです。 $i行目の改行までを取得、という考えでいいでしょうか？ ベターな方法や、少しでも参考になる情報がありましたら教えていただけると嬉しいです。
お世話になります。 早速ですが、サイトで調べ、 以下のコーディングでipアドレスと、ホスト名？を表示したいのですが、 ｐｅｒｌのシミュレーションで実行すると表示されるのですが、 私が借用しているサイト（infoseek）ではipアドレスしか表示されません。 （ipアドレスを、直接$addrにセットしても同じ結果です。） サイトにより、制限等が掛けられているのでしょうか。 コーディングの誤りであれば指摘していただきたくお願いします。 $addr = $ENV{'REMOTE_ADDR'}; $host = gethostbyaddr(pack("C4", split(/\./, $addr)), 2); print "$host\n"; print "<br>\n"; print "$addr\n"; 以上、宜しくお願いします。
以下のテキストデータを、それぞれ*までの一行毎に配列に代入したいのですが、if文で*を検索しようとしてもうまくできません。 あいうえお* かきくけこ* さしすせそ* たちつてと* あいうえお* さしすせそ* あいうえお* 以上のものが元のテキストデータで、「あいうえお」を配列の0番目の要素、「かきくけこ」を1番目の要素、「さしすせそ」を2番目の要素・・・というようにしたいです。 現在のプログラムは、 hash.pl use encoding 'shift-jis'; $pattern = '*'; @txt1 = (); while(<>){ if($_=~/$pattern/){ $in=index($_,$pattern); $temp=substr($_,0,$in); push @txt1,"$temp"; } } print @txt1; となっているのですが、これをコマンドプロンプト上で動かすと、 Quantifier follows nothing in regex; marked by <-- HERE in m/* <-- HERE / at hash.pl line 5, <> line 1. というメッセージが表示されます。 *関連で問題があるのはわかるのですが、どうしても解決策が見つかりません。 よろしくお願いします。
初心者です。よろしく、お願いいたします。 フォームに入力された値を $value　として、 正解　hello　が フォームへ　入力されたら　「正解です」　と　表示するようにしました。 my $ans = "hello"; #省略 if($value eq $ans){ print "正解です"; そして、herro　と　入力されたら、「heまでOK」　と　表示するようにしました。 elsif ($value =~ /^he/){ print ('he　までOK'); } このとき、herro　と入力して、Enter　すると　フォームのカーソル（ピコピコ動くところ）が、フォームの一番左へ行ってしまいます。 これを避けて、カーソルが、フォームの右端に行くようにしたいのですが、無理でしょうか？　次の入力を容易にしたいのです。 お教えください。よろしく、お願いいたします。
FlashよりLoadVarsクラスを使用し、CGIへデータを送信しようとしていますが・・・。 なかなか成功しません；； Flashのアクションスクリプト、およびCGI（Perlで）スクリプトをお教えいただけないでしょうか？ -詳細- ボタンに LoadVars.send(); LoadVars.sendAndLoad(); などを使用し、Flash→CGIへ送信し、結果を表示したり、Flash→CGIへ送信し、CGIで送信した変数などを処理した後、Flashより変数を受信し、表示する。 -例- 1.Flashよりテキストフィールドに文字を入力し、CGIへ送信。 2.CGIにて受信後、受信した文字をopenで保存（.txtファイル作成） 3.先ほどCGIより保存したtxtファイルをFlashから読み込む。 -環境- 楽天さんのiswebライトでPerl言語を使い、Content-typeをHTMLでCGIを作成しております。 ご教授いただければ幸いです。 どうか、よろしくお願いいたしますm_ _m
以下のサブルーチンを記述したらエラーになります。 どこか間違っておるのでしょうか？ 宜しくお願いします。 #------------------------------------------------- sub head { print <<"EOM"; <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <html> <head> <title>メールフォーム</title> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> </head> EOM } #-------------------------------------------------
お世話になります。 現在perlにてプログラムを作っているのですが、ファイルのコピーに関してつまずいたので教えていただけますでしょうか。 formからファイルが選択されてそれが、$inputに入っているとします。 そのファイル「file」という名前でそのままコピーしたいと考えています。 そこで copy("$input", "file"); としました。 ですが、選択したファイル場所に日本語が含まれているとエラーになっているようで処理がされません。 ちなみに、日本語が含まれていないファイルに関しては問題なく動作しております。 URLエンコードが必要のようですが、いろいろ調べてもうまくいかなかったので質問をさせていただきました。 処理の前に$inputをどのようにすればいいのでしょうか。 教えていただけますでしょうか。 よろしくお願いします。
現在Perlにて正規表現を用い，アクセス者のログが納めてあるlog.datからデータを検索し集計するといったアルゴリズムです． ところが正規表現を用いたのは良いものの，アルファベット以外をパターンとして使用したとき，データを呼び出すどころか表示されない状況に陥ってしまいました． elsif($referer =~ /abcd/i) { $word2 = "abcd"; } 上記のコードは，パターンがアルファベットで構成されているため，正常にシステムが動作します． elsif($referer =~ /あいうえ/i) { $word2 = "あいうえ"; } しかし，上記のコードはパターンが平仮名で構成されているため，冒頭で記している問題が発生してしまいます． そこで (1)パターンにアルファベット以外のものは使えるのか． (2)パターンにアルファベット以外のものを使いたいときはどうすればいいのか． についてお教えください． また正規表現のほかに，文字列を検索し，頻度をカウントすることに長けているコードがございましたらお教え願います． 以上の内容で不明な点等ございましたら随時対応致します． 宜しくお願いします．
perlにて、 $str = '&#x8A2D;&#x5B9A;(Settei)'; を、 $result = '設定(Settei)'; に変換させたいのですが、 文字コードはS-JISのASCIIエンコードだと思うのですが、 グーグルで幾ら検索しても、変換方法が変わりません。 どの様にすればよいでしょうか? また、変換方法をどの様に見つけられたか教えていただけると幸いです。 宜しくお願い致します。
KENTさんのフリープログラムのコードをフォローしているのですが、 if (-e $sendmail) みたいなコードが出てきます。 他にも 　if (-f $_) 　if (-d $tmpdir) 　if (-r $tmpdir && -w $tmpdir && -x $tmpdir) などが出てきます。 この 　-d -e -f -r -w -x って、一体何なのでしょう。
ご存知の方がいましたら、教えて下さい。 ＨＰとメールが利用可能なホスティングを活用しています。 環境は以下となります。 (1)ＨＰはホスティング (2)メールは自社環境 実施したいこと ＨＰから同じドメインの自社メールサーバーへメールを送信 ＨＰ（www.xxxxx.co.jp）からaaa@xxxxx.co.jpへメールを送ると、同一ドメインに対するメールは、レンタルサーバー内にあるメールへの送信となり、外部に送信できません。 今は以下のように記述しています $mailto = 'aaa@xxxxx.co.jp' ; メールサーバーを指定してメール送信する記述方法などがありましたら、アドバイスをお願い致します。
Check.pmが 　o:\public_html/post_pervice/cgi/lib にあります。 このモジュールを利用するために以下のようなプログラムを書きました。 　　#! /usr/bin/perl -w 　　use CGI::Carp qw(fatalsToBrowser); 　　unshift @INC, "o:/public_html/post_service/cgi/lib"; 　　print join "\n",@INC; 　　use Check; この中の 　use Check; をコメントで伏せて動かすと、 　　o:/public_html/post_service/cgi/lib 　　O:/usr/site/lib 　　O:/usr/lib のような表示がなされるので、 　unshift @INC, "o:/public_html/post_service/cgi/lib"; はちゃんと機能しているようです。 しかし 　use Check; のコメントを外して動かすと、 　　Can't locate Check.pm in @INC (@INC contains: O:/usr/site/lib O:/usr/lib .) at O:\public_html\post_service\cgi\showINC.pl line 8. 　　BEGIN failed--compilation aborted at O:\public_html\post_service\cgi\showINC.pl line 8. のようなエラーが出てしまいます。 何がいけないのでしょう。
URL転送するプログラムを作成してます。 以下のURLでアクセスします。 http://hoge.com/index.cgi?mou=1 以下のデータ構成となってます。 dat.cgiのデータ 1<>http://google.co.jp/ 2<>http://yahoo.co.jp/ 3<>http://goo.ne.jp/ 4<>http://msn.co.jp/ この場合1レコード目のURLを転送しgoogleのサイトを表示させたいのですが、初歩的なミスでサーバーエラー 500を表示しています。 index.cgi (ここから) #!/usr/bin/perl # 文字コード取得 require './jcode.pl'; $datfile = "./dat.cgi"; open(DB,"$datfile") || &error("Open Error : $datfile"); @lines = <DB>; close(DB); @new=(); foreach $line (@lines) { $flag=0; ($num,$mourl) = split("<>", $line); foreach $mou (@DEL) { if ($mou eq "$num") { print "Location: $mourl";} } } (ここまで) 同じホルダーに jcode.pl dat.cgi は入っています。 申し訳ありません。よろしくご指導をお願いいたします。
ユーザー検索機能が出来るようにカスタマイズしています。 member.datにユーザーデータが入ってます。 member.dat $name,$add,$mail 実データ 田中誠,大阪府,hoge@hoge.com 伊藤武,東京都,hoge@hoge.com 田中信也,栃木県,hoge@hoge.com 中井洋子,東京都,hoge@hoge.com 石橋浩史,京都府,hoge@hoge.com $keywordはこのプログラムの前に、<INPUT size="30" name="keyword">で格納しています。 $keywordには「田中」とデータが入っています。 検索プログラム　user.cgi 省略・・・ open(DB,"$memfile") || &error("Can't write $memfile"); @lines = <DB>; close(DB); foreach ($start .. $end) { ($name,$add,$mail) = split("<>", $lines[$_]); if ( $name!~ /($keyword)/){ print <<"EOM"; 該当の名前 $name EOM exit; } } 以下省略・・・ $keyword　に　「田中」と入っていた場合、1件目と3件目が表示されると思っているのですが、実際には1件目だけしか表示されません。 ifの条件式を変えればうまくいきそうな気がしてますが、よくわかりませんでした。 ご指導いただけますと助かります。 以上、よろしくお願いいたします。
KENTさんの作ったメールフォームのコードをフォローしています。 Clip Mail v1.1です。 http://www.kent-web.com/data/clipmail.html その中で、メールフォームから送られてきたデータを取り入れるサブルーチンに関する質問です。 　undef(%in); $in{$key}.="\0"; 　$in{$key}.=$val; 最初の 　undef(%in); はサブルーチン中の冒頭にあり、残り２行とはかなり離れた位置にあります。 これまで私がこういうコードを書く場合、 　%in; 　$in{$key}=$val; と書いてきました。この他、変数の宣言にはourとかmyとか付けてますけど、KENTさんがこのプログラムを書いた当時はmyはともかくとして、ourを付けることはあまり普及していなかったのではないでしょうか。 さて、C言語などだと変数を用いる前に宣言だけでなく初期化も行っていないといけないわけですが、Perlの場合は初期化されていない変数はundefとして自動認識されます。 　undef(%in); と、私がやっているような 　%in; の違いは初期化もきちんとしているか、ただ宣言だけで初期化はPerlにお任せしているかの違いです。Perlの仕様上はどちらでもいいでしょう。 分からないのは残りの２行のコードです。 　undef(%in); でキチンと初期化してある変数に対して、まず 　$in{$key}.="\0"; とします。なんでNULL文字なんか入れないといけないのでしょう。それも単純に 　$in{$key}="\0"; ではなくて、 　$in{$key}=$in{$key}."\0"; です。 更に３行目で 　$in{$key}.=$val; とするわけですが、こんな２行かけた代入を行わなくても、私がこれまでやってきたように 　$in{$key}=$val; で実用上の用は足りると思うのですが・・・ １行目は何となく分かるんです。変数の初期化は、Perlに自動認識の機能があるのを知っていても、他の言語を知っている方は、やはり言語任せに出来ないのではないでしょうか。 残りの２行のコードも多分そんなところだと思います。実用上は私のやり方で足りると思うので。ただC言語なんかでもこんな代入の仕方をしているのを私は見たことがないし、まあ、こんな代入の仕方をしないといけない言語もあるのでしょうが、ではその言語でこのやり方をせずに私がやるような方法を取った場合、どんなエラーが出るのでしょう。 どなたか分かる方、教えていただけないでしょうか。
perlで書かれた以下のソースで分からないことがあります。 $gazouno = time; foreach ( 1 .. $#lines ) { ( $db_name[$_],$db_input[$_],$db_value[$_],$db_tag[$_],$db_list[$_],$db_need[$_] ) = split(/<>/,$lines[$_]); if ( $db_value[$_] eq "pic" ) { if ( $in{'upfile'} ) { &UpFile; $flag = 0; foreach $confirm_type (@confirm_type) { if ( $tail =~ /\.$confirm_type$/i ) { $flag = 1; last; } } if ( $flag ) { $in{"item$_"} = "<img src=\"$ImgUrl$gazouno$tail\" width=$W height=$H>"; } } } $db_valueに"pic"を入力し画像を添付した場合、$gazouno = time;（現時刻）としているためファイル名が現在時刻に書き直され保存されます。 そのため2枚目以降に添付した画像も1枚目と同じファイル名になってしまい保存できません。 そこで、$gazounoの後に登録順に番号を振りたいのですが（$gazouno-1,$gazouno-2,$gazouno-3・・・というように）、 どのようにすればいいのか分かりません。 例えば1枚目のファイル名1245756792.jpgを1245756792-1として以後1245756792-2,1245756792-3とする方法を、どなたかご教授お願いします。
以下の use constant SMAX => 50;とuse constant CMAX => 10; を $SMAX = 50; $CMAX = 10; に変更し、if ( SMAX < $max ){ $n = $max - SMAX; }も if ( ＄SMAX < $max ){ $n = $max - ＄SMAX; } と変更しましたが、機能してませんでした。 どこが間違っておりますでしょうか？ 宜しくお願いします。 以下がCGIです。 #!/usr/bin/perl # 保存するコメント数 use constant SMAX => 50; # 表示するコメント数 use constant CMAX => 10; #----------------------------- if ($ENV{'REQUEST_METHOD'} eq "POST"){ read (STDIN,$buffer,$ENV{'CONTENT_LENGTH'}); } if ($ENV{'REQUEST_METHOD'} eq "GET") { $buffer = $ENV{'QUERY_STRING'}; } @list = split (/&/,$buffer); foreach (@list){ ($key,$value) = split (/=/,$_); $value =~ tr/+/ /; $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/ pack ("C",hex($1))/eg; $getdata{ $key } = $value; } $x = $getdata{ 'px' }; $y = $getdata{ 'py' }; $comment = $getdata{ 'com' }; $file = 'comment.dat'; open (IN,"$file"); @list = <IN>; close (IN); chomp(@list); $max = @list; if ( $x != '' ){ $writedata = $x.'<>'.$y.'<>'.$comment; if ( SMAX < $max ){ $n = $max - SMAX; } else{ $n = 0; } open (OUT,"> $file"); flock(OUT,2); for ( ; $n < $max; $n++ ) { print OUT $list[$n]."\n"; } print OUT $writedata; close (OUT); } if ( CMAX < $max ){ $n = $max - CMAX; } else{ $n = 0; } print "Content-type: text/html\n\n"; for ( ; $n < $max; $n++ ) { print $list[$n]."\n"; } if ( $x != '' ){ print $writedata; } exit ;
下記コードは、同じ意味だと思っていたのですが、 実行すると違った結果が表示されます。 何故でしょうか? my $string = 'A-test'; unless($string =~ m/-Hoge/){print '=~>',$string;} if($string != m/-Hoge/){print '!=>',$string;}
perl初心者です。 後ろの行を読んで、戻って、指定の行に、書き込む方法が、よくわかりません。 下記のようなファイルを読み込んで ---------------------------- アルファベット= 1A 2B 3C アルファベット= 1A 2B アルファベット= 1A 2B 3C 4D 5E 6F ------------------------------ 下記のように、「アルファベット=」にアルファベットを入れるには、どうしたらいいでしょうか? ------------------------------ アルファベット=ABC 1A 2B 3C アルファベット=AB 1A 2B アルファベット=ABCDEF 1A 2B 3C 4D 5E 6F -------------------------------- よろしくお願い致します。
ActivePerlからODBC経由でACCESSデータを取得するプログラムを作成しています。 作成中の下記プログラムですと、TABLE_AのKOUMOKU_A が 　' '(半角スペース)がの場合 　　　　→ ''(スペースなし) 　'BBB '(後ろスペースあり)の場合　→ 'BBB'(後ろスペースなし) で返ってきます。 登録されているすべての文字列を読み込みたいのですが、 何が原因で後ろスペースが切られるのかがわかりません。 ご存じのかた、ご教授願いますm(__)m 例） ============================================ use Win32::ODBC; $sql = "select KOUMOKU_A from TABLE_A;"; while ( $db->FetchRow() ){ undef %FIELDS; # データをハッシュに格納 %FIELDS=$db->DataHash(); print "'".$FIELDS{KOUMOKU_A}."'\n"; } ============================================
初心者PERLプログラマーです。 独学で身の回りにPERL仲間がいないため、質問させてください。 スカラー変数を使用してモジュールをuseしたいのですが、どうしてもできません。調べてみましたが検索力の無さからか見つからず… 現在のコードをはしょって書きます ----------------------- my $a = "Hoge"; use $a; my $b = new $a(); $b->run; ----------------------- $aの部分を変数にせず、use Hoge;と書くとうごくので、変数にしたことによるエラーだと思います。 $aを"$a"としてみたりしてもダメでした。 わかるかたご教授いただければ幸いです。
Perl/CGI初心者です。 仕事でホームページの改良をする事になりました。 現状は、そのホームページでは掲示板、アクセスカウンタ等をCGIで組んでいます。 今回、ファイル(PDF・エクセル・ワード)のダウンロードの機能を追加することになり、 さらにダウンロードするファイルを管理者が追加・削除できるようにしたいとの要望です。 サーバーはレンタルサーバーで現在の契約プランではデータベースは構築できません。 なので、画面から入力した対象ファイルのパスをテキストに保存し、 それをHTMLで表示した時にリンクできるようにできないかと考えています。 ファイルのダウンロード機能についてはPerlでもいくつか手段があるというところまで調べたのですが、 一般的にはダウンロード機能はPerlとPHPのどちらで作成するのが理想なのでしょうか？ 場合によっては現在CGIで動いている部分をPHPで作り変える事も検討するつもりです。 ホームページ作成は初めてで周囲にも経験者が居ません。 基本的な事が、まだ理解出来ていない部分もありますので、 質問内容が意味不明かもしれませんが、お力添えお願いします。
初心者で http://oshiete1.goo.ne.jp/qa5056638.html で質問した者です。もうひとつ、お願いします。 Apache　の　error.log に [error] [client ---- ] Argument "..." isn't numeric in addition (+) at ... 0001.cgi line 85., と表示されるのを、防ぐ方法をお教えください。 ↓このようにしています。 open(FILE, '<+score.txt') or die "$!"; my @data = <FILE>; close(FILE); my $data2 = $data[0] +1;#------------- line85 open(FILE, '>+score.txt') or die "$!"; print FILE $data2; print FILE (",問題番号,$num,$year年$mon月$day日 $hour時$min分$sec秒\n"); print FILE @data; close(FILE); print "<font size=+1>今日　"; print "<font color=magenta>$data2</font color>";print "回　正解解答をしました --- </font size>　"; 1時間に、0001.cgiと同じように書かれれたファイル約100個に、約40人がアクセスします。Apache　の　error.log　が、すぐ大きくなってしまいます。どうか、よろしくお願いします。
　if(not $name =~ /${COOKIE_PREFIX}_(.+)/) { このコードを書いているファイルに 　use strict; 宣言をしたら、このコードの部分で 　Variable "$COOKIE_PREFIX" is not imported at SeveralRoutine.pl line 173,　line 855. 　Global symbol "$COOKIE_PREFIX" requires explicit package name at SeveralRoutine.pl line 173, line 855. 　Compilation failed in require at O:\public_html\besthotel\freeboard\cgi\listbbs.cgi line 8, line 855. のようなエラーが出ました。 $COOKIE_PREFIXを宣言しているのはメインルーチンであるlistbbs.cgiで、このファイルがSeveralRoutine.plなので、 　${COOKIE_PREFIX} を 　$main::{COOKIE_PREFIX} と書き換えてみました。 すると 　Quantifier follows nothing in regex; marked by <-- HERE in m/* <-- HERE main::COOKIE_PREFIX_(.+)/ at SeveralRoutine.pl line 173, line 855. と、エラーの内容が変わりました。 　Variable "なんたらかんたら" is not imported・・・ というエラーメッセージはこの他にも多数出ましたが、それらは 　"なんたらかんたら" の前に 　main:: と付けたら直りました。メインルーチンの中で定義した変数を別のファイルで用いようとしたために起きたエラーです。 ところが件のコードは 　　　$name 　　が 　　「$COOKIE_PREFIXにアンダーバー付きで添え字」 　　してある形式になっていなかったら・・・ という意味合いです。 メインルーチンで定義されている$COOKIE_PREFIXそのものをどうしようというコードではありません。 このエラーメッセージは何を言いたいのでしょう。そしてどう直せばこのエラーメッセージが出なくなるのでしょう？
$number =~ s/(\d+\.\d+)/sprintf("%.2f", $1)/eg; $number =~ s/(\d+)(\.)(0)/$1/eg; 小数点の表示を上記のようにしてあります。 更に増減させる最小単位も指定したいのですが、 方法がわかりません。 例えば0.25単位で増減させたい場合は、 1.18なら、1.25 2.36なら、2.50 という感じです。 お手数ですが、宜しくお願いいたします。
以前よりCGIでPerlをよく利用していたのですが、現在サーバーの保守や管理で簡単なシェルを使う機会が多くなりました。しかし、シェルスクリプトになるとちょっと難しくて勉強する時間がなくできるだけPerlでいろいろな処理をしたと思っています。 　質問は、PerlをGnome端末などから操作するにはどうしたらよいのでしょうか？いくつかの処理をPerlで書いて $ perl -w /home/tinte/test_perl.pl みたいな感じで処理はできますが、シェルのように絶対パスではなくコマンドをそのまま記述することは可能でしょうか？例えば上記の処理を $ perl -w test_perl.pl のような感じで短縮できればよいなと思っています。どこかにリンクを貼ったり設定を変えればできそうな気がしていますが、もしわかる方がいましたらおしえてください。 またPerlのコマンドをそのまま端末で使うことはできないのでしょうか？ 周囲にわかる人間が全くいないのでいろいろヒントをもらえるとうれしいです。よろしくお願いします。
Perl Mechanizeを使って、下記HTMLの"表示"と表示されているボタンを押したいのですが、いろんなパターンを利用しても押せません。処理後の＄mechのコンテンツをテキストで見ると、処理前後で更新(html遷移)がありません。試した、パターンは以下です。ActivePerl Verは5.8.8、OSはWindows XP SP2、mechanizeはver0.72です。 また、$mech->click_button('value' => '表示');を使うため、mechanizeをPPMを使ってver1.54にUpdateすると、 「Can't call method "header" on an undefined value at C:/Perl/site/lib/WWW/Mechanize.pm line 2347.」 というエラーがでて、click_button()のところでストップします。Mechanize.pmでuseしている各種パッケージをUpdateしても同様なエラーが出てclick_button()のところでストップします。 下記対象htmlのボタンを押すにはどうしたらよいでしょうか？皆様、よろしくお願いします。 １．パターン１ $mech->submit_form( 　form_number => '1', 　　fields => { 　　　0　=> "1", 　　　1　=> "2", 　　}, ); ２．パターン２ $mech->submit_form( 　form_number => '1', 　　fields => { 　　　0　=> "1", 　　　1　=> "2", 　　}, 　button => '' ); ３．パターン３ $mech->form_number(1); $mech->field( 0, 1 ); $mech->field( 1, 2 ); $mech->click(); ４．パターン４ $mech->form_number(1); $mech->field( 0, 1 ); $mech->field( 1, 2 ); $mech->submit(); ５．対象html <html><head><title>タイトル</title></head><body> ■中タイトル１<br><br><form action="/URL" method="post"><input type="hidden" name="NAME" value="ABCD"> [小タイトル１] <br><select name="0"> <option value="0">AAA</option> <option value="1">BBB</option> <option value="2">CCC</option> <option value="3">DDD</option> </select><br> [小タイトル２]<br> <select name="1"> <option value="0">AAA</option> <option value="1">BBB</option> <option value="2">CCC</option> </select><br> <input type="submit" value="表示"></form> <hr>該当データなし。<br><hr>
print "$in{'name_1'}"; print "$in{'name_2'}"; print "$in{'name_3'}"; 上記の名前の部分に変数を入れて下記のようにしたいのですが、方法がわかりません。 for(1..3) { $i++; print "$in{'name_$i'}"; } また、フォームから送信されてくる名前＝$in{'name'}　の読み名がわからないのですが、これは変数とは違いますか？どのように呼ぶものなのでしょうか？ 説明下手で申し訳ないのですが、宜しくお願いいたします。
初心者です。フォームに文字を入力してもらい、↓ print blockquote( textfield( -name => 'die Antwort', 省略----条件にあえば、 my $value = param('die Antwort');#として if (($value eq $ans || $value eq $ans2) and ($c eq $num)){ 「正解」と表示することにしました。すると、うまくいくのですが、 if (($value eq $ans || $value eq $ans2) and ($c eq $num)){ について「Use of uninitialized value ----」とApacheのerror logに書かれてしまいます。このためerror logがすぐに巨大なファイルになってしまいます。これを避ける方法をお教えください。よろしく、お願いいたします。
FTPでアップしたファイルをダウンロードしてもらうサイトを作ろうとしています。 ディレクトリで分けて、それぞれのディレクトリにファイル名が日本語の物を保存し、ダウンロードしてもらおうとしています。 ディレクトリでファイルを表示するというCGIは発見しました。 http://cgiscriptmarket.com/Xplorer/ しかし、ダウンロード出来るのは、英語のみです。 これをディレクトリ名・ファイル名ともに日本語にすることは出来ないでしょうか? 出来るだけシンプルに仕上げたいです。 CGIじゃなく、何かソフトを利用した方が良いでしょうか?(xoops等)
以下のリファレンスをnumの数字を基準にして昇順ソートで整えたいのですが、検索してみてもリファレンスのソートの仕方をレクチャーしてくれるところがありません。やり方を知っている方がいたら教えてください。お願いします。 ソート前のリファレンス。 $data = [ { num=> 1, id=> 'bss'}, { num=> 3, id=> 'blog'}, { num=> 2, id=> 'video'} ]; ソート後のリファレンス。 $data = [ { num=> 1, id=> 'bss'}, { num=> 2, id=> 'video'}, { num=> 3, id=> 'blog'} ];
下記はデレクトリーabcのｊｐｇ画像ファイル名を(数字.ｊｐｇ) 読み込み順に(1.ｊｐｇ)に変更するコードですが,エラーになります、 #!"C:\perl\bin\perl.exe" opendir(DIR,"./abc/");# デレクトリopen @DATA = grep /\.jpe?g/i, readdir(DIR); # デレクトリread @SDATA = sort { $a cmp $b } @DATA;# ソート for ($k=0; $k<=@SDATA; $k++) { $new = $k.'.jpg'; rename ("$SDATA[$k]", "$new"); } closedir(DIR); exit; よろしくお願いします。
初心者です。 $time,$number,$data（実験回数、データ番号、データ） という3列のデータを、実験回数毎に同じデータ番号のデータを出力するプログラムを組もうとしています。データ数は回数、データ番号毎に同数あり、データ番号は実験毎に1から振られています。 出力結果としては↓の様にしたいと思っています。 実験回数、データ番号、データ、データ、データ しかし、データ数が多すぎて、データをpushして配列にしすぎたり、データ番号をハッシュにするとPCがメモリ不足になるため、forの入れ子にして、毎回データを読む様にしました。 for(my $time_n = 1; $time_n <= $input; ++$time_n){ #$inputは最大実験回数 for(my $n = $data_num * ($time_n - 1) + 1 ; $nn <= ($data_num * $time_n) ; ++$nn){#$data_numは実験1回分のデータ番号数、 @array = (); while ($line = <FILE>) { chomp $line; ($time,$number,$data) = split /,/, $line; if($number == $n){ push @array, $data; } } print OUT3 "$time_n,$array[0],$array[1],$array[2]\n"; } } これでやってみると、実験回数1回目しかうまく出ません。なぜでしょうか？ どなたか教えて下さい。 宜しくお願いします。
あるフリーのCGIを改造して使っていたのですが、最近、Macを使っている人からだけ、「フォームが表示されずにHtmlのソース表示になってしまう」と言われるようになってしまいました。 私はOS10.4のMacユーザーですがそのような問題は何もなく、「ソース表示になってしまう」と言われ始めたのが丁度OS10.5が普及してきた頃だったので、自分のOSも10.5にしてみたところ、やはり指摘通りの現象が発生しました。 ちなみに、ブラウザはSafariでもFireFoxでも同じように問題が発生します。 もちろん、いずれのブラウザもクッキーは受け入れる設定にしています。 そして、色々原因を探してみたところ、CGIに書き加えた 　　　・ 　　　・ 　　　・ $joutai="既読"; print "Set-Cookie: "; print "shoko=$joutai; "; という部分から print "Set-Cookie: "; print "shoko=$joutai; "; を削除するとMacOS10.5でもソース表示に化けてしまわなくなりました。 Windows XP、Vista、MacOS 9.2、MacOS 10.3、MacOS 10.4では上記の記述のままでも正しくクッキーが書き込まれ、画面はソース表示になってしまう問題も起きないことは確認済です。 どこが悪いのでしょう？ MacOS10.5でもこの問題が起きないようにクッキーを書き込ませる方法は何か無いでしょうか？
perl デバッガで上矢印キーを押すと、過去の入力が表示される場合と ^[[A のようなエスケープシーケンスが表示され、過去の入力に遡れない ものがあります。 Windows の ActivePerl は遡れたように思うのですが、Ubuntu の perl では遡れません。 上矢印キーを使えるようにするにはどうすればよいのでしょうか。
うまく動きません。コマンドラインでは作動するのですが、ブラウザではダメでした。 　#! /usr/bin/perl -w 　use Calendar::Simple; 　use CGI::Carp qw(fatalsToBrowser); 　use Data::Dumper; 　use lib "/home/kojima/kojima00001/myperl/lib"; 　my @curr=calendar; 　print Dumper(@curr); もっともその理由は分かりました。 　use lib "/home/kojima/kojima00001/myperl/lib"; が 　use Calendar::Simple; より後にあったことです。 さらに言うと、ブラウザで動かすためにはHTMLをサポートしていないといけませんが、このコードはHTMLをサポートしていません。 この２点を修正して、無事このプログラムはブラウザでもうまく動いたのですが、問題はうまく動いてくれていなかった時のブラウザの表示です。 Internal Sever Errorが出ていました。それじゃ何のことか分からなくて嫌だから 　use CGI::Carp qw(fatalsToBrowser); と宣言してあるのです。 モノの本によると、この場合は 　Software error: 　Can't locate Calendar/Simple.pm in @INC (@INC containts: @INCに含まれるディレクトリがズラズラ・・・). 　BEGIN　failed--compilation aborted at calendar.cgi line3. というエラーメッセージが表示されるはず。 つまりCGI::Carpが機能していないことになります。 何故でしょう？ お手数をお掛けします。
packageを継承した場合、 継承先（以下のMyPkg）で継承もと（MyBase）のローカル変数（$localValue）を直接書き換える方法はありませんか？ package MyBase; my $localValue; sub doBase{ my $self=shift; $localValue ={ 'hanako'=>{'id'=>1, 'pref'=>'tokyo'} }; } sub getPref { my $self=shift; my $name=shift; $localValue->{$name}{'pref'}; } package MyPkg; use base qw(MyBase); sub new{ my $class=shift; my $self={}; bless $self, $class; return $self; } sub doAnything { # この中でMyBaseの$localValueを直接書き換えたい $localValue ={ 'taro'=>{'id'=>2, 'pref'=>'osaka'} }; } ------main:: my $pkg=new MyPkg; $pkg->doSomething; print $pkg->getPref('hanako'); $pkg->doAnything; print $pkg->getPref('taro'); ---------- 以下のような感じでmyBaseの中に$localValueを返すサブルーチンを作っておけば、 print $pkg->localValue->{'hanako'}{'pref'}; などと取得は出来ますが、 $pkg->localValue->{'hanako'}{'pref'}='kyoto'; のような代入は無理みたいでした。 package MyBase; my $localValue; sub localValue{ my $self=shift; $localValue; } doBaseのようなサブルーチン経由で書き換えていますが、 use baseしていても、やはりそうしないとダメでしょうか。 Windows、ActivePerl、perl 5.10.0 Linux、Perl5.8
いままで正常に動いていた cgi（perl）に次のようなセンテンス for ( $cnt=0 ; $cnt<2 ; $cnt++) { my $before = "snow06b.gif"; #変換前の名前 my $after = "snow06x.gif"; #変換後の名前 rename($before,$after); my $before = "snow06x.gif"; #変換前の名前 my $after = "snow06b.gif"; #変換後の名前 rename($before,$after); } を追加したところ、cgi 全体が動かなくなってしまいました。 for ( … ){　 } の中の処理はこの cgi の他の箇所でも行っていて、正常に実行されることが分かっています。中の処理をはずして for ( $cnt=0 ; $cnt<2 ; $cnt++) { } だけにしてもこの cgi の他の処理を実行しなくなります。自分のパソコンの中にある他のperl のプログラムの中のループの処理と見比べてもどこが悪いのか分かりません。何が原因なのかお教え願えれば幸いです。 初歩的な質問で申し訳ありません。
SSHが出来るレンタルサーバーを契約して、これで悪いことし放題だ～っ、じゃなくてPerlの勉強するぞっとCPANを入れたのですが、その後Calendar::Simpleを入れようとしたところでエラーが出ます。どうもCPANの設定にエラーがあったようです。 で、CPANを入れ直そうと思うのですが、どうやったら入れ直すことができるのでしょう？ お手数をおかけします。
変数$abcに漢字　日本　と入力し クッキーに入れ取り出して見ると ?u?{　となっています 日本　と表示したいのですが よろしくお願いします。
同じディレクトリに、同名のa.plとa.cファイルが存在します。 それぞれは単独では問題なく動きます。 しかし、Makefileを使ってこれらのファイルを一緒に実行させたいのですが、make allrunでa.pl、a.cが実行された後に make: *** [allrun] エラー 14 と出てしまいます。 結果的には全て実行できた形になるのですが、エラーと出ているのでどうも不安です。 勉強中の身なので説明がうまくいっていないと思いますが、どうやればよいのか教えてください。 Makefileの中身は CC = gcc all:a a a:a.c $(CC) -o a a.c -lm allrun:a a ./a.pl ./a.out clean: -rm ./a -rm ./a です。
あるcgiのスクリプトを利用して、チェックボックスにチェックのついたユーザーに対してメールを送信できる機能を追加したいと思ってます。 削除のサブルーチンを流用して以下のように作成すれば動作すると思ってやってみましたが、チェックした人以外にも送信されてしまいました。 (ここから) ## --- パスワード配布 sub pwmail { # パスワードチェック if ($FORM{'pass'} ne "$pass") { &error("パスワードが違います。"); } # ロック開始 $lockfile = "$lockdir" . "reglock.dat"; if ($lockkey == 1) { &lock1; } elsif ($lockkey == 2) { &lock2; } open(DB,"$memfile") || &error("Open Error : $memfile"); @lines = <DB>; close(DB); @new=(); foreach $line (@lines) { $flag=0; ($num,$date,$name,$kana,$email,$host) = split("<>", $line); foreach $del (@DEL) { if ($del eq "$num") { $flag=1; last; } } if ($flag == 0) { $MailBody = <<"EOM"; $name さま ============== パスワードの案内メールです。(テスト) ============== パスワードは　njht6u となります。 それでは今後ともよろしくお願いいたします。 EOM # 文字コードをJIS変換 &jcode'convert(*MailSub,'jis'); &jcode'convert(*MailBody,'jis'); if (!open(MAIL,"| $sendmail -t")) { &error("メール送信に失敗しました"); } print MAIL "To: $email\n"; #print MAIL "Cc: $master\n"; print MAIL "From: $master\n"; print MAIL "Subject: パスワードの案内\n"; print MAIL "MIME-Version: 1.0\n"; print MAIL "Content-type: text/plain; charset=ISO-2022-JP\n"; print MAIL "Content-Transfer-Encoding: 7bit\n"; print MAIL "X-Mailer: $ver\n\n"; print MAIL "--------------------------------------------------------\n"; print MAIL "$MailBody\n"; print MAIL "--------------------------------------------------------\n"; close(MAIL); } } # ロック解除 if (-e $lockfile) { unlink($lockfile); } exit; } (ここまで) どこをどう変えればよいのかが分からなくなってます。 そもそも、削除のサブルーチンで作成するのが間違っているのでしょうか? お手数かけます。 ご指導いただけますと助かります。
$input =~ s/[a-z][0-9]-[0-9]/ [a-z][0-9]-[0-9] /g; perl言語での正規表現についてです。 置換に関してなのですが、このような使い方はできないでしょうか？？ [a-z][0-9]-[0-9]にヒットしたものの前と後ろにスペースを代入したいのですが、何かいいプログラミングはないでしょうか？
マイミクの誕生日をgoogleカレンダーにインポートしたいと思い、 下のサイトを見つけたのですが、 http://hsj.jp/works/2006/06/07/google_calendaric … http://www.magicvox.net/archive/2006/09102208/ macで実行するにはどうしたらいいのでしょうか？ ある程度の知識がないと難しいですか？ ちなみにMacOS 10.3.9です。
下記のようにcisco機器にloginして、show clockコマンドを事項するperlを複数の機器を対象に実行したいと現在考えております。 ログインパスワードにつきましては定期的に変更するよう運用しているため、外部のファイルを参照するように出来ればと思いますが、perl初心者のため方法が全く分かりません。ご教授頂ければ幸いです。 ****************** use Net::Telnet::Cisco; my $session = Net::Telnet::Cisco->new(Host => 'IPアドレス'); $session->login('login', 'ログインパスワード');　←※ここを外部ファイルを参照するようにできればと考えています。 # Execute a command my @output = $session->cmd('show clock'); open(OUT,">showclock.txt"); print OUT @output; close(OUT); $session->close; ****************** よろしくお願い致します。
初心者で簡単なメールフォームを作成しております。 宛先となる支店を選択後、メールのTOにその支店のアドレスが入り、メールは受信できます。同時にBCCにも一人のアドレスを入力してメールを送信したいのですが、BCCにはメールが届きません。 以下に抜粋したソースを記述しますので、どなたかご教授願います。 --------------------- HTML 部分 ------------------------------- <form action="./cgi/sendmail.cgi" name="myform" method="POST"> <table> <tr><td>あなたのメールアドレス</td> <td><input type="text" name="email" size="60" maxlength="60"></td> </tr> <tr><td>お問合せ先の支店を選択</td> <td><select name="address"> <option value="" selected>選択してください</option> <option value="aaaaa@domain.jp">A支店</option> <option value="bbbbb@domain.jp">B支店</option> <option value="ccccc@domain.jp">C支店</option> </select> </td> </tr> <tr> <td><input type="submit" name="submit" value="送 信"></td> <td><input type="reset" name="reset" value="キャンセル"></td> </tr> </table> </form> --------------------- cgi 部分 -------------------------------- require '../cgi-lib.pl'; require '../jcode.pl'; $sendmail = '/usr/sbin/sendmail'; $bcc_address = 'bccbcc@gmail.com'; $email = $in{'email'}; $address = $in{'address'}; &jcode'convert(*email,'sjis'); &jcode'convert(*address,'sjis'); $message = <<EOF; Subject: 質問 From: $email Errors-to: $email Reply-To: $email -------------------------------------------------------------- 質問内容 -------------------------------------------------------------- [お客様のメールアドレス] $email EOF open(MAIL,"|$sendmail $address"); print MAIL $message; print MAIL "BCC: $bcc_address\n"; close(MAIL); print <<EOF; Content-Type: text/html <html> <head> <title>送信しました</title> <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"> </head> <body> ●お客様のメールアドレス $email<br> </body> </html> EOF
初心者で簡単なメールフォームを作成しております。 宛先となる支店を選択後、メールのTOにその支店のアドレスが入り、メールは受信できます。同時にBCCにも一人のアドレスを入力してメールを送信したいのですが、BCCにはメールが届きません。 以下に抜粋したソースを記述しますので、どなたかご教授願います。 --------------------- HTML 部分 ------------------------------ <form action="./cgi/●●/sendmail.cgi" name="myform" method="POST"> <table> <tr><td>あなたのメールアドレス</td> <td><input type="text" name="email" size="60" maxlength="60"></td> </tr> <tr><td>お問合せ先の支店を選択</td> <td><select name="address"> <option value="" selected>選択してください</option> <option value="aaaaa@domain.jp">A支店</option> <option value="bbbbb@domain.jp">B支店</option> <option value="ccccc@domain.jp">C支店</option> </select> </td> </tr> <tr> <td><input type="submit" name="submit" value="送 信"></td> <td><input type="reset" name="reset" value="キャンセル"></td> </tr> </table> </form> --------------------- cgi 部分 ------------------------------- require '../cgi-lib.pl'; require '../jcode.pl'; $sendmail = '/usr/sbin/sendmail'; $bcc_address = 'bccbcc@gmail.com'; $email = $in{'email'}; $address = $in{'address'}; &jcode'convert(*email,'sjis'); &jcode'convert(*address,'sjis'); $message = <<EOF; Subject: 質問 From: $email Errors-to: $email Reply-To: $email ------------------------------------------------------------- 質問内容 ------------------------------------------------------------- [お客様のメールアドレス] $email EOF open(MAIL,"|$sendmail $address"); print MAIL $message; print MAIL "BCC: $bcc_address\n"; close(MAIL); print <<EOF; Content-Type: text/html <html> <head> <title>送信しました</title> <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"> </head> <body> ●お客様のメールアドレス $email<br> </body> </html> EOF
現在、以下のように記録する最大数を超えた場合、 古いデータは1行削除、新規データは追加するようにしてるのですが これを最大数を超えた場合にはfile.txtのすべてデータを 別に自動生成した過去ログファイルに記録し、 また過去ログファイルは最大５ファイルまで作成したいのです。 もしやり方が分かるようでしたらお手数ですがお教えいただけませんか？ $maxlog = $logmax; #ログファイルの場所 $comment =~ s/\n//g; ($sec,$min,$hour,$day,$mon,$year,$wday,$dmy,$dmy) = localtime(time); $year = 1900 + $year; $mon++; if ($mon< 10) { $mon = "0$mon"; } if ($day< 10) { $day = "0$day"; } if ($hour< 10) { $hour = "0$hour"; } if ($min< 10) { $min = "0$min"; } $date = "$year\/$mon\/$day $hour\:$min"; # ログファイル読込 open LOG,$file; @log = <LOG>; close LOG; # 先頭に新規ログデータを追加 unshift (@log,"$date<>$mailto<>$comment<>$agent<>$host<>$toki<>\n"); # 保存行数を超える分末尾を削除 while(@log > $maxlog){ pop @log; } # 更新されたデータでログファイルに上書き open LOG,">$file"; print LOG @log; close LOG;
基本認証（ベーシック・オーセンティケーション）で保護されている領域のIDとパスワードがわかっている場合、この内部に、GETで自動ログインしたいのですが、出来ますでしょうか？ http://hoge/hogo-area/id=abc&pass=9999 みたいな感じでです。 よろしくお願いします。
以下のようなテキストファイルがあります。（ここで出すのは例なので、本当は１万行くらいあります） 20927258 7092 20927258 7093 21167105 7092 21167105 10469 21167105 10470 21167105 10471 21167105 10472 21167105 10473 21167105 10474 この中に入っている文字列、例えば20927258や10474などがいくつあるかをカウントするためのプログラムを書きたいのですが、どのようにすればよいでしょうか？？ 重複があるので、それは消したいです。つまりこの例でいえば 20927258は２つということにしたいです。 よろしくお願いします！！！！
環境は、レンタルサーバで、各機能のバージョンは以下の通りです。 Apache/1.3.41 Ben-SSL/1.59 (Unix) Perl v5.6.1 built for i386-freebsd Version 8.13.1 現在、「sendmail -t」にて複数のメールを送信していますが、サーバの負荷によりsendmail処理が遅延し、そのプロセスが終了する前に次の新たなSendmailコマンドを発行すると rejecting commands from localhost [127.0.0.1] due to pre-greeting traffic で強制終了されてしまいます。 sendmailをcloseしてから、数秒タイムラグを置いてみても、サーバ負荷の遅延がタイムラグより大きくなる事があるようで困っています。 そこで、メールが送信終了（sendmailが送信プロセスを終了）した事を確認してから、次の処理に進みたいと考えていますが、perlプログラム内で終了ステータスを受ける事が出来るのでしょうか？ その他、強制終了を防ぐ方法がありましたらアドバイス願います。 ちなみに、レンタルサーバ業者にsendmail送信件数上限を確認した所、１５０件／分との事でした。 現在、１０件／分程度の送信間隔としていますので、上限閾値を超えているような送信はしていないと思います。
10進数から16進数への変換自体は分かります。 $hex = sprintf("%lx",$decimal); で出来るのですが、例えば、10進数の10を16進数の0x00000Aと常に6桁にして出力するにはどうすればよいでしょう？（先頭の0xは出力しなくてもいいです。） 手元のPerl辞典には、sprintfの形式指定で出来るとなっており、指定パラメータとしてm（最小幅）というのが載っているのですが、実際の使い方の用例が無く、色々試したのですが、上手く行きません。 どなたか詳しい方、ズバッとコマンド記述の実例を一行お願いいたします。
こんにちは。 perlでの数値の扱いで困っています。 ハッシュのキーとして、数値を使いたいのですが、例えば、 %h $h{'1'}; $h{'01'}; $h{' 1'}; とした場合、これらは全て異なるキーとされてしまいます。 これらを同じキーととして扱いたいのですが、どのようにするのがよいのでしょうか？ 数値は10進数で構いません。よろしくお願いします。
Perlでテキストデータの集計を行いたいのですが、集計のプログラムが上手く作れずに困っています。 元のテキストとして、 あいうえお。かきくけこ。さしすせそ。たちつてと。あいうえお。 というものがあり、整形プログラムとしては、 while(<>){ s/。/。\n/g; print"$_"; } があります。このプログラムを使って、 あいうえお。 かきくけこ。 さしすせそ。 たちつてと。 あいうえお。 という形に整形ところまではできたのですが、上記のプログラムに追加する形で、 あいうえお。 2 かきくけこ。 1 さしすせそ。 1 たちつてと。 1 というように同一の行の集計を行えるようにしたいです。 元のテキストデータから整形と集計を1つのプログラムで行えるようにしたいのですが、どうすれば良いのでしょうか？
for ( 1..$winfo{'LIMIT'} ) { my ( $wkey ) = sprintf( "%03d",$_ ); $wnum{ $wkey } = sprintf( "%s名",$_ ); } とあるのですが、forの括弧の中が、普通と違うので意味が分かりません。 どのような意味になるのでしょうか。 宜しくお願い致します。
perlのペーペープログラマーです とりあえず動けばOK的にしか作れないレベルです 現在YAHOO ウェブ検索Web APIを使ったプログラムを作成しています （プログラム、フォーム用、結果表示用のHTMLなどもutf-8で記述） 大体普通に動くのですが一部キーワードを使うとなぜか違う検索結果が返ってきます 例：SEOツール 1.返ってくるべきページ http://search.yahoo.co.jp/search?p=SEO%E3%83%84% … 2.なぜか受け取るページ http://search.yahoo.co.jp/search?p=SEO%83c%81[%83%8B なぜか2のshift-jisっぽいものが返ってきます 他のキーワードなどでは普通のUTF-8のページが返ってきます 文字化けなどはほとんどありません 正直まったく原因が分かりません いったい何をどうすれば良いのでしょうか？ ソースは下記みたいな感じです &decode; #デコードサブルーチン use LWP::Simple; use XML::Simple; $url = "http://api.search.yahoo.co.jp/WebSearchService/V …{'keyword'}"; $response = get($url); $xml = new XML::Simple; $yahoo_xml = $xml->XMLin($response); $tra = $yahoo_xml->{totalResultsAvailable}; $page = <<"EOF"; $tra EOF &page; #ページ表示サブルーチン　$pageを表示 ちなみに文字化けは他プログラムでは発生していましたが解決しました 関連性があるのでしょうか？ 問題 APIから帰ってきたものを@lineに入れてHTML表示 それ以外の変数文字列が文字化け 解決策 APIから返ってきたものをforeachでutf-8にデコードしたら他のものが普通に表示されました。 foreach (@line) {Jcode::convert($_, "utf8");} こんな感じです これは返ってきたものなので、そもそも返って来るものが違う場合もうお手上げです。 何がなにやら分かりません 上手に説明できませんでしたが、よろしくお願いいたします また教えてgooへの投稿に慣れていないもので至らない点あるかと思いますがご容赦ください
Perl（CGI）のプログラムを作成しているのですが '金額＝(税抜2000円) 2100円'という文字列を'[単価]2100円'に置換したいのですがうまくいきません。数字の箇所常には変わります。置換演算子で試してみましたが私の知識ではダメでした。周りに聞ける者がおりませんのでご教示お願いいたします。
■環境 Linux, Perl 5.8 です。 画面(HTML)と処理(Perl)は分けて作成しており、Templateモジュールで画面表示を行っています。 HTMLもPerlも文字コードはUTF-8です。 ■質問 フォームからうけとった文字列で全角カタカナと特定の全角記号以外はエラーとする 入力チェック処理(正規表現)がうまくチェックを行ってくれません。 SJISだと以下のような書き方があるそうなのですが、UTF8での書き方がわかりません。 ・SJIS if($data !~ /^(?:\x83[\x40-\x96])+$/){ $mes="全角カナ以外の文字が指定されています"; } UTF8での書き方を教えて頂きたいです。 なお、許容する全角カタカナと特定の全角記号は以下のとおりです。 ========================================================== アイウエオカキクケコサシスセソタチツテトナニヌネノ ハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン ァィゥェォッャュョヵヶヴガギグゲゴザジズゼゾダヂヅデド バビブベボパピプペポーヽヾ ========================================================== ご教授お願い致します。
初心者の質問で恐縮です。 文字列操作で、最後の４文字を取得したいのですが、 どうすればよいのでしょうか？？ 本やネットで調べたのですが正規表現というのが難しく、 失敗しています、、、
Encode.pmのPODを読んでいます。その一文です。 [$obj =] find_encoding(ENCODING) 　Returns the encoding object corresponding to ENCODING. Returns undef if no matching ENCODING is find. 　This object is what actually does the actual (en|de)coding. 　$utf8 = decode($name, $bytes); 　is in fact 　　$utf8 = do{ 　　　$obj = find_encoding($name); 　　　croak qq(encoding "$name" not found) unless ref $obj; 　　　$obj->decode($bytes) 　　}; 　with more error checking. まず 　This object is what actually does the actual (en|de)codeing. 直訳すると、「このオブジェクトは実際のエンコードやデコードを実際に行うものです。」となります。実際の、実際の、と二つ並ぶのはあまり語感が良くないと思いますが、でもこのPODを書いたのは文学者ではないですから、原文の方に問題があるのではないかと思います。 次に「このオブジェクト」とは何を指しているのでしょう。find_encoding関数のことを言っているのでしょうか？ というのは、下に 　$utf8 = decode($name, $bytes); は実際には、 　$utf8 = do{ 　　$obj = find_encoding($name); 　　croak qq(encoding "$name" not found) unless ref $obj; 　　$obj->decode($bytes) }; だと書いています。{}の中で一番重要なのはfind_encoding関数だと言いたいのではないかと・・・ そうすると 　This object is what actually does the actual (en|de)codeing. は、 　「実際にエンコードやデコードを行っているのはこの関数です。」 と訳するのが正しいでしょうか？ 最後に、 　$obj->decode($bytes) $objという文字コードで記述されている$bytesという文字列をutf-8に変換したもの、という意味なはず。 でも浅学な私には、どのような文法でこのコードが書かれているか分かりません。 Perlにおいて、変数と言えば$objだったり@objだったり%objだったりします。そしてそのリファレンスはこれら変数の前に「\」を付ければ良くて、リファレンスはスカラー変数となるから、 $refobj=\($|@|%)obj; となります。 元の変数が(@|%)objの場合、元の変数の一要素を取り出すには、 $obj([index]|{'index'})=$refobj->index; となります。 これが私の知っている矢印記法の唯一の使い方です。 お手数ですが、どなたか教えていただけないでしょうか？
あるプログラムにサーバーのフルパスを入れると、 反応が良くなります。 最近、違うサーバーにサーバーに対応した フルパスをいれて実行したところ、 動作がよくありません。 /home/sites/FQDNドメイン名/ユーザーＩＤ/ファイルの場所 このような場合、何が考えられますでしょうか？ 宜しくお願い致します。
フォームで入力した内容を担当者宛てにメールを送るプログラムを作っています。 以下のエラー文が出ました。 Can't locate Jcode/_Classic.pm in @INC (@INC contains: /usr/lib/perl5/5.8.0/i386-linux-thread-multi /usr/lib/perl5/5.8.0 /usr/lib/perl5/site_perl/5.8.0/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.0 /usr/lib/perl5/site_perl/5.8.0 /usr/lib/perl5/site_perl /usr/lib/perl5/vendor_perl/5.8.0/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.0 /usr/lib/perl5/vendor_perl/5.8.0 /usr/lib/perl5/vendor_perl /usr/lib/perl5/5.8.0/i386-linux-thread-multi /usr/lib/perl5/5.8.0 .) at Jcode.pm line 40. 何となく、「Jcode/_Classic.pm」が見つからない事は解るのですが、コレが何なのか、どこに何をどうすればいいのか全くわかりません。
学校で「１つのサイコロを振ったとき， ３以下の数字が出た場合，もう一度サイコロを振っても良いものとする． このとき合計が６になる確率を，プログラムを利用して計算せよ」 というperlの課題が出されたのですが、さっぱりわかりません。 どなたか詳しく教えていただけませんでしょうか？
こんにちわ。 Perlプログラミングで質問です。 初心者なので、内容がわかりにくかったら申し訳ありません。 変数に入れた文字を、指定した文字数だけ表示する方法を教えて下さい。 例えば・・・ $aaa = "こんにちわ"; print "$aaa"; #こんにちわと出力される 上記のような内容で出力する時に「こんに」の３文字だけを出力したいです。 よろしくお願いします。
PerlでXMLの処理をしたいのですが、以下のようなXMLをどのようにしたら値が取れるのでしょうか？ できれば、Person->Name{'A'}->Seiseki->Englishで50が取得できるような 直感的な方法がうれしいです。 <Person> <Name>A</Name> <Age>29</Age> <Sex>M</Sex> <Seiseki> <English>50</English> <Math>60</Math> <Gymnastic>10</Gymnastic> </Seiseki> <Name>B</Name> <Age>32</Age> <Sex>F</Sex> <Seiseki> <English>60</English> <Math>40</Math> <Gymnastic>50</Gymnastic> </Seiseki> </Person>
現在perlでクォーター情報の取得について悩んでいます。 「getpwnam」で情報を取得してもquotaの中身は何も入っていません。 その他有効な手段はあるのでしょうか。 みなさん教えてください。
$wfurikae = 1 if ( &ccom::getShukujitsu( &com::tD( $wwy,$wwm,$wwd )) ne '' ); というスクリプトがあったのですが、 $wfurikae = 1　の後に;もいれずifがきています。 違和感があります。 どのような意味になるのでしょうか。 宜しくお願い致します。
PerlもHTMLも初心者です。hiddenの使い方が分からないのですが、 ■sub test1 <form NAME="minshu" ACTION="test.cgi" METHOD="post"> <input TYPE="submit" > <INPUT TYPE="hidden" NAME="aso" VALUE="write">　.. ■test.cgi $hatoyama=$Form{'aso'}; と、hiddenで送った変数をtest.cgiで受け取る時、$Form{}で受け取ると決まっているのですか？$minshu{aso}とかでは受け取れないのですか？ この場合、hiddenのnameはどういう役目をしているのですか？ hiddenのname="minshu"　とかすれば$minshu{aso}で受け取れるかと思っていたのですが、うまくいかないようなので．．
phpでは fsockopen関数があり、ターゲット・ポート・エラー番号・エラー文字列・タイムアウトを設定すれば、結果を文字列として取得できます。 これをperlで同じことをさせたいのですが、簡単なサンプルがありましたら教えてください。
関数が使えない状態になっており、困っています。 メッセージは下記が出ています。 Can't locate object method "%s" via package "%s" そのパッケージにも、基底クラスにも、該当のメソッドが定義されていないとうことのようですが、 使おうとしている関数が所属しているパッケージを、しっかりとuse しています。 また、「perlobj manpage」というページに情報があるらしいというのを情報として得たのですが、↓ http://fleur.hio.jp/perldoc/mix/pod/perlobj.html 「Can't locate object method」ということに関係している箇所みつからず、また、ここに書かれている内容は難しく情報があまり得られませんでした。 宜しくお願いいたします。
こんにちは。 perlで現在のサーバーにおける時差を取得するにはどうしたらよいのでしょうか？ ローカル時刻ではなくて、「時差」そのものを知りたいのです。 環境変数TZは設定されていますが、'Japan'となっていたりで、これだけでは時差がわかりません。 localtime(0)から求める方法もありそうですが、あまりスマートな感じがしないです。 なにか良い方法はないものでしょうか？
CGI.pmで<button>タグを出力する方法を教えてください。 button()メソッドだと<input type="button">という別のタグが出力されてしまいます・・・
CGI.pmで日本語をURLエンコードするとおかしくなります。 print($q->unescape($q->escape('あ')), "\n"); このコードは文字'あ'をURLエンコードしたものをURLデコードして表示するはずです。 すなわち'あ'と表示するはずです。 しかし実際には'a??'と表示されてしまいます・・・ 何か他の関数をかまさないといけないのでしょうか？？？
「2011/08/01（日）」という文字列が現在の時間より過去か未来かの 判断をしたいと思います。 PHPだと、 $yukou_time = strtotime("2011/08/01（日）"); $now_time = time(); if( $yukou_time > $now_time ) という感じでできたのですが、perlの場合、PHPのstrtotimeのような ものを見つけることができません。 お手数ですが、このような機能がありましたらおしえてください。 よろしくお願いいたします。
Win-XP,Active-Perl(v5.8.6)利用です。 複数のインプットボックスを持つ、 ┌────────────┐ │　　　┌───────┐│ │品名：│　　　　　　　││ │　　　└───────┘│ │　　　┌───────┐│ │科目：│　　　　　　　││ │　　　└───────┘│ │　　　┌───────┐│ │価格：│　　　　　　　││ │　　　└───────┘│ │　┌──┐┌─────┐│ │　│ＯＫ││キャンセル││ │　└──┘└─────┘│ └────────────┘ こんな感じのウィンドウを作りたいのですが、 （図が崩れているかも知れませんが大体のイメージで・・・） ======================================== use Tk; $top = new MainWindow; $arg[0] = $top->Entry(-title=>'品名：')->pack; $arg[1] = $top->Entry(-title=>'科目：')->pack; $arg[2] = $top->Entry(-title=>'価格：')->pack; $b[0] = $top->Button(-text=>'OK',-command=> [\&exec,\@arg])->pack; $b[1] = $top->Button(-text=>'キャンセル',-command=> [\&exec,(-1)])-pack; ======================================== unknown option "-title" at C:\Perl\site\lib/Tk/Widget.pm Entryに対するオプションが分かりませんでした。 もしくは、Label や Message を組み合わせて実現するものでしょうか。 あと、実際に図のような配置でフォームを作りたい場合、 Buttonの部分の書き方はどのようにすれば良いですか？ 以上、ご存知の方、ご教示よろしくお願い致します。
いつもお世話になっております。 HTML::Templateを使用する為、サブルーチンの返値に配列のハッシュを入れたいと思っていますが、うまくいきません。 また、myの使い方が分からず、返値までの方法も若干気になります。 よろしくお願い致します。 use HTML::Template; @loop = &loop_make('aa<>ab<>ac','ba<>bb<>bc','ca<>cb<>cc'); my $template = HTML::Template->new(filename=>'sample.html'); $template->param(loop=>\@loop); print "Content-Type: text/html\n\n"; print $template->output; exit; sub loop_make{ @aaa = (); foreach $xxx (@_) { ($one,$two,$three) = split(/<>/,$xxx); push @loop, { one => $one, two => $two, three => $three }; } return \@aaa; }
いつも、参考させて頂きます。 PerlのTaintモードに関しての質問です。 環境： 　OS：Windoews XP 　WebServer：IIS v5.1 　Perl v5.10.0 現象： CGIプログラムにTaintモード(-T)を入れると下記のエラーが発生しております。 エラー内容： １．ブラウザ： 　　CGI Error 　　The specified CGI application misbehaved by not returning a complete set of HTTP headers. 　　The headers it did return are: 　　"-T" is on the #! line, it must also be used on the command line at 　　　　 　　C:\Inetpub\wwwroot\jimmy\test.cgi line 1. 　２．エラーログ 　　127.0.0.1, -, 2009/05/09, 14:43:50, W3SVC1, XXXX, 127.0.0.1, 15, 286, 485, 502, 0, 　 　　GET, /XXXX/test.cgi, -, ソース： #!/usr/local/bin/perl -T print "Content-type: text/html\n\n"; print "Taintモードテスト！"; ※Taintモード(-T)を外すと正常に動作します。 どうしてでしょうか？アドバイスお願い致します。
いつもお世話になります。 以下のように (??{}) というのを使うと正規表現を再帰することによって入れ子があっても対応するカッコにマッチできることが分かりました。 以下のプログラムでは < から対応する > までを抜いています。 #! perl # betweenBracket -- < から対応 > までを抜く # 全角ブランクで字下げを表現しています。 $re = qr/ 　< 　　[^<>]* 　　(?: 　　　(??{$re}) 　　　[^<>]* 　　)* 　> /x; while(<DATA>) { 　chomp; 　for (/$re/g) { 　　print "$_ "; 　} 　print "\n"; } __DATA__ I <love> you I <love> <you> <I <love> <you>> 実行結果： <love> <love> <you> <I <love> <you>> これですが、<、>のような１文字のカッコではなくて文字列による開始～終了でもできるでしょうか。 具体的に言うと &lt; から &gt; までと言う風にしたいです。 #! perl # betweenEntity -- &lt; から対応 &gt; までを抜く ・・・？？？・・・・ __DATA__ I &lt;love&gt; you I &lt;love&gt; &lt;you&gt; &lt;I &lt;love&gt; &lt;you&gt;&gt; 実行結果： &lt;love&gt; &lt;love&gt; &lt;you&gt; &lt;I &lt;love&gt; &lt;you&gt;&gt; よろしくお願いします！
私は、外部の画像ファイルを読み込まずにperlファイルで表示、ファイル作成をすればよいか困っております。 プログラムは、 読み込み⇒画像作成⇒終了 というような感じです。 Perlの勉強段階などでモジュールなどを使わないようにしたいと思っています。 今までで実験してみた方法は、gifファイルを拡張子.txtに変えてそのファイルをコピーしプログラムに貼り付けたものです。 画像作成 (flockは除いています。) #!/usr/bin/perl open(OUT,"> test.gif"); binmode(OUT); print OUT <<'EOM'; コピーしたもの EOM exit; 以上の文でファイルは作成されているものの、画像を表示すると×状態です。 どのように修正すればよいかご指摘お願いします。
皆様 下記のようなプログラム（Perl）で、1秒未満のファイル更新を試みております。sleep(1)として、待ち時間を1秒とすると、data.txtに時刻が更新されますが、sleep(0.8)、sleep(0.5)等として待ち時間を1秒未満にすると、プログラムは動作するのですが、data.txtはファイルとして作成されません。 これは、printf()関数のバッファリング、及びフラッシュに関する仕様に起因するものと思われますが、1秒未満の間隔でdata.txtを更新して時刻をdata.txtに書き込む処理は可能でしょうか？ ＃強制フラッシュの"$| = 1;"を使い、sleep(0.8)としても駄目でした。 すみませんが、よろしくお願いします。 （コード） #use Time::HiRes; #$| = 1; while(){ ($sec, $min, $hour, $day, $mon, $year) = localtime(time); open(OUT, "> data.txt"); printf(OUT "%2s:%2s:%2s\n", $hour, $min, $sec); close(OUT); sleep(1); }
以下のURLにて同じ質問をしました。 http://soudan1.biglobe.ne.jp/qa4938782.html その時は解決したと思ったのですが、私の勘違いでした。 Undefined subroutine &main::Jcode called at listpage.pl line 220, line 855. というエラーからして、 $value = Jcode($value)->utf8; という記述そのものの問題ではなく、jcode.pmが認識されていないということなのでしょう。 でもプログラムの最初には use Jcode; としてあるし、パスが通っていないことも考えて#!（何と呼ぶんだったっけ？）も #!/usr/bin/perl -I /usr/lib としました。perl.exeをd:\usr\bin/に置いて /usr/bin/perl で良いなら、jcode.pmはd:\usr/libにあるからパスはこれで良いですよね!? ちなみにこのディレクトリにはcgi.pmも置いていますが、cgi.pmは普通に動いてます。 何が問題だと考えられますか？ お手数をお掛けします。
フォームから受け取ったデータをシフトJISに指定して受け取る場合は、例えば 　　$value=jcode::sjis($value); とすれば良いわけですが、utf-8で受け取る場合はどうすればいいのでしょう？ とりあえずjcode.plの中にはutf-8に関するコードは無さげです・・・
下記の?????の所にpushで配列のハッシュを作成しようと考えていましたが、うまくいきません。 下記のソース自体が的外れでしたら申し訳ございません。?????以外の場所も指摘して頂ければ幸いです。 よろしくお願い致します。 <TMPL_LOOP NAME="loop"> <TMPL_VAR NAME="one"><BR> <TMPL_VAR NAME="two"><BR> <TMPL_VAR NAME="three"><BR> </TMPL_LOOP> use HTML::Template; @data = ('aa<>ab<>ac','ba<>bb<>bc','ca<>cb<>cc'); foreach $xxx (@data) { my ($one,$two,$three) = split(/<>/,$xxx); ???????????????????? } my $template = HTML::Template->new(filename=>'sample.html'); $template->param(loop=>\@loop); print "Content-Type: text/html\n\n"; print $template->output;
あるCSVファイルを、Perl＋HTMLで、プラウザに「表」で表示させるようにしました。 しかし、追加で複数のCSVファイルを読み込ませて、同じ表に入れることができません。（今ある表のなかの、$r1,2,3と番号が存在してる以外の空欄になっている表に入れたいのです） どのようにすればいいのか、どなたかお教え下さい!＞＜ ちなみに、今作ってあるものはこんなかんじです。 動作確認済み。 #!/usr/local/bin/perl #----------------------------------- $file = "a.20090504.csv"; #----------------------------------- print "Content-type: text/html\n\n"; print "<html>\n"; print "<body>\n"; print "<br><br>\n"; print "<center>\n"; print "<table border=1 >\n"; $days = $file; $days =~ s/a.//g; $days =~ s/.csv//g; open(IN,"$file"); @kasou = <IN>; close(IN); foreach $line (@kasou){ ($r1, $r2, $r3, $r4, $r5, $r6, $r7) = split (/,/, $line); print "<tr>\n"; print "<td>$days</td>\n"; print "<td>$r1</td>\n"; print "<td></td>\n"; print "<td>$r2</td>\n"; print "<td></td>\n"; print "<td></td>\n"; print "<td>$r3</td>\n"; print "<td></td>\n"; print "<td></td>\n"; print "<td>$r4</td>\n"; print "<td>$r5</td>\n"; print "<td>$r6</td>\n"; print "<td>$r7</td>\n"; print "</tr>\n"; } print "</table>\n"; print "</body>\n"; print "</html>\n"; ※ちなみに、これですとCSVファイル名の20050504だけがtrに入るようになっています。これは、こうしたいのでこうしているのですが、繰り返しtrに投入されるようになっているのも気になります。 どうしたら直るでしょうか。
主にperlを使って、趣味で、プログラムを書いているのですが、処理を加える度、ifと行が増えて、気づけば、エディタ１ページ中に収まらず、非常に読みにくいプログラムになっています。 思いつきでも書きやすく、読みやすい、書き方or対策などはありますでしょうか？ また、以前、プロのプログラマの方のPCスペックを見ると、弘法筆を選ばずと申しますか、ノートPCで解像度が低く、良く、あれだけの大きなプログラムが書けるなぁと感心したことがあります。 画面の大きさとプログラムの書き易さには差が無いのでしょうか? 私など、ゲームをするための24インチ(WUXGA)を使っていますが、１ページに表示できるプログラムの量が増えれば格段に作業しやすいのにと思っています。 何か、秘訣の様なものがあるのでしょうか? 以上、回答いただける点だけでも回答いただけると幸いです。 宜しくお願い致します。 #サンプル if($test = 1){ 　#300行くらい処理が続く 　if($test1 = 1){ 　　#300行くらい処理が続く 　} }else{ 　#300行くらい処理が続く 　if($test2 = 1){ 　　#300行くらい処理が続く 　　if($test3 = 1){ 　　　#300行くらい処理が続く 　　} 　} }
以下のようなファイルを入力して、配列/連想配列に格納、これを後段の処理に利用したいと考えています。結構複雑なことをやってようやく処理できたのですが、もっと良い方法はありませんでしょうか。 逆に入力ファイルのフォーマットを処理しやすいものにしてしまっても構いません(perl形式で記述してrequireする方法はここではNGとします)。アイディア宜しくお願い致します。 1. #はコメント 2. 最終イメージ 　Vegetable: Tomato, Lettuce, Potato Fish : Salmon, Tuna, Fruit : Banana, Orange ※ ####～次の####までを塊として処理する部分で、ちょっと冗長な気がしています --- >8 --- >8 --- >8 --- >8 --- >8 # This is comment line # File created by ... # since 5/May/2009 #### Vegetable Tomato Lettuce Potato # Carrot <-- Comment line #### Fish Salmon Tuna #### Fruit Banana Orange --- >8 --- >8 --- >8 --- >8 --- >8 <<スクリプト例>> # ここでは@keyにカテゴリ(Vegetable, Fish, Fruit)、@valueに各々の食品名(Tomato, lettuce,...)を入れています #! /usr/bin/perl my $flag_first_match = 1; my $flag_hit = 0; my @key; my @value; open (LIST, "aaa.txt") || die "open error"; while(<LIST>){ if($flag_hit == 1){ $flag_hit = 0; $flag_seek = 1; if($flag_first_match==1){ $flag_first_match = 0; } } if(m/####\s+(.*)$/){ $key_tmp = $1; $flag_hit = 1; $flag_seek = 0; } chomp(); if(m/^\s*$/){next;} if(m/^#\s+/){next; } if($flag_hit==1 && $flag_first_match ==0 ){ # for on-going loop push(@value, $ref_tmp); } if($flag_hit == 1){ # for next loop push(@key, $key_tmp); $ref_tmp = []; } if($flag_seek == 1){ push(@$ref_tmp, $_); } } close(LIST); ### 印字確認 { local $, = ", "; for($i=0; $i < @key; $i++){ printf ("%2d | %-35s: ", $i, $key[$i]); foreach $ref ($value[$i]) { for ($j=0; $j < @$ref; $j++){ print "$j= @$ref[$j] "; } } print "\n"; } } <<出力>> 0 | Vegetable : 0= Tomato 1= Lettuce 2= Potato 1 | Fish : 0= Salmon 1= Tuna 2 | Fruit :
CGI.pmでHTMLのネームエンティティを出力できるのでしょうか。 例えばescapeHTML()は'<'や'>'を'&lt;'や'&gt;'へ変換してくれますが、 半角スペースは''へ変換してくれません。 半角スペースを使いたい場合、print('');のように書くしかないのでしょうか。 それともCGI.pmで何か専用の関数が用意されているのでしょうか。
４万行ほどあるcgiを解読中ですが、サブルーチンだけで数＋個あるので、サブルーチンを定義してあるところを探すのが大変です。 ＆ikeike　を選択すると sub ikeikeに手軽にジャンプするにはどういうeditorでどうしたらいいのでしょうか？ 秀丸エディタやPerlEditorでは＆ルーチンの一覧がでますが、たくさんあるのでその中から見つけるのが大変なのですが．．
私はubuntu linux　を使用しているのですが、perlで例えば、キー操作させたりソフトを開いてそれにある数値や文字を入力させたり、ネットを自動で開いてあるサイトに文字や数値を入力させたりするような事をさせたいのですが、それを可能にするモジュールはあるのでしょうか？もしくは参考になる書籍やサイトはあるのでしょうか？自分で探したのですが見つかりませんでした><
if文で例えばですが、以下のような文章を作りたい場合 if(○○日の××時 > time > ○○日の△△時){print "おやすみ";} else{print "こんにちは";} 「timeが○○日××時以上、○○日△△時以下」というif文を作りたいのですがうまくこのままだとERRORで書けません だれかご助力お願いいたします
Perl初心者です。基礎の基礎なので自分なりに調べたり勉強したりしたのですがいまひとつ理解できないので教えて下さい＞＜ ファイルの入力のサンプルとして open(FIN,"name.txt"); binmode FIN,'utf8'; $line=<FIN>; chomp($line); print"hello!$line\n"; close(FIN); を何の説明もなく提示されました。 ２行目は日本語を入力するためのものだということはわかります。 しかし所々に出てくるFINとは何でしょう？また$lineとは何事でしょう？ 質問もしてみたのですが如何せん言ってることがよくわからない教授なもので、万事休すです´｀ どなたかこのファイルを簡単に説明して下さるとありがたいです。
1分毎のデータが入ったテキストを処理しているのですが、たまに10~15分ほどデータが抜けています。これをデータの有る無しに関わらず1分毎の時系列に並べたいのですが、Perで処理するにはどういったプログラムを書けばよろしいでしょうか？ 具体的には 2009/4/1 20:21, abcdef 2009/4/1 20:25, ddeffg といったデータであれば、 2009/4/1 20:21, abcdef 2009/4/1 20:22, 2009/4/1 20:23, 2009/4/1 20:24, 2009/4/1 20:25, ddeffg という様な形に直したいという事です。 どうかよろしくお願い致します。
MySQL のコマンドシェルで 接続時に -X オプションを指定すると、SQL結果をXMLで返してくれます。 そこで、これをPerlから利用したいのですが、どうすれば良いのでしょうか。 イメージとしては、以下を考えています。 １．[クライアント]サーバーにデータ取得要求 ↓ ２．[サーバー]MySQLに接続（オプション -X 指定）・SQL実行要求 ↓ ３．[データベース]SQL実行・結果出力（XML） ↓ ４．[サーバー]３の結果をクライアントへ出力（XML） ↓ ５．[クライアント]SQL実行結果受取（XML) せっかくデータベースがXML整形してくれるなら、それを利用したいと考えています。 DBIで出来ないかとCPANを調べてみましたが、それらしい記述を見つけられませんでした。 （英語能力の低さもありますが） 参考になるページ等、ご教示頂ければ有り難く存じます。 以上、失礼いたします。
perl初心者です。 下記のようなファイルがあったとします。 パナソニック(ナショナル) 三菱電機 日立 東芝 SONY 下記のように、書きました while (<IN>) { use Jcode; Jcode::convert($_, 'euc'); chomp; $line+=1; Jcode::convert($_, 'euc'); if ($_=~ /\x8E/) { print "行=$line $_\n"; } } できあがったファイルは、下記のように、半角カナではなく、字化け状態になってしまいました。 行=2 姉鰭電機 行=4 東芝 よろしくお願い致します。
perlである文字列の先頭の1文字に漢字がつかわれているかどうか、判断したいのですが。。。。
以下のようなテキストを入力してソートしたいのですが、どのようにプログラムを書けばよいのでしょうか？ <<入力>> Fruit Apple Vegetable Tomato Friut Orange Fruit Grape Fish Salmon Vegetable Carrot <<ソート>> Fruit : Apple Orange Grape Vegetable: Tomato Carrot Fish : Salmon ソートしたあと、グループ毎の処理をしたいと思っています。 入力は数千行で、グループ(Fruit, Vegetable...)の個数などは不明です。
($type, $length, $time, $expires, $server) = head "http://www.example.jp/test.txt"; このような形でhead情報を取得する場合にRefererは送信されていないのでしょうか？ example.comからexample.jpのtxtファイルを読みに行く際に、example.jp側のhtaccessでRefererによるアクセス制限をかけるとexample.comをokにしていても蹴られてしまいます。 SetEnvIf Referer "^$" ref_okにすると読めるのでheadでの情報の取得の際にはRefererが送信されていないのではないかと考えています。 ただこれだとURL直接入力でtxtが表示できるのでセキュリティの意味はありません・・・ CGIプログラムが情報を取得する際（headでもconnectでも）先にRefererの送信ができれば可能な気がしますが、そんなことができるのかわかりません。 CGIでRefererの送信方法もしくは特定のURLのCGIからのみアクセスを許可するなどのアクセス制限方法などありませんか？
DNS更新の操作で、アカウントとパスワードを設定してドメイン提供サイトの更新ページへアクセスする。という作業があるのですが、これをブラウザを使わずワンクリックで行えるプログラムを作ろうと思っております。 DNSサービスはddoで以下の形式で更新ページへアクセスすることでドメインの更新ができます。 (http://)freeddo.jp/dnsupdate.php?dn=ドメイン&pw=パスワード&ip=IP クリックしたときにコマンドプロンプト呼出の形式でブラウザを立ち上げることはできたのですが、更新のたびにブラウザが立ち上がり消すのは手動になってしまいどうにも気に入りません。 おそらく上記のページにアクセスするだけで更新はされるのだと思うのですが、ブラウザを使わずバックグラウンドでアクセスだけをさせる方法はないでしょうか？ （思いつくワードで検索したところPerlを使うというページがいくつか見受けられたのでこちらで質問させて頂きました。） なお、登録したいIPがVPNのIPであるため、DiCEを使うという手段は使えません。
条件つきの正規表現がうまく組めず困っております。 以下のような条件で、テキストファイルを置換しようとしております。 置換 (1)　全角英数字を半角化 (2)　半角カナを全角化 (3)　& , " などの記号を文字参照（&amp;など）化 　　置換対象の種類は百程度あり、半角記号や全角機種依存文字など各種 警告 ・　第三／四水準文字や、特定の文字コードの文字があれば警告 処理対象条件 Ａ　置換対象のファイルは shift-jis Ｂ　ファイル内には、機種依存文字、第三／四水準文字が含まれる Ｃ　ファイル内の行が[en]から始まっていたら置換対象とする 　　ファイル内の行が[ja]から始まっていたら別の置換条件で置換する Ｄ　ファイル内の行が[lang=en]だったら、次の行を置換対象とする 　　ファイル内の行が[lang=ja]だったら、次の行を別の置換条件で置換する 上記のような条件となっております。 　当初、処理対象の条件がＡとＢだけだった時は、 ([０-９Ａ-Ｚａ-ｚ　！”＃＄％＆’（）＊＋，－．／：；＜＝＞？＠［￥］＾＿｀｛｜｝￣])　→　半角化 (ガ|ギ|グ|ゲ|ゴ|ザ|ジ|ズ|ゼ|ゾ|ダ|ヂ|ヅ|デ|ド|バ|ビ|ブ|ベ|ボ|パ|ピ|プ|ペ|ポ|ヴ)　→　全角化 などと一種類ずつ置換条件を書いて、置換と警告が出来ておりました。 　しかしＣとＤの条件が追加されたため、うまくいかずに困っております。 ^(^ja-|^ｊａ－)(.*?)([０-９Ａ-Ｚａ-ｚ　！”＃＄％＆’（）＊＋，－．／：；＜＝＞？＠［￥］＾＿｀｛｜｝￣]+) 　このような抽出条件を書いたりしましたが、置換対象と非対称が何度も交互に出る場合などに対応できておりません。 　なお、ＣとＤを含まない条件下では以下のフリーウェアを利用して置換処理をおこなっております。 http://www.sirmiles.com/repl_ace/ 　当初は Perl で開発しておりましたが、 ・　第三水準文字などが入った時にファイル出力できなかったこと ・　文字境界の問題か、全く同じ文字に対して置換できる場合とできない場合があったこと などにより上記フリーウェアの利用といたしました。 　上記や処理対象条件のＡが解決すれば、行頭語の判断は if 文のみでいけるのでＰｅｒｌの芽もありだと思うのですが…… 　現在調査を進めている方策は、以下３点です。 １　正規表現のみで行頭条件分岐＋全置換の仕方を見つけて、これまで使っていたフリーウェアで実施。 ２　現在は全く知識がないのだが、秀丸マクロでプログラムを組む 　（サブフォルダを含めファイルの一括処理、行単位での処理、行頭の判別、半角化や全角化などなど……） ３　第三水準文字などの扱いと、置換できる場合とできない場合の調査を行いＰｅｒｌで開発 （優先順位としては　１＞２＞３　な感じですが、１は現在行き詰まり２で調査や試行錯誤中です） 　どなたか詳しい方にご意見・可否などいただければ幸いです。 　時間もなく、日中もネットにつながらないために返信も遅いかもしれませぬが、よろしければお知恵をお貸しください。
現在perl言語とhtml言語を使用しweb上で見れるホームページを作成しています。 perl言語とhtmlを言語を使用して全てのチェックボックスにチェックをいれるボタンを作成したいのですが、 中々上手くいきません。 ※以下.cgi内の部分ソース print <<HTML_BODY; </table><br> <input type='submit' value='送信'> <input type='reset' value='リセット'> </center> </form> </body> </html> HTML_BODY ネットでも調べたのですが、JavaScriptを使用しないとできない？様な事が書かれていました。 私一人では分からないので、皆様ご教授お願い致します。
perlにアクセスしたときにクッキーに保存するのはわかるのですが、 htmlにアクセスしたときにperlでクッキーを保存するようにしたいのですが、 どのようにしたらいいのでしょうか？
Windows XP Home Edition SP2＋ActivePerl5.10.0を使用しています。 perlから外部プログラムを終了する方法を教えていただけますでしょうか？モジュール使用でも構いません。
sub decode { if ($ENV{'REQUEST_METHOD'} eq "POST") { if ($ENV{'CONTENT_LENGTH'} > 51200) { &error("投稿量が大きすぎます"); } read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'}); } else { $buffer = $ENV{'QUERY_STRING'}; } @pairs = split(/&/,$buffer); foreach $pair (@pairs) { ($name, $value) = split(/=/, $pair); $value =~ tr/+/ /; $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg; $in{$name} = $value; } while (($k,$v) = each %in) { $v =~ s/&/&amp;/g; $v =~ s/</&lt;/g; $v =~ s/>/&gt;/g; $v =~ s/"/&quot;/g; $in{$k} = $v; } } 上記の処理が、具体的にどうなっているのかよくわかりません。 どなたか分かる方、説明をお願いします。
いつもお世話になっております。 Perlのデコード処理で分からない事があります。 大変申し訳ございませんが、 ご存知の方がいらっしゃれば、教えて頂けますでしょうか。 以下のプログラムを実施すると以下のエラーが発生しまい 正しくデコードされた結果が表示されません。 この場合、どのようにして$sの文字をUTF-8と判断させて shiftjisに変換すればよいのでしょうか？ (プログラム) #!/usr/local/bin/perl use Encode qw/from_to/; use Encode::Guess; Encode::Guess->set_suspects(qw/shift-jis euc-jp 7bit-jis/); $s = '%E7%A7%BB%E8%BB%A2'; # UTF-8 $s =~ tr/+/ /; $s =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("H2", $1)/eg; my $decoder = Encode::Guess->guess($s); die $decoder unless (ref($decoder)); &from_to( $s, $decoder->name, "shiftjis" ); print $s; (エラー内容) shiftjis or euc-jp or utf8 at test.pl line 12.
お世話になります。 ソートのテクニックについて教えていただきたく質問しています。 ソートをするに、パタンが二つあると思います。 例示パタン１； 一人が５回の試技を行い、結果を記録したレコードがあり、 ５回の試技を昇順に列べてからリストする。 レコード形式；名前、試技１、試技２、、、試技５、試技平均 例示パタン２； 一人が砲丸投げとやり投げを行い、結果を記録したレコードがあり、 砲丸投げと、やり投げ毎に記録の良い順にリストする。 レコード形式；名前、砲丸投げ記録、やり投げ記録 上記パタン１では、データを頭から読み出しながら試技をソートすれば良く、 ソートに要するスペース（メモリ？）は少なくて済む。 パタン２では、予め全レコードについてソートしてからリストする必要があるため、 スペースが要求されると思います。 ここで質問です。 パタン２のような場合、どのようなテクニックを使えばよいのでしょうか。 実際に動かしているのですが、パソコンでは問題なくても携帯電話で動かすと、 ”上限サイズを超えたので云々”とのエラーになります。 （シュワルツ変換というテクニックでソートしています。） 　　@lines = map {$_->[0]} 　　　　　sort {$b->[11] <=> $a->[11] or $a->[1] <=> $b->[1]} 　　　　　map {[$_, split /<>/]} @lines; 上記の場合、メモリに蓄えられてソートがされると思います。 一度外に書き出すようなテクニックの方が良いのでしょうか。 時間も掛からず、メモリも食わない方法が理想ですが、 そうも行かないと思います。 メモリを食わずに済む方法を教えてください。 宜しくお願いします。
Perlを初めて数日の初心者です。あるソフトでPerlの勉強中ですが、data directoryにname.csvがあります。 unlink "data/(C)name.csv"; という記述があるのですが、(C)　というのはなんなのでしょうか？
perlの初心者です。HTMLテンプレートとして、cpanのTemplate-Toolkitを勉強している最中です。 ディレクトリ 　/htdocs/ 　　/lib/ttk.pl #CGIスクリプト 　　/tmpl/ttk.tpl #HTMLテンプレート(<body>以下) 　　/html/header #HTMLテンプレート(HTMLヘッダー) 上記の構成で、ttk.plを実行すると、ttk.tplからheaderを読み込み、HTMLを出力するプログラムを作成しているのですが、ttk.tplからheaderをincludeするとエラーが発生します。 ttk.tpl の冒頭に記述 [% INCLUDE ../html/header %]でエラーになります。 補足)/lib/内にheaderを持ってきて、 [% INCLUDE header %]とすれば成功はします。 おそらく、ディレクトリ指定の仕方が間違っていると思うのですが、../の場合の指定がわかりません。 マニュアルを見ても、../の場合の説明がありません。 http://www.hakoniwa.net/tt/ わかる方、ご指導いただけないでしょうか。 よろしくお願いいたします。
すごく簡単なアクセスカウンタなのですが実行できません。 ちなみに、perlスクリプトは、count.plというファイルに、 #!/usr/local/bin/perl $countfile="count.dat"; open IN,"$countfile"; $count=<IN>; close IN; $count=$count+1; open OUT,">$countfile"; print OUT $count; close OUT; print $count; html内の記述は、 あなたは、<!--#exec cmd="http://hpcgi3.nifty.com/******/count.pl"-->人目 plファイルを置くディレクトリは間違っていないようです。 perl、@niftyに詳しい方回答お願い致します。
早速です。 以下のように頭に連番、 次の４項目が００～９９までの数字の レコードがあります。 これを連番は崩さず、 ４個の数字を昇順に並べたいのですが。 どのようにソート（コード）すれば宜しいでしょうか。 1<>8<>13<>27<>30<> 2<>20<>9<>1<>16<> 3<>5<>31<>36<>38<> 4<>52<>79<>18<>27<> 5<>23<>15<>9<>28<> 6<>38<>6<>45<>25<> ↓ 1<>8<>13<>27<>30<> 2<>1<>9<>16<>20<> 3<>5<>31<>36<>38<> 4<>18<>27<>52<>79<> 5<>9<>15<>23<>28<> 6<>6<>25<>38<>45<> 宜しくお願いします。
申込フォームの値をperlで受け取り、その値を別のhtmlページで表示するにはどうするのでしょうか。
perlのCGI.pmモジュールの使い方について教えていただきたいです。 説明が苦手でなかなか分かりにくい説明になるかもしれませんが、よろしくお願いします。 use CGI; $test = new CGI; $test->import_names('MyForm'); 上記のような場合、$MyForm::nameといった形での取得になると思います。 MyFormを全て無定義にしたい場合はどのようにすればよろしいでしょうか？ どこかで$test->flesh('MyForm');のようなものを見た記憶がありますが、どうも違うようです。 どなたかご存知の方教えてください。
初心者の質問で申し訳ないのです。 よくネットにあるファイル名を打ち込むタイプのPerl Checkerではなく、本文を打ち込んでエラーを確認できるタイプのPerl Checkerはありませんでしょうか？ どうぞよろしくお願いします。
スクリプト構文を大きく変更せずにabcdefghiと表示させるにはどこを修正すればよいでしょうか？ [server ~/]$ uname -a FreeBSD xxxxxxx.xxxxxx.xx.jp 7.1-RELEASE-p4 FreeBSD 7.1-RELEASE-p4 #1: Mon Mar 23 17:35:54 JST 2009 admin@www200.sakura.ne.jp:/usr/obj/usr/src/sys/SAKURA11S i386 [server ~/]$ perl -v This is perl, v5.8.9 built for i386-freebsd-64int (with 1 registered patch, see perl -V for more detail) Copyright 1987-2008, Larry Wall Perl may be copied only under the terms of either the Artistic License or the GNU General Public License, which may be found in the Perl 5 source kit. Complete documentation for Perl, including FAQ lists, should be found on this system using "man perl" or "perldoc perl". If you have access to the Internet, point your browser at http://www.perl.org/, the Perl Home Page. [server ~/]$ cat test.pl #! /usr/bin/perl $a = "abc@def@ghi"; while ($a =~ /\@/) { $a =~ s/\@//; } print "$a\n"; [server ~/]$ ./test.pl abc [server ~/]$
ホームページ上で非常に簡単な発注書を作りたいのですが、Perlをよく知らないので作ることができません。製品は４種類だけですので簡単にできるのではないかと思っています。Perlに精通している方がいらっしゃいましたら、どうか教えて下さい。 商品単価（固定値）　これに購入数量（１～１０個）を入れれば、その横に計算された金額を表示。４種類なので４段。その４段の合計を５段目に表示。こんなものをPerlで作って頂けるでしょうか？環境はWinXPソフトはホームページビルダーを使っています。 Perlはよく分かりませんので、できればソースを作って頂き、それをそのままコピーして貼り付けしたいのですが、そんなことできますでしょうか？どうか、よろしくお願い致します。ＰＳ　転送などに関しては問題なく行えていますので、ただ単なる表だけの作成でＯＫです。
異なる２つのサーバーがあり（A,Bとする） Aはファイヤーウォールの外側に、Bは内側にいます。 ファイヤーウォールはポート80のみが開いて、サーバーBは Aからのみ繋がるように設定されています。 Aサーバはユーザーからのデータ入力を受け付け、Bサーバーにある プログラムにデータを渡し、データベースサーバーからデータを取得し 結果を返すプログラムを書いているのですが、良い方法があればおしえてください。 サーバー環境：A:CentOS＋Perl5.8.0 サーバー環境：B:CentOS＋Perl5.8.0＋DBI:pg＋PostgreSQL8.1 となっています。 AからBに対しては、どのように値を渡せばいいのか？ Bにあるスクリプトはどうやって結果を返せばいいのか？ そもそもCGI（Perl）だけでこのようなことが可能なのか？ 教えていただけたらと思います。 よろしくお願いいたします。
load averageを確認する為に、perlにてload averageを取得して表示させていますが、別のサーバー(複数台)のload averageを取得して表示することは可能ですか？ もし、可能でしたらどのように取得したらいいのでしょうか？ ご存知の方、よろしくお願いします。
Perlで書かれたCGIを実行しようとしているのですが、プログラムはEUCで記述されているそうです。nkf　-g　***とするとEUC-JPとなります。 print " <META http-equiv=\"Content-Type\" content=\"text/html; charset=EUC-JP\">\n"; とも記述されているのですが、ブラウザで実行（閲覧）すると文字化けして、ブラウザのエンコードは、Unicode(UTF-8）になっています。 ちなみに、OSはCentOS5.2です。 どうやったら、EUCで記述されたCGIが文字化けせずに実行できるのでしょうか？ teratermでサーバに接続語、viコマンドで表示しても文字化けしています。ファイルの文字コードをEUCからUTF-8にして（nkf　-w　***）、ブラウザでアクセスしても文字化けしてしまいます。
$ cat ./text aaa bbb $ perl -i -e "s|^.|ok|" ./text これを実行しても、./text に変化がありません。 どこが間違っているのでしょうか？ $ cat ./text okaa bbb となることを期待しています。
いつもお世話になっております。 以下の例の様に 文字コードがEUCであるか正規表現で判定ロジックを記述したいのですが、 どのように記述すればよろしいのでしょうか？ (例) if(文字コードがEUCであるか正規表現でチェック){ 　処理A }
perlで作ったプログラムを英語が読めず、説明書を見ながらOfficeのインストールしかやったことの無い、パソコン初心者の方に、perl環境をセットアップしてもらうのは意外と大変です。 かと言って、ActivePerlを添付して配布するわけにもいきませんし、 どのようにすれば気軽に使ってもらえますかね?
HTML::Templateを使用してサイトを構築しようとしてるのですが、うまくいきません。 例1のようにしたいのですが、どこが間違っているかを指摘していただきたく書き込ませて頂きました。 ちなみに例2ではうまく作動しています。 よろしくお願い致します。 サンプルコード ★sample.html★ <TMPL_LOOP name=arr> <p><TMPL_VAR name=val></p> </TMPL_LOOP> ★例1★ my $template = HTML::Template->new(filename => 'sample.html'); @arr = [ {val=>'1'},{val=>'2'},{val=>'3'} ]; $template->param(arr => \@arr); print "Content-Type: text/html\n\n"; print $template->output; ★例2★ my $template = HTML::Template->new(filename => 'sample.html'); $template->param(arr => [ {val=>'1'},{val=>'2'},{val=>'3'} ] ); print "Content-Type: text/html\n\n"; print $template->output;
コマンドプロンプト上で、perl -pe 's/./*/' を実行しましたが、置換されません。 どこが間違っているのでしょうか？ perl -pe 's/./*/' abc => abc ActivePerl v5.8.8 UbuntuのPerlで同じことをしたら、 => *bc と、ちゃんと置換されました。
いつもお世話になっております。 Perlにて、以下のUTF-16の文字コードをデコードしたいのですが、 どのように記述すればデコード出来るのでしょうか？ ※PerlのVerは5.8です。 (文字コード) %u4f11%u6b62%u30fb%u89e3%u7d04%u30fb%u5fa9%u6d3b よろしくお願い致します。
いつもお世話になっております。 以下の文字が、何の文字コードのエンコードか分かりません。 ご存知の方がいらっしゃれば教えて頂けますでしょうか？ (文字) %u4f11%u6b62%u30fb%u89e3%u7d04%u30fb%u5fa9%u6d3b
Perlで記述したCGIをブラウザ上で動かしてみるとうまく動かない。一行ずつ動かすことが出来たら、どこで可笑しなことになっているのか簡単にわかるのに・・・ そんなしょぼしょぼプログラマの儚い夢を実現してくれるツールもしくは方法は存在しないでしょうか。
dfコマンドで表示される内容を、perlを使って表示したいのですがどうやったら表示できるのでしょうか？ phpだとサイトを検索すると情報があったのですが、perlの場合がなかなか見つからなく困っております。 どなたか教えていただけませんか？
テニスのダブルス組み合わせ用のスクリプトを考えております。 ネットでいろいろ Javascriptでは教えていただいたのですが、 携帯からはJS使えないことを後で知り、 Perl-CGIならいけるのでは？と。 Perlについてまったくわからないので 下記の件について、大変僭越ではありますが 移植をお願いしたいのです(;^_^A 【何をしたいのか】 ・テキストボックスで任意の数字（整数）で範囲と行数を指定。 ・結果は数値４個固定とし、４個で１グループ。この４個内は重複がないように。 ・４個１グループを指定の行数分求める。 ・このとき、なるべくならすでに出た数字は後回しにしたい。例えば1～10の範囲としたら、1～10すべて出るまでは一度出た数字は後回しになるように。 ・小さい範囲で大きな行数を指定すれば、必ず同じ組み合わせが出ることは了承。 ・結果は下記のようにしたい。 1,6,8,3 2,4,5,10 9,7,2,3 ・ ・ 3,6,8,1（１行目と同じ組み合わせだが順不同なので可、またはまったく同じのが出ても可） 以下は、Javascriptで稼動するソースになります。 ※後半のFORM部分からPOSTして CGIにて受取、乱数生成したHTMLを表示させるようにしたいのです。 ---------------------------------------------- <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=shift_jis"> <meta http-equiv="Content-Language" content="ja"> <meta http-equiv="Content-Script-Type" content="text/javascript"> <meta http-equiv="Content-Style-Type" content="text/css"> <script type="text/javascript"> <!-- function OnceRand(min, max) { if(isNaN(min) || isNaN(max) || parseInt(min) >= parseInt(max)) throw new Error("指定の値に誤りがあります。"); this.min = parseInt(min); this.max = parseInt(max); this.createArray(); } /* 配列を作成します。 */ OnceRand.prototype.createArray = function() { this.original = []; for(var ix = this.min; ix <= this.max; ix++) { this.original.push(ix); } this.arr = this.original.concat(); }; /* 次の値を取り出します。 */ OnceRand.prototype.next = function(length) { var per = []; if(0 >= length) return per; for(var ix = 0; ix < length; ix++) { if(this.arr.length <= 0) this.arr = this.original.concat(); do { var dup = false; var ax = Math.floor(Math.random() * this.arr.length); for(var px = 0; px < per.length; px++) { if(per[px] == this.arr[ax]) dup = true; } } while(dup) per.push(this.arr.splice(ax, 1)[0]); } return per; }; /* 乱数を生成します。 */ function genRandom() { var minBox = document.getElementById("min"); var maxBox = document.getElementById("max"); var lineBox = document.getElementById("line"); var console = document.getElementById("console"); var consoleClone = console.cloneNode(false); var lineMax = parseInt(lineBox.value); var rand1 = new OnceRand(minBox.value, maxBox.value); for(var lx = 0; lx < lineMax; lx++) { var texts = rand1.next(4); var textLine = document.createTextNode(texts.join(" ,")); var breakLine = document.createElement("br"); consoleClone.appendChild(textLine); consoleClone.appendChild(breakLine); } console.parentNode.replaceChild(consoleClone, console); } // --> </script> <title>範囲乱数</title> </head> <!--ここからはページ表示部分--> <body> <div> 範囲：<input type="text" id="min" value="" size=2 maxlength=2> ～<input type="text" id="max" value="" size=2 maxlength=2> <br> 行数：<input type="text" id="line" value="" size=2 maxlength=2> <br> <input type="button" value="乱数発生" onclick="genRandom();"> </div> <div id="console"></div> </body> </html> -------------------------------------------------------
[環境] ・Solaris10 ・perl 5.8.4 ・Sys::Syslog 0.05 上記環境で文末に示すperlスクリプトからSys::Syslogモジュールを利用してsyslogを出力すると、 Mar 20 18:27:31 hostname <15>abc: this is syslog test のように出力され、 ・tagの前に<数字>が付いてしまう ・[ID xxxxxx facility.level]の表示がされない という意図しない出力形式となってしまいます。 期待している出力形式は以下の通りです。 Mar 20 18:27:31 hostname abc: [ID 702911 user.debug] this is syslog test IDとfacility.levelをスクリプトにより強制的に付加して表示する方法については、別の質問に回答がありましたが、tag の前の<番号>についてはどうにもできそうにありません。 因みに以下の環境では、意図した通りにsyslogが出力されます。 ・Solaris8 ・perl 5.6.1 ・Sys::Syslog 0.18 同じような事象を経験し解決された方はおりますでしょうか？ 宜しくお願いします。 ----------------------------------------------- #!/usr/local/bin/perl use strict; use warnings; use Sys::Syslog; openlog('abc', 'cons,pid', 'user'); syslog('debug', 'this is syslog test'); closelog(); -----------------------------------------------
こんばんわ。前回質問したときに、 回答をしていただいた方、ありがとうございました。 原因は、結局のところ、サーバー会社の自分の使っているサーバーに ImageMagickがインストール？されていなかったみたいでした。 使えないのですが、（使用では使えることになっていた。） と、連絡したところ、無事使えるようになりました。 ありがとうございました。 ですが、実際、ImageMagickを使ってみて、 その機能の一部である、文字合成については英数字のみできました。 プログラムのuseにある、Jcodeが、働いていないみたいでした。 これはサーバーのサポート外なので、どうしようもないのですが。 そこで、思いついたのは、jcode.plを使って、なんとかならないかなー？と、思ったのですが、これはさすがに、無理でしょうか？ 当然できたとしても難しいとは思うのですが、どうでしょう？ 無理でしょうか？ できるのでしょうか？できたとしても、かなり難しいのでしょうか？ できるとしたら、どんな感じに組めばいいのか、参考になるアドバイスがいただけたらと、思っているのですが。 よろしくお願いします。 ↓は日本語が表示されなかった、プログラムです。 #!/usr/local/bin/perl -w use strict; use Jcode; use Image::Magick; # 画像を指定 my $file = "sample.jpg"; # 合成したい文字列 my $text = "ABC123日本語"; # UTF-8へ変換 $text = jcode($text)->utf8; # オブジェクト作成 my $image = Image::Magick->new; # 画像読み込み $image->Read($file); # 文字を記入する $image->Annotate(text=>$text, stroke=>'#FFFFFF', fill=>'#005599', font=>'sazanami-gothic.ttf', pointsize=>'36', x=>'20', y=>'40', encoding=>'UTF-8'); # 画像出力 print "Content-type: image/jpeg\n\n"; binmode STDOUT; $image->Write('jpeg:-'); undef $image; exit; よろしくお願いします。 ありがとうございました。 よろしくお願いします。
掲示板のコメントの中にURLやメールアドレスが書き込まれている時に、自動的にリンクを貼る方法を教えてください。
こんばんわ。 perlで、画像に文字を入れたいと思います。 そこで、ppmからImage::Magickを入れました。 そして、test.plに以下の様に記述しました。 #!/usr/local/bin/perl use Image::Magick; $p = new Image::Magick; $p->Read("img.jpg"); $p = $p->Transform( geometry=>"240x320" ); $p->Annotate(font=>'C:\Windows\Fonts\arial.ttf', pointsize=>20, fill=>'white', text=>'TEXTTEXTTEXTTEXT', x=>200, y=>150); $p->Write("img.new.jpg"); そして、同じフォルダにimg.jpgを置きtest.plを実行したところ、 画像は215?×320になりましたが、 文字は記述されていませんでした。 Image::Magick perlなどで、検索しているのですが、 なかなか解説しているサイトはありませんでした。 Annotate()の記述が違うのではないかと思うのですが、 正しい書き方を教えて下さい。 どうすれば、文字を載せれるのでしょうか？ よろしくお願いします。
この手の質問はたくさんありましたが、具体的な解決がなく、よく理解できなかったので質問させていただきます。 Perlで受け取ったデータを他のcgi（hoge.cgi)にPOSTで送るにはどうすればよいのでしょうか？ JavaScriptを吐いて処理する方法もありますが、JavaScriptを使用せずにする方法を求めています。 ソケットを使うらしいのですが、その当たりの知識が全くないので過去質問などを見てもほとんど理解できません。 どなたか分かりやすく教えていただけないでしょうか？
$com =~ s/([-_.!~*'()a-zA-Z0-9;\/?:\@&=+\$,%#]+)/$1<br>/g; 上記のように、 [-_.!~*'()a-zA-Z0-9;\/?:\@&=+\$,%#]+ が含まれる箇所を置き換えしているのですが、 s?https?:\/\/[-_.!~*'()a-zA-Z0-9;\/?:\@&=+\$,%#]+ が含まれる箇所は、置き換えを適用しないようにしたいのですが、 昨日から思考錯誤しておりますが、見当が付きませんでした。 それと、s?はどのような意味があるのでしょうか？ 質問ばかりで申し訳ございませんが、宜しくお願いいたします。
ファイルから読み込んだ全角文字をあるキーワード（例えば"田中"）が含んでいるか否かを判定するプログラムをつくりたいのですが、なかなか上手くいきません。ファイルをopenし中の文字を読込み、それを変数に格納、ifでeq使って判定したのですが、全角は判定してくれません。全角を判定するには一体どうしたら良いのでしょうか？ $filename = "####.txt"; open( $fh, "< $filename" ) #ファイルopen or die "Cannot open $file: $!"; $key = 'キ'; #キーワードを決めて while ($c = getc $fh ) {　#比較する if($c eq $key){ print "キーワードを見付けました。"; } } close(fh); getcだとおそらく全角は文字コードを読み込んでしまうような感じでしょうか？print $c "\n";とすると文字化けします。しかし、printf("%d", $c);だと何も表示してくれません。これはord関数を使わねばならないのでしょうか？それとも別な方法が？等などためしたのですが、もう分かりません。 御指導御鞭撻をよろしくお願いします。
商品購入ボタンを押すと、「カートの中身」画面に移動します、 カートの中身のデータ保存方法でお聞きしたいのですが。 クッキー設定が無効でURLの後のデータ渡し、hidden渡しをしない場合 の方法をご教授お願いしたいです。 下記のサイトではPHPで書かれてますがカートの中身データが「Temporary Internet Files」に保存されるようです。 出来ればperlで実現できるのであれば　よろしくお願い致します。 ttp://www.4d-nail.com/
Perlの初心者です。今、n-garam解析をしようと思い、perlを使っています。「地球温暖化の要因は大気汚染です・・・」というようなデータを下記のようなデータに加工して準備しました。後は、指定した行の改行を消すと分析ができるのですが、どのような方法で進めればよいのでしょうか。配列で読み込み、if文で配列@arrayが[0]、[2]、[4]、[6]・・・の場合、改行をタブに変えるようなことができるでしょうか。初心者で入門書しから読んでおりませんので、簡単な質問であれば、お許しください。 [準備したデータ] 地球 温暖 温暖 化 化 の の 要因 要因 は ・ ・ [やりたいことn-garam] 地球　温暖 温暖　化 化　の の　要因 要因　は
HTMLから株式情報を抜き出すCGIを定期的に実行しているのですが 大量のHTMLをforeachで一行ずつ処理しているせいか 非常に動作が遅いです。 そこでそのほかの方法がないか考えてみましたが なかなか思いつきません。 何かよい方法はないでしょうか？ 以下のソースは現在私が使っている方法を 簡単に書いてみました。 ------------------------------------------------------ @{html}=( "abcdefghijklmnopqr1stuvwxyz", "abcdefghijklmnopqr2stuvwxyz", "abcdefghijklmnopqr3stuvwxyz", "abcdefghijklmnopqr4stuvwxyz", "abcdefghijklmnopqr5stuvwxyz", "abcdefghijklmnopqr6stuvwxyz", "abcdefghijklmnopqr7stuvwxyz", "abcdefghijklmnopqr8stuvwxyz"); #あまりよろしくなさそうな方法 foreach ${_}(@html){ 　　　　$top=index(${_},"r"); 　　　　$end=index(${_},"s"); 　　　　$result=substr(${_},$top+1,$end-$top-1); 　　　　 　　　　print"$result<br>"; 　　　　 } ------------------------------------------------------ できれば、@{html}を一行ずつ処理するのではなく ${html}から正規表現などで一気に数字（必要な箇所）だけ 抜き出せれば理想です。 質問の仕方がへたくそで申し訳ないです。 わかりにくい箇所などはいっていただければ 随時追加の説明をします。 どうぞよろしくお願いします。
以下のようなクラスを作成したいのですが、どのようにクラスとして定義して、どのように呼び出せばよいのでしょうか。特に「score」の部分の記述方法が良く分かりません。 オブジェクト指向(とくにPerl)はあまり経験がない初心者です。 -------------------- データ構造 name addr score--+-- math +-- english +-- science -------------------- クラス記述 package myClass; $ref_score->{math} = '30'; # <-- 正しい? $ref_score->{english} = '40'; # <-- 正しい? # ... sub new { my $class = shift; my $self={}; $self->{name} = 'tanaka'; $self->{addr} = 'tokyo'; $self->{score} = $ref_score; # <-- 正しい? bless $self, $class; } -------------------- メイン文 package main; $inst[0] = myClass::new(); $inst[0]->{name} = "OVERWRITE_NAME"; $inst[0]->{score}->{math} = "OVERWRITE_SCORE_MATH"; print $inst[0]->{module}."\n"; # 出る print $inst[0]->{score}->{math}."\n"; # オーバーライトした値は出るが... print $inst[0]->{score}->{english}."\n"; # 初期値のままの値は表示してくれない... 宜しくお願いいたします。
use strict; use warnings; 0->[0] = 100; print 0->[0]; # => 100 こんなソースがコンパイルも通りちゃんと100と表示されてしまうのですが 一体何が起こっているのか分かる人教えてくださいm(_ _)m 環境はcygwin perlとStrawberry Perlで確認しました ちなみに http://oshiete1.goo.ne.jp/qa4723836.html この質問を調べていたら発見しました
@UserDataNum=qw(11 13 34) @PDataLinesの中身 1<>タイトル<>2009/02/10<>適当なデータ<>適当なデータ２<> 2<>タイトル２<>2009/03/13<>適当なデータ<>適当なデータ２<> .. 50<>タイトル３<>2009/03/23<>適当なデータ<>適当なデータ２<> $TODAY=今日の時間; foreach(0..$#PDataLines){ my@aaa= split(/<>/,$PDataLines[$_]); my$a2 = $aaa[2];$a2 =~s{/}{}g; #ここの処理で@UserDataNumに入っている数字と一致する$aaa[0]を含む行を除外し、時間が今日以降のものを配列@Arrayに入れたいのです if(($aaa[0] !~ /@UserDataNum/) && ( $TODAY < $a2)){ push(@Array,$PDataLines[$_]); } } print "\@Array=@Array"; if(grep(!/@UserDataNum/, @PDataLines) && ( $TODAY2 < $a2)){ としてみたり試みているのですが、思うように出来ずにいます。 どなた様かご教授願えませんでしょうか 宜しくお願い致します。
データをまとめる必要があったので正規表現を使える秀丸で挑戦していたのですが、どうにもできませんでした。 他に正規表現に強いPerlを使用していているのですが、うまく動いてくれません。 ファイルの読み込みから、結果の書き出しまでは様々な場所を参考にしてできたのですが、条件の指定がうまくいきません。 例 『カテゴリ1』...%E9gfdadas879gdsa\tmpフォルダ\1114-2-346\1051.doc データとして必要なのは『カテゴリ1』と最後の1051.txtなのですが、指定した以降の文字列を削除する方法で『カテゴリ1』だけは取り出せるのですが、後の1051.docの部分をどう指定したら言いの判りません。 %Eから始まる文字の羅列は1114-2346までは同じなのでできれば一辺に指定してしまいたいと思っています。 初歩な質問でしょうかよろしくお願いします。
こんにちは。 Perl＋DBIで書いています。 プレースフォルダを使う際に、複数の値を指定して、それぞれを別の型にしたい場合はどうすればよいのでしょうか？ 例えば、doメソッドなどを使って、 $key=100; $name='myname'; $dbh->do("INSERT INTO table (key,name) VALUES (?,?)",?????,$key,$name); として、$keyと$nameを埋め込みたいのですが、それぞれ型が違います。 このような場合はどう記述すればよいのでしょうか？
perlからSQL文を発行してoracleのテーブル毎のレコード件数を 調査して結果はテキストファイルに出すというプログラムを 考えました。 perlのプログラムを定期的に実行するのに windowsのタイムスケジューラーを使って行おう と思ったのですが、 windowsの時間がずれていると決まった時間に実行できない のではないか、というところで悩んでいます。 宜しければ、何か解決の為のヒントをいただけないでしょうか。
Perl/CGIを独学で学んでいます。 掲示板やチャットが作成できる程度です。 私はPerl=CGIと考えていたのですが(HTMLがサイト作成に使うことのように専用の言語とでもいいましょうか)、ぜんぜん違うようです。 PerlはCGI以外に Perlではどのようなことができるのでしょうか？ 大まかな認識だと ビィジュアルを持たない、(VBでいうフォームパーツですかね)バッチファイルなど？ で、コマンドプロンプトで動作するようなイメージがありますが(.batを起動するとメモ帳みたいなアプリではなく、特定の処理して終了みたいな) 無知な私にPerlで出来ることをお教えください。 せっかくPerl/CGIが少しは理解できているのでPerlをもっと勉強しようかとあぐねいているとこらです。 混乱しているため変な質問でしたらすいません
Perlの参考書・本等ではプログラムファイルの第1行目は #! /usr/local/bin/perl という1行がよく有りますが,WindowsXPを用いている場合では,この1行をどう直せばよいのでしょうか? #! (perl.exeが存在するフォルダのパス) でよいのでしょうか? 私はWindowsXPを使っていて,この1行を使わずにプログラムを書いておりましたので,この1行の意味がよく分かりません。 ある参考書には,"#!はその行に書いたコマンドに,ファイルの残りの部分を渡して実行すると言う性質を持っている"と有りました。だから,試しにfile1.plとfile2.txtを準備し, file1.plの中身 　#! (perlの存在するフォルダのパス)\perl.exe 　while(<STDIN>){ 　　print; 　} file2.txtの中身 　hello world として,コマンドプロンプトで file1.pl < file2.txt としたのですが正しく動作しませんでした.(perl file1.pl < file2.txt　と入力した場合は正しく"hello world"となりました)
こんばんは。 forの中の処理がわからないので質問させてください。 以下のような内容のファイルの処理で、 ------------------------------------------------- ■大項目１ 　○中項目１ 　　・小項目 　　・小項目 　○中項目２ 　　・小項目A 　　・小項目 　○中項目３ 　　・小項目 　　・小項目 ■大項目２ 　○中項目１ 　　・小項目A 　　・小項目 ■大項目３ 　○中項目１ 　　・小項目 　　・小項目A ■..... ----------------------------------------------- ■から次の■までの、大項目・中項目・小項目のセットの中で、 大項目が指定した文字列（$xx）を含み、かつ一番目の小項目が指定した文字列($yy)を含む場合に、中項目の内容を置換するというスクリプトを書いています。 ひとつのセットの中に中項目が１つしかない場合はうまくいくのですが、複数の中項目がある場合の処理がどうしてもわかりません。 それぞれの中項目の一番目の小項目が指定した文字列を含んでいたら、その中項目を置換したいのですが、下のスクリプトの★マーク部分の処理はどうやったらいいのでしょうか。 どうかご教示お願いいたします。 ------------------------------------------------------------- $xx = "大項目"; $yy = "小項目A"; while (<>) { last if /^■/; } while (/^■/) { $dai = $_; @set = (); @syou = (); $dai_match = 0; $count_chuu = 0; $syou_match = 0; push(@set, $_); while (<>) { last if /^■/; if ($dai =~ $xx) { $dai_match = 1; } if (/○/) { $count_chuu++; #中項目の数をカウント } if (/・/) { push(@syou, $_); if (@syou[0] =~ "$yy") { $syou_match = 1; } } push(@set, $_); } if ($count_chuu >= 2 && $dai_match == 1) { #中項目が２つ以上で、大項目がマッチしている場合 for (@set) { # ★ } } elsif ($count_chuu == 1 && $dai_match == 1 && $syou_match == 1) { #中項目が１つで、大項目と小項目がマッチしている場合 for (@set) { s/○/●/; #中項目を置換 } } print @set; }
掲示板のコメント欄にURLが記入された場合は、一番初めに書き込まれたURLを変数に格納したいのですが、方法が考えつけません。 以下の書込み内容の場合で例えますと、 -------------------------------------------------- あいうえおhttp://hoge.com/かきくけこhttp://hoge.jp/ さしすせそhttp://hoge.net/たちつてと -------------------------------------------------- $FORM{'comment'}から一番初めに書き込まれた文字列 (http\:[\w\.\~\-\/\?\&\+\=\:\@\%\;\#\%]+) を抽出して、変数に格納。 $url = 'http://hoge.com/'; このような感じです。 お手数ですが、宜しくお願いいたします。
アクセスカウンターの数字画像を出力するperlのcgiを、<img>タグで、 <img src="./counter.cgi"> と、呼び出す方法があると思いますが、これと同じように、画像ではなくテキストを出力するperlのcgiをhtml中に呼び出して、ブラウザに表示する方法はないでしょうか？ 以下のような感じかと漠然と思ったのですが、やはり上手くいくはずはありませんでした。 ■cgiプログラム（test.cgi) #!/usr/bin/perl print "Content-type: text/plain\n\n"; print "TEST TEXT"; exit 0; ■htmlファイル <html><head></head> <body> <br> <hr> <object data="./test.cgi" type="text/plain"></object> <hr> </body> </html> perlもhtmlも独学で学んだ基礎レベルだと自分で思っています。 どなたか突破口となるヒントをお願いします。
フォームでＩＤとパスワードを入力したら指定のページに飛ぶような仕組みをperlで作っているのですが… 実力不足のため困っています。 ファイルのデータとしては ID=PASS=アドレス ID=PASS=アドレス といった形で１レコードづつ改行している状態です。 ファイル入力後、このデータをどうやってわければいいのかわかりません… open(FH,"<idpass.dat"); @list = <FH>; @aaa=split(/=/,@list); という形でいったんすべてのデータを@aaaに登録して、検索？比較しようとしています。 検索方法は for($w=1,$w<@aaa,$w++){ /@aaaはデータ総数と見ていいですよね？ $i=$w*2; if($aaa[$w]=id and $aaa[$i]=pass ){ $j=$w*3; #$view= $aaa[$j]; }} #print "Location:$view\n\n"; といった内容で実行したのですが…やはりうまくいきません。 今週勉強始めたばかりで変な内容になっているかとは思いますが、ヒントだけでも頂けるとたすかります。
次の式でソートしたいのですが、 @LINES = sort { (split(/\,/,$a))[0] <=> (split(/\,/,$b))[0] } @LINES; csv元データーの数字の列が、 "28000000","鈴木", のように""で囲まれているせいか、<=>で数値としてのソートできません。 cmpで文字列としてのソートは出来ます。 どうしたら良いのでしょうか?
以下の要件で自動実行できるようにしたいと考えてます。 バッチファール？シェルスクリプト？の作成方法を教えてください。 ■最終目的 USBメモリなどのUSB記憶デバイスをLinuxにつなげて、バッチファイルを実行すると、機器IDの表示と記録、FAT32でのフォーマット、乱数書き込み、を行い、最後にxxx.infというディレクトリを作成して終了 １、前提条件。Windows XP 搭載パソコンをLive CD（Ubuntu8.04）で起動しておく ２、USBを差し込む ３、バッチファール？シェルスクリプト？の実行 ４、USBメモリフォーマット # sudo mkfs.vfat -v -c -F 32 /dev/XXX ５、USBメモリのID表示、IDの記録をWIndows側のHDDの指定場所に記録（※二つめ以降は追記になるように） # udevinfo -a -p /block/sdc # "表示して、指定ディレクトリに記録するコマンドがわかりません" ６、記憶装置に乱数書き込み # shred -n 3 /dev/XXX ７、記録装置内にxxx.infのディレクトリの作成 # vi /dev/XXX xxx.inf ここまでを自動で行うパッチもしくはシェルスクリプトを組みたいです。 ご存知の方いらっしゃいましたら、ご教授ください。 よろしくお願いいたします。
perlでエラーアドレスを抽出したく いろいろ調べてみましたがどうにもうまくいきません。 主に携帯アドレスが中心ですので RFCに基づいているというよりは簡易な正規表現で、 重複排除くらいはできると理想なのですが 既成で何かいいものはありませんかね？ $format='[\w.-]+\@([\w-]+\.)+\w+'; # 簡略なメールアドレス正規表現 open(IN, "エラー.dbx"); foreach(<IN>) { if($_ =~ /($format)/){ push(@emails,$1."\n"); } } close(IN); print @emails; とか open(IN, 'エラー.dbx'); @data = <IN>; close(IN); foreach(@data){ s/　//g; print "$_\n" if /([\w._-]+@[\w._-]+)/ ; } 試してみましたがうまくいきませんでした。
フォームで入力された FORM{'deny'} = アホ バカ http　←半角空白で区切り というデータを受け取ったら、それをdeny.cgiへ @deny=('アホ','バカ','http'); という形で記録したいとおもっています。 そこで、 $setfile = "./deny.cgi"; open(IN,"$setfile") || &error("システムエラー","ファイル「$setfile」を開くことができません。"); @data = <IN>; close(IN); $maxdate = 1; if ($maxdate ne "") { while ($maxdate <= @data) { pop(@data); } } unshift (@data,\@deny=\('$FORM{'deny'}';\n"); と書いてみたものの、これでは deny.cgiに@deny=('アホ バカ http'); と記録されてしまいます。 そこで@deny =join('\',\'',$FORM{'deny'});を追加記述してみたのｄすが まったくうまくいきません。 どうしたら良いのかご教授ください。 どうかよろしくお願いいたします。
プログラミング初心者です。ウィンドウズの環境で、Perlは5.8を使っております。 先日、こちらで質問をしたのですが、うまくいかないことがあり、もう一度、質問いたします。文を切り分け、1列になっている下記のようなデータがあります。※秀丸で表示ができないほど、データがあります。 ここから、キーワードを指定して、表現を抽出したいと考えています。 [データ１] 日本 にとって アメリカ は 重要 な 貿易 国 です 。 例えば、「重要」という語をキーワードにするなら、下記のように前後３行を抜き出したいと思いました。 [データ２] <重要>：にとって　アメリカ　は　重要　な　貿易　　国　 そこで実際に下記のようなものを作り、実行してみましたが、コンピューターの検索を入れると、うまくいきません。しかし、以下、部門、監査のみの実行ならうまくいきます。長音が問題なのかと思い、￥でエスケープも入れてみましたが、それでもうまくいきませんでした・・・・ 何が原因なのでしょうか。 @lines = <>; chop @lines; for $i (3 .. $#lines-3) { print "<以下>:\t$lines[$i-3]\t$lines[$i-2]\t$lines[$i-1]\t$lines[$i]\t$lines[$i+1]\t$lines[$i+2]\t$lines[$i+3]\n" if $lines[$i] =~ /以下/; print "<部門>:\t$lines[$i-3]\t$lines[$i-2]\t$lines[$i-1]\t$lines[$i]\t$lines[$i+1]\t$lines[$i+2]\t$lines[$i+3]\n" if $lines[$i] =~ /部門/; print "<監査>:\t$lines[$i-3]\t$lines[$i-2]\t$lines[$i-1]\t$lines[$i]\t$lines[$i+1]\t$lines[$i+2]\t$lines[$i+3]\n" if $lines[$i] =~ /監査/; print "<コンピューター>:\t$lines[$i-3]\t$lines[$i-2]\t$lines[$i-1]\t$lines[$i]\t$lines[$i+1]\t$lines[$i+2]\t$lines[$i+3]\n" if $lines[$i] =~ /コンピューター/; }
プログラミングの初心者です。いろいろ考えても、わかりませんでしたので、質問いたします。 今手元に秀丸で表示できないほど大量のデータが下記のように1列に文章が切り分けれられて入っています。 日本 にとって アメリカ は 重要 な 貿易 国 です 。 例えば、「重要」という語を起点にして、前後３列を抜き出したいのですが、このようなことは可能でしょうか。イメージとしては下記のようです。 にとって　アメリカ　は　重要　な　貿易　　国　 ウィンドウズの環境で、Perlは5.8を使っております。 どなたか、教えてくださると、幸いです。
お世話になります。perlのpushについてです。 データファイルを読み@XXに入れます。 実際はもうちょっと複雑なのですが、 foreach $DATA (@XX){$CHECK=''; ($A,$B)=split(/\,/$DATA); # $Bには改行コードを含んでいます。 if ($A==1){$A=2;$CHECK=1;} if ($A==2){$A=3;$CHECK=1;} if ($A==3 and $B==1){$A=1;$B=9;$CHECK=1;} if ($CHECK==1){ push(@N,"$A,$B");}else{ push(@N,"$DATA"9;} } として、＠Ｎをファイルに出力すると１行目を除き、 行の先頭になぜか空白が付いてしまいます。 別のスクリプトで読むときに数字以外は削除というような 文を加えても削除できず、 if ( $A eq '1'){・・・・ としたときにマッチしてくれません。 よって、この最初にファイルに書き出す際に空白が付かないように したいのですが、何故付いてしまうのか？、回避方法は？ ご指導頂けたら幸いです。 付いてしまいます。
Template-Toolkitを使用してhtmlを出力するプログラムを作成中です。 環境はlinuxでperlはv5.8.9、Templateモジュールはv2.20です。 以下は例として環境変数を出力するコードですが、 テンプレートファイルの指定の仕方について質問させて下さい。 ---test1.cgi------------------------ #!/usr/local/bin/perl -w use Template; print "Content-type: text/html\n\n"; my $path ="test1.tt"; my $tpl = Template->new() || die $Template::ERROR; $tpl->process($path,\%ENV) || die $tpl->error; exit; --------------------------------- 現在はtest1.cgiとtest1.tt(テンプレートファイル)を同一ディレクトリ(~XXXX/配下)に保存してtest1.cgiを実行すると正常に動作するのですが、 これを~XXXX/cgi/と~XXXX/tt/にてそれぞれcgiファイルとttファイルを別ディレクトリにて管理したいと考えています。 しかし、別ディレクトリのttファイルを$pathに指定して実行した場合に、以下のエラーとなってしまいます。 絶対パスの場合 absolute paths are not allowed (set ABSOLUTE option) 相対パスの場合 relative paths are not allowed (set RELATIVE option) ttファイルを別ディレクトリより参照する場合の方法を教えて頂けないでしょうか？ よろしくおねがいします
みなさま，お世話になります． 現在，perl を使用した簡単なスクリプトを作っていますが，期待する動作を得られず困っています．どなたか，アドバイスをいただけると大変助かります． よろしくお願いいたします． 【問題】 標準入力へ改行を含む複数行文字列を与え，perl スクリプト側で文字列処理をするような内容を考えていますが，行の文字数が大きい場合は正常に処理がされません． -------------------------------------------- （ Perl スクリプト）　test.pl -------------------------------------------- #!/usr/bin/perl sub add_elements{ my($p) = @_; my $c, $str; my $i = 0; my $lf_count = 0; for ($i = 0; $i < length($p); $i++) { $c = substr($p, $i, 1); if (my $ascii = ord($c) == 10){ $lf_count++; print "+++ Debug\t Line Feed here\n"; } else { print "+++ Debug\t [$c]\t"; print ord($c); print "\n"; } } return $str; } sub row_count{ my($p) = @_; $p = $p =~ s/\n//g; print "row count :: "; print $p; print "\n"; return $p; } sub set_string{ my $strp; while(my $c = getc STDIN){ $strp .= $c; } print "set string: \n"; print $strp; print "\n"; return $strp; } my $source = &set_string; my $output; my $rcnt = &row_count($source); open(OUTFILE, ">> hoge.out"); if ($rcnt < 25) { print "+++ Debug\t Line Nums under 25.\n"; $output .= add_elements($source); } else { print "+++ Debug\t Line Nums over 25.\n"; } print OUTFILE $output; print OUTFILE "\n"; close OUTFILE; -------------------------------------------- -------------------------------------------- （ 入力用テキスト）　source -------------------------------------------- A 1234567 B 12345678 C 123456789 D 1234567890 E 12345678901 -------------------------------------------- この Perl スクリプトに cat source の結果をパイプで入力して確認しました． 【テスト結果】 $ cat ./source | ./test.pl set string: A 1234567 B 12345678 C 123456789 D 123456789 row count :: 3 +++ Debug Line Nums under 25. +++ Debug [A] 65 +++ Debug [ ] 32 +++ Debug [1] 49 +++ Debug [2] 50 +++ Debug [3] 51 +++ Debug [4] 52 +++ Debug [5] 53 +++ Debug [6] 54 +++ Debug [7] 55 +++ Debug Line Feed here +++ Debug [B] 66 +++ Debug [ ] 32 +++ Debug [1] 49 +++ Debug [2] 50 +++ Debug [3] 51 +++ Debug [4] 52 +++ Debug [5] 53 +++ Debug [6] 54 +++ Debug [7] 55 +++ Debug [8] 56 +++ Debug Line Feed here +++ Debug [C] 67 +++ Debug [ ] 32 +++ Debug [1] 49 +++ Debug [2] 50 +++ Debug [3] 51 +++ Debug [4] 52 +++ Debug [5] 53 +++ Debug [6] 54 +++ Debug [7] 55 +++ Debug [8] 56 +++ Debug [9] 57 +++ Debug Line Feed here +++ Debug [D] 68 +++ Debug [ ] 32 +++ Debug [1] 49 +++ Debug [2] 50 +++ Debug [3] 51 +++ Debug [4] 52 +++ Debug [5] 53 +++ Debug [6] 54 +++ Debug [7] 55 +++ Debug [8] 56 +++ Debug [9] 57 これを見る限り，&set_string の中で 4 行目（"D" で始まる行）の最後が読み取れていないことは判明しています．また，&set_string では getc STDIN で一文字ずつ読み取り，変数に append しています． 大変初歩的な質問かもしれませんが，ご教示いただければと思います． よろしくお願いいたします．
blue-horseと申します。 はじめてお世話になります。 モジュール内でサブルーチンを用意し、これを自身の中でも使用する場合、インボカントの処理をどう扱えば良いのか悩んでいます。 以下例 #-------------------------------------------------------------- sub function_A() { 　　my ($self, $argA) = @_; 　　return $argA; }; sub func_B() { 　　my ($self,$argB) = @_; 　　my $val_A = &function_A(undef,'100'); 　　return $val_A * $argB; }; #-------------------------------------------------------------- モジュール外からサブルーチンを呼び出す際にインボカントを受け取るために$selfを用意したのですが、モジュール内で呼び出す際にはインボカントが無いので、無理やりundefを放り込んでいます。 動いている分には動いているのですが、まず、おかしな使い方ではないかと思うので、「こうすれば良いよ。」と言った内容がございましたら、ご教示下さい。 以上、失礼いたします。
勉強のためにperlでWEBアプリを開発しようと試みてます。 作成するWEBアプリは、DB(mysql)と連携し使用して家計簿アプリを作ろうと考えています。(10画面程度を想定) ざっくりとした仕様としてはメインにカレンダーを置き(日にち毎に収支を出力)、日毎のページで家計簿の項目の登録等を行う動作を考えています。多分外部には公開しませんが、ユーザ登録を行い、ユーザ管理についても実装したいです。 現状、サーバはlinuxにapacheを載せてper-CGIが動作する環境は作成でき、HTMLについてもページ毎に最低枠は作成済みの状態です。 使用するperlのモジュールについては、現状以下を考えています。 CGI(パラメータの譲与等) Templete-Toolkit(CGIと画面ソースの分離) DBI(DB接続用) Calendar(カレンダー作成用) Jcode(文字コード操作) Aapache::Session(ページのセッション管理) 以上を踏まえて質問なのですが、 (1)家計簿のアプリを想定して上記のモジュール以外に必要、または有ると便利と思われるモジュール等を教えて頂けないでしょうか。 (2)また、perlのフレームワーク(Catalyst、CGI::Application等)を使用するかも検討したのですが、個々のモジュールの役割だったりモジュールの勉強にもなるかと思い選びませんでした。使うべきかどうかについて(使えばここがこう簡単に出来る等)の意見を頂けますでしょうか。 よろしくおねがいします。
はじめまして。Perlは初心者ですが、既存のPerl掲示板のカスタマイズに奮闘しています。 今、実行しているスクリプト名の取得方法でつまっています。 D:\cgitest\bbs\osiete.cgi というファイルを実行している時に、「osiete」を取り出したいと思っています。 $0で取得すると上記「D:\cgitest\bbs\osiete.cgi」がそのまま取得されました。正規表現で/\\(.*)\./、又は/\\(.*?)\./として$1を参照すると、「cgitest\bbs\osiete」が取得されます。 ?を使った最短一致を指定しても、開始位置が変わらないらしいので上記の結果には納得しているのですが、ではどうすれば「osiete」を取得できるか分からずに悩んでいます。「最後に出現する\」という指定が出来れば解決しそうなのですが、そのような表現方法があるのかどうかも分かりません。 出来れば正規表現で取り出したい（外部モジュール等を使用したくない）と思っているので、もし解決方法があればご教授をお願いしたいです。どうかよろしくお願い致します。
お世話になります。 @で区切られた以下のようなファイル名の連番(Number)をリネーム処理しようとしています。 Name1@Code1@Name2@Code2@Code3@Number1@Number2@Ver.txt Number1、Number2は3桁表示の連番で、Number1の連番を1つ大きいものにし、Number2は"001"に戻します。 よって、次のようになればOKです。 元：Name1@Code1@Name2@Code2@Code3@003@002@Ver.txt 　→Name1@Code1@Name2@Code2@Code3@004@001@Ver.txt そこで、このようなコードを書いてみました。 #!/usr/bin/perl use File::Copy; my $dir = "./"; opendir DH,$dir or die; my @file = readdir DH; foreach my $file(@file){ 　next if $file =~ /^\.{1,2}$/; 　@fact = split /\@/,$file; 　$rep = sprintf("%03d",$fact[5]+1); 　$Origine = "$fact[0]\@$fact[1]\@$fact[2]\@$fact[3]\@$fact[4]\@$fact[5]\@$fact[6]\@$fact[7]"; 　$Replace = "$fact[0]\@$fact[1]\@$fact[2]\@$fact[3]\@$fact[4]\@$rep\@001\@fact[7]"; # print "前 : $Origine\n"; # print "後 : $Replace\n"; 　move( $Origine,$Replace ); } closedir DH; printさせて確認する限りではうまく動いているのですが、肝心のリネームの方は、1つのファイルしか処理されません。 何かご指摘頂けると幸いです。 また、同じ処理できれいなコードの書き方（方法）があれば教えてください。 初心者にはこのようなコードしか思いつきませんでしたので・・・ 宜しくお願い致します。
perl -de 1 DB<1> for $i (0..2) { for $j (0..2) { $t[$i]->[$j] = 999 } } DB<2> @t = (1,1,1); DB<3> x $t[0] 0 1 DB<4> x $t[0]->[0] 0 undef この結果は分かるような気がするのですが、順序を逆にすると perl -de 1 DB<1> @t = (1,1,1); DB<2> for $i (0..2) { for $j (0..2) { $t[$i]->[$j] = 999 } } DB<3> x $t[0] 0 1 DB<4> x $t[0]->[0] 0 999 となります。このとき、$t[0]->[0] はどんな構造になってるのでしょうか。
無名配列の要素へアクセスする際に、スライスを使いたいのですが どのようにすれば良いのでしょうか？ まず、@table を3行×3列のテーブルにみたてて、テーブルを作成します。 my @table; for my $i (0..2){ for my $j (0..2){ $table[$i][$j] = ($i+1)*($j+1); } } foreach (@table){ print "@{$_}\n"; } # 出力結果 # 1 2 3 # 2 4 6 # 3 6 9 # 次に１列目のデータをすべて x にしたいのですが、以下のようにすればできることは理解できました。 foreach my $k (0..2){ $table[$k][0] = x; } # output # x 2 3 # x 4 6 # x 6 9 # ただ、これを以下のようにスライスを使って処理しようとすると・・・ ${@table[0..2]}[0] = x; foreach (@table){ print "@{$_}\n"; } # 出力結果 # 1 2 3 # 2 4 6 # x 6 9 # 明らかに目的とは違ったスクリプトになってしまっているのですが、なぜ上記のような出力になるのでしょうか？ また、スライスを使って、一行目のデータをすべてxにする方法が ありましたらご指導くださいませんでしょうか。 長い質問になってしまいましたが、よろしくお願いします。
携帯電話の機種名を掲示板に表示したいのですが、どなたかご教示いただけませんでしょうか? $ENV{'HTTP_USER_AGENT'}で取得できるのですが、機種名だけを抜き出す方法がわかりません。 宜しくお願い致します。
Perlを独学している初心者です。すごく初歩的なことでわからないことがありますので、ご質問いたします。 タブ区切りのデータの中で、５列目に LBa3_00011、13列目に１があるデータを検索し、5列目、６列目、7列目だけを表示したいと思っております。 下記のようなものを作ったのですが、うまくいきませんでした。 基本的な書き方が違っているかもしれませんが、何かアドバイスを頂けると、助かります。 use strict; use warnings; while($_=<>){ @ar = split(/\t/, $_); if ( /$ar[5] = LBa3_00011/ and /$ar[13] == 1/ ){ print;"$ar[5]\t$ar[6]\t$ar[7]\n"; } } 簡単すぎるような質問であれば、すみません・・・・・
　自分のPerlの知識と能力では全くわからなかったので、ご質問いたします。今、タブ区切りのデータがあります。※下記のデータは便宜上、タブを/で表現しています。 現在、下記のようなデータが10万ぐらいあるのですが、10万の中から、タブの６、７、８番目の３つのデータで全く同じになった場合、カウントしたいと思っています。 ＜データ＞ PB10_00045/10/B/神々/カミガミ/神々/カミガミ/名詞-普通名詞-一般/0/1/カミガミ/10/30/神々/0/1/1 PB10_00047/20/I/の/ノ/の/ノ/助詞-格助詞/0/1/ノ/30/40/の/0/1/1 PB10_00047/30/I/零落/レイラク/零落/レイラク/名詞-普通名詞-サ変可能/0/1/レーラク/40/60/零落/0/1/1 例えば、上の例であれば、６、７、８は次のようになりますが、 １つ目のデータ：６→神々、７→カミガミ、８→名詞-普通名詞-一般 ２つ目のデータ：６→の、７→ノ、８→助詞-格助詞 ３つ目のデータ：６→零落、７→レイラク、８→名詞-普通名詞-サ変可能 ６、７、８の3つのデータでちがうので、下記のように文頭にそれぞれ頻度を１と表したいです。※３つでそろった場合のみ、カウントを増やしたいです。 1/PB10_00045/10/B/神々/カミガミ/神々/カミガミ/名詞-普通名詞-一般/0/1/カミガミ/10/30/神々/0/1/1 1/PB10_00047/20/I/の/ノ/の/ノ/助詞-格助詞/0/1/ノ/30/40/の/0/1/1 1/PB10_00047/30/I/零落/レイラク/零落/レイラク/名詞-普通名詞-サ変可能/0/1/レーラク/40/60/零落/0/1/1 現在、ウィンドウズの環境で、Perlは5.8を使っております。 どなたか、助けてくださると、幸いです。
.plの中でhtmlを書き、それをprintしています。リンクをブランクで しかもサイズ指定したいのですが、それはどうすればいいでしょうか？ 例えば、 <a href="...html" target=\"blank\" target="blank">...</a> というのがありこの<a>の中にjavascriptを使ったサイズ指定を書いてみたのですが、それではページ全体が表示されませんでした。 どうすればいいでしょうか？ 因みにサイズ指定しなければ正常にブランクwindowが表示されます。 perlに関して初心者です。どうかよろしくお願いします。
ＷＥＢページの開発でページ間での引数渡しについて、今までＵＲＬで引数を渡していましたが、以下のサイトで必要事項を入力し「ご確認」画面に遷移しても入力情報がＵＲＬに表示されておりません。 引数をＵＲＬ渡ししない方法をご教示頂けないでしょうか？ 言語やキーワードでもいいです。宜しくお願い致します。 https://entry21.bk.mufg.jp/ibhs/dfw/DYC/request/ …
$v_date =~ s/-//g;　#v_date 091211 $str_date = substr($v_date, 0, 4); #str_date 0912 をまとめて記述する方法はありますか？ また、フォームからの日付（年月）と上記でセットした$str_dateをマッチさせたデータを表示させたいのですがその場合の記述方法を教えていただけないでしょうか？
ActivePerl5.8の日本語処理で困っています。 EUCで書かれたのHTMLファイルに、タグの修正などの文字列処理をしているのですが、 ＊その結果をshift-jisで出力したい。 ＊コマンドライン上の文字も文字化けさせずに表示したい というあたりで困っています。 use encoding 'shiftjis'; binmode STDERR, ':encoding(shiftjis)'; という記述を書けばＯＫという記述を見たため試したのですが、うまく動きません。記述を外して、ソースをeucで書くと、コマンドライン表示以外はうまく動くのですが、他の組み合わせですと、日本語の文字処理がうまく行かかかったり、perl自体が落ちたりと、試行錯誤の連続です。 文字処理というのは例えば、以下のような感じです。 print $mytitle; if ($mytitle =~/(【.*?】)/){ $subtitle = "<div class=\"head2\">$1<\/div>\n"; } （【】で囲んだ文字だけに特定のスタイルを効かせる。） 文字列処理とコマンドラインも文字化けの双方を解決させる手立てを教えて頂ければと思います。 よろしくお願いします。
掲示板の上部と下部にHTML枠を設けたいのですが 下記で正解でしょうか？詳しい方、ご教示お願いします。 フォームより内容保存　掲示板にHTML出力 ブラウザーからデーターを送る部分（フォーム） <form action="bbs.cgi" method=POST> □上部表示部分<br> <textarea name=upper rows=5 style="width:99%;"></textarea> <br> <br> □下部表示部分<br> <textarea name=lower rows=5 style="width:99%;"></textarea> <input type=submit value="編集内容を保存"> </form> ##------------------------------------------------------------ # データがPOST形式 if ($ENV{'REQUEST_METHOD'} eq "POST") { read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'}); # データを name 別に分割する @pairs = split(/&/, $buffer); # データハッシュ形式に変換する(%FORM) foreach $pair (@pairs) { ($name, $value) = split(/=/, $pair); $value =~ tr/+/ /; # 文字の処理 $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg; &jcode'convert(*value,'euc'); $FORM{$name} = $value; }
cmd1.exe は、標準入力でデータを読み込み、 結果を標準出力するようなプログラムです。 $ cmd1.exe < test.txt d090206 p314159 r214142 $ このcmd1.exeをperlスクリプト内で呼び出し、その結果を求めるやり方として、 従来、次のようなやりかた・・・ open(OUT,">temp.txt") || die "$!"; foreach(・・・){ 中略 print OUT "$_\n"; } close(OUT); my @answer = `cmd1.exe < temp.txt`; foreach(@answer){ : 略 } unlink("temp.txt"); のようなことをしています。 今は、中間ファイルを書き出しては、最後にファイル削除して、ということをやっているのですが、 このような中間ファイルを使わずに、パイプ（？）という仕組みを使って、同じように処理させるには、 どのようにコーディングすれば良いですか？ 試してみたこととして、 open(PIPE,"|cmd1.exe"); foreach(・・・){ 中略 print PIPE "$_\n"; } close(PIPE); のようにすれば、exeの呼び出しそのものは出来たのですが、 その標準出力の結果を上手く内部で受け取れません。 よろしくお願い致します。
超初心者の質問ですみません。 今、Perlの絵本でActivePerlの勉強中ですが use encording"shiftjis"; $a=1; print "はじめは$aでした。\n"; $a=++; print "１増えて$aになりました。\n"; $a=--; print "１減って$aに戻りました。\n"; を実行しても、 Can't locate encording.pm in @INC (@INC contains: C:/Perl/site/lib C:/Perl/lib . ) at hello8.pl line 1. BEGIN failed--compilation aborted at hello8.pl line 1. と表示されます。 解消法を教えてください。
知人から以下のような相談があったのですが、少し急ぎで困っています。 その知人が働くNGO団体で取引のある1万近い個人・法人のデータベースに関することなのです。 以前はその団体にUNIXマシンの管理者が一人いて、その人がUNIXマシンでデータベースを管理していたのだそうです。が、その管理人が亡くなって、誰もそのマシンにログインできないとのこと。でも、マシン自体は普通に動いています。 で、そのマシンはネットでつながっていて、外部から https://www.なんちゃら.ne.jp/なんちゃら/なんちゃら.cgi?1 https://www.なんちゃら.ne.jp/なんちゃら/なんちゃら.cgi?2 https://www.なんちゃら.ne.jp/なんちゃら/なんちゃら.cgi?3 … という感じでアクセスすると、データベースの会員番号1番、2番、3番の人のデータがHTMLで個人情報が表示されるような仕組みになっています。 （IDとパスワードの入力は必要ですが、1回入力すれば聞かれないみたいです） そこで、外部のマシンから、Perl（もしくは別のスクリプト言語でもいい）のスクリプトを実行することで、この1万人近いデータベースを吸いだせないか、ということなのですが、簡単なことなのでしょうか？ ざっくりどんな感じのソースになるのかお教えいただければ助かります。 そのNGO団体のパソコンでPerlが動く環境ですので、Perlを勉強してソースを書けるように頑張って勉強しようと思ったのですが、ちょっと急ぎなのでヒントだけでも頂けたらと思った次第です。 よろしくお願いします。
お世話になります。 多分ご存知の方には簡単な話だと思いますが教えていただけませんか。 Aフォルダにあるhoge.txtをBフォルダにコピーしたければ use File::Copy; copy "./A/hoge.txt", "./B/hoge.txt" or die $!; で出来るのはわかっているのですが、Aフォルダにある全てのファイルをBフォルダにコピーするというのはどのようなコードを書いたらよいのでしょう。 ちなみにAフォルダには100以上ファイルがあります。ファイルは全部テキストファイルです。
いつもお世話になっております。 書籍でperlを独習しているものです。 質問内容が長くなってしまいますが、お付き合いいただければ幸いです。 @array=("bbb","aaa","ccc"); @list=sort @array; count=0; foreach $value(@list){ printf "%d":"[%s]\n",$count,$value; $count++; } このコードの９行目のprintfですが、 printの後の"f"の意味について教えて下さい。 今まで学んできたものは、全てprintとしか入力していなかったので、 何の説明もなしに出現して困惑しています。 又、printf以降の"%d":"[%s]\n",$count,$value; も理解できません。 コマンドプロンプトでの出力結果は 0:[aaa] 1:[bbb] 2:[ccc] となりました。 以上、宜しくお願い致します。
以下のperlスクリプトで、どちらも私には同じ結果をもたらすものだと 予想していたのですが、出力結果が異なってしまいます。 なぜ script1　ではエラーなしで動作するのに、script 2では エラーが出るのでしょうか。 $$xx が　d　になり、 $$yy が　ARRAY(0x180c460)　となる理由も わかりません。 稚拙な質問で申し訳ありませんが、どなたかよろしくお願いしますm(_ _)m ## script 1 とします。 my $xx = \qw(a b c d); print "$$xx \n"; # d と出力される print "xx is $$xx \n"; # xx is d と出力。 ## script 2 とします。 my @array = qw(a b c d); my $yy = \@array; print "$yy \n"; # ARRAY(0x180c460) と出力される。 print "yy is $$yy \n"; # Not a SCALAR reference at tryme.pl line 11. とエラーになる。
Perlのスクリプトを書いている中で、Out of Memoryに悪戦苦闘しているものです。 多次元配列同士を掛け合わせて、文字列を生成するプログラムを作成しています。 －以下スクリプト－ @list = (["りんご","みかん","レモン"], 　　　　　["ジュース","サイダー","リキュール","酒","スープ","アイス","キャラメル"], 　　　　　["クレープ","パイ","ケーキ","スイーツ","チャンプルー"], 　　　　　["～","…","・"], 　　　　　["1人前","200g","1000円分","山盛り","ちょっと","一皿"]); $count=0; for(@{$listy[0]}){ 　　$seed[$count] = $_; 　　$count++; } $count=0; for($i=1; $i<@listy; $i++){ 　　for($j=0; $j<@{$listy[$i]}; $j++){ 　　　　for($k=0; $k<@seed; $k++){ 　　　　　　$tmp[$count] = $seed[$k] . $listy[$i][$j]; 　　　　　　$count++; 　　　　} 　　} @seed = @tmp; $count = 0; } print join("\n",@tmp)."\n"; －ここまで－ 動作結果： りんごジュースクレープ～1人前 みかんジュースクレープ～1人前 … こんな感じで、前から順番に総当りをしていくようにして文字列を生成する方法をとっているのですが、 これを配列の内、3つだけ取り出して文字列を繋げるようなスクリプトに変更するにはどうしたらよろしいでしょうか。 例1：りんごジュース山盛り 例2：ジュース…1人前 どなたかご助力頂ければ嬉しい限りです。宜しくお願い致します。m(_ _)m
Ｐｅｒｌが使用可能なレンタルサーバを借りて ＣＧＩ練習しようと思っています 自宅ＰＣでテストする場合は ＡｃｔｉｖｅＰｅｒｌとＡｐａｃｈｅをインストールして使いますが サーバの場合はこの準備ができるのでしょうか？ テキストエディタでアップすればプログラムが間違っていなければ ソフトインストールは不必要なのか知りたいです 試してみるのも手ですが変なことすると サーバにとってよくないと本に書いてあるので一応質問します
CentOS 5.2, Perl 5.8.9の環境で Perlスクリプトを実行すると、以下のようなエラーが表示されます。 [Thu Jan 29 16:54:59 2009] [error] [client 192.168.112.191] Constant subroutine __USE_POSIX undefined at /usr/lib/perl5/5.8.8/i386-linux-thread-multi/features.ph line 8. [Thu Jan 29 16:54:59 2009] [error] [client 192.168.112.191] Constant subroutine __USE_POSIX2 undefined at /usr/lib/perl5/5.8.8/i386-linux-thread-multi/features.ph line 9. [Thu Jan 29 16:54:59 2009] [error] [client 192.168.112.191] Constant subroutine __USE_POSIX199309 undefined at /usr/lib/perl5/5.8.8/i386-linux-thread-multi/features.ph line 10. [Thu Jan 29 16:54:59 2009] [error] [client 192.168.112.191] ………… インターネットを調べたりしたのですが、なかなか有用な情報が得られませんでした。 strictプラグマが出しているようなのですが、理由がつかめません。 試しにCentOS 4.6で実行してみたところ何もエラーが表示されませんでした。 よろしくお願いいたします。
こんばんは。 色々試してみたのですが、どうしてもうまくいかないので質問させてください。 リストの$f1とファイルの$aaがマッチして、 かつリストの$f3とファイルの$bbがマッチした場合に、 $f4を付け加えてprintしたいのですが、 ★マークの処理で、リストの$f3とファイルの$bbがマッチしていないものまで printされてしまうことがあります。 $aaとマッチするものがリストに２つ以上ある時にこの現象がおきるようなのですが、 どの辺を直したらよいのかわかりません。 definedの使い方がおかしいのでしょうか？ 見よう見まねで書いたので、▲マークあたりの指定も自信がありません。 #リスト読み込み open LIST, "./list" or die; while (<LIST>) { chomp; if (/(.*) (.*) (.*) (.*)/) { $f1 = $1; $f2 = $2; $f3 = $3; $f4 = $4; } $xx{$f1} = $f4; #▲ $yy{$f1} = $f3; #▲ } close LIST; #ファイル読み込み if ($#ARGV >= 0) { @files = @ARGV; } foreach $file (@files) { open FILE, $file; while (<FILE>) { chomp; if (/^([^t]+)\t(.*)$/) { $aa = $1; $bb = $2; if (defined($xx{$aa})) { if (defined($yy{$bb})) { # ★ print "$aa\t$bb\t\#【$xx{$aa}】\n"; } } } } close FILE; } どうかご教示お願いいたします。
こんにちは perlで特定の文字列からその後ろをすべて 削除したいのですが、うまくできなくて質問します。 Ex）123.12abc　　　⇒123.12 012.123abc　　 ⇒012.123 123.1234|| ⇒123.1234 上記のようなデータの少数点までの数字の後ろにabc、||、半角、全角スペースなど文字列があります. 少数点までの数字の後ろの文字列すべてを削除したいですが、 特定の文字列からその後ろにある文字列全てを指定する方法（正規表現）はありませんでしょうか？ どうかご存知の方、教えてください！！ よろしくお願いいたします。
小文字のaからz 大文字のAからZを それぞれ全角のa～z A～Zに変換するには どう表現すればいいか教えてください またこれとタグ処理をすれば　掲示板として安全になりますか？ ここもわかればお願いします
Perl初心者です。 マニュアル本を見ると、Perlでは特に変数を宣言しなくても扱えるようになっていますよね。 今まで幾つか自作ＣＧＩプログラムを作ってきたのですが、一度も my や localといった変数宣言を使った事がありません。 プログラム自体は正常に稼働しているので今まで全く無視していたのですが、こちらのPerlカテゴリの質問などを参照させていただいていると、皆さん必ず変数を　my　で宣言してらっしゃいます。 これは行った方がよいものなのですか？ 宣言する事のメリット、宣言しない事のリスク、もしくはしたほうが良い場合、しない方が良い場合等を教えてください。とりあえず、サブルーチン内で宣言すると他のサブルーチンでは使えないらしい、という事だけは朧気に… よろしくお願いします。
ソケット通信において、接続されているクライアントに対しサーバ側から任意のタイミングでデータ送るにはどんな方法があるか教えてください。 例えば1分ごとに、接続されているクライアント全体にメッセージを送りたい、といった場合にどうすればよいでしょうか。 ちなみに対戦ゲームのようなものを作ろうと思っています。 クライアントはFlash、サーバはperlで開発しています。 クライアントからのデータに応じて何かを返すところまではできたのですが、サーバ側をトリガーとしてデータを送る手段がわからなかったので質問しました。 よろしくお願いいたします。
perl初心者ですが、プログラム作成で行き詰ってしまいました。 参考書を読みあさり、色々とググってみたのですが、どうしても組み立てられません。知識のある方ご回答よろしくお願いします。 一つ目は： 英語の文章を記憶したファイルを指定し，その内容を読み込み，文章内に含まれる単語を出現頻度の降順で表示させるプログラムを作成すること 「1位：・・・(・・回)」 「２位：・・・(・・回)」 ．．． なお，一つの単語が二行にまたがることはないものとする。 二つ目は： テストの成績データを記憶したCSV ファイルを指定し，その内容を読み込み，各学生の総合点と順位，各科目の最高点，最低点，平均点を記憶したＣＳＶファイルを書き出すプログラムを作成せよ。 なお，入力用のファイルと出力用のファイルはキーボード入力で指定するものとする。 また，異なる学生数および科目数のCSV ファイルを読み込んでも正しく動作するようにすること。 卒業のかかったレポートで、この二つを完成させないと先に進めないのです。 本当に図々しい質問で大変申し訳ありません。知識のある方どうかご教授ねがいます。 *ひとつめに関しては： open (FILE, 'perl.txt') or die "$!"; while (my @array = <FILE>){ foreach (@array) { $count{ $_ }++ ; } @rank = sort { $count{ $b } <=> $count{ $a } } keys %count ; foreach (0..$#rank) { $kagi = $rank[ $_ ]; $kaisu = $count{ $kagi } ; print $_+1, "位：$kagi（$kaisu 回）\n" ; } } のように書いたところで行き詰ってしまいました。 二つ目は： open (FILE, 'data.txt') chomp(@data = <FILE>) ; $i= 1 ; # 行番号を記憶する変数 for (@data) { # 各行に対して以下を繰り返す． # 各行の数値を配列の要素として記憶する． @list = split(/,/, $_) ; # サブルーチンを呼び出して，結果を表示 print "$i行目：" ; print "数値：",&cardinality(@list),"個，" ; print "最大値：",&maximum(@list),"，" ; print "最少値：",&minimum(@list),"，" ; print "合計：",&summation(@list),"，" ; print "平均：",&average(@list),"\n" ; # 行番号の更新 $i++ ; } とまで書き、もう何が何だか訳わからなくなってしまいました。
今、CGIでメールを送信するフォームを作成しているます。 日本語のsubjectを使う場合はMIMEエンコードをしなければいけないと聞いてmime_plsというライブラリで試してみたのですが、受信した結果、「1月1日」→「1 月 1 日」のように半角数字と全角文字の間にスペースが入ってしまいます。 これはどうしたらよいのでしょうか。 コードは以下のように書いています。 $mon = substr($reserveday, 4, 2); $day = substr($reserveday, 6, 2); $subject = sprintf("%d月%d日の件について", $mon, $day); &Jcode::convert(\$subject, 'jis'); $from = &mimeencode($from); $to = &mimeencode($to); $subject = &mimeencode($subject); $contents .= "本文"; &Jcode::convert(\$contents, 'jis'); my $send_buf=''; $send_buf .= "From: $from\n"; $send_buf .= "To: $to\n"; $send_buf .= "Subject: $subject\n"; $send_buf .= "Content-Type: text/plain; charset=iso-2022-jp\n"; $send_buf .= "Content-Transfer-Encoding: 7bit\n"; $send_buf .= "Mime-Version: 1.0\n"; $send_buf .= "\n"; $send_buf .= $contents; # メール送信 open(MAIL,"| $sendmail -t -i -f $from"); print MAIL $send_buf; close(MAIL); よろしくお願いします。
xmlを作成するといろいろなエレメントができます。 それで、指定したエレメント内の中身を処理したいと考えています。 そのようなことは可能でしょうか？ ちなみに処理の内容は、そのエレメント内にあるものの個数を数えたいです。
宜しく御願いたします。 現在のソースになります。 <?php $test = $DB->getAll("SELECT nicname,point FROM ".$k_user_table." order by point DESC LIMIT 0,3 "); print_r($test); ?> 上記の表示結果はこちらです。 Array([0]=>Array([0]=>田中さん[nicname]=>田中さん[1]=>100 [point]=>100 [1]=>Array([0]=>木村さん[1]=>124 [point]=>124 重複を無くして改行を付けたいと思っております。 理想はこちらです。↓ 田中さん　100PT所有 木村さん　124PT所有 の様な感じです。 宜しく御願いたします。
Perlの正規表現で質問です。 複数種類の括弧、たとえば（）、【】、[]などで囲まれていない文字をマッチングさせたいのです。 括弧は1行に複数ある可能性があり、ない場合もあります。 (abc)【def】ghi【jkl】 だとghiの部分。 【abc】【def】(ghi)jkl(mno) だとjklです。 頭に必ず括弧が来たり、括弧が一回だけなら括弧閉じるの種類をor検索ではじけるのですが、何回くるかわからないのでどうしたらいいか困っています。 方法がありましたら教えてください。
# 禁止文字 @haijyo = ('jp','JP','ＪＰ','ｊｐ','com','COM','ＣＯＭ','ｃｏｍ','ｎｅｔ','ＮＥＴ','net',); foreach $haijyo (@haijyo) { if($body =~ /$haijyo/){ push(@error, '本文にメールアドレスやURLの記入はできません。または禁止ワードが含まれています') } } を禁止ワードが本文($body)に含まれており なおかつユーザーエージェントにwindowsが含まれていた（いずれも一致した）場合、 エラーを吐き出すようにしたくて elsif($ENV{'HTTP_USER_AGENT'} =~ /windows/)を書きくわえてみたのですがうまくいきません。 どのようにしたら両方の条件式に一致した場合にエラーを吐き出せるのでしょうか？
こんにちは。 perl勉強二日目の初心者です。 タブで区切られているデータを一行ずつ読み込んで 処理を行うとき、 一行にタブが何個入っているのか検索したいのですが、 ソースの書き方が分かりません。 どうか、御存知の方は教えてください。 ※読み込んでいる配列の長さは10ですが、 たまに途中で1つ、4つの物も混じっていて エラーの処理をしたいです。
今年から仕事でシェルスクリプトでコーディングすることになり初めて触る言語なので日々勉強しているのですが、どうしても解決方法の見つからないものが出てきてしまったので質問させて頂きます。 ファイルから行を読み込んでsql文に追加入力しようとしているのですが、抽出した単語にシングルクォーテーションを付ける際、半角スペースが一文字分シングルクォーテーション内部に出来てしまいます。 以下例です。 aaa.txt←読み込むファイル aaa,bbb,ccc,ddd←ファイル内容の簡略版 ・ ・ ・ #!/bin/sh while read LINE;do CUT1=`echo ${LINE} | cut -d , -f1`←※1 echo \'${CUT1}\'>>bbb.txt←※2 CUT2=・・・ 　　　　　 ・ 　　　　　 ・　　　同じことを繰り返す 　　　　　 ・ done<aaa.txt 結果 bbb.txt 'aaa ''bbb ''ccc '・・・ ※1：この部分は少々曖昧ですが、LINEに読み込んだ行の１番目のフィールド（今回の例ではaaa）を抽出してCUT1に入れようとしています。 まだまだ未熟者の為ソースがおかしいかもしれませんが、今回はそのことに関しては気にしないでください。 プログラム自体はきちんと走っています。 問題になっている点は※2の部分で、シングルクォーテーションを付けると勝手に半角スペースが追加されてしまいます。 CUT1には「aaa」と半角スペースのない状態で入っています。 sedを使ってスペースをなくそうかとも考えたのですが、何分データ量がすごい数なので少しでも走らせるプログラムを減らしたいのです。 sed以外で半角スペースをなくす方法はありますでしょうか？ また、これはどんな理由で半角スペースが入ってしまうのか原因もわかりますでしょうか？ 簡単な質問ですが、ご教授の方よろしくお願いいたします。 一応sedでの半角スペースを削除する方法もご教授頂けたら幸いです。
以下のようなスクリプトを書いた時に my @list = ('ab', 'cd', 'efg', 'hijk'); foreach my $line (@list){ #print "$line\n"; if ($line =~ m/ ^a| ^e| /x){ print "$line "; }} 標準出力は ab cd efg hijk となり、@list内の要素すべてにマッチしたことになってしまいます。 理由がわからずごちゃごちゃといじっていると、検索部分を =~ m// としても全く同じことになります。 これは、どの配列の要素も空(くう?)を含むためにヒットしてしまう・・・ ということなのでしょうか？ どのように理解すれば良いのでしょうか？基本的な質問で申し訳ございませんが、どなたかよろしくお願い致します。
現在perlを勉強しています。 xmlで書かれたものを構造体にして処理したいと考えています。 構造体の中の個数などを数えたいです。 構造体はパソコンのお気に入りです。 １、すべてのお気に入りの数 ２、すべてのフォルダの数 ３、１つのお気に入りフォルダの中にさらに何個のフォルダがあるか などをしたいと思っています。 どのような方法で求めることできるでしょうか？ よろしくお願いします。
php で作成された文書は、拡張子　.php を見ればわかります。では、 perl で作成された文書はどうやってわかりますか？IEならメニューバーの「表示」から「ソース」を見ればわかるのでしょうか？
お世話になります。 早速ですが、簡単なことなのかもしれませんが、 どうにも分からないので教えてください。 作業域が消えてしまうように見えるのです。 &rtna; &rtnb; sub rtna { 　－－－－－－ } sub rtnb { 　－－－－－－ } 上記のようなロジックがありまして、 rtnaで作成した作業域　$wk1を　rtnbで参照すると無くなっているのです。 （具体的に20081231の様な日付です） $wk1は明示的に確保などしておらず、直接rtnaで作成しています。 このような考えは駄目なのでしょうか。 （rtnbでは参照できないのでしょうか） 調べた方法 rtnaの中でprintしてみたところ、ちゃんと20081231と表示されます。 rtnbでprintすると何も表示されません。 どのようにトレースしたら宜しいでしょうか。 ご指摘を宜しくお願いいたします。
LWPを使ってHTMLを取得しようとしているのですが、取得可能のサイト、不可能のサイトがあります。 たとえばyahooのトップページは取得できますが、wikipediaは取得できません。取得できない場合、エラーメッセージは出ません。 このようになる理由を教えてください。 よろしくお願いいたします。 環境：windowsXP & ActivePerl、またはwindowsXP & cygwin コード： #wikipediaのトップページHTMLを取得する use LWP::Simple; $site = get "http://ja.wikipedia.org/wiki/%E3%83%A1%E3%82%A4% … print $site; #yahooのトップページHTMLを取得する use LWP::Simple; $site = get "http://www.yahoo.co.jp/"; print $site;
apacheログ集計プログラムを作っています。 全体の流れとしては、ログを指定したテキストファイルに書き出し、 それを読み込み、適切な形に直し、HTMLテーブルにいれて表示、という感じです。 その中の適切な形に直すところなのですが、 select sysdate, to_char(add_months(to_date($yearmonth,'YYYYMM'),-1),'YYYYMM') as LAST_MONTH, to_char(add_months(to_date($yearmonth,'YYYYMM'),+1),'YYYYMM') as NEXT_MONTH from テーブル名 で200812や 200901といった日付をとってきています。 （データはしっかり入ってきます。） このデータを利用し、 $last_monthには200812 $next_monthには200901のように入っていると仮定し、 リンクを作りますと、 # 先月のリンク my $href_last_month = undef; if ($last_month) { my $last_month_year = substr($last_month,0,4); my $last_month_month = substr($last_month,4,2); $href_last_month = qq(<a href="$THIS?year=$last_month_year&month=$last_month_month">&lt;&lt;</a>); } # 来月のリンク my $href_next_month = undef; if (($next_month) && ($next_month <= $thismonth)) { my $next_month_year = substr($next_month,0,4); my $next_month_month = substr($next_month,4,2); $href_next_month = qq(<a href="$THIS?year=$next_month_year&month=$next_month_month">&gt;&gt;</a>); } のようになりました。 しかし、これをブラウザで表示させても、 先月(＝200811へのリンク)へのリンクは表示されますが、 来月（＝200801へのリンク）が表示されません。 200812(当月、今いる画面)に #来月のリンク部分　で+1をしても、200813となってしまい、 エラーになるからだと思います。 どなたか、200812の画面で、 今表示されない200901へのリンクボタン＝来月へのリンクボタンを表示できるようにするには どうしたらいいか教えてくださいませ。 ちなみに200812や200901などは、自動でとってきており、 一番はじめのindex.cgiの画面には必ず当月がとれてきます（今日index.cgiをアクセスすれば、200901のログ集計結果ページが出ます。 このとき、200902はまだ訪れておりませんから、来月へのリンクボタン>>は表示されません。 先月への<<のみ表示されます、先月へは問題なくリンクできます。 13月を1月としてくれる、select文でのadd_month関数を使っているのに。。。 初心者なものでここでギブです。。お助けください。
お世話になります。 perl素人なのですが必要に迫られてWEBで調べながら ソースを解析していますが、次のコードで完全に止まってしまいました。 $hts =~ s/##([^#]+)##/$FORM{$1}/g この場合、 #hts　から　##([^#]+)##　を探して　$FORM{$1}　に全て置き換えようとしていると思うのですが、以下２点が理解できず困っています。 １．##([^#]+)## の意味 $htsに##で囲まれた文字列が複数あるのでそれら全てを探すということでしょうか？ ２．$FORM{$1} の意味 $1は１．で検索した結果だと思いますが、$FORM{　}は一体なんでしょうか？ 素人がいきなり解析するのは無謀なのは承知の上ですが、 どうしても業務で必要なので、お知恵をお貸し下さい。 よろしくお願いいたします。
下記の命令はどの様な意図で実行されているかわかる方いらっしゃいますか？ print "Content-type: image/gif\n\nGIF89a\1\0\1\0\200\0\0\0\0\0\0\0\0!\371\4\1\0\0\0\0,\0\0\0\0\1\0\1\0\0\2\2D\1\0\n";
テキストデータの処理がうまくいかず困っています。 ----------------------------------------------- a:0.001 b:-11.111 c:50.5 d:-12.345 ----------------------------------------------- といった文字列から ----------------------------------------------- 0.001 -11.111 50.5 -12.345 ----------------------------------------------- といった形で符号や小数点を含めて抽出したいのですが どのようにするのが良いのでしょうか。 各値は、それぞれの値がスペースによって区切られています。 また、各値は数値の大きさがそれぞれ異なり桁数が一定ではありません。 split や substr　を用いてやろうとしているのですが、 なかなか思ったとおりの形で出力できません…
Perl実行時に引数（YYYYMMDD）をわたして、 それをもとに処理を続けたいと考えています。 ($yy1,$mm1,$dd1) = ($ARGV[0] =~ /^(\d{4})(\d{2}-1)(\d{2})$/); $mytime=timelocal(0,0,00,$dd1,$mm1,$yy1); このように記述して20081230を引数にして実行しても 日付DDの部分がうまく入らずエラーになってしまいます。 なぜなのでしょうか。
CGIにログ機能をつけようと思い、 以下の(1)のように書き加えたことでログを取得し記録することはできたのですが このままではログの記事記録数が増え続けていく一方であるため、 記事数を5000までとし、古い記録から自動的に削除するようにしたいと思っています。 さまざまなサイトで調べた結果(2)のようにすると 一定数を越えた場合、順番に削除できるようなのですが うまくいきません。 どのように記述したらいいのか教えていただけませんか？ どうかよろしくお願いいたします。 (1) open(LOG,">>date/log.txt"); print LOG "$value{'date'} "; print LOG "$ENV{'REMOTE_HOST'} "; print LOG "$ENV{'HTTP_USER_AGENT'} "; print LOG "\n"; close(LOG); (2) $max = 5000; if ($logcount > $max) { pop @lines; }
cgi掲示板を連ねてレンタル掲示板を作ろうかと検討しています。 そこで、全てのフォルダにある掲示板cgiの任意の場所に広告を表示させたいのですが、MTみたいにモジュールを使って全てに表示させることも掲示板cgiで可能なのでしょうか？ 具体的には、 １）一つ一つに広告を記載すると修正や更新がえらく大変になってしまうので、各フォルダに入っている本体(CGI掲示板)の下部に、全てに共通した広告を表示させたい。 ２）広告の修正なども、１つを修正すれば全てに反映されるようにしたい。 サーバー内 ┏bbs1(レンタル掲示板)フォルダ ┣bbs2(レンタル掲示板)フォルダ ┣bbs3(レンタル掲示板)フォルダ ┣bbs4(レンタル掲示板)フォルダ ┣bbs5(レンタル掲示板)フォルダ ┣bbs6(レンタル掲示板)フォルダ ┣bbs7(レンタル掲示板)フォルダ 以下同様 無料HPレンタルスペースや無料ブログに表示される広告のような感じに、アフィリエイトやアドセンスが表示されるようにしたいのです。 広告のほうを【●●.cgi】または、●●.pm？として、 中身を以下、 #!/usr/bin/perl print "Content-type: text/html", "\n\n"; print <<"HERE"; <BR> <a href="http://px.a8.net/～"> <BR> HERE print "</BODY></HTML>\n"; } として掲示板CGIの任意の場所に呼び出して、広告の部分だけを表示させたいのですが、いろいろ調べてやっても、やはりエラーになってしまいできません。 どうか宜しくお願い致します。
ページ内はHTMLファイルですが、そのページのiframe内にperlで動的ページを表示させています。 クリック自体はifream内の動的ページですが、ページのキャッシュが残っているらしく、ブラウザの戻るが有効になります。 戻るができないようにしたいのですが何か良い方法はありますか？ 以下、効果はありませんでした。 ファイル１ test.html <html> <head> <title>HTML</title> <meta http-equiv="Pragma" content="no-cache"> <meta http-equiv="Cache-Control" content="no-cache"> <meta http-equiv="Expires" content="Fri, 31 Dec 2004 23:59:59 GMT"> </head> <body> <ifream src="test.cgi"></ifream> </body> </html> ファイル2 test.cgi print "Content-type: text/html\n"; print "Pragma: no-cache\n"; print "Cache-Control: no-cache\n"; print "Expires: Thu, 01 Dec 1994 16:00:00 GMT\n\n"; print <<EOT; <html> <head> <title>CGI</title> <meta http-equiv="Pragma" content="no-cache"> <meta http-equiv="Cache-Control" content="no-cache"> <meta http-equiv="Expires" content="Fri, 31 Dec 2004 23:59:59 GMT"> </head> <body> <a href="test.cgi">sample</a> </body> </html> EOT exit;
HTMLファイルを読み込んで表示するCGIを作っています。 それで、そのHTMLファイルに記述されたSSIコマンドを、 そのCGIで認識して、それを実行する。ということを実現したいと思っています。 includeコマンドは簡単に実現ができたのですが、 execコマンドが完全には実現できません・・・。 一応、openのパイプを使って、 <!--#exec cmd="test.cgi" --> のようなコマンドを認識しそれを実行して返すことはできました。 しかし、test.cgi?a=wのように パラメータをつけての実行が実現できません。 もちろん、SSIと同じように、 execコマンドで実行する先のCGI、プログラムなどを 改変することなくそのまま実行できることが条件です。 (例えば、$ENV{'QUERY_STRING'}ではなくARGVを使うようにするのではダメなんです) お知恵をお貸しいただけると幸いです。 どうかよろしく御願いいたします。
下記コードを使い WEBサイトの更新日付を取得したいのですが 実行すると Socket Error:Invalid argument のエラーが表示されソケットの作成に失敗します。 Perlのバージョンは 5.8.0でウィルス対策ソフト停止後のコード実行等対策等を考えて行いましたが状況は改善されません。 よければ、どうしてソケットの作成に失敗するのか教えていただけないでしょうか？ 失敗テストケース $host:www.google.co.jp # テストコード # モジュールの使用宣言 use IO::Socket; # URLを入力 $ur1 = <STDIN>; # URLをホスト名とファイルパスに分割 chomp($ur1); if ($ur1 =~ /http:\/\/([^\/]+)(\/.*)/) { $host = $1; $file = $2; } else { die "そのURLには対応していません。\n"; } # ソケットオブジェクト作成 $client_socket = new IO::Socket::INET { PeerAddr => $host, PeerPort => 'http', Proto => 'tcp', TimeOut => '5' }; unless ($client_socket) { print "Socket Error:$!\n"; } # 入力をサーバーに送信 print "$host $file" . "\n"; print $client_socket "GET $file HTTP/1.0\n\n";
CGI(Perl)からCGI(Perl)を実行してその出力を得るには どうしたら良いでしょうか。 そのCGIがもっている環境変数(IPアドレスとか、POSTデータ)も 渡したいのですが・・・。 Openでパイプを使ってやればいいとまではわかり、 環境変数などを渡さないで純粋にCGIを実行させて その出力を受け取るところまでは出来ました。
下記コードを実行しましたが$nameの文字が表示されません。 コードが間違っているのでしょうか？ $string = sub ("さぶろう") { my($name) = @_; return("$nameです。\n"); }; print &$string;
ActivePerl5.8.8 です。 sjisのファイルを読み込んで、utf8で出力しています。 +++++++++++++++++++++++++++++++++++++++++++ open (IN, '<', ${filename}); my $contents = do { local $/; decode('shiftjis', <IN>)}; close IN; open OUT, '>', "${out}.txt"; print OUT encode('utf8', ${contents}); close OUT; +++++++++++++++++++++++++++++++++++++++++++ "～"というsjisの記号文字が"?"となって出力されてしまいます。 "～"のまま出力する方法がありましたら教えてください。
プログラミングの基礎の基礎は理解できており、CGIのためにPerlを習得しようと思っています。 入門書は貰ってきました（1998年発行）。 その入門書はPerl5を使用しています。 いざPerl5を実行しようと思ったのですが、perl.exeが無いようです。 どこでダウンロード（インストール）すれば良いでしょうか。 ちなみに環境は Microsoft Windows XP Home Edition Version 2002 です。
@st=qw(az b cz); print scalar(sort(@st)); print scalar(grep /../,@st); print scalar(map {$_.'z'} @st); 出力結果が 2 3 なのですがgrepやmapがリストの要素数を出力しているのに なぜsortだけが要素数を出力しないのかがわかりません。
いつもお世話になっております。 Perlを独習しようと思い、入門書を購入し、 その指示に従ってPerlをインストール致しました。 そして書籍に記されているとおりに、 #サンプルプログラム print "HelloWorld"; とメモ帳に記述し、ファイル名「perl01.pl」の名前でc\progのフォルダに保存しました。 そしてそのプログラムをperl.exeから >perl perl01.pl と記述して呼び出そうとしたのですが、 何も表示されません。 非常に困っております。 どうか解決策を宜しくお願い致します。
ホスティングを使用しています。 plファイルについて、以前のサーバはちゃんと動作していましたが、 新しいサーバで、jcode.plが読み込めないらしくInternal Server Errorが出てしまっています。 階層は httpdocs--test.pl |--cmn--jcode.pl にしています。 ログを見ると [error] Can't locate cmn/jcode.pl in @INC 17行目部分、つまりrequire 'cmn/jcode.pl';があるところがエラーになってます。 以前は読み込めているのに、新しいサーバでは読み込めていない。 ちなみに ・パーミッションはちゃんと変更していますtext.pl[755] ・httpdocs自体は.htaccessでpl自体は動作できています つまり、 require行を外すとページはきちんと表示されます。 となると考えられる原因はなんでしょうか？ そして対策方法を教えて頂ければと思います。 よろしくお願いいたします。
Perl/Tkでforやforeachを使って、ウィンドウ上にウィジェットを一括配置したいのです。 my $window = new MainWindow; for (my $i=0; $i<10; ++$i) {$window->Entry->pack;} みたいにして一括作成はできるのですが、作ったウィジェットを後で使うために、これらのウィジェット名に名前をつけながら配置したいです。 上記のコードの場合、後から ent1->get; のように参照できるようにしたいと思っております。 こういったことは可能でしょうか。またその方法があれば手順を示していただけると助かります。 詳しい人には馬鹿にされそうな文ですが、 $ent$i = $window->Entry->pack;では駄目でした。。。
CシェルコマンドをPerl上でsystem関数を使用し実行した時の、 エラーメッセージ抑制について教えてください。 ディレクトリ（DIR１をDIR２に）をコピーする際、 下記のようにしました。 system("cp -r DIR1 DIR2"); ここでもし、なんらかの原因でコピー失敗した場合、 「DIR１がありません。」などと、エラーメッセージが出力されます。 Cシェルでこの様なエラーメッセージを抑制するには cp -r DIR1 DIR2 >& /dev/null と、 することによって、エラーメッセージの抑制は可能になります。 これと、同じ事をPerlで行いたいと思っています。 ご回答よろしくお願いします
読んでいただいてありがとうございます。 Perlをはじめたばかりなのと　プログラミング自体もまだまだですので 困っております。 テキストデータ　例えば apple りんご banana バナナ orange オレンジ などというファイルから読み込んで、 my $data ={ my @english, my @japanese, }; などの、配列の構造体に格納するにはどのようにしたら よいのでしょうか。 最初、本を少し読んだだけの知識で、 use strict; use warnings; my $filename = 'data.txt'; my $data = { my @english, my @japanese }; open(IN,$filename) or die "$filename: $!"; while(my $line=<IN>){ for(my $i=0;$i<N;$i++){ ($data->{@english}[$i],$data->{@japanese}[$i])=split(/ /,$line); print "$data->{@english}[$i]\n"; } } close(IN); } などと書いて、 apple banana orange と表示されるのを期待したのですが、 ダメでした。 参考までに私の誤ったプログラムものせましたが、 全然違っているかもしれませんので、まったく新たに アドバイスしていただいてもかまいません。 これを応用したものを使いたいので　ぜひともどなたかお教え いただければと思います。 よろしくお願いします。
perlでCSVファイルを読み込むスクリプトを作っています。 以下のようなCSVファイルがあります。 ■CSVファイル 東京,よろしくお願いします。 大阪,はじめまして 九州,"5,000円でお願いします" カンマで区切り、以下のようにすると、"5,000円"の部分が２つに分かれてしまいます。 ($data1,$data2) = split(/,/,$all_data) 前後にダブルコーテーションがあった場合、中のカンマで区切らないような良い方法はないでしょうか？ 環境： Perl 5.8.5
Perlでプログラムを書いているのですが 20081202123000といった文字列から 19700101000000からの経過分数を取得したいのですが time関数を使えば出来そうだというのはわかるのですが どのようにだしたらよいのかわかりません。 ご教示おねがいいたします。
Perlとしていますが、PHPでもかまいません。 メールフォームで画像認証を用いて、スパム対策ができるフリーのCGIを探しています。 もしくは、PerlやPHPのフォームプログラムに組み込むエンジン（関数）だったり、呼びだして使えるモジュールのようなものでもかまいません。 基本はフリーで、最悪でも2～3000円程度でエンジン部分やモジュールを配布しているものがいいです。 専用のプログラムへの搭載代行等は要りません。 もしかしたら、画像認証事態は大規模なシステムでDB等が必要なのかも知れませんが、簡易版とかでもかまいません。 何でもいいので情報等お持ちの方、またはプログラムに詳しい方よろしくお願いいたします。
ＣＧＩ初心者です。わかる方教えてください。 少々古いですがactiveperl　apache1.3.12を利用してperlプログラムを自宅のみで使うCGIプログラムをWINDOWS上で起動しています。　処理が長くまた同時に複数の処理をperlで処理します。ブラウザ送信ボタンよりCGIを実行してperl.exeを合計5つぐらい同時に起動します。 タスクマネージャーのプロセスの優先度の設定は実行当初「普通」になっていますが，これを実行当初から「低」にしたいと思っていますが やり方がよくわかりません。CGIの書き方，apacheの設定，ショートカットの書き方でできるんではないかと思っていますが，ご存じの方教えてください。OSはWINXPです。宜しくお願いします。
いつもお世話になっています。 perlで困っていることがあるので、質問させてください。 大容量のテキストファイルを指定バイトで改行したいのですが、 どういった方法があるのでしょうか。 具体的には100000バイト近くあるファイルを200バイトごとに区切りたいのです。syswriteで何とかなるのかな？と思って試行錯誤しているのですが、 ファイルの末尾に1個改行が入るだけで、思ったような挙動をしてくれません。 正直かなりこまっているので、何かヒントをいただけないでしょうか。 よろしくお願いいたします。
例えば 掲示板に入力する文が 「あの人はＫＹだ」 だとして 投稿後表示されるのが 「あの人は空気の読めない人だ」 みたいな感じに作りたいのですが、 どんなソースを書いていいかわかりません。 それと、どこにそのソースを書いていいかわからいので 誰か教えてください；；
言語Perlで「最大20個までの数値を入力し、それらを逆順に表示するプログラム」はどう作りますか。 教えてください。よろしくお願いします。
CGIでファイル送信・受信を行いたいと考えてます。 言語は　PERL　で　Net::FTP　を利用しようと思ってます。 ローカルで実行するとファイル送信・受信できるのですが。。。。。 サーバにスクリプトを置いてブラウザから実行すると500のエラーが出ます。 自分的には手詰まりの状態です。 大きなファイルが送受信できるようなものを探しています。 なにか参考にできるサイトはございませんでしょうか？ よろしくお願いいたします。 #!/usr/bin/perl use strict; use Net::FTP; use CGI; my $host = "my.host.com"; my $user = "user"; my $pass = "pass"; my $remote_file = "/home/test1/remote.txt"; my $local_file = "/tmp/local.txt"; my $q = CGI->new(); my $ftp = Net::FTP->new($host) or die "can not connection: $@"; $ftp->login($user, $pass) or die $ftp->message; $ftp->binary; $ftp->get($remote_file, $local_file) or warn $ftp->message; $ftp->quit; print $q->header( -type=>'text/html', -charset=>'UTF-8', ); print <<"END_OF_HTML"; <body><p>done.</p></body> END_OF_HTML exit;
今、簡単な暗号化のプログラムを作っています。 $a = $in{"honbun"}; $b = $in{"pass"}; $c = length($in{"honbun"}); $n = 0; while ($n < $c){ $k = substr($a,$n,1); $d = chr(ord($k) + $b); print "$d"; $n++; } pass文だけ、コード値をずらしているのですが、 基準のコード値より大きい数になってしまった場合、 どのように修正してやればよいでしょうか？
Perlでスクリプトの変換をしたいのですが、どうにも改行（いろいろ）などが分かりません。 サンプルスクリプトのご教授を、どうぞ、お願いいたします。 具体的には （１） ^music,rei_bgm0001を mp3loop "bgm\rei_0001.mp3"に （bgm0001は～0067まであるので一括変換したいです．） （２） ^chara,ううう,えええ,いいいa,long,center,あああ を ld c,":a;mp\ううう_えええ_いいいa.あああ.jpg",long,center, に置換したいです． 【^chara,ううう,えええ,いいいa,long,center,あああ、なのですがlong,center,を上のように置換後、最後に持っていきたいです．】 （３） //の入った行だけを全て削除する。です。 解りにくいかと思いますが宜しくお願いします．
Perlでスクリプトの変換をしたいのですが、どうにも改行（いろいろ）などが分かりません。 サンプルスクリプトのご教授を、どうぞ、お願いいたします。 具体的には （１） ^music,rei_bgm0001を mp3loop "bgm\rei_0001.mp3"に （bgm0001は～0067まであるので一括変換したいです．） （２） ^chara,ううう,えええ,いいいa,long,center,あああ を ld c,":a;mp\ううう_えええ_いいいa.あああ.jpg",long,center, に置換したいです． 【^chara,ううう,えええ,いいいa,long,center,あああ、なのですがlong,center,を上のように置換後、最後に持っていきたいです．】 （３） //の入った行だけを全て削除する。です。 解りにくいかと思いますが宜しくお願いします．
Perlにて$f[i][j]のような2次元配列でデータを格納しています。 ここの[i]列には重複したデータが入っているので、 それを排除して[i]列の重複なしの配列を新たに作りたいのですが うまくいきません。 for ($j=0; $j<= $index; $j++){ if($chlist[j]==$f[$i][0]){ $chlist[j]==$f[$i][0]; last; } } こんな感じで作ってみたのですが永遠にデータが入りません。
こんにちは。 現在、離散値(曲線)を線形補間するプログラムを作成中です。 等間隔データではうまくいったのですが、 不等間隔データ用のプログラムが作成できません。 ネットでも探してみたのですが、 perlで書いてあるサイトが見つけられませんでした。 どなたかプログラム、またはプログラムのあるサイトをご教授願えませんでしょうか？ よろしくお願いいたします。
Perlにて外部サーバーよりHTMLを読み込むスクリプトを書いていますが 万策付きお手上げとなりました。なんとか実現したく御願い致します。 環境から申し上げます。 作成パソコン OS →　WIN98 ウェブサーバー　→　ANHTTPD ActivePerl 5.8.7 Build 813 です。 以下がコードです。 use Socket; use Net::hostent; #ローカルホスト名 $localhost='localhost'; #リモートホスト $remotehost='127.0.0.1'; #得たいページのURL $page = 'http://127.0.0.1/index.html'; #接続し、ファイルハンドルSHにつなぐ。 $rh = gethost($remotehost); $lh = gethost($localhost); $proto = getprotobyname('tcp'); socket(SH,AF_INET,SOCK_STREAM,$proto) or print "error\n"; $port = getservbyname('http','tcp'); $socket_template='S n a4 x8'; $localhost_port = pack($socket_template,AF_INET,0,$lh->addr); $remotehost_port = pack($socket_template,AF_INET,$port,$rh->addr); bind(SH,$localhost_port) or print "error\n"; connect(SH,$remotehost_port) or print "error\n"; select SH; $|=1; #GETでリクエストを送信。 print SH "GET $page\n"; #得られたページの内容を@HTMLに入れる。 while(<SH>){ push @HTML,$_; } close SH; select STDOUT; #追加書き込みでhtml.txtを開く。 open(FILE, ">> html.txt"); #@HTMLがhtml.txtに書き込めない。 foreach (@HTML){ print FILE $_; } close(FILE); print <<EOD; content-type: text/html <html> <head> <title>新規登録</title> <link rel="stylesheet" href="shinki.css" type="text/css"> </head> <body> <h1>サーバーチェック</h1> <br><br> HTMLさくせいしました。<br> @HTML </body> </html> EOD exit; 以上です。 当然ながらブラウザにも表示されません。 コードの細かい事などもよく分かっていません。 お手数ですが 外部ファイルの取得が出来ますよう ご教授宜しく御願い致します。
すみません、すごく初歩的なことで困っています。 本を見ながら、下のようなものを書いたのですが、 出力すると、文字化けをしてしまいます。ウィンドウズの環境で、Perlは5.8を使い、読み込みのテキストはUnicodeです。どのようにすれば、文字化けをしないで、読み込めるのでしょうか。 open ( IN , "LBa3_00028.txt" ) or die; open ( out , ">out.txt" ); while ( $line = <IN>){ print out "$line\n"; } close(out); close(IN);
プログラミングのド素人で、独学でwindows上でcygwinを使っている者から質問させていただきます。「#!/usr/local/bin/perl」というコマンドをプログラムの先頭に書いて、[ファイル名]を入力してcygwinで命令をしたところ、命令が実行できず、「commond not found」と出てしまいました。そこで、ネット上で、いろいろ調べて、試してみたのですが、どうしても、解決できません。 どなたか、アドバイスをいただけないでしょうか？ ちなみに、perl [ファイル名]では、命令を実行することができます。「type -a perl」というコマンドを入力すると、「/cygdrive/c/Perl/bin/perl」というのがでてきたので、「#!/cygdrive/c/Perl/bin/perl」というコマンドを書いても上手くいきませんでした。 ちなみに、私が書いたプログラムは、以下のようなものです。 #!/cygdrive/c/Perl/bin/perl　(あるいは#!/usr/local/bin/perl) # hello -- 挨拶のプログラム print ("hello");
テキストファイルが4000個あり、そこから200個のファイルを取り出したいと考えています。テキストファイル取り出したい200個のファイル名があるのですが、このテキストファイルを使い、200個のファイルを取り出すことができるでしょうか。 本を見て、独学で勉強している程度で、ほとんど専門的な知識がありません。 そのような方法があれば、手間がかなり短縮できると思っていますが、可能でしょうか・・・・
Perlの正規表現についての質問です。 例） 899 YES Alt 0 0.000 pps 2.000 pps 4.000 pps 0 2 YES Alt 0 1.222 (space)-0.100 (space)3.000(space)0 103 NO Alt 0 3.333 % 0.000 % 0.000 % 0 　　　　　　　　　　　　　　 ^^^^^ =====抜粋======================================== if($_ = ~ / Alt+(\s+)+0+(\s+)+(\S+)+(\s+)+(\S+)+(\s+)+(\S+)+(\s+)+(\S+)+(\s+)+(\S+)+(\s+)+(\S+)+(\s+)+(\S+){ print OUT "\n$5,"; ================================================= 上記のような文字列があるとして"^^^^^"だけを抜き出したい場合の正規表現はどのようにすればよろしいのでしょうか？ 考えたif文では当たり前ですが2番目の（-0.100）が抜き出せません。また、検索できた順に抜き出し、出力したいので if文を二つ書くのは避けたいです。 どなたか教示ください。 宜しくお願い致します。
Perlとは関係ないのですが、正規表現での置換ができるエディタで改行二つを一つにしたいです。 置換前　\n\n　置換後\n　としてみたのですがうまくいきません。まちがってたら教えてください。 CRLFとか気にしないといけないのかな。
Jcode.plを使いShiftJISで出力しているcgiファイルを、 Jcode.pmを使ってUTF8で出力できるように修正していた所、 Internal Server Errorが発生。 Perl文法チェッカーを使い、エラー内容を調べてみると Unrecognized character \xC2 at test.cgi line 168, line 846. cgiファイル168行には↓ &Jcode::convert(\$val, 'utf8'); ここまで↑ Jcode.pmの846行目には↓ sjis SHIFT_JIS ここまで↑ と表記されています。 cgiファイルの168行が間違っているのはわかるのですが、 「\xC2」が何を指しているのかさっぱりわかりません。 $valの中にあるテキストをutf8に変換したい場合は 本来どう書くものなのでしょうか？
Perlでプログラムを書きたいのですが、初心者です。 下記のようなCSVファイルがあります。 商品,使用開始時刻,使用終了時刻 aaa,20081202-110842,20081202-182321 aaa,20081202-182511,20081202-183859 bbb,20081202-183914,20081203-004947 ccc,20081202-093636,20081202-120158 商品ごと、使用時間10分間隔ごと24時間分の使用数カウントを 下記のように集計したいと思っていますが、 まったくどうかいてよいか思い浮かびません。 商品,00:00-,00:11-,… aaa,4,4,… bbb,0,0,… ccc,1,2,…
お世話になります。 早速ですが、perlで以下のように 現在時刻を求め表示するロジックがあります。 ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime($time); $year=$year + 1900; $mon =$mon + 1; $date81 = "$year年$mon月$mday日（$days[$wday]）"; $date82 = "$hour時$min分$sec秒"; この時、 例えば今年末であれば、 2009年1月1日0時と表示されると思います。 これを2008年12月31日24時と表示したいのですが、 何か妙案はあるでしょうか。 宜しくお願いします。
　フォームに書き込んだHTMLタグを、出力後、ちゃんとHTMLタグとして生成させる方法を知りたいのですが。(言葉足らずですいません、例えば、掲示板の入力フォームで、テキストに書かれた例えば<font color=red>というHTMLタグを使い、フォーム送信後、文字が赤くなっている、ということを実現させたいだけなのですが) 　当方、Perlどころかプログラミングそのものを理解していない者ですが、訳あってソースをいじるお手伝いをすることになって困っております。以前、さらっと一行、コードを書くだけで実現できると思ったのですが。ご教授頂ければ幸いです。
下記のプログラムはname11という変数名の文字列の平仮名を指定の数字に変更し、1文字づつ変数に当てはめ、1桁になるまで分解して足していくというプログラムを書きたいのですが、エラーばかりです。 初心者なのでネットの情報を見ながらの作成です。 ご教示よろしくお願いします。 while(($name11)=each %in){ $name11=~s/"ぁ"/6/g; $name11=~s/"あ"/6/g; $name11=~s/"ぃ"/9/g; $name11=~s/"い"/9/g; $name11=~s/"ぅ"/1/g; $name11=~s/"う"/1/g; $name11=~s/"ぇ"/11/; $name11=~s/"え"/11/g; $name11=~s/"ぉ"/3/g; $name11=~s/"お"/3/g; $name11=~s/"か"/6/g; $name11=~s/"が"/6/g; $name11=~s/"き"/9/g; $name11=~s/"ぎ"/9/g; $name11=~s/"く"/1/g; $name11=~s/"ぐ"/1/g; $name11=~s/"け"/11/g; $name11=~s/"げ"/11/g; $name11=~s/"こ"/3/g; $name11=~s/"ご"/3/g; $name11=~s/"さ"/6/g; $name11=~s/"ざ"/6/g; $name11=~s/"し"/9/g; $name11=~s/"じ"/9/g; $name11=~s/"す"/1/g; $name11=~s/"ず"/1/g; $name11=~s/"せ"/11/g; $name11=~s/"ぜ"/11/g; $name11=~s/"そ"/3/g; $name11=~s/"ぞ"/3/g; $name11=~s/"た"/6/g; $name11=~s/"だ"/6/g; $name11=~s/"ち"/9/g; $name11=~s/"ぢ"/9/g; $name11=~s/"っ"/1/g; $name11=~s/"つ"/1/g; $name11=~s/"づ"/1/g; $name11=~s/"て"/11/g; $name11=~s/"で"/11/g; $name11=~s/"と"/3/g; $name11=~s/"ど"/3/g; $name11=~s/"な"/6/g; $name11=~s/"に"/9/g; $name11=~s/"ぬ"/1/g; $name11=~s/"ね"/11/; $name11=~s/"の"/3/g; $name11=~s/"は"/6/g; $name11=~s/"ば"/6/g; $name11=~s/"ぱ"/6/g; $name11=~s/"ひ"/9/g; $name11=~s/"び"/9/g; $name11=~s/"ぴ"/9/g; $name11=~s/"ふ"/1/g; $name11=~s/"ぶ"/1/g; $name11=~s/"ぷ"/1/g; $name11=~s/"へ"/11/g; $name11=~s/"べ"/11/g; $name11=~s/"ぺ"/11/g; $name11=~s/"ほ"/3/g; $name11=~s/"ぼ"/3/g; $name11=~s/"ぽ"/3/g; $name11=~s/"ま"/6/g; $name11=~s/"み"/9/g; $name11=~s/"む"/1/g; $name11=~s/"め"/11/g; $name11=~s/"も"/3/g; $name11=~s/"ゃ"/6/g; $name11=~s/"や"/6/g; $name11=~s/"ゅ"/1/g; $name11=~s/"ゆ"/1/g; $name11=~s/"ょ"/3/g; $name11=~s/"よ"/3/g; $name11=~s/"ら"/6/g; $name11=~s/"り"/9/g; $name11=~s/"る"/1/g; $name11=~s/"れ"/11/g; $name11=~s/"ろ"/3/g; $name11=~s/"ゎ"/6/g; $name11=~s/"わ"/6/g; $name11=~s/"ゐ"/9/g; $name11=~s/"ゑ"/11/g; $name11=~s/"を"/3/g; $name11=~s/"ん"/1/g; } substr($name11, 0, 1) = $a; substr($name11, 1, 2) = $b; substr($name11, 2, 3) = $c; substr($name11, 3, 4) = $d; substr($name11, 4, 5) = $e; substr($name11, 5, 6) = $f; substr($name11, 6, 7) = $g; substr($name11, 7, 8) = $h; substr($name11, 9, 10) = $i; $x = $a + $b + $c + $d + $e + $f + $g + $h + $i; while ($x > 10) { substr($x, 0, 1) = $a; substr($x, 1, 2) = $b; substr($x, 2, 3) = $c; substr($x, 3, 4) = $d; substr($x, 4, 5) = $e; substr($x, 5, 6) = $f; substr($x, 6, 7) = $g; substr($x, 7, 8) = $h; substr($x, 9, 10) = $i; $x = $a + $b + $c + $d + $e + $f + $g + $h + $i; }
CentOS を 5.1 から 5.2 にアップデートした頃から PerlCGI からのメール送信が出来なくなって、調べていたら「ISO-2022-JP への encode がおかいぞ問題」に辿り着きました。 以下のコードで、euc-jp が吐かれてしまいます。 #! /usr/bin/perl -w useencoding('UTF8'); useEncode; binmode(STDOUT); my$text= "＜全角文字ですよぉ。＞"; print encode('ISO-2022-JP', $text), "\n"; 以下のいずれかで正常に jisコードを吐く様になるのですが、こんなものなんでしょうか？ 1 「use encoding('UTF8');」 を 「use utf8;」に替える 2 print の直前に "no encoding;" を入れる CentOS 5.1 では多分正常に ISO-2022-JP への変換ができていたのだと思います。 私の使用するバージョンの Cygwin の Perl でも正常です。 問題のある CentOS5.2 と 問題の無い Cygwin版で、関係しそうなバージョンの違いはありません。 CentOS 5.2: Perl 5.008008 Encode 2.12 Encode::JP 2.01 encoding 2.02 Cygwin: CYGWIN_NT-5.1 **** 1.5.25(0.156/4/2) 2008-04-17 12:11 i686 Cygwin Perl 5.008008 Encode 2.12 Encode::JP 2.01 encoding 2.02 できれば、すでに動いているCGIの use encoding('UTF8'); を直す事なく動く様にしたいのです。
いつもお世話になっています。 プログラミング初心者です。サイトめぐりを色々しましたが、どれも複雑すぎてよくわかりません＞＜。どなたか、以下のソースの作り方についてご教授願います。 Q　Linux環境下にてPerlを使用し、外部設定ファイルをソース内で呼び　出す処理を教えてください。 　　ただし、フルパス名の直書き(ハードコーディング)はしない事とします 　　例)　$ test = "/home/nataria"; 等・・。 ※外部設定ファイルを読み込んだ後の処理(条件文)については、プログラムを書く方向性が定まっているので今回は考えないでください。 個人的には、上記のサイト様に明記しております ttp://www.ksknet.net/perl/configsimple.html(先頭にhをつけてください) ”Config::Simple;　"　を使用することも考えましたが、 使用方法がわからず、少し途方にくれてます。 この質問、私には一見シンプルに見えましたが、考えれば考えるほどわからなくなりました(;;) お疲れのところ申し訳ありませんが、ご教授くださいませm(__)m 以上よろしくお願いいたします。
PERLで変数に取得した値がどのようなものか確認する方法を教えてください VBではMSGBOXに表示させるなど簡単な方法があったのですが、似たような方法はありますか？
メールのヘッダー部分に設定するRFC822形式の日付を生成するサブルーチンを探しているのですが、どこかにないでしょうか? 次のような形式です。 Fri, 28 Nov 2008 20:30:50 +0900
aa.csv　→　複数の「ID」「htmlファイルの保存ディレクトリ」がカンマ区切りで記述されたCSV bb.csv　→　複数の「ID」「抽出したHTMLソース（「BODY」「/body」は含まない） aa.csvに記述されたディレクトリ毎にhtmlファイルを開き、その中にある「body」～「/BODY」内の内容を抽出し、bb.csvに記述したいと考えています。 EXCELVBAで行なおうと試行錯誤したのですが、うまくいきません・・。 Perlなどを使用すれば可能と聞いたのですが、私のレベルだとうまく動作してくれず、大変困っています。 どなたか、アドバイス等を頂けないでしょうか。 どうぞ、よろしくお願いします。
ttp://zaitakudekasegou.zero-yen.com/download.html#magmer 上記のマグメルインプ縮小版　メール配送スクリプトをDLし、 設置しております。 テスト配信を何度かしているうちに、半角の「"」が入ってるときは、 それ以降の文章が送信されないということに気づきました。 そこで $変数名 =~ s/"/”/g; を追記し、半角を全角に変換するようにしたのですが、 実際に送信をするとやはり「"」以降は送信されないのです。 送った内容は てすと ”てすと” "てすと" ”てすと” という内容で、 送信確認画面では てすと ”てすと” ”てすと” ”てすと” と、きちんと全角の「”」に変換されていました。 しかし送信完了画面では、 てすと ”てすと” ここまでしか表示されず、実際受信したメルマガも一つ目の”てすと”までしか届いていませんでした。 （はじめから全角で入力したものは表示されたが、半角で入力→全角に変換されたものは表示されず、それ以降も表示されない） どうにか送信できる方法はないでしょうか…。
メールのSubjectを取得するスクリプトを作っています。 Subjectを取得し、iso-2022をsjisに変換して表示したいのですが、変換できません。 以下、どこに問題ありますでしょうか？ すみません、他人の作ったものを修正しているので、よく理解していない部分が多いです。 #--------------------------------------------- require 'jcode.pl'; $subject = 'Subject: =?iso-2022-jp?B?GyRCJWEhPCVrJE4lRiU5JUgbKEI=?='; &jcode'convert(*subject, 'sjis'); print "-->$subject\n"; #--------------------------------------------- これをWindowsのDOSプロンプトから実行しても、以下のようにShift-JISに変換されていません。 c:\test>perl test.pl -->Subject: =?iso-2022-jp?B?GyRCJWEhPCVrJE4lRiU5JUgbKEI=?= 環境 Perl v5.8.8 WindowsXP(sp2) 以上、よろしくお願いします。
自然文からキーワード抽出する機能をもつWebページを作ろうと思い、 Lingua::JA::Summarizeを用いて、下記のようなプログラムを書きました。 コマンドライン上から実行したときはキーワードを抽出してくれたのですが、 サーバを立ち上げ、WEBブラウザ上からアクセスしても キーワード抽出(@keywordsが空)してくれません。 他のCGIスクリプトは動いているので、apacheあたりの設定ではないような気がします。 一体、何が原因で、どう対処したらいいのでしょうか？ #!/usr/bin/perl use strict; use Lingua::JA::Summarize; print "Content-type: text/html; charset=utf-8\n\n"; #キーワード抽出 my $text = '兄貴たちの晩餐'; my $s = Lingua::JA::Summarize->new({ charset => 'utf8',mecab_charset => 'utf8',default_cost => 1.8, singlechar_factor => 0.2,}); $s->analyze($text); my @keywords = $s->keywords({threshold=>4, maxwords=>10, minwords=>3}); #キーワードの表示 print join(' ', @keywords), "\n";
質問させて頂きます。 環境はWin98SE ACTIVEPERLです。 mysql4.0です。 次のコードなんですか、 DB接続の部分とSQL実行の部分のエラー処理を消すと正常に動作します。 Perlの場合、どのようにエラー処理を記入したらいいのでしょうか？ [コード] #!c:\perl\bin\perl.exe # DBI利用宣言 use DBI; print "Content-type: text/html\n\n"; print "<html><body>\n"; # MySQLに接続 $db=DBI->connect('DBI:mysql:test:localhost','',''); if(!$db){ 　print "MySQL接続エラー\n"; 　exit; } # ステートメントハンドルの作成：SQL文の指定 $sth = $db->prepare("select * from test_t"); # SQL実行 if(!$sth->execute()){ 　print "SQL実行エラー\n"; 　exit; } # 検索結果を表示 while (@rec = $sth->fetchrow_array()) { 　print "id=" . $rec[0] . "\n"; 　print "name=" . $rec[1] . "\n"; 　print "<BR>\n"; } # ステートメントハンドルクリア $sth->finish();
sea_clear_skyです。 質問させて頂きます。 環境 Win98SE ACTIVEPERL　API522e．exe JPERL　　　 jperl522 ACTIVEPERL　API522e．exeと JPERL　　　 jperl522をインストールし、 PPMでDBIとDBD‐MYSQLのパッケージをインストールしようとすると DBIでも、DBD‐MYSQLの場合でも、MSDOS上で、 mismatched tag at line 18, column 2, byte 640 at C:/Perl/site/lib/XML/Parser.pm line 168 と表示され、パッケージがインストールされません。 回線はフレッツADSLを使用しています。 すいませんが、解決方法をご教授願います。 よろしくお願いします。 もし、この現象が解決できない場合は他のPealを使用したいので、 WIN98SEの環境で入るPEALについて教えて欲しいです。 MYSQLに繋げて、いろいろしたいので、MYSQLにつながり、 PERLのCGIの作成できるものが希望です。 よろしくお願いします。
いつもお世話になっております．環境はWindows XPのActiveperlです． やりたいことは「下のディレクトリ（3つ）に含まれる同じファイル名のテキストを結合し，カレントディレクトリに出力する」ことです．具体的にはいかのようにしたいと思っています． 現在のディレクトリ/a/1.txt a b c 現在のディレクトリ/b/1.txt d e f 現在のディレクトリ/c/1.txt g h i 現在のディレクトリ/1.txt a b c d e f g h i ここで私は以下のプログラムを作成しました． use strict; use warnings; my $dirname1 = './a/'; my $dirname2 = './b/'; my $dirname3 = './c/'; opendir(DIR1, $dirname1) or die "$dirname1: $!"; while (my $dir1 = readdir(DIR1)) { next unless (-f $dir1); next unless ($dir1 =~ /\.txt$/); opendir(DIR2, $dirname2) or die "$dirname2: $!"; while (my $dir2 = readdir(DIR2)) { next unless (-f $dir2); next unless ($dir2 =~ /\.txt$/); opendir(DIR3, $dirname3) or die "$dirname3: $!"; while (my $dir3 = readdir(DIR3)) { next unless (-f $dir3); next unless ($dir3 =~ /\.txt$/); if (($dir1 == $dir2) && ($dir2 == $dir3)){ open(FILE1, $dir1) or die "$dir1: $!"; my $line1 = <FILE1>; close(FILE1); open(FILE2, $dir2) or die "$dir2: $!"; my $line2 = <FILE2>; close(FILE2); open(FILE3, $dir3) or die "$dir3: $!"; my $line3 = <FILE3>; close(FILE3); my $joint_line = $line1.$line2.$line3; open(NEWFILE, "> $dir1") or die "$dir1: $!"; print NEWFILE $joint_line; close(NEWFILE); } } } } closedir(DIR1); closedir(DIR2); closedir(DIR3); ですが，以下のようなエラーが発生しています． closedir() attempted on invalid dirhandle DIR2 at joint.pl line 51. closedir() attempted on invalid dirhandle DIR3 at joint.pl line 52. ディレクトリハンドルが使われているけれど閉じているか実際にはディレクトリハンドルでは無い時にこれらの警告が発行されるとこの警告がでるようですが，どのようにしたら解決できるのでしょうか．よろしくお願いします．
Shift_JISファイルの中の漢字を削除したいですが、 以下のスクリプトがうまく行きません（なにも削除してくれない）。 while ( <IN> ) { chomp(); tr/[\x81-\x9F][\x40-\xFC]//; tr/[\xE0-\xEF][\x40-\xFC]//; print OUT "$_\n"; } どう書けばよいでしょうか？
スクリプト(perl,php,python,javascript,ruby,vb.net)など言語は問いませんが nslookupのAレコード MXレコードを調べるようなことしたいです。 できればpythonやjython,phpでの方法が知りたいです。 osはWindowsです。
perlでキャラクタの数字を，スカラーの数字になるよう明記することってできますか？ perlが勝手にキャラクタとスカラーの変更をしてしまうのを防ぎたいのですが・・・ c言語でのatoi関数のようなものはあるのでしょうか？
いつもお世話になっております．以下のプログラムをできるだけ高速化したいと思います． use warnings; use strict; my $dirname = '.'; opendir(DIR, $dirname) or die "$dirname: $!"; while (my $dir = readdir(DIR)) { next unless (-f $dir); next unless ($dir =~ /\.txt$/); open(FILE, $dir) or die "$dir: $!"; while (my $line = <FILE>) { my ($a,$b,$c,$d,$e,$f) = split( /,/ , $line ); my $name = $a.",".$b; open(NEWFILE, ">> ./out/$name.txt") or die "$dir: $!"; print NEWFILE $line; close(NEWFILE); } } close(FILE); closedir(DIR); やっていることは，ディレクトリ内のテキストファイルを読み込んでいって，splitでカンマ区切りにした，$a，$bをファイル名として下のディレクトリのoutに保存していくというものです． ファイル数が数千あり，各ファイルも数千行となるため，このソースを高速化する方法はありますでしょうか．ご回答よろしくお願いします．
こんにちは。CGI初心者のものです。下記の事例について詳しい方やアドバイスができる方がおられましたら、ご指導いただければ幸いです。 現在CGIでデータベースを作成しています。データはCSVで保存し、検索するとCSVのデータを読み込むようになっています。英語以外の文字を検索することもあるのでUTF-8を文字コードとして用いています。 基本的に検索は問題なくできるのですが、「?,?,?」を含む情報を大文字で検索した場合に値を求めない問題が生じています。小文字の「?,?,?」を含む情報は問題なく検索できます。 置換演算子（i）で大文字と小文字の区別をなくしているのですが、どうして大文字の場合読み込めないのかわかりません。 フォームデータのデコードに問題があるのでしょうか？ 現在は、下記のような処理を行なっています。 sub get_formdata{ local($buffer,@pairs,%FORM,$name,$value); if ($ENV{'REQUEST_METHOD'} eq "POST"){ read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'}); } else { $buffer = $ENV{'QUERY_STRING'}; } @pairs = split(/&/,$buffer); foreach (@pairs) { ($name, $value) = split(/=/, $_); $value =~ tr/+/ /; $value =~ s/%([A-Fa-f0-9][A-Fa-f0-9])/pack("C", hex($1))/eg; $value =~ s/</&lt;/g; $value =~ s/>/&gt;/g; 詳しい方がおられましたら、この問題の解決策を教えてください。お手数をおかけしますが、宜しくお願いいたします。
質問したい内容は表題の通りですが、数十メガある膨大なテキストを 指定されたバイトで改行コードを入れたいです。(chompの逆をやりたい) syswriteでできるのかな？と思って試行錯誤しているのですが、うまくいきません。テキストは、半角数字＋半角カタカナ＋半角記号の混合です。 全角はありません。エンコードはUTF-8です。ずっとハマってるので、ヒントをいただけないでしょうか。（ちなみにPerl　5.10/ActivePerlが指定です。） よろしくお願いいたします。
複数のモジュールに記述されている配列を１つの配列へ代入したいと思っています。 単純に考えれば、 @array = (@Module1::array, @Module2::array, @Module3::array); で良いのですが、モジュールが多岐に渡っており、モジュール名自体はスカラー変数へ代入して置き、それを利用したいと考えています。 @array = (); foreach $m (qw(Module1 Module2 Module3)) { $mn = $m. '::array'; foreach $w (@{$mn}) { # @Module1::array にアクセスしているつもり push(@array, $w); } } この様なイメージです。 しかし、@{$mn}は Can't use string ("変数名") as an ARRAY ref while "strict refs" in use at 行番号. になってしまいます。 スカラー文字列に入っている配列変数へアクセスするにはどう記述すれば良いでしょうか？
$file = 'file.log'; ------------------------------------ sub a{ &lock;ロック 1: open(IN, $file); # ファイルを開く 2: $count = <IN>; # カウンターを読み出す 3: close(IN); # ファイルを閉じる 4: $count++; # カウンターをひとつ増やす 5: open(OUT, "> $file"); # ファイルを開く 6: print OUT "$count\n"; # ファイルにカウンタを書き込む 7: close(OUT); # ファイルを閉じる 8: print "$count\n"; &unlock;ロック解除 } ------------------------------------ sub b{ 1: open(IN, $file); # ファイルを開く 2: $count = <IN>; # カウンターを読み出す 3: close(IN); # ファイルを閉じる } ------------------------------------ サブルーチンaではロック処理を行っていますが、 サブルーチンbでは書き込む処理がないためロック処理を行っていません。 読み込むファイルは同じでなのですが、 サブルーチンbにもロック処理を入れた方がいいのでしょうか？
パターンマッチのところでつまずいてしまっています。 例えば、 マッチがマッチをすったらマッチになった という文面があったとします。（適当です） $txt = 'マッチがマッチをすったらマッチになった'; if($txt =~ m/$txt/s){$txtb = $';} print "$txtb"; としたら、 がマッチをすったらマッチになった と出てくると思います。 これを、 になった と表示させる為に、最後の「マッチ」にパターンマッチをさせる方法はありませんでしょうか？ ネット上のHPを検索しましたが、どうしても見つけられませんでした。 何とぞ宜しくお願いします。
今私のPCではActivePerl5.6.1.638を使っているのですが、PPMを使って調べてみるとRegexp-Assembleが入っていないみたいなので、最新のActivePerlを入れたいと思っています。 何も考えずにそのまま上書きインストールすればいいんでしょうか？
<INPUT TYPE="radio" NAME="bread" VALUE="wheat" CHECKED> 小麦パン<BR> <INPUT TYPE="radio" NAME="bread" VALUE="white"> 白パン<BR> <INPUT TYPE="radio" NAME="bread" VALUE="rye"> ライ麦パン<BR> CGI.pmでこれと同じ出力をするにはどうすればよいのですか。 解説サイトなどを見よう見まねで作った私のソースは次のとおりです。 #!/usr/bin/perl use CGI(-no_xhtml); my($q) = CGI->new; print( $q->header(-charset => "EUC-JP"), $q->radio_group(-name => "bread", -value => "wheat", -checked), " 小麦パン", $q->br, "\n", $q->radio_group(-name => "bread", -value => "white"), " 白パン", $q->br, "\n", $q->radio_group(-name => "bread", -value => "rye"), " ライ麦パン", $q->br ) これの出力結果は次のとおりです（´д｀） <input type="radio" name="bread" value="wheat" checked="checked" checked>wheat 小麦パン<br> <input type="radio" name="bread" value="white" checked="checked">white 白パン<br> <input type="radio" name="bread" value="rye" checked="checked">rye ライ麦パン<br> 近づいてきてはいるのですが、全部のラジオボタンにchecked="checked"が付いてしまっています（´д｀） あと、valueで指定した文字列がタグの外に出てきてしまっています（´д｀）
いつもお世話になっております． 環境はWindows XP Pro でActiveperlを使っています． Perlでしたいことは，「指定の行数目から行を抽出する」ことです． 具体的には以下のようにしたいと思っております． data.txt A B C D E F line.txt 2 4 6 output.txt B D F 先ほどある方からサンプルソースを教えてもらったのでそれをベースに作ってみましたが，出力のoutput.txtが空のままです． use strict; use warnings; use feature ':5.10'; use IO::File; open my $file2, '<', 'line.txt' or die "can't open input $!"; chomp(my @subjects = <$file2>); close $file2; open my $newfile, '>>', 'data_out.txt' or die "can't open output $!"; open my $file, '<', 'data.txt' or die "can't open input $!"; while (my $line = <$file>) { chomp $line; foreach my $line (@line) { print $line; if ($. eq $subjects){ say {$newfile} $line; } } } close $file; close $newfile; どこが間違っているのでしょうか．ご指摘ください．よろしくお願いします．
perl5.8のエンコードで悩んでいます。 5.6環境下でjcodeなどを使用したいろいろな処理は普通にできるのですが、そろそろ5.8での文字処理もちゃんとできないとあぶないかなと思い、練習していましたが…なんとも挙動が解らないときがあります…。 よければご教授いただけると幸いです。 まず基本的な練習として、POSTされた文字データを受領するものを作ってみました。 ＜＜送信元　post1.html＞＞ <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dt … <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> </head> <body> <p>POST実験</p> <form id="form1" method="get" action="post2.cgi"> <p>data1 <input name="data1" type="text" /> </p> <p>data2 <input name="data2" type="text" /> </p> <p> <input type="submit" name="button" value="送信" /> </p> </form> </body> </html> ＜＜受領部　post2.cgi＞＞ #!/usr/bin/perl #モジュール利用宣言 use CGI; #CGIモジュール use strict; #表記の正規化を強制 use warnings; #警告表示 use CGI::Carp qw(fatalsToBrowser); #エラー報告有効 #エンコーディングの指定 #use utf8; #この部分を有効にすると入力内容が文字化け #use encoding 'UTF-8';#これも同様に入力内容が文字化け #データの受領と変数名整理 my $input_data = new CGI; my $in_data1 = $input_data->param('data1'); my $in_data2 = $input_data->param('data2'); #入力チェック my $message_data = ""; #変数初期化 if($in_data1 eq "" && $in_data2 eq ""){$message_data = "入力部に空欄があります";} else{$message_data = 'Data1は'.$in_data1.'Data2は'.$in_data2.'です';} #ヘッダ発行 print "Content-type: text/html\n\n"; #html表示 print <<END_OF_HTML; <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> </head> <body> <p>サシスセソはSJISで化けるカタカナ。<br>入力内容は${message_data}</p> </body></html> END_OF_HTML exit; 両ファイルともTeraPadを利用して、文字コードはUTF-8N、改行はLFにしています。 しかし、use utf8;と書くと、入力文字が化けてしまいます。 （コメントアウトすると普通に表示されます） ちょっと漠然としていて申し訳ないのですが、なぜ化けるんでしょう…。 いろいろ調べてみたんですが、binmode STDOUT, ":encoding(utf-8)";とかをつけても特に変化がありません…。 しかし変わりすぎてキツい…でも今は5.8仕様の文字処理ができないとあぶないのかなぁ…。
現在サイトを作ろうと思っているのですがなかなかうまくいきません。 行おうとしているのは、あるドメインを持ってうちのサーバーにアクセスしたら必ずある一つのプログラム(index.cgi)のようなものを通り、それぞれパスにあったものをrequireで.plファイルを呼び込み、テンプレートを表示するというものです。 簡単に言うと下記のような感じです。 １、アクセス→２、index.cgi→３、passに応じたplファイルを参照→４、plで指定されたテンプレートを開く 現在２までは可能なのですが、呼び込む段階で呼び込めて折らず、何が原因かわかりません。 非常に困っています。 どなたかわかる方がいらっしゃいましたご指導鞭撻のほどよろしくお願いします。
perlの超初心者です． 標準出力された文字の中から任意の文字列をperlで抽出したいのですが．．． 例えば， 1　lsコマンドでファイル一覧を表示 2　表示された中から任意の文字列とマッチするものを抽出 3　マッチした文字列の後ろの文字を知る(拡張子とか) 4　さらに，1～3を'perl hoge.pl'とコマンド打つだけのワンアクションでやりたい. という感じなのですが．．． 勉強を始めたばかりなので，どういったキーワードを勉強すればよいのか，見当つかない状態です．．． おそらく，私がしょうもない質問をしているのだろうとは思いますが， 何かヒントでも教えていただければ幸いです． 周りに詳しい人物もいないので，なんとか頑張って習得したいと思っています． よろしくお願いしますm(><)m
こんばんわ。はじめまして。 グーグルアドセンスの広告の件でお伺いしたいのですが、 脳内メーカーというページがありますが、 携帯で見てもＰＣで見てもグーグルの広告が貼ってあります。 普通携帯用の広告を貼るとＰＣでは見れないものですが どうしてなんでしょう？ アドレスは携帯ＰＣともに同じです。 アドバイスよろしくお願いします。 規約違反じゃないのかと、 簡単な方法（ググリ方等でもＯＫです。） よろしくお願いします。
いつもお世話になっております。 perlの正規表現で分からない事があります。 ご存知の方がいらっしゃれば、アドバイスを頂けますようよろしくお願い致します。 (質問内容) 以下のようなプログラムを実行した場合、matchが出力されてしまいます。 $aには、「、IS」を設定しているので、「真」と扱われないと思うのですが、何故、matchが出力されるのでしょうか？ また、「偽」として処理をいしたい場合、 どのようにすればよろしいのでしょうか？ #!/usr/bin/perl $a = "、IS"; $b = "AIS"; if ($a =~ $b){ print "match\n"; } else{ print "not match\n"; }
入力フォームより入力した文字を7bit-JISに変換してメールで送信するスクリプトをutf8で書いております。 eucでスクリプトを書いておりました時はjcode.plでJISコードに変換すると、(株)や髙の文字もそのままメールで送られておりました。 今回utf8でスクリプトを書きなおしますと、 (株)（一文字の機種依存文字のです）　→　\x{3231} 髙　→　\x{9ad9} に変換されます... どのようにすると、このような機種依存文字もそのまま送信することができるでしょうか？ スクリプトは下記のような感じです.. -------------------- use utf8; use Encode; use Encode::Guess; binmode STDIN, ':bytes'; require 'mimew.pl'; # $Mail_Head : メールヘッダ # $Mail_Data : フォームより入力された文字列 #JISコードに変換 $Mail_Data = &to_jis($Mail_Data); $Mail_Real = $Mail_Head.$Mail_Data; # メール送信 open(MAIL,"|$SendMailPath"); print MAIL $Mail_Real; close(MAIL); exit; sub to_jis { my $text = $_[0]; # ～、－など文字化け対策 $text =~ tr/[\x{ff5e}\x{2225}\x{ff0d}\x{ffe0}\x{ffe1}\x{ffe2}]/[\x{301c}\x{2016}\x{2212}\x{00a2}\x{00a3}\x{00ac}]/; return encode ('7bit-jis', $text); } -------- \x{3231}は $text =~ s/\x{3231}/(株)/; などで(株)に変換するとかいう対策ができるかと思いますが、 はしご高などはお名前に使われる文字ですし、そのまま送信したいのです。 よろしくお願いします！
英語と日本語が交ざっているテキストから日本語部分を削除するプログラムをPerlで書きたいと思って以下のようなプログラムを組みましたが、うまくいきません。 while ( <IN> ) { chomp; tr/^[\x00-\x7f]//d; print OUT "$_\n"; } Perl初心者です。助けてください。
テキストファイルから任意の部分だけ抜き出したいです。 試行錯誤しているのですが、正直もうお手上げで。。 やることとしては、元ファイルがshiftjisなので、UTF8に変換し、処理を行う感じになると思っています。 ソースは以下のように書き、syntaxOKなのですが、実際に結果を出力するテキストファイルは0BYTEなので訳がわかりません。。 ソースは以下のような感じです。 何かヒントを頂けないでしょうか。 #!/usr/bin/perl use Encode::JP; use warnings; open READ, '<:encoding(shiftjis)', 'テキストファイル名'; open WRITE, '>:encoding(utf8)', 'テキストファイル名2'; while(my $data = <READ>){ ($data,"shiftjis","utf8"); printf WRITE; }; close WRITE; close READ; open PAY, 'テキストファイル名2'; while (<PAY>) { printf if /^"抜き出したい文字列（開始）"$/ .. /^"抜き出したい文字列（終了）"$/ and !/^(?:"抜き出したい文字列（開始）"|"抜き出したい文字列（終了）")$/; };
こんにちは。CGI初心者のものです。CGIに関して詳しい方がおられましたらお教えください。 現在Perlでデータベースを作成しています。データはCSVで保存し、検索結果があれば詳細情報を読み出すものです。データとして外国語と日本語を扱うので文字コードはUTF-8にしています。 検索結果が複数ある場合、入力日でソートして入力日の古いものが検索結果として表示されます。最初に表示される検索結果の上部に「次の候補へ」というリンクをつけて、複数ある結果の他の候補を参照できるようにしています。 「次の候補へ」へのリンクは、下記のような構造で検索フォームの内容を再度リロードして検索する形式を取っています。 ********************************************* $page_line = $view_end + 1; $count = $data_count + 1; if ($view_end ne $data_count ) { #次ページＨＴＭＬ $reload = $reload . '?' . 'kw=' . $FORM{'kw'} . '&' . 'action=search' . '&' . 'line=' . $page_line; print <<"EOL"; <td width="500" align="left" class="tbg4"> <p class="text"><img src="../img/link.gif" alt="link1" width="7" height="9">　<a href="$reload">検索候補が$count件存在します。次の候補へ</a></p> </td> </tr> EOL ********************************************* このロジックでFire fox, Opera, Safari, Chromeでは問題なく、次の候補へ移動できます。しかし、IEではこの処理をせずに初期画面（TOPページ）が表示されてしまいます。初期画面に移動すると言うことは他の検索候補を検索できなかったことになります。実際は他にも候補があるのに、どうしてこのように動作するのか、私にはわかりません。 しかも、奇妙なことに幾つかの文字に関してはIEでも「次の候補」が正しく表示されるものもあります。もしかすると文字コードのせいでIEでは正しく検索ができるものとできないものがあるのかと思っています。 もしこの件に関してなんらかの助言ができる方がおられましたら、何でもかまいませんので教えていただければ幸いです。宜しくお願いします。
ActivePerl で install time-hiresが入力できないのですが 教えていただけませんか？ コマンドプロンプトで ppm install time-hires install io-zlib install win32-api install http-lite install Win32-Sound install getopt-long を入力しようとしています。 最初のｐｐｍは入りました。 ｐｐｍはちゃんと起動しています その後何も入力できなくなります。 なぜでしょうか、多分凄く初歩的な質問だと思うのですが どうか教えてください。 もしくはこのコマンドを他の方法で実行する方法でもいいので よろしくお願いします。
$kana1[0][0] = "a"; $kana1[0][1] = "u"; $kana1[1][0] = "n"; $kana1[1][1] = "m"; という二次元配列があったときに an am un um と出力するようなプログラムのアルゴリズム(？)を教えてほしいです。 簡単なようでforループでやるとうまくいかずwhileを使ってフラグ変数とか作ってやってみましたがどうも駄目です。 ヒントでも何でもいいのでよろしくお願いします！ むしろ二次元配列を使うのがダメなら言って下さるとありがたいです。 よろしくお願いします。 最終的には二次元配列の縦も横も任意の数のときにすべての組み合わせを出力できるようにならなければなりません。
はじめましてよろしくお願いします。 perlは全然わかりません中に書かれているhtmlの変更くらいしかできません あま茶屋さんで配布している更新履歴なんですが 一切のサポートができませんのと書いてあったのでここに質問しました 投稿用フォームのTEXTARE内でEnterを押すと自動的に改行されて書きだしされるんですがこれを<br>がないと改行できないように変更したいんですがほかのサイトなど調べて $string =~ s/\r//; $string =~ s/\n//; のなかの\r.\nを削除したら映らなくなってしまいました どこをどう結う風に変更したらできるのでしょうか よろしくお願いします ソースは http://root-bar.com/100/update.txt でＵＰしています
Perl、CGI初心者です。 HTMLのフォームの選択結果を元にURLを生成し、 そのURLへアクセスするプログラムを作成しています。 URLはPDFファイルやWordファイルになり、URL（ファイル名）には 日本語が含まれています。 print "Location: $URL\n\n";としてURLへ移動するプログラムを 作成したのですが、日本語処理がうまくいっていない（？）ようで Not Foundとなってしまいます。 なお、NotFoundが表示された状態でブラウザ（IE6）の移動を押下すると テキストとしてPDFやWordファイルを開きます。 ＃NotFoundの時点ではブラウザの文字コードがISOになっています。 $URL =~ tr/+/ /; $URL =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack('C', hex($1) )/ge; &jcode'convert( *value, 'sjis' ); と日本語処理はしています。 また、ファイルを開くのではなく、以下のようにリンクを貼った場合は、 リンク先は正しく開くことができます。 <a href="$URL" target="_blank">$URL<a><br> 原因、対策を教えて下さい。
以前にもperlでのプログラミングについて質問させて頂いた者です。 前回と被る所があるのですがちょっと複雑で、私の手に負えないので質問させて頂きます。 よろしくお願いします。 データファイルAからデータを取得して、テキストファイルBの内容の一部を取得したデータで書き換えるという操作を行うプログラムを作りたいです。 具体的には、 データファイルA[A.txt]の中身 100 111　 200 222 300 333 400 444 テキストファイルB[B.txt] 1st step 文字列1 start="123" end="134" 2nd step 文字列2 start="234" end="245" 3rd step 文字列3 start="345" end="356" 4th step 文字列4 start="456" end="467" という二つのファイルを読み込み、B.txtの""で囲まれた部分を、A.txtで取得したデータで置き換えるような操作を行いたいのですが・・。 A.txtの一行目で取得したデータをB.txtの1stステップの始まりと終わりの値として置き換え、それを二行目は2ndと同様の操作を行うようなプログラムを作りたいです。 もともとこのような操作を行いたくて前回のような質問をし、それを参考にし今日まで考えましたがやはり難しく、また頼りたいと思います。。 どうかよろしくお願いします。
perl 超！初心者です。同一データの数え上げ。 あまり上手く説明できませんがよろしくお願いします。 ある行から行までの同一データを数え上げる処理をしたいです。 例えば、以下のようなデータがあるとします。 --------------------- <NAME> 田中 佐藤 佐藤 山田 田中 <NAME> 佐藤 田中 渡辺 渡辺 佐藤 ------------------- while (<>){ $linecount{$_}++; } foreach $line (sort{$linecount{$b} <=> $linecount{$a}}keys%linecount) { print $linecount{$line},"",$line if($linecount{$line} >= 1); } これで、行の重複回数と、データを出力はできたのですが、 さらに、<NAME>で区切ってそれぞれの区分で同一データの数を数えていきたいです。結果としては <NAME> 2 田中 2 佐藤 1 山田 <NAME> 2 渡辺 2 佐藤 1 田中 と出力したいのですが、どうすればよいでしょうか？
perl初心者です。これから勉強しようとしてます。 ですが、プログラムを打つ前に早速難関が・・・ perlをブラウザで表示しようとしてるのですが、出来ません！！（＞＜） 本の通りに次のような作業をしました。 ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿ １、ActivePerlのインストール ２、AN HTTPDのインストール ３、試しにcgi-binフォルダ内にhello.plの作成。 内容＿＿＿＿＿＿＿＿＿＿＿ #!/usr/bin/perl print"content-type: text/html\n\n"; print "Hello,world!"; ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿ と、打ち、コマンドプロンプトでperl hello.plと、入力すると、 content-type: text/html Hello,world! と、出力されます。 ですが、本の通り、ブラウザのアドレスバーに ”​http://localhost/cgi-bin/hello.pl​” と、入力すれば、Hello,world!と、表示されるはずなのに されません。 ちなみに、 サーバーが見つからないか、DNS エラーです。 と、表示されます 同じような質問があり、そこでの対策も試してみましたが、 どれも効果がありません。 初歩的な質問で申し訳ありません。 しかし、これからperlを勉強するに当たって避けては通れない道だと 思い、質問しました。 解決策以外にも他の方法でブラウザで表示する方法が あれば、そちらも試してみたいと思ってますので、 そちらのほうも、紹介していただけるなら、よろしくお願いします。
下記の様なグループ分けされたテキストデータを読み込んで ■テキストデータ group 1 list one match hogehoge1 hogehoge2 set pogepoge1 pogepoge2 group 2 list two match hogehoge1 hogehoge2 set pogepoge1 pogepoge2 ・・・・・・・・ この様に、複数の group で、中にはいくつかの list が存在し、 その中に match/set でコメントが書かれていまして これらを、『group,list,match/set,コメント』 の様にカンマ区切りにしたいです。 ■perl 実行後 group 1,list one,match,hogehoge1 group 1,list one,match,hogehoge2 group 1,list one,set,pogepoge1 group 1,list one,set,pogepoge2 group 2,list two,match,hogehoge1 group 2,list two,match,hogehoge2 group 2,list two,set,pogepoge1 group 2,list two,set,pogepoge2 なお、group の中には list がない場合もあります。。 # この場合はカンマ間を空白にしたい group 1,,match,hogehoge1 group 名は一意な名前がついていますが、list 名やコメントは 同じ情報が入っている場合があります。 この様に情報を関連付けながら変数に代入していきたいと思います。 どんなことでも、参考になりそうなことがありましたら是非是非、ご紹介ください。 宜しくお願い致します。
perl初心者です。これから勉強しようとしてます。 ですが、プログラムを打つ前に早速難関が・・・ perlをブラウザで表示しようとしてるのですが、出来ません！！（＞＜） 本の通りに次のような作業をしました。 ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿ １、ActivePerlのインストール ２、AN HTTPDのインストール ３、試しにcgi-binフォルダ内にhello.plの作成。 内容＿＿＿＿＿＿＿＿＿＿＿ #!/usr/bin/perl print"content-type: text/html\n\n"; print "Hello,world!"; ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿ と、打ち、コマンドプロンプトでperl hello.plと、入力すると、 content-type: text/html Hello,world! と、出力されます。 ですが、本の通り、ブラウザのアドレスバーに ”​http://localhost/cgi-bin/hello.pl​” と、入力すれば、Hello,world!と、表示されるはずなのに されません。 ちなみに、 サーバーが見つからないか、DNS エラーです。 と、表示されます 同じような質問があり、そこでの対策も試してみましたが、 どれも効果がありません。 初歩的な質問で申し訳ありません。 しかし、これからperlを勉強するに当たって避けては通れない道だと 思い、質問しました。 解決策以外にも他の方法でブラウザで表示する方法が あれば、そちらも試してみたいと思ってますので、 そちらのほうも、紹介していただけるなら、よろしくお願いします
perlを使って、中身が見れる程度のブラウザを作っているのですが表示させると文字化けしてしまいます。 コードはget()でアドレスを指定し、bodyの中身を正規表現でくりぬいてくるという単純なものです。 エンコードの影響だとおもうのですが jcode::convert(\$body, 'euc'); などを入れてみても文字化けは解決しませんでした。 改行が悪さをしてるのかと思い =~ s/[\r\n]//g; も入れているのですがだめです、、、 どうしたら文字化けが解消するのでしょうか？
perlで自作のモジュールをuseしたいのですが、その際参照するディレクトリをモジュールごとに指定するためにはどうしたらいいのでしょうか？ 例えばあるスクリプト中でA.pmとB.pmをuseして、A.pmは一つ上の階層、B.pmは二つ上の階層のディレクトリを参照するという形です。 この際libで呼ぶのではなくアパッチでA.pmの場合はここを参照、B.pmの場合はこことしたいのですがどなたかご教授下さい。 環境 apache2.2系 Linux(ubuntu)
Perl,CGI初心者です。 LWPのUserAgent(もしくはSimple)を使ってWeb上のHTMLをGETして、そのHTMLの特定の部分を 出力するCGIプログラムを作成しています。 コマンドプロンプトで<perl "cgiプログラム>とすると想定通りの結果が得られるにも かかわらず、いざブラウザ経由で当該cgiにアクセスしようとすると、エラーにはなりま せんが、データがGETできていません。 何か原因は考えられるでしょうか？ LWPを使用する際はApache側にも何か設定が必要なのでしょうか？ Webサーバ：Windows XP,Apache2.2,Perl5.8.8
はじめまして、以下の事について何方かご教授頂けると幸いです。 http://www.ezclubstd.com/ 上記のフリーCGI配布サイト様より「みにっちぼ～」という掲示板をDLしました。 今回頭を抱えているのは、このCGIに「tag_check」を盛り込もうと試行錯誤を重ねているのですが、行き詰まってしまいました。 Perlの知識は何とか読める程度で、書くことができません。 http://www.tryhp.net/ 上記のサイトで配布されている「perl-lib.pl」を参考にしてみましたが、望んでいる結果となりません。 ならばと思い、「tag_check」を採用している他のCGIを参考にしてみましたが、文法が違うようでこれも断念してしまいました。 ちなみに「perl-lib.pl」ですが、外部ファイルから読み込もうとすると500が返ってきました。パーミッションの設定を755/644としてみましたが変化はありませんでした。 「tag_check」の部分を直接CGI本体にペーストしてみたものの、ディスプレイを眺めたまま途方に暮れています。 軽率ではありますが、何方かお力添えして頂けると幸いです。 宜しくお願いします。
【環境】RedHat Linux as 3 【現在】 　Net-SnmpのTrapHandleを取得し 　標準入力から受けた情報をファイルに出力する処理を作成中です。 出力するファイル名を現在時刻にしたいのですが 　シェルを実行してもファイルが出力されません。 　Perl初心者で手探りで調査していますが煮詰まってしまいました。 　すみませんがご教示願います。 【処理内容】 　・snmptrapd.conf 　traphandle default /root/bin/trap.sh ・trap.sh 　#!/usr/bin/perl 　@tim = localtime(time); 　$tim[5] += 1900; 　$tim[4] += 1; 　for($idx=0;$idx<5;$idx++){ 　 　$tim[$idx] = sprintf("%02d",$tim[$idx]); 　} 　while (<STDING>) { 　 　$buf. = $_; 　} 　open (FILE,">>/tmp/$T[5]$T[4]$T[3].txt"); 　print FILE $buf; 　print FILE "--------\n"; 　close(FILE);
どこで質問しようかと思いましたが 当方、perlを使用しておりますのでこちらで質問させて頂きます。 ファイルシステムはext3を使用しております。 総ファイル数の上限にはinodeで指定しますが、 総ディレクトリ数に関しては上限は無いのでしょうか。 １ディレクトリ内（サブディレクトリ）のディレクトリ数上限は32768 個までと情報がありますが 総ディレクトリ数が解りませんのでご存知の方がいらしたら宜しくお願い致します。 また、上限はあるけどパフォーマンス上、いくつ位までで止めておいたほうが良いなどの情報やアドバイス等も頂けますと嬉しいです。
よろしくお願いします。 データファイルAからデータを取得して、テキストファイルBの内容の一部を取得したデータで書き換えるという操作を行うプログラムを作りたいです。 具体的には、 データファイルA[A.txt]の中身 111 222 333 444 テキストファイルB[B.txt] 文字列1="123" 文字列2="234" 文字列3="345" 文字列4="456" というような二つのファイルを読み込み、B.txtの""で囲まれた部分を、A.txtで取得したデータで置き換えるような操作を行いたいのですが・・。 使用する言語としてはスクリプト言語であるperl、もしくはプログラム作成経験があるCを使用しようと思っています。（perlは未経験で入門書を読んでいるレベル）
サブルーチンを使い、文字列で時間を入力し秒に変えるのをやりたいのですが、どうにもうまくいきません。 表示結果の例としては 0h20m15s=1215 もしこれ以外の形式なら 12m12m12m=notaime っていうぐあいに作りたいのですが、教えてください。 あと、ハッシュで同じ文字列のキーの数を数えたいのですが教えてください。 ('a',20,'b',30,'a',40); a:2 b:1 という感じです。 おねがいします
201以上の数字を入力されたときに、アラートが出るようにしたいのですが、下記の記述だと300からの数字になり =~ /^[3-9]{1,}[0-9]{2,}/ ) =~ /^[2-9]{1,}[0-9]{2,}/ ) だと199までの入力でアラートが出てしまいます。 201以上を入力されたときの正規表現はどのように書いたらよろしいのでしょうか？ 正規表現の記述自体をいまいち把握出来ておりませんので、出来ましたら解説もいただけるとありがたいです。
初めましてｍ(_　_)m perl初心者です・・・＾＾；今、世界測地系の座標から地図をビットマップで作成しようと思っているんですが、どうにも書き方ややり方がわかりません・・・；； 書き方でも手順でもなんでもいいのでご存知の方、教えてくださいませんか？ よろしくお願い致します。
perl の以下のソースで、実行エラーになってしまいます。 grep で全角カタカナで検索できないのです。半角カタカナでは、うまく動きました。 全角文字（たとえば’中華’）でも正しく「中華料理」と出力されます。 ’ラーメン’で検索したら、’ラーメン店’と出力されるのが正しいと思うのですが、 なぜ動かないんでしょ？ ↓ソース #!/usr/bin/perl @aaa = ("ラーメン店","カレーハウス","中華料理"); @aaa = grep /ラーメン/ , @aaa; print "Content-type: text/html\n\n"; print "<META http-equiv=\"Content-Type\" content=\"text/html; charset=Shift_JIS\">\n"; print <<"HTML"; @aaa HTML exit;
sendmailで送られてくるメールがoutlook2003では一部文字化けしてしまいます。（カテゴリ「お名前：」の部分が文字化けします） 他にも20項目ぐらいありますので一括で変換できるような形にしたいと思いますがどうすれば良いでしょうか？ コードの一部を記載させていただきます。 ■コード内容 sub senddatamail{ if (!open (OUT,"|$sendmail -t")) {&error('情報メール送信エラー');} jcode::convert(\$in{'namae'},'jis'); print OUT "お名前:$in{'namae'}\n"; close(OUT); } ■出力結果 、ェフセチー:テスト太郎
Solaris10にPerlをインストールするため、以下のコマンドを実行したところ、 ### sh Configure -Dprefix=/usr/local/perl -Dcc=gcc -des ### 以下のエラーが発生しました。 ### I've tried to compile and run the following simple program: #include <stdio.h> int main() { printf("Ok\n"); exit(0); } I used the command: gcc -o try -O -fno-strict-aliasing try.c -lsocket -lnsl -ldb -ldl -lm -lc ./try and I got the following output: ld: 重大なエラー: ライブラリ -ldb: 見つかりません。 ld: 重大なエラー: ファイル処理エラー。try へ書き込まれる出力がありません。 collect2: ld returned 1 exit status I can't compile the test program. You have a BIG problem. Shall I abort Configure [y] Ok. Stopping Configure. ### 上記エラーの解決方法をご存知の方がいらっしゃいましたら、 ご教授いただきたいと思います。 なお、上記現象はPerl5.6.8およびPerl5.8.8のインストール時に 発生しました。 よろしくお願いいたします。
UTF-8で下記スクリプトを書いて実行すると、 $yy年$mo月$dd日　にあたる部分が表示されず、($day)$hh:$mm:$ss　の部分しか表示されません。 ------------------------------------ #!/usr/bin/perl use utf8; use Encode; &get_date(); print "Content-type: text/html\;charset=utf-8\n\n"; print encode('utf8',"$date"); exit; sub get_date { ($ss,$mm,$hh,$dd,$mo,$yy,$day)= localtime(time); $day = ("日","月","火","水","木","金","土")[$day]; $yy = $yy+1900; $mo++; if ( $mo < 10 ) { $mo = "0$mo"; } if ( $dd < 10 ) { $dd = "0$dd"; } if ( $hh < 10 ) { $hh = "0$hh"; } if ( $mm < 10 ) { $mm = "0$mm"; } if ( $ss < 10 ) { $ss = "0$ss"; } $date = "$yy年$mo月$dd日($day)$hh:$mm:$ss"; } ------------------------------ EUCコードでスクリプトを書いてencodeなど不要な部分を変更した場合は$yy年$mo月$dd日の部分も表示されます。 また、上記 　$date = "$yy年$mo月$dd日($day)$hh:$mm:$ss"; の部分を下記のように変更すると表示されますが... -------------------------- $date = $yy; $date .="年"; $date .= $mo; $date .="月"; $date .= $dd; $date .="日"; $date .="($day)$hh:$mm:$ss"; -------------------------- なぜ一括してダブルクォートで囲むと表示されないのでしょうか？ 今まではEUCでスクリプトを書いておりました。UTF8に翻弄されております... どうぞよろしくお願いいたします。
こんにちは。 今Perlをやっているのですが、変わった文字列を配列に上手く入れて、配列を操作するところで行き詰っています。 例として、 windows95 windows98 windows2000 windowsXP windowsVista このように並んだものを、配列に入れて処理を行いたいです。 ただコレを$wordsに入れて$words = @wordsとしても、その後の処理に詰まってしまいます。 その後の処理コード自体は使えるものなので、配列の入れ方に問題があると思っているのですが、私の中で答えを導くことはまだ出来ていません（汗 解決方法または良いやり方があれば、是非教えていただきたいです。 宜しくお願いします。
サブルーティンの理解を深めるために、 階乗の計算をサブルーティンで行うプログラムを作りました。 自作のプログラムについて質問を二つしたいと思います。 １．一応、計算は出来るのですが、 定型的でないというか、無駄が多いというか、 何か違う気がするのです。 どこか変なところはありませんでしょうか？ ２．エラーメッセージをどこにいれたらいいのかわかりません。 数字以外、（例えば文字）が入力されれば１が出力されるようにはしたのですが、 「これは数字ではありません」のようなエラーメッセージを出したいのです。 この場合はどこにどのように記述すればいいですか？ 色々試してみたのですが、思い通りに動きませんでした。 みなさま、知恵をお貸しください。 ------------------------------------------- use strict; print "数字を入力してください。\n"; chomp( my $number = <STDIN> ); my $k_number = kaijo($number); print "入力された数字の階乗は$k_numberです。\n"; sub kaijo { my $number = shift @_; return undef if $number < 0; return 1 if $number == 0; my $kaijo = 1; for(my $i = $number; $i>1; $i--) { $kaijo *= $i; } return $kaijo; }
SOAP::Liteを用いてAWSを利用しようと思ったのですがSOAPの導入の方法が分かりません。 googleなどで検索はしたのですがapache-soapのインストーラーにしか当たりませんでした。 apache-soapはjava用のsoapですのでこれではないと思うのですが・・・ SOAPの導入の方法、種類について教えて下さい。
以下のPerlをPythonで書くとどうなるのでしょうか？ pythonのヒアドキュメントと<DATA>, chompの動作の置き換えが知りたいです。 ヒアドキュメントは"""や'''で可能？と思いますが、ヒアドキュメントを１行づつ取り出す方法がわかりません。 use strict; # <-- Pythonの厳格化？の警告方法も知りたいです。 while(<DATA>){ chomp; print "$_\n"; } exit; __DATA__ abc de f ghi 参考になるサイトや本をご存じの方教えてください。
open(SIN,"$file") || &error("Error"); $data = <SIN>; close(SIN); ($data1,$data2,$data3,$data4,$data5) = split(/<>/, $data); $i=0; while ($i < 5) { $i++; print "<input type=text name=data$i size=70 value=\"$data$i\">\n"; } valueの所に $data1 $data2 $data3 $data4 $data5 と呼び出したいのですが、上記のように記入するとvalueのところには$i（数字）が呼び出されてしまいます。 繰り返し文の場所に上記のように変数を入れていくには、どのようにすればよろしいのでしょうか？
こんにちは。 とほほさんのWWWUPLをベースに、Image::Magickを使って画像を縮小し、画像ファイルをアップロードすることを考えています。 http://www.tohoho-web.com/cgi/wwwupl2.txt どのように書いたらいいのかわからないので、質問させて頂きました。 ご教授宜しくお願いします。 尚、サーバーには、Image::Magickインストール済みです。
perl 5.8 からはUnicode対応され、内部形式がUnicodeで管理されると聞きました。Unicodeで管理されるということが結局どういうことなのか？従来のperl 5.6 と比べて何が変わったのかが理解できません。 perl 5.6 はUnicode対応されていないので内部形式はバイナリ。たとえばリテラル文字をソースに書いた場合、内部での文字はバイナリ列として管理されるのでバイナリの元の文字がどのようなエンコード(EUC、SJIS等)であったかはプログラマが意識するところ。それに対し、perl 5.8 はUnicode対応されているのでperl 5.6 のようにプログラマが文字コードを意識する必要はない(常にUnicode)と理解しています。 私の理解は上記のようなものですが、これが正しいのか正直まったく自身がありません。むしろ、違っているならばよりわかりやすい説明をお願いしたいところです。 長文となりましたが、よければ教えてください。お願いします。
Cygwin上で、例えば「hello.pl」というperlスクリプトを 実行するのに $ perl hello.pl や $ ./hello.pl では実行できるのに $ hello.pl だと bash: hello.pl: command not found と なってしまって実行できません。 $ hello.pl でコマンド化して実行したいのですが どのようにすればよいか教えてください。
値を10進、16進の相互変換を行いたいのですが、いまいちうまく行かずに困っています。 小さな桁数なら実現できているのですが、大きくすると変になります。 まず、10進→16進は作ることが出来ました。（計算機の16進変換と合っているので・・・） 10000081000008100000を16進にすると 8AC76CAFD29DA8A0になります。 で、今度は8AC76CAFD29DA8A0を10進にしたいのですがうまくいかないのです。 計算的にはこんな感じです。どこかおかしいですか？ 0...1 * 0 = 0 A...16 * 10 = 160 8...256 * 8 = 2048 A...4096 * 10 = 40960 D...65536 * 13 = 851968 9...1048576 * 9 = 9437184 2...16777216 * 2 = 33554432 D...268435456 * 13 = 3489660928 F...4294967296 * 15 = 64424509440 A...68719476736 * 10 = 687194767360 C...1099511627776 * 12 = 13194139533312 6...17592186044416 * 6 = 105553116266496 7...281474976710656 * 7 = 1970324836974592 C...4503599627370500 * 12 = 54043195528446000 A...72057594037927900 * 10 = 720575940379279000 8...1152921504606850000 * 8 = 9223372036854800000 でこれを足すだけだと思ったのですが、 なぜかperlで一つずつ足すと10000081000008123880となります・・・ ここでexcelで検算をしてみたのですが、なぜか合いました。 0 160 2048 40960 851968 9437184 33554432 3489660928 64424509440 687194767360 13194139533312 105553116266496 1970324836974590 54043195528446000 720575940379279000 9223372036854800000 ----------------- 10000081000008100000 でもおかしくないですか？？？1の位を手計算で足すとわかるのですが、 0になるわけが無いのです。 いったい何がどうなっているのか・・・ どうか助けてください。
条件分岐を使い、長いperlを簡単にまとめたいと思っています。抜粋したperlを以下にのせましたがYES/NOがずっと続いていて、メンテナンスに困っています。 どうかアドバイスをお願いします。 ・データのかたち %%%%%%%%%345 YES%%%%%%%%%%%%%%%%%%%%%%%%% ver 3445675585950 data 111111111111 345 777good %%%%%%%%%380 NO%%%%%%%%%%%%%%%%%%%%%%%%%% big 2910028717721 q qtyuqqqqqqqqq ppm 3.9999999999 380 NO 222down ・現在のperlの抜粋 #345がYESのとき if($_ =~ /\s+345+\s+(-?[\d.]+)/){ print OUT "\n345,$1,YES"; } #345がNOのとき if($_ =~ /\s+345+\s+NO+\s+(-?[\d.]+)/){ print OUT "\n345,$1,NO"; } #380がYESのとき if($_ =~ /\s+380+\s+(-?[\d.]+)/){ print OUT "\n380,$1,YES"; } #380がNOのとき if($_ =~ /\s+380+\s+NO+\s+(-?[\d.]+)/){ print OUT "\n380,$1,NO"; }
いつもお世話になっております。 以下の正規表現の記述の仕方が分からないのですが、 ご存知の方教えて頂けますでしょうか？ (やりたいこと) 以下のような記述がある場合、value=の値が空の時は 処理Aをしたいというif文を書きたいのですが 書き方が分かりません。 if($orginal =~ /<option value=\"\"/){ 処理A } のようなif文を記述したのですが、 2行目の「テスト」も引っかかってしまいます。 どのように記述すればよいのでしょうか？ <option value="" >選択してください</option> <option value="テスト" >テスト</option>
お世話になります。 正規表現の文字クラスについてお聞きします。 0～6 の数字１字を [0-6] という風に指定しますが、 .NET 正規表現では、 この中から 3～5 は除く、というようなとき、 [0-6-[3-5]] と言う風に書けるようですが、 Perl では書けないようです。 （一応ラクダ本と perldoc perlre には当たりました） #! perl # regtest.pl -- 正規表現のテスト while(<DATA>) { chomp; print "$_ matches /[0-6-[3-5]/\n" if /[0-6-[3-4]/; } __DATA__ 0 1 2 3 4 5 6 7 8 9 のようなスクリプトを動かすと、 C:\test>regtest.pl 0 matches /[0-6-[3-5]/ 1 matches /[0-6-[3-5]/ 2 matches /[0-6-[3-5]/ 3 matches /[0-6-[3-5]/ 4 matches /[0-6-[3-5]/ 5 matches /[0-6-[3-5]/ 6 matches /[0-6-[3-5]/ のような結果が得られ、引き算が確かに聞いていません。 Perl と .NET 正規表現は互換ではないのでしょうか。 また、Perl でも同じことが書けるでしょうか。 よろしくご教示願います。
perｌの勉強を始めていますが、早速問題発生しました。 cygwinインストトール AN HTTPインストール ↓プログラムソース #!/cygwin/bin/perl print "contenttype: text/html\n\n"; print "hello,world"; と出力しましたが、ブラウザに表示されません。 有益な情報を探しましたが見つかりませんでした。 プログラムのミスでしょうか？ 的確なアドバイス教えてください。 返信宜しくおねがいします。
下記条件のメールフォームCGIを探しています(T_T) かなり探しているのですが、探し方が悪いのか見つけられず．．． ご存知の方がいらっしゃいましたら、ぜひ教えて下さい。 ・商用利用可のフリーCGIまたは、￥5,000くらいまでのCGI ・デザイン、項目はHTMLで設定でき、設定内容は自由 ・オートレスポンス機能付き ・項目がかなり多いので、項目の数が制限されてしまっているCGIは使えません。 現在は、ホームページの飾り職人さんのPerlMailer(http://www.din.or.jp/~hideyuki/home/cgi/mailer.h …) を使用しており、 デザイン自由で、HTMLを変更すれば、送信されてくるメールの項目も 自動的に変更されるので、とても重宝しているのですが、 オートレスポンス機能だけは付いていません。 出来ればオートレスポンス機能が付いていた方が、送った側も安心できると思うので、 条件に合うCGIが見つけられたら、そちらに変更したいと思っています。 よろしくお願いいたします。
汚くて申し訳ありません。 以下のようなperlのプログラムを組んだのですが制御文が思い通りに動きません。 比較対象の数字の先頭の0を取れば正常に動くのですがどうしても0をはずすことはできないのです。 いろいろ試してみたのですがどうしてもうまきかないので知恵を貸してください。 $input = <STDIN>; if($input > 0130){ print "A\n"; } elsif(($input > 0120)&&($input < 0130)){ print "B\n"; } else{ print "C\n"; }
while(<GO>){ if($_ =~ /BOOK(.+)/){ print OUT "\n$1,"; } #01234を見つけたら、一番最初の文字列を抜き出す if($_ =~ /012345 (.+)(.+)(.+)(.+)(.+)(.+) /){ 　　　#その文字列の文末を削除 $data=(.+) substr($data, -3, 2) = ""; print OUT "$1,"; } } close(OUT); データ例 #####BOOK###### ###################33########################## 012345 6.6666ppm 2.6asc 3.9asc GOOD 0 0 012345 1.6666pm 2.6asc 3.9asc NO 0 0 012345 6.6656pppm 2.6asc 3.9asc MIN 0 0 ###################36########################## 012346 6.6666ppm 2.6asc 3.9asc GOOD 0 0 012346 1.6666ppm 2.6asc 3.9asc NO 0 0 012346 6.6656ppm 2.6asc 3.9asc MIN 0 0 上記のようなデータから一番左の文字列があったら、 一番最初の文字列を切り出し，文末を削除したいのですが、 作成したperlでは6.6666ppm 2.6asc 3.9asc まで切り出して且文末が削除できません。 どうかアドバイスをお願いします。
さくらインターネットのレンタルサーバを利用しています。 サーバで受け取ったメールを添付ファイルを除去して携帯電話に転送するスクリプトを書きたいと思っていますがよくわかりません。 ちょうどいい具合に以下のURLにサンプルがありましたが、これですと肝心の本文が転送されません。 http://faq.sakuratan.com/wiki/wiki.cgi?%c3%e5%bf … 上のURLのスクリプトに添付ファイルを除去した上での本文を記載するためにはどう書けばいいのでしょうか。 ※一応サンプルとして引用しましたが、もっといいやり方がありましたらお教え下さい（ただし外部のサービスやソフトウェアを使うのはなしで、あくまでさくらインターネット内で行うものです）。 どうかご教授下さい。
はじめまして、まだCGI初心者なものでよくわからないですが教えてください。 あるCGI関連の書籍に付属のCD内に修められた顧客データベースを改造しているところです。このデータベースはCSVデータの全ての情報を検索して結果を表示するものなのですが、これを「備考（$ message）以外の情報を全て検索して結果を表示する」とするにはどのように改造したらよろしいでしょうか。備考は検索しないけれど、他の情報は全て検索して結果を表示させるということです。ただし、結果として表示される画面には備考（$ message）の内容も表示させたいのです。 検索に関わる箇所を抜き出すと次のようになります。初心者なので説明がうまくできていないと思いますが、ご解答できる方々は是非ともご教授お願いいたします。 ############################ # 初期画面、検索結果表示 ############################ sub html { open(IN,"$file") || &error(100,'ファイルをオープンできません'); @DB = <IN>; close(IN); @DB = reverse(@DB); if ($FORM{'action'} eq "search") { $kw = $FORM{'kw'}; &jcode::convert(*kw,'euc'); foreach $line (@DB) { $value = $line; if ($kw =~ m/[\*\{\}\=\&\@\~\>\<\#\%\"\'\`\(\)\[\]\\\/\:\;\_\,]/){ &error(101,'検索キーが不適切です'); } &jcode::convert(*value,'euc'); if ($value =~ /$kw/i){ push(@HIT,$line); } } }else{ @HIT = @DB; } print "Content-type: text/html\n\n"; print <<"EOL"; <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> <html lang="ja"> <head> <meta http-equiv="Content-Type" content="text/html; charset=x-euc-jp"> <title>$title</title> @style </head> <body> <div align="center"> <p class="title">$title</p> <p class="text"><b>｜</b><a href="$HomeUrl">ホームページ</a><b>｜</b></p> <form method="post" action="$reload"> <input type="hidden" name="action" value="write"> <input type="submit" value="データベースに書き込む" class="buttonsmall"> </form> <form method="post" action="$reload"> <input type="hidden" name="action" value="search"> <table border="0" cellspacing="0" cellpadding="2"> <tr> <td> <p class="text">名前、ユーザー名他、備考文の文字検索ができます。</p> </td> </tr> <tr> <td> <table border="0" cellspacing="0" cellpadding="2"> <tr valign="bottom"> <td> <input type="text" name="kw" size="30" class="textarea"> </td> <td> <input type="submit" value="検索" class="buttonsmall"> </td> </tr> </table> </td> </tr> </table> </form> EOL if ($FORM{'line'} eq ''){ $line = 0; }else{ $line = $FORM{'line'}; } $data_count = @HIT - 1; $view_end = $line + ($view-1); if ($view_end >= $data_count){ $view_end = $data_count; } foreach ($line .. $view_end) { ($date_now,$number,$name,$email,$hp,$message,$tiku,$yuza,$tel,$fax,$busho) = split(/\,/,$HIT[$_]); $message =~ s/\r/<br>/g; print <<"EOL"; ############################
open(test1,"+<test1.txt"); flock(test1,2); print test1 ""; truncate(test1,tell(test1)); close(test1); open(test2,"+<test2.txt"); flock(test2,2); print test2 ""; truncate(test2,tell(test2)); close(test2); open(test3,"+<test3.txt"); flock(test3,2); print test3 ""; truncate(test3,tell(test3); close(test3); foreach(test1,test2,test3){ open($_,"+<$_.txt"); flock($_,2); print $_ ""; truncate($_,tell($_)); close($_); 上の二つのプログラムなのですが前者は問題なく出来るのですが 後者はtruncateの後にor die("$!"); とおくと"No such file or directory"と表示されてしまいます。 ３つともループせずにやるかforeachでやっているかだけで ソース的には同じだと思うのですが何が違うのでしょうか・・・？
暗号化キーを使用した暗号化→復号化で cgi(perl)で暗号化し、phpで復号化を行おうとしております。 AES暗号を使用したのですが、いろいろ設定を変えて 試みたのですが、うまくいきませんでした。 他に暗号化キーを使用した暗号化の方法がありましたら 教えてください。 暗号化(perl)→復号化(php)で実績のあるモジュールが あれば非常に助かります。 よろしくお願いします。
現在、二つのメールアドレスのリストを扱っています。 （形式はcsv...というか、一行に一つのメールアドレスが書いてあるだけの簡単な形式です） ちなみにどちらも数十万件レベルの長大なものです。 二つのリストを仮に1、2としますと、 「1」にはA、B、C 「2」にはB、D というように一部重複しているのですが、 この二つのファイルから A、Cを含む「3」というファイルを書き出したいと思っています。 明日の朝までに作業を終えなければならず、 また職場のPC(Win)で制限が多いこともあり案が浮かばず、 幸いperlだけはインストールしてありましたので、 それで何とかならないかと思いこちらでご質問させていただきました。 どうかお知恵を貸していただければと思います。 カテゴリ違いでしたらご指摘いただけると助かります。 宜しくお願い致します。
#!/usr/bin/perl -d:ptkdb use CGI; print(CGI->new->header, "abc"); 原因を解明するために超簡易スクリプトを作成しました。 このスクリプトはブラウザーにabcと表示するはずです。 しかし Internal Server Error となってしまいます。 このスクリプトから -d:ptkdb の部分を取り除くと、ちゃんとabcと表示されるのです。 また、コマンド行では-dオプションの有無に関係なくちゃんとabcと表示されます。。。 誰か教えてくださいm(__)m サーバー機はRedHatLinux7.2です。
active perl(アクティブパール)で 以下の文字列編集を行いたいのですが、 シングルコーテーションの編集で上手く出来ずに困っています。 どなたか経験豊富な方、良いコーディング方法があれば ご教授下さい。 やりたい事としては、 文字列 aaaaaa bbbbbb cccccc dddddd といった内容を 取り込んで 'aaaaaa','bbbbbb','cccccc','dddddd' といった文字列の出力を行います。 上記の例では文字はddddddまでですが、 場合により bbbbbbまでたったりといった感じで 変換前の文字の行数は可変で、2行でも3行でも4行でも、 各行の文字をシングルコートで囲って、カンマでつなげた文字列を出力します。 上記の仕様内容で、こうすれば出来る！ といったサンプルコードを教えていただけると助かります。
Encode::JP::Mobile　を使用してみたいのですが、教えてください。 このモジュール？は、どのように使用するのでしょうか？ この　http://search.cpan.org/~miyagawa/Encode-JP-Mobil …　から、 ダウンロードしたら、わからないファイル達がいっぱいでてきて・・・ モジュールをダウンロードして、サーバーへアップロードして、Perlで、宣言して使用って感じじゃないのでしょうか？
<div class="center"> .... <img ... class="right" ...> .... </div> とあるソースをperlを使って <div class="center"> ... <img ...> ... </div> というように img タグの class="right" を削除したいです。 <div class="center"> の中にあるimgタグのみ対象としたいのですが、 どうすればよいのでしょうか。 なお、<div class="center"> タグの中には複数の <img ... class="right" .. >タグがある場合もあります。
CGIのURLが http://example.com/test/test.cgi だったとして、自身のURLのパス部分(http://example.com/test/)を出すには どのようにしたらいいでしょうか。 CGIモジュールでURLを取得して 最後の/まで切り取る方法もあるかと思いますが そのURLを取得するのと同じくらい、スマート？に出来ないでしょうか。 アドバイスのほどよろしく御願いします。
いつもお世話になっております。 以下のようなPerlのプログラムがあるのですが、 何の処理を行っているのかよく分かりません。 分かる方がいらっしゃれば、教えて頂けますでしょうか？ (プログラム内容) $param{back} =~ /^\d+$/ or $str =~ s/<!--back start-->.+<!--back end-->//g; この処理は、$param{back} =~ /^\d+$/の結果により、 以下の処理を行うという意味なのでしょうか？ 数字から始まる文字である　→　何もしない。 数字から始まる文字でない　→　$str =~ s/<!--back start-->.+<!--back end-->//gの処理をする。 以上です。 よろしくお願い致します。
以下のような掲示板のログファイルがあります。 2<>2への返信記事2つ目<><> 1<>1への返信記事4つ目<><> 1<>1への返信記事3つ目<><> 2<>2への返信記事<><> 1<>1への返信記事2つ目<><> 1<>1への返信記事<><> 2<>親記事<>2.jpg<> 1<>親記事<>1.jpg<> 親記事もレス記事も同じログファイルに下から投稿順に記録されていきます。 親記事には必ず画像が付きます。 これを表示するだけの、ごく単純なCGIを作っているのですが、親記事も返信記事も独立して表示されてしまいます。 #!/usr/local/bin/perl require './jcode.pl'; $log = "./log.txt"; $title = 'test'; print "Content-type: text/html; charset=euc-jp\n\n"; print <<EOM; <html> <head> <title>$title</title> </head> <body> EOM open(OUT,"$log"); @DATA = <OUT>; close(OUT); foreach(@DATA){ ($num,$body,$img) = split(/<>/,$_); if($img ne ""){ $img = "<p><img src=\"$img\"></p>"; } print <<EOM; <h1>$num</h1> <p>$body</p> $img <p>$res</p><hr> EOM } どうすれば親記事番号と返信記事番号を関連付けて、$bodyを$resに出来るのでしょうか？
いつもお世話になっております。 Perlの処理で分からない事がありますので、 ご存知の方がおられましたら、 アドバイスを頂けますでしょうか。 (質問内容) 以下のIFがあるのですが、何のチェックを実施しているか分かりません。 何のチェックを行っているか教えて頂けますでしょうか。 if($lvalue =~ /[^\x81-\x9F\xE0-\xFC]\\[^\\]/){ 処理1 } 以上です。 よろしくお願い致します。
今読んでる本、CGIプログラミング第2版ですが、いよいよ終盤です。 第15章　CGIアプリケーションのデバッグまで読み進めてきました。 Perlデバッガのコマンド表にあるコマンドを試しています。 b[ 行番号| サブルーチン名]コマンドでカレント行、指定行、指定サブルーチンへブレークポイントを設定できました。 今度は d[ 行番号| サブルーチン名]コマンドでブレークポイントを削除しようとしたのですが、削除できていませんでした。 何度試しても先ほど設定したブレークポイントで停止してしまいます。 さらに引数として行番号やサブルーチン名を与えたときは次のエラーが発生します。 Number found where operator expected at (eval 5)[/usr/lib/perl5/5.8.0/perl5db.pl:17] line 2, near "d 5" eval '($@, $!, $^E, $,, $/, $\\, $^W) = @saved;package main; $^D = $^D | $DB::db_stop; d 5; ;' called at /usr/lib/perl5/5.8.0/perl5db.pl line 17 DB::eval called at /usr/lib/perl5/5.8.0/perl5db.pl line 1323 DB::DB called at try line 4 (Do you need to predeclare d?) eval '($@, $!, $^E, $,, $/, $\\, $^W) = @saved;package main; $^D = $^D | $DB::db_stop; d 5; ;' called at /usr/lib/perl5/5.8.0/perl5db.pl line 17 DB::eval called at /usr/lib/perl5/5.8.0/perl5db.pl line 1323 DB::DB called at try line 4 syntax error at (eval 5)[/usr/lib/perl5/5.8.0/perl5db.pl:17] line 2, near "d 5" またDコマンドは全ブレークポイントを削除するそうですが、これも効きませんでした。 本件について、何か情報をお持ちの方、教えてくださいm(__)m
http://x68000.q-e-d.net/~68user/net/http-proxy.h … にあるFreeのBSDライセンスのperlプログラムを使用して、 接続したwebページのurl情報やドメイン情報を取得し、apacheサーバに送りたいと思っています。 そしてapacheサーバに設置したperlプログラムを用いて、url情報やドメイン情報を解析し、閲覧を制限するなどの簡易フィルタリングをしたいと思っています。 しかし２週間程格闘してもproxyを通してwebページが見られる以外何も出来ません。 周りにプログラムに精通してる人が居らず、このような場をお借りしての質問となりますが、心当たりのある方が居りましたら回答してくださると嬉しいです。 Windows XPを使っています。
Perlで取得した情報をFlashのActionScript 3.0で受けたいのですがどの様にすればいいのでしょうか？ どなたかよろしくお願いします。
Perlで複数のファイル 001.txt, 002.txt, 003.txt を一度に読み込み、行頭に行番号を付け、それぞれ 001.OUT, 002.OUT 003.OUT というファイル名で出力するためにはどうすればよいでしょうか？ できますでしょうか？ よろしくお願いします。
質問タイトルについてですが、複数のファイルに対し処理を行うためのスクリプトを書きたい場合、例えば abc defあいうえおghi jkl という文字列がファイル内にある場合、それを検索させて「あいうえお」の部分にあたる文字列（各ファイルにより違う文字列）をコピーして、その開いているファイル名の最後（「.拡張子」の直前）に追記（リネーム）させたいのですが、具体的にどういう文字列のスクリプトを書けば良いのかわからず、行き詰まっております。 どうぞご教示ください。 宜しくお願い致します。
以下のような感じで、 Perlから、SQliteのデータベースと、そのテーブルを作成し INSERTさせてみるのを組んでみたのですが うまく行かないようです・・・。 何が原因なのかどうすればうまくいくのか、教えていただけないでしょうか。 よろしく御願いします。 #!/usr/bin/perl use DBI; $dbfilename = "./testdb"; &dbcon; $sth = $db->prepare("INSERT INTO user VALUES(\'1\',\'abc\')"); $sth->execute; $sth->finish; &dbuncon; exit; sub dbuncon { $db->disconnect; } sub dbcon { $makedbflag = '0'; unless (-f $dbfilename) { $makedbflag = "1"; } $db = DBI->connect("dbi:SQLite:dbname=$dbfilename","","",); if($makedbflag eq "1") { &dbmaketable; } } sub dbmaketable { $sql = "CREATE TABLE user (id, name);"; $db->do($sql); }
普段PHPやPealなどを書いているのですが、既存のソースを修正する作業の場合、その差分を表示してくれるようなフリーのソフトを探しています。修正前のバックアップファイルは取ってあるという前提で、良いツールは無いでしょうか？ 出来ればディレクトリ同士の比較なんかが出来れば最高です。 どなたかご存知でしたら宜しくお願いします。
URI.pmのメソッドが失敗します。 #!/usr/bin/perl -w use URI; print(new URI("www.yahoo.co.jp")->host, "\n"); これを実行すると Can't locate object method "host" via package "URI::_generic" at ./try line 3. となります。 メソッド名が変わったのでしょうか。 私の本では確かにhostとなっているのです。
お世話になっております。 一台のＰＣで複数の人が使うため、 アクセスできるサイトに制限をかけたい。 (1)ベーシック認証でないアクセス制限 　理由は「パスワードを保存する」をチェックされてしまうと、 　誰でも閲覧できてしまう。 (2)何もアクセスしず、一定時間が過ぎたら、以降のアクセスを無効にしたい。 　再度、パスワードを要求する。 ＣＧＩを検索しましたが、見つかりませんでした。 ご紹介いただけると幸いです。
Unix系のレンタルサーバでの開発環境についてお伺いします。Unix系ははじめてなので、OSのコマンドも勉強したいし、当面はPerlで、追加モジュールなども使ってプログラミングしてみたいです。どのような条件でサーバを探せばよいでしょうか？　オススメのサーバなど教えていただけると助かります。どうぞよろしくお願いします。
HTTPでページを取得する場合、 ソケットを開いて、HTTP応答を受信するわけですが、 サンプルなどをネットで拾うと、その部分は大体、 while(<SOCKET>){ $s.=$_; } となっていることが多いです。 これって、SOCKETのデータが無くなったら「おしまい」ってことです よね。 そこで、質問なのですが、 極端な話、ソケットを開いた次の瞬間に、サーバーがダウンしてデータが来ないとか、或いは、重くてデータが途切れるとかって場合もあると思うんですけど、 そういった場合は、全くデータが来ないか、しっぽ切れで 終了してしまうのでしょうか？ よろしくお願いします。
簡単な一行伝言を作成していますが、トップページに「sample.js」のログファイルであるjavascritpファイルを読み込んで表示させます。 そこで、Perlによる管理者専用フォームから登録したデータをsample.jsファイルとしてログで書き込む方法がわかりません。 通常テキストファイルなのであれば、 $datafile='./data.txt'; open(FH,">$datafile"); print FH "$in{'name'}"; close(FH); とこんな感じでいいと思いますが、 sample.jsファイル内に document.write("ooooooooo"); document.write("ooooooooo"); document.write("ooooooooo"); ・ ・ ・ ・ とログを残していきたいのですが、どうすればよいでしょうか？ また、参考になるようなＵＲＬやフリーで配布されているようなものがあれば、教えてください
ローカルにおいてある HTML ファイルを読み込ませて、<IMG SRC="sample.gif"> から sample.gif を取得します。 このsample.gifのMD5を取得し、たとえば MD5 が "abcd...xyz" であれば、 (ローカルの別フォルダ)/a/b/abcd...xyz.gif にコピーし、 元の参照を <IMG SRC="a/b/abcd...xyz.gif"> に変換するというスクリプトを書きたいと考えています。 HTML ファイルから sample.gif を取り出す方法、ファイルからMD5を取得する方法について教えていただけないでしょうか。 HTMLのパースなど調べたのですが、特定の属性を書き換える方法は 分かりませんでした。 よろしくお願いいたします。
Windows上でperlを使用して、画像の縦横サイズを取得しようとして います。そのためには、ImageMagickモジュールのインストールが 必要だということを知りました。 そこで、ImageMagickのインストールを試みているのですが、うまく いきません。どなたか詳しい方、ご教授をお願いします。 ■マシン環境 　OS：Windows XP Professional SP2 　Perl Version：5.8.8 ■試したインストール方法 1.ppmからのインストール 　・コマンドプロンプト上でppmをたたくと、Perl Package Managerが 　　別ウィンドウで表示されます。ネット上にあるインストール方法 　　だと、コマンドプロンプト上でImageMagickのインストールをする 　　ようですが、上記のウィンドウが起動されると、コマンドプロン 　　プト上でのキー操作が無効となってしまい、インストールが 　　できません。 　※以前、ppmからのインストールを実施したとき、Perl Package 　　Managerは起動しませんでした。なぜ起動されるようになったのか 　　不明です。そのときは、makeコマンドがない、との表示により 　　インストールをあきらめてしまいました。 2.ImageMagickのDLLをダウンロードしてインストールする方法 　ImageMagickのサイトからImageMagick-6.4.3-Q16-dll.exeをダウン 　ロードして、セットアップを開始した。セットアップは正常に終了 　した。また、環境変数の設定も行い、簡単なテストを行ったのだが、 　エラーが表示される。 　＜テストプログラム＞　※ファイル名：sample.pl 　#!/usr/local/bin/perl 　use strict; 　use Image::Magick; 　my $image=Image::Magick->new; 　$image->Set(size=>'40x200'); 　$image->Read("gradient:#ff0000-#0000ff"); 　$image->Raise('3x3'); 　$image->Rotate(-90); 　$image->Write('temp.png'); 　print "Content-type: image/png\n\n"; 　open(IMG,"temp.png"); binmode(IMG); binmode(STDOUT); print $_ while (<IMG>); 　close(IMG); 　unlink "temp.png"; 　exit; 　＜実行結果＞ 　コマンドプロンプト上に下記が表示されます。 　Can't locate Image/Magick.pm in @INC (@INC contains: 　C:/Perl/site/lib E:/Perl/lib .) at C:\test\sample.pl line 3. 　BEGIN failed--compilation aborted at C:\test\sample.pl line 3. どなたか宜しくお願いします。
メールフォームからメールを送信することについて、 FENICSメール（富士通株式会社）でNet::SMTPを使用してメールを送信しようと考えています。 お問い合せでNet::SMTPでメールを送信する場合、smtp authの認証が必要だとわかりまして、下記のサイトを参考にして組みましたが、 メールが送信されませんでした。 http://d.hatena.ne.jp/yoshifumi1975/20060831/115 … 色々と調べてみた結果、最初の $smtp = Net::SMTP->new('SMTPサーバ', Hello=>"SMTPサーバ"); の文で$smtpに値がなく、サーバーに接続できてませんでした。 参考サイト）http://tech.bayashi.net/pdmemo/sendmailbyperl.html でも、smtp情報はメーラーで問題なく設置できましたので、 サーバー情報、認証には間違いはないと考えられます。 Net::SMTPは使えているのにどうしてsmtpサーバーに接続できないのか わからずにいます。 初歩的で恐縮ですが、ご回答お待ちしております。 よろしくお願いします。
perlで別ドメインのブログのrssファイルを ＨＰに表示させたいと考えています。 こちらはphpですがこれと同じ事を perlでやりたいと考えています。 http://ajax.pgtop.net/category/4527871-1.html しかし、レンタルしているサーバーに LWPライブラリがインストールされておらず LWPを使っていないであろう下記サンプルを試してみたのですが HTTPエラー：500と表示されるだけでした。 http://www.kawa.net/works/perl/feedpp/feedpp.html サーバーではplファイル・cgiファイルを使っている 箇所もあり、それらは機能しているので perlはインストールされているのですが ライブラリ関連はほぼインストールされていない状況だと思います。 ちなみにPHPはインストールされていないので 使えない状況で、おそらく他の言語も厳しい状況です。 他のサンプル、方法などご存知の方 いらっしゃいましたら教えて頂きたいです。 宜しくお願い致します。
サーバー内のファイルを検索するのにKentWebさんのwwwsrch.cgiを利用しています。 # # すべてのファイルをなめ回す # sub search1 { local($dir) = $_[0]; local(@filelist, $file, $filename); opendir(DIR, $dir); @filelist = readdir(DIR); closedir(DIR); foreach $file (@filelist) { if ($file eq ".") { next; } if ($file eq "..") { next; } $filename = "$dir/$file"; if (-d $filename) { if ($recursive_flag) { &search1($filename); } } else { &search2($filename, $dir); } } } # # ファイルの中身を検索する # # 指定していない拡張子のファイルは無視する $suffix = ".html .cgi .pl"; $fname = substr($target, rindex($target, ".")); if ($suffix{$fname} != 1) { return; } ↑の条件に30日以上古いファイルを無視するように改造することはできないでしょうか？ 検索対象ファイルが数十万以上と莫大に増加してきたため、最新のファイルのみ検索対象にできればと考えております。
下記の方法でUTF-8エンコードをしたときに、 コードの英字が大文字になってしまい困っています。 use Encode; $str = "HOGEホゲ" $str =~ s/(\W)/'%' . unpack("H2", $1)/eg; print "$str"; 現状のエンコード後）HOGE%E3%83%9B%E3%82%B2 希望のエンコード後）HOGE%e3%83%9b%e3%82%b2 半角英数字（HOGE）は大文字のままで、 エンコードだけを小文字で書き出す簡単な方法はありますでしょうか。 （小文字でないと受け付けてくれないサイトに飛ばしたいため） 現状は正規表現でAからZまで26行繰り返しています。 $str =~s/\%([A-Z0-9]{1})?A/%$1a/g; ～ $str =~s/\%([A-Z0-9]{1})?Z/%$1z/g; よろしくお願いいたします。
シェルスクリプト（Bash）からmailコマンドでメールを送信する際に、 送信元が自動的に　root になってしまいます。 これを明示的に別のアドレスに指定したいのですが 送信元を指定する方法はあるでしょうか。 送信元を指定するにはphpスクリプトに作り変えるしか方法はないでしょうか。。
CGIプログラミング第2版 P383のサンプル"commute_pie2.cgi"が動きません！！ サンプルどおりのスクリプトを作成したのですが、フォーマットが不正というようなエラーになってしまいます。 エラー箇所を突き止めたので見てください。 エラー内容をお見せしたいため、次の簡易スクリプトを作成しました。 #!/usr/bin/perl use Image::Magick; my($mgk) = new Image::Magick(format => "png"); これを実行すると Exception 410: Invalid attribute (format) at /usr/lib/perl5/site_perl/5.8.0/i386-linux-thread-multi/Image/Magick.pm line 66. というエラーメッセージになります。 おそらくフォーマットとして"png"というリテラル値を指定しているが、このリテラル値が誤っているのではと予想しています。 どなたかImage::Magickの使い方を教えてください！！ 環境はCD3枚組のRed Hat Linux 8をフルインストールしています。
任意のページを取得するために、ＡＳＨさんのスクリプトを使ってい ます。 ところが、どうにも取得できないページがあります。 ブラウザでは見れるのに、このスクリプトでは取得できません。 ダンプをとってみると、404not foundが返却されます。 想像ですが、この場合のアドレスは、「別名」なのでしょうか？ ブラウザでは見られるのだから、なにか方法があると思いますが、 その方法がわかりません。 ASHさんのスクリプトは、 http://ash.jp/perl/socket_http.htm にあります。 たとえば、 http://www.icn.ne.jp/~akatuki/furu0.htm http://www.icn.ne.jp/~furukawa/ は、このスクリプトでは読み取れません。 ここのプロバイダのサーバ上にあるＨＰは、全てそのようです。 また他のＳＰでも、このような所があります（少ないようですけど）。 こうなる理由と、対処方法（読み取る方法）をお願いします。 よろしくお願いします。
現在、手作業でしている以下のことをPerlで全自動化できないかと考えています。 (1)新規見込客が私のホームページに設置した楽メール（Perlで組まれたステップメール）入力フォームから「名前」「生年月日」「メールアドレス」を入力 (2)夜に家に帰ったら楽メールにログインして新規見込み客の有無をチェック (2)私がhttp://cancode.biz/にId,passwordを入力してログイン (3)新規登録画面で新規見込み客を登録 (4)その客に関するPDFをダウンロード (5)楽メールの登録者送信機能からPDFを添付して新規見込み客に送信 新規見込み客が(1)の入力を終えると「登録完了画面」に飛ぶので、 その画面でPerlを起動させて、(2)～(5)を自動的にしたいのです。 結局、Perlでホームページの操作をしたいことになるのですが、 可能でしょうか？どうしたらいいのでしょうか？ このようなルーチンワークが一日30件以上あり、困っています。 ご回答よろしくお願いします。
Perlで1行目に書く実行パスを自動で変更することはできないでしょうか？ 例えば、自分のPCで動かす場合は、 #!c:/Program Files/Perl/bin/perl を有効にし、 ソースをそのままサーバにアップしたら、 #!/usr/bin/perl に切り替わるような記述法があれば、教えて頂けないでしょうか。 宜しくお願い致します。
掲示板に書き込みされる文字列の変換について教えてください。 メッセージ（$form{'msg'}）の中にURLがあり、かつ、そのURLの中に#がある時、そのURLの中の#のみを%23に変換するという条件式は、どのように書けば良いのでしょうか？ 始めたばかりなのですが、条件式を組み立てるのって難しいです。 このど素人に何卒お力をお貸しください。 よろしくお願いします。
GUCIと申します。 ループ変数の変更は、元の値を変えてしまうのでしたっけ？ 元を変えずに変更したい場合に、 my $data_tmp = $data; $data_tmp =~ s/^0+//; としないといけないなんて。 らくだ本読んでも解りませんでした。 どなたか、解説お願いします。 C:\>type T1.pl #!Perl use strict; my @data = qw(001 002 003); print "S1: data is @data\n"; for my $data (@data) { $data =~ s/^0+//; } print "S2: data is @data\n"; __END__ C:\>T1.pl S1: data is 001 002 003 S2: data is 1 2 3
お世話になります。 ハッシュにファイルハンドル、またはFileHandleのインスタンスを格納することはできるのでしょうか？ 初歩的な質問ですみません・・・
ファイルの内容を加工して表示するパールの-pオプションについて インターネットを見ていたら-p0777という記載がありました。 この0777とは何の意味があるのですか。 -pオプションを使うときにいろいろ細かい設定ができるのでしょうか。
通販サイトを作ろうとしています。 ログインにはIDとPASSが必要ですが、ログイン中であることを知るためにログイン成功時にIDとPASSをそのまんまクッキーに記録しています。 その時点でセキュリティは最悪なので、セッションID管理というやつをやろうと思ったのですが、 CGI::Sessionだか何だかの説明ページが全く持って意味不明でしたので それっぽいことを自作しようと思います。 以下の流れのプログラムでセッション管理と同じような事をしていると思うのですが、あっていますか。セッション管理というものがいまいち分かりません。 ・WEBページよりIDとPASSを入力してログイン ↓ ・データベースにアクセスし、正しい情報であれば、 　ランダムに作成した20桁くらいの文字列+IDをクッキーに保存、 　その文字列をデータベースに保存、同時にIPアドレスも保存。 　保存した時間も保存する。 （例：ID＝OSIETE だったら、afkgiornsfshifownsiwOSIETE みたいな文字列になる） ↓ ・ページを移動するたびにクッキーから文字列を取得し 　データベースに保存されているかを調べる。 　同一の文字列および同一のIP、および保存時間が現在時刻の24時間でなければNGとする。 ↓ ・ログアウト時、クッキーに保存された文字列と同じものをデータベースから削除する
Yahoo!ショッピング商品検索APIを利用するために以下のスクリプトを作成しました。 ここから======================================================= #!/usr/bin/perl use LWP::Simple; #WEBサービスのURL $base = "http://shopping.yahooapis.jp/ShoppingWebService/ … #WEBサービスのID $appid = "ここにYahooデベロッパーで取得したアプリIDが入ります"; #XMLを取得 my $category_id_data = get("$base?category_id=1&appid=$appid"); #カテゴリを区切る if($category_id_data){ $category_id_data =~s/\n//g; if($category_id_data =~/<Children>(.+)<\/Children>/){@category_id_items = split(/<\/Child>/,$1);} } print "Content-type: text/html; charset=UTF-8\n\n"; #カテゴリ名をループ foreach my $category_id_item ( @category_id_items ){ if($category_id_item=~/<Short>(.+?)<\/Short>/) {$category_Name=$1;} print "$category_Name<br />\n"; } exit 0; ここまで================================================ ■my $category_id_dataでgetしたXMLのサンプル http://shopping.yahooapis.jp/ShoppingWebService/ … 結果を表示すると結果を20件表示するはずなんですが、 21件目の空のリストが書き出されてしまいます。 このスクリプトを他のWEBサービスで使用すると、 きちんと20件表示されました。 原因は何かわかりますでしょうか。 よろしくお願いいたします。
Windowsのフォルダに入っているファイル名をFedora Coreに入ってるpostgresのtableに入れたいのですが（perlで実行）文字の変換の仕方がわからず以下のメッセージが出て止まってしまいます。 DBD::PgPP::st execute failed: ERROR: invalid byte sequence for encoding "EUC_JP": 0x96d8 良い方法があれば教えてください。 **************************************** $query0 = 'insert into aaatbl (filename) values("$aaa"); $sth = $dbh->prepare("$query0"); $sth->execute; $sth->finish; （$query0　が　S-JISでaaatblはECU-JP）
「人の苗字＋改行」がたくさん入力されているname.txtと 「苗字が登場する会話文」がたくさん入力されているconv.txtの 二つのファイルがあります。 【name.txt】 鈴木 田中 佐藤 ・・・ 【conv.txt】 昨日の山田さんの話によれば、明日は佐藤さんが担当だそうだ。 京都の中山君が来たときに荷物を届けてほしい。 ・・・ これらname.txtのそれぞれが、conv.txt全体で何回出てきたかを求めるprelのプログラムを作りたいのですが、どのようにしたら良いでしょうか。 アウトプットは 鈴木　256 田中　982 佐藤　157 ・・・ となるようにしたいと思っています。 皆さまのお知恵をお貸しくださいませ。
フリーの改造OKなCGIを改造していますが、上手く行きません。 <textarea name=com cols="70" rows="10" wrap="OFF"></textarea> 上記のタグで入力したテキストの末尾に、自動で改行タグを付けて $com に渡してデータ保存をしたいのですが、なかなか上手く行き ません。どの様な記述をすればよいでしょうか？ ご指導宜しくお願い致します。
いつもお世話になっております。 Perlでメール送信をしたいのですが、 HELOコマンドを送信するのですが、接続に失敗します。 何故失敗するのが、原因が分かりません。 何を調査したらよいのか、 ご存知の方、ご教授を頂けますでしょうか。 (プログラム) ファイル名：mail.cgi 一部抜粋 # ------------------------------------------------------- # # SOCKETの作成 # ------------------------------------------------------- # # PORT番号を取得します $port = getservbyname('smtp','tcp'); # PORT、IPで構造体を作成する $struct = sockaddr_in($port,inet_aton($server)); # ソケットの生成 socket(SH, PF_INET, SOCK_STREAM, 0) || die("ソケットの生成失敗 $!") ; # 接続 connect(SH, $struct ) || die("接続失敗 $!") ; # ソケットのバッファリングは行わない select(SH); $| = 1; select(STDOUT); $respons = <SH> ; unless($respons =~ /^220/) { close(SH); die("接続失敗 $!") ; } # ------------------------------------------------------- # # コマンドの送信 # ------------------------------------------------------- # # -------- HELOコマンドの送信とレスポンスの確認 --------- # # コマンドの作成、送信 $command = "HELO $server\n"; print SH $command ; # レスポンスの受信、確認 $respons = <SH> ; &decode(\$respons) ; # レスポンスの確認 unless($respons =~ /^250/){ close(SH); die("HELOコマンド失敗 $!") ; ←ログをみる限りココに着ます。 } (err_log) [Wed Aug 27 12:25:33 2008] [error] [client XXX.XXX.XXX.XXX] HELOコマンド失敗 Illegal seek at /XXX/mail.cgi line 149., プログラムの149行目は、die("HELOコマンド失敗 $!") の個所です。
#! c:/perl/bin/perl 　use DBI; $user = 'root'; $passwd = 'パスワード'; $db = DBI->connect('DBI:mysql:db1:localhost', $user, $passwd); $sth = $db->prepare("INSERT INTO bunrui VALUES (1,'1st','memo')"); $sth->execute; $sth->finish; $db->disconnect; perlからmysql二接続するためＤＢＩをインストールして、上のようなサンプルコードを実行してみたのですが　Internal Server Error になってしまいます。どこかコードが違っているのでしょうか？
Attempt to free unreferenced scalar とは? http://oshiete1.goo.ne.jp/qa4237453.html の続きです。 とりあえず、下に現状で分かる最小限の再現性があるスクリプトを 書いておきます。 print &opentmpl("body"); print &opentmpl('footer'); # これがない場合はエラーにならない sub opentmpl { my $fn = shift; my $VAR = shift || {}; my $file = &{$fn}(); &regex(\$file, $VAR, '__([A-Z_\d]+?(\[\d+?\])?)__', ['$VAR->{"%s"}', '$1']); &regex(\$file, $VAR, '&{(.+?)}&', ['%s', '$1']); return $file; return undef; } sub regex { my $str = shift; my $VAR = shift; my $pattern = shift; my $replace = shift; $$str =~ s/((([^\n]*?)$pattern(?=.*))+(\n?))/&func($1, $VAR, $pattern, @$replace)/egs; return; } sub func { my $str = shift; my $VAR = shift; my $pattern = shift; my $buf = shift; $str =~ s/$pattern/$@ = ''; $_ = eval(sprintf($buf, map { eval($_); } @_)); $@ ? $@ : $_/egs; if($str =~ /^\s*\n?$/s) { return; } return $str; } sub body { print "Content-type: text/plain; charset=shift_jis\n\n"; return <<'HTML'; &{ return &opentmpl('table', {'TEST' => 'test'}); }& HTML } sub table { return <<'HTML'; __TEST__ HTML } sub footer { return <<'HTML'; test HTML } 調べてみた限りではActivePerl for Win32以外のPerlでも同様のよう です。 (Linux上でも同様のようです) 5.8.8ではエラーになりますが、5.10.xではエラーにならないようです。 (同じ環境において5.8.8では再現し、5.10.0にバージョンアップすると 再現しなくなり、再度5.8.8にバージョンダウンすると再現します) 本番機の環境が5.8.8で勝手にバージョンアップなどができないため、 5.8.8で正常に動作するようにするにはどうしたらよいでしょうか。 結構、無駄も多いと思いますので全く同じ動作をしながらより効率の いい書き方ができたらいいなと思います。 (なお、実際には使用しているけど上記では使用していない部分が 含まれていてその部分がない場合もエラーにならないようです)
CGIプログラミング第2版を読みながらCGIを学習しています。 11章 "ステートの保持"の11.1 クエリ文字列とパス情報の例題ではまっております。。。 これはURLに識別子を埋め込んでユーザーを追跡するという、超ハイテクなスクリプトです。 とりあえず、記載されているとおりにスクリプトを作成してHTMLファイルも用意しました。 HTMLファイルの内容は超簡単で <HTML><HEAD><TITLE>store</TITLE></HEAD><BODY><A href="abc.html">abc</A></BODY></HTML> です。 これでユーザーがhttp://ウェブサーバー/store/下のファイルをリクエストすると、自動的にスクリプトが実行され、カスタマイズされたHTMLファイルが返されるという仕様です。 実際に返されたHTMLファイルを見てみると <HTML><HEAD><TITLE>store</title></head><BODY> なんと<A>タグ以降がばっさり切り落とされていました^^ しかもタグは全部大文字で書いたのに一部小文字になっていたりと、意味不明な状況です。 たぶんHTML::Parserなるものが、いろいろHTMLファイルを操作しているとは思うのですが、今回返されたHTMLはどう見ても壊れているような・・・。
cool&coolさんのDataBaseFactoryを利用させていただいています。 http://www.coolandcool.net/pcg/dbf/index.html このプログラムに手を加えて指定した日付になったら登録したデータを削除したいのですが、どのように手を加えれば良いのか分かりません。 作りたいものはイベントを登録し、そのイベントが終了したら削除というものです。 【現在の登録項目】 年月日：20080913（半角8桁で入力。イベント日時の並び替えに使用しています） 月：（コンボボックスから選択） 日：（コンボボックスから選択） 曜日：（コンボボックスから選択） イベントタイトル：入力 この年月日を使って現在の日と比較して・・・という感じでやればいいのかなと思うのですが、実際どこを書き換えれば良いのかお手上げ状態です。 よろしくお願いいたします。
ホスト情報からIPが逆引きできなかったり、 逆にIPからホストが逆引きできないホストやIPを制限するには どのようにperlで記述すればいいのでしょうか？
Perlで、サーバー上に保存してある画像ファイル（tempというフォルダーに保存してあるjpg形式の画像）を入力する場合、どうすればいいのでしょうか？ 単純に open(IN, "< $filename"); binmode(IN); fille_data{'temp1'} = <IN>; close(IN); ではだめですよね？
掲示板形式のCGIをダウンロードして、ど素人ですが自分なりに改造に挑戦しています。 表題の通り、TEXTAREAにあらかじめ文字を表示させたいのですが、うまくいきません。 <TEXTAREA rows=$row cols=$col name=$name_comment $css_style>$c_comment</TEXTAREA>\n"; 検索エンジンでやり方を検索してみても <TEXTAREA>ここに入力しておく</TEXTAREA> のやり方にしかたどり着けず・・・。 できれば、 (1) (2) (3) (4) (5) このように複数行をあらかじめ表示させたいと思っています。 どなたかご教授いただけると助かります。
フォームを何もせずに入力するとエラーが次の画面ではなく、そのまま表示されています。またフォームの送り先・確認も全て shiryou.cgiに統一されています。 いくらファイル名で検索しても元ソースがでないので、 どなたかご存知の方、教えていただけると嬉しいです。 http://www.jaefcet.org/cgi/shiryou.cgi https://www.e-nichii.net/cgi-bin/usr/shiryou/shi … https://www.menkyo.co.jp/cgi-bin/web/shiryou.cgi http://www.sinnihon-co.jp/cgi-bin/shiryou.cgi https://www.5012.jp/athoken/aflac/siryo.html よろしくおねがいいたします
プロキシの制限を以下のように記述したのですが、 プロキシを制限する上で加えた方がいい記述や 削除した方がいい環境変数などありますか？ 助言いただきたくお願いいたします。 if($ENV{'HTTP_VIA'}||$ENV{'HTTP_FORWARDED'}||$ENV{'HTTP_PROXY_CONNECTION'}||$ENV{'HTTP_CACHE_INFO'}||$ENV{'HTTP_XROXY_CONNECTION'}||$ENV{'HTTP_XONNECTION'}||$ENV{'HTTP_X_FORWARDED_FOR'}){ unless ($ENV{'REMOTE_HOST'} =~ /docomo/){#ドコモの携帯は除外する push(@error, 'プロキシ経由の利用は制限しております。'); } }
お世話になります。正規表現の質問です。 \w に当たる文字とハイフンに合致するが、少なくとも一文字はアルファベット（a-z）またはハイフン（-）が含まれていなければならない（つまり、数字だけの文字列は合致しない） という正規表現はどうあらわせばよいでしょうか。 以上、よろしくお願いします。
Perlで書かれたショッピングカートCGIを使用していて、 注文があると、注文内容の控えメールを 自動でお客様に送信するようになっているのですが、 そこに振込先の銀行口座番号を記載しています。 ----------------------- イーバンク　 　ワルツ支店 　（普）******* 　ノビ　ノビタ ----------------------- 上のように記載した場合は文字化けしないのですが、 下のように記載するとハイフンを含む前半部分の数字が文字化けします。 （*は半角の数字です） ----------------------- ゆうちょ銀行 　*****-****** 　ノビ　ノビタ ----------------------- スクリプトはShift-JISで書かれています。 口座番号を記載しているのは、 $mailbody .= <<EOD; この間です。 EOD 文字化けすると困る箇所なので、原因と解決方法をご存知の方がいらっしゃいましたら 教えていただけますと助かります。
WinXPにApache2.0とperl5.8を入れて動作させているのですが、perlCGIをUTF-8で書くと500エラーになり表示することができません。 該当のソースは #!/usr/bin/perl package HTML; sub HEADER{ print "Content-type: text/html\n\n"; print << "-----END-----"; <!DOCTYPE HTML PUBLIC -//IETF//DTD HTML//EN> <html><head> <meta http-equiv="Content-Type" content="text/html; charset=utf8"> <META HTTP-EQUIV="Pragma" CONTENT="no-cache"> <title>Test Program</title></head> <body>\n -----END----- } sub FOOTER{ print "</body></html>"; } &HTML::HEADER; print"テスト"; &HTML::FOOTER; 上と同じものをsjisで保存すると、こちらは正常に動作します。打って変わってこれをUTF-8で保存するとエラーが起こってしまいます。 error.logには C:/Apache2/htdocs/script/base.pl is not executable; ensure interpreted scripts have "#!" first line (9)Bad file descriptor: don't know how to spawn child process: C:/Apache2/htdocs/script/base.pl と記録されていて、これを頼りにググってみましたが有効そうな情報を見つけられませんでしたので、どうか原因と解決策を教えてください。
CYANDY CGI（ttp://www.candy-cgi.com/）で配布されている ランキング/Ranking Type1についての質問です。 配布ページ ttp://www.candy-cgi.com/perl/Ranking_Type1.html http://www.xx.com/xx.php?mode=xx&xx_id=123456 上記のような【xx_id=12456の数字のみが変化するURL】を対象に、 Ranking Type1をDLし設置したのですが、 どのidページからアクセスしても 【http://www.xx.com/xx.php?mode=xx】という 同一のアクセスになってしまいます。 これを、【http://www.xx.net/xx.php?mode=xx&xx_id=123456】として カウントするようには出来ないでしょうか？ 改造OKとのことでしたので、こちらに投稿させて頂きました。 宜しくお願い致します。
ASPで作成したPDFバイナリデータをOracleにBLOB型で格納して、Perlからoo4oで参照する処理を作成しております。 PerlからBLOBデータを取得することはできたのですが、ところどころコードが変わっており、PDFデータとして認識されません。 格納したPDFデータをASPでは正常に参照できているため、格納されているデータに問題はないと思っております。 なんとか情報を集めて下記コードを作成しましたが、ご指摘などありましたら、宜しくお願いいたします。また、別の方法などありましたら教えてください。 [Perlソース（主要部分抜き出し）] #セッション作成 $objSs=Win32::OLE->new('OracleInProcServer.XOraSession'); #DB接続 $objDb=$objSs->OpenDatabase($strOraSid,$strOraIdPwd,0); #PDFデータ取得SQL作成 $strSQL="SELECT PDF_DATA FROM PDF_DATA_WRK WHERE SID = '$strID'"; #ダイナセット取得 $objDs=$objDb->CreateDynaset($strSQL,0); #GetChunkでPDFデータ取得 my $chunkSize=50000; my $sPos=0; my $wk_buf=""; my $getSize=0; my $buf_pdf=""; do{ $wk_buf = $objDs->{Fields}->Item('PDF_DATA')->GetChunk($sPos,$chunkSize); $getSize = length($wk_buf); $buf_pdf .= $wk_buf; $sPos += $getSize; } until ($getSize < $chunkSize); $objDs->Close(); [ここまで]
ハッシュの配列を配列の数の多い順に表示する場合で配列の数が同じの場合の最初に表示される配列の数字につきまして この配列の数が同じである場合の表示順序を意図した順番にする事は可能でございますか？ この意図した順番と申しますのは、小さい数字を先に表示するのではなく下記の@array2の配列値の並んでいる順や別途配列に0～9の数字を適当に入れておきにそれを参考に評価するという形を希望しており模索中なのですが、まずこの事につきまして可能か不可能かをご教授願いたいのと、もし可能でしたらどうか解決に至る先輩方のお知恵をお借り出来ませんでしょうか よろしくお願い致します。 #!/usr/bin/perl use Tie::IxHash; @array0_n=('a','b','c','d'); @array1_n=('e','f','g'); @array2_n=('h','i'); @array3_n=('j'); @array4_n=(); @array5_n=(); @array6_n=('k'); @array7_n=('l','n'); @array8_n=('m','o','p'); @array9_n=('q','r','s','t'); %array1 = ( '0' => [ (@array0_n) ], '1' => [ (@array1_n) ], '2' => [ (@array2_n) ], '3' => [ (@array3_n) ], '4' => [ (@array4_n) ], '5' => [ (@array5_n) ], '6' => [ (@array6_n) ], '7' => [ (@array7_n) ], '8' => [ (@array8_n) ], '9' => [ (@array9_n) ], ); #配列の数の多い順に並び替え my @array2 =reverse sort { scalar @{$array1{$b}} <=> scalar @{$array1{$a}} or $a <=> $b } keys %array1; @array9_n2=('a2','b2','c2','d2'); @array1_n2=('e2','f2','g2'); @array2_n2=('h2','i2'); @array3_n2=('j2'); @array4_n2=(); @array5_n2=(); @array6_n2=('k2'); @array7_n2=('l2','n2'); @array8_n2=('m2','o2','p2'); @array0_n2=('q2','r2','s2','t2'); tie %TmpList, 'Tie::IxHash'; #@array2を元に更に動的にハッシュ内に配列を作成 foreach(@array2){ my $x="array$_\_n2"; $TmpList{$_}=[(@$x)]; print "$_,$#{$x},@$x<br>\n"; } print "1-end\n"; while ( ( $key , $value ) = each %TmpList ){ print "key:$key value:@$value\n" ; } print "2-end\n"; my @array3 = sort { scalar @{$TmpList{$b}} <=> scalar @{$TmpList{$a}} or $a <=> $b } keys %TmpList; #Tie::IxHashモジュールで表示する際の順番を固定出来るかテスト foreach(@array3){ my $x="array$_\_n2"; $TmpList2{$_}=[(@$x)]; print "$_,$#{$x},@$x<br>\n"; } print "3-end\n"; __END__;
この度はよろしくお願いいたします。 題名のとおりで 次のサイト様　ttp://www.akamon-kai.co.jp/yomimono/kai/kai.html の計算方法（フェラーリの公式）を用いて４次方程式を 代数的に解こうとしたのですが初めてプログラムをしたに等しいので うまく解が出てきてくれません。 見にくいとは思いますがプログラムを以下に示しますので どこを直せばよいかの修正方法・もしくは他の方法がありましたらどうかよろしくお願いします。 use Math::Complex; #　定数の入力 print "aの値は？\n"; $a = <STDIN>; print "bの値は？\n"; $b = <STDIN>; print "cの値は？\n"; $c = <STDIN>; print "dの値は？\n"; $d = <STDIN>; print "eの値は？\n"; $e = <STDIN>; #　ω・ｐ1～ｐ3の式 $j = (-1 + sqrt(-3))/2; $k = (-1 - sqrt(-3))/2; $f = -8*$a*$c+3*$b*$b; $g = -72*$a*$c*$e+27*$a*$d*$d+27*$b*$b*$e-9*$b*$c*$d+2*$c*$c*$c; $o = -256*$a*$a*$a*$e*$e*$e+192*$a*$a*$b*$d*$e*$e+128*$a*$a*$c*$c*$e*$e-144*$a*$a*$c*$d*$d*$e; $p = 27*$a*$a*$d*$d*$d*$d-144*$a*$b*$b*$c*$e*$e+6*$a*$b*$b*$d*$d*$e+80*$a*$b*$c*$c*$d*$e; $q = -18*$a*$b*$c*$d*$d*$d-16*$a*$c*$c*$c*$c*$e+4*$a*$c*$c*$c*$d*$d+27*$b*$b*$b*$b*$e*$e; $r = -18*$b*$b*$b*$c*$d*$e+4*$b*$b*$b*$d*$d*$d+4*$b*$b*$c*$c*$c*$e-$b*$b*$c*$c*$d*$d; $h = $o + $p + $q + $r; # ｘの３乗根を指数対数で表した式 $s = exp(log($g+3*sqrt(3*$h)/3)); $t = exp(log($g-3*sqrt(3*$h)/3)); #　解 $x1 = 1/(12*$a)*(-3*$b+sqrt(3*($f+2*$a*($s+$t)))+sqrt(3*($f+2*$a*($j*$s+$k*$t)))+sqrt(3*($f+2*$a*($k*$s+$j*$t)))); $x2 = 1/(12*$a)*(-3*$b+sqrt(3*($f+2*$a*($s+$t)))-sqrt(3*($f+2*$a*($j*$s+$k*$t)))-sqrt(3*($f+2*$a*($k*$s+$j*$t)))); $x3 = 1/(12*$a)*(-3*$b-sqrt(3*($f+2*$a*($s+$t)))+sqrt(3*($f+2*$a*($j*$s+$k*$t)))-sqrt(3*($f+2*$a*($k*$s+$j*$t)))); $x4 = 1/(12*$a)*(-3*$b-sqrt(3*($f+2*$a*($s+$t)))-sqrt(3*($f+2*$a*($j*$s+$k*$t)))+sqrt(3*($f+2*$a*($k*$s+$j*$t)))); # 解が成立する時の条件 if($s*$t == 4*(12*$a*$e-3*$b*$d+$c*$c) , sqrt(3*($f+2*$a*($s+$t)))*sqrt(3*($f+2*$a*($j*$s+$k*$t)))*sqrt(3*($f+2*$a*($k*$s+$j*$t))) == 27*(-8*$a*$a*$d+4*$a*$b*$c-$b*$b*$b )){ print $x1 , "\n"; print $x2 , "\n"; print $x3 , "\n"; print $x4 , "\n"; } else{break;}
現在perlを勉強中です。 質問ですが、例えばＡとＢというページが表示されているとします。 Ａの更新ボタンを押すとＢのページが更新されるという方法を教えて下さい。
実行環境がなく困っています・・ Perlで以下の正規表現はマッチするでしょうか？ if("EUC-JP" =~ m|EUC|i ) { print "match"; }
#お世話になります。最終的には、下記のように配列の順番にハッシュを作成したいのですが、ご教授願えませんでしょうか #!/usr/bin/perl #想定される配列 @array=(0,2,4,6,8,1,3,5,7,9); #下記が最終的に動的に作成したいハッシュの形です。 %List = ( '0' => [ (@array0_n) ], '2' => [ (@array2_n) ], '4' => [ (@array4_n) ], '6' => [ (@array6_n) ], '8' => [ (@array8_n) ], '1' => [ (@array1_n) ], '3' => [ (@array3_n) ], '5' => [ (@array5_n) ], '7' => [ (@array7_n) ], '9' => [ (@array9_n) ], ); $a='array'; $n='_n'; foreach (@array){ #試行錯誤中... print "\@{${a}[$_]{$n}}=@{${a}[$_]{$n}}"; } __END__; お忙しいかとは存じますが、よろしくお願いいたします。
あるCGIを開発しているのですが動作確認してみたところ Attempt to free unreferenced scalar: SV 0xXXXXXXX, Perl interpreter: 0xXXXXXX at XXX.cgi line XX. のようなエラーがでるようになりました。 調べてみると http://perldoc.jp/docs/perl/5.6.1/perldiag.pod > (W) Perl がスカラの参照カウントをデクリメントしようとして、0 になるかを見たところ、既に 0 になっていることがわかりました。これは、既に解放されているべきものであり、実際は、おそらく、解放されたものでしょう。これは、SvREFCNT_dec() が必要以上に呼ばれたか、SvREFCNT_inc() が必要なときに呼ばれなかったか、SV が消滅すべきで無いときに消滅してしまったか、メモリ異常になったことが考えられます。 と書いてあるのですが意味が分かりません。 どなたか主にこのエラーが発生する具体的な要因や解決方法などを 教えていただけないでしょうか。 なお、ローカルの環境(04WebServer+Active Perl v5.10.0 build 1002) では正常に動作するのに本番機(IIS+Active Perl v5.8.8 build 817)で このような現象がでています。 エラーのでている部分のスクリプトは申し訳ありませんが事情で 提示できないのであくまでこういう時に発生するというような情報と 解決策があるだけでよろしいです。 他に必要な情報があれば書いていただいたことはなるべく調べて回答 するようにします(ただし調べきれない場合もあると思います)。 ただ、返事の方が動作確認できない状態になるため1週間後辺りに なります。 よろしくお願いします。
perl v5.10.0 built for i386-linux-thread-multi OS: Fedora 9 (Linux localhost.localdomain 2.6.25.11-97.fc9.i686 #1 SMP Mon Jul 21 01:31:09 EDT 2008 i686 athlon i386 GNU/Linux) 巨大なテキストファイルの最終行を効率良く取得する方法を探しています。 検索を駆使して 6 日 6 晩試行錯誤したのですが、遂に見付けられなかった為、此所で質問させて頂きます。 私が知っている方法は以下の 3 つですが、何れも環境に依存するか、或いは効率が悪い等の理由で不完全です。 ---------------- #!/usr/bin/perl my $filename = './47GiB.txt'; my $file; # 1. print `tail -n 1 $filename`; # 2. open $file, $filename; print +(<$file>)[- 1]; # print pop @{[<$file>]}; close $file; # 3. open $file, $filename; my $pos = 0; while (<$file>) { $pos = tell $file unless eof $file; } seek $file, $pos, 0; print <$file>; close $file; ---------------- tail コマンドの様に、瞬時に最終行を読み出す方法は無いのでしょうか ? 御回答宜しくお願いします。
検索したのですが、うまく当てはまりそうなものが見つからなかったので、質問させてください。 ページAのhtmlソースの一部（tableタグで囲まれた10行程度のソースです）をページBのトップに表示・連動させたいのです。 iframeで引っ張ってこようと思ったのですが、それでは一部だけ表示させることができず、困っています。 なにか、プログラムなど使えば出来るのでしょうか。 素人で説明が分かりづらいと思いますが、助けていただければと思います。 よろしくお願いいたします。
PerlのLWP::UserAgentを使った接続で，エラーが生じてしまいます． ローカルからなら期待通りにページ内容を取得できるのですが，サーバに配置してブラウザからアクセスするとInternal Server Errorとなります． プロキシは使っていません．ファイアウォールやセキュリティソフトを切ってもエラーが生じてしまいます． 対象URL（下のコードではhttp://wikipedia.simpleapi.net/api?keyword=YouTu …）を変えても同じ結果になります． 理由がわかる方がいらっしゃればご教授願います． CGIにPerl5，サーバにApache Tomcat 5.5を利用しています． エラー内容とコードは下のようになっています． エラー内容 「500 Can't connect to wikipedia.simpleapi.net:80 (Bad hostname 'wikipedia.simpleapi.net')」 コード #!/usr/local/bin/perl use LWP::UserAgent; print "Content-type: text/plain\n\n"; my $ua = LWP::UserAgent->new; $ua->agent("Mozilla/5.0"); my $req = HTTP::Request->new(GET => "http://wikipedia.simpleapi.net/api?keyword=YouTu …); my $res = $ua->request($req); $res = $ua->request($req); my $content = $res->content; print $content; exit;
お世話になります。 二桁の数字からなる配列数１０個内に00がある場合、十の位と一の位をそれぞれ取り出すようにテスト中なのですが、配列内に00がある場合、十の位と一の位の数字がコピーされてしまうようです。 #!/usr/bin/perl @Array="10<>78<>51<>78<>00<>72<>43<>82<>65<>29<>"; foreach$i(0..$#Array){ @Mtmp=split(/<>/,$Array[$i]); } foreach$i(0..$#Mtmp){ ($M_old_9,$M_old_8,$M_old_7,$M_old_6,$M_old_5,$M_old_4,$M_old_3,$M_old_2,$M_old_1,$M_old_0)=split(/<>/,$Mtmp[$i]); # if($Mtmp[$i] != ''){ $M_n = substr ("$Mtmp[$i]", -2);#■二桁のの数字 $M_t10=$M_n; $M_t1 = substr ("$M_t10", -1 , 1);#■一の位を取り出し chop$M_t10; #■十の位を取り出し $acount++; # } print "No.$i $Mtmp[$i]\n"; $M_yosou++; $M_old_9=$M_old_8; $M_old_8=$M_old_7; $M_old_7=$M_old_6; $M_old_6=$M_old_5; $M_old_5=$M_old_4; $M_old_4=$M_old_3; $M_old_3=$M_old_2; $M_old_2=$M_old_1; $M_old_1=$M_old_0; $M_old_0=$M_n;#■二桁のの数字 $M_old_n9_10=$M_old_n8_10; $M_old_n8_10=$M_old_n7_10; $M_old_n7_10=$M_old_n6_10; $M_old_n6_10=$M_old_n5_10; $M_old_n5_10=$M_old_n4_10; $M_old_n4_10=$M_old_n3_10; $M_old_n3_10=$M_old_n2_10; $M_old_n2_10=$M_old_n1_10; $M_old_n1_10=$M_old_n0_10; $M_old_n0_10=$M_t10;#■十の位 $M_old_n9_1=$M_old_n8_1; $M_old_n8_1=$M_old_n7_1; $M_old_n7_1=$M_old_n6_1; $M_old_n6_1=$M_old_n5_1; $M_old_n5_1=$M_old_n4_1; $M_old_n4_1=$M_old_n3_1; $M_old_n3_1=$M_old_n2_1; $M_old_n2_1=$M_old_n1_1; $M_old_n1_1=$M_old_n0_1; $M_old_n0_1=$M_t1;#■一の位 } print "\$acount=$acount\n<br>\@Mtmp=@Mtmp \n<br>\$M_n=$M_n \n<br>\$M_t10=$M_t10 \n<br>\$M_t1=$M_t1 \n<br>\$M_old_9=$M_old_9\n<br>\$M_old_8=$M_old_8\n<br>\$M_old_7=$M_old_7\n<br>\$M_old_6=$M_old_6\n<br>\$M_old_5=$M_old_5\n<br>\$M_old_4=$M_old_4\n<br>\$M_old_3=$M_old_3\n<br>\$M_old_2=$M_old_2\n<br>\$M_old_1=$M_old_1\n<br>\$M_old_0=$M_old_0\n<br>\$M_old_n9_10=$M_old_n9_10\n<br>\$M_old_n8_10=$M_old_n8_10\n<br>\$M_old_n7_10=$M_old_n7_10\n<br>\$M_old_n6_10=$M_old_n6_10\n<br>\$M_old_n5_10=$M_old_n5_10\n<br>\$M_old_n4_10=$M_old_n4_10\n<br>\$M_old_n3_10=$M_old_n3_10\n<br>\$M_old_n2_10=$M_old_n2_10\n<br>\$M_old_n1_10=$M_old_n1_10\n<br>\$M_old_n0_10=$M_old_n0_10\n<br>\$M_old_n9_1=$M_old_n9_1\n<br>\$M_old_n8_1=$M_old_n8_1\n<br>\$M_old_n7_1=$M_old_n7_1\n<br>\$M_old_n6_1=$M_old_n6_1\n<br>\$M_old_n5_1=$M_old_n5_1\n<br>\$M_old_n4_1=$M_old_n4_1\n<br>\$M_old_n3_1=$M_old_n3_1\n<br>\$M_old_n2_1=$M_old_n2_1\n<br>\$M_old_n1_1=$M_old_n1_1\n<br>\$M_old_n0_1=$M_old_n0_1\n<br><br>"; __END__; 上記の実行結果は # perl test3.cgi No.0 10 No.1 78 No.2 51 No.3 78 No.4 00 No.5 72 No.6 43 No.7 82 No.8 65 No.9 29 $acount=10 <br>@Mtmp=10 78 51 78 00 72 43 82 65 29 <br>$M_n=29 <br>$M_t10=2 <br>$M_t1=9 <br>$M_old_9= <br>$M_old_8= <br>$M_old_7= <br>$M_old_6= <br>$M_old_5= <br>$M_old_4= <br>$M_old_3= <br>$M_old_2= <br>$M_old_1= <br>$M_old_0=29 <br>$M_old_n9_10=1 <br>$M_old_n8_10=7 <br>$M_old_n7_10=5 <br>$M_old_n6_10=7 <br>$M_old_n5_10=0 <br>$M_old_n4_10=7 <br>$M_old_n3_10=4 <br>$M_old_n2_10=8 <br>$M_old_n1_10=6 <br>$M_old_n0_10=2 <br>$M_old_n9_1=0 <br>$M_old_n8_1=8 <br>$M_old_n7_1=1 <br>$M_old_n6_1=8 <br>$M_old_n5_1=0 <br>$M_old_n4_1=2 <br>$M_old_n3_1=3 <br>$M_old_n2_1=2 <br>$M_old_n1_1=5 <br>$M_old_n0_1=9 <br><br> なのですが、上記の00を取り出した部分がなぜか十の位と一の位どちらもコピーされてしまいます。 これはなぜこのような症状がおきるのでしょうか。また00の際も十の位と一の位それぞれ0を取り出すにはどのようにすれば宜しいでしょうか。 ２．下記の $M_old_9= ... $M_old_0= の所が二桁の数字が順次展開されないのは何故なのでしょうか。 お忙しいかとは存じますが、よろしくお願い致します。
最近Linuxをはじめたばかりの初心者です。 Fedora9上でHDD録画環境を構築しようとしておりまして、 その過程でXMLTVのインストールでつまづいてしまいました。 まず、XMLTVのインストールに必要なperlモジュールの組み込みを行っていた際に、Tk::TableMatrixというモジュールのインストールだけがなぜかうまくいきません。 試した方法としましては、 ・CPAN経由で # perl -MCPAN -e 'install Tk::TableMatrix' ・yum install ・cpan2rpm 最終的にはCPANからファイルをダウンロードして解凍して、 # perl Makefile.PL でやってみたのですが、 ### Note: 'Building Outside of Tk itself' Messages are Expected Here #### /usr/bin/perl is installed in /usr/lib/perl5/5.10.0/i386-linux-thread-multi okay PPM for perl5.010000 Test Compiling config/signedchar.c Test Compile/Run config/unsigned.c Test Compiling config/Ksprintf.c Test Compiling -DSPRINTF_RETURN_CHAR config/Ksprintf.c Test Compiling config/tod.c Test Compiling -DTIMEOFDAY_TZ config/tod.c Test Compiling -DTIMEOFDAY_NO_TZ config/tod.c Test Compiling -DTIMEOFDAY_DOTS config/tod.c Problem gettimeofday() Using -L/usr/lib to find /usr/lib/libX11.so.6.2.0 Cannot find X include files via /usr/include Cannot find X include files anywhere at ./myConfig line 315. Compilation failed in require at Makefile.PL line 19. BEGIN failed--compilation aborted at Makefile.PL line 23. と表示され、makeファイルが生成されないようです。 とりあえず、いろいろ調べたところXMLTV側では、 Tk::TableMatrix は tv_check 実行時に必要とのことらしいので、 tc_checkはインストールせずにXMLTVのインストールを続行したところ、 Checking if your kit is complete... Looks good bad makefile line: ' $(NOECHO) $(NOOP)' at Makefile.PL line 892. と、なり、やはりmakeファイルが作られません。。。 ここまでの行程では特にこのようなことはなかったのですが、 なにかまずいことをしてしまったのでしょうか？ 上記の現象について、どなたかアドバイスいただけないでしょうか。 長文失礼しました。 よろしくお願いいたします。
とある既存プログラムに機能追加したいのですが上手くいきません。 ハッシュだとは思うのですが、%だったり$だったりしてよくわからなくなってしまいました。 どこがおかしいか教えていただけないでしょうか。 ＜概要＞ もともとあった(1)と(3)の処理の間に、(2)を行う ＜ソース＞ (1)DBから1レコードを取得する $sql = "select * from tenpo where id=5;"; $sth = $dbh->prepare($sql); $sth->execute(); $shop = $sth->fetchrow_hashref(); (2)別TABLEから値を取得し、(1)に追加する $sql = "select todoufuken from area where id=5;"; $sth = $dbh->prepare($sql); $sth->execute(); @todoufuken= $sth->fetchrow_array; $shop{place} = $todoufuken[0]; (3)$shopの情報をサブルーチンに渡す ソース略
はじめまして、今回初めて質問させていただきます。 今、perlでAとBという2つのCSVファイルを比較して、マッチしない箇所がある場合はAの情報がBに上書きされるというスクリプトを作成しようとしています。 OPEN関数と比較演算子を利用するのはわかっているのですが、上書きさせる方法がわかりません．．． ネットで調べたりしたのですが、参考になるHPがなかなか見つからなかったので、こちらに質問させていただきました。 サンプルとなるプログラムやHP等を教えていただければ、勉強になりますのでとても助かります。 よろしくお願いします。 追記 Bのcsvファイルには住所録情報が格納されておりまして、AのcsvファイルにはBの住所録情報の中から変更箇所がある新しい住所録情報が格納されております。
禁止ワードを設定して、その禁止ワードの一つと投稿内容が一致したら 投稿を拒否したくて以下のように記述したところ、 禁止ワードではない言葉でもエラーが表示されてしまいました。 どこか記述が違うのでしょうか？ @kinshi = ("アホ","バカ");#禁止ワードのリスト if(($body)or($name)or($subject) = @kinshi){ &::error(\'禁止ワードが含まれています');{exit;} }
http://www.webpower.jp/ 上記のサイトで無料配布されている「ウェブ・ストアー [パーソナル・エディション]」という簡易ショッピングバスケットをダウンロードし、動作確認中なのですが、確認画面では表示される「お届け先都道府県」が、注文完了後の画面と、実際に注文者・管理者に送信されるメールでは未選択の状態となってしまい、困っています。 また、連続して注文を実行すると、重複注文を避けるため「商品の注文は完了しています。」とシステムエラーになってしまうのですが、これだと追加注文ができません。前回と違う商品を注文してもエラーとなってしまうので、できれば、注文者の情報と買った商品がまったく同じだった場合のみエラーを返して、任意の設定時間を過ぎたら追加注文できるように改善したいと思っています。 サイトの「情報交換掲示板」にて質問しようと思いましたが、Internal Server Errorとなってしまい、掲示板自体が正常に動作していないようです。 サイト運営者にもメールで質問をしましたが、返事が返ってきません。 修正箇所をお分かりの方がおりましたら教えていただきたいと思います。 もしくは、ＣＧＩの作成等に関する質疑応答の出来る情報掲示板をご存知の方がいらっしゃいましたら、お教えください。 宜しくお願いします。
初めて、質問いたします。 実は文字の置き換えについてなのですが、 他の文字は置き換えできるのですが、 s/ゼ/ぜ/g;だけ置き換えが出来ません。 この指定をするとブラウザ画面が白くなり何も表示されません。 ちなみに、逆のs/ぜ/ゼ/g;であれば置き換えが出来ます。 なぜ置き換えが出来ないのか教えて下さい。 出来れば、この文字が置き換えが出来るようにしたいです。 よろしく、お願いします。
　Yomiメーラー(http://yomi.pekori.to/yomi-mailer.html)というフリーウェアを利用して、UTF-8の多言語対応のスクリプトに変更しております。 当方、プログラミングの知識がなく、Perlをマニュアル通りに設置するだけの技能しかないので、「中文電脳/UTF-8で簡単多言語CGI」というWebページを参考にUTF-8化に挑んでおります(※上記サイトのURLは長くてうまく記述できそうもないので、Googleで検索してみてください）。 　上記「中文電脳/UTF-8で簡単多言語CGI」の指示に従ってそのフリーウェアをUTF-8対応にしていきましたが、どうしても私の猫の額のような知識では分からない箇所が出てきました。 　「mimew.pl」というファイルの中で様々な文字モードのための処理のためのスクリプトが書かれていると思いますが、どこをどう無効にすればよいのか分かりません。 　テキストファイルとしてこの「mimew.pl」を参考用に、以下の場所にアップロードしてみました(文字化けする場合UTF-8でエンコードしてください)。 http://cgi.www5b.biglobe.ne.jp/~xpress/test-2/im … 　ご教授頂ければ幸いです。
perldoc の perlfaq4: http://perldoc.jp/docs/perl/5.10.0/perlfaq4.pod の "How do I shuffle an array randomly?" と題された FAQ で紹介されている、配列の要素をシャッフルするアルゴリズム Fisher-Yates 法についての疑問です。 以下一部引用 ---------------- sub fisher_yates_shuffle { my $deck = shift; # $deck is a reference to an array my $i = @$deck; while (--$i) { my $j = int rand ($i+1); @$deck[$i,$j] = @$deck[$j,$i]; } } ---------------- 以上一部引用 このコードを見ると、まず始めに @$deck の要素数を $i に代入し、次に while ループを使って $i をデクリメントしていき、@$deck の末尾の要素から順番にランダムに並べ替えを行っているようですが、$i を前置デクリメントで評価しているため、配列の先頭の要素すなわち $deck -> [0] は並べ替えられないのではないでしょうか ? つまり、$deck -> [0] にアクセスするためには -- $i が 0 にならなければならず、もしそうなった場合 while 条件部で偽と判定されるため、ループが実行されないのではないかということです。 -- $i が 1 となる時点では、$j = int rand ($i+1) つまり $j = int rand (2) で、$j は 0 以上 2 未満の整数、0 か 1 になります。 したがって、この場合も確実に $deck -> [0] にはアクセスできません。 もちろん、$j が偶然 0 になることは有り得ますが、確実に 0 になるわけではなく、確率的に偏ってしまうようなことはないのでしょうか ? おそらく私の見当違いだと思いますが、配列シャッフルのアルゴリズムとして問題ないのでしょうか。ご回答よろしくお願いします。
よろしくお願いします．ディレクトリ内の一つのテキストファイル(joint.txt)と複数のファイルの結合を行ごとに隣へ結合するプログラムを作成しています．ここで以下のプログラムを作成したのですが，うまくいかないため，誤っている部分をご指摘願えないでしょうか． my $dirname = '.'; opendir(DIR, $dirname) or die "$dirname: $!"; while (my $dir = readdir(DIR)) { next unless (-f $dir); next unless ($dir =~ /\.txt$/); open(FILE, $dir) or die "$dir: $!"; open(FILE2,"joint.txt"); my @file = <FILE>; my @file2 = <FILE2>; close(FILE); close(FILE2); foreach my $line (@file) { foreach my $line2 (@file2) { chomp $line2; $line = "$line2.",".$line"; } } open(NEWFILE, "> $dir") or die "$dir: $!"; print NEWFILE @file; print NEWFILE @file2; close(NEWFILE); } closedir(DIR);
オープン中のファイルをflockによる排他をしたままrenameしたいのですがどうもうまくいきません。 sysopen(LOCK, "$file", O_WRONLY);　　　もしくは open(LOCK, "> $file"); flock(LOCK, 2); rename($tempfile,$file); close; close前にrenameするとロックが外れてしまいます。 close後にrenameをするとやはりロックが外れた状態でのrenameになります。 renameするファイル以外にflock専用ファイルを固定で一つ用意すれば簡単なのですが openしたいファイル数は相当な数があり、各ファイルごとにロックをかけたいのです。 全ファイル分のflock専用ファイルを用意するか、排他方式をmkdirにする以外 何か良い手立てはございますでしょうか。
Perlでの文字置換の質問です。以下のように文字列があった場合に +AAA a01 name +BBB b01 name +CCC c01 name +DDD d01 name ・ ・ +CCCと+DDDの間にあるnameの文字のみaddressに置換したい時は どのようにPerlで記述したらよろしいでしょうか。 全てのnameがaddressになってしまい困っています。 よろしくお願いします。 完成形↓ +AAA a01 name +BBB b01 name +CCC c01 address +DDD d01 name
my$file='test.dat'; sysopen(FH, $file, O_WRONLY|O_TRUNC|O_CREAT) || die $!; test.datが無い場合は作成されるはずですが作成されません。 サーバーの設定が原因でしょうか。 ご存知の方がいらっしゃいましたらご指摘をお願いいたします。
ハッシュのキーに対応する値の数の多さ順で表示させたいと考え、下記の所まで試行錯誤しておりますが、どうにも思ったようにソートできずにおります。 #!/usr/bin/perl use strict; my(%a, $i, $j ,$allarray ,@keys ,@keys2 ,%hash ,%files ,$a_mumei_ref ,$key ,$value ,@value ,$x ,$files); # ハッシュの配列を静的に作る %a = ( '0' => [ qw(0) ], '1' => [ qw(1 1) ], '3' => [ qw(3 3 3) ], '7' => [ qw(7 7 7) ], '2' => [ qw(2) ], '4' => [ qw() ], '5' => [ qw() ], '6' => [ qw() ], '8' => [ qw(8 8) ], '9' => [ qw(9) ], ); @keys = sort { $hash{$b} <=> $hash{$a} || length($b) <=> length($a) || $a cmp $b } keys %a; #ハッシュのキーを数字順で表示 foreach (@keys){ print $_ ."\n"; } # 静的に作ったハッシュの配列を取り出してみる foreach $i (sort keys %a) { for ($j = 0; $j <= scalar(@{$a{$i}})-1; $j++) { print '$a{'. $i. '}['. $j. ']='. $a{$i}[$j]. ' '; } $allarray=scalar(@{$a{$i}})-1; print "No$i:kosuu:$allarray"; print "\n"; #配列の値の個数を調べその配列を作成 my($a_mumei) = $allarray; $a_mumei_ref = \$a_mumei; $files{"$i"}=($i,$a_mumei_ref); } #each関数で%filesの中身を表示 while ( ( $key , $value ) = each %files ){ print "key:$key value:$$value\n" ; } #試行錯誤 foreach $x (sort { $files{$b} <=> $files{$a} } keys %files){ print "$x => $files->{$x}\n"; } @keys2 = sort {$hash{$a} <=> $hash{$b}} keys %files; #@keys2 = sort { $hash{$b} <=> $hash{$a} || length($b) <=> length($a) || $a cmp $b } keys %files; #@keys2 = sort { $hash{$a} cmp $hash{$b} } keys %files; print "@keys2\n"; print "\n"; __END__; 私のイメージしておりますのは、ソートした結果がハッシュのキーに対応する値の数の多さ順で下記のように表示させたいのですが、 どのようにすれば可能でございますか、ご教授願えませんでしょうか key:3 value:2・・・この場合valueは配列の個数 key:7 value:2 key:8 value:1 key:1 value:1 key:9 value:0 key:2 value:0 key:0 value:0 key:6 value:-1 key:4 value:-1 key:5 value:-1
Perlでひらがなから全角カタカナへの変換の仕方について教えてください。 ここのサイトで「全角カタカナからひらがなへの変換」の仕方が書いてありました。コレを元に逆に指定すれば出来るかな？って思ったのですが。。。どうやればいいのか全くわかりません。たぶんですが文字コードなどで指定しているとは思うのですが。。。どなたかわかる方がいましたら教えて下さい。よろしくお願いします。 #全角カタカナからひらがなへの変換の仕方 $a =~ s/(\x83)([\x40-\x7e])/"\x82".sprintf("%c",ord($2)+0x5f)/eg; $a =~ s/(\x83)([\x80-\x96])/"\x82".sprintf("%c",ord($2)+0x5e)/eg; 上記の逆に「ひらがなから全角カタカナへの変換」出来るようにしたいです。よろしく御願いします。
Perlでtreeコマンドのような指定したディレクトリ以下の ディレクトリツリーを表示(取得)するモジュールなどはないでしょうか。 CPANから探してみたのですが英語の上に実行サンプルが載って いなかったりと該当するものかどうかの判断ができません。 名前や説明から該当しそうな(?)Perlモジュール ・Dir::Which ・File::CheckTree ・File:Find ・File::Path ・File::Searcher ・Tree::File など 因みに、環境非依存にしたいのでexecやバッククオートを使用したりは できません。
よろしくお願いします．現在以下のシステムでPerlでのテキスト処理を行っています． OS: Windows XP Pro CPU: E8400@3.6Ghz Mem: 2G+3G(Ramdisk化) メモリの残量が多いときは演算が正確に出力され，残りが200MBくらいの時（複数の処理を実行している）には，Perlの演算がおかしくなります． プログラムのミスではないと思います． このようなことは起きるのでしょうか． カテゴリーが少し違うかもしれませんが，よろしくお願いします．
こんばんは。perlをはじめて一ヶ月あまりの初心者です。 また疑問に思うことが見つかり、質問させていただきました。 以下のようなコードがあります。 ----------------------------------------- my @array = ( 'a','b','c'); my %hash; for (@array) { 　　$hash{$_}{OK} = 1; 　　$hash{$_}{WAVE} = 2; 　　$hash{$_}{Perl} = 3; } print $hash{a}->{OK}; print $hash{"b"}->{WAVE}; print $hash{c}->{"Perl"}; ----------------------------------------- 1、2、3を格納するときなのですが、 ハッシュのキーになる値(OK、WAVE、Perl)は、 ダブルクォートや、シングルクォートで囲っていません。 でも、エラーも発生せず、普通に実行できてしまいます("123"を表示します)。 ハッシュのキーは、 "OK","WAVE"や、'Perl'のように ダブルクォートや、シングルクォートで 囲む必要はないのでしょうか？？ C言語みたいに厳密に型が決まっているわけではないので、 OKでも"OK"でもよいのかなー、という思いはあるのですが、、、 よろしくお願いします。
入力した値を１１かどうか判定したいときに $nyuuryoku=<STDIN> $nyuuryoku eq "11" では何故ダメなんでしょうか？自分がやったときはうまくいきませんでした。 自分では分からなかったので今は splitで分割してそれを配列に入れて $array[0] eq "1" and $array[1] eq "1" としています。 １番目の書き方がダメな理由と、他のうまいやり方を教えてください。 上では１１を判定と書いていますが、実際は２個続いた数字の判定をしたいんです。１１とか１２だけではなく、０１とか００というのも判定したいんです。説明が下手ですいません。
よろしくお願いします．タイトル通り「3の倍数行まで1から数字を挿入し，カウントアップしていく方法」をテキストファイルで処理したいと思っています． 具体的にインプットとアウトプットは以下のようにしたいです． input.txt ----------------- a b c d e f g h i ・ ・ ・ ・ ・ output.txt ----------------- a,1 b,1 c,1 d,2 e,2 f,2 g,3 h,3 i,3 ・,4 ・,4 ・,4 ・,5 ・,5 perlでのファイルの読み込ませ方は理解していますので 読み込んで出力するまでの処理を教えていただけないでしょうか． よろしくお願いします．
現在、Perlでテンプレート処理みたなものを自作しています。 例えば my $str = <<'TEST'; test $test $test2 test TEST my $test = 'test'; $str =~ s/(\$\w+)/eval($1)/eg; print $str; exit; のような感じの時に(実際には特定の記号の範囲内にてサブルーチンや Perl構文なども処理できるようにしていますがこの際には例外処理や 複雑な処理などは一切考慮しないものとします)置換結果が空白で 前後が改行などのみになった場合にその行を削除したいのですが どうしたらよいのでしょうか。 >>例(上記の場合の実行結果) ---------- test test test ---------- ↓(理想) ---------- test test test ----------
都合上、検証ができません。 最悪、『サーバーのディスク残量が無い時』に 以下3パターンの処理実行時の挙動（ちゃんとエラーが帰ってきてdieに行くのか？など)はどうなるかご存知でしたら宜しくお願い致します。 　# File::Copyモジュールによるコピー時 copy ("foo.txt", "bar.txt") or die "Copy failed: $!"; 　# File::Copyモジュールによるムーブ時 move ("foo.txt", "bar.txt") or die "Move failed: $!"; 　# 書き込み時 open(OUT,"> file.txt")or die "Can't open file.txt: $!"; print OUT "DEF"; close(OUT); renameは問題ないと思っています。。
お世話になります。 ハッシュ変数の扱い方について教えて下さい。 ＜最終的にヤリタイコト＞ ブログのRSSを読み込み、そのブログ自体のタイトル（１つ）を表示するプログラムを作成したい。 その為に、以下の様なプログラムを作成しています。 ------------------------------------ # 頻繁にRSSを読みに行くのを避けるため、 一時的に$blogfileにRSSファイルを保存しています。 $blogfile="./save/blog.rss"; use XML::RSS; use LWP::Simple; # 保存しているRSSデータを解析 $rss = new XML::RSS; $rss->parsefile($blogfile); # サイト情報を取得 $bigtitle = $rss->{channel}; # そして、これにつづけて、 print $bigtitle->{title}; とすると、ブログ名がキチンと印刷されます。 しかし、この場ではブログ名を表示させたくはなく、一旦、スカラー変数に、このブログ名を代入しておき、後になってから、スカラー変数に代入されたブログ名をprint文で表示させたいのです。 この場合、例えば、 print $bigtitle->{title}; の代わりに $blogtitle=$bigtitle->{title}; とやっても、$blogtitleにブログ名は代入されません。 また、$blogtitleをprint文で表示させてみると、 HASH(0x8ddb5d4) と、いつかどこかで見たような表示になってしまいます。 ●ブログ名をスカラー変数に代入する方法をご教授、よろしくお願い致します。（または、上記の方法以外で、とてもカンタンにブログのRSS情報を元に、そのブログ自体のタイトルのみをスカラー変数に代入するperlプログラムがありましたら、教えて下さい） よろしくお願い致します。
３の倍数と３の付く数字の判定ということで下のようなものを作ってみました。=~　は使っていません。 $count=0; if( ($var%3==0)or($var%10==3)or(int($var/10)==3) ) { $count++; } else { $kazu=int($var/10); while($kazu>9) { if( ($kazu%10==3)or(int($kazu/10)==3) ) { $count++; } $kazu=int($kazu/10); } } $countが１以上なら３の倍数か３の付く数字になる予定です。 間違いとか、おかしなところがあれば指摘してください。
最近Perlを始めました。（今まではPHPをやっておりました） 利用するモジュールを各CGIファイルごとの先頭に宣言するのが面倒なので、Include.plなどのファイルを作って一括して読み込みたいと考えています。 例えば以下のような感じです。 【Include.pl】 use strict; use Data::Dumper; use Fcntl qw(:DEFAULT :flock); use CGI; use CGI::Session ; use CGI::Carp qw(fatalsToBrowser); use Encode; use HTML::Template; 1; 上記のようなファイルを各CGIファイルの先頭で、 require 'include.pl'; とした場合に、使用できないモジュールがあります。 例えば、ファイルロックをしたくてflock(FILE, LOCK_EX)とするとエラーになってしまいます。 しかし、CGIモジュールは$q = CGI->new()と普通に利用できます。 モジュールは全てインストールされています。その証拠にCGIファイルに直接useの宣言を書けば動作します。 通常、このような使い方でモジュールのuseは有効にならないのでしょうか？？ また、自分で作成したモジュール内で他のモジュールを利用したいといった場合、いちいちuseで宣言しなければならないのでしょうか。 mainとなるファイルでuse宣言しておくだけで、自作モジュール内で利用できると思ったのですが、いちいち宣言しなおさなければ利用できないようです。 挙動がPHPと違うため困惑しております。 どなたかご教授いただけないでしょうか。よろしくお願いいたします。
あるデータファイル中に以下のようなデータがあります。 >1234 adjaiubgubmcauouamaouagamouaucamougauyouajmouaguau zadaaboueroauahcaoqqpeuaoqueiiulgjaogahiapnnfaugao ・ ・ >1235 ajfaoufaobayanfaggsofudjjmlacxaoueytiaulmfglaguaou agaohghmfjghucpoepppppfagaaewetfhafhdaugyaiygyaygi ・ ・ >1236 ・ ・ 「>・・」はそれ以下の文字列のIDをあらわしています。各文字列はそれぞれIDを持っています。IDごとに30文字の文字列を（ランダムに）ｘ回抽出するプログラムを教えてください。考えているうちにぜんぜんわからなくなりました。取得した文字列は元のデータファイル中に以下のように上書きをしたいです。「>」以下にはその文字列を取得したIDとそのID内のデータの何行目から何行目までのデータを取得したかを表す タグがほしいです。そのような仕様の文字列取得作業を全部でランダムにX回したいと考えております。以下の実行例のように取得する文字列は一部かぶってもぜんぜん結構です。 昨日から考えていますが、限界に来ました。 長い説明になって申し訳ございませんが、よろしくお願いします。 ≪元のデータファイルに上書きされた実行例≫ >1234from1to30 adjaiubgubmcauouamaouagamouauc >1236from51to81 aijewqmikfugpoirexcxgragukgewj >1235from47to77 guauzadaaboueroauahcaoqqpeuaoq ・ ・
別サーバーのファイルを以下のようにすると、読み込みは可能となりました。 このファイルに書き込むロジックを調べているのですが、 中々見つかりません。 どのようにすれば、書き込む事が出来るのでしょうか。 $url = "http://www.test.jp/test.dat"; require LWP::UserAgent; $ua = new LWP::UserAgent; $request = new HTTP::Request('GET', $url); $response = $ua->request($request); if ($response->is_success) { $content = $response->content; } @DATA = $content;
最近、perlを独学で勉強し始めたものです。 １行で複数回データの入力を行いたいのですが、データを入力するたびに改行されてしまいます。 今は$変数=<STDIN>としているのですが、STDINで取得したデータには\nが含まれているようなので、chompを使うのかと考えているのですがどうしたらいいのか分かりません。それとも何か別の方法があるのでしょうか？
現在cgi.pmで記述されたcgiプログラムで、自社にメールが飛んでくる仕組みになっています。作成した業者と連絡が取れなくなってしまい、この場を借りて質問させていただきます。 そのメール本文内に、受信日時を表示させたいと思いますが、どのようにしたらよいでしょうか ## sendmailによる送信 open(MAIL,"|$mailprog -t") || &error(150,"$mail は送信に失敗しました"); print MAIL $mail_dat; close(MAIL) という行があり、 これらの行の前に my($date) = tslib->getDate();　と挿入し、 （※tslib.cgiという別ファイル内に日時取得の行があります） print MAIL $mail_dat; の後に print MAIL $date; と入れてみましたがCGIはエラーにはならないものの、本文中に日時が表示されません。 なお、送信された内容はCSVにも残るようになっており、その部分の記述は以下のような感じです（dateに関係なさそうなところは省いています） sub doCsv { my($date) = tslib->getDate(); # データの追加書込み open(OUT,">>$file") || &error("Open Error : $file"); #print F $dq . $in{'formmail'} . $dq . "," . #$dq . $date . $dq . "," . #$dq . $ENV{'HTTP_USER_AGENT'} . $dq . "\n"; print OUT "$od,$dq$date$dq\n"; close(OUT); # ロック解除 if ($lockkey) { &unlock; } } もしお分かりになる方がいらっしゃればよろしくお願いいたします。（変更修正はあくまで自己責任で行います）
%allarray内の'あああ'を表示させたいのですが、 foreach構文で回して if($name eq "$allarray{$key}"){ $TopName=$allarray{$key}; } とその都度してから$TopNameで表示させるのがだるいので下記のように無名変数へハッシュを代入して取り出せないかと試行錯誤しているのですが、解決に至るアドバイスなど頂けませんでしょうか $name='aaa'; %allarray = ( 'aaa' => 'あああ', 'kakaka' => 'かかか', 'sasasa' => 'さささ', ); $mumei=\%allarray; $TopName=$mumei{$$allarray}{$name}; print "$TopName"; で >あああ と表示させたいのです お忙しいかとは存じますがよろしくお願いします。
横70文字縦100文字のデータを横X文字のデータを縦にY行整列させ、その結果をもとのファイルに上書きするプログラムを作成しようとしています。横X文字のデータは最初のデータのどこをとってもよく、他の行の一部とかぶってもいいです。X、Yはランダムです。横にX文字ファイルに上書きしたら、またランダムなX文字を次の行に上書きします。かなり考えましたが、作成したプログラムがうまくいきません。どなたか教えてください。よろしくお願いします。 #! /usr/bin/perl my $filename = "reference.fasta"; open FILE, "+< $filename" or die "$!"; my $tmp; my $count = 0; while(my $c = getc FILE){ next if($c eq "\n"); $array[$count] = $c; $count++; } for($j=0;$j<50;$j++){ $var = int(rand 50); for($i=0;$i<$var;$i++){ # print FILE $array[$j][$i]; $tmp .= $array[$j][$i]; } print FILE $tmp, "\n"; } close FILE;
テキストファイルの本文中に行番号を挿入するperlスクリプトが有る、と聞いて探しているのですが、見付かりません。何か手掛かりをご存知の方がいらっしゃいましたら、ご教示をお願いいたします。 ※「本文中に行番号を挿入する」とは、（テキストエディタやＯＳなどの）環境・設定が異なる人同士で情報交換する際でも、同じ行番号で同じ行を特定できるようにすることを意図しています。
縦100文字横70文字のデータが入ったデータファイルを横50文字にして並べ直したいと思い、まず試しに標準出力でそれがうまくいくかやってみたのですが、うまくいきません。もしお分かりであれば教えていください。よろしくお願いいたします。 #! /usr/bin/perl $filename = "reference.txt"; open HANDLE, "<$filename" or die "cannot open :$!"; print "open success\n"; @array = <HANDLE>; $count = 1; foreach $var (@array) { chomp $var; # print $var; if($count==50){ print $var, "\n"; } else{ print $var; } $count++; } close HANDLE; print "\n";
system関数を用いて、ループ内で外部プログラムを連続的に実行しています。ところが、時々、無限ループに近い状態に陥ってしまうデータがあるので、時間制限を設けて、その時間内に終了しない場合には、そのプロセス（外部プログラム）を強制終了させたいのです。 また、もし、強制終了させた場合には、それと分かるように戻り値を返してもらえると、なお良いです。 この仕組みを実現する手法、もしくは、モジュール等を教えて頂けないでしょうか。
perlとは直接関係ありませんが、シェバング行の意味が知りたいです。 #!/usr/bin/env ruby envの無い次のものはrubyを実行するという意味でわかりますが、 上のenvをつける理由が知りたいです。以下では駄目なのでしょうか？ #!/usr/bin/ruby
こんにちは。 UTF-16からUFT-8への変換で困っています。 CSVファイルの中にbase64でエンコードされたデータがあり、その中にUTF-16(リトルエンディアン)のデータが埋め込まれています。 base64のデータのデコードは、MIME::Base64のdecode_base64で出来ました。 この中から、文字列を取り出して、uft-8に変換したいのですが、なにかうまい方法はないものでしょうか？
よろしくお願いします。ディレクトリ内のファイル名をテキストデータを参照として変更したいと思っております。まず、以下の参照テキストがあります。 sansyo.txt 1,2,1 2,3,1 3,4,2 4,5,3 6,7,9 ・ ・ ・ ・ このファイルを利用してディレクトリ内のファイルを以下のようにリネームします。 1,2.txt →　1,2,1.txt 2,3.txt → 2,3,1.txt 3,4.txt → 3,4,2.txt 4,5.txt → 4,5,3.txt 6,7.txt → 6,7,9.txt ・ ・ ・ ・ ・ ここで私は以下のプログラムを作成しました。 sansyo.pl ------------------------------ use strict; use warnings; my $dirname = '.'; opendir(DIR, $dirname) or die "$dirname: $!"; while (my $dir = readdir(DIR)) { next unless (-f $dir); next unless ($dir =~ /\.txt$/); print $dir, "\n"; open(FILE, $dir) or die "$dir: $!"; open(FILE2,"sansyo.txt"); my @file = <FILE>; my @file2 = <FILE2>; close(FILE); close(FILE2); foreach my $line2 (@file2) { my ($a,$b,$c) = split(/,/, $line2); if ($dir == $a.",".$b.".txt"){ rename ($dir, $a.",".$b.",".$c.".txt"); } } } closedir(DIR); 内容は、FILE2にsansyo.txtをforeachで１行ずつ読み込んでいき、 $a,$b.txtというファイルが$dirに読み込んだファイルにあったら、 $a,$b,$c.txtというファイルにリネームするという内容です。 ですが、いろいろ試行錯誤したもののうまくいきません。 具体的には、 Argument "1,2.txt" isn't numeric in numeric eq (==) at sansyo.pl line 23. とエラーがでて if ($dir == $a.",".$b.".txt"){ この部分でエラーが発生しているようです。 どなたか解決方法をよろしくお願いします。
NextTrainと言う時刻表表示ソフトを使っているのですが ７種類の時刻表を１つの時刻表ファイルにまとめて 一度で見れるようにしたいのです。 peal初めてで色々と読んでみてもよく解りませんでした。 今の状況は、ActivePerl 5.10.0.1003 をセットアップして、 　『Hello World』を表示させる事は出来ました。 『例として６時から８時までをソートしてみます』 【分でソート前】 06: a22 a52　b07 c25 c47 c58 c51 　 d25 　　 e55 07: a12 a30 a40 a49 a58 c09 c21 c34 c46 c59 d13 d24 d37 d49 e15 e34 e44 e53 08: a07 a17 a28 a38 a47 b04 b45 c12 c25 c38 c51 d02 d21 d32 d42 e58 【分でソート完了】 06: b07 a22 c25 d25 c47 c51 a52 e55 c58 07: c09 a12 d13 e15 c21 d24 a30 c34 e34 d37 a40 e44 c46 a49 d49 e53 a58 c59 08: d02 b04 a07 c12 a17 d21 c25 a28 d32 a38 c38 d42 b45 a47 c51 e58 　※分の前に付いているアルファベットはバスの系統なので必ず付きます。 　　Perlで無くても簡単に出来る方法があれば教えてください。 　　アドバイスよろしくお願いします。
print hex( 0x41 ); 　　　　　　　結果　101 ですが 0x41は　16進数41で　 10進数の65ですね？ なぜ101となるんでしょうか？ 教えてください。
セッションデータを更新するようなケースで、簡単に排他処理をする方法はないでしょうか。 現在はCGI::Sessionを使っていますが、このfileドライバは、読み込み時にflock⇒開放⇒書き込み時にflock、というように一度開放してしまいます。他の付属ドライバは調べていませんが同じかもしれません。 CGI::Sessionオブジェクトが存在する間はずっとロックしておいて欲しいのです。（と言うより普通に考えればそうであるべきな気がしますが） やはりそのための、たとえばIDごとにわざわざロックファイルを作るとかの処理が必要なのでしょうか。あるいは、ドライバを自分で書くとか。 常套手段的な、それともすでにそういうドライバをご存知でしたら教えてください。 また、セッションデータを更新するなんて珍しくもないと思うんですが、CGI::Sessionが対応してない理由とか、皆さんはどうしているのかも、気になります。
こんばんは。よろしくお願いいたします。 「あ」を文字コードにするとe38182(utf-8) a4a2(euc) 82a0(ShiftJIS) のようになりますが、文字コードから文字を復号(e38182→あ)するには どのようにしたらよいのでしょうか？
私はマップを表示するスクリプトを作りたいと思っているのですが、 言葉での説明が私には難しいので、ソースも書きます。 open(IN,"./map1.ini") #マップ読み込み @map_data = <IN>; close(IN); でmap1.iniの中身はこんな感じです。<>の中身は抜いております <><><><><><><><><><> <><><><><><><><><><> ～以下略～ という風になっていて、上記の@map_dataには各行のデータが 入っていることになるので分割処理をしようと思ったのですが、 $i=0; foreach(@map_data) #マップデータ分割 { @map$i = split(/<>/,$_); $i++; } とやっても@map1,@map2とか都合よくは処理してくれないので、 どうしたら、簡単にできるでしょうか・・・ どうしたらいいんでしょうか・・・
言語：perl 文字コード：UTF－８ 漢字と英数字の長さ（文字数）を測りたいですけど、 調べる方法をご教授よろしくお願い申し上げます。
掲示板を作成しております。 テキストをHTMLに変換するソースサンプルを教えてください。 たとえば、こちらのサイトみたいにURLを入力すると リンクとして表示されるサイトです。 http://yahoo.co.jp ↑のようにリンクとして表示させられればOKです。
ふと疑問に思ったのですが通常、ハッシュを追加する方法は my %hash = ( 'キー1' => '値1', 'キー2' => '値2', 'キー3' => '値3', ); $hash{'キー4'} = '値4'; $hash{'キー5'} = '値5'; とするか my %hash = ( 'キー1' => '値1', 'キー2' => '値2', 'キー3' => '値3', ); %hash = ( %hash, 'キー4' => '値4', 'キー5' => '値5', ); のようにするのが普通だと思いますがリストのpushみたいに追加する 方法はないのでしょうか。
Math::BaseCalc モジュールを使って 10 進数をアルファベットに変換すると、 $ perl -MMath::BaseCalc -le 'print Math::BaseCalc -> new(digits => ['A' .. 'Z']) -> to_base(26);' BA このように 26 -> BA になりますが、これが 26 -> AA となるようなモジュールはないのでしょうか? 0 (A) == 00 (AA) なので、基数変換ならば 26 -> BA で正しいのは分かります。 しかし、文字列的な変換方法を探しています。 別な言い方をすると、A-Z の組み合わせでできる文字列を順番に得たいと思っています。 すなわち、A, B, C, ..., Z, AA, AB, AC, ..., ZZ, AAA のような文字列です。 アルファベットならば範囲演算子 (..) を使って得られますが、任意の digits で同じような文字列を得ることができるようなモジュールはないのでしょうか? (例えば、0-9 A-Z a-z ならば 0, 1, 2, ..., 9, A, B, C, ..., Z, a, b, c, ..., z, 00, 01, 02, ...) 現在は拙作のサブルーチンを使っているのですが、もし定番のモジュールがありましたら、お教え頂きたいです。 ご回答よろしくお願い申し上げます。
こんばんは。 Perlを使って他の言語では組みにくいプログラムを書きたいと思い ますが、お薦めの使えるまたは面白いモジュールを教えて下さい。
質問させて頂きます。 1234567 などの数字を f3ad5 などのようにa-zも交えて 文字列の短縮化をしたいのですがそのようなperl関数または式などありますでしょうか。 文字列を再び数字に戻せるよう、可逆性も考慮したものが理想です。 宜しくお願い致します。
ログの集計で困っております。 そのログというのがジョブの開始時刻と終了時刻が別々の行に出力されているもので、 このログをジョブごとに開始と終了時刻を別々の行から取得し、出力結果は1行に1ジョブで出したいと考えています。 ログがUNIXのログなので、当初はshellスクリプトでと思っていたのですが、 shellだとログを何度も先頭から読み込む形となり、perlで可能ではないかと思い、質問させていただきました。 perlはあまり詳しくはないですが、よろしくお願いいたします。 元のログイメージ ～～～ここから～～～ START 08:00:00 Job001 START 08:05:00 job002 END 08:07:01 job001 START 08:08:00 job003 END 08:10:00 job002 : ～～～ここまで～～～ 出力イメージ ～～～ここから～～～ job001 08:00:00 - 08:07:01 job002 08:05:00 - 08:10:00 : ～～～ここまで～～～
binmodeを使用したファイルハンドルを閉じずにバイナリモードを 取り消してアスキーモードに戻す方法はないでしょうか。 CGIモジュール(CGI.pm)を使用するとモジュール内部で勝手にSTDOUTに binmodeしてしまうようで、改行コードがLFだけになり(少々だけ) 困っています。 CGIモジュールを使用してもbinmodeされない方法かアスキーモードに 戻す方法があったら教えて欲しいです。 まあ、実際にはCGIを使用している限りではあまり関係ありませんが。 CGIモジュールを直接は使用していないのですが間接的に利用している CGI::Sessionモジュールを使用したいのです。 因みに使用環境はWindows(IIS)ですので改行コードはLFのみではなく CRLFの方が都合がいいと思っています。 今のところ、LFになっていても一応は動いていますが必要なくSTDOUTが バイナリモードにはしたくないという程度ですので、ないようでしたら 諦めます。
HTMLデータを取得しようと思いまして 以下のサイトのソースを使わせてもらっているのですが http://www.ksknet.net/perl/lwpuseragent_we.html 後半の取得結果を出力するところの print $res->content; の意味がよくわかりません。 これはどういう意味なのでしょうか？ また、取得したHTMLコードを変数に格納したいのですが $resの中には無いようです、これも->contentが関係しているのでしょうか？
以下の2つの関数から「内部変数」「引数」「戻り値」がどれかを知りたいのですが、 戻り値：「$esc_0208」「$esc_asc」 引数：なし であっているでしょうか？ 変数は「$esc_0208」と「$esc_asc」のようにも思えるのですが、変数であり戻り値でもあるということでしょうか？ sub jis_inout { $esc_0208 = shift || $esc_0208; $esc_0208 = "\e\$$esc_0208" if length($esc_0208) == 1; $esc_asc = shift || $esc_asc; $esc_asc = "\e\($esc_asc" if length($esc_asc) == 1; ($esc_0208, $esc_asc); } sub get_inout { local($esc_0208, $esc_asc); $_[$[] =~ /($re_jis0208)/o && ($esc_0208 = $1); $_[$[] =~ /($re_asc)/o && ($esc_asc = $1); ($esc_0208, $esc_asc); }
受信メールをホームページで表示して閲覧するプログラムを作成しているのですが、添付ファイルを表示する方法がわからないので教えていただけると助かります。 件名を表示させるプログラムと本文を閲覧するプログラム以下の通り作成しています。 件名表示プログラム（一部） foreach ( $pop -> Head( $i )) { $info_link = "<a href=\"./mail.cgi?uname=$user&passwd=$pass&msgnum=$i\">$sub</a>"; } 本文表示プログラム（一部） foreach ( $pop -> Body( $msgn )) { $body = jcode($_)->mime_decode()->sjis; $HTML .= <<"EOL"; $body<br> EOL } $HTML .= <<"EOL";
;# Set escape sequences which should be put before and after Japanese ;# (JIS X0208) string. ;# sub jis_inout { $esc_0208 = shift || $esc_0208; $esc_0208 = "\e\$$esc_0208" if length($esc_0208) == 1; $esc_asc = shift || $esc_asc; $esc_asc = "\e\($esc_asc" if length($esc_asc) == 1; ($esc_0208, $esc_asc); } ;# ;# Get JIS in and out sequences from the string. ;# sub get_inout { local($esc_0208, $esc_asc); $_[$[] =~ /($re_jis0208)/o && ($esc_0208 = $1); $_[$[] =~ /($re_asc)/o && ($esc_asc = $1); ($esc_0208, $esc_asc); } コード変換のプログラムの上記の部分を日本語で説明してください よろしくお願いします
やりたいことは日本語文字列の処理で、特定の文字を切り抜きたいのですがうまくいきません。 なぜなら、文字列を切り抜くsubstr関数がバイト単位であるのに対し、文字列を検索するindexがバイト単位でおこなわれていないからです。 例： 文字列"12万3456円"から、円だけを取り除きたいとします。 $str = "12万3456円"; $index = index($str,"円"); $newStr = substr($str, 0, $index); indexは７を返すが、substrで0から7番目を切り取っても、バイト単位なのでうまくいきません。 文字列の検索をバイト単位で行う方法を教えてください。 おねがいします。
以下のようなスクリプトがあるのですが、 &com::getToday(); とか $com::VD{'BGCOLOR_CTABLE'} の::の意味がわかりません。 printf( "<b>%d年 %d月</b><br />\n",$wyear,$wmon ); printf( "<table border=\"0\" cellpadding=\"4\" cellspacing=\"1\" bgcolor=\"%s\">\n",$com::VD{'BGCOLOR_CTABLE'} ); my ( $wtoday ) = &com::getToday(); my ( $wsodt ) = &com::getDateForm( time() - ( 60 * 60 * 24 * ( 1 - $com::VD{'RESERVE_SHUTOUT'} ))); どういういみになるのでしょうか？
ActivePerlをインストールして ムーバブルタイプを導入するつもりです。 ムーバブルタイプには色々モジュールのインストールについて 記載されていますが、 ActivePerlに最初から入ってるモジュールはどんなものが あるのでしょうか？ もし可能なら一覧にしていただけませんでしょうか？ よろしくお願いします。
前質で→　http://oshiete1.goo.ne.jp/qa4142221.html #print "<option value=\"$day1\">$day1";　で出来たのですがｗ dayの日範囲を多くするとかなり長くなってしまい(T_T) （初心者のくせに）foreachを使ってみようかと エスケープしたりダブルコーションにしたり色々やっても・・・ <option>に月日が表示されません(T_T) 基本的に間違っているのでしょうか・・・　お願いします。 ＊他にも変なところがあったら教えて下さい。 -------------------------------------- <select name=dd><option value="なし" selected> ↓ <option value="なし">指定なし EOM foreach (0 .. $#pl) { if ($in{'plan'} eq $_) { print "<option value=\"$_\">$pl[$_]\n"; } else { print "<option value=\"$_\">$pl[$_]\n"; } } print "</option></select>\n"; #-------------------------------------- ###　↑メイン.cgiです。↑ ###　↓　サブ.cgiです。↓ #-------------------------------------- #　時間 $time = time(); #　範囲日 $day1 = day0($time + (86400 * 2)); $day2 = day0($time + (86400 * 3)); $day3 = day0($time + (86400 * 4)); ############　上下の行のday数が１４日間位まで続く・・・ @pl = ('$day1', '$day2', '$day3'); #　日計算 sub day0{ my(@weekdayname) = ('日','月','火','水','木','金','土'); my $time = shift || time(); my $day0 = $time + (24 * 60 * 60); my ($yyyy, $mm, $dd, $w) = (localtime($day0))[5,4,3,6]; $yyyy += 1900; $mm += 1; return( sprintf('%4d/%2d/%2d(%s)', $yyyy, $mm, $dd, $weekdayname[$w]) ); }
perl初心者です。試行錯誤の連続です・・・ このように　↓　（ ）と曜日を追加するにはどうしたら良いでしょう？。 2008/07/05（土） また、変なところもありましたら指摘してください <(_ _)> #-------------------------------------- #　時間 $time = time(); #　範囲日 $day1 = day0($time + (86400 * 2)); $day2 = day0($time + (86400 * 3)); $day3 = day0($time + (86400 * 4)); ### @weeeeek = ('$day1','$day2','$day3','$day4','$day5','$day6'); #　日計算 sub day0{ my $time = shift || time(); my $day0 = $time + (24 * 60 * 60); my ($yyyy, $mm, $dd) = (localtime($day0))[5,4,3]; $yyyy += 1900; $mm += 1; return( sprintf('%4d/%2d/%2d', $yyyy, $mm, $dd) ); } #-------------------------------------- ### @list = ('（日）','（月）','火','水','木','金','土'); ### ( "$mm/$dd + "（" + list + "）" );
ソースからインストールしたPerlモジュールと CPANからインストールしたPerlモジュールの アンインストール方法を探しています。 ■環境 OS:RedHat Linux ES4 Perl:5.8.8 ※perldoc perllocalにインストール履歴が残ります。 インターネットで検索してみますと、Linuxは慣習的に 一度インストールしたものは削除しないように感じます。 自分で、インストールしたファイルをrmコマンドで消していくしかないのでしょうか。
お世話になります。 ここでなければ何処がふさわしいかお教え下さい。 聞きたいことは、 呼び出されたhemlへ戻るような汎用cgiを書きたいのです。 例えば、A.htmlから呼ばれたらAへ、B.htmlから呼ばれたらBへ、 というように。 これまではいつも、href=で具体的に戻り先を書いていたので、 いざこんなことを考えたら分からなくなりました。 宜しくお願いします。
タイムアウト時間を確認するのに、以下のプログラムを実行したのですが、存在しないホストを指定してプログラムを実行しても3秒程度でタイムアウトしてしまいます。指定したタイムアウト時間（以下のプログラムでは100秒）待つにはどうすればよろしいでしょうか？ お願いします OS：CentOS 5.1 perl: 5.8.8 Net-Telnet-3.03 =====　プログラム ===== #!/usr/bin/perl use Net::Telnet (); my $result; my $h = 'aa.bb.cc.dd'; my $u = 'my_name'; my $pass = 'my_pass'; my $p = '/[\$%#>] $/'; my $t = new Net::Telnet (Timeout => 100, Prompt => $p, Errmode => "return"); $result = $t->open($h); unless($result) { print "open ng\n"; exit; } else { print "open ok\n"; $t->login($u, $pass); print "login ok\n"; $t->print("exit"); }
御願いします。 perlにてなんとかメールを受取り　送信完了メッセージを表示するまで は完成し問題なく動いています。 今度は　送られてきたメールの内容を含めて自動返信したいのですがどのようにコーディングすればよいのか御教え頂けたらと思います。 環境から申し上げます。 サーバー　ANHTTP ルーターの配下に　パソコン４台で内一台サーバー専用機として稼動中です。（WWW、FTP,MAIL） メールサーバーは　XMAILです。正常に稼動しています。 プロバイダー　ヤフー 現在はLAN内では送信内容を含めた自動返信は動きます。 またプロキシを通してLAN内のメールアドレスをフォームに書いて送信すると 送信内容を含めて届きます。ですが第三者、友人に送信してもらうとエラーが出ます。 プログラムの流れは受け取ったデータ―を切り分けてハッシュに入れて それをエンコードしヘッダーを作成しsendmailの代用品のsendomaneへパイプを通しています。その後送信完了をHTMLで表示 その下に自動返信サブルーチンを作成 ここでメールの送信は「to」と　「from」スカラー変数の値を入れ替えています。LANないはOK、外部からはエラーとなっています。 外部より送信時のエラーです。 [<00>] XMail bounce: Rcpt=[xxxxx@yyy.zzz];Error=[521 ybbsmtp.mail.yahoo.co.jp closing transmission channel. This email address must be verified first before you can use it for Sender/From field.] 勉強不足でこの意味が分かりませんがヤフーで止められている気がするのですが・・・。 上記のエラーが出ている友人とはメールソフト使用のメール送受信は正常です。いろいろ調べましたが分かりませんでした。 どなたか　ご教授いただけますよう御願い致します。
Perlのテキスト処理に関する質問です．やりたいことはあるディレクトリ内に10000個ほどの(1)のようなテキストデータがあります．ここで私は(2)のプログラムを作成しました．しかしながら，このプログラムだと10000個あるテキストデータの一つしか処理できません．この処理内容をディレクトリ全体に適用させる方法はありますでしょうか？File::Find::Ruleなどがネット上にあったので使おうと努力しましたができませんでした．どなたかよろしくお願いします． (1)　 2020 01 01 00 109.18970 18.36816 -2.317 -2.459　292.712 0.013 91.276 30.618 292.712 0.013 -2.317 -2.459 998.793 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 2020 01 01 00 109.54297 18.39178 -2.702 -2.652 292.653 0.013 90.044 30.676 　292.653 0.013 -2.702 -2.652 993.902 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000 0.000　0.000 ・ ・ ・ ・ (2) use warnings; open INFILE, '<', '2020-01-01_00.txt' or die "file open error: $!"; while( <INFILE> ){ chomp if( /\n$/ ); $Year = substr($_,0,4); chomp if( /\n$/ ); $Month = substr($_,5,2); chomp if( /\n$/ ); $Day = substr($_,8,2); chomp if( /\n$/ ); $Time = substr($_,11,2); chomp if( /\n$/ ); $Lon = substr($_,16,9); chomp if( /\n$/ ); $Lat = substr($_,29,8); chomp if( /\n$/ ); $Temp = substr($_,57,7); chomp if( /\n$/ ); $Hum = substr($_,76,6); chomp if( /\n$/ ); $Ozone = substr($_,85,6); chomp if( /\n$/ ); $Rad = substr($_,140,5); $data = $Year. "-".$Month."-".$Day." ".$Time." ".$Lon." ".$Lat." ".$Ozone." ".$Rad." ".$Hum." ".$Temp."\n"; open($data, ">", "data.txt") or die("error :$!"); } # ファイルを閉じる close INFILE; exit; 　
メンバーサイト構築にて質問です。 ユーザーから送られてきたメールのメールアドレスで、 メンバーであるか新規であるかを判断するプログラムをperlで作成したいと思っております。 まだperl初心者なのでもっと良い方法がないか考えたいのですが経験がないので考えが浅はかです。 何卒、ご意見または別の案などご教示頂けないでしょうか。 （メンバー数の想定は10万～100万　データベースは使いません） ※当初の考え ファイルに新規ユーザーのメールアドレスを追記 →ファイルをオープンして１行づつ検索 懸念：メンバー数が多くなればファイルをオープンするだけで結構なメモリを消費するのではないか、ループで１行づつ検索したらすごい負荷がかかるのではないか。 ※現時点の考え 新規ユーザーのメールアドレスをファイル名にしたファイルを作成（＠マークなどは別の記号に変更） →ファイル検査演算子でファイルがあるかどうか判断 懸念：すごく速い気がするのですが、これって現実的なんでしょうか？？
下記のようなテキストファイル（氏名の下は不特定数行）があります。 山田 hogehoge hogehoge hogehoge hogehoge 田中 hogehoge hogehoge 鈴木 hogehoge これを下記のようなテキストに変換したいのですがsedとかでできないでしょうか？sedは使える環境です。よろしくお願いいたします。 山田hogehoge 山田hogehoge 山田hogehoge 山田hogehoge 田中hogehoge 田中hogehoge 鈴木hogehoge
perl初心者ながら暇見て住所CGIフォームを作っています。 だんだん完成してきましたが今一歩です(T_T)ご指導下さい！ 名前、電話、都道府県、住所、の４つの項目があります。 {'nam'}　{'tel'}　{'pre'}　{'add'} {'pre'}はSELECToption　他はtextFORM 全部記入した時には、次に進めてOKなのです。 if ((($in{'nam'}) && ($in{'tel'}) && ($in{'add'}) && ($in{'pre'} > "0")) { print 全部未記入時でも、次に進んでも無記入なのでOKです。 エラー時に&errorのエラー画面に飛ばす事も出来ました。 ただ、書き忘れ時が困るので {'nam'}　{'tel'}　{'pre'}　{'add'}の内、１～３つとか記入して 他が抜けてたりした時だけエラーにしたいのです。 でも間違って空スペースとかでエラーが出て欲しくないし・・・ まずは下記でやってもまだダメです、($in{'pre'} > "0")が未選択時がダメです(T_T) 色々やってみたのですが、何か良い方法ありませんか？ #### ($in{'pre'} > "0")は、"1"以上が「真」の条件です。 if ((($in{'nam'} eq "") || ($in{'tel'} eq "") || ($in{'add'} eq "")) && ($in{'pre'} > "0")) { &error("エラー"); }
現在、ドコモの端末識別をする際にiモードIDとFOMAカード(UIM)のicc～ではじめる製造番号のどちらを活用するか検討しているのですが、ユーザーがなんらかの方法を使ってもその識別番号を変えづらいのはiモードIDとFOMAカード番号のどちらなのでしょうか？
アクセスログをZIPファイルにしてダウンロードした後ファイルが自動的に削除されるようにしようと思っていますが、失敗続きです。 今までの軌跡、 1、ZIPファイルをArchive::Zipで作成、print "Location×××.zip:\n\n";でダウンロード後、当該ZIPファイルをunlink 結果、失敗　404エラーになる 2、ZIPファイルをArchive::Zipで作成、print "Location×××.zip:\n\n";でダウンロード後、当該ZIPファイルをENDサブルーチンでunlink 結果、失敗　404エラーになる 3、File::TempをZIPに利用できないか試みるがArchive::Zipはファイルハンドルを使わないため利用できないのではと断念。 とまあこんな感じで現在に至っています。 なぜ削除しなければならないのかというと外部からアクセスされるとアクセスログがダウンロードできるとこまるからです。なのでダウンロード後すぐに削除、できればダウンロード後すぐ削除されれば理想と思っています。 3、に関してですが、ならばZIPにしないでテキストでダウンロードさせればいいじゃんと思うかもしれませんが、色々なファイルをまとめてダウンロードさせたいと思っているので、それはできない状況。 手段を知っている方助けてください。
Movable Type4の勉強を始めました。 メールフォーム作成のプラグイン（http://www.h-fj.com/blog/archives/2007/05/30-093 …）をMTにインストールしたいのですが、パーミションの設定がわかりません。“ファイルのパーミッションを変えて、実行可能に設定”するためには、「mt-mail-form.cgi」ファイルのパーミションを何にすればよいのでしょうか？上記URLの参照先で、下記の部分についてです。 1.インストール／アップデート手順 アップロードが終わったら、「plugins」→「MailForm」→「mt-mail-form.cgi」ファイルのパーミッションを変えて、実行可能に設定します。 本当に基本的な質問で申し訳ありません。
症状： perlのプログラム内でDBIを使うと、その後の行がすべてスキップされてしまいます。エラーをだしてくれることもなく、何が原因なのかさっぱりわかりません。 「 #!/usr/bin/perl use DBI; print "Content-type: text/html", "\n\n"; print "this is test"; $d = 'DBI:mysql:test:Localhost';# データソース $u = 'root';# ユーザ名 $p = 'mypass';# パスワード # データベースへ接続 $dbh = DBI->connect($d, $u, $p) or print "Can't connect to MySQL"; print "<br />success!"; 」 「this is test」は表示されるのですが、「success!」が表示されないのです。もちろん「Can't connect to MySQL」も、その他のエラー表示も表示されません。 「 $dbh = DBI->connect($d, $u, $p) or print "Can't connect to MySQL"; 」 の行を消すと、「success!」も表示されます。 DBIを再インストールしたほうがよいのでしょうか？　もともと、DBIをインストールするとき、いろいろてこずっていて、その時に何かおかしなことになってしまったのかもしれません。 それとも別の場所に問題があるのでしょうか。 ________________________________ 環境： Ubuntu8 Xampp ちなみにcpanで i DBIとやると、 「 CPAN: Storable loaded ok (v2.18) Going to read /root/.cpan/Metadata Database was generated on Fri, 20 Jun 2008 07:02:51 GMT Strange distribution name [DBI] Bundle Bundle::DBI (TIMB/DBI-1.605.tar.gz) Module = DBI (TIMB/DBI-1.605.tar.gz) 2 items found 」 とでます。 この問題のおかげでもう2日間作業がすすまないでいます。どなたか力をかしてください。おねがいします。
私は浮動小数点数を整数値に変換したいのですが、 各種検索エンジンで探してみたのですが、 ほしい情報が得られなかったので どなたか浮動小数点数を整数値化する方法を知っていましたら 教えていただけないでしょうか？sprintfで表示可能なのはわかりましたが、 表示だけではなく、処理の中でも使用するので、変換できないと だめなんですが、どなたか知っていませんでしょうか？
現在、HTMLのフレームを左右に２分割しています。左側に用意したいくつかのラジオボタンやフォームの入力内容などの条件を入れてボタンを押すと、Perlで書き出された結果表示が右側に出る仕組みです。 とりあえず、今は、初期状態の右側画面にはダミーのHTMLを表示させてますが、 HTMLを読み込んだときの初期画面として、左側のデフォルトの条件での結果表示を、（ボタンを押さずに）右側に表示させたいのです。 わかりにくい説明で申し訳ありません・・・。 簡単なJavaScript記述で、「onload」とか使ってできますか？ ほかの方法でもかまいません。 ご教授よろしくお願いします。 （ちなみに今回のperlは人に教わりながらようやく書き、JavaScriptも初心者です。）
Perl初心者です。双方向に値を取り出せる　TwoWayMapクラスを作成し、以下の期待値を取得したいのですが、エラーが出てうまく実行できません。原因について、アドバイスをお願いいたします。 (エラーメッセージ） Can't locate object method "new" via package "TwoWayMap" at samplev2-2.pl line 6. （期待値） Apfel apple pear ----　TwoWayMap class ：ファイル名 samplev2.pl ---------------- package TwoWayMap; $forward_hash={}; $reverse_hash={}; sub put{ $forward_hash{$_[0]}=$_[1]; $reverse_hash{$_[1]}=$_[0]; } sub get{ return $forward_hash{$_[0]}; } sub rev{ return $reverse_hash{$_[0]}; } ---- main ファイル名：samplev2-2.pl------------------------ package main; use TwoWayMap; our $e2g = new TwoWayMap; $e2g->put('apple', 'Apfel'); $e2g->put('pear', 'Birne'); print $e2g->get('apple'), "\n"; print $e2g->rev('Apfel'), "\n"; print $e2g->rev('Birne'), "\n";
######## AAかBBがあったらprint PEALで　　AA || BB　　 AA か BB　って事はわかりましたが AA と BB　両方ともあった場合は？ ######## AAかBBがあったらprint if (($in{'AA'}) || ($in{'BB'})) { print "$in{'AA'}"; print "$in{'BB'}"; }
環境は、DNSによる名前解決が出来ないUnixサーバです。 下記のようにgethostbyname関数を使って変数$addrに代入される値を、 IPアドレスから変換して取得したい考えています。 $addr = gethostbyname("www.aaa.co.jp") 仮にIPアドレスを 172.17.5.5 とした場合、このIPアドレスを gethostbyname関数を使って変数$addrに代入される値と、同じ値に 変換する方法はありますでしょうか。
1台のサーバ内にDBとそれを利用しているシステム（perl）があります。 サーバを買い換えてDBとシステムを別々のサーバにのせることになり、今までperlで走らせていたDBのdumpをとる処理が動かなくなってしまいました。 今は手動でとっているのですが、処理としてperlで組めないでしょうか？ （システムを利用した時にdumpをとりたいのでDBサーバでのcronではちょっと役不足です） dumpをとるためには、別サーバへシェルスクリプトをキックする必要があるのですが、これは可能なのでしょうか。 もし可能でしたらperlでどのように記述すればできるのか、以下の処理の記述についてアドバイスをお願いいたします。 1.DBのdumpをとる 2.WEBサーバに転送する 3.WEBサーバにあるdumpからDBを復元する
例 if (($in{'pre'} ne "0") && ($in{'pre'} ne "-1")) { 不要なoptin valueを　0と-1。必要が1-47。 value="1"　から　value="47"　までを真にしたいのですが 例を簡単にするには　[1-47]　1<　とかどう書けば良いのでしょう？・・・ -------------------------------------------- if ($in{'nam'} && $in{'tel'} && ($in{'pre'} ne "0") && ($in{'pre'} ne "-1") && $in{'add'}) { 今はこんな感じでやってるのです・・・ 全部揃ったら真って感じです。条件文が毎回長くなってw（≧ｍ≦）w
apache上でcgi-bin/ファイル.cgiのファイル.cgiから特定のディレクトリハンドルを開くために #!/perl/perl/bin/perl -wT use strict; use CGI::Carp qw(fatalsToBrowser); opendir DH, "http://localhost/image/"; opendir DH, "http://localhost/image/" or die "error"; for (readdir DH){ print; } としたのですが オープンできません opendirのパスに絶対urlや相対urlを使用する方法はありませんか?
http://kan-chan.stbbs.net/download/cgi/refswp.html 上記サイトで配布されている「Referer-Sweeper」というスクリプトなのですが、ジャンプするURLのページ内リンクの「#」以降が無視されてしまうのは技術的にどうにもならないのでしょうか？ もし改良の余地があるのでしたら、その方法をご指導いただきたいです。 作者に直接聞くにも連絡場所が何処にも見当たらず、こちらに書き込みしました。 幸い、上記サイトの配布ソフトは「原則として自由に使用・複製・再配布・改良版の再配布等ができるものとします」という事なので、どなたか詳しい方がいらっしゃいましたらよろしくお願いいたします。
こんにちは、Perl始めて3か月ほどの大学生です。よろしくお願いします。 Perlにおいて「あいうえお」という文字列があればそれを配列に分けて入れることが最終目標です。 C言語出身なのでPerlにおける配列の概念がよくわからないのですが $word[0]に「あ」、$word[1]に「い」となるように もしくは@word[0][0]に「あ」、@word[0][1]に「い」となるようにしたいのです 自分なりに調べてみて $lineに「abcde」が入っているとすると my @word; $word[0] = substr($line,0,1);とした場合 print $word[0]."\n"; はうまく「a」を出力することができました しかし $line = 'あいうえお'; とすると空白になってしまいました。 したがって @word = spline(/ /,$line); foreach(@word){ print $_."\n"; } を試しました 出力結果は abcde とどうもうまく分けられていないようでした。 環境はよくわからないのですが WindowsXPでputtyjp.exeというものを使ってサーバーにアクセスしていて サーバーはLinuxのRedHatでした 日本語コードは[euc]になっていました use uft8;　をすると出力時に文字化けを起こします。 手詰まりになってしまいました。解決の糸口となるヒントがあれば教えて下さい。 ２バイトごとに無理やり区切ることも考えましたがバイトごとに区切る方法が分からないのとアルファベットは１バイトのような気がするのでやり方がわからなくなっています。 ご指導のほど、よろしくお願いします。
以下のプログラムを解読中ですが、いまいち理解できません。C言語の経験はあるのですが、Perl初心者のため、Perlの文法を中心に、以下のポイントについて教えてください。 (1)この関数で、引数が「&@」となっていますが、この＆の意味は「サブルーチン」ということですか？？ (2)２行目のmy ($block, @listin) = @_　で各$block, @listinに格納される値を教えてください。「@_」を調べてみたところ、「サブルーチンの引数を代入」とあるのですが、ここでは、map_block(&@)の&@が&blockと@litinに代入されるということですか？？そもそも&@とは何でしょうか？ (3)４行目のpush @listout, &$block() for (@listin)　について、push関数を調べてみたところ、配列の最後尾に値を格納するということですが、&$block()　for　(@listin)　の部分の意味がよくわかりません。どのような値が、配列listoutに格納されるのでしょうか？ （解読中のプログラム） １sub map_block (&@) { ２　　　my ($block, @listin) = @_; ３ my @listout = (); ４ push @listout, &$block() for (@listin); ５ return @listout; ６}
今、海外の大学に短期留学中でCSの授業をとっているのですが、その中で以下のような課題プログラムが出ています。が、Perl初心者の私にはまったく内容が理解できません。どなたか概要を解説していただけませんか？海外での英語の壁に挫折しつつあり、こちらに駆け込みさせていただきました。どうか、ご事情等ご賢察のうえ、温かいご支援をお願いいたします。 特に伺いたい点としては、以下の２点ですが全体的に解説していただけるととても助かります。 (1)この関数の呼び出し方 (2)２行目の、「my ($num, $f, @factors) = ($_[0], 2);」で、ローカル変数 $num,$f,$factors　に何が初期値として代入されるのか？ sub isprime { my ($num, $f, @factors) = ($_[0], 2); while (1 != $num) { if (0 == $num % $f) { return $f == $num unless wantarray; push @factors, $f; $num /= $f; } else { $f++; } } return @factors; }
pealで指定日のプルダウンoptionを作りたいのですが （現在は、指定月日を数字での入力方式にしています） １月から１２月全部や１日目から３１日目とか全部ではなく 例えば３日後から１０日後までだけの選択が出来て 毎日自動更新で日にちが繰り上がるタイプです！ 例えば今日が6/15日ならプルダウンoptionが <option>選択可能です！</option> <option>6月18日(水)</option> <option>6月19日(木)</option> <option>6月20日(金)</option> <option>6月21日(土)</option>・・・・ どこかのサイトで見たことあるのですが検索で見つけれません（≧ｍ≦） 参考ＵＲＬとかあれば教えて下さい。 　
perlのバッチプログラムをレンタルサーバー（ロリポップ）で動かそうとしているのですが、サーバーの制約により処理が途中で中断されてしまいます。 サーバーの制約とは３０秒を超える処理を起動してはならないというものです。 では、入力データ量を１プログラムあたり３０秒以内に収まる範囲に分割し、プログラムを連続して起動することで制約を回避しようと思うのですが、プログラム起動の方法がわかりません。 プログラム終了をトリガとして後続プログラムを起動する仕組みの実現方法を教えてください。
ホームページ初心者です。land.toでサーバをレンタルしているのですが、ＣＧＩがうまく動作しません。具体的にＢＢＳなのですが、しっかりcgiファイルにリンクしてあるし、ファイル属性も考慮してあるのに、内部サーバーエラーとなります。 因みにＢＢＳはＫＥＮＴでお借りしています。 誰か教えていただけないでしょうか。理解に苦しんでいます。私の過ちはなんでしょうか。
都道府県セレクトoptionフォームにて 都道府県を選択しない場合のエラーを なんとか２行で出せるようになったのですが 選択して下さい　＝　value="0" if ($in{'pre'} eq '0') { &error("都道府県の選択！！"); } if ($in{'pre'} eq "") { &error("都道府県の選択！！"); } これを１行にするにはどうしたらいいのでしょう？ ↓↓はダメでした（≧ｍ≦） if ($in{'pre'} eq "" || '0') { &error("都道府県を選択！！"); }
-----------------------------------------------@-------------------------------- Microsoft Windows [Version 6.0.6001] Copyright (c) 2006 Microsoft Corporation. All rights reserved. C:\Users\sdf>d: D:\>copy con t.txt debug q debug d:/makepass.xls r d 100 5fff q スレッドの終了またはアプリケーションの要求によって、I/O 処理は中止されました。 0 個のファイルをコピーしました。 D:\> -------------------------------------------------------------------------------- 上野処理を、 行ういますたこらさっさ。 ナセカびいすたちゃんに、 おこられたの（＠＠） 鯛編だ！！ どなたかおしええ くださいまするぱわ～あ。
セレクトoptionフォーム、都道府県の選択で 最上部が「選択してください」から始まります。 都道府県を選べばそのまま住所に転記されるのですが 最上部の「選択してください」のままなら 「選択してください」と転記されてしまいます・・・ if (選択してください) { &error("都道府県を選択して下さい！"); } こんな感じのエラーを作りたいのですが何か方法はありますか？
こんにちは。お世話になります。 題名の件、Perlという枠から外れるかもしれませんが、linux+perlでWindowsのファイルを読み取る、（通常のWindowsの場合と同様、フォルダのダイアログを出して、グラフィカルにファイルを選択、linuxサーバに読み取る）ことはできるのでしょうか？ googleでもうまく検索できなかったので、ご教授お願いいたします。
現在、Windows 2000とXPで、perlを、test.batをダブルクリックする形で使っています。 他にも、並列で、いくつか、同様の方法でperlを実行させていますが、test.cgiが終了した時、test.cgi以外のperlプログラムを全て強制終了させたいのですが、何か、良い方法はないでしょうか？ ----test.bat--- perl test.cgi ---- ----test.cgi--- sleep 10; exec("taskkill /F /IM perl.exe"); print 'test.cgi以外のperl.exeを強制終了しました'; ---- 上記方法を試してみたのですが、自身のperl強制終了されてしまいます。 実際は、printの部分には様々な動作を行うため、自身のPIDを見つけ出して、それ以外を強制終了するような方法が最適です。 宜しくお願い致します。
現在更新情報の管理ページを作っています。 更新情報（テキスト以外）に画像を3点同時にアップできるようにしたいのですが、そういった事は可能でしょうか？ おそらく可能だと思うのですが、 そういったサンプルプログラムがあれば、 紹介していただけないでしょうか？
ban5.txtには以下になってます。 4131048 4131053 x x 4850328 x x x x 3870357 3870369 x x 4131038 4131045 x x x この場合にxの行を一番最後の行の数値に置き換えたい場合 perlだとどのようにすればいいんでしょうか。 シェルでやろうとしたんですけどシェルだとちょっと難しいみたいなので perlでやりたいと思ってます。誰かいいスクリプトを教えて下さい。 宜しくお願いします。
perl起動法について質問なのですが、 perlでファイルを作り、一番上に#!/usr/bin/perlと書いて、perl.plという名前で保存しました。 ターミナルで$chmod 755 perl.pl $./perl.pl とコマンドをうったのですが、print文で書いたhello worldというが表示されません。 でもperl perl.plとコマンドを打つと実行されます。 一体この違いはなんなのでしょうか？学校の課題で、どうしても./perl.plとして実行させなければならないので是非解答お願いします。
はじめて質問いたします。 現在MovableType導入しようとしています。 ですが、ActivePerlとMYSQLを接続させる為のDBD::Mysqlが インストールができません。どなたか詳細な方法を 教えてください。 ActivePerl:5.10 windows XP Apache 2.0.63 DBIはインストールできています。 コマンドプロンプトで ppm-shell install DBD-mysql 上記を試すと下記のエラーがでます。 ppm 4.02Copyright (C) 2007 ActiveState Software Inc. Allrights reserved. ppm> install DBD-mysql Downloading ActiveState Package Repository packlist...not modified ppm install failed: Can't find any package that provides DBD-mysql Perl　package　managerで確認すると DBD::Mysqlはありませんでした。 よろしくお願いします。
Perl でワードファイルのヘッダーを取得するには？ perl, v5.10.0 windowsXP ワードファイル：word2003 ＜行いたいこと＞ C:\temp\word.doc　のワードファイルのヘッダー（複数行）を取得したい。 ＜状況＞ インターネットでワードファイルの本文は取得できる例がありましたが、 ヘッダーを取得する方法がわかりませんでした。 下記のプログラムでは ・ワードのヘッダーは　0　が表示される。 ・ワードの本文は取得できて表示される。 （ヘッダーを表示しようといろいろしてみましたが、できていません） よろしくお願いいたします。 ＜プログラム＞ use Win32::OLE qw(in with); use Win32::OLE::Const 'Microsoft Word'; my $word = Win32::OLE->GetActiveObject('Word.Application') || Win32::OLE->new('Word.Application', 'Quit') || die; # 読み込み my $doc = $word->Documents->Open('C:\temp\word.doc') || die; my $headers = $doc ->ActiveWindow->ActivePane->View->{SeekView} = wdSeekCurrentPageHeader; ########## ヘッダー取得（→うまくいかない）########## print "$headers->{SelectionTypeText}\n"; #null foreach (in $headers) { print $_->{SelectionTypeText}->{'Text'} . "\n"; #null print $_ . "\n"; #0 print $_->{'Text'} . "\n"; #null print $headers . "\n"; #0 } ########## 本文取得（→ＯＫ）########## my $paras = $doc->Paragraphs; foreach (in $paras) { print $_->Range->{'Text'} . "\n"; } $doc->Close();
OS：WindowsXP SP2（ファイルシステムはNTFS） Perl:5.6.1 Perlで4GB以上のファイルに対して、一定の処理を行いたいのですが、 ファイルサイズを正しく取得することができません。 ファイルテストの-sを使う方法とstat関数を使う方法を試しましたが、 どちらも結果は同じで、取得した数値は正しいものではありません。 尚、同様の環境で２ＧＢ（正確な境界はわからないが大体このくらい） 以下のファイルであれば正しいファイルサイズをとることができます。 また、以下のような別の環境で試したところ、２ＧＢを超えている ファイルでも問題なくファイルサイズを取得することができました。 OS：WindowsVista Perl：5.8.8 できれば、原因と解決法の両方を教えてもらいたいです。 そして、可能な限りPerlのみで解決したく、それもなるべく軽い処理で 行いたいです。 よろしくお願いします。
以下の文字列から、最後の「\」以降の文字列を取得する方法を 教えていただけますでしょうか。 D:\PROGRAM\ANALYZE\LAN\data0123.dat この文字列から、「data0123.dat」を取り出したい。 「data0123.dat」の部分は、拡張子含めていろいろ変わります。 よろしくお願いいたします。
現在、UNIXでhtmlタグのチェッカーを作っています。 たとえば、 <a><b> <c> というhtmlファイルがあるとします。（<a>,<b>,<c>などのタグがあるとする） これを配列に <a> <b> <c> という風に入れたいのですが、現在は #!/usr/bin/perl @allfile = (); open(f, "test.html"); while($file = <f>){ 　　　　chomp $file; 　　　　if ($file =~ /^<.*>/){ # allfileにタグを1つずつ格納する 　　　　　　　　@allfile = (@allfile,$file); 　　　　} } close(f); としていてif ($file =~ /^<.*>/)　の後に改行コードを入れたいのですがどうすれば入れれますか？
$PR_data=<<"EOM"; EOM EOM間にperl文を入れたいんですがどのようにしたらよいのでしょうか？よろしくお願いいたします。
初めて質問させていただきます。 perl初心者です。 メールフォームの確認画面の出ないものを作成し（mail.cgi）問題なく稼動していますが何かと不便なので 確認画面のを表示させたいのですがどうすれいいのか 教えていただきたいです。 現在はフォームより送信されてきたデータ-をそのままメール送信しています。 perlでフォームデータ-を読める形に整形し表示するまではできています。 ここから先が分かりません。 いろいろ調べましたが分からず書かせて頂きました。 どなたか　よろしく御願いいたします。
演算子のオーバーロードを行うパッケージ「overload」の使い方を教えてください。 例えば、 2 + 3 のような加法演算子「+」をオーバーロードして減法演算子にし、 -1 と出力させるには、どのように書けばよいのでしょうか？ http://perldoc.jp/docs/perl/5.6.1/overload.pod 上記のperldocの日本語訳を読みましたが、理解するに至っていません。 どなたか、簡単にご説明頂けないでしょうか。ご教示よろしくお願い致します。
Perlの本家のリファレンスはあるのでしょうか？ 個人の方が運営されているPerlリファレンスのページはあるのですが、 本家の、http://www.perl.org/ には、そのようなページが見つかりませんでした。 関数リファレンス、文法などについて正式なページをご存知の方いらっしゃましたら教えていただけないでしょうか。
------------------------------------ c:\work\a.bat c: cd \work convert.pl sample.html convert.pl sample1.html convert.pl sample2.html … ------------------------------------- c:\work\convert.pl $infile=$ARGV[0]; $outfile=$ARGV[0]; # 変換後ファイルは、拡張子をtxtにして区別 $outfile=~ s/\.html/\.txt/; # ファイルを開く open( IN, $infile ); @xx = <IN>; close(IN); # 抽出行の先頭行番号を取得 $i=0; for (@xx) { if ($xx[$i]= ~ /Array/){ $start = $i; last; } $i++; } # 抽出行の最後行番号を取得 for ($j = $start; $j <= 100; $j++) { if ($xx[$j]= ~ /\)\;/){ $end = $i; last; } $j++; } # 書き込み用にファイルを開く open( OUT, "> $outfile" ); for ($k = $start; $k <= $end; $k++) { print(OUT $xx[$k]); } # ファイルを閉じる close( OUT ); ------------------------------------- c:\work\sample.html <html> <head> <script type="text/JavaScript"> <!-- sample(); var a = new Array("ああああ", "いいいい", "うううう"); var b = new Array("ええええ", "おおおお", "おおおお"); function init(){ } --></script> </head> <body onload="init();"> </body> </html> ------------------------------ というようにファイルを作り、a.batを実行すると、 htmlファイルのvar aに該当する行(sample.htmlの場合、６～８行目)だけ 取り出して別ファイルに吐き出すようなプログラムを作ってみたのですが、 うまく動きません。 なお、単純にforeach文で@xxをoutfileに出力するのはできました。 部分だけ取り出そうとすると失敗しました。 どこを直せばいいのでしょうか？
----------- calc.pl -------- $a=1; $b=2; $c=$a+$b; print "$a+$b=$c"; というPerlファイルの$a,$bをcalc.pl内で固定値にするのでなく ----------- calc.bat -------- capl.pl 1 2 calc.pl 5 3 calc.pl 4 1 … のようにして、perlファイルのパラメータで任意に設定したいのですが、Perlファイルのパラメータは、どんな変数名になるのでしょうか。
任意のディレクトリ構造を分析してその構造(ファイル名をkey)をXMLなりハッシュに吐き出すことができるモジュールなり方法を模索しています。 ＸＭＬでいうXML::Simpleみたいなものです。 参考------------------------------------------------------ 【XML分析:XML::Simple】→【ハッシュ:Data::Dumper】 【XML分析:XML::Simple】→【XMLファイル:XML::Simple】 ---------------------------------------------------------- グーグルなどで検索してみた限りでは、任意のディレクトリ内分析をしてくれてXMLなりハッシュに吐き出してくれるモジュールはなさそう。 そこでFile::Pathを使ってディレクトリ内を洗ってその構造を動的にハッシュにしたいと考えいます。しかし残念なことに予め構造がわかっている規則的なデータを動的にハッシュにすることはできるのですが、実際に分析するまでその階層すらわからない不規則なツリー状のデータ構造を動的にハッシュ化するプログラミング能力を持ち合わせていません。 そこで質問しかないということになりました。ぜひお知恵をお借りしたいと思っています。よろしくお願いいたします。 本当に簡単ですがこのような不規則なディレクトリ構造を動的にハッシュにしたいと思っています。この例ではディレクトリ構造がわかってますが、分析するまでわからないものとしてみて頂ければと思います。 test1(dir)―――――test2(dir)――――――――data1.txt(file) 　　　　　　　　　　　|　　　　　　　　　　　| 　　　　　　　　　　　―data1.txt(file)　　　―data2.txt(file) 　　　　　　　　　　　| 　　　　　　　　　　　―data2.txt(file) $test1　=　{ 　　　　　　'test2'　=>　{ 　　　　　　　　　　　'data1'　=>　 　　　　　　　　　　　　　　　　　　　　　　　　{ 　　　　　　　　　　　　　　　　　　　　　　'path'　=>　'test1/data.txt', 　　　　　　　　　　　　　　　　　　　　　　'parent_dir'　=>　'test2' 　　　　　　　　　　　　　　　　　　　　　　　　}, 　　　　　　　　　　　'data2'　=>　 　　　　　　　　　　　　　　　　　　　　　　　　{ 　　　　　　　　　　　　　　　　　　　　　　'path'　=>　'test2/data.txt', 　　　　　　　　　　　　　　　　　　　　　　'parent_dir'　=>　'test2' 　　　　　　　　　　　　　　　　　　　　　　　　}, 　　　　　　　　　　　　　　　　}, 　　　　　　'data1'　=>　 　　　　　　　　　　　　　　　　　　　{ 　　　　　　　　　　　　　　　　　'path'　=>　'test1/data.txt', 　　　　　　　　　　　　　　　　　'parent_dir'　=>　'test1' 　　　　　　　　　　　　　　　　　　　}, 　　　　　　'data2'　=>　 　　　　　　　　　　　　　　　　　　　{ 　　　　　　　　　　　　　　　　　'path'　=>　'test2/data.txt', 　　　　　　　　　　　　　　　　　'parent_dir'　=>　'test1' 　　　　　　　　　　　　　　　　　　　} 　　　　};
すみません。先輩の作ったPerlソースを机上で追っています。 Perlの実行環境がないので、よく動きが理解できないところが 多々あります。その中でも正規表現がどうにも理解できません。 以下の正規表現 ^http://([^/]*[.-])?(abc|efg?|hij|xxx)[.-] の場合、以下の例だと一致するのはどれになりますでしょうか？ http://hij.com/ http://aahij.com/ http://hijaa.com/ http://aahijaa.com/ http://aa-hij.com/ http://hij-aa.com/ http://aa-hij-aa.com/ http://www.hij.com/ http://www.aa-hij.com/ http://www.hij-aa.com/ http://www.aa-hij-aa.com/ http://www.aahij.com/ http://www.hijaa.com/ http://www.aahijaa.com/ http://www.zzz.com/hij.html http://www.zzz.com/aa-hij.html http://www.zzz.com/hij-aa.html http://www.zzz.com/aa-hij-aa.html http://www.zzz.com/aahij.html http://www.zzz.com/hijaa.html http://www.zzz.com/aahijaa.html 簡単な解説も頂けると助かります。宜しくお願いします。
お世話になっております。 perlスクリプト中でncftpgetを使って、FTPサーバーからファイルをダウンロードするスクリプトを作成しております。 ところがshellでは問題なくいくのですが、perlでは上手くいきません。 ＜ソースコード＞ ※$DATE以外は文字列 ※$DATE = `date +%Y_%m_%d`; system "ncftpget -u $USER -p $PASS -a -t 15 -e $WORK_PATH/logfile_$DATE -d $WORK_PATH/logfile_ncftp_$DATE $ADDRESS /tmp /tmp/$FILE 2>> $WORK_PATH/logfile_$DATE 1>/dev/null"; perl -wc ではOKです。 perl -d で行うと、ncftpgetのUsages等(オプションミス等の時に表示されるものです)が表示されてしまい、その後、「-d: 見つかりません。」となってしまいます。 また、上記ソースコードをshellスクリプトでそのまま書き直すと、正常に動きます。 加えて、$DATEのみ適当な文字列(1111や2222)等にすると、問題なく動作します。 $DATEに値が入っていないのか思ったのですが、system関数前後で標準出力させてみると、正常に表示されてます。 $DATE部分に日付を入れたいので、固定にするわけにはいかないですし……。 何故perlだと上手くいかないのでしょうか？
Perlを勉強し始めました。 掲示板などで、書き込みがあった場合には 確認ページを表示し(教えてgooのような)、 そうでは無かった場合エラー表示させる というようなことはどのようにして行っているのでしょうか？ わかる方いましたら教えて下さい。 宜しくお願いします。
あるお店のホームページを作成しております。その中にショッピングカートを取り入れたいのですが、どれを使用していいのかわかりません。お勧めのものを教えてください。 希望としては、ページ（html）はオリジナルで作成したい。検索機能がついている。できれば、設置の為の説明が充実している。 無料のものの方がもちろんうれしいですが、少額であれば購入でもかまいません。 私のスキルとしては、html、cssは問題ありません、Perl、phpは基本のキぐらいの知識です。 よろしくお願いします。
Perl初心者です。 PerlでOracleに接続し、結果をCSVを出力したいのですが 下記プログラムだとなにも出力されません。 Oracle10g OS:Linux *** #!/user/bin/perl # # # DBI モジュールの読み込み use DBI; #接続 my $hDb = DBI->connect("dbi:Oracle:dbname", "user/pass") or die "CONNECT ERROR $DBI::errstr"; #SELECT # $hSt = $hDb->prepare("SELECT ID,NAME FROM MASTER"); open(OUT, ">data.dat"); #実行 $nRes = $hSt->execute; #データの取得 while($raRes = $hSt->fetchrow_arrayref) { print OUT join(",", @$raRes), "\n"; } # ファイルクローズ close(OUT); $hSt->finish; $hDb->disconnect;
いつも参考にさせて頂いています。 Perl初心者です。 フォームの入力チェックを作成したいと思っています。 チェック項目 ・会社名　　　　→　空入力でないか、全角入力であるか ・住所　　　　　→　会社名のチェックと同様 ・電話番号　　　→　空入力でないか、半角であるか 処理 上の条件を満たさなかった場合は 「全角で入力してください。」や 「電話番号は半角数字で入力してください」 などといった コメントを付けたページを表示させる。 満たした場合は 「登録しました。」 というようなページを表示。 そこで、入力チェックの条件文を書いたのですが 空入力された場合の条件式がわかりません。 どなたか教えて下さる方がいらっしゃいましたら 宜しくお願いします。 また、入力チェック後のページ切り替えはどのように 行っているのでしょうか？ 宜しくお願いします。 #-----社名チェック----- if ($name =~ /[\xA1-\xFE][\xA1-\xFE]/) { $namecheck = ""; } else { $namecheck = "全角入力をして下さい。"; } #-----住所チェック----- if ($adr =~ /[\xA1-\xFE][\xA1-\xFE]/) { $adrcheck = ""; } else { $adrcheck = "全角入力をして下さい。"; } #-----電話番号チェック----- if($tel =~ /^[0-9]+$/) { $telcheck = ""; } else { $telcheck = "電話番号は半角数字で入力してください。"; } ※会社名、住所の全角チェックはjcodeでEUC-JPに変換しています。
fedora9をインストールして perl -MCPAN -e shellをすると Can't locate CPAN.pm in @INC...となります。 今までWindowsでは意識しませんでしたが、モジュールをインストールするために使うものがインストールされていないなんて・・・ びっくりしています。 どうすればよいのでしょうか？ Fedora9は、初心者には難しい？ 他によいRedhat系のLinuxはありますか？ このままがんばって使う方が良いでしょうか？
MacOSX10.4でPerlを勉強したいと思ったのですが、初歩の初歩で躓いてしまいました… web共有を開始し、http://localhostは表示させられました。 CGI-Executablesの中にファイルを保存して、http://localhost/cgi-bin/○○.cgiのアドレスでアクセスしましたが、エラーになってしまいました。 アクセス権がないと出ていたように思います。 今同じアドレスでアクセスするとサーバに接続出来ませんと出ます。 ネットで情報を集めて色々試しているうちにわけがわからなくなってしまったんですが… 現在はweb共有は停止していて、開始しようとしても出来ません。 でもhttp://localhostは表示出来ます。 これはどういう状態なんでしょうか？ もしかしてセキュリティ的にとても危険だったりするのかなあと心配になっています。
while(my($key,$val) = each %PL){ @VS_VALUES = split(/\s/,$val); print $VS_VALUES[5]; } あるPerlゲームの改造を行っています。 $VS_VALUES[5]の表示順をランダムにしたいと考えていますが、自力では難しそうです。よくわからないのですが、%PLの配列をランダムにするのでしょうか？書き方をお教えいただければ大変助かります。お手数ですが、よろしくお願いいたします。
今、data.csv（カンマ区切り）として、左から順位、名前、性別という3項目で、10人程度のリストデータがあります。 data.csv（カンマ区切り）を編集するようにしていますが、順位は重複してはならないので、重複していたらエラーを出したいのですが。。。 ($rank,$name,$sex) = split(/\,/,$line); です。 open(IN,"$logfile") || &error("ファイルが開けません"); @lines = <IN>; close(IN); # 情報の書換え foreach $line (@lines) { ($rank,$name,$sex) = split(/\,/,$line); $line = "$in{'rank'},$name,$sex\n";} push(@new,$line); } # ファイルを更新 open(OUT,">$logfile") || &error("ファイルが開けません"); print OUT @new; close(OUT);
if文にてリファラーのパターンマッチを行って、どちらの場合もhtmlを表示したい場合、関数はprintでいいのでしょうか。 どなたか解る方、ご判断お願い申し上げます。 ＜記述例＞ #!/usr/bin/perl my $ref = $ENV{'HTTP_REFERER'}; # topb.htmlを表示するためのHTTP_REFERER値を設定 if ( $ref =~ '特定のリファラーを含むURL' ){ print "topb.html"; } else { 　print "topa.html"; } }
表形式のデータをエクセルからテキストファイルでFTPし、そのデータをCGIで表示するものを作成中です。 FTPまで8割くらいできたところで、CGI（perl)に取り掛かり、まず、データの読み込みが出来ていることを確認するために、読んだデータをそのまま打ち出すルーチンをつくり、小さなデータで実行してみたところ以下の事象が起こりました。 ---- perlのコード（部分） ---- foreach $line (@lines) { @a = split(/,\t/, $line); foreach $a (@a) { print "＜$a＞　"; } print "<br>\n"; } ------------------ @linesはデータの項目群（1行分）のイメージです。項目の区切り文字として「,\t」を使用しています。 ---結果のブラウザ表示の例（一部）--- ＜[Format]＞　＜#FFFFFF＞　＜#555555＞　＜#F8F8FA＞　＜true ＞ ---------------------------- 表示された最後の項目（上例の場合true）の後にスペースが開いてしまいます。 いろいろ調べたところ、データには異常ない（スペースはない）ですし、試行錯誤して最後に気がついたのがブラウザ表示のソースを見ること ---ブラウザのソース--- ＜[Format]＞　＜#FFFFFF＞　＜#555555＞　＜#F8F8FA＞　＜true ＞　<br> --------------------- となっており、ソースの改行がスペースの原因ということまではわかりました。 また、上記例は5項目ですが、行により項目数が違いますが、全行とも必ず最後の項目の右括弧（＞）の前で改行されてしまっています。 CGI側からの出力は<br>の後の改行だけだと思っているのですが、なぜ最終項目だけ改行がはいるのでしょうか？　しかも＞の前に・・・ データはちゃんと読めているようなので、作業をすすめる上では問題ないのですが、どうも気になりますのでどなたかヒントをお願いします。（なお、サーバはUNIXのはずです。）
perl5.8.5でCGIのプログラムを作っています。 全角・半角が混じったテキストで20文字毎に改行を入れたいと思っています。 プログラムの文字コードはEUCで書いています。 （変換前）12345678901234567890123456789012345678901234567890 　　　↓ （変換後）12345678901234567890\n12345678901234567890\n1234567890 という感じです。 いろいろな方法で実現できると思ったのですが スマートな書き方を教えていただけますでしょうか。 よろしくお願いいたします。
数値、記号、カナのすべてを半角から全角に変換したく Encode::JP::H2Zを利用しサンプルプログラムを書いてみました。 セーブは、s-jisで行っているのですが以下のコードを試しましたがまったく変換されません。何処がいけないのでしょうか？ 以下を実行すると、 h2z: 012ABCabc!@#ア??ガダパ h2z: となってしまいます。 #!/usr/bin/perl use Encode; use Encode::JP::H2Z; my $str_h = ' 012ABCabc!@#アイウガダパ'; my $str_2 = '　 ０1２ＡbＣａｂｃ！@＃アイウガダパ'; my $char_conv; $char_conv = Encode::encode("euc-jp", $str_h); Encode::JP::H2Z::h2z(\$char_conv); $char_conv = Encode::decode("euc-jp", $char_conv); print " h2z:" . $char_conv . "\n"; $char_conv = Encode::encode("euc-jp", $str_h2); Encode::JP::H2Z::h2z(\$char_conv); $char_conv = Encode::decode("euc-jp", $char_conv); print " h2z:" . $char_conv . "\n";
携帯GPSから現在地を取得して、特定の住所まで誘導したいのですが サイトで調べても現在地の取得方法はあっても、そこから目的地まで 誘導できる方法を見つけられませんでした。 CGI等で、そういったプログラムや方法はないでしょうか？ 宜しくお願いします。
ハッシュのキーのリストを取ってきたいのですが、期待通りの動きをしてくれません。 いろいろ試したところ、以下のようなコードを作成した時、エラーになるようです。この場合、son, daughter, papi, mamaだけを出力したいのに、uncleが混じってきます。 正しいキーを抽出するには、どうしたら良いのでしょうか？ perlのバージョンは、5.8.8です。 my %family = ( son => {age => 27, sex => man, height => 175}, daughter => {age => 20, sex => woman, height => 160}, papi => {age => 60, sex => man, height => 170}, mama => {age => 57, sex => woman, height => 161}, ); if(exists $family{'uncle'}->{age}){ } foreach my $key(keys %family){ printf "%s\n", $key; }
メールの受信表示をwebでするようにプログラムを作成しましたが、日本語の件名がきちんと表示されません。 「中国の消費者物価、４月は8.5％上昇・食料品など高止まり」が「中国の消費者物価、４月は8.5」のように途中で切れてしまいまいます。正しく表示させるにはどのようにしたらよいでしょうか？ 以下はプログラムの抜粋です。 #!/usr/bin/perl require 'lib/jcode.pl'; use CGI qw(:standard); use Mail::POP3Client; use Jcode; （略） foreach ( $pop -> Head( $i )) { s/^Subject: (.*)/jcode($1)->mime_decode()->sjis/ie and $sub = $_;
現在、メールフォームのＣＧＩを自作しています。 ＰＣ：WindowsXP 言語：Perl(v5.6.1) ローカルテスト環境のためにインストールしたソフト： AN HTTPD, ActivePerl, Radish, Sendまね～る 教本：CGI/Perl作り方入門(KENT著) 簡単なメールフォームを作成し、動作確認も上手く行っているのですが、 数回～数十回に一度、処理がフリーズする現象が発生します。 (AN HTTPDが"プロセス終了待ち"、Radishがメール送信タスクのままいつまで経っても終わらない) どうやら、前のメールの送信タスクが完了しないうちに新しくメール送信すると、この現象が起こるようです。 教本に載っていたサンプルでも同じ現象が起こるため、CGIではなく ローカルテスト環境がちょっと不安定？なのだろうと、個人的に考えていますが、 初の自作ということもあり、このまま実動サーバにて稼動させるのには若干不安があります。 そこで、Sendまね～る＆Radish以外でメールフォームのローカルテストが可能なソフトを探しています。 フリーソフトや解説サイトがあるものだと嬉しいのですが... ご存知の方教えてください!! よろしくお願いします。
メニューがコンテンツ変更で増減したときの管理がしやすいように、メニュー部分をCGIで作り、全ページで同じメニューを表示させるようにしました。 通常のHTMLファイルはこれで正常に表示するのですが、メールフォームCGIや掲示板CGI等にも同じように表示させたいのですがうまくできません。 HTMLファイルと同じように「include virtual」を記入しても何も表示されず、ソースを見ると「include virtual～」がむなしく表示されているだけでした。 で、次に「require '../menu/menu.cgi';」を試してみたのですが、こちらは500エラーが出てしまいます。 どのようにしたらよいのでしょうか? メニューCGIはただのHTML文ではなく、ページに応じたサブメニュー表示等をしているのでデコード処理をしていますが、これが原因とかありますか?
ある理由があって過去にやってたサイトをどうしても掘り返さなくてはならなくなりました。しかしパスワードを忘れてしまったんですorz 携帯サイトです。ＰＣからアクセスできる状態です。 8桁までの数字ということは分かってるんですが、一つ一つ打ち込むのでは時間が遅すぎます。 自動的に数字を打ち込んで、認証失敗であればまたもどって次を打ち込んで・・・ とやってくれるようなプログラムは組めないのでしょうか？ プログラムは趣味程度にやっていた程度なのであまり分からなかったのでプログラミング[その他]のカテゴリに書き込んだところPerlでできるということで、より多くの意見を頂けるかと思ってこちらに再書き込みしました。 他人に悪用される可能性から、前に書き込んでもらった方からはヒントだけをいただきましたが初心者で初心者でありますのでよくわかりませんでした… これを機にperlを学びたいとは思っていますが、だいたい今月中にはサイトを掘り返したいので急いでいます。 どうしてもここではアレでしたらメールでおしえていただければありがたいです。 よろしくお願いします。
お世話になります。 いろいろ編集パタン等勉強しているつもりですが、 分かりませんで、またここに来てしまいました。 ちょっと前に『前ゼロ』を教えていただきました。 今度は『前スペース』をやりたいのですが、 悩んでいます。 そもそも「printf」と「sprintf」との区別も付きません。 調べた結果では、７桁で前スペースにするには、 $kmk = sprintf("%7d",$kmk); でよいのかなと思います。 そして、$kmkが"123"なら”bbbb123”(bはスペース）となると思うのですが、 画面に表示されたのを見ると、単純に”123”となってしまいます。 以下に実際を表示しましたので、宜しくお願いします。 まず、やっていることは、 cgiで、有効桁だけでセットされているファイルを読み、 画面にリストします。 その際、前スペースにより各項目の位置を揃えたいというモノです。 【ファイル（@kariire)の中身】 47213<>1<>20080503<>3000<>50000<> 38221<>5<>20080508<>25000<>100000<> 18994<>1<>20080506<>2700<>385000<> 【cgiの中身】 foreach $line (@kariire) { local($kmk1,$kmk2,$kmk3,$kmk4,$kmk5) = split(/<>/,$line); $kmk1 = sprintf("%5d",$kmk1); #氏名コード $kmk2 = sprintf("%1d",$kmk2); #借入事由 $kmk3 = sprintf("%8d",$kmk3); #異動日 $kmk4 = sprintf("%6d",$kmk4); #借入額 $kmk5 = sprintf("%7d",$kmk5); #限度額残 &output; } sub output { print <<"STOPP"; $kmk1,$kmk2,$kmk3,$kmk4,$kmk5 <br> STOPP } 以上です、宜しくお願いします。
htmlファイル内に <td class="numberCol" vAlign="top">48</td><td vAlign="top"> ： ： <td class="numberCol" vAlign="top">49</td><td vAlign="top"> ： ： <td class="numberCol" vAlign="top">50</td><td vAlign="top"> という48から始まる行があるのですが、この数字を1から順番に書き換えたいです。 numberColというので行をマッチさせることができますが、どのようなスクリプトを書けばよいでしょうか？ よろしくお願いします。
配列の要素数について質問させていただきます。 プログラムの中で、以下のようにファイルの内容を1行ずつ読み込み、配列に入れています。 　open (IN, "ファイル名"); 　@data = <IN>; 　close (IN); こういった形で配列に入れていった場合、入れられる最大行数（＝最大要素数）はどれくらいになるのでしょうか。 現在100万行のテキストファイルは、問題なく読み込めているようでした。 ご存知の方がおられましたら、ご回答いただければと思います。 よろしくお願いいたします。
変数のセットなど細かい内容は省かせていただきます。 if ($ENV{'REQUEST_METHOD'} eq "POST") { #メールアドレスチェック --------------------------------- if (!$CGI{'mail'}) { &error("メールアドレスを記入してください"); } if ($CGI{'mail'} =~ /\,/) { &error("メールアドレスにカンマ「\,」が含まれています"); } if (($CGI{'mail'}) && $CGI{'mail'} !~ /.+\@.+\..+/) { &error("メールアドレスの書式が不正です"); } &writelog; print "送信完了しました。\n"; } と書いたのですが、errorについてはそれぞれ出力されますが、 完了画面が出ません。 間違いはどこか指摘願います。
UNIXを使っています。 HTMLファイルを読み込み、その中にあるHTMLタグのチェック（終了タグがあるか、など）をするというプログラムを作っています。 URLを入力し、HTMLファイルを直接拾ってくるようなことがPerlでは出来るそうなんですがどういう風にプログラミングすればいいのでしょうか？
ログファイルの中身が むらかみ　　1,2,3　4,5,6　7,8,9　・・・ ぽんた　　　a,b,c　d,e,f　g,h,i　・・・ しゅういち　い,ろ,は　に,ほ,へ　と,ち,り　・・・ のようにタブ区切りのログファイルの各行2番目の項目を削除して上書き保存 むらかみ　　4,5,6　7,8,9　・・・ ぽんた　　　d,e,f　g,h,i　・・・ しゅういち　に,ほ,へ　と,ち,り　・・・ という作業をするスクリプトを組みたいのですが、perlはまったくわかりませんで苦闘しております。 最終的にcronで指定時間にスクリプトを動かせるようにしたいです。 よろしくお願いします。
お世話になります。 なかなか説明自体が難しいのですが、 以下のようなファイルを読み、リストしたいのですが、 単純にリストするのではなく、ソートして並べ替えてからリストが必要です。 ファイル構成は、 名前<>所持金<>限度額<>最終異動日<> のような属性で、 (1)山田太郎<>120000<>200000<>080501<> (2)林佳子<>32500<>100000<>080429<> (3)浪速義郎<>257000<>300000<>080322<> (4)、、、、 のように入っています。 （(1)、(2)、(3)、、はレコードです。） リストは、 例えば、 あ：限度額の降順 い：最終異動日の昇順 等と指示されます。 例えば、 上記『あ』の例（限度額の降順）で教えていただけないでしょうか。 期待する結果は、 (3)浪速義郎<>257000<>300000<>080322<> (1)山田太郎<>120000<>200000<>080501<> (2)林佳子<>32500<>100000<>080429<> (4)、、、、 となれば良いのです。 ちなみに単純に読み込んだままでリストの時には以下のように書いています。 open(IN,"$file") || &error("Can't open $file"); @lines = <IN>; close(IN); foreach $line (@lines) { 　　　　local($trm01,$trm02,$trm03,$trm04) = split(/<>/,$line); 宜しくお願いします。
お世話になります。 有効桁が１～３桁の数字があります。 桁を最大の３桁に揃えて表示したいので、 前にゼロを付けたいのです。 例　　　３　→　００３ 　　　１２　→　０１２ 　　２３４　→　２３４（そのまま） 宜しくお願いします。
ファイルから a,h,2,26,f というデータを読み込んで %hash = (1=>'a',2=>'b',‥‥,26=>'z') のような連想配列と比較させ 1,8,b,z,6 となるように、読み込んだものが英字ならキーを、数字なら値を 出力させたいのですが可能でしょうか？ お教え願います。
いつも参考にさせて頂いています。 Perl初心者です。 ある計算結果の値で小数点以下が出た場合は切上げる、 また、そうじゃない場合はそのままの値を使うというような事を 行いたいのですがどういった条件文を書けばいいのかがわかりません。 どなたか教えて下さる方がいらっしゃいましたらお願いします。
アルファベット、数字を読み込んで、対応した文字、数字に変換し 出力したいのですが‥ 例えば [a-z ]= [1-26]と対応させ a,b,5,7 を読み込んで 1,2,e,g と出力させる感じです。 tr///などでコンパクトにまとめられるでしょうか？ お教え願います。
／　［　【　の文字をマッチさせるには？ 環境　perl　version 5.005_03 while($line = <IN>){ if($line =~ /／/){ （マッチした場合の処理） } } などとしたいのですが、／　［　【　の文字にマッチさせるには どのように記述したらいいのでしょうか？ 上記のように普通に指定するとマッチしませんでした。 よろしくお願いします。
以前は sudo -H CPAN でCPANを起動をしていたのですが（間違っていたかもしれませんが）、perlでデータベースを扱おうといろいろインストールをしていたらついに訳が分からない状態にまでなってしまいました。 具体的にですが、 環境はMac Leopard 状態は、CPAN、sudo -H CPAN、sudo perl -MCPAN -e shell、といずれの方法でCPANの起動を行っても必ず初期設定からはじまってしまいます。 以下は$cpan で起動しようとした時です。 $ cpan CPAN: File::HomeDir loaded ok (v0.69) Sorry, we have to rerun the configuration dialog for CPAN.pm due to some missing parameters... The following questions are intended to help you with the configuration. The CPAN module needs a directory of its own to cache important index files and maybe keep a temporary mirror of CPAN files. This may be a site-wide or a personal directory. I see you already have a directory /Users/kondoujuya/.cpan Shall we use it as the general CPAN build and cache directory? <cpan_home> CPAN build and cache directory? [/Users/kondoujuya/.cpan] ここからまた、asia japan ...と設定するハメになってしまいます。。。 そして最後に前までは cpan> だったのが cpan[1]>　と変わっていました。 覚えている範囲でいじったものは cpan > install Jcode cpan > install Bundle::LWP cpan > install DBI cpan > reload cpan > install DBD::mysql ここでmysqlに失敗していろいろ調べていたら気付けばこんな状態に陥ってしまいました。 また今の状態でcpanを起動してコンソールを強制終了すると、次のコンソールを開くと何も表示されなくなり、PC自体もフリーズしてしまいます。 調べても全く分からなく、とても困っています。。知っている人がいればどなたかアドバイスを宜しくお願いします。
読み込むファイルの内容は a,b,c,d,e,f,g 1,2,3,4,5,6,7 です。 このファイルを読み込んでreverse,sortを使わずに一行づつ反転させ、出力させたいのですが、とりあえづ下記のようにしましたが、以降てがつけられません。 $filename = "file"; open HANDLE,"<$filename"; while ($array = <HANDLE>){ @fields = split /,/,$array,; for($i=0;$i<7;$i++){ @list = pop(@fields); return @list; } } 判り難い質問の仕方ですみません。よろしくお願い致します。
$a = join($aaa,@a); 文字を結合する時に、$aaaのあとに結合するのではなく、$aaaの前に結合させることはできるのでしょうか？ もし、できないとしたら前に結合する方法のアドバイスを下さい。
http://quiz-tairiku.com/nan/q1.html perl初心者です。 perl修行の一環として、上記URLに掲載されている虫食い算を解くperlのコードに挑戦しています。 10の変数と10のforループを使えば何とかなりそうなのですが、 これだと負荷が非常に高いコードになるため、これ以外の方法を模索しています。 何か良い案はないものでしょうか？ よろしくお願い致します。
新しいログを追加で上に書き込む方法はどのようにしたらよいのかアイディアがありません。 ご教授願います。 if($mode eq "html"){ flock(FH, LOCK_EX); open(FH,"${datafile}"); @html = <FH>; close(FH); flock(FH, LOCK_NB); $html = join('',@html); @html = split(/$chtml/ , $html); $html[1] = $data; $html = join($chtml,@html); flock(FH, LOCK_EX); open(FH,">$datafile"); print FH $html; close(FH); flock(FH, LOCK_NB);
perlであるxmlファイルを検索して xmlファイルを表示する方法についてお伺いします c:\ -A --X 1.xml 2.jpg 3.jpg --Y --Z このような構造でxからzまでのディレクトリをさがして 「.xml」のファイルの中にある文字列「uuuuu」があれば そのファイルのリストを出力して、クリックすると表示 させたいのですが、perlでできますでしょうか このときファイルのリストを出力するときに 実際のファイル名を.xmlにある特定のタグについて囲まれた 文字列を表示したいと思っています。 （<name>abcde</name>） また「uuuuu」は任意で入力を要求するようにしたいと 思っています。 私ができることはテキストファイルの中身を表示するくらいです open (FILE, 'c:\A\X\1.xml') or die "$!"; while (my $line = <FILE>){ chomp $line; print "$line\n"; } close (FILE); ほかにこのような参考書、urlなどありましたら教えて いただけると幸いです よろしくお願いします
初心者です。ＣＧＩ掲示板の投稿欄に投稿キーを設置しました。 --------------------------------------------------------- print<<"_FORM_"; <input type=text name=guard size=8$ff> <b> 555 と半角で入力</b> _FORM_ ログ書きこみ処理 if ($FORM{'guard'} ne "555"){&er_("　エラーです。　");} --------------------------------------------------------- （以上は全て bbs.cgi ファイルに記入） この状態で正常に作動します。（555 入力で○　それ以外は×） これを乱数でやろうと思い自分で付け加えました。 $random_x = int( rand(999) ) + 1; （set.cgi というファイルに記入） 555 の部分を $random_x に変更してbbs.cgiプログラムを書き換えるのですが、 表示された乱数を入力しても「エラーです」と表示され投稿できません。 どこが間違ってますでしょうか？よろしくお願いします。
カタカナ３文字と漢字の名前がセットになったデータを、頭文字３文字のカタカナで50音順ソーティングしたいのですが、何故かうまくいきません。 原因と解決法をご教授いただければ幸です。 データは例えば、以下の様なものです。 （以下はプログラムでソーティングした結果ですが、以下のとおり微妙に50音順でソーティングされません） イジュ　伊集院光 アキモ　秋元康 オグリ　小栗旬 スピッ　スピッツ エハラ　江原啓之 スマッ　SMAP ナカガ　中川翔子 ニュー　NEWS バクシ　爆笑問題 イノウ　井上陽水 ヤマダ　山田太一 ---------------- 私が試したソーティングプログラムは以下です。 ---------------- $space = "　"; foreach $key (sort keys %yomi1) { print $yomi1{$key}.$space.$title{$key}."<BR>"; ;} ---------------- $yomi1{$key}には名前の頭文字カタカナ３文字が入っています。 $title{$key}には漢字の名前が入っています。 以上、よろしくお願い致します。
こんにちは。 いつもお世話になっております。 現在Perlを使用してプログラムを組んでいますが、無限ループになってしまうらしく、次の画面に遷移しません。 @selected2には最大10個までの要素が入ります。（要素数は都度違う） その要素の中から$carno以外の要素を1つ選びたいのですが、このプログラムだとうまく動きません。 do-whileを取るととりあえずは動くので、条件の所が間違っているようなのですが、どう考えても正しいような気がします。 do{ if($ransuu==0){ $ransuu=int rand(11); } for($k=1;$k<=$a;$k++){ if($selected2[$k]==$ransuu){ $second=$ransuu; } } }while($ransuu==$carno || $second!=$ransuu); アドバイスをよろしくお願いいたします。
perl初心者です(^^; CSVの一覧DATAへメール一括送信するスクリプトを製作しています。 スクリプトを実行すると、自分(from)へも送信しているのですが、 どこを編集してもなくなりません(^^; 送信はmail.cgiに明記し、from等の設定情報は、base.cgiに明記しております。 どなたかご教授頂けませんでしょうか？？ if (!open(OUTMAIL,"| @base[3] -t")) { &error($!); } print OUTMAIL "Mime-Version: 1.0\n"; print OUTMAIL "To: @base[2]\n"; print OUTMAIL "Subject: $subject\n"; print OUTMAIL "From: @base[2]\n"; print OUTMAIL "Bcc: $bccmail\n"; print OUTMAIL "Content-Transfer-Encoding: 7bit\n"; print OUTMAIL "Content-Type: text/plain\; charset=\"ISO-2022-JP\"\n\n"; print OUTMAIL "\n"; print OUTMAIL "$bun\n"; print OUTMAIL "\n\n"; close(OUTMAIL);
現在Ｐｅｒｌで予約画面を作成しています。 ソースは↓のような感じです。 ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ #! c:/perl/bin/perl #DBより取得 @type = (); @type=('シングル','ツイン'); &display; #------------------------------------------------- sub display { print "Content-type: text/html\n\n"; print <<EOM; <html> <head> <META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=Shift_JIS"> <title></title> </head> <body> <form> <table border="0"> <tr> <td>タイプ</td> ##Loop Start <td><input type="checkbox" name="kotsu" value="1"></td> <td>$type[0]</td> <td><input type="checkbox" name="kotsu" value="2"></td> <td>$type[1]</td> ##Loop End </tr> <tr> <td>お名前</td> <td colspan="4"><input type="text" size="28" name="name">(全角文字)</td> </tr> <tr> <td><input type="submit" id="submit" value=" 送　信 ">　　　<input type ="reset" value="リセット"></td> </tr> </table> </form> </body> </html> EOM exit; } ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ ＨＴＭＬのＬｏｏｐと記述している部分にＤＢより取得した値をｆｏｒ文で記述したいのですが、うまくいきません。 ＨＴＭＬ内にＰｅｒｌの処理を組み込むには、どうすればいいのでしょうか？
こんにちは。CGI初心者なので、お手やらかにお願いします。 現在、RSSを勉強しておりまして、以下のようなRSS生成CGIを作りたいです。 ご存知の先生方、どうぞ宜しくお願いします。 今回、最新情報などのCGIのログファイルからRSSを生成したいのです。 データの形式は、 ID←tab→タイトル←tab→内容 となっており、このIDがリンクの為のURLになります。 RSSリーダー等で読み込んだ時にタイトルが表示され、リンクできればと思っています。 因みに文字コードは、SJISです。 わかりずらい説明で申し訳ございません。 何卒、宜しくお願いします。
@b = grep(/マッチパターン/,@a);だと配列@aの中でマッチするものを探して@bに入れる・・・というのは理解できるんですが、 @a = grep(/マッチパターン/,@a);とし、 foreach $_ (@a) { print $_; } で参照した場合、@aの中のマッチパターンにマッチするのだけ表示されますけれども、ここでマッチしないのは削除されるのでしょうか・・。 @aから@aにいれる・・・となる事について、どのように@aにマッチしたものを入れ、マッチしないものは削除されるのかの仕組みについて、ご説明できる方はいらっしゃいますでしょうか（例えば内部的にpopやshiftが機能していて・・・みたいな事なのかな・・とか思うんですけれども） お手数ですが、ご存知の先生方ご教授願えましたら幸いです。
txt ファイル　から　ランダムに　1行読み込んで それが　フォームの入力文字と同じかを　判定し、 同じならば、次のファイルへ飛ぶ　には、 どうしたらよいのでしょうか？　お教えください。 ------------------------------------------------------ mondai.txt　に　問題を　1行に　1題ずつ kotae.txt　に　解答を　1行に　ひとつずつ 書きました。 mondai.txt　の　1行目の　解答が　kotae.txt　の　1行目 （2行目-10行目、同じ）としました。 001.cgi で　正解すれば　002.cgi を開く 不正解なら　もう一度 001.cgi を実行。 問題は　ランダムに　表示する。 まず、mondai.txt　と　kotae.txt　を　それぞれ　10行にして やってみました。 ------------------------------------------------------ すると、問題は　ランダムに表示されました。 しかし、 ##################################################### if (param('answer') eq ("$ans")){ print "Location:$num2.cgi\n\n"; ・・・ { ##################################################### が、うまくいきません。 ↓こうしてあります。どうしたら、よいでしょうか？ ↓解答したことを　file.txt に記録しよう、ともしています。 ↓ ################ はじめ ############################## #!/usr/bin/perl -T use strict; use warnings; use CGI qw(-debug :standard); my ($sec,$min,$hour,$day,$mon,$year,$wday,$yday,$isdst) = localtime(time); $year += 1900; $mon = sprintf("%02d", $mon + 1); $day = sprintf("%02d", $day); $hour = sprintf("%02d", $hour); $min = sprintf("%02d", $min); $sec = sprintf("%02d", $sec); my $num = ('1267'); my $num2 = $num + 1; my $value = param('answer'); open(FILE, "../../mondai.txt"); my @data2 = <FILE>; close(FILE); open(FILE, "../../kotae.txt"); my @data3 = <FILE>; close(FILE); my $i = int(rand(10)); my $ans = $data3[$i]; if (param('answer') eq ("$ans")){ print "Location:$num2.cgi\n\n"; open(FILE, '<+file.txt') or die "$!"; my @DATA = <FILE>; close(FILE); open(FILE, '>file.txt') or die "$!"; print FILE ("$num,$ans,$year年$mon月$day日 $hour時$min分$sec秒\n"); print FILE (@DATA); close(FILE); } else { print header(-charset => 'Shift_JIS'); print start_html("$num.cgi"); print ('<font face="century">'); print $data2[$i]; #####---問題表示 print br; print startform( -method => 'POST', -action => "$num.cgi" ); print blockquote( textfield( -name => 'answer', -size => '70', -id => "next", -accesskey => '[' ) ); print <<END; <script type="text/javascript" language="JavaScript"> document.getElementById('next').focus(); </script> END print submit(-value => 'Send ( ↑Alt+[ )'); print endform; } ################ おわり ############################## よろしく、お願いいたします。
いつもお世話になります。 1.FTPでtest.lzhというファイルをアップし、パーミッションを600にしたもの 2.perlで組んだファイルアップロードCGIを使ってtest.lzhを1と同様の場所にアップしたもの（perlでchmodで600に） ブラウザ上から1の場合はアクセス拒否されるのですが、2の場合は普通にアクセス出来てしまいます。 所有者が異なると、同じパーミッションでも違う動きをするのでしょうか？ 2のケースでもアクセス拒否させる方法はあるのでしょうか？ 基本的な考え方を間違えていたら済みません。 宜しくお願い致します。
困ってしまいました。助けてください。 CSVからデータを取りだす事が出来たのですが、 データに値段が入っているため、カンマ切りで失敗してしまいます。 FNAME,LNAME,"12,400",0,0,0,"2,400","3,800" 料金が三ケタ目にカンマを打つので、それで、 split(/,/, $data); でデータを分裂させるとおかしくなってしまいます。 正規表現でヒットさせて置換などを使いたいのですが、分からず。 データ自体をいじるのはＮＧです。 ""の間の,が取れれば良いのですが。 値段表示に,はいりません。取ってしまいたいのですが。 助けてください。
標準出力に表示したものを、そのままファイルに書き込むことは可能でしょうか？ 例えば下記のように実現できるかと思いますが、printする度に2行書くのは厳しく思ってます。 ----------------------------- open(OUT, "> outfile.txt") ; print $aaa ; print OUT $aaa ; -----------------------------
QNo.3933527 でも質問させて頂きましたが、新たな問題が出てきたので再度質問させて頂きます。 Linux環境にて、Pod::Usageを用いてスクリプトの日本語説明が記載されたUsageを作成しております。 ですが、日本語が文字化けして困ってます。 LinuxのOSにより、日本語がうまく表示される環境と文字化けするものとに分かれてしまいます。 文字化けする環境下では、スクリプト自体をlessで表示しても文字化けしてしまします。 lessで日本語を読めるような設定にすると解決しそうなのですが、 root権限が無い環境下で何か解決策はないものでしょうか？？ #/etc/man.config 　は権限が無く書き換えられません・・。 ちなみに、現在は文字化けしないようにPod::Textで表示しているのですが、usageが長文であり、windowに表示しきれず不便な思いをしております。 よろしくお願いします。
http://oshiete1.goo.ne.jp/qa3951263.html で質問している者です。 間違って、[回答への補足]　に書いてしまいました。 もう一度質問させてください。すみません。 Location を　教えていただき、とても感謝しております。 でも、私の 001.cgi は　以下のように始まっております。 print header(-charset => 'Shift_JIS'); print start_html("001.cgi"); このprint header(-charset => 'Shift_JIS');を消して if (param('answer') eq $ans){ print ('Location:002.cgi\n\n'); } else{ print header(-charset => 'Shift_JIS'); ##省略## print endform; { としたのですが、だめでした。 if (param('answer') eq $ans) が　下の方にもう一度出てくるからでしょうか？ ###### はじめ ##################### #!/usr/bin/perl -T use strict; use warnings; use CGI qw(-debug :standard); print "Location:1266.cgi\n\n"; ###### おわり ##################### としたら、001.cgi を開くと 002.cgi へ飛ぶことができました。 どこに print "Location:1266.cgi\n\n"; を書けばよいのでしょうか？　よろしく、お願いいたします。
すみません。初心者です。 001.cgi　というファイルで　フォーム　に　正解を入力して　Enterキー　を　押したら 次の 002.cgi を　開く（実行する）ようにするには　どうしたらよいでしょうか？ 今は↓このようにして　「次のファイルへ」をクリックしてもらっています。 Enterキーを押すだけで　次の002.cgi (=$num2.cgi)へ行きたいのです。よろしく、お願いいたします。 #-------- if (param('answer') eq $ans){ print ('正解'); print ("<a href=$num2.cgi accesskey=]>次のcgiファイルへ　(Alt+])</a> "); #--------
IDとパスワードを入力すると利用出来る会員制のページがあります。 認証は、クッキーとMySQLを駆使して行っています。 ログインすると、ダウンロードコーナーがあり、lzhファイルをダウンロード出来ます。 ところが、このlzh自体は直接URLを打ち込まれると、ログインしていない人でも簡単に取得出来る状態です。 lzhファイルのあるフォルダに「.htaccess」でアクセス制限をかければいいかとも思いますが、これではわざわざログインしているのに更にログインが必要になりおかしな感じになってしまいます。 普通に置いてあるlzhに対して、どのように制御する方法があるでしょうか？ 宜しくお願い致します。
Perlの勉強を始めたのですが、ActivePerlのダウンロードの仕方がわかりません。 書籍に書かれているサイトにアクセスしたのですが、どうもサイトの仕様が変わっているようで、ダウンロードの手順がわかりませんでした。 ネットでも調べてみたのですが、「このサイトのページのダウンロードをクリックしてください」と書かれていても、ダウンロードボタンが見つからず、バージョンも変わっているようでどれを落としたらいいのかもわかりません。 ご存知の方がいらっしゃいましたら教えてください。 どうぞよろしくお願い致します。
「"～@～"からのメッセージはサーバからダウンロードされませんでした。ダウンロードするには、このアカウントをオンラインにする必要があります。」というように、新規メールをクリックしても出てしまい、送信、受信ともできるのですが、内容の確認ができません。以前にあった質問から、アカウントの設定やパスワードなど調べてみましたが、設定で間違っているところや以前と変更されている部分はないようです。 環境はOSX10.3.9です。 何かヒントがある方、ぜひお助け下さい。
すいません、アホです。いろいろ調べましたが、まったくみつかりませんでした。この質問をすることは初歩すぎて失礼かとおもいますが、堪忍してくださいませ。 LWPで相互リンクをされているかどうかをCGIファイルの登録ページ後に判断したいプログラムですが、同じCGIファイル内に登録ページがありまして、<INPUT size=30 name=url>のように相手リンクを登録した自分のHTMLを書いてsubmitさせて、 if ($ENV{'REQUEST_METHOD'} eq "POST") { read(STDIN,$buffer,$ENV{'CONTENT_LENGTH'}); } else { $buffer = $ENV{'QUERY_STRING'}; } で、取り出し、$FORM{'url'}まできます。URLがちゃんと$FORM{'url'}に入っているのは画面で確認できるのですが、下記のように指定した場合、相手HTMLを取得できません。エラーメッセージはでないで、真っ白い画面がでます。 $url = $FORM{'url'}; use LWP::Simple; $content = get("$url"); print "Content-type: text/html\n\n$content"; 下記はちゃんとうつります。 $url = 'http://www.yahoo.co.jp'; use LWP::Simple; $content = get("$url"); print "Content-type: text/html\n\n$content"; これは$FORM{'url'}のエンコードの問題なのでしょうか？ まことに申し訳ありませんが、その方法をできれば具体的にお教えくださいませ。 何卒、宜しく御願いいたします。ｍ_ _ ｍ
生物学を学ぶ大学院生です。バイオインフォマティクスに足を突っ込んだため、perlを用いてデータ解析をする必要が出てきました。しかし私は生物学出身でこれまでプログラミングをしたことがなく、まずどんな環境で始めたらいいかで悩んでいます。 例えばOSについて「perlをやるならLinux/UNIXだ。」とか「macを買ったらいいよ。」とか「windowsでもできるじゃん。」など、いろいろな話を聞くので頭がパンクしそうです。 私はWindowsXPを使っています。しかし、書店で立ち読みしたPerlの参考書はUNIXを基本として説明しているものが多く、LinuxをはじめたりMacを購入したほうが勉強しやすいのではないかと思いました。 そして現在、パソコンの買い足しを検討しているのでperlを始めることも考慮して機種・OSを選んだほうがよいのでは？と感じています。 本当に１からプログラミング勉強開始で分からないことだらけです。助言がありましたらよろしくお願いします。
お世話になります。 現在、cgiでデータ書き込みのページを書いていますが、 この書き込み内容を確認するために、 同じcgiの中に確認のためのhtmlを書いています。 この確認用のhtmlは、 そっくり独立して存在するhtmlを殆どコピーして書いています。 ここで質問です。 わざわざ確認のページを書かないで、 今独立で存在する確認用のページに飛ばせる方法を教えて欲しいのです。 下のイメージです。 【今のスタイル】 　 書き込みhtml部分 　確認html部分 【やりたいスタイル】 　書き込みhtmlノミ 　　　↓飛ばす 　（別に存在の）確認html 宜しくお願いします。
CGIで会員以外アクセスできないようにしたいです。 携帯電話からのアクセスでは端末識別番号を読み込み、登録された識別番号以外からはアクセスできないようにしています。 パソコンからアクセスする際も同様に何か固有番号を読み込み識別したいのですが端末固有の番号があるのでしょうか？ 例えばau携帯からのアクセスだとHTTP_X_UP_SUBNOで端末識別番号を読み込み、登録されていなければアクセス出来ないようにしています。 ※IPアドレスから識別しようとと思ったのですが実用的ではないといわれました。 http://oshiete1.goo.ne.jp/qa3933493.html どうぞよろしくお願いします
Softbank携帯のuidは ENV{HTTP_X_JPHONE_UID｝で取得可能とネットで見たので $sbuid=$ENV{'HTTP_X_JPHONE_UID'} と記述してみたのですが、識別番号を取得できません。 同じようにauの識別番号を取得できるように $auid=$ENV{'HTTP_X_UP_SUBNO'} としてあるのですが、こちらは取得できています。 なぜソフトバンクの方は取得できないのでしょうか？
たとえば、 $A = 'aaa/bbb/ccc/ddd/eee/fff/ggg' というものがあったときにperlの正規表現でddd/のすぐ後の部分を抜き取って違う変数に入れたいのですが、それを正規表現で切り取りたいのですが、どうしたらいいかわからないです。 初歩的な質問ですが、お答えいただければ幸いです。 よろしくお願いします。
以下は日本語文字列(EUC)の指定長(byte)切出し関数なのですが、 これをShift-JIS版にするにはどうすれば良いのでしょうか？ ================================================================ sub jcut { # 日本語文字列(EUC)の指定長(byte)切出し local($string, $length) = @_; if (substr($string,$length-1,1) =~ /[\x80-\xff]/) { $length++; } return substr($string, 0, $length); } ================================================================ 宜しくお願い致します。
perlスクリプトのUsageをPod::Usageを使用して記述したいと考えてます。 その際に、Pod::Usageの中で日本語を使用したいのですが、 うまくできません。 Encode.pmは利用できる環境なのですが、どう記述すればよいのか具体的にわからず困っております。 下記のスクリプトだと、「-man」の時に日本語が表示されず文字化けしてしまいます。 恐れ入りますが、ご教授お願いします。 ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ use Getopt::Long ; use Pod::Usage ; my $man=0; my $help=0; GetOptions('help|?' => \$help, man => \$man) or pod2usage(2); pod2usage(1) if $help ; pod2usage(-exitstatus=>0, -verbose=>2) if $man ; __END__ =head1 NAME 以下省略
ある会員専用サイトをつくってます。 こんな事を考えているのですが、うまく行きません。 (1)メールフォームから名前・メールアドレスを入力しを送信。 (2)送信を押すと名前・アドレスなどと一緒に以下の情報を取得 ●IPアドレス ※$ENV{'REMOTE_HOST'}) ●ＯＳ・ブラウザ情報※$ENV{'HTTP_USER_AGENT'} ●携帯識別番号（携帯会社別） (3)上記の情報より、 ＬパソコンでアクセスするとＩＰアドレスをチェックし会員を判別 Ｌ携帯電話からだと携帯識別番号で判別 といった仕組みをつくろうと思っています。 メールフォームは自力では無いですが、オープンソースを使用し作成しました。 ※Copyright (C) 1996-2005 杜甫々　様 とほほのＷＷＷ入門>メール送信フォーム より $ENV{●●●}を組み込めば入力情報と同時に取得できると思ったのですが、うまく取れません。 十分に理解せず他人様のソースを安易に利用しようとする私が悪い事は多分に承知しておりますが、何卒ご教授お願いします。 ---以下ソース--- #!/usr/local/bin/perl #セッティング require 'cgi-lib.pl'; require 'jcode.pl'; &ReadParse(*in); $name = "$in{'name'}"; $from = "$in{'from'}"; $subject = "$in{'subject'}"; $body = "$in{'body'}"; $to = '●●●@●●.ne.jp'; #送信前処理 &jcode'convert(*name,'jis'); &jcode'convert(*subject,'jis'); &jcode'convert(*body,'jis'); #sendmail open(MAIL, "| /usr/sbin/sendmail -t"); print MAIL "To: $to\n"; print MAIL "From: $from\n"; print MAIL "Subject: $subject\n"; print MAIL "Content-Type: text/plain;\n\n"; print MAIL "お名前：$name\n"; print MAIL "本文：$body\n"; close(MAIL); #HTML表示の前処理 &jcode'convert(*name,'sjis'); &jcode'convert(*subject,'sjis'); &jcode'convert(*body,'sjis'); $body =~ s/[\r\n,\n]/<BR>/g; #HTMLに表示 print "Content-type: text/html\n\n"; print "<HTML><BODY>\n"; print "以下のメールを送信しました<HR>"; print "お名前：$name\n<BR>"; print "メールアドレス：$from\n<BR>"; print "題目：$subject\n<BR>"; print "本文：$body\n<BR>"; print "</BODY></HTML>\n"; exit;
お世話になります。 スパムメールがひどいので、メールフォームに画像認証をつけたいと思っています。 色々事情がありまして、画像認証の無料サービスやCaptchaプラグイン等のプラグインは使わず、Authen::CaptchaとGDのモジュールを使って、 (1)Captcha画像作成(cgi/perl) 　↓ (2)フォームページにCaptcha画像を表示（html） 　↓ (3)送信時にCaptcha判定(cgi/perl) 　↓ (4)エラー時にはデータを持ったまま(2)に戻る という事がしたいのです。 検索してみても、Captchaプラグイン等のプラグインの導入の仕方がほとんどで、私のやりたい事は見つかりませんでした。 もし、このやり方が難しいのであれば、全ての動作をcgiでするものでもかまいません。 どの様に記述すれば良いか、どなたか、ご存知の方はご教授お願いします。
CGIプログラミング第2版 233ページに掲載されているコードがうまく動きません。 my $pid = open PIPE, "-|"; die "$をforkできません!" unless defined $pid; unless ( $pid ) { exec FIGLET, $string or die "figletへのパイプを開けません: $!"; } このコードは入力した文字列をアスキーアートにしてくれるものなのですが、どうも最後のfigletの行が実行されていないようなのです。 openの使い方が特殊らしく、少ない行数の割に、えらい複雑なコードだな～と感じています。 openを実行した時にフォークが発生し、最終的に子プロセスがfigletを実行してくれるはずなのですが、どうも子プロセスがいない感じがします。 例えば fork; print(0); こんな感じにフォークをした場合 00 のように0が2個出力されるのですが、 この例題のopenの直後に print(0); と記述しても 0は1個しか出力されませんでした。 子プロセスはどこへ行ってしまったのでしょうか。 この例題は私の理解力では意味不明です。 誰か分かりやすく教えてください～～
ActivePerlをWindowsで動かすとき、ファイルのパスを指定するのに "C:\\work\\perl"のように、フォルダとフォルダの区切りには「\\」を使います。 これを UNIX上でPerl CGIを動かすときのように「/」に換えて、"C:/work/perl"としても問題なく動いているようです。 ActivePerlで"C:/work/perl"と書くことは、問題ないのでしょうか？それとも推奨されない行為でしょうか？]
Perlは、HP専用言語と、書いた所、つっこまれまして。＾＾； そのとおり、間違っていません。 ベイズ理論で有名になった、POPFileはPerlで、HP専用ではない。 （たしか、サーバか、サービスを起動させないとダメだったんで、セキュリティ的に不安になって、導入をやめたんだっけ。 うろ覚え、根拠なんとなく、なので信用しないでね。） 他にもPerlのソフト？アプリ？ってありますか？ Perlの基礎知識はあるんですが、どうやってこのようなソフトを作るのでしょうか？ 一応、ローカルでアプリっぽく使っていても、ブラウザ(それに準ずる物)で表示させて使うもの、以外ということで。 Perlのアプリが起動する原理って、どういうものなんでしょうか？
Can't open perl script と出ます。 さくらサーバーのcron設定です。 /usr/bin/perl /home/hiromarw/www/updateping/modules/UpdatePing/updatepingd/updatepingd.pl .b /home/hiromarw/www/updateping/CSV/bloglist.csv -s /home/foo/hiromarw/updateping/CSV/serverlist.csv -i 5 -r 200 .d > /dev/null に記述します。 何故でしょう？
OSX server 1.3上で公開しているcgiを外部からアクセスした時に、cgiからパラメータを渡してインストール済のアプリを起動させたいのですが、こういう事は出来る物なのでしょうか？ cgiのなかで system('/Applications/Firefox.app www.yahoo.co.jp'); などといった感じにです。 「戻り値／アプリの終了」などはなくても結構です。実行だけさせたいです。 よろしくお願いします。
WindowsXP+cygwinでPerlを使用して、2つのファイルを同期するソフトを練習の為に作っています。ファイルAとファイルBの最終更新時間をstat関数で調べてFile::Copyモジュールのcopy関数でコピーする方法で作っています。ファイルAの方が古い状態で同期を実行すると、その内容がファイルBに上書きされますが、ファイルBの最終更新時間がファイルAと同じ時間ではなくて、copyを実行した時間になってしまいます。copyをした後で、ファイルBの最終更新時間をファイルAと同じにする方法はあるのでしょうか。ご存じの方、いらっしゃいましたらお教えください。よろしくお願いします。
数年前にハッシュのデータをforeachで取り出す時、$_をいじると、$_はハッシュのデータと直接つながっているので、ハッシュのデータ（keyは変わらずvalueのほう）が書き換わってしまうと聞き、実際にやってみて書き換わってしまった覚えがあります。 %hash = ("red" => "aka", "green" => "midori", "blue" => "ao", "black" => "kuro"); foreach (%hash){ print "$_<br>\n"; $_ = "modify"; } print "<hr>\n"; foreach (values %hash ){ print "$_<br>\n"; } ↓↓↓↓↓↓html↓↓↓↓↓↓↓ blue ao green midori red aka black kuro ------------------------------------ modify modify modify modify ↑となったはず 先日それを試してみたら書き換わりませんでした。 以前は確かに書き換わった覚えがあります。 perlの仕様が変わったのでしょうか。それとも私が何か間違っているのでしょうか。 詳しい方にお教えいただければと質問しました。 よろしくお願いいたします。
宜しくお願いします。 変数「$koumoku」の中に「1-1」や「1-2-3」といった文字列が格納されているとします。この中のハイフンの数を数えてそれぞれ別の表示をさせたいと思います。 $kosuu=$koumokuの中のハイフンを数える if($kosuu eq 1){(1)を表示} elsif($kosuu eq 2){(2)を表示} elsif($kosuu eq 3){(3)を表示} ～～ この「$koumokuの中のハイフンを数える」と言うのはどのようにしたら良いでしょうか? ちなみに、$koumokuには数字とハイフンしか入りません。
http://www.candy-cgi.com/perl/RSS_reader_Type1.h … 上記のものを設置しているのですが、タイトルのリンク先URLが記事のリンク先になってしまっているのですが、これを書き込んだ人のサイトURLには出来ないでしょうか？
あるExcelファイルを利用してターミナル上で情報を出力出来るようにしたい。<<<　ここまでは出来ていますが、 あとはいくつかの機能を付けたいのです。 下記の機能を追加したい： 1.検索文字列指定 -指定ありの場合、その文字列を検索対象とする 例えば：sun を検索対象文字列にする $./perl sun -指定なしの場合、文字列の入力を促す。 例えば：検索文字列? >　(検索したい文字列を入力)　 $./perl 検索文字列? > 入力がなくリターンのみで実行された場合にはコマンドを終了する。 2.エラー出力 -検索文字列が見つからないか、 入力ミスによるエラーを表示
mac用のperl バージョン5.10をダンロードしてインストールしたのですがターミナルで　perl -V　とうって調べてみるとバージョンが5.8.1になっています。 5.10を動かすにはどうしたらよいのでしょうか？ どなたか詳しい方教えてください。よろしくお願いします。
リダイレクト記号>、>>、<の前に+のついたバージョン+>、+>>、+<があるのですが、これらは+がつかないバージョンとどういう違いがあるのでしょうか・・・
CGI.pmのstart_html()を使用してMETAタグを出力しようとしているのですが、思うように出力できません。 具体的には次の文字列と全く同じものを出力しようとしています。 <META http-equiv="Content-Type" content="text/html; charset=EUC-JP"> いろいろやってみたのですが、どれも微妙にこれとは違うのです。 どなたか教えてください・・・。 今のところ、これに最も近かったのは、 print($q->start_html(-head => $q->meta({"-http-equiv" => "Content-Type", -content => "text/html; charset=EUC-JP"}))); で、これの出力（METAタグ部分）は、 <meta http-equiv="Content-Type" content="text/html; charset=EUC-JP" /> でした。 お尻にスペース1個とスラッシュが付加されてしまいます・・・
お世話になります。 題名の件、htmlファイルからcgiファイルに遷移するやり方に、 １．<meta http-equiv="Refresh" ～ ２．<form method="POST" ～ がありますが、 引数ありで１をつかうことはできないのでしょうか？ または、submitなしで２とか… ファイルの遷移を自動的にやって、引数をつけたいのです。 どなたか、いい方法をご存知ないでしょうか。 ご教授願います。
perlでppmを利用せずPKGを手動インストールする方法を教えてください。例として”Net::Nslookup”をインストールする場合などの実例を挙げてもらえると助かります。 もしくは、それを説明している日本語Webサイトを教えてください。
新規アンケートを登録した場合に新規の物がdata内に『num=0』で保存され以前にアンケートをしたものが『num=1』に上書きされてしまいますがこれを、 以前にアンケートしたものを『num=0』で保存し新規でアンケートを登録した場合に『num=1』となるようにしたいのですが可能でしょうか？ ########## アンケート個別表示 ######################################## my ($num) = @_; if ($num eq '') { $num = 0; } @THIS = split ('<>', $DATA[$num]); $anc_cnt = $THIS[1] + $THIS[2]; if ($THIS[1] == 0) { $p_yes = 0; $w_yes = 0; } else { $p_yes = int (($THIS[1] / $anc_cnt) * 10000) / 100; $w_yes = int $p_yes; if ($w_yes == 0) { $w_yes = 1; } } if ($THIS[2] == 0) { $p_no = 0; $w_no = 0; } else { $p_no = int (($THIS[2] / $anc_cnt) * 10000) / 100; $w_no = int $p_no; if ($w_no == 0) { $w_no = 1; } } if ($THIS[1] == $THIS[2]) { $w_yes = 49; $w_no = 49; } if ($num == 0 and $look_mode == 1) { $form_hed = "<form name=\"input\" method=\"post\" action=\"$myname\" onsubmit=\"return check_input ();\">\n<input type=\"hidden\" name=\"mode\" value=\"answer\" />"; $form_yes = '<input type="radio" name="answer" value="yes" />'; $form_no = '<input type="radio" name="answer" value="no" />'; $form_answer = "<br clear=all />\n<font size=\"-2\"> 感想（絵文字は使用不可\能\で\す）</font><br><input type=\"text\" name=\"com\" size=\"30\" maxlength=\"150\" /><br> <font size=\"-2\" color=\"#555555\">実際にサイトを利用した方 のみ、ご投稿下さい。<br> 同ユーザーによる複数投稿、誹謗中傷を含む発言は\予\告なく削除 いたします。</font><br> <input type=\"submit\" value=\"同意して投稿する\" /></form>"; } else { $form_hed = ''; $form_yes = ''; $form_no = ''; $form_answer = ''; } if ($form{'type'} eq 'i') { print <<"EOF"; <div id="anc" align="left"> <font color="red">■</font>$THIS[0] [<a href="$myname?type=i&mode=com&num=$num">コメント</a>]<hr /> $form_hed <font size="-2">$form_yes Yes : $THIS[1] ($p_yes%) </font> <hr size="$hr_w" color="$yes_color" width="$w_yes%" /> <font size="-2">$form_no No : $THIS[2] ($p_no%) </font> <hr size="$hr_w" color="$no_color" width="$w_no%" /> $form_answer </div> <hr /> EOF } else { my$w = $hr_w . 'px'; print <<"EOF"; <div class="anc"> <h2><font size="-2">「$THIS[0]」の感想レビュー投稿 </font></h2> <a href="$myname?mode=com&num=$num" target="anc_win" onclick="return win_open('$myname?mode=com&num=$num');"></a> $form_hed <div align="left"> $form_yes <em><font size="-1"><img src="/img/au1.gif" width="15" height="14" border="0">良い…</em>$THIS[1]票 ($p_yes%)</font><br> $form_no <em><font size="-1"><img src="/img/au2.gif" width="15" height="14" border="0">悪い…</em>$THIS[2]票 ($p_no%)</font><br> </div> $form_answer <br> <a href="$myname?mode=com&num=$num" target="anc_win" onclick="return win_open('$myname? mode=com&num=$num');"><font size="-1">投稿一覧</font></a> </div> EOF } } また、このようになっている場合にどのようにすればよいのでしょうか？
普通ユーザーエージェントを取得する際には「$ENV{'HTTP_USER_AGENT'}」を使いますよね。 ただ、この値は詐称されやすいと聞きました。 いま「$ENV{'REMOTE_USER'}」でユーザー認証のサイトを作っているのですが、この値の信頼性はいかがなものなんでしょうか？ また、REMOTE_ADDRの信頼性もいかがなものなのでしょうか？ ご回答お願いします。
$data = 'a b c<a href="x/y/z/hoge.jpg">hoge.jpg </a> …<A HREF = "aa/b/c/hoga.jpg">hoga.jpg</A>…'; 上記の文字列から正規表現で 『x/y/z/hoge.jpg』と『aa/b/c/hoga.jpg』を取り出して配列に格納しようと思っているのですがうまくいきません。 条件は １．『<a href="』(大文字の場合、またはイコールの前後に半角スペースが含まれる場合もあります。)と『">』に囲まれています。 ２．文字列中に何回登場するかは決まっておりません。 ３．取り出す文字列の長さはきまっておりません。 以下のように書いてみたのですが…。書き方がわかりません。 どなたかご教授いただけないでしょうか。 よろしくお願いいたします。 while ($data =~ /<a\s[hH][rR][eE][fF].=.\".*?">/g){ push(@arr, $&); } foreach(@arr){print $_,"\n";}
テキストファイルの一括処理をしたいです。 同じ形式で書かれている下記のような ファイルが複数個あり全てのファイルの 同フィールドだけ抜き出し、 抜き出した全てのデータを右側列にコンマ区切りで並べて 出力させたいのですがうまく並べられません。 配列がうまく使えていないと思うのですが アドバイスをいただけませんでしょうか。 データは&で区切られておりこの例では左から3番目のフィールドを 処理の対象としてます。 file01 A&111&222&333& A&444&555&666& A&777&888&999& file02 A&aaa&bb&cc& A&ddd&ee&fff& A&ggg&hhh&iiii& file03 A&abab&bnb&ccc& A&abab&bnb&ccc& A&abab&bnb&ccc& A&abab&bnb&ccc& 希望出力結果 222,bb,bnb, 555,ee,bnb, 888,hhh,bnb, ,,bnb, 希望結果のようなファイルを出力させたいです。 よろしくお願いします。
下のように何もオプションをつけないでPerlを起動します。すると、文字が打ち込めるようになるので打ち込んでみました。 さて、この状態からどうやってスクリプトを実行して元のプロンプトに戻ればいいのでしょう？ とりあえず、Ctrl+Z を押した後 ENTER を押すと終了になるようです。シェル上でのPerlのスクリプト編集状態から抜ける方法がわからないです。 よろしくお願いします。 C:\>perl print "aaaaaaaaaa\n"; ^Z aaaaaaaaaa
googlenewsのapiにつづいてyoutubeのapiと格闘しています。 その際、TreePPモジュールを利用しているのですが、 どうしても解決できない問題があり、御相談させて下さい。 目標：youtubeのデータベースに人名で検索をかけ、その結果のリスト（XML）の中から、動画タイトルと動画IDを取り出す。 で、以下のプログラムで、動画IDは取り出せるのですが、動画タイトルの部分が　HASH(0x856eaec)　といた様な表示になってしまうのです。 ●どの様な状態の時に、HASH(0x856eaec)の様なものが表示されるのでしょうか（そもそも、これって何の値なんでしょうか？） ●動画タイトルを取り出すには、どの部分をどう修正すればいいのでしょうか？ ●$ua->timeout(3);の部分で、タイムアウト処理をかましているつもりなのですが、どうも稼働している様には感じません。この様なプログラムの場合に、タイムアウト処理をかませるには、どうしたらよいのでしょうか？ 以上３点、アドバイスいただければ幸です。 尚、当該xmlのタグ構造はコチラで確認していただけます。 http://gdata.youtube.com/feeds/api/videos?vq=aik … 以下、そのプログラムです。 ------------------------------ #!/usr/local/bin/perl print <<"HTML"; Content-type: text/html <html> HTML # 動画スタートnoを乱数で決める srand; $startno = rand; $startno =( int($startno * 6))+1; # モジュールのロード use Jcode; use XML::TreePP; # 検索単語の設定 $searchword = "aiko"; use Encode; #検索キーワードをUTF-8コードに変換する Encode::from_to($searchword , 'sjis', 'utf8'); #URLエンコードを行う $searchword=~s/([^0-9A-Za-z_])/'%'.unpack('H2',$1)/ge; $searchword=~s/\s/+/g; use LWP::UserAgent; use HTTP::Request; my $url = 'http://gdata.youtube.com/feeds/api/videos?vq='.$ … # XML::TreePPオブジェクトの作成 my $tpp = XML::TreePP->new( force_array => [ "entry" ], ); # parsehttpメソッドでURLからXMLデータを取得して $tree変数に格納 my $tree = $tpp->parsehttp( GET => "$url" ); $ua = LWP::UserAgent->new(); $tpp->set( lwp_useragent => $ua ); $ua->timeout(3); # [rss] - [channel] - [item] を $Items変数に格納 my $Items = $tree->{feed}->{entry}; # 検索結果を表示 foreach my $hash (@$Items){ $urlyou=$hash->{id}; $titleyou=$hash->{title}; $idyou = substr($urlyou,42,11); print "$titleyou".$idyou."<BR>"; }
PerlでSQL(SELECT)文を発行し、一致した件数を表示させたいと考えております。whileのループ中で演算子のカウントを利用しレコード件数を取得している為、検索結果の表示より下で表示件数を表示しています。一般のWeb表記の場合、whileの前で、何件ヒットしたかを表示させるのが常識だと考えます。 どのようにロジックを変更すれば、良いのでしょうか？件数だけの為にwhileを2回回すのも、恥ずかしいですし（＾＾； --------------少略-------------------- my @results; my $count; while(@results = $sth->fetchrow) { print @results, "\n<P>"; $count++; } if ($sth->rows == 0) { print "<font color=red>該当するデータはありません</font>"; }else{ print "<font color = red><B> $count 件見つかりました！"; } --------------少略--------------------
ActivePerl v5.8.8 build 820 を使用しています。 配列要素へのリファレンスを取得し、その後要素の追加又は削除を行った場合 元の要素を参照し続けます。 (1) 要素の追加 @list = qw/a b c d/; $p = \$list[1]; print("$$p\n"); splice(@list, 1, 0, 'x'); print("$$p\n"); # 'b' が表示される # $list[2] を参照 ($list[1] ではない) (2) 要素の削除 @list = qw/a b c d/; $p = \$list[1]; print("$$p\n"); splice(@list, 1, 1); print("$$p\n"); # 'b' が表示される 質問1 これは perl の仕様としての動作でしょうか? それとも、実行系やバージョン などの環境に依存するものでしょうか? 質問2 要素の削除の場合、削除直後なのでたまたま元の値が表示されただけで、 削除した要素 'b' が格納されたメモリ空間はいつ上書きされるかわからない 状態なのでしょうか? それとも、上書きされることはないのでしょうか?
あるCGIを無料でダウンロードしました。 そのCGIはステップメールなのですが、使ってみていくつか弱点がありました。 特に気になるのはgmailだと文字化けしてしまう事です。 CGIとか全然いじった事がないからよくわからいのですが、プログラムのなかにデコード処理とかあったのでたぶんこれかと思いました。 以下のプログラムで何かおかしい（文字化けを起こす原因）箇所はあるのでしょうか？ #//■デコード sub decode { local($buf, $key, $val); if (($ENV{'REQUEST_METHOD'} eq "POST") and ($post_flag ne 1)) { $post_flag=1; read(STDIN, $buf, $ENV{'CONTENT_LENGTH'}); } else { $post_flag=0; $buf = $ENV{'QUERY_STRING'}; } #csystem ($lc)=jcode::csystem($SCRIPT); foreach (split(/&/, $buf)) { ($key, $val) = split(/=/); $val =~ tr/+/ /; $val =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg; # S-JISコード変換 &jcode'convert(*val, "sjis", "", "z"); # 不要コード排除 $val =~ s/"/&quot;/g; $val =~ s/</&lt;/g; $val =~ s/>/&gt;/g; if($key ne "comment"){ $val =~ s/\r|\n|\0//g; }else{ $val =~ s/\r|\0//g; } $in{$key} = $val; }
同フォルダ内にAフォルダにaa,bb,ccというテキストファイルがあります。これをex.txtファイルにaa,bb,ccファイルの内容をコピーしたいのですが、うまくいきません。 最初はuse File::Copyでやろうとしましたが、これはディレクトリの中のファイルの指定がわからず、断念。 次にwhile文でやってみましたが、これも引数の指定がわからない状態です。 もしよければお知恵を貸してください。
初歩的な質問で失礼いたします。 下記の記述でプログラムを実行すると正常にプログラムが動きます。（省略以降は全く同一のプログラムです） ■実行問題なし１ #!/usr/local/bin/perl require 'cgi-lib.pl'; require 'jcode.pl'; --------省略--------------- ■実行問題なし２ #!/usr/local/bin/perl use strict; use DBI; --------省略--------------- しかし、下記の記述だとエラーが発生していまいます。 #!/usr/local/bin/perl use strict; use DBI; require 'cgi-lib.pl'; require 'jcode.pl'; --------省略--------------- エラーログは、下記の通りです。 Global symbol "$in" requires explicit package name at search.cgi line 21. Global symbol "$parameter" requires explicit package name at search.cgi line 23. Global symbol "$name" requires explicit package name at search.cgi line 23. Execution of search.cgi aborted due to compilation errors. requireとuseは同時に記述してはいけないのでしょうか？ 同時に記述しないと目的のプログラムを実現する方法が大きく変わってきてしまうので、非常に困ってしまいます。 もし、ご存知の方がいらっしゃったら教えてください。 宜しくお願い致します。
またまた失礼します。 やりたいことは以下です。 1.ディレクトリを開く。 2.ファイル達を読み込み。 3.追記用のデータファイルを開く。 4.「2」にデータを追記 5.別のディレクトリに書き出し。 以上です。 4番がうまくいきません。 ためしに4の工程を抜かすと問題なく書き出されます。 4の工程でやりたいことは、 1.タブ区切りのテキストファイルを読み込み。 2.書き出し用に読み込んだ（追記したいファイル）<productのpath="[ココの値！]"を取得。 3.「2」番で取得した値と「1」番で取得した値を比較。 4.「3」がtrueの行を追記して書き出し。 以上。 要するになにがしたいかというと、 仮にタブ区切りテキストには10行分のデータがあるとします。 それぞれの行には3つ分の値が入っており、先頭にIDが付いています。 一番最初に読み込んだファイル（追記したいファイル）にも同様にIDが振られており(<product path="ココ")そのIDとタブ区切りテキストのIDが一致した行だけ追記したいということです。 下記のコードだとなぜか、 10行分のデータがすべて追記されてしまいます。 コードは以下です。 #!/usr/bin/perl #既存ファイル読み込み＆追記 $n_dir = "newXml/"; $b_dir = "xml/"; opendir(DIR, $b_dir); while($file = readdir(DIR)){ $bfile="$b_dir$file"; $nfile="$n_dir$file"; $dfile="data/data.txt"; if (-T $bfile) { open(IN, $bfile);#既存ファイルオープン @list = <IN>; close(IN); open(OUT,">$nfile");#書き出しファイルオープン foreach $line (@list) { if ($line =~ /\<product/){ $line =~ /path=\".*\"/;#path取得 $1; } if ($line =~ /\<\/product\>/) { open(IN, $dfile);#追加データファイルオープン while($data = <IN>){ chomp(@data = split(/\t/,$data)); $data[0] =~ s/\//_/g; if($data[0] == $1){#取得したパスとdata.txtとってきた値を比較 print OUT <<EOF; <ds path="$data[0]">$data[1]</ds> <kw>$data[2]</kw> $line EOF } else{next;} } close(IN) }else{print OUT $line;} } close(OUT); } else{next;} } closedir(DIR); 長々と申し訳ありません。 エラーなどは特にありません。 ご協力お願いします。
現在、以下のようなperlのスクリプトを作っているのですが、mysqlへの接続,切断は以下の場合、どちらにした方がいいのでしょうか？ (1)の場合 use DBI; $dsn="DBI:mysql:database=dbname:host=localhost"; $dbh=DBI->connect($dsn,'user','pass'); $sth = $dbh->prepare("SELECT no,title,name,date,host From `table1` where no='1'"); $sth->execute; $sth->fetchrow_array; $sth->finish; $sth2 = $dbh->prepare("SELECT no,title,name,date,host From `table2` where no='1'"); $sth2->execute; $sth2->fetchrow_array; $sth2->finish; $dbh->disconnect; (2)の場合 use DBI; $dsn="DBI:mysql:database=dbname:host=localhost"; $dbh=DBI->connect($dsn,'user','pass'); $sth = $dbh->prepare("SELECT no,title,name,date,host From `table1` where no='1'"); $sth->execute; $sth->fetchrow_array; $sth->finish; $dbh->disconnect; $dsn="DBI:mysql:database=dbname:host=localhost"; $dbh=DBI->connect($dsn,'user','pass'); $sth2 = $dbh->prepare("SELECT no,title,name,date,host From `table2` where no='1'"); $sth2->execute; $sth2->fetchrow_array; $sth2->finish; $dbh->disconnect; (1)の場合と(2)の場合の違いは、(1)の場合、最初にデータベースに接続して、一番最後に切断する事で、(2)の場合、毎回データベースへの接続と切断を行う事が違います。 (2)の場合、毎回接続と切断を行うので、2回ほどではあまり変わらないかもしれないのですが、もし10回とか接続と切断を行うとかなり負荷が高くなるような気がするのですが、他のHPなどを拝見すると接続をしたら切断を行うように癖をつけるようにした方がいいと書かれていたりします。 どちらの方が正しいやり方というか、負荷がすくなく使えるのでしょうか？
perlで書いた、プログラムをブラウザで確認したところなぜがプログラムに書いていないのにブラウザに 0 と表示されてしまうのですがこれを消すにはどうしたらよいのでしょうか？ ちなみにWebサーバーにはapacheをつかっています。
以下のことがしたいです。 testフォルダよりテキストファイル達を読み込み、 ある行だけ取り除いたのちnewtestフォルダに書き出したいと思います。 以下、コードになります。 #!/usr/bin/perl $n_dir = "newtest/"; $b_dir = "test/"; opendir(DIR, $b_dir); while($file = readdir(DIR)){ $nfile="$n_dir$file"; $bfile="$b_dir$file"; if (-T $bfile) { open(IN, $bfile); #testフォルダよりファイルの読み込み @list = <IN>; close(IN); open(OUT,">$nfile"); #newtestフォルダに書き出し while(@list = <IN>) { #testフォルダ内のファイルを一行ずつ読み込み if (@list =~ /test/) { #行にtestという文字列があるぎょうだけ書き出し print OUT @list; } } close(OUT); } else{next;} } closedir(DIR); ということをやりたいのですが、 書き出されるファイルは空です。 どこが間違っているのでしょうか。 エラーなどは特にありません。 testフォルダのファイル達が そのままnewtestフォルダに書き出されるのですが、 中身は空です。 ご協力お願いします。
perlのファイル読み込み操作についての質問です #!/usr/local/bin/perl #ファイルの読み込み open(FILE,"<diary.txt"); $data = <FILE>; close(FILE); #サーバー出力 print <<END; Content-type: text/html <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"> <html> <head> <title>ファイルの読み込み</title> </head> <body> <h5> <p>$data</p> </h5> </body> </html> END 次のように、perlのコードを書いて無料の CGIの使えるレンタルサーバーに 設置したところ、エラーが出てしまいます dairy.txtはこのファイルと同じディレクトリで パスも間違えてないです、いろいろ自分で調べてみたんですが どこが間違えているかわかりません よろしかったらどなたかperlに詳しい方がいらっしゃったら 間違えている箇所を教えていただけないでしょうか？
受け取った文字列を「数字 → アルファベット大文字 → 小文字」の順にマジカルインクリメントして返すようなサブルーチンを作りたいのですが、どのように実装すればよいのでしょうか？ 通常のインクリメント演算子 (++) を使うと、数字ならば数字、大文字ならば大文字という規則でインクリメントされますが、それを拡張したいと思っています。 どなたか、大まかな手順のみでも構いませんので、ご教示いただければ幸いです。よろしくお願い致します。 OS: Windows XP ActivePerl v5.10.0
わたしは、海外版の電子book端末を日本語化しているものです。 普段パソコンで、ネットと文章の作成くらいしかしていません。 perlとttftinkerをつかって、3つの日本語フォントを作成しています。 ※ttftinkerとは、perlスクリプト群で構成されたフォント作成ツールです。 次の電子book端末の日本語フォント作成サイトの指示とおり実行してます。http://mobileread-jp.com/?p=5 windowsのコマンドプロンプトで、実行してます。 以下、まとめサイトの作例手順2の指示ところが、うまくいきません。 set path=%path%;C:\ttftinker set perllib=C:\ttftinker わたしは、スタート→マイコンピュータ→右クリック→プロパティ→詳細設定→環境変数→path の手順で、pathの変数値を調べました。 そして、作例手順2の　set path=%path%;C:\ttftinker　を自分のPC環境に置き換えました。 set path=%path%自分のpath変数値;C:自分のttftinkerのある場所 次に、set perllib=C:\ttftinker　ですが、これがよくわかりません。 set perllib=C:自分のttftinkerのある場所 　に置き換えました。 上記の手順で、うまく目的の日本語フォントが作成できません。 作例手順8まであるのですが、たぶん、この作例手順2の部分で、ミスをしています。 目的の日本語フォントができあがれば良いだけなので、上記のわたしの手順にミスがありまたら、具体的に修正する方法だけ教えてください。
下記のようにtestディレクトリ内のファイルを読み込み、 それぞれにあるデータを足して、 読み込んだファイルを他のディレクトリに書き出したいのですが、 どのようにしたらよいのでしょうか。 とりあえず、下記はファイルを読み込んで、 なにも足さずそのまま別のディレクトリに移すとこまで、 やりたいと思っていますが、 どうやっていいものか・・・ #!/usr/bin/perl $dir = "test/"; opendir(DIR, $dir); while($file = readdir(DIR)){ open(IN, ">>$dir$file"); @list = <IN>; foreach $dataLine(@list) { print IN $dataLine; } close(IN); } closedir(DIR); ようはファイルに追記したいのですが、 上書きしないで、バックをとっておき、 別のところへ追記したバージョンを生成したいということです。 ご協力お願いします。
active perl v5.8を使用しています。 文字列のマッチングと置換について質問させてください。 たとえば"ABCDEF"という文字列があったとします。この文字列の3文字目の 後に"-"(スペースバー)を入れたいと思います。"ABC-DEF"のように。 この場合文字の種類ではなく、文字の位置から置換する対象を決めること にしたいのです。 正規表現をつかい３文字目を見つけ、３文字目 + "-"に置換すればよいと考えました。 my $seq = "ABCDEF"; $seq =~s/.{2}(.)/$1-/; #3番目の文字を(.)に入れて記憶 としたのですが、こうすると(C-DEF)のように初めのほうの文字が消えてしまいます。（スクリプトを見直してみると当然なのですが。。。） 後方参照という方法で $seq =~s/.\3/$1-/; というふうにもしたのですが、 "Reference to nonexistent group in regex"と\3をリファレンスとして とられてエラーになりました。 このような場合、どうすればヒットした文字のみを置換できるでしょうか。 非常に基本的なことなのですが、参考書やウェブではなかなか見つからな かったもので。。。。 よろしくお願いします。
時間の足し算をやりたい。訳あってライブラリが使えません。 方法は無いでしょうか？ 仮にライブラリが使えるなら、下記のようでうまく行っています。 --------------------------------------------------- use Time::Local; $year=2008; $mon =10; $mday=24; $hours = 23; $min = 0; $sec = 0; $time = timelocal($sec, $min, $hours, $mday, $mon - 1, $year); $a1=($sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst) = localtime($time ); $mytimeORG= sprintf("%04d/%02d/%02d %2d:%2d", $year + 1900, $mon +1, $mday,$hour,$min); print "$mytimeORG\n"; ($sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst) = localtime($time + 32400); #9H加算 $mytime9H= sprintf("%04d/%02d/%02d %02d:%02d", $year + 1900, $mon +1, $mday,$hour,$min); print "$mytime9H\n"; ---------------------------------------------
cpan2rpmを使用してlibwww-perl(LWP::UserAgent)をインストールしたいのですが、以下のエラーが出てインストールできません。 エラーに出てきた2つのperlモジュールを入れれば良いのは分かるのですが、そのインストール方法がどうしても分かりません。 この2つのモジュールは、どうインストールすれば良いのか教えてください。 環境は CentOS (2.6.9-42.0.3.EL) perl v5.8.5 cpan2rpm - Ver: 2.028 --------------------------------------------- # cpan2rpm --install libwww-perl … 省略 … RPM: /usr/local/src/skf-1.94/rpm/RPMS/noarch/perl-libwww-perl-5.808-1.noarch.rpm SRPM: /usr/local/src/skf-1.94/rpm/SRPMS/perl-libwww-perl-5.808-1.src.rpm Installing package エラー: Failed dependencies: perl(HTTP::GHTTP) is needed by perl-libwww-perl-5.808-1.noarch perl(Win32) is needed by perl-libwww-perl-5.808-1.noarch -- Done --
こんにちは。お世話になります。 cgiファイルから、FORM ACTION～POST⇒submitで自分自身を呼び出す時に、INPUT TYPE=\"text\"を11個間に入れると呼び出せません。 （10個の場合はうまくいきます） FORM ACTION～POSTは文字数制限がないと、本を見てもかいてあるのですが、なにか理由があるのでしょうか。 ご存知の方、ご教授願えたら幸いです。 よろしくお願いいたします。 抜粋したソースを下記に記します。 ------------------------------------------------------------- #障害対応情報項目テキストボックス print "<H5>【障害対応情報項目】</H5>\n"; print "<FORM ACTION=\"../cgi-bin/serch_e-001.cgi\" METHOD=\"POST\">\n"; print "<INPUT TYPE=\"text\" NAME=\"S1-2\" VALUE=\"$$selectdata[0][7]\" SIZE=30>\n"; print "<INPUT TYPE=\"text\" NAME=\"S1-3\" VALUE=\"$$selectdata[0][8]\" SIZE=30>\n"; print "<INPUT TYPE=\"text\" NAME=\"S1-4\" VALUE=\"$$selectdata[0][9]\" SIZE=30>\n"; print "<INPUT TYPE=\"text\" NAME=\"S1-5\" VALUE=\"$$selectdata[0][10]\" SIZE=30>\n"; print "<INPUT TYPE=\"text\" NAME=\"S1-6\" VALUE=\"$$selectdata[0][11]\" SIZE=30>\n"; print "<INPUT TYPE=\"text\" NAME=\"S1-7\" VALUE=\"$$selectdata[0][12]\" SIZE=30>\n"; print "<INPUT TYPE=\"text\" NAME=\"S1-8\" VALUE=\"$$selectdata[0][13]\" SIZE=30>\n"; print "<INPUT TYPE=\"text\" NAME=\"S1-9\" VALUE=\"$$selectdata[0][13]\" SIZE=30>\n"; print "<INPUT TYPE=\"text\" NAME=\"S1-13\" VALUE=\"$$selectdata[0][18]\" SIZE=30>\n"; print "<INPUT TYPE=\"text\" NAME=\"S1-14\" VALUE=\"$$selectdata[0][19]\" SIZE=30>\n"; print "<INPUT TYPE=\"text\" NAME=\"S1-15\" VALUE=\"$$selectdata[0][19]\" SIZE=30>\n"; print "<INPUT TYPE=\"submit\" NAME=\"button\" VALUE=\"新規検索\">\n"; print "<INPUT TYPE=\"submit\" NAME=\"button\" VALUE=\"更新\">\n"; print "<INPUT TYPE=\"hidden\" NAME=\"no\" VALUE=\"$$selectdata[0][0]\">\n"; print "</FORM>\n"; ------------------------------------------------------------
レンタルサーバを使用しているサイト：Ａから、社内構築サーバを使用しているサイト：Ｂに遷移するようにしたいと思っています。 その際、サイト：Ａでログインしていない場合は、ログインエラーとして、サイトＢを参照できないようにしたいと思っていますが、何か方法がないでしょうか？？ Ａサイトでは、ログイン情報とクッキー情報をデータベースに格納し、各ページ遷移時に、クッキー情報を使用して、データベースにアクセスし、ログインを行ったかを確認しております。 サイト：Ｂでは、別データベースになるため、ログイン情報が共有できないため、困っております。
サイトのサムネイル画像を取得しようと思い、 サムネイルAPI(http://thumbs.bookmacro.com/sample/)という サイトで、以下のコードを取得しました。 ================================================================ <a href="http://thumbs.bookmacro.com/rd?url=http://d.hate … src="http://thumbs.bookmacro.com/w/80/h/60/u/http://d … border=0 ></a> ================================================================ これをCGI中で使用しようと思い、 ================================================================ <img src="http://thumbs.bookmacro.com/w/80/h/60/u/$siteurl" border=0 > ※ $siteurl にはサイトアドレス(http://～)が格納されている ================================================================ としたところ、「ページがありません」となってしまいます。 CGI中で、変数に格納されているアドレスは指定できないのでしょうか？ ご回答、宜しくお願い致します。
Win2003サーバーに「test」フォルダがあり、その中に「test.pl」という Perlのファイルがあります。 （testフォルダのアクセス権設定は完了済み） WinXP pro2 のクライアントＰＣのＣドライブ直下に（ActiveState ActivePerl5.6）がインストールされています。 バッチファイルを作成し、クライアントＰＣのPerlを使用してtest.plを動作させたいのですが、「cannot open」と表記されてしまいます。 作ったバッチファイルは以下のとおりです。 test1.bat------------------------------------------------- "C:\Perl\bin\perl.exe" "\\@@@.@@@.@@@.@@@\test\test.pl" （@には数字が入りサーバーのIPアドレスです） ---------------------------------------------------------- test2.bat------------------------------------------------- "C:\Perl\bin\perl.exe" "Z:\test\test.pl" （ネットワークドライブをZドライブとしてマウント状態で実行） ---------------------------------------------------------- １と２両方とも同じエラーが表示され実行されません。 testフォルダにtest.textを作成しwordpadで、開くようにした ========================================================== "C:\Program Files\Windows NT\Accessories\wordpad.exe" "Z:\test\test.txt" ========================================================== は、問題なく実行できているため、アクセス権限ではじかれているとも思えないのです。 (test.txt)(test.pl)ともにまったく同じアクセス権限設定がされています。 いったい何が原因なのでしょうか？ 解決方法がございましたらご教示ください。 よろしくお願いいたします
Perl スクリプト中に「$" = ',';」という構文が出てきたのですが、これはどういう意味ですか？
動的に対象のファイルを変えたいのですが。。。 while(1){ &test($file); } sub test { POE::Session->create( inline_states => { _start => \\&setup, handler_input => \\&handler_input, _stop => \\&handler_stop, }, args => [ $file ], ); POE::Kernel->run; exit; } sub setup{ my ( $heap, $target_file_path_now ) = @_[HEAP, ARG0]; $heap->{tail_wheel} = POE::Wheel::FollowTail->new( Filename => $ile, InputEvent => \'handler_input\', ); return; } sub handler_input{ my $record = $_[ARG0]; print $record,\"\\n\";} } $th->join;
こんばんは。perl初心者です。 どうしてもわからないので、どうかアドバイスよろしくお願いします。 一つのファイルに、以下のような３行で一組の塊がある場合、 <line_a>: aaaaaa <line_b>: BBBBBB <line_c>: cccccc <line_a>: aaaaaa <line_b>: bbbbbb <line_c>: cccccc ... <line_b>の行に文字列"BBBBBB"が含まれていたら、<line_a>の内容を"aaaaaa"から"AAAAAA"に置換してファイルを上書きしたいのですが、 どうやったらいいのでしょうか・・・。
Perl初心者です。 指定したファイルの中から指定した文字列の入っている行を取得したいのですが、 open(FL, ＄ARGV[0]); while (<FL>) { if ($_ =~ /$ARGV[1]/) { print $_; } } close(FL); としたとき、 $ARGV[1]に aaa/bbb/ccc と入れてaaaかつbbbかつcccを含む行としたいのですが、うまく動作しません。 このような場合がGREPとかのコマンドを使ったほうがよいのでしょうか？ 別の処理も組み込みたいので、できればperlで書きたいのですが、正規表現の文字列を引数で与えるようなことはできるのでしょうか？ よろしく御願いします。
if elsif の構文で、複数の配列を使ったマッチングで分からないところがあり、質問させていただきたいと思います。 たとえば通常ifを使って$_ に対してある配列すべての要素をマッチングさせるとすると、 foreach my $value (@list){ if($_ =~ /$value/ ){ do something}} となると思います。 私が書きたいスクリプトは以下のようなものです。 $_ にたいして、初め (if で)配列１のすべての要素を探し、それがなかったら(elsif)配列２のなかから探し、それでもなければ配列３の中から。。。。。。というものです。 foreach my $value1 (@list1){ if($_ =~ /$value1/ ){ do something} elsif {foreach my $value2 (@list2){ if($_ =~ /$value1/ ){ do something}} 感覚的にはこのような感じになると思うのですが。。。。 このelsifの部分から２つめの配列を使ったマッチングを行いたいのですが、elsif ( )のなかにどのように記述すれば 動く様になるでしょうか？
正規表現置き換えについて -----入力 ----- a (b) B (C) test.csv file.dat -----出力 ----- b (a) C (B) file.csv test.dat --------------- としたくて以下のコードを書いたのですが 実際の出力が $2 ($1) $2 ($1) $2.csv $1.dat となってしまいます。 --以下ソース %Convert = ( '(.+) \\((.+)\\)','$2 ($1)' ,'(.+)\\.csv (.+)\\.dat','$2.csv $1.dat' ); while(<DATA>){ foreach $key ( keys %Convert ){ s/$key/$Convert{$key}/gi; } print; } __DATA__ a (b) B (C) test.csv file.dat
一部の関数を制限したいのですが、どうすればいいのでしょうか。 OS: Linux WEBサーバー: Apache2.23 Perl: v5.8.8
１：HTMLのフォームから画像（ファイル形式はそのつど変わる）をアップしてもらい 　 その画像のバイナリデータをMySQLへ格納したい。 2：上記で格納したデータをperlでセレクトして取り出しブラウザに表示させたい。 以上を行う時はどの様なやり方が一般的なのでしょうか？
Perlでhtmlを吐き出す際にjavascriptをhtml内に直接書いているのですが、 これを外部ファイル（.js）にしたいと思います。 しかし、.jsファイルのほうにもログを参照してから、 書き込まなければならない部分があります。 それで.jsファイルを吐き出して、htmlを吐き出したいのですが、 簡単な方法はありますでしょうか。 よろしくお願いいたします。
Perlの中からPHPを呼び出してPHPで処理した変数結果をPerlで受け取りたいのですが可能なのでしょうか？
質問を閉め切った直後に気付いたもので、すいません！！ QNo.3797932の、つづきなのですが、、、 教えていただいた以下の方法 ------------------------- #!/usr/local/bin/perl use LWP::Simple; use XML::RSS; use LWP::UserAgent; my $url = 'http://news.google.com/news?hl=ja&ned=us&ie=UTF- … my $ua = new LWP::UserAgent; my $responce = $ua->get($url, 'User-Agent' => 'Mozilla/4.0'); my $data_from_web = $responce->content; print <<"HTML"; Content-type: text/html <html> HTML print $data_from_web; exit; ------------------------- の場合だと、ページ表示データは取得できるのですが、RSS特有のタグが 抜け落ちる為、その後の解析ができない事に気付きました。 なんとか、RSS特有のタグも含めてのRSS情報を入手する方法はないでしょうか？ ちなみに、RSS特有のタグも含めてのRSS情報は、ブラウザーのURLの窓に http://news.google.com/news?hl=ja&ned=us&ie=UTF- … このアドレスを直接入力してリターンキーを押すと、確認する事ができます。 度々申し訳ないのですが、よろしくご指導、お願い致します。
perlでの話なのですがrequireを使って、 例えば、以下のようにした場合、 同じファイルを何回もコンパイルすることになるのでしょうか。 どなたか教えていただけないでしょうか。 @xx=(1,2,3); for(@xx){ require "xx.pl"; } どうしてもＣＧＩがサーバーに与える負荷を軽減したいので、 無駄なコンパイルならば、一回だけrequireするようにしたいのです。
Google NewsのRSS情報をperlで取得し、表示するプログラムを作っています。 が、他のサイトのRSS情報は容易に取得できるのに、Google Newsだけは、取得できません。 具体的には、、、 ----------------------------- #!/usr/local/bin/perl use LWP::Simple; use XML::RSS; my $url = 'http://news.google.com/news?hl=ja&ned=us&ie=UTF- … my $data_from_web = get($url); print <<"HTML"; Content-type: text/html <html> HTML print $data_from_web; print $url; exit; ----------------------------- ※URL部分が長すぎて一部省略されている様ですが、 あえて２行で書くと、こうなっています。 http://news.google.com/news?hl=ja&ned=us&ie=UTF-8 &oe=UTF-8&output=rss&q=aiko'; 上記の様な簡単なプログラムで、歌手aikoのニュースに関する RSS情報を取得し、表示できるはずなのですが、実行してみても、 何も表示されません。 ちなみに、my $urlの部分を他のURL、例えば、日刊ゲンダイ http://headlines.yahoo.co.jp/rss/gen_ent.xml に差し替えて実行してみると、きちんと表示されます。 また、ブラウザーのURLの窓に、直接、プログラム内の$url部分である http://news.google.com/news?hl=ja&ned=us&ie=UTF- … というURLを入れ、リターンキーを押すと、歌手aikoのニュースに関する RSS情報が直接ブラウザーで表示されます。 なのに、上記のプログラムでは表示されないのです。 （ブラウザー等の情報もPerlで送信しないとGoogle newsはRSS情報を送信してくれない？） どの様にしたら、perlでGoogle NewsのRSS情報を取得できるのか、 教えていただけたら幸です。 尚、参考にしたサイトは以下です。 Google news日本語版 http://news.google.com/news??hl=ja&ned=jp&ie=UTF … Googleニュース日本語版のAtom/RSSフィード http://d.hatena.ne.jp/Gimite/20061205/1165287606 Googleニュース(日本語版)のRSSフィード http://blog.fkoji.com/2006/12091315.html Google News日本語版のRSSとAtomを取得してみるテスト http://ryouchi.seesaa.net/article/28534464.html PHPで実現しているGoogle NewsのRSS情報表示サイト http://www.usamimi.info/~ryouchi/googlenews/inde … Googleニュース用RSSジェネレータ http://g.1o4.jp/news-rss.html Google　NewsがRSSフィードを採用　 http://zen.seesaa.net/article/5748907.html ＲＳＳリーダーを使った情報収集術＆便利なフィード７選 http://google-mania.net/archives/895 以上、よろしくお願い致します。
ＰＣでホームページを運営しております。 荒らし行為をされる方にアクセス禁止をしたいのですが、ａｕの携帯という事が分かりました。 au携帯をアクセス禁止する為にはサブスクライバ IDなる物を取得すれば良いこと、 それを取得するには request.getHeader("X-Up-Subno") というperlスクリプトを使うことは分かりました。 が、シロウトの悲しさでその先が分かりません。 具体的にどうやってこのコマンドをどこに書きこめばいいのでしょうか。 番号を取得という事はどこかログに書き込むようなコマンドも 必要なのでしょうか。どなたか、ご教授くださいませ。 .htaccessに取得したIDを使ってアクセス制限する方法は分かりましたので、 サブスクライバ IDの取得方法の質問です。 基本の質問かもしれませんが、よろしくお願いします。
初めまして。無料のCGI（掲示板）をDLして自分のHPで使用しているのですが「Res」ボタンをクリックするとスレッドの一番上に来てしまい、返信フォームが一番下にある為に使いづらいので改造を試みています。 とは言っても初心者なのでやり方自体が間違っているかもしれませんが。 返信フォーム付近に<a name=jump>タグを入力してあります、URLに「#jump」と手入力すれば思った事が出来るのですが以下のCGIにどの様に記述すれば良いのか教えてください。 print "<form action=\"$script\" method=GET>\n"; if($up_down){ print "<a href=\"#$mm[$x-1]\">▲前</a> <a href=\"#$mm[$x+1]\" class=\"ud\">▼次</a>"; $x++; } print "<input type=hidden name=mode value=new_html>\n"; print "<input type=hidden name=no value=$no>\n"; print "<input type=submit value='Res'> </td></form>\n"; 下から2行目の「=$no」の後に「#jump」と記述すると「#」が「%23」になってURLが出てきます。 これをURLで「#jump」と表示されるようにしたいのです。 下手くそな説明で申し訳ありませんがよろしくお願いします。
お世話になります。 perlで時刻を表示していますが、 この度２時間後を求める必要が発生しました。 例えば、 ０８年２月２９日２３時１５分なら ０８年３月１日１時１５分というようにです。 このような「指定日時の何時間後を求める」ような関数は 存在するのでしょうか。 無いようで在れば、コードを教えていただけませんでしょうか。 ちなみに、データ保有は以下のとおりです。 日付；$yyyymmdd （例20080229) 時刻；$hhmm (例2315) 以上、宜しくお願いします。
今、次のようなcsvファイル(ファイル名: test.csv)があります。 id , year, aaa, 2000, aaa, 2001, aaa, 2002, bbb, 2000, bbb, 2001, 次の処理を行いたいのですが、初心者のため分かりません。 ・yearの横の列にflagという新たな列を設ける。 ・idが上行のidと一致した場合、flagに0を入力する。 ・idが上行のidと一致しなかった場合、flagに1を入力する。 最終的な形は、 id , year, flag, aaa, 2000, 1, aaa, 2001, 0, aaa, 2002, 0, bbb, 2000, 1, bbb, 2001, 0, のようなcsvファイルを新たに作りたいと考えております。 perlでこのような処理は可能なのでしょうか？ 初歩的な質問で恐縮ですが、ご存知の方がいらっしゃったら、 お教えいただければ幸いです。
日本語ドメインのpunycode変換ツールを作ろうと思っているのですが、 以下のようにperlで作成すると、 日本語をpunycode変換した部分の前に'-'が余計に付きます。 どうしてなのでしょうか？ プログラム： #!/usr/local/bin/perl use strict; use utf8; use IDNA::Punycode; idn_prefix('xn--'); my $jdomain = "日本語"; my $adomain = encode_punycode(${jdomain}); # HTTPヘッダ出力 print qq{Content-type: text/html\n\n}; print "[${jdomain}]→[${adomain}]\n"; exit(0); 結果： [日本語]→[xn---wgv71a119e] 正しい結果は、 [日本語]→[xn--wgv71a119e] になるはずです。 ちなみに、IDNプレフィックスを idn_prefix(''); にすると、結果は、 [日本語]→[-wgv71a119e] 本来の結果は、 [日本語]→[wgv71a119e] となるはずです。
どこかのサンプルでサブルーチンの中にサブルーチンが書いてあったのですが、 元々Perlではそういう書き方が出来たのでしょうか？ Perl4、Perl5、Perl5.6、Perl5.8 どれでも使えるものかどうか知りたいです。
grepを使った下記のようなプログラムの出力結果が理解できません。 --------------------------- @arr=("a"); $str="a"; @buf=grep{m/$str/g} @arr; print "buf=[@buf]\n"; @buf=grep{m/$str/g} @arr; print "buf=[@buf]\n"; --------------------------- [出力結果] buf=[a] buf=[] --------------------------- なぜ連続で同じ条件でgrepすると2回目はHITしないのでしょうか？ なお、さらに繰り返しても、 buf=[a] buf=[] buf=[a] buf=[] 　： 　： のように一回おきにHITします。 また条件を一回ごとに変えるともちろんうまくHITします。 中で何が起きているのか理解できないので、 わかる方いらっしゃいましたら教えていただけないでしょうか？ perlはActivePerl-5.8.7です。 なお、実際当方のプログラム内ではループの中で$strが変わっていきますが、 たまたま同じ検索文字列が続いたときにHITしなかったため、 上の簡易プログラムで試してみたところです。
学習本の初めてのPerl第3版にpopやpush のことを演算子とも関数とも書かれているのですが 曖昧でよくわかりません それともどちらも正しいのでしょうか?
perlの正規表現マッチングでうまくいかないことがあり、質問させていただきたいと思います。 たとえば AAAAAAXBBBXCCX という文字列があって「各Xの左側に位置する6文字をすべてあつめる」ということをしたいと思っています。 この文字列では AAAAAA AAXBBB BBBXCC が自分の取り出したい文字になります。 そこで以下のようなコードを書いたのですが my $seq = "AAAAAAXBBBXCCX"; my $length = 6; my @fragmentlist ; @fragmentlist = $seq =~ /(.{$length})X/g ; foreach my $fragment (@fragmentlist ){ print $fragment , "\n"; } 実際に出力されるのは AAAAAA BBBXCC となり、 AAXBBB は認識されないようです。これはおそらくAAAAAAとAAXBBBが元の文字列の中で部分的に重なっているからだと思います。 このようなマッチング対象が文字列の中で重なっている場合は、どのようにすればすべてのパターンを集めることができるでしょうか？ active perl 5.8.8 , WinXP sp2環境です。
mysqlへデータを投げたものをmysql上で確認したいのですが構文の書き方がわかりません。超初心者で言いたい内容もわかりにくいかもしれまんが ご理解ください。
返りや変数の「値」の中にどうしても $+アルファベットのものがあります。これは覆せない前提です。 このまま何らかの処理 (たとえば置換) に渡すと、あらかじめ値を書き出すか否かに関わらず、$ が文字としてみなされず、どうしても変数として展開されてしまいます。 もらう値については事前にエスケープできない (上記のとおり、前提です) ので、どうすればよいでしょう。
Perlでスクリプトを組んでいます。 Perlからファイルオープンダイアログを開いて、ファイル名を得たいと思っています。どのようにすればよいか、教えていただけますか？ 宜しくお願いいたします。
perlはインストールできています。 データベースにDBIモジュールをインストールしたいのですができません。マニュアルどおりにしてますが コマンドプロンプト→ c:\>ppm→ No Perl script found in input と表示されます。 どゆうことでしょうか？ よろしくお願いします。
現在独学でPERL　MYSQL　PHPを学んでおります。 MYSQLからPHPにデータを書き込ませる、読み込ませるといった場合、 $sql="insert into～";とかpost getで投げるなどの決まりの構文があるとゆうことまでは理解できます。PERLをMYSQLに投げる場合も同じように考えたらいいのでしょうか？いろいろなサイトをあさってみても構文例がややこして理解できません。 超初心者ですので、とてもわかりやすく教えてくれるサイトなどありましたら教えてください。
perl 初心者です。 while (<>) { if (/条件/) { 　　　print; } } 複数のファイルの中で、if文の /条件/　で指定した部分にマッチした行数をカウントして変数に入れたいのですが、ここからどうすればいいのかわかりません・・・。 初歩的な質問で申し訳ないのですが、よろしくお願いします。
perlで他のサーバーにあるファイルが存在するか確認したり、それに似たようなことをすることは可能でしょうか？ どなたかご回答お願いします。
データ数が「$data = 300」ある時などにページ送りのリンクを 1ページに30データとして10ページ分のリンクが必要ですが 一度に１０ページのリンクを作らず、 1　2　3　4　5　＞次へ 前へ＜　6　7　8　9　10 という様なページ送りを表示したいのですが分からないので困っています。お願いします。
絶対パス相対パス環境変数についていまいち概念が掴めないのでどなたかご教示いただけないでしょうか？ 絶対パスというものは指定のフォルダなどへの行き道をしていしたもの、相対パスはある程度のものだけきじゅつしてあるしか認識できておりません。 ググって探してみてもいまいちいい内容がなくて・・・ 何かいい知識の身につけ方があったら教えてください。 あと例えばCGIを使うためにActivePerlなどを入れたときに絶対パスで指定する方法があるとか言うのはどういった意味なのでしょうか？
PCと携帯の振り分けについて教えてください。 htaccessで、ユーザーエージェントの判断で、PC用のトップページと 携帯用のトップページへ振り分けを行ったのですが・・・ http://xxx.com/ だと正常に携帯トップページへ振り分けられるのですが、 http://xxx.com/index.htmlだと携帯からでもPCのトップページが 表示されてしまいます。 いろいろ調べたのですが、携帯はMETAタグのリフレッシュ？に対応していないから、http://xxx.com/index.htmlのindex.htmlを携帯用に作成してPCのトップページは別に作成するとか・・・書いてありました。 http://xxx.com/index.htmlにアクセスした場合は、htaccessは有効にならないのでしょうか？ 他にどのような対応方法があるのでしょうか？ できれば、現PC用のindex.htmlを使用したいのですが・・・ よろしくお願いします。
客先サイトのCGIが以下のエラーが出て使用できないといわれました。 ■エラーメッセージ cgi-lib.pl: Unknown Content-type: application/x-www-form-urlencoded; charset=shift_jis 色々と調べていくうちにauの最新機種では エラーがでるとの解説があったので試してみましたが 同機種が無い為確認できていません。（現在ユーザー様の回答待ちです） しかし、どうも腑に落ちないことがありまして投稿しました。 エラーが出て動作が出来ないといわれた機種が「W54S」 エラー発生時に他のauの機種でも同様の現象が起きているかを 確認したかったのでアクセスログを確認してアクセスされている機種を 調べたところ同じ時期に発売されたであろう機種「W55T」があり こちらでは問題が発生していないようでした。 機種によって仕様が変わったりするのでしょうか？ また、同じような現象にあって確実な修正方法を ご存知の方はいらっしゃいますか？ ・Perl 5.8.0 ・cgi-lib.pl 2.18 ←81行目を修正しています
初心者です。 テキストファイルの中身を調べて、その中に特定の拡張子を持ったファイル名があれば更にその中身を調べていって、階層構造になったファイルを全て調べあげるスクリプトを作ろうとしています。 例えばfile1.txtの中身が ... hoge file2.txt file3.txt hogehoge ... だったとすれば、今度はfile2.txtおよびfile3.txtの中身に.txtという拡張子を持ったファイル名があるかどうか調べ、該当するものが無くなるまで調べていきます。 これらのテキストファイルは全て同じディレクトリ内に存在します。 どういう具合のループにすればよいのか想像がつきません。 アドバイスお願いします。
お世話になります。 perlでcgiを作りたいのですが、 簡単なsampleはないでしょうか。 参考になるようなページを教えていただければ十分です。 【機能】 ファイルｘをリストボックスから選択させ、 内容を表示する。 【ファイルｘの内容例】 リンゴ、青森、３００ ミカン、和歌山、６０ バナナ、輸入、１８０ というように、品名、産地、単価の項目が列んでいます。 【動き】 リストボックスでファイルｘを表示させ、 選ばれた項目の単価を表示する。 【イメージ】 リストボックス リンゴ ミカン バナナ ↓ ミカンを選ぶ ↓ 単価は６０円です。 と表示する。 以上、分かりにくいですが、 宜しくお願いします。
UTF-8で作ったPerl内で、UTF-8にエンコードしたい部分とは別に、 EUCやShift-jisにエンコードして、 UTF-8以外の仕様になっている検索エンジンなどの検索結果に、 テキストリンクを飛ばしたいのですが、行き詰まりました。 いい方法はありますでしょうか。
Perl初心者です。 ある条件にしたがって文字を結合したいのですが、なかなかうまくいきません。以下のように記述してみたのですが何かヒントございましたらお教え願えませんでしょうか。 実現したいのは、たとえばQ5_1a_1_CB_1とQ5_1a_1_CB_3が"1"だったら_KINOU5_1a_1_に「あ,う」、Q5_1b_1_CB_1とQ5_1b_1_CB_5とQ5_1b_1_CB_6が"1"だったら_KINOU5_1b_1_に「あ,お,か」と代入したいのです。 想像では「$kinou .= $z.",";」のところが何か不足しているような気がします。 for($i=1; $i<=14; $i++){ for ($j=1; $j<=3; $j++){ $c = ('','a','b','c','d','e','f','g','h','i','j','k','l','m','n',)[$i]; $name2 = "_KINOU5_1".$c."_"."$j"."_"; $kinou = ""; for ($k=1; $k<=11; $k++){ $z = ('','あ','い','う','え','お','か','き','く','け','こ','さ',)[$k]; $name3 = "Q5_1".$c."_"."$j"."_CB_".$k; if ($data{$name3} eq '1'){ $kinou .= $z.","; } } chop $kinou; $newtemplate =~ s/$name2/$kinou/g; } }
perlについてどなたかご教授頂けないでしょうか。 perlでホームページ（管理用のページ）を作成していて、 『index.html』というページが、最後にアクセスされた時間（最終アクセス日時） を取得する方法は分かるのですが、HTMLファイルに最後にアクセスした人（IPアドレス） を取得する事は可能でしょうか？可能でしたら記述を教えて下さい。 ご存知の方いらっしゃいましたらご教授下さい。
OS: RedHatLinux7.2 perl -v : This is perl, v5.6.2 built for i686-linux HttpErrLog: display: Unable to connect to X server (). Premature end of script headers: /XXX/XXX/XXX.cgi GD::Graphを用いたperlスクリプトを実行すると、上記のようなエラーとなってしまいます。 コマンドでの実行では問題無く動作します。cgiのパーミッションも確認しました。ソースは以下の通りです。作業が進まなくて困っています。 どなたかお知恵をお貸しください。 perl.cgi: --------------------------------------------------------- #!/usr/bin/perl -- use strict; use GD::Graph::bars; my @xLabels = qw( Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ); my @data2002 = qw( 17 19 26 38 56 64 67 53 40 29 21 13 ); my @data2003 = qw( 19 24 27 41 56 69 75 60 44 33 22 15 ); my @data = ( \@xLabels, \@data2002, \@data2003 ); my $graph = GD::Graph::bars->new( 800, 600 ); $graph->set( title => "Rainfall 2002/2003", y_label => "Millimetres" ); my $image = $graph->plot( \@data ) or die( "Cannot create image" ); open( OUT, "| display -") or die( "Cannot display image: $!" ); binmode OUT; print OUT $image->png(); close OUT; ---------------------------------------------------------
今http://d.hatena.ne.jp/ragtarou/20080121のサイトを参考にしてレンタルサーバーにインストールを試みましたが、２日ねばってもエラーが解決できないので、とりあえずインストールするのはあきらめることにしました。 perlのモジュールにWWW::Mechanizeというのがあって、これについては、インストールしなくても、CGIのプログラムで呼び出すことによって使えることがわかりました。 http://oshiete1.goo.ne.jp/kotaeru.php3?q=1680065 ここにやり方がのっています。 これと同じようなやりかたでWeb::Scraperを使うことはできるのでしょうか？ また、Web::Scraperがはじめから導入されているレンタルサーバーなどご存知でしたら教えてください。
フォームから受け取ったデータに改行があれば<br />に変換。 さらに<br />が2つ続いたら</p><p>に変換。 それを、テキストエリアに表示したいのですが、次のようなコードを書いたところ、 入力するデータが少ない（100文字程度）時は、問題なく処理されますが、データが多い（200～300文字程度）とエラー（Premature end of script headers:hoge.cgi）になります。 どこがいけないのか教えて下さい。 PCのスペックの問題なのでしょうか。 送り側（htmlのフォーム）の該当箇所 <textarea name="reviw" id="reviw" rows="8" cols="46"></textarea> CGIは 冒頭で 受け取ったデータの改行コードは、\nに変換し $in{$key} = $val; の形でセットしてあります。 print "Content-type: text/html\n\n"; （中略） print <<'CK13'; <tr> <td> <textarea name="tagoutput" cols="70" rows="10" onclick="this.focus();this.select()"> CK13 print '<p>'; &reviw_put; print <<'CKouttag6'; </p> </textarea> </td></tr> CKouttag6 （後略） がhtml出力部分で、 サブルーチンは sub reviw_put { $in{'reviw'} =~ s/\x0A/<br \/>/g; $in{'reviw'} =~ s/(<br \/>){2}/<\/p><p>/g; print "$in{'reviw'}"; } です。
変数$aのなかに変数$bが含まれていたらをperlの正規表現であらわすと どのようになるのでしょうか？if($a=~ /$b/)ではうまくいかないのですか？
どのジャンルか迷いましたが、ここでお願いします。 ローカル環境で、トップにbbbディレクトリがあります。 bbbディレクトリの中は .htaccess index.html cccディレクトリ があり、 cccディレクトリの中は a.htmlがあります。 ￥┬index.html 　 └bbb┬index.html　.htaccess 　　　　　└ccc─a.html ここでhttp://localhost/bbb/a.htmlにアクセスすると cccディレクトリの中のa.htmlを参照するようにさせたいと思い、 .htaccessに RewriteEngine on RewriteCond $1 !^(b.html) RewriteRule ^(.*)$ ccc/$1 [L] や又は RewriteEngine on RewriteCond $1 ^(?!b.html)(.+) RewriteRule ^(.*)$ ccc/$1 [L] と書いたのですが Internal Server Error The server encountered an internal error or misconfiguration and was unable to complete your request. というエラーが出てしまいます・・・ RewriteEngine on RewriteCond $1 ^(a.html) RewriteRule ^(.*)$ ccc/$1 [L] と書けばちゃんと表示されるのですが、否定を用いた書き方（RewriteCond $1 !^(b.html)） だと、どこが間違っているのでしょうか？
今作っているシステムについて助言をいただきたいです。 年度.htm→checker.cgi→upload.cgiと連携している3つのファイルがあります。事前にユーザーとパスワードを登録しておくcgiがあり、年度.htmでユーザーを、checker.cgiでパスワードを入力します。パスワードが一致すればupload.cgiにジャンプします。そして、また、年度.htmに戻ります。 そこで、不便なのが、何回もファイルを提出しようとすると、この動作を何回も繰り返すことになることです。そこで、checker.cgiのパスワードを1回の入力で、あとはユーザーの選択のみでこのサイクルをしたいと考えています。 私は、cheker.cgiを1と2に分けて、また、パスワードファイル(.pas)を別のフォルダにも書き出し、条件式でcheker1と2を判断するプログラムを試してみましたが、できませんでした。 何かよい方法は考えられますか？？パスワード認証をするcheker.cgiのソースを載せますので、教えていただきたいと思います。 よろしくお願いします。 #!/usr/bin/perl # CGI::Carpモジュールを使ってエラーをブラウザに表示する use CGI::Carp qw(fatalsToBrowser); use CGI qw(:standard); #require 'module/jcode.pl'; #「jcode.pl」を読み込む # FORMから得た情報を整理 local( $pair, $buffer ); if ( $ENV{'REQUEST_METHOD'} eq "POST" ){ read( STDIN, $buffer, $ENV{'CONTENT_LENGTH'} ); }else{ $buffer = $ENV{'QUERY_STRING'}; } local( @pairs ) = split( /&/, $buffer ); foreach $pair ( @pairs ) { local( $name, $value ) = split( /=/, $pair ); $value =~ tr/+/ /; $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack( "C", hex($1) )/eg; # &jcode'convert(*value, 'sjis'); # "jcode.pl"で日本語をデコード $FORM{$name} = $value; } $nendo = $FORM{'nendo'}; $jiki = $FORM{'jiki'}; $kamoku = $FORM{'kamoku'}; $gkseki = $FORM{'target'}; @tmp = split /\//, $gkseki; $target = $tmp[0]; $gname = $tmp[1]; # HTML出力 print <<"HTML1"; content-type: text/html <html lang="ja"> <head><title>$kamoku レポート</title></head> <body bgcolor="#CCFFFF"> <center><br> <h3><font face="HGP創英角ポップ体" color="#0000FF" size="5"> $nendo年度 $jiki &nbsp&nbsp $kamoku</font></h3><br> <font face="HGP創英角ポップ体" color=black size="4"> $target <!--$gname--> さん<br><br><br> ”レポート提出”，”ホームページ提出”，”提出確認・成績確認”<br> のいずれかを選択してください。</font> <br><br> <form action="upandview.cgi" method="post"> <input type=hidden name=nendo value="$nendo"> <input type=hidden name=jiki value="$jiki"> <input type=hidden name=kamoku value="$kamoku"> <input type=hidden name=target value="$target"> <input type=hidden name=gname value="$gname"> <b> <input type=radio name=work value=1 checked>レポート提出　 <input type=radio name=work value=3>ホームページ提出　 <input type=radio name=work value=2>提出確認・成績確認 <br></b><br><br> <font face="HGP創英角ポップ体" color=black size="4"> 次に，パスワードを半角英数字で記入して下さい。 <br><font size=3> 最初に記入するパスワードが登録されます。<br> 忘れないように，メモを取るなどして下さい。<br> 後でパスワードを変更する際にも必要です。</font></font><br><br> <input type=password name=passwd> <br><br><hr><br> <input type=submit value="次に進む"> </form> </center></body></html> HTML1 exit;
$psfileを、同じように$tpfileファイルを作りたいと思っています。いろいろ試してみたんですができませんでした。どこがおかしいか教えてください！ ※フォルダ指定が$nendo/tempとなるようにしたいです。 $psfile = "../box/$nendo/$target.pas"; # パスワードファイル $tpfile = "../box/$nendo/temp/$target.pas"; # コピー $tgfile = "../box/$nendo/$target.dat"; # 提出・成績ファイル $mbfile = "../master/box/$nendo/common/meibo.dat"; # 受講生名簿ファイル(master) $m = 'm'; ### $passwd伝達あるか-->無ければ終了。 $psfileあるか-->無ければ$passwd登録 if($passwd ne ''){ chmod 0600,$psfile; if(open INP, "$psfile" ){ $reppas = <INP>; close INP; chmod 0000,$psfile; }else{ open OUTP, ">$psfile"; print OUTP "$passwd"; close OUTP; chmod 0000,$psfile; $reppas = $passwd; } if($passwd ne ''){ chmod 0600,$tpfile; if(open INP, "$tpfile" ){ $reppas = <INP>; close INP; chmod 0000,$tpfile; }else{ open OUTP, ">$tpfile"; print OUTP "$passwd"; close OUTP; chmod 0000,$tpfile; $reppas = $passwd; } }else{ $coment = "パスワードが記入されていません。 (>_<)"; &dispcom; # $passwdがカラだ。 } unless($gmail =~ m/@/){ $coment = "連絡メールが記入されていません。 (>_<)"; &dispcom; # $gmailがカラだ。 } ### $passwd照合して，名簿の追加・削除 if($reppas ne $passwd){ ## $passwd 不一致 $coment = "パスワードが正しくありません。 (>_<)"; &dispcom; } else { ## $passwd 一致 chmod 0600,$mbfile; # 名簿の読込 @mbdat = (); if(open INP, "<$mbfile"){ flock(INP,2); while ( $temp = <INP> ){ chomp $temp; @tmp2 = split /<>/,$temp; if( ($tmp2[0] eq $target) || ($tmp2[1] eq $gname) ) { if($adddel == 2){ $coment = "二重登録はできません。 (>_<)"; &dispcom; # $targetが二重登録だ。 }else{ if( ($tmp2[0] eq $target) && ($tmp2[1] eq $gname) ) { chmod 0600,$psfile; # パスワードfile削除 unlink $psfile; chmod 0600,$tgfile; # パスワードfile削除 unlink $tgfile; chmod 0600,$tgfile; # 提出・成績記録file削除 unlink $tgfile; $coment = "$target $gname さんの削除"; }else{ $coment = "削除はできません。 (>_<)"; &dispcom; # $targetと$gnameの１個以上が一致してない。 } } }else{ push ( @mbdat , $temp ); } } flock(INP,8); close INP; chmod 0000,$mbfile; }
perl5.8.5を使っています。 次のような形で$1の値を表示させたいのですが（そのまま$strを表示させれば良いとは思いますが、とりあえず） $str = "aaa"; if ($str !~ /^(bbb|ccc|ddd)/) { print "t=".$1; } これだと$1に値が入ってきません。 この場合はどのようにすれば$strの「aaa」を取り出すことができるのでしょうか？
perlについてご回答お願いいたします。 ■サーバA -検索プログラムフォルダ ■サーバーB -データフォルダ サーバAの検索プログラムからサーバーBのデータフォルダ内のデータを参照してマッチング処理をしたいのですが、別サーバーのデータを参照する場合の記述方法がわかりません。ご存知の方、おられましたらご教授おねがいいたします。 現在、下記のように記述しております。 #検索用データディレクトリ $serch_datadir = "./s_data/"; foreach $s_file (@list) { next if $s_file eq '.'; next if $s_file eq '..'; next if -d $s_file; if ($s_file =~ /\.csv/) { if (!open(FILE,"$serch_datadir$s_file")) { &s_error("検索対象ファイルが参照できません"); }
utf-8のLinuxマシンで、sjis(改行コードCR+LF)のデータファイルを読込み、euc-jp(改行コードLF)でファイルに出力したいのですが、どのようにすればよいでしょうか。プログラム実行前後に入出力ファイルを直接コード変換することは考えておらず、全て一つのプログラム内でやりたいと考えています。 &jcode'convertで変換するのかなと思っているのですが、読込み時・書き込み時のどちらでやるべきなのか、あるいは両方やるべきなのか分かりません。データには、「・」「I,II」などの特殊文字(?)が含まれているので、それらの文字で問題が起きないかなどもちょっと心配です。 また、&jcode'convertでeucに変換すれば、改行コードも一緒にCR+LFからLFに変換されるものでしょうか。 文字コードのことがよく分かっていないので、的外れな質問になっているかもしれませんが、ご教示願います。
2行目と3行目の出力がなぜ異なるのか理解できません。 2行目が期待通りに動かなかったので3行目のように書き直したのですが、 理由を教えていただけると助かります。 $s = 'goo'; print ((reverse $s), "\n"); print (($t = reverse $s), "\n");
現在ショッピングカートの中のカゴの中身を表示する部分を 作成しています。 (PERL5.8です。) 以下のコーディングを見ていただくと分かる通り 備考の欄には$option1、$option2、$option3の値が挿入される形となっており ます。 現在では$option1しか使いません。 $option1には宅急便区分（通常便、クール便）+倉庫コードを入れる予定とな っております。 各倉庫から商品が発送されるため送料がいくらかかるかをプログラム上計算し なくてはなりません。 その材料として値が必要になります。 ですので、トータルで何種類で内クール便が何種類かと情報を表示させたいの です。 どのようにコーディングすればよいか教えていただけませんでしょうか。 初心者な私にアドバイスを宜しくお願い致します。 一応該当するコーディングを載せておきます。 例； 商品名 　　　　備考　　　　 単価 数 数　 金額 にしん (宅急便区分：通常01) 57224円 1 57224円 ほっけのひらき (宅急便区分：通常01) 10395円 1 10395円 まぐろの刺身 (宅急便区分：クール02) 254111円 1 254111円 マグロの煮付け (宅急便区分：通常02) 253911円 1 253911円 ワイン (宅急便区分：クール01) 57424円 1 57424円 小計 633065円 トータル4種類（内別途クール便2件） ↑ この部分作成したい。 foreach $line (@lines){ ($code,$shohin,$price,$kazu,$option1,$option2,$option3) = split (/<>/, $line); $unit_subtotal = int($price*$kazu); $subtotal = $subtotal+$unit_subtotal; } print <<"EOF"; <tr><td colspan=7 height=2 bgcolor="$dark"> </td></tr> <tr><td colspan=5> </td> <td align=right>小計</td> <td align=right><font color="#ff6600"><b>$subtotal円</b></font></td> </tr> <tr><td colspan=7 height=2 bgcolor="$dark"> </td></tr> </table> EOF
アクセスカウンタ（cgi_pagelogというフリーソフト）を動かしたいのですがどうしても動かず悩んでいるのでどなたか教えてください。 環境はXP+IIS+Active Perlで動かしています。ちなみにまだローカルテスト段階です。 一応CGIが動くかどうかテストして環境変数を表示させるところまでうまくいっています。 cgi_pagelogの設定方法をみながらやってもともとインストールのパッケージにはいっていた「PageLog.html」についているカウンタは正常に動くのは確認しました。（ログとかはいらずカウンタだけでよいので） そこで自分のテスト用HTMLに記述されているタグを書いて設定しましたが動きません。 ページをローカルで開くとカウンタは「×」で表示されてしまいます。 他では動くのに自分の記述したものが動かないのはどうしてでしょうか？ ホスト名とかはよく確認しましたが間違ってはいません・・・ ご存知の方いらっしゃいましたらよろしくお願いします。 あとfly.exeは説明書どおりにいれたのですが何か操作しなければいけないものなのでしょうか？
#!/usr/bin/perl -w =begin comment OS: Windows XP Perl: Active Perl v5.8.8 スクリプトは「Shift-JIS」で書いています。 日本語処理関係で参考にしているのはもっぱらオライリージャパンの「Spidering Hacks」の付録の翻訳者 による日本語処理の解説です。 http://oshiete1.goo.ne.jp/qa3716434.html の回答に従い、use encoding 'shiftjis';　から　use encoding 'cp932';　へ変更している以外は そこに書かれているやり方に従っていると思います。 UTF-8で書かれたHTMLファイルを「LWP::UserAgent」で取得し、それを Shift-JISコードで出力したいと思い以下のコードを実行したのですが、 以下のエラーが出てしまいました。 Parsing of undecoded UTF-8 will give garbage when decoding entities at C:/usr/local/site/lib/LWP/Protocol.pm line 114. このエラーは何が原因なのでしょうか？ =end comment =cut use strict; use LWP 5.64; use Encode; use encoding 'cp932'; # http://oshiete1.goo.ne.jp/qa3716434.html の回答に従い、'shiftjis'から'cp932'へ変更。 #use encoding 'shiftjis'; binmode(STDERR, ':raw :encoding(shiftjis)'); my $url = "http://www.audiounion.jp/bin/products/used/A0/-/ … my $browser = LWP::UserAgent->new; my $response = $browser->get( $url ); die "cannot get $url:", $response->status_line unless $response->is_success; my $content = Encode::decode('utf8', $response->content); print $content;
あいうえお かきくけこ さしすせそ を変数に文字列として代入したいのですが、 my $string = "あいうえお\nかきくけこ\nさしすせそ\n"; などと改行文字を自分で入れたりといったことをせず、 変数に文字列として代入する方法を教えてください。 print <<END; あいうえお かきくけこ さしすせそ END という方法があるのは分かったのですが。。。
perl初心者です。学生でperlを学びはじめたばかりです。 文の変換プログラムをperlで作りたいのですが、 各辺が5cmの四角形→50mm 正方形 30分間の走りこみ→0.5時間　マラソン という具合に言葉の置き換えと数字の変換を同時に行えるようなプログラムを作りたいです。 また、数字を拾うときに言葉によって式を変えたいです。 $pattern =~ s///g;と数値演算子/を使ってやるのは分かるんですが、それをどう組み合わせて使ったらよいのかわかりません。 簡単なことを質問して申し訳ありません。 どうかよろしくお願いします。
HTMLファイル内の日本語が数値文字参照で書かれていて、 それを普通の文字に変換したいと思い、以下のプログラム で数値文字参照を文字に変換してみました。 文字コードはシフトジスです。 use Encode; use encoding 'shiftjis';binmode(STDERR, ':raw :encoding(shiftjis)'); while (<STDIN>) { my $line = $_; $line =~ s/&#([0-9]{1,5});/chr($1)/eg; $line =~ s/&#[xX]([0-9A-Fa-f]{4});/chr(unpack('S', pack('H4', $1)))/egi; print $line; } ほとんどの文字はテキストエディタでも見える文字に変換されたのです が、数値文字参照「－」（ブラウザで見るとマイナス記号？）は 変換できませんでした。 また、ブラウザ上でこの文字をコピーしてメモ帳にペーストしてみると ちゃんとブラウザ上と同じマイナス記号？が表示されます。 原因が分かるかたがいましたら回答をお願いいたします。
こんにちは。 自動応答メールフォームのCGI「ThemeResMail」というのを 使っているのですが、うまく動作しません。 このcgiをアップしたのは以下のレンタルサーバーです。 http://www.dot5hosting.com/dot5/ 使用しているcgiはこれです。 http://apps.cside.com/theme/tmresmail/ メール送信完了画面は出るのですが、 送信者、あて先共にメールが届きません。 同じ設定で他のサーバー（xrea）ではうまくいきました。 sendmailとperlのパスは調べた所、間違いないようです。 ■dot5でのパス sendmail /usr/sbin/sendmail Perl /usr/bin/perl 何が原因なのかどんな事でも結構ですのでコメント頂けると助かります。 よろしくお願いします。
下記のようにHTMLを出力しているのですが、文字化けのため、 $top_html .= <<"<EXIT>";から$top_html .= <<'<EXIT>';のように シングルコーテションに変更しました。 文字化けは解消されたのですが、$informationが展開されなくなりました。 どのように記述すれば、$informationが展開されるのか教えてください。 $top_html .= <<'<EXIT>'; <head> <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"> <meta http-equiv="Content-Style-Type" content="text/css"> ・ ・ ・ <html><body> ・ ・ $information ・ ・ ・ </body></html> <EXIT> よろしくお願いします。
エディター等で使用できる、通常の正規表現で、例えば、全角文字を半角文字にする方法はありますでしょうか？ ※つまり、PerlのtrやPHPのstrtrのようなことです。 例えば、正規表現対応のエディターで、サイト全体の全角英数字を半角英数字にするような処理をしたいのですが。
perlの初心者の者です. 以下のようなサンプルソースを実行すると Can't locate auto/YAML/Syck/DumpYAML.al in @INC (@INC contains: C:/Perl/site/lib C:/Perl/lib .) at C:/Perl/site/lib/YAML/Syck.pm line 113 というエラーが出てしまってyaml.txtに当然実行結果が書き込まれていません.原因はなんでしょうか？
Perlで、サーバー移設に伴う問題です。 どのように対処すれば良いのか知恵をお貸し下さい。 sakuraサーバーからxreaのサーバーへ移行する際の問題です。 以下ソースの抜粋です。 ----- &ReadParse(*form); if($form{'mode'} eq ''){ return; } ----- sakuraサーバーでは、上記で問題なく動いています。 xreaサーバーに移行しようとするとエラーが出るので調べてみたところ、 URL引数に問題があることがわかりました。 sakuraサーバーでは (URL)?mode=xxxx (URL) のどちらの表記も動きます。引数が指定されていない場合は空の文字列となるようです。 xreaサーバーでは (URL)?mode=xxxx でしか動かないのです。空の文字列と認識されてくれず、下記のエラーが出てしまいます。 --- Use of uninitialized value in string eq at /virtual/akamitori/public_html/jobhunt/memberlist/cgi-bin/memberlist_.cgi line 48. --- どのように対処すれば良いでしょうか？
perlの初心者の者です. 以下のようなサンプルソースを実行すると Can't locate auto/YAML/Syck/DumpYAML.al in @INC (@INC contains: C:/Perl/site/lib C:/Perl/lib .) at C:/Perl/site/lib/YAML/Syck.pm line 113 というエラーが出てしまってyaml.txtに当然実行結果が書き込まれていません.原因はなんでしょうか？cpanコマンド, ppmコマンドを用いてYAML::Syckをうまくインストールできなかったのでcpanサイトにいってtarボールを取ってきて解凍し, 適当な格納モジュールフォルダに格納しています. サンプルスクリプト #!/usr/bin/perl use YAML::Syck; $data = [ {data1=>10, data2=>20, data3=>30} ]; DumpFile("test.txt", $data); 出力結果はtest.txtは 　data1: 10 data2: 20 data3: 30 になるはずなのですが.
今、S001.csvからS099.csvまでのファイルがあります。 これを下記のプログラムを書いて、新たにSA001.csvからSA099.csvまでのファイルを作りたいと考えています。 しかし、途中途中で数字が抜けているため、全てのファイルが処理できず 困っています。たとえば、S001.csvからS009.csvまでは 存在するが、S010.csvはなく、またS011.csvからは 存在するという具合です。 初歩的な質問で大変恐縮ですが、ご教示いただければ幸いです。 for ($i = 1; $i <= 99; ++$i) { 　$file = sprintf("S%03d.csv", $i); 　$newfile = sprintf("SA%03d.csv", $i); open (FILE, $file) or die; open (NEWFILE, ">$newfile") or die; 　while (my $line = <FILE>) { 　my ($aaa, $bbb, $ccc) = split(/,/, $line); 　print NEWFILE join(',', $aaa, $bbb), "\n"; 　} close(FILE); close(NEWFILE); }
Perlについて質問します。 Perlで特定のディレクトリ及び、サブディレクトリ全てのファイルの容量を取得する方法についてです。 opendir、readdir関数を使用し指定した階層の合計が表示できたが、それより１つ下の、サブディレクトリはファイルを読み込めませんでした。 どうすればサブディレクトリのファイルも読み込んでもらえるでしょうか。 よろしくお願いします。
perl言語を使用してテキストをダウンロードし続け、テキストの内容が変更した場合何かアクションを起こす、みたいなプログラムを作ろうとしていましたが初っ端の「テキストをダウンロード」の時点で行き詰まり泣きそうです。 google先生に聞いても「lwp::useragent」を使ったすごいプログラムしか出てこず、私が実現したいテキストファイルのダウンロードという恐らく初歩的なものは出てきませんでした、泣きそうです。 条件として、「テキストをダウンロードし続け、変化があれば何かアクションを起こす（知らせる）」というものであればどのような言語でもよいのですが、いかんせんプログラムは雀の涙ほどの知識しかないperlとちょっとしか触ったことのないCしかないので、できればperlでの実現を目指したいと思っています。 これって恐らく初歩的なことなんですよね、ごめんなさい。 こんなこと聞いてごめんなさい。
Windows XP環境で作業をしています。 コマンドプロンプトで、次のように動かすプログラムがあったとき、 今のディレクトリ>command file1 file2 file3 これをperlから呼び出したい（perlで実行させたい）のですが、どのように書けばいいのでしょうか。 調べるとパスという言葉がよく出てくるのですが、パスという言葉の意味もよくわかっていません； わかる方がいらっしゃいましたら、是非教えてください。 よろしくお願いします。
ファイルをアップロードしたいＣＧＩが欲しく サンプルをみつけたのですが、このＣＧＩだと ファイルをアップロードしたときに、ファイル名がアップロードした時刻になってしまいます。 ファイル名を変更することなく、アップロードするにはどう変更すればよいのでしょうか？ お願いします。ちなみにアップロードしたいファイルの種類はエクセル形式のファイルです。 プログラムは以下のようになってます。 #!/usr/bin/env perl use strict; use CGI; use CGI::Carp qw(fatalsToBrowser); use POSIX qw(strftime); my $q = new CGI; print $q->header(), $q->start_html(); #print $q->dump; # for debug my $outputdir = "log"; # ファイルを置く先 (ディレクトリ) my $fh = $q->param('uploaded_file'); my ($ex) = ($fh =~ m|(\.[^./\\]+)$|); # 拡張子 if ($fh ne "") { my $timestamp = strftime "%y%m%d%H%M%S", localtime; my $outputfn = "$outputdir/$timestamp$ex"; open(F, "> $outputfn") or die; flock(F, 2); if (defined $fh) { while (<$fh>) { print F $_; } } close F; print qq{saved as <a href="$outputfn">$outputfn</a>}; } print $q->start_multipart_form(-name => 'myform'), $q->filefield(-name => 'uploaded_file'), $q->submit("OK"), $q->endform, $q->end_html(), "\n";
皆様のお知恵を拝借したく投稿しました。 よろしくお願いします。 perlでのデータ処理で２つの入力ファイルがあります list1 list2 ----------------- ------------------ start end start end 1 10 6 8 12 16 7 14 20 30 35 39 34 42 41 47 80 89 110 130 ----------------- ------------------ この2つのファイルを比較して以下の処理を行ないます (1)list1から見たlist2の1行目を比較し、領域の重複が見られたら両方にフラグを立てる →この場合領域6 - 8で重複が見られる (2)両方の終点を比較し、終点値の小さい方をカウントアップ（次の行へ進む） →1行目の場合、list2の終点が小さいのでlist2の行を進める (3)list1の1行目とlist2の2行目を比較する (4)終点を比較して終点の小さい方の行をカウントアップする →以下(1)～(4)の行程を繰り返す。 (5)上例を比較の流れは以下のとおりになります list1 1-10 , list2 6-8 list1 1-10 , list2 7-14 list1 12-16 , list2 7-14 list1 12-16 , list2 35-39 list1 20-30 , list2 35-39 list1 34-42 , list2 35-39 list1 34-42 , list2 41-47 list1 80-89 , list2 41-47 list1 110-130 , list2 41-47（行数が足りなくなったらlist2の最後の行と比較する） 最終的にlist1,list2の重複のあるフラグ数をカウント、出力する と言うアルゴリズムです コーディングの流れとしては (1)双方の二次元配列をループで回す (2)始点に注目して重複がないか比較する (3)終点を比較して該当するリストの行数のカウントアップをする というふうになると思うのですが、 (3)のやり方と、最後の片方のリストの行数が足りなくなったときの 比較とカウントアップのやり方がよく実装できません これをperlでコーディングしたいのですが どのようにしたらよいのでしょうか？ ご助言いただけますと幸いです
現在、Webサーバが古くなったため、新しいWebサーバにアプリケーションを移行しようとしています。PerlもPostgreSQLもインストールし、プログラムを実行するのですが、以下のエラーメッセージが表示されます。 エラーメッセージ表示： Can't locate Pg.pm in @INC (@INC contains: /usr/lib/perl5/5.8.5/i386-linux-thread-multi (中略)BEGIN failed--compilation aborted at mgdbrest.pl line 37. でエラーになってしまいます。 環境： パッケージのインストール確認をすると問題なく、Pg.pmパッケージもインストール済みです。またPg.pmファイルも存在します。 またperl -Vコマンド実行でも@INCも表示されます。 OS: MiracleLinux4.0 %rpm -qaの結果 perl-DBD-Pg-1.31-6.1AX postgresql-libs-8.0.8-1.2AX postgresql-pl-8.0.8-1.2AX %Pg.pmファイルの登録状況 /usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/DBD/Pg.pm %perl -Vの結果(一部抜粋） Characteristics of this binary (from libperl): Compile-time options: DEBUGGING MULTIPLICITY USE_ITHREADS USE_LARGE_FILES PERL_IMPLICIT_CONTEXT Built under linux Compiled at Aug 23 2006 01:53:27 @INC: /usr/lib/perl5/5.8.5/i386-linux-thread-multi /usr/lib/perl5/5.8.5 /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi 質問： 対処方法を御存知の方がみえたら教えてください。やはり再インストールしなければならないのでしょうか。
お世話になります。 Perlを使って以下のようなXMLドキュメントを読み込み、テキストファイルの出力を行いたいと思って、正規表現等を使ってプログラムを作ってはいましたが、なかなかうまく行かず、行き詰まってしまいました。 ～～読み出すファイルのタグ～～ <info　num = 1> <name>namae1</name> <nunber>10</number> </info> <info num =2> <name>namae2</name> <nunber>25</number> </info> ・ ・ ～～終了～～ 上記で読み出したい要素は、それぞれの<info>タグ内の<name>と、<nunber>のタグ内の要素です。 そして、その要素をテキストファイルに出力する。というようなプログラムを考えております。 事情により、出来れば、Perlのモジュールを使わずに正規表現などにて取り出したいと思っていますが、楽な方法が有ればその方法もおしえていただければと思います。 使用目的は、ローカル上でXMLドキュメント内のデータを抽出することです。 何か良い方法が有れば、ご教授いただけると助かります。 よろしくお願いします。
関数「exists」と「defined」の違いが分かりません。 「exists」はハッシュにしか使えないため「defined」 より特殊な関数なのでしょうが。 $a{$i} = 0 unless defined $a{$i}; $a{$i} = 0 unless exists $a{$i}; ↑の二つの文は等価ですよね？
メモ帳perlのパスはブロバイダやレンタルサーバーのHPにperlのパスは書いてありますというのですがどのように調べるのですか。それとも自分のHPのperlのパスを調べるのですか。
配列を引数とするサブルーチンに関する質問です。 Trimと Hex2Decのサブルーチンをインターネットを参考に作りました。 下記のスクリプトは > perl test.pl で期待通りに動きます。 質問は、サブルーチンの中における、 for (@out) { $_=hex; } です。 trimの方では、$_がなくても、きちんと動きます。（あってもOK、$_=~s/^\s+//; $_=~s/\s+$//;） Hex2Decの方は、$_=hex;　でないと動きません。 これは、for (@out) { }でひとつずつ処理する対象が、$_に入っている。 処理結果の格納先が、s/^\s+//;　の場合は、記述無き時は、 $_と暗黙できまっているのに対し、 hex;の場合は、そうではない。明示的に与えてやらなければいけない。 こういう理解で、良いでしょうか？ 他に、やりようはあるのでしょうか？ 宜しくお願いいたします。 test.pl ----------------------------------------- $a=10,print "Hex=".$a." --> Dec=".&Hex2Dec($a)."\n"; $a=20,print "Hex=".$a." --> Dec=".&Hex2Dec($a)."\n"; @a=('a','b','c','d'); @b=&Hex2Dec(@a); print "Hex=@a --> Dec=@b\n"; $a=' a ',print "org=$a --> trimed =".&trim($a)."xxxxx\n"; $a=' b ',print "org=$a --> trimed =".&trim($a)."xxxxx\n"; @a=(' a ',' a ',' a ',' a '); @b=&trim(@a); print "org=@a --> trimed= @b\n"; sub trim { my @out = @_; for (@out) { s/^\s+//; s/\s+$//; } return wantarray ? @out : $out[0]; } sub Hex2Dec { my @out = @_; for (@out) { $_=hex; } return wantarray ? @out : $out[0]; } ------------------------------------------------
お世話になります。 cgiで複数項目を入力させるページを作成しています。 作成されたページは普通最初の（先頭の）入力ボックスに カーソルが位置づけされますよね。 これを何個目かの入力ボックスへ位置づけしたいのです。 いわゆるtabindexみたいな指定がしたいのです。 例えば、 　入力項目１ 　入力項目２ 　入力項目３ 　入力項目４ 　入力項目５ 　と在るようなページで、 　ページがロードされたときに始めから入力項目３に 　カーソルを位置付けしたいのです。 　表示上入力項目の順は上記のように１～５の順としたいのです。 わかりにくいかも知れませんが宜しくお願いします。
以下の2つのサブルーチン「printString1」「printString2」 のうち、「printString2」はエラーになります。 このような使い方はできないのでしょうか？ my $string = "string"; printString1(\$string); printString2(\$string); sub printString1{ my $refString = $_[0]; print $$refString; } sub printString2{ $_[0]; print $$_[0]; }
お世話になります。 ezweb.ne.jpにsendmailでメールを送り、 メールアドレスが存在しない場合、 バウンドの戻りメールが返ってきません。 outlook exp からの送信では、戻ってきます。 ヘッダー情報で対応を変えているのでしょうか？ なにか、知っていることがあれば、 教えてください。 ヒントになるようなことでも結構です。 よろしくお願いします。
All-In-One-eclipse とXAMPPでperlを動かそうとしています。 PadWalkerもインストールしようとしていますが、 PadWalkerのインストールの仕方がわかりません。 ちなみにEPICのプラグインはインストール済みで perlプロジェクトも作成できます。 どのようにインストールしたらいいのでしょうか？ ちなみにWindowsです。 よろしくお願いします。
お世話になります。 「return_parh」を書き変えたくて、 $sendmail -f dummy\@mailaddress.com -t と記述したところ、Perlで、メールが送れなくなりました。 どのように指定すれば、よいのでしょうか？
言語は問いません。 先月をYYYYMM形式の文字列で得るクールな方法ってありますか？ Perlで以下のように書けば正しく動きますが、なんかダサイ気がします。 my ($sec, $min, $hour, $mday, $mon, $year) = localtime ; $year -= 1 if $mon == 0; $mon = '12' if $mon == 0; $yearmonth = sprintf("%4d%02d", $year+1900, $mon); よろしくお願いします。
最短一致の使い方がよくわりません。 $str = "<div><div><p>ABC</p></div><div><p>DEF</p></div></div>"; $str =~ /<div.*?ABC.*?<\/div>/; print $&; 「<div><p>ABC</p></div>」となると考えていたのですが、 「<div><div><p>ABC</p></div>」と表示されます。 正規表現をどのようにしたら期待通りの結果を得られますでしょうか？ 前半の最短一致がダメで後半の最短一致がＯＫという理由もできたら教えて下さい。
　CGI.pmのソースコードにある \* の意味が分かりません。 どうかよろしくお願いいたします。
　CGI.pmを別の複数(少なくとも2つ)の自作モジュールで それぞれのuseします。 別の複数の自作モジュールは 別のcgiファイルから一回のcgiのプロセスで 両方(あるいは全部)useします。 この場合、標準入力STDINのCGI.pm経由での 間接的な複数回読み込みは大丈夫でしょうか？ 通常はSTDINは一回のcgiのプロセスで一回しか読めないはずですよね？ 各モジュールから重複useしても (もちろん複数の各モジュールで重複useしているのであり一つのモジュール内ではuse CGI;は一回のみです) CGI.pmのほうでうまく処理して複数回読んでくれるのでしょうか？
下記のように表示できますか？ 教えてください。 5’ AACGCATTTTTT^ 3’ 　　　←$a 3’ TTGCGTAAAAAAAA^ 5’　 ←$b ちなみに$a、$bは準備してあり、これをどのように表示させるプログラムを作ればいいのか参考になるページなどありましたら、もしくはこれでもできるかもという妙案があったら教えてください
タイトルの通りです if文などで長々と書くのが面倒なのですが何かいい方法はないのでしょうか？ 以前はif($xxx =~ /^1$|^5$|^11$/)などと書いていたのですが、正規表現を使うと処理が遅いんですね なるべく処理が軽くて簡潔な書き方がありましたら紹介してください
use utf8; binmode STDOUT, ':utf8'; binmode STDIN, ':utf8'; use strict; use Encode; sub main(){ #UTF-8(BOMなし),CRLFのファイルに書いてます。 my $str = "あ"; my $bin = $str; $bin = Encode::encode('euc-jp', Encode::decode('utf8', $str)); $bin = Encode::encode('utf8', Encode::decode('euc-jp', $bin)); print "Content-Type:text/plain;charset=UTF-8\n"; print "\n"; print $bin; } &main; ======================= 希望する出力結果: あ ============================ 結果:Internal Server Error Apacheのエラーログ: [Wed Jan 09 15:07:34 2008] [error] [client 127.0.0.1] Premature end of script headers: 20080109-1.pl [Wed Jan 09 15:07:34 2008] [error] [client 127.0.0.1] at C:/Environment/Perl/v5.8.8/lib/Encode.pm line 166.\r ========================= 質問: どのように修正すればよいか？
お尋ねしますが、ＰａｒｌやＣＧＩ、ＰＨＰなどを用いたＷｅｂ用のプログラミングと、Ｊａｖａや、Ｃを使ってアプリケーションなどを作る本格的なプログミラングとは、用いる言語の違い以外で何か異なることはあるのでしょうか。 たとえば難易度は、はるかにＪａｖａやＣのほうが難しく、Ｗｅｂプログラミングはそれに比べればずっと簡易的であるとかなどです。 それと、Ｗｅｂ関連の業界についてですが、「Ｗｅｂデザイナー」と「Ｗｅｂプログラミング」の職種とは全然、畑違いの分野なのですよね。 前者は画面の意匠を担当するのでしょうし、後者はパソコン・ユーザーからの何かのイベントに対して、何らかの反応をするシステムをプログラムで組み立てることと考えてよろしいのでしょうか。
perlでftpをしたいので調べたら以下のようなページを見つけました。 http://perldoc.jp/docs/modules/libnet-1.12/Net/F … 接続 $ftp = Net::FTP->new("some.host.name", Debug => 0); ログイン $ftp->login("anonymous",'-anonymous@'); のようにしていけばいいのはわかったのですがpwdなどのコマンドの場合 「返します」と書いてあるんですが、どうすれば取得できるのかわかりません。 たとえばpwdであれば $ftp->pwd(); だと思うのですが、その結果はどうとるのでしょうか・・・ $ftpのなかかと思ったのですが、 print $ftp とすると Net::FTP=GLOB(0x8067224) と出てきました・・・ あとコネクトも成功、失敗はどうしたらわかるのでしょうか。
皆様のお知恵を拝借したく投稿しました。 よろしくお願いします。 perlでのデータ処理で２つの入力ファイルがあります list1 ---------------- start end 1 10 12 16 20 30 34 42 ---------------- list2 *1 -10の間に領域が重複している部分がある ----------------- start end 1 5 3 10 14 18 20 28 30 35 37 42 ----------------- この2つのファイルを比較して (1)list1から見たlist2と重複している領域の個数 (2)list2から見たlist1と重複している領域の個数 (3)重複している領域の長さ を算出し、出力できるようにperlでコーディングしたいのですが どのようにしたらよいのでしょうか？ ご助言いただけますと幸いです
($title,$mail,$home,$color,$link) = split(/<>/, $file); $colorには、半角カンマで区切って「#eeeeee,#ffffff,#00ffff」等と登録されています。 以下の例と同じような感じで表示させたいのですが、ログから読み出す方法がわかりません。よろしくお願いいたします。 @color = ('#eeeeee','#ffffff','#00ffff'); foreach (@color) { print "<font color=\"$_\">■</font>\n"; }
はじめまして。Perl初心者です。 このたび、WWW::Mixi::Scraperを使ってみようと思い、 http://search.cpan.org/~ishigaki/WWW-Mixi-Scrape … の、 SYNOPSISに書いてあるソースを実行してみたのですが、 Use of uninitialized value in concatenation (.) or string at [パス]/WWW/Mixi/Scraper/Mech.pm line 18. logged in to mixi at [パス]/WWW/Mixi/Scraper/Mech.pm line 44. Undefined subroutine &WWW::Mixi::Scraper::Mech::_uri called at [パス]/WWW/Mixi/Scraper/Mech.pm line 72. と、エラーが出てしまいました。 ちなみに、foo@～のところとpasswordには自分のmixiにログインするパスを入れています。 他に追記が必要なのかとも思いましたがまったくわかりません…。 どなたかご教授いただければ幸いです。
$data1 = "<abcd>東京都港区赤坂六本木1丁目1-1</abcd>"; 上記の様に、$data1に入っているデータから 【東京都港区赤坂六本木1丁目1-1】　の部分のみを抜き取り $data2へ入れたい場合 どのようなソースになりますか？ 下記のように記述してみましたが　誤りのようで うまく記述（print）されませんでした。 if ($data1 =~ /<abcd>(\D+)<\/abcd>/){ $data2 = $1; } print "$data2" ; 尚、【】内の文字列は随時変化します。 初心者ですので、ご教授をお願いします。
localtime(time); の戻り値から、「今」の年月日は取得できますが、 取得した年月日の次の日の年月日、前の日の年月日 を得る（標準的な）サブルーチンはないでしょうか？
以下の<tr bgcolor=\"#ffffff\">の部分を<tr bgcolor=\"#eeeeee\">と交互に表示させたいのですが、方法がわかりません。よろしくお願いいたします。 open(IN,"$file") || &error("file"); while (<IN>) { ($now,$host) = split(/<>/); print "<tr bgcolor=\"#ffffff\">\n"; print "<td>$now</td>\n"; print "<td>$host</td>\n"; } close(IN);
---- Frame 273 (126 bytes on wire, 126 bytes captured) Arrival Time: Dec 12, 2007 14:24:53.169702000 Last SR timestamp: 1840388505 (0x6db21999) Delay since last SR timestamp: 174981 (2669 milliseconds) ---- といった形式のデータの塊が１つのファイルに複数存在しているのですが、 このデータの中のArrival Time:,Last SR timestamp:,Delay since last SR timestamp:の値をそれぞれ抽出して、上記の例だとDec 12, 2007 14:24:53.169702000,1840388505 (0x6db21999),174981 (2669 milliseconds)といったようなcsv形式で１ファイル分のデータを出力させたいのですが、perl初心者なもので、手におえないでいます。 申し訳ありませんが、どなたか教えていただけないでしょうか。 よろしくお願いいたします。
basic認証について、わからないことが５個あります。 (1)一度ログインした後の有効期間。　(時？分？秒？) (2)ログインに失敗した場合、401　authentication realmなど表示せずに別のページへ飛ばす方法 (3)強度。（httpsでないと、平文が流れる？？？） (4)BASIC認証 .htpasswd以外の方法。 (5)このようなbasic認証など認証に特化した書籍。 ところで、皆さんはこのBASIC認証は良く使われているのでしょうか どういうところで使っているのか知りたいです。
$randnumber = int (rand (999)); 上記では1桁から3桁までのランダム数値が得られるのですが、常に3桁のランダム数値を得られるようにすることは出来ますでしょうか。
既に、ＩＳＰの方にフォームメールページを有料で作成して頂いています。 入力項目チェック及び確認機能つきの高度な内容であり、ホスト側のＣＧＩフォルダには、次の主要なファイルが、あります。 (1)Ｆｏｒｍｍａｉｌ．ｐｌ Matt Wrigh氏のスクリプトです。（http://www.scriptarchive.com/formmail.htmlご参照） 書き換えされているのは、冒頭の 1.# Send E-Mail &send_mail; 2.# Return HTML Page or Redirect User &return_html; の部分のみです。 (2)sendmail.asp(以下のような内容で、一切書き換えられた部分は、ありません。） <% dim mailFrom'送信元アドレス dim mailTo'送信先アドレス dim mailCc'送信先Cc dim mailBcc'送信先Bcc dim mailSubject'メール件名 dim mailBody'メール本文 （略） (3)cgi-lib_pl.txt（書き換えられた箇所はないと思われます。どのような機能を有するのかさえわかりません。） # Perl Routines to Manipulate CGI input # cgi-lib@pobox.com # $Id: cgi-lib.pl,v 2.17 1998/05/14 22:39:23 brenner Exp $ (4)ｘｘｘ.asp(xxxが、既にフォームメール設置のウェブページです。） <!--#include file="sendmail.asp"--> <!--#include file="function.asp"--> <% '#################################################### '# システム用変数 '#################################################### dim PostState (略） 今回、自分で別のフォームメールページ（別のメールアドレスで）を作成しようとしましたが、うまくいきません。 ＩＳＰの方に聞こうかとも思いましたが、当然ですが、あまり教えてはくれないと考え、ここに投稿しました。 上記のように既にフォームメールページ設置に必要なファイルは、あるので、簡単にできるように思えるのですが？。 どのようにすれば、いいのか御教授下さい。なお、当方、perl,ASPの知識は、ありません。
Linuxを使って間もない者です.xamppをLinuxにインストールしたのですが、モジュールの格納場所が違っているせいかうまくCGIスクリプトがうまく実行できません. Linux上でのperlモジュールの格納場所を教えていただけないでしょうか？ 以下エラー内容 Can't locate JSON/PP.pm in @INC (@INC contains: /usr/lib/perl5/5.8.6/i386-linux-thread-multi /usr/lib/perl5/5.8.6 /usr/lib/perl5/site_perl/5.8.6/i386-linux-thread-multi 省略・・ /usr/lib/perl5/vendor_perl/5.8.6 //usr/local/lib/site_perl/5.8.2/i386-linux-thread-multi /usr/local/lib/site_perl/5.8.2 /usr/local/lib/site_perl .) at (eval 4) line 3.
テキストファイル内の文字列を「Perl」で検索したいのですが…。 例　aa.txtの中の"AA"を含む1行をデスクトップのbb.txtに追加書き込みをする。AAの部分は外部からのタイプで変化させる。 このようなPerlのプログラム、初心者ですがよろしくお願いします。
お世話になります。 現在HTMLでホームページを作成しており会員のユーザーとそうでないユーザーによって一部の画面表示を変更したいと思っています。 その異なる画像表示をさせてい部分がCGIのため読み込むものは下記の2つになります。 【会員の場合(loginに値がある場合)】 <!---ＨＴＭＬ---> &_Html_login; print <<"<!---ＨＴＭＬ--->"; 【会員でない場合(loginに値がない場合)】 <!---ＨＴＭＬ---> &_Html_right; print <<"<!---ＨＴＭＬ--->"; これをそのままHTMLのソースとして書き込みたかったたため下記のようにHTMLに記述しました。 ・・・(HTMLソース) </TABLE> <SCRIPT> var login = $login; if (login="") { print "<!---ＨＴＭＬ---> &_Html_login; print <<"<!---ＨＴＭＬ--->"; "; } else { print "<!---ＨＴＭＬ---> &_Html_right; print <<"<!---ＨＴＭＬ--->";"; }</SCRIPT> ・・・ しかしながら動作しないことにくわえてソースを見るとそのままJAVAの数式が表示されていました。 見当はずれのことをしているかもしれませんが、CGIの読み込み先ソースをHTML内で分岐させて表示させる方法があれば教えていただければうれしい限りです。 よろしくお願いいたします。
UTF-8のコードの文字列の中に日本語(ひらがな、カタカナ、漢字)が含まれていたらtrueを返す関数はどのように書いたらよいのでしょうか？英語のみなら falseを返す関数でも構いません。どうかよろしくお願いいたします。
Perl言語で作成するCGIプログラムについての質問なのですが、grep関数をつかって文字のマッチングを試みて、１回目はうまくいったのですが、同じように２回目を同じプログラムで使ったところ、絶対に０件マッチになります。検索対象も、検索文字列も、スカラー変数でだしてみて目で確認して明らかに合致しているのに０件になります。 ちなみに、使用した関数は以下のような感じです。 @hit = grep(/$data1/,@data2); $hit = grep(/$data1/,@data2); $hitでだしてみても0になりますし、@hitも何も入っていません。 grep関数は２回使えないのでしょうか。 検索文字はメールアドレスなのですが、前のプログラムで同じように関数を使って成功していますので、検索文字が原因ではないと思いますが。 ご回答お願い致します。
Perlで作られた掲示板の日時の表示が「2007/12/30(Sun) 20:55」となります。 これを12/30 20:55と短縮して表示させたいのですが、どのようにすればいいのでしょうか？ substrと=~ s///g;を使って人に見られると恥ずかしいグチャグチャな書き方で強制的に目的の表示方法には出来るのですが、スマートな書き方ができません。よろしくお願いいたします。
http://www.abe-tatsuya.com/web_prog/perl_cgi/mai … 届いたメールアドレスに対して、hoge.plスクリプトを実行したいと 思います。 サーバー管理会社より、aliasesは編集できないということでしたが、 procmailは編集できるそうです。 しかし、上記サイトを見てもイマイチprocmailの使い方が わかりません。 届いたメールに対し、hoge.plを実行させるコードの書き方、 編集方法を教えてください。 もしくは、“一定文字数以上を受信拒否する設定方法”、 “オリジナルの自動返信メール送信”設定方法がprocmailで できましたら教えてください。 知識はなくはないのですが、本業プログラマではないため わかりやすくご説明頂けると助かります。
$formdata = { 'username' => user, 'password' => pass, }; $ua = new LWP::UserAgent; $response = $ua->request( HTTP::Request::Common::POST( 'http://hoge.jp', $formdata, ) ); 上記のようなスクリプトで自動的にサイトへアクセスしてクッキーを取得しています。 ＜http://hoge.jp＞に対してPOSTで$formdataを送信しています。 クッキーの取得は出来るのですが… 実際プラウザでアクセスすると、user・passを入れた後にログイン後の画面になるのですが、その時にこちらに渡される値がurlに記載されるのです。 http://hoge.jp?a=aaaa&b=bbbb と言う感じです。 このログイン後のurlを取得し変数に入れたいのですが、どうしたら良いのかが分りません。 ご教授お願い致します。
いつもお世話になっております。 ハックスに記載されているスクリプトを実行したいのですが、エラーとなります。 自分でも調べていますが、perl経験が浅く、原因が特定できません。 修正箇所がわからないので、修正できる方教えて下さい(;へ;) 環境は、XP2で、Activeperl 5.8.8を使用しております。 コマンドラインからused_report.pl 4915512371（←ASIN名：例：ハリーポッター）を実行すると・・・ --------コマンドラインエラー箇所-------- Global symbol "$lastPrice" requires explicit package name at C:\hoehoe\used_report.pl line 32. Global symbol "$avgPrice" requires explicit package name at C:\hoehoe\used_report.pl line 41. Can't find string terminator "EOF" anywhere before EOF at C:\hoehoe\used_report.pl line 44. --------------------------------------- ちなみにブラウザ上ではページも存在し表示されております。 http://www.amazon.co.jp/exec/obidos/tg/stores/of … 以下スクリプト //////////////////////////////////////////////////////////////// #!/usr/bin/perl # used_report.pl # A script to scrape Amazon, retrieve used listings, and write to a file # Usage: perl used_report.pl <asin> #コマンドラインからASINを取得 my $asin =shift @ARGV or die "Usage:perl used_report.pl <asin>\n"; use strict; use LWP::Simple; #URLを作成 my $url = 'http://www.amazon.co.jp/exec/obidos/tg/stores/of … . $asin . '/used/'; #URLをリクエスト my $content = get($url); die "Could not retrieve $url" unless $content; #変数を設定 my $i = 0; my $totalprices = 0; my $thisPrice = 0; my $highPrice = 0; my $lowPrice = 0; #リスティングをループ while ($content =~ m!<b class=price>\$(.*?)</b>!mgis) { $i++; $thisPrice = $1; if ($thisPrice >= $lastPrice) { $highPrice = $thisPrice; } if ($i == 1 || $thisPrice <= $lowPrice) { $lowPrice = $thisPrice; } $totalprices += $thisPrice; } $avgPrice = $totalprices / $i; #結果を表示 print <<"EOF"; Average Used Price: \$$avgPrice Highest Price: \$$highPrice Lowest Price: \$$lowPrice ////////////////////////////////////////////////////////////////
if($name =~ /^a$/) {require './pl/a.pl';} elsif($name =~ /^b$/) {require './pl/b.pl';} ↑のような要領で大量にrequireを書いた場合は動作が重くなりました。 以下のようにした場合は、$nameの部分が読み込まれないみたいなのですが、どのようにすればいいのでしょうか？ require './pl/$name.pl';
