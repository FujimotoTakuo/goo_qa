この辺で一時期勉強しました http://www.geocities.jp/mickindex/database/idx_d …
サーバにクライアントもインストールが分かりませんが、とりあえず EZCONNECT を試してください
Oracle Database 12c。 SQRって知らん。 12Cってでたの？ 11gしか知らんかった。
SQL？ https://www.dondari.com/%E8%A4%87%E6%95%B0%E3%83 … http://raining.bear-life.com/mysql-2/insert%E3%8 …
なんのDBに対して、どういうクライアントでつないでますか？ ＞他の人に頼んでセッションを切ってもらってます。 とありますが、その人の使っているツールではだめなのですか？
>>頻繁に行われるため、Oracle、PL/SQL、ストアドプロシージャで実現したく 一番簡単なのは、エクセルシートで組織表（組織名、コード、備考、など）を管理し、エクセルvbaの中でSQLを発行し、自動でアップデートしてしまう。 どこでもやっている常套手段です。
http://www.shift-the-oracle.com/sql/case-when-ex … 複合CASE式は使ってみました?
こんにちわ。 > こちらはパスワードもユーザ名も変更しておりません。 心当たりですが、Oracle 11.2 以降はDEFAULT Profile のパスワード有効期間 (PASSWORD_LIFE_TIME) が180日に設定されているので、パスワードの有効期間が 切れた可能性があります。 DBA の方にユーザの状態を確認して頂いた方が良いと思います。 DB が落ちた原因ですが、監査ログが溜まり過ぎてSYSTEM 表領域がパンク したような事はありませんか？ Oracle 11.2 以降は、audit_trail='db' がデフォルトになっていて Create Session (Connect) のデフォルト監査が有効になっているので注意が 必要です。 SYS で接続して、?/rdbms/admin/undoaud.sql, ?/rdbms/admin/undopwd.sql を実行すると、この辺の設定を無効化する事ができます。
select * from t where id in (select id from t group by id having min(status) = max(status) and max(status) in (88, 99));
>[root@centos7 Disk1]# rpm -i oracle-xe-11.2.0-1.0.x86_64.rpm >[root@centos7 scs]# rpm -qip oracle-xe-11.2.0-1.0.x86_64.rpm カレントディレクトリが違いますがな…。 rpmコマンドの-qiでパッケージの情報を表示します。 このとき指定するのはパッケージ名。 さらに-pオプションを追加した場合はパッケージ名ではなくrpmファイル名を指定します。 ファイル名の指定なんでカレントにない場合はフルパスなりで指定してください。 rpm -qa | grep ^oracle で、oracleで始まるインストール済みのパッケージが一覧で出力されるはずです。 そちらからパッケージ名を調べる。というのもありでしょう。 http://labs.berrystyle.jp/archive/2007/08/07/4.h … http://ossfan.net/tips/004_rpminfo.shtml http://linux.kororo.jp/cont/intro/rpm.php http://dev.classmethod.jp/server-side/rpm-revers … などなど、rpmコマンドの解説をしているページはいくつもあるので いろいろ見たり、実際に(破壊したりしない程度に)触ってみてください。 　-qa　　　インストール済みパッケージの一覧を出力。grepで絞り込んだりする。 　-ivh　　　インストール。進捗表示あり。rpmファイル指定。 　-Uvh　　　アップデート。進捗表示あり。rpmファイル指定。 　-e　　　　イレース。パッケージ名指定。 　-qi　　　　パッケージの情報表示。パッケージ名指定。-qaとかではバージョンとか出ないからこっちで調べる。 　-qf　　　　ファイルやディレクトリが含まれるパッケージの調査。ファイルやディレクトリを指定。 　-qs　　　パッケージに含まれるファイルやディレクトリの一覧を出力。パッケージ名指定。 辺りが使えればそれほど困らないとは思いますが。 -p追加で… 　-qip　　rpmファイルを指定した-qi。インストールする前に調べたい場合とか。 　-qsp　　rpmファイルを指定した-qs。インストールする前にどんなファイルやディレクトリがあるか調べたい場合とか。 辺りも使うことがあるやも知れません。
インストールしました の下にある詳細には 何が書いてあるのでしょう？ そこにエラーコードなどが書いてあればそれを検索することで解決法を探せるかもしれません。
OLEDBはwin10未対応だと報告が在ります！ ネットで対応して居るか確認してみては如何ですか？
企業に勤務する統計家です。 期待度数が低すぎて、 χ2適合度の検定が出来ないのであれば、 フィッシャーの正確検定（正確確率検定）ですが、 15群もあると、私の経験では、 メモリーオーバーフローでPCが止まる気がします。 また、ご存じと思いますが、検定を繰り返す時は、 多重比較になりますので、有意水準を変えて下さいね。 残差の件は、ここに書いてあることからは分かりません。
こんなかんじかと DECLARE 　c UTL_SMTP.CONNECTION; 　n NUMBER; BEGIN 　SELECT count(*) INTO n FROM a WHERE a.b like '%△△△△△%' or a.c like '%△△△△△%'; 　IF n > 0 THEN 　　c := UTL_SMTP.OPEN_CONNECTION('smtp.example.com', 25); 　　UTL_SMTP.HELO(c, 'smtp.example.com'); 　　UTL_SMTP.MAIL(c, 'foo@example.com'); 　　... 　　UTL_SMTP.QUIT(c); 　END IF; END; / 参考 http://otndnld.oracle.co.jp/document/products/or … http://otndnld.oracle.co.jp/document/products/or … http://otndnld.oracle.co.jp/document/products/or …
DATE でグループ化すれば、DATEで集計されます。 GROUP BY の中にDATEが不要なのでは? GROUP BY substr(DATE,5,2),SH_CD あるいは、MONTH,SH_CD,SURYO でサブクエリを作って、それに対して、 MOUTH,SH_CDでグループ化するとか。
iPhoneのデータをパソコンに保存出来るようにしたい場合、以下の方法を試してみてください。 http://goo.gl/SGxFIq どうか参考になりますように。
なんか、DT,SE等を個別に取り出そうとしているように見えますが テーブルを JOINして SY, SE, ZU(ロジック２相当), DT(ロジック３相当), SE_2(ロジック4相当), DT_2(ロジック5相当) とすれば、1行で必要な情報が全て揃います。 ロジック6: DTとDT_2の比較 ロジック7: DT_2でソート ロジック8: 先頭の指定行数を選択。下記等を参考に https://oshiete.goo.ne.jp/qa/2624660.html ロジック9: SE_2 ※　同じDTに対応するSEが二つ以上あって、その全てを選択したい、というのなら、 もう一回JOINしてDT_2に対応させたSE_3の作る必要があるでしょう。
現時点、および2-3年先の予想で、社内で11gか12cかどちらの方が多く使われているか、多く使われていそうか。がポイントでは？
select テーブル2.値 from テーブル2 where exists (select * form テーブル1 where テーブル1.No = テーブル2.No and {通常の条件} ) or exists (select * form テーブル1 where テーブル1.No = テーブル2.No and {もう一つの条件} ) or exists (select * form テーブル1 where テーブル1.No = テーブル2.No and {おまけの条件} )
たぶん select C.顧客ID, C.顧客名 , (select 電番 from (select row_number() over (order by T.電番ID) no, T.電番 from 電番 T where T.顧客ID = C.顧客ID) where no = 1) 電番1 , (select 電番 from (select row_number() over (order by T.電番ID) no, T.電番 from 電番 T where T.顧客ID = C.顧客ID) where no = 2) 電番2 , (select メア from (select row_number() over (order by M.メアID) no, M.メア from メア M where M.顧客ID = C.顧客ID) where no = 1) メア1 , (select メア from (select row_number() over (order by M.メアID) no, M.メア from メア M where M.顧客ID = C.顧客ID) where no = 2) メア2 from 顧客 C
無料体験版（シェアウェア）で作成したファイルがプロジェクトファイル(編集用）の場合は 有料版を購入しないと使用する事ができません。 http://www.nchsoftware.com/videopad/jp/kb/1396.h … 動画ファイルとしてエクスポートしていたのであれば、再生する事は可能です。 今回の場合は、プロジェクトファイルのまま保存していたのではないでしょうか？ http://original-profile.com/?page_id=255 ＞ちなみに無料版をもう一度アンインストールしたら前回までのデータは 　きれいさっぱりなくなってしまうのでしょうか？ その可能性は大ですね。 仮に無料体験版をアンインストールし、再度、無料体験版をインストールしようとしても できませんから。 仮にインストールできても使用する事はできませんし。 「VideoPad」には無料体験版以外にフリー版がありますので、こちらを使用してみられてはいかがでしょう。 http://www.altech-ads.com/library/search.php?key … もしかすると、無料体験版を使用した後なので使えないかも・・ フリー版には機能制限がありますが、もしかすると前回作成したデータが使用できるかもしれません。 取りあえず、前回作成したデータをPC内より探し、コピー保存しておきましょう。 ファイル検索には超高速なファイル検索ソフトがお勧めです。 「Hddb」 http://www.gigafree.net/utility/desksearch/Hddb. … 「Everything」 http://www.gigafree.net/utility/desksearch/every … などがあります。 画面上部のテキスト入力フォーム上に、.vpj と入力して検索。 検索で表示された.vpj ファイルをダブルクリックするとファイルが何処にあるのかが判ります。
めんどくさい検索条件が必要ならば SQL を使わないほうが良いです。 複雑怪奇な SQL は極端な性能劣化とかデッドロック発生とか保守性とか... というわけで テーブルを正規化して条件を簡単にしましょう または PL/SQL を書きましょう
ブレイク処理とは、指定されたキーで集計をするアルゴリズムのことです。 SQLでいう「GROUP BY」に相当します。 GROUP BYについてはここに載せておきますね。 http://www.atmarkit.co.jp/ait/articles/0012/22/n …
例えば。 TYPE Inputfile > SORT > Outputfile
> 検索は下の方が速くなったりしますか？ 統計情報が正しく取られているなら速くはならないでしょう（同じということ）。 売上トランの件数にもよりますが(※)、どちらも商品マスタを削除フラグ = '0' で絞ってから結合という実行計画になると思われます。 ただし、上の記述の方がシンプルなのでおすすめします。複雑な記述はオプティ マイザを惑わせたり、オラクルの不具合を引く確率を高めたりするので。 ※絞り込んだ後も商品マスタの件数が５万件と大きめなので、例え売上トラン. 　商品コード列に索引があったとしても、ハッシュ結合が選択される可能性があ 　ります。 > また、削除フラグのように1か0の2値しかとらない項目については、 > INDEXを張る効果はあるでしょうか？ 例え２値しかなくても、1/20に絞り込まれるわけですから大いにあります。バイ ンド変数を使用していないならなおさらです。最近のオラクルは賢いのでテーブ ルのどの列が検索条件 (WHERE 句等) で使用されるかモニタリングし、検索に使 用される列だけヒストグラム統計を取ってくれるようになっていますが、自動的 に取ってくれない場合は手動で取る必要があります。
No.1の方も回答されている通り、「その1回のコストを問題」にしています。 とは言え、最近はB-TreeはRebuildしない方がよいとも言われています。 第一に、Range Scanの場合、一般的に、索引で検索するときのコストよりも、索引で検索した後テーブルをScanしなければなりませんが、そのコストの方がはるかに大きいです。Unique Scanの場合は、ループで繰り返し実行しない限り、「1回のコスト」の影響はほとんどありません。例えループで繰り返し実行する場合でも、3が4なら1.33倍遅くなるくらいです。結局、索引断片化の影響が大きく出るのは、Index Fast Full Scan くらいです。 第二に、一般的に索引は無限に断片化し続けるのではなく、ある程度断片化すると平衡状態になります。Rebuild してもどうせまた断片化して変更状態になるわけだし、Rebuild にかかる CPU や I/O のコストや Redo 増大の影響の方が大きくなるかもしれません。
こんにちわ。 > 書き方を教えてください。 Statspack のSnapshot ですね。 これでどうでしょうか？ パラメータに指定する値は適当に書いてます。 begin perfstat.statspack.snap(i_snap_level=>7, i_execution_th=>10, i_disk_reads_th=>1000, i_parce_calls_th=>10, i_buffer_gets_th=>1000, i_sharable_mem_th=>10000, i_version_count_th=10); end; /
セット商品コード(X) から始めて、見つかったセット商品コード (X を含む) を 結合配列に入れていく。入れる前に結合配列をチェックし、既にセット商品コー ドが入っていたら問題あり。 ▼結合配列 http://www.shift-the-oracle.com/plsql/collection/
　単一ビュー： 　その質問の表現、言い方が逆です。だから、意味不明になってます。 　単一ビュー「とは」、一つのテーブルから作成されたビューで、group byで集約したり、関数を使ったりしていないビューのことを言います。 　つまり、単一ビューという言葉の定義をしているだけです。定義ですから、これにとやかく言っても始まらないんですね。 　まぁ、単純に言えば、単一ビューというのは、一つのテーブルから、せいぜい単純な選択をしただけのビューと言えばいいのかな。 　この用語を定義する必要性は、次に、「このビューは、更新可能ですか？」と言い始めた時に、出てきます。単一ビューに対しては、insert , updateが可能です。（ただし、insertの際には、ビューに登場する以外のカラムが実テーブルにある時には、それらにはデフォルト値が入ります。それも無ければ、ＮＵＬＬです。そのカラムにnot null制約がついていると、制約違反ではねられます。） 　スキーマ： 　Ｏｒａｃｌｅでは、ユーザー毎に一つのスキーマが割り当てられます。 　そうですね。とあるマンションを一つのデータベースに例えてみましょうか。マンション一棟全体がデータベースです。隣のマンションは、別のデータベースとしましょう。 　マンションの部屋には、各々住人が住みますね。この部屋がスキーマです。隣の部屋にヤカンがあっても、自分の部屋に同じ形のヤカンを置いても良いですよね。このヤカンを区別する必要が出た時には、Ａさん宅のヤカンとか、Ｂさん宅のヤカンとか言えますよね。 　表名も同じです。userA.onajihyouとか、userB.onajihyouといったように識別します。 　自分の部屋にあるものを使うのに、Ａさん宅のヤカンとは言いませんよね。素直にヤカンです。 　表名も同じ。例え、他のスキーマに同じ表名があろうが何だろうが、自分のスキーマ内の表に対しては、onajihyouでちゃんと通用します。 　ただし、マンションにも共有部分があります。データベースも同じ。各自のスキーマに属さない要素がいくつかあります。何がスキーマに属して、何がスキーマに属さないのかは、参考書やマニュアルを見れば書いてありますので、興味があれば探してみてください。
「これは練習問題の内容がということなのでしょうか。それともテストという時間を計った問題が最後にありますがそのテストの的中率ということなのでしょうか。」 　多数の練習問題から、本試験の分数と問題数に絞り込んだものが、「テスト」です。 「このクラムメディアのテスト問題というのは、練習問題のページからランダムに出題されているものなのでしょうか。」 　その通りです。そしてその練習問題が、非常に的中率が高いのです。
そういうのって、まずマニュアル読めばすぐ解りそうなものですけど？ http://www.shift-the-oracle.com/sql/functions/de … 「第３パラメータのデータ型を戻り値の型とするので、それ以降に記述する戻り値用のデータもその型に合わせなければならない。」(少々表現変更)
こんにちわ。 > 安全かつ、本サーバーに負担の少ない方法はどうしたらよろしいでしょうか？ exp 又はexpdp コマンドを使って外部ファイルに必要なテーブル定義/データを 出力するのが良いです。
テスト環境無いので未確認ですが。 Select t1.No from テーブル as t1 where t1.商品 = ’Ａ’ minus select t2.No from テーブル as t2 where t2.商品 Not in （’Ａ’, ’Ｂ’, ’Ｃ’） ;
こんにちわ。 マニュアルを軽く見てみましたが、明確に記載されている箇所は無さそうです。 Pro*C の場合、C言語にNULL値の概念が無いにも関わらず、NULL値の判断を C言語行えるようにするため、インディケータ変数があるのだと思っています。 PL/SQL の場合変数にNULL の概念があるので、NULL値を読んでくればNULL値 で上書きされます。
あまり深く考えていませんので、件数が多いと使いものにならないかもしれません。 with 休日テーブル as ( select 'busyo1' 部署コード, date'2014-09-13' 休日 from dual union all select 'busyo1' 部署コード, date'2014-09-14' 休日 from dual union all select 'busyo1' 部署コード, date'2014-09-20' 休日 from dual union all select 'busyo1' 部署コード, date'2014-09-21' 休日 from dual union all select 'busyo1' 部署コード, date'2014-09-23' 休日 from dual union all select 'busyo2' 部署コード, date'2014-09-07' 休日 from dual union all select 'busyo2' 部署コード, date'2014-09-14' 休日 from dual union all select 'busyo2' 部署コード, date'2014-09-21' 休日 from dual union all select 'busyo3' 部署コード, date'2014-09-20' 休日 from dual ) , 日付 as ( select trunc(/* sysdate */ date'2014-09-24' - 1) - level 日付 from dual --とりあえず過去30日分の日付 connect by level <= 30) select 部署コード, 日付 from ( select 部署コード, 日付, count(*) over(partition by 部署コード order by 日付 desc) cnt from (select distinct 部署コード from 休日テーブル) 部署マスタ cross join 日付 where not exists ( select * from 休日テーブル where 部署マスタ.部署コード = 休日テーブル.部署コード and 日付.日付 = 休日テーブル.休日 ) ) where cnt = 10; こまかい説明を書く時間がないので、そこはSQLから読みとってください。すみません・・・
まず、条件をなるべく素直に書くと↓のようなSQLになりました。 SELECT DISTINCT 車名 FROM 自動車 a WHERE EXISTS ( SELECT * FROM 自動車 b WHERE a.車名 = b.車名 AND 装備 = 'エアコン' AND 数量 = 2 ) AND EXISTS ( SELECT * FROM 自動車 c WHERE a.車名 = c.車名 AND 装備 = 'ブレーキ' AND 数量 = 1 ) ; WHERE句でサブクエリーを使って、条件にマッチする行の存在をチェックしています。 これでは、ちょっと冗長な感じがするのでGROUP BYとHAVINGを使って書き直すと下記の様になりました。 SELECT 車名 FROM 自動車 GROUP BY 車名 HAVING SUM(CASE WHEN 装備 = 'エアコン' AND 数量 = 2 THEN 1 ELSE 0 END) > 0 AND SUM(CASE WHEN 装備 = 'ブレーキ' AND 数量 = 1 THEN 1 ELSE 0 END) > 0 ; HAVING句内で集約関数とCASE式を組み合わせる事によって、1番目のSQLと同様の存在チェックを行っています。 蛇足ですが、車種も装備も同一の行が複数有ると思えませんので、連番の行は冗長かと思います。 下記の様に車名と装備の組が主キーとなっても良さそうに見えます。 車名(PK), 装備(PK), 数量 参考URL：http://codezine.jp/article/detail/652
それこそ100件程度なんだったら、コピー先にも既にテーブルが存在している前提の操作なら、 Microsoft Accessのテーブルリンクや他のツールを使って、レコード全体をコピペすれば出来そうですが。
こんにちわ。 #1 のmuyoshid です。 > ちなみに、そのソースはどこかにありますでしょうか？ この辺が参考になるでしょうか？ SQL 言語リファレンスのfor update 句の説明です。 http://docs.oracle.com/cd/E16338_01/server.112/b … > 別の人を説得しなければいけないのです。 そうであれば、ユーザ登録が必要ですがOTN Japan から試用版をDownload して 実際に動かして確認した方が良いと思います。 参考URL：http://www.oracle.com/technetwork/jp/index.html
「expdat.dmp」の中に「STUDY.TEST2」というオブジェクトの 情報がないという意味のメッセージが出ているので そのまんまの内容だと思うのですが。 そもそもData Pumpはバックアップや別のスキーマ・インスタンスに 移動する際に使用する機能であって、同一スキーマの別テーブルに 移動する為に使用するものではなかったと思います。たぶん。 study.TEST1のデータを削除して以下のコマンドを実行したらどうなりますか？ impdp system/パスワード@XE directory=test_dir dumpfile=expdat.dmp log=test_imp.log tables=study.TEST1 content=data_only
ファイルシステムもデータベース（DB）も、何かしらのデータを格納する「道具」の種類であって、要はそれを使って便利かそうで無いか？で適時取捨選択する物です。 例えばデスクトップPCは何でも出来る便利な道具ですが、わざわざ電車の中で使いますか？　背中にでっかいバッテリを背負って、大きなモニタまで抱えて。 でも、そういう事をする奴はたまにいますが、普通はやりません。物理的にはもちろん可能ですが、便利では無いし、メリットも無いからです。普通の賢い人間は、スマホやノーパソを使うもんです。 DBもファイルシステムも、そういう風に取捨選択するモノです。 ＞コンピューターを使うには、データ（電子データ）が必要です。 それ以前に”プログラム”が必要です。データだけあってもタダの箱です。 ＞データを保存するにはデータベースが必要と聞いた事があります。本当でしょうか？ 正しい言い方をするなら、データを保存する一つの形式（方法論）にDBがある、というものでしょう。 ＞キャッシュメモリーはデータベースの構成要素の一であり 構成要素では無い気がしますが。どちらかというと、高速化の為の工夫といった感じでしょう。 （もちろん現実のシステムではキャッシュのヒット率を高めたりするためにインデックスを振ったりなんだと色々行うわけですが。キャッシュはDBというよりPC本体のメモリ（DBを稼働させるシステム側）に構成されるものです） ＞キャッシュメモリーにデータがあればデータベースにデータがあるという事と聞いた気がする。 あまたの状況の一瞬では成り立つ事でしょうが、一般的な事象とは言えません。 通常のシステムでは、DBの実体（データ）はストレージまたはコンピュータの主記憶（メモリ）にあります。 キャッシュは利用頻度の高い特定のデータを、アクセスが高速なメモリに一時的に蓄積されていることを示しているため、すべてのデータが全ての時間軸でキャッシュにあるということはあり得ません。 ＞ありとあらゆるデータを保存できて、何にでも活用できるそうです。本当でしょうか？ 本当です。 ただし、「出来る」と「普通はそうする」はイコールではありません。 音楽で使う五線譜のノートは、国語でも算数で図画工作でも使おうと思えば使えますが、普通は音符を並べる事にしか使いません。 写真データをDBに入れることは出来ますし、そういう実装をしたシステムもたくさんありますが、大概の人は写真データはファイルシステムに画像ファイル（例えばjpegファイル）といった形式にして保存するでしょう。 ＞ 例えば、リレーショナルデータベースの操作にSQLが使われますが、このプログラム文をリレーショナルデータベースに保存しますでしょうか？ やろうと思えば出来ますし、DBのデータとしてで無ければストアドプロシージャという仕組みが結構使われています。DBのシステム側によく使うSQL文を前もって登録しておくやり方です。 http://ja.wikipedia.org/wiki/%E3%82%B9%E3%83%88% … ＞私の認識だと、SQLはテキスト形式のSQLファイルで、マイドキュメントなどのフォルダーに保存します。 よっぽどのことが無い限り、SQLをマイドキュに保存するようなことはしません。 SQLはプログラム内部（敢えて言うならProgram Files以下）もしくは前述のストアドに保存します。 人間が読める＝テキスト形式ではありませんし、SQLファイルなる物も（実装によって色々あるでしょうが）通常メインのプログラムファイルと同じフォルダに入れるべき物です。 マイドキュメントは、ユーザのファイルを保存する場所であって、プログラムの構成要素を保存するところではありません。（やろうと思えば出来ますが、私の関わるプロジェクトでそんな実装したら設計ミスとしてやり直させます） ＞SQLの他、小説、写真、音声、ビデオ、３次元CADなども、リレーショナルデータベースに保存しますでしょうか？ 出来ますが、普通はやりません。メリットが無いからです。 ただし、一部のクラウド上のファイル保管サービスの類では、あらゆるデータをDBに入れてしまうといった実装もあります。それは全部DBに突っ込めばメリットがある使い方だからです。 ＞セル１つには、１行文字列、実数（整数と有限少数）、時刻、NULLだけが保存できます。 どこのDBのことを示しているのかよく分かりませんが、バイナリだろうと特定の文字数だろうと、より多くの種類のデータを扱えます。 ＞リレーショナルデータベースにも小説を保存できる。その方法は、小説を３０字区切りで分割し、主キーを振ること。１つのセルに３０字の文を保存し、その下に次の３０字の文を保存し、これを終わりまで繰り返します。正しいでしょうか？ 原理的には間違いと言えませんが、現実論からいうと間違いでしょう。 今のDBは、質問文で曰く１セルに小説一冊分全部入れられます。 わざわざ３０文字で区切る実装を行う意味もメリットもありませんし、そもそも主キーは何を振ります？ 主キーになんの意味を持たせて、DBのデータの検索性を増すのでしょうか。 ＞リレーショナルデータベースにも写真を保存できる。先ず、赤表、青表、緑表の３つを用意する。各表のマトリクスサイズは膨大で写真のピクセルがセルに対応し、行×列に配置します。各セルには画素３原色の強度数（0～255だとgif形式だっけ？）を保存する。その後、赤青緑の３表を合成し、ビットマップで出力します。正しいでしょうか？ 原理的には間違いと言えませんが、現実論からいうと間違いでしょう。 今のDBは、質問文で曰く１セルに画像ファイルを全部入れられます。 わざわざＲＧＢを分割した１ピクセル＝１セルに分ける意味は何もありません。 人に手紙を送るとき、はがきに一文字ずつ書いて、文字数分の枚数のはがきを送りつけるような物です。 ＞リレーショナルデータベースは銀行でよく使われていて、お金の出入りや顧客管理でリレーショナルデータベースは大活躍しているそうです。だけど、本当はもっと用途が広い？ コンピュータシステムのほぼ全てにDBが使われていると言っても過言では無いでしょう。 ただし、DBの中にリレーショナルデータベースという種類のシステムがあるので、リレーショナルではないDBもあります。KVS等が有名です。 http://ja.wikipedia.org/wiki/NoSQL ＞フォルダファイルシステムとデータベースは別物と聞いた事があります。一方で、フォルダファイルシステムの基本はデータベースで、データベースに何かアプリを組み合わせてフォルダファイルシステムが形成されているとも聞いた事があります。どっちが正しいでしょう？どっちも間違い？ 考え方としては、そうと言うことも出来る、といったものでしょう。 http://ja.wikipedia.org/wiki/%E3%83%95%E3%82%A1% …
こんにちわ。 > これを回避する方法ってありますでしょうか？？ 他スキーマが所有者なのでuser_sequences ではなく、all_sequences を使って下さい。
こんにちわ。 > 出展が明記できてなくて申し訳ありません。個人的なblog等ではないので執筆者に > 問い合わせるなどはできないようです。 迷ったらマニュアルを見るようにすると良いと思います。 Version が明記されていないので、11.2 のマニュアルを見てみました。 Audit 文 http://docs.oracle.com/cd/E16338_01/server.112/b … これによると、最初のAudit table 文は「CREATE TABLE, DROP TABLE, TRUNCATE TABLE」 のSYSTEM 権限監査の設定のようです。 次に、「AUDIT TABLE ON ＜テーブル名＞」と言う構文は無いようです。 > また、特定のテーブルに対するすべての操作の監査をするには > AUDIT SELECT,INSERT,UPDATE,DELETE,LOCK ON <Schema>.<Object> BY ACCESS; > だけではDROPやCREATEが監査できないので不十分でAUDIT TABLEと組み合わせないと > 無理ということになるのでしょうか？ この場合、OBJECT 監査なのでAudit all on <Schema>.<Object> ～ で監査設定ができますが、SYSTEM 権限監査でやっているCreate, Drop, Truncate 等は 監査されません。 参考URL：http://docs.oracle.com/cd/E16338_01/server.112/b …
こんにちわ。 > 監査証跡への出力項目として上の用語が出てくるのですが、いまいち違いがはっきりしません。 上の項目は全てv$session から取得した値が入ります。 セッション識別 : SID 　これは、Database への接続で使用しているセッションのID です。 　実行中のSQL を中断させる時にSID, Serial# の組み合わせで指定すると言えば 　感じが分かるでしょうか？ クライアント識別 : CLIENT_IDENTIFIER 　これは、アプリが明示的にDBMS_SESSION.SET_IDENTIFIER を使って登録するものです。 　これをしておくと、特定のアプリから実行されているSQL の識別が容易になります。 端末識別子 : TERMINAL 　クライアントの端末名です。 > 実際のログの例などから教えていただければ理解しやすいかと思います。 v$session をselect してみると分かると思います。 因みにv$session の詳細は以下のURL からどうぞ。 http://docs.oracle.com/cd/E16338_01/server.112/b …
こんにちわ。 > しかし、次のSQLを実行しても、ログが出力されません audit の設定をした後で、一旦再接続してみて下さい。
カラムAが昇順で有る事が条件ですが select (select sum(カラムA) from テーブル t2 where t2.カラムA<=t1.カラムA) from テーブル t1 group by カラムA order by 1 です。
ANo1 です。補足です。 とりたい結果に【テーブルA】は重複してでていますが、 もし出したくないのなら。 select key,max(dataA),max(dataB),max(dataC) from ( select key,dataA,Null as dataB,Null as dataC, ROW_NUMBER() OVER (PARTITION BY key order by dataA) rn,key as keydmy from 【テーブルA】a union select key,Null as dataA,dataB,Null as dataC, ROW_NUMBER() OVER (PARTITION BY key order by dataB) rn,key as keydmy from 【テーブルB】 union select key,Null as dataA,Null as dataB,dataC, ROW_NUMBER() OVER (PARTITION BY key order by dataB) rn,key as keydmy from 【テーブルC】 ) group by keydmy,key,rn order by keydmy,rn ※とりたい結果には、keyが出ていない行がありますが、【テーブルA】が1行しかないときに 出さないのか、【テーブルA】【テーブルB】【テーブルC】どれかが複数行あるときに出さない のか？それによってやり方は変わります。
もう1つOBを起動して、管理→セッション情報から、セッションごと殺せばいいのでは。 サーバだけで動いてるわけではなく、アプリケーションを介してファイルを選択しているから、 OBのプロセスを殺せば止まる気もしますが。
学校の宿題ですか？ ここは学校の宿題の、それもまるっぽ答えを求めるところではありません。 そして、（１）の「給与等級が多い人」はｓｑｌ文にはなりません。 写すんならきっちり写しなさい。
コマンドは合ってます。 メッセージを見る限り環境変数が設定されていないようです http://docs.oracle.com/cd/E16338_01/server.112/b … を参考に必要な値を設定してください。 rootで実行出来ないのは単にemctlコマンドにパスが通ってないだけでしょう。 普通はoracleユーザでやるから気にしなくて良いです。
こういうことでしょうか。 insert into 売上データ ( 注文番号, 売上番号, 連番, 商品名 ) select 注文番号 , 売上番号 , ROW_NUMBER() over(partition by 注文番号 order by 売上番号, 連番) + (select COUNT(*) from 売上データ T2 where T1.注文番号 = T2.注文番号) 連番 , 商品名 from 納品データ t1; ROW_NUMBER()で納品データ内での連番を振って、その連番に既存データの件数を足しています。 MAX(連番)だと、同一注文番号が既存データに存在しない時にNULLになってしまうので、COUNTで件数を取るようにしています。
エラーのとおりです。Oracleに接続するには、DBD-oracleが必要です。 http://search.cpan.org/~pythian/DBD-Oracle-1.74/ … perl-DBD-Pg-1.31-6 <<PostgreSQL用ドライバ perl-DBD-MySQL-2.9004-3.1 <<MySQL用ドライバ perl-DBI-1.40-8 <<1DB毎の差分を吸収するためのインターフェース Oracle用のドライバはインストールされていないようです。
こんにちわ。 > この手順と影響範囲が知りたいです。 http://docs.oracle.com/cd/E16338_01/server.112/b … 上記のマニュアルから判断すると、手順については認識の通りです。 影響範囲については、「Alter Session」 なのでAlter Session 文を実行したセッション でのみ有効で既存テーブルには影響しません。 > 既存テーブルもCharベースに変更するにはどのような手順を踏めばよいのでしょうか？ Alter Session したセッションからテーブルを再作成しないといけないので、 単純に思いつく方法としては、こんな感じでしょうか？ 1) exp 又は expdp でデータを外部に出力 2) Alter Session したセッションからテーブルをDrop＆Create 3) imp 又は impdp でデータ投入 4) 索引再作成 参考URL：http://docs.oracle.com/cd/E16338_01/server.112/b …
>Webアプリをフレームワークで作成する場合、 >どの言語で、どのフレームワークを使用するのが一番お勧めでしょうか。 ぶっちゃけ、得意な言語でいいと思いますよ。 何を作るか知りませんがDBもpostgreSQL位の方が扱いやすいと思いますけど
こんにちわ。 > 上記のPDB1 = のところから追記しています。これで合っていますでしょうか？ VMware 上のLinux 環境に、Oracle12c をセットアップした環境があるので 確認してみました。 特にtnsnames.ora の設定は問題無いようです。 接続文字列を指定してSQL*Plus を実行した時のエラーも、ORA-1017 でしょうか？ であれば、PDB に作成したユーザのパスワードが違っている事が考えられます。 Oracle11g 以降では、sec_case_sensitive_logon がDefault でTrue となっています。 このパラメータがTrue に設定されていると、パスワードの大文字/小文字を厳密に区別します。 ユーザのパスワードを再設定して確認してみてはどうでしょうか？
結果に >4| え | あ | １ | － | え | とありますが、ここって 4| え | あ | １ | － | あ | になりますよね？ なにも考えずに書いたので、もっときれいな書き方があると思いますが、 SELECT 　　Ａ 　, Ｂ 　, Ｃ 　, CASE 　　　　WHEN Ａ = 'あ' THEN Ｂ 　　　　ELSE '－' 　　END Ｄ 　, CASE 　　　　WHEN Ａ <> 'あ' THEN Ｂ 　　　　ELSE NVL( 　　　　　　( 　　　　　　　　SELECT 　　　　　　　　　　Ｂ 　　　　　　　　FROM 　　　　　　　　　　T T3 　　　　　　　　WHERE 　　　　　　　　　　T3.Ａ <> T1.Ａ 　　　　　　　　AND T3.Ｂ <> T1.Ｂ 　　　　　　　　AND T3.Ａ　= T1.Ｂ 　　　　　　　　AND T3.Ｂ　= T1.Ａ 　　　　　　　　AND T3.Ｃ　= T1.Ｃ 　　　　　　) 　　　　　　, '－') 　　END E FROM 　　T T1 WHERE 　　NOT EXISTS ( 　　　　SELECT 　　　　　　* 　　　　FROM 　　　　　　T T3 　　　　WHERE 　　　　　　T1.Ａ <> 'あ' 　　　　AND T3.Ａ　= T1.Ｂ 　　　　AND T3.Ｂ　= T1.Ａ 　　) ORDER BY 　　Ｃ 　, Ａ 　, Ｂ; とりあえず、書いてあることだけは満たす結果になると思います。
OracleからCSVファイルへ出力すれば、件数の制限はないです。 CSVファイルをAccessへ投入するのはExcelより便利ですよ。 Accessで SUMとGroup byでSQLで簡単に集計できます。 簡単な例： SELECT ProductID, Avg(UnitPrice), Sum(Quantity) FROM "Order Details" GROUP BY ProductID
設定はOracle Enterprise Manager Database Controlから行いましたか？ 設定ファイルを直接修正しても反映されません。
(1)索引を用いるとI/O処理が少なくなりアクセスが高速になるということはわかったのですが、そのI/O処理とはプロセスとメモリ間のやりとりに関するI/O処理という認識で間違いないのでしょうか？ プロセスとディスク（またはキャッシュされたメモリ）との間のI/O処理 というほうがあっていると思うのですが。 ・・・「プロセスとメモリ間」というと正しくないようにしか聞こえませんが、 　　　たまたま、すべてメモリにキャッシュされていると、ディスクアクセスがなかったりするので 　　　完全な間違いとは言い切れないけど、大抵の場合は間違い、って思います。 (2)索引付きと索引なしのカラムを抽出条件にして検索した場合、まず索引付きのカラムから検索を行い、そのROWIDを元に索引なしのカラムのデータを取得して対象データかどうかの判断を行うのでしょうか？ >まず索引付きのカラムから検索を行い、そのROWIDを元に索引なしのカラムのデータを取得して のパターンは、RangeScanというタイプになり、Oracleがそれが早いと判断したら、そういう処理が 動きます。 「そのROWIDを元に索引なしのカラムのデータを取得して対象データかどうかの判断」をするのか 「索引付きのカラムから対象を抽出して、抽出したデータ（select句内の項目と where句内の項目などなのか詳細不明）から索引なしのカラムのデータが一致する 　物のみに絞り込んでいる」のかは不明。（Oracle内部の処理仕様の話なので。。。）
ODAC112012.zip(Oracle Data Provider for .NET 4 11.2.0.1.2)以降でしょうね。 32bitでコンパイルするのですから、当然必要なのは32bitです。 クライアントの64bitOSには、InstantClientにしろなんにしろ、32bitのクライアントが 設置されていないと接続不可です。 アプリケーションを32bit版しか用意しないのならば、それに関係するものは全て32bitで なければ64bitOSでは動きません。
こんにちわ。 > 作業時間 を　文字型で '01:45' として格納したデータを > Date型の'1.75'というデータに変換したいのですが、どうしたらできるでしょうか。 先ずDate 型についてですが内部では7バイト数値型で、整数部で基準日からの経過日数を 小数部で当日の経過秒を表しています。 01:45 は、時:分 を表していると思いますが、日付の部分はどのようにお考えでしょうか？ 強引にやれば、to_date('01:45', 'HH24:MI') ですが、これでは日付情報が欠落 しているため、以下のように目的の値とならない可能性があります。 SQL> select sysdate, to_char(to_date('01:45', 'HH24:MI'), 'YYYY/MM/DD HH24:MI:SS') from dual; SYSDATE TO_CHAR(TO_DATE('01:45','HH24:MI'),'YYYY/MM/DDHH24:MI:SS' -------- --------------------------------------------------------- 14-04-23 2014/04/01 01:45:00
>【過去の質問】 http://oshiete.goo.ne.jp/qa/8546719.html こちらですよね？追加で回答していたのですが、ご覧になっていないのでしょうか？ No.1さんと同様の回答ではありますが。
decodeだったりnullifとnvlの組み合わせだったり方法はいくらでもあると思いますが、case式を使う例だと select 　case 　　when instr(col, '-') > 0 then substr(col, 1, instr(col, '-') - 1) 　　else col 　end as col from tbl; こんな感じとかでしょうか。
外部結合 Cテーブル（Dテーブル）に結合条件となる対象レコードが存在しなくてもAテーブルの レコードを出力することを示します。 通常は等結合で、結合条件に一致しなかったAテーブルのレコードは出力されません。 外部結合は出力することを前提とします。 別テーブルにデータが存在する時は、付加情報としてそれも出力したい場合などに利用しますね。
こんにちわ。 > 「14/04/03」で取得してしまいます。 aaa_date がDATE 型であれば、TO_DATE ではなくTO_CHAR で 取得だと思います。
こんにちわ。 > 複数列を複数行にする方法がわかりません。 > 何か良い方法はないでしょうか。 パイプライン表関数を作成すれば、効率的に作成できます。 カンマ区切りのデータから各項目を切り出して、各項目を PIPE ROW で返してやると、返したデータを行として認識できます。 実際の方法は、この辺が参考になるかと思います。 http://docs.oracle.com/cd/E16338_01/appdev.112/b … 参考URL：http://docs.oracle.com/cd/E16338_01/appdev.112/b …
こんにちわ。 > PACKAGEとBODYの分割はできたものの、BODY内のストアドを別々にすると、 > エラーとなってしまいます。 Package Body のStored Procedure は1つのスクリプト内で定義して下さい。 こんな感じです。 Create or replace Package pkg_xxxx as procedure proc_A; procedure proc_B; procedure proc_C; end pkg_xxxx; / show error Create or replace package body pkg_xxxx as procedure proc_A is begin Proc_A の中身 end proc_A; procedure proc_B is begin Proc_B の中身 end proc_B; procedure proc_C is begin Proc_C の中身 end proc_C; end pkg_xxxx; / show errors
こんにちわ。 > これはどういった場合に発生するエラーなのでしょうか？ 識別子で出力されているSynonum が存在しないか、アクセス権限が無い 可能性が高いです。 > またOracleのバージョンによってPL/SQLのコマンドが動かなくなったりすることは > よくあることなのでしょうか？ データディクショナリ等、Oracle 内部のオブジェクトに依存して いなければ、通常は大丈夫です。
こんにちわ。 > OracleClient9iをインストールしたのですがインストール自体は > 終わっても正常にインストールできないようでOSから入れなおし > ました。 Oracle9i は相当古いので、恐らくWindows Server 2008R2 をサポート していないためと思われます。 > どれをインストールすればよろしいでしょうか。 先ずは、以下の情報を確認して下さい。 http://www.oracle.com/jp/system-requirement/inte … 先ず、Oracle12c からはOracle9i への接続はできません。 11.2 以下のClient が必要となりますが、現在はOracle9i のサポートは終了しているため 不具合が見つかったとしても修正は行われません。 参考URL：http://www.oracle.com/jp/system-requirement/inte …
気がする、だけですとなかなか回答しづらいので、実際に動作時間を測ってみるのはいかがでしょうか。 添付URLの記述を参考にしてみてください。 参考URL：http://d.hatena.ne.jp/replication/20130321/13638 …
＞なぜでしょう？ 文字列として、先頭から１文字つづ比較していくから。 「01 」と「002」を、先頭から１文字づつ比較すると、以下のようになります。 ・１文字目の「0」と、１文字目の「0」を比較、同じなので、２文字目の比較に進む。 ・２文字目の「1」と、２文字目の「0」を比較、「1」の方が大きい。 ・結果が出たので、３文字目は比較しない。 結果「01 」は「002」よりも大きい、となります。 これは、「AB 」と「AAC」を比べたら「AB 」の方が大きい、と言う比較と同じです。
#3 ですが、商品IDが2桁以上になるとダメですね。 マッチングに正規表現を使わなければならないかも知れません。 SELECT no, (SELECT LISTAGG(商品名, ', ') WITHIN GROUP (order by 商品ID) FROM Bテーブル b WHERE REGEXP_LIKE(a.商品ID, '\s*(.*\D)?' || b.商品ID || '(\D.*)?\s*') FROM Aテーブル a; 参考URL：http://docs.oracle.com/cd/E16338_01/appdev.112/b …
こんにちわ。 > Oracle10.2.0.5 x64(windowsServer2008x64)ではコンパイルエラーになります。 > （Ora-00918）列定義が未確定がでます。 > 64bitでなにかあるのでしょうか？ Bit 数の違いよりも、Patch Level の違いが影響している可能性が高いです。 エラー発生箇所で参照しているオブジェクトの定義が、10.2.0.3 と10.2.0.5 で差異があるのでは無いでしょうか？ エラーになっているSQL とそのSQL が参照しているオブジェクト定義を確認 して見て下さい。 ORA-918 は、同一ビュー (テーブル) に同じ列名が複数回出現するような 場合に発生するエラーですが、稀にV$ やX$ でそのような事があります。
例の疑似コードでは別に問題点が見つかりませんので、 実際のコード中のどこかにバグがあるんだと思います。 『(1)で取得した値が+1されているかどうか』を第１歩として コードレベルの誤りを探すしかないです。 おそらく(1)の時点では+1した値が取れているのに、(2)～ (3)の処理に問題があってデータが更新されていないので はないかと推測します。
フリーズしているのではなく、最後にセミコロンを入れ忘れてるだけでは？
＞このように明らかに文字リテラルが入る箇所 ＞upper(aiueo) 違います。変数aiueoの値をupperに送るという文です。 変数aiueoが定義されていないとエラーが出ていませんか？
通るでしょう。何が問題点
先ず、大前提として32bitプログラムのプロセス空間には 32bitのDLLしかロードできません。同様に64bitのそれは 64bitのDLLしかロードできません。 OLEの実装にはDLL型とEXE型があり、前者は同一の プロセス空間にあるため、32bitプログラムからは32bitの、 64bitプログラムからは64bitのDLL実装でなければ動き ません。 OLEをインスタンス化する時に使うクラス名はレジストリに 登録されており、最終的に処理を担うDLLかEXEのパスに 行き着くようになっています。互換性を保つため、クラス名は 以前から変わっていませんし、32/64の区別もありません。 OracleのOLEはDLL型実装なので、32bitか64bitのどちらか 一方しか処理できません。 ここでは”OraOLEDB.Oracle”が示す最終パスは後から インストールした方に切り替えられているはずです。 サーバが64bitなら、64bit版で統一すべきでしょう。 32bit版をアンインストールして、もう一度、64bit版を インストールした方がよいでしょう。 そして、コンソールプログラムの方を64bit版でリビルドする ことを薦めます。Visual Studio 2012ならどちらでもビルド できます。
> これは、「1」や「a」などの英数字は1バイト、「%」や「#」などの記号は2バ > イト、「あ」「ア」「亜」などの全ての日本語は3バイトで保存されるという > ことだと思いますが正しいでしょうか？ その認識でOKです。 > そうであれば、例えば氏名項目に２０文字を保証したい場合は、一番バイト消 > 費の多い3バイトで見積もり、20 * 3 = 60バイトで定義すればよいでしょうか？ > 第3水準文字、第4水準文字は4バイトで保存されるという記事もあったのですが、 > これらはとても稀なケースなので考慮せずに3バイトで考えておくのが一般的で > しょうか？ anmochiさんがおっしゃられている通り、UTF-8では１文字の最大が６バイトです。 ただ、私が見てきたいくつかのプロジェクトでは、UTF-8 (AL32UTF8) を使用す る場合、１文字あたり３バイト (すなわち、氏名２０文字を保証したい場合、６０ バイトで定義) で定義していました。 もし、AP側でも何かしらのチェックをするのであれば、DB側は少し緩めで作成す るのも良いかもしれません。VARCHAR の場合、データが入った分の容量しか必要 としませんので。 > あとは、バイトで考えずにNLS_LENGTH_SEMANTICSという初期化パラメータをChar > にすることで文字数ベースにすることができるとも聞いたのですがこのアプロ > ーチは推奨されますか？ 推奨する人がいるとしたら便利そうな機能を売り込みたいOracle社のプリセール スくらいです。実績が少ないパラメータをみだりに設定することで、未曾有のバ グに遭遇するリスクがあるため奨めしません。
シーケンスを使う方法としては、１分以内に９９９９を超えることがないなら、 シーケンスを１分毎に０にリセットして使えばいいと思いますし、 他の方法としては、 連番 = (select nvl((select max(連番)+ 1 from テーブル where 連番 like to_char(sysdate,'hhmiss') || 'A%') ,to_char(sysdate,'hhmiss') || 'A0001') from dual) で既に登録されたデータに１を加えてもいいと思いますが。 ※どちらも秒単位で連番という仕様で書いています。 　単に連番で付けている番号だけでサイクリックにすると質問の現象は防げません。 　（防ぐためには、サイクリックにはできません。どこかでリセットするか十分に大きな桁数をとるか 　　いづれかが必要です。） なお、同時に複数のコミットされていないデータが発生する （ＤＢ側が、２ＣＰＵ以上で同時に処理されている）というのなら、不可能。 （複数のＣＰＵをまたいで連番を共有することはプログラムでもできっこないです。） ・・・２ＣＰＵ以上で同時に処理されているのでなければミリ秒まで同一のデータが出来るのは あまり起きないと思うのですが。
表領域を削除すればデータファイルも削除できます。 INCLUDING CONTENTS AND DATAFILESを付けて DROP TABLESPACE を実行することで、 表領域の削除時に Oracle がデータファイルも削除してくれます。 DROP TABLESPACE IndexTbs INCLUDING CONTENTS AND DATAFILES; IndexTbs表領域が２つ以上のデータファイルから構成されている場合に、 IndexTbsを削除することなく、複数のデータファイルのうち１つだけを削除することは できないので、そのようにしたい場合は、IndexTbs表領域のデータを一旦エクスポート して、IndexTbs表領域を再作成してください。
## ちょっと、大変そうですね。。。 >疑問 >・WEBページに対してマスタはもつものなのでしょうか。 目的を書かずに手段の要否を問われても、答えはでてこないです。 要は、WEBページに対してマスタを持って何をするかがまったくかかれていないので いるかいらないか誰も判断をつけれないということになってしまいます。 例えば、 ユーザーのアクセスログを別途取得する★ その際は、アクセスした日時とユーザーＩＤとＷｅｂアドレスを取得している ⇒ユーザーＩＤとＷｅｂアドレスで何をしたかはわかるといえばわかるが 　Ｗｅｂアドレスだけではとてもわかりにくい。★ 目的：アクセスログを参照するさいには、わかりやすくWEB画面名称を表示したい ⇒マスタをもって、ＷｅｂアドレスからWEB画面名称を参照し、 アクセスした日時とユーザーＩＤとＷｅｂアドレスとWEB画面名称を表示する このためにマスタを利用します という話の筋道になります。 ★のところがわからないとマスタの要否がわからないっていう話です。 参考資料については、 例えば、Ｗｅｂページの作り方がまったくわからない人に対してのサイトで http://www.shoshinsha.com/hp/1hour/first.html とか見つかりましたが、これからスタートだったら、業務で利用できるようになるまでには いったい何年かかることやら。。。（このＵＲＬは参考にならないはずです） きつい言い方してすいませんが、 業務要件を聞いて、どういう風に作ってというのをアドバイスしてもらえる人を探してこないと いつまでたっても出来そうにないです。 ・・・質問文を見ると、WebアプリのＤＢ設計を担当ということなので、 Webアプリを作るサイドにそういう人がいるということなら、 その人に要件を聞くことからはじめれば対応できるかもしれません。 （Webアプリを作るサイドにそういう人がいないならもう撃沈するのがオチとしか思えませんが。。）
質問1について。 >２つのオーバーロードプロシージャのパラメータ数が異なるよう指定しているので、このエラーに関する原因を見つけれておりません。 とありますが、 >PROCEDURE SHOW_BIZDAYS( >v_start_date IN DATE := sysdate, >v_bus_days IN NUMBER := 30); と、v_bus_daysのデフォルト値を設定しているため、 >EXECUTE test.SHOW_BIZDAYS('20-NOV-13') この呼び出しは、EXECUTE test.SHOW_BIZDAYS('20-NOV-13', 30); と同じことになります。 ですので、デフォルト値の設定を消さなければいけません。
このような場合はいくつかの対応ですね。 (1)リスク承知で8.1を導入する 動作確認がとれていないと言っても動作しないという訳ではないかもしれないので、自己責任で8.1の導入をする (2)8.0のまま導入する 動作確認が取れるまで8.0を使い続ける。最新のOSが最良とは限らない 企業としての対応なら(2)になると思います。当社では顧客にメリット・デメリットを伝えた上であえて古いOSを納入することもあります。逆にWin7を導入することもありますね。
こんにちわ。 > インスタンス、ノード、ターゲットの違いについて ターゲットは、RMAN で言うTarget DB の事でしょうか？ そうであれば、こんな感じで良いと思います。 インスタンス : SGA (共有メモリ) とバックグラウンドプロセス群 　　　　　　　 要は、DB Server 上のメモリリソースです。 ノード : インスタンスを起動しているDB Server ターゲット : インスタンスを通してアクセスされるデータベース 　　　　　　　 データファイルやRedo Log 等、Storage 上のリソースです。
>>説明不足でしたが、SQLではなくオラクルです。 オラクル・データベースをはじめとして、ＲＤＢは、ＳＱＬ言語を使っています。このレベルも理解できてないなら、大学で学んでいることが理解できないのも当然でしょう。 >>私JAVAはあまり慣れていないので、まずはJAVAの基礎を固めてからオラクルの勉強をしたほうがよいということでしょうか？ 現在学んでいることを理解するならば、どちらも必須です。なおJavaとオラクルは直接の関係はありません。Javaの基礎が分かったとしても、オラクルは別ものですので、ゼロからのスタートです。 さらにTomcatやそれ以外のWebServerとか、html、JavaScript、データベースや文字コードのことも理解しないとだめでしょう。全部を勉強しないといけません。 とはいっても、同時に勉強しようと何冊も同時に書籍を読みまくっても、頭に入るわけはないので、理解しやすいところから順番にやっていくしかないかもしれません。 そして書籍を読むだけではなく、時間がかかっても、自分の手を動かして、１からサイトを作ることが、学ぶ良い方法だと思います。 ただ、正直なところ、JavaでのWeb開発は、PHPとかRubyonRailsなどに比べると、難しいと思います。私もいろんな言語でのシステム開発経験があったのですけど、JavaをつかったWeb開発は、本をよんだだけでは分からず、ベテランＳＥさんの応援を求めて、なんとか開発を進めることができたという経験があります。なので、今でもWeb開発をするときは、Javaを敬遠して他言語で行っています。 ということで、質問には (1)WEBデータベースにあたって何をどの順番で学んでいくのがよいか 人それぞれだと思うけど、時間をかけて一歩ずつ進むしかない。ただ、ある程度分かるまでは、冬休みなどの休暇を全部潰して、１日に１５時間の勉強を連日続けるとか、まとめて学習したほうがいいと思います。 (2)それにあたっておすすめの参考書またはサイト たぶん「これだけ１冊読めばいい」とはならず、辞書的な本、言語解説的な本とか、逆引き本が必要になると思います。また、データベースやＨＴＭＬとか、いろんな技術・知識が必要になりますので、書店で自分が必要でかつ理解できると思える書籍は、財布が許す限り全て購入すればいいと思います。
こんにちわ。 > 何かわかる方が居ましたら教えて頂きたいです。 サービスが正常に起動していない事があると言う事は、正常に起動 している場合もあると言う事でしょうか？ そのような場合は、起動に時間がかかっているだけの可能性が高いです。 PC 再起動後暫く待ってから、接続を行った場合はどうでしょうか？ また、問題発生時のAlert log を見れば何か分かるかも知れません。
顧客情報が重複しているというなら、SQLを副問い合わせと外部結合の組み合わせにすれば何とかなります。 select A.銀行No, B.銀行名, A.顧客No, C.顧客名, A.残高 from 口座 as A left outer join 銀行 as B on B.銀行No = A.銀行No left outer join (select distinct 顧客No, 顧客名 from 顧客) as C on C.顧客No = A.顧客No しかしそもそもテーブルの正規化が出来ていないという、関係データベースの基礎がおろそかになっているように思われます。 素直に重複が発生しないように、テーブル設計を見直してはいかがでしょうか。
> SYSスキーマなどを含めてエクスポートしたいときには、 > Full=y　では無理だから各スキーマ（SYS、ORDSYS等）を指定して個別で > 行う必要があるということなのでしょうか。 SYS スキーマはシステムの持ち物なのでexp した事はありません。 その他も、Oracle Text やExpression Filter 等、Oracle の拡張機能をInstall した際に作成されるスキーマのため、ユーザが意識的にexp/imp する事はありません。 SYSスキーマにオブジェクトを作成しなければならない理由が無いのであれば、 新しいスキーマを作成してそちらにオブジェクトを移動した方が良いです。 テーブルのデータだけで良ければ、ユーザ作成後に Create table 新ユーザ.テーブル名 as select * from SYS.テーブル名; とすれば、コピー可能です。
単一のSQLでやりたいなら、CASE式とスカラサブクエリの組合せでいけるのではないかと。 なお、手元に環境が無いので Oracle では未確認です。 UPDATE table_hoge SET Qty = CASE No WHEN 1 THEN (SELECT Qty FROM table_hoge WHERE No = 2) WHEN 2 THEN (SELECT Qty FROM table_hoge WHERE No = 1) ELSE Qty END WHERE No IN (1, 2); 性能などを気にしないなら、最後の WHERE 句は不要です。 参考URL：http://www.geocities.jp/mickindex/database/db_ca …
>>必要はディスク領域は400MBに対して私のPCは264MBしかありません。 必要なディスク容量が４００ＭＢと表示されていて、それを満たさないのですから、インストールがうまくいかないのは当然です。 ２００Ｖ用のモータを１００Ｖで使って、「規定のパワーが出ない」といっているようなものでしょうね。 ハードディスクを増設するか、不要なファイルを消して、４００ＭＢのフリースペースを確保して、再インストールしましょう。
select A.FITEMNO from A , B , B B2 , C where C.FCHILDITEMNO = A.FITEMNO(+) and C.FPARENTITEMNO = B2.FITEMNO(+) /* (+)はいらない？ */ and A.FITEMNO(+) = B.FITEMNO and B.FITEMTYP(+) = 'P' /* (+)はいらない？ */ and B2.FITEMNO(+) = '123456789' /* (+)はいらない？ */ ん？Cの全件　×　FITEMTYP = 'P'であるBの全件　の件数だけ出したいの？ もし、それでよければ上のSQLででると思いますが（未検証）、 left outer join を使ったほうがわかりやすそう。 from (((C left outer join B on B.FITEMTYP = 'P') /* ひょっとしてこれはInner Join？ */ left outer join B B2 on C.FPARENTITEMNO = B2.FITEMNO and and (B2.FITEMNO = '123456789')) /* ひょっとしてこれはInner Join？ */ left outer join A on C.FCHILDITEMNO = A.FITEMNO and A.FITEMNO = B.FITEMNO) こちらも未検証。left outer join B as B2 on・・・でないとだめだったかも。
効率良くというか、普通のupdate文・delete文ですが・・ update テーブル T1 set T1.カラムD = (select カラムD from テーブル T2 where T2.カラムA = 'aaa' and T1.カラムB = T2.カラムB and T1.カラムC = T2.カラムC) where T1.カラムA = 'bbb' and exists ( select * from テーブル T2 where T2.カラムA = 'aaa' and T1.カラムB = T2.カラムB and T1.カラムC = T2.カラムC ); delete from テーブル T1 where T1.カラムA = 'aaa' and exists ( select * from テーブル T2 where T2.カラムA = 'bbb' and T1.カラムB = T2.カラムB and T1.カラムC = T2.カラムC ); こんな感じでどうでしょうか。
そもそもがUNIONの用途として正しくない気がしますしね。 複数のテーブルの同一キーのデータを簡単に取れないというのは、設計がよくないのではないかという気がします。 >１つ１つNULLを設定するのは難しいかと、、、 とありますが、ただ面倒だということですよね？ ひとつひとつ項目を列挙していくだけなので難しいことはないと思うのですが。 たしかに、テーブルや項目が多ければ大変だとは思いますが、やらなければいけないことならやるしかないと思います。 役に立つか分かりませんが、複数のテーブルの全項目をUNIONで取得するSQLを組み立てるSQLを考えてみました。 --全角スペースでインデントしています select 　　case 　　　　when COL_NUM = 1 then 　　　　　　case 　　　　　　　　when TAB_NUM > 1 　　　　　　　　then 'UNION ALL' ||CHR(10) 　　　　　　end 　　　　　　|| 'SELECT' || CHR(10) 　　　　else ',' 　　end || coalesce(P_COLUMN_NAME, 'NULL') || ' AS ' || L_COLUMN_NAME || case 　　　　when max(COL_NUM) over() = COL_NUM then 　　　　　　CHR(10) || 'FROM ' || TABLE_NAME 　　end from 　　( 　　　　select 　　　　　　TABS.TABLE_NAME 　　　　　, COLS.COLUMN_NAME L_COLUMN_NAME 　　　　　, TAB_COLS.COLUMN_NAME P_COLUMN_NAME 　　　　　, dense_rank() over(order by TABS.TABLE_NAME) TAB_NUM 　　　　　, ROW_NUMBER() over(partition by TABS.TABLE_NAME order by COLS.COLUMN_NAME) COL_NUM 　　　　from 　　　　　　( 　　　　　　　　select distinct COLUMN_NAME 　　　　　　　　from USER_TAB_COLS 　　　　　　　　where TABLE_NAME in ('Aテーブル', 'Bテーブル') --対象のテーブルを列挙してください 　　　　　　) COLS 　　　　cross join 　　　　　　( 　　　　　　　　select TABLE_NAME 　　　　　　　　from USER_TABLES 　　　　　　　　where TABLE_NAME in ('Aテーブル', 'Bテーブル') --対象のテーブルを列挙してください 　　　　　　) TABS 　　　　left join USER_TAB_COLS TAB_COLS 　　　　on 　　　　　　( 　　　　　　　　TAB_COLS.TABLE_NAME = TABS.TABLE_NAME 　　　　　　and TAB_COLS.COLUMN_NAME = COLS.COLUMN_NAME 　　　　　　) 　　) order by 　　TAB_NUM 　, COL_NUM ; これを実行すると、たとえば今回提示されているテーブル定義であれば、 SELECT 内容 AS 内容 ,所属 AS 所属 ,日付 AS 日付 ,時間 AS 時間 ,NULL AS 理由 ,社員番号 AS 社員番号 ,結果 AS 結果 FROM Aテーブル UNION ALL SELECT 内容 AS 内容 ,NULL AS 所属 ,日付 AS 日付 ,NULL AS 時間 ,理由 AS 理由 ,社員番号 AS 社員番号 ,NULL AS 結果 FROM Bテーブル というSQLが出来ます。 これをインラインビューにして、SELECTする項目順を入れ替えたり、不要な項目を削除したりすれば少しは楽になるかもしれません。
単純に infile '入力ファイル名' "str '@\r\n（か@\n)'" でダメですか？
記載のデータって正しいですか？ このデータだとID:2～4が連続することになると思うのですが。 正しいデータが不明なので、期待どおりの結果が取れるか分かりませんが、 select min(START_DATE) START_DATE, max(END_DATE) END_DATE from( select ID, START_DATE, END_DATE, sum(TERM_START) over(order by START_DATE, END_DATE) TERM_ID from ( select ID, START_DATE, END_DATE, case when START_DATE >= LAG(END_DATE, 1) OVER(ORDER BY START_DATE, END_DATE) THEN 1 else 0 end TERM_START from EVENT ) ) group by TERM_ID order by START_DATE, END_DATE; こんな感じでどうでしょうか。
select ID, DT, BUMON from ( select ID, DT, BUMON, row_number() over(partition by ID order by DT desc) rnum from TB ) where rnum = 1; なんてのでもいいと思います。
Order by 項目名　asc/desc で、項目名に case文は、使えるけど、 asc/desc にcase文は使えません。 (1つ目のCase文は項目名を指定しているのと同じで、1レコードずつ処理されて同じCase文の結果を 1レコードづつ返していると思うけど、内部処理の話なのではっきりしたことはわかりません。) >2つ目のCase文（：LINE）を消し、最初のCase文だけを残して、並び順（DESC・ASC）を埋め込むと、 >実行される状態になります。 では、デフォルトのascが適用されて実行できている。 じゃあどうすれば実現できるのかといわれると、 SQLを発行している元の処理が何かわからないので最善かどうかはわかりませんが、 SQLで実行するなら、 Select case ：LINE when '1' then (row_Number() Over(Order by Case ：ITEM When 'PJコード' then PJコード When '部署コード' then 部署コード end desc) when '2' (row_Number() Over(Order by Case ：ITEM When 'PJコード' then PJコード When '部署コード' then 部署コード end asc) end .... とでもするしかないと思います。 ※未検証。
こんにちわ。 > 私の考えでは、13でテーブルを確認するとデータが2件はいっていると思ったのですが、 > 結果は、1件だけでした。 > 解決の手がかりになる情報などがございましたらご教示いただけますでしょうか。 RMAN で取得したBackup に対して、SQL*Plus からRecovery を行っているから だと思います。 増分 Backup (Backup Set) はRMAN 独自の形式のため、RMAN からRecovery を 行ってやる必要があります。 但しRMAN にはuntil cancel が無いので、最後に取得したBackup 時のログから Backup されたThread番号, Log順序番からv$archived_log 等を検索して Recovery するSCN を算出しないといけないですね。 RMAN はRestore する時もultil SCN の指定が可能ですので、Restore を開始する前に Restore/Recovery するSCN を取得した方が良いと思います。
一般的には在庫テーブルを作り、入庫日と出庫日または入出庫日欄を設けて、在庫の有る物に対し６ヶ月以前か判定します。現テーブルで判定出来ない場合は、新たなテーブルや項目を持つ必要があります、このようにシステムは新たなニーズが発生した場合は、テーブル構造も含めて対応を取る必要があります、つまり、常に変化成長させる必要が有ります。
こんな書き方でもできた気がします。 この方法なら、同一条件クエリは2つで済みますね。 UPDATE A SET (DK, NUM) = (SELECT DKB, SUBSTR(A.NUM, 1, 13) || (SELECT LPAD(TO_CHAR(B.DKB), 7, '0') FROM B WHERE A.DK = B.DKA) WHERE EXISTS ( SELECT B.DKA FROM B WHERE A.DK = B.DKA ) キーが同じレコードを対象に、更新する項目でも同じ条件で対象レコードを抽出して 更新するだけですよ。
これって、エラーではなく情報（単なるメッセージ）ではないですか。 リリースにもよりますが、要件を満たしているマシンにDBをインストールするときにも似 たようなメッセージが表示されたように思います。 なので、うまくインストールできないということでしたら、別のところでエラーが発生し ている可能性を疑ってみるべきだと思います。 まずは、oraInventoryに出力された installActions.log を確認されてみると良いでしょ う。（非常にわかりづらいですが・・・） いくら Oracle でも、6GB RAMでも足りない製品はさすがにないはずです。
>また、どういった情報が必要であるかを教えて頂ければ、 絶対パスにしたら治る可能性が高いと思ったので書きませんでしたが… 「バッチ」とは何かとか、起動方法やその内容とか。バッチではなくコマンドプロンプトから「imp user/password@sid file=filename full=y」のコマンドを、ファイルのある場所で実行したらどうなるのかとか。それから1回でも成功した事があるものが、失敗するようになったのか、1度も成功した事が無くはじめて試しているところかとか。 とにかく状況を伝えようとする意思を持つことが重要だと思いますよ。「聞かれたら答えますよ」という態度ではなく。 「バッチ」の処理の中でCDされていてカレントディレクトリが変更されているんじゃないかとか、何も書いていないが実は何らかのジョブスケジューラーを使っていてそのスケジューラーの機能でカレントディレクトリが変更されているとかの可能性があるかなと考えました。 が、そういうところをくどくど言わなくても絶対パスにすりゃいいだろと思っています。
こんにちわ。 > 私には、なぜバックアップから除外されているデータファイル6に対して > 「～古いバックアップからリストア～」といったメッセージが出てくるのか > 理解できていません。 バックアップしていない表領域は、リカバリの対象外となります。 そしてリカバリとは、「全てのデータファイルの最終更新SCN を一致させる事」 と考えると、TBLSP01, TBLSP02 のデータファイルについてもSCN を一致させる 必要があるため、データベースをオープンするためにはバックアップが必要となります。 TBLSP01, TBLSP02 表領域については、バックアップを取得していないのであれば 該当の表領域を除外してリカバリを行う事になると思います。 Alter database datafile 'データファイル#6 のフルパス' offline drop; Alter database datafile 'データファイル#7 のフルパス' offline drop; としてから、データベースのリカバリを行い、resetlogs を指定してDB を オープンした後で、 Alter tablespace TBLSP01 including contents and datafiles; Alter tablespace TBLSP02 including contents and datafiles; でリカバリの対象外とした表領域を削除した後で、該当表領域の再作成と テーブル, 索引等の再作成を行って下さい。 ※ 表領域を読取専用にしておけば、1度だけBackup を取得しておけば、 　 (Backup を残しておけば) そのBackup を使ってリカバリが可能になります。
こんにちわ。 > Oracleでの動的ポートがわからないのでご教示頂けますでしょうか。 デフォルトでは、TNS Listener がClient からの接続要求を1521ポートで 待っていますが、接続要求を受け取った後はClient とサーバープロセスが 別のポートで通信し合う事かと。 この辺が参考になるかと思います。 http://www.oracle.co.jp/forum/thread.jspa?thread …
こんにちわ。 > 他のDBのテーブルを参照したいのですが方法がわかりません。 DB Link 使用すれば、他DB のデータを参照する事ができます。 手順としては、こんな感じです。 1) 接続しているDB Server のtnsnames.ora にもう1つのDB に接続するための 　 接続文字列を定義する。 2) SQL*Plus から、以下のようにしてもう1つのDB を参照するための 　 DB Link を作成する。 　 SQL> Create database link dblink名 connect to 接続ユーザ名 　　　　　identified by パスワード using '接続文字列'; 3) 後は、テーブル名を@dblink名で修飾すると、他DB のテーブルを 　 ローカルのテーブルと同じように扱えます。
話がおかしいと思います。 恐らく、 　１．本番環境旧システムのスキーマをエクスポート 　２．開発環境新システムのNEWテーブルをエクスポート 　３．本番環境新システムのスキーマへ１．のダンプファイルをインポート 　４．本番環境新システムのスキーマへ２．のダンプファイルをインポート という流れかなと思います。 この時、NEWテーブルがトリガーからデータ登録が行われるならば、 インポート後は0件でも問題ないと思います。 開発環境で作成されたデータが本番環境に混ざってはいけませんからね。 しかし、NEWテーブルが今回追加され、トリガーによってレコードが挿入される テーブルとしたら、足りないものがあります。 それは、『トリガーの生成』。 どこかのテーブルが更新された時に、NEWテーブルを更新するトリガーを 追加、もしくは変更しているはずです。 これは上記１．２．３．４．をやっても反映されません。 そのトリガーの所在を明確にした上で、４．を適用後にトリガーのCREATE文を 本番環境へ走行させる必要があります。
そもそも明細TBLに予約TBLとの関連がないのが良くないと思うのですが。 それがあればもっと単純なSQLでよくなるはずです。
こんにちわ。 > TIMESTAMP型が含まれるテーブルは上記のSQLでは取得できないのでしょうか。 通常、そのような事はありません。 問題のテーブルにアクセスできるユーザからuser_tab_columns ビューを 参照している前提で、考えられる原因が3つあります。 1) 別スキーマにテーブルがある。 　 user_tab_columns ビューは、自スキーマに定義されているテーブルの 　 列情報を持ちます。 　 all_tab_columns ビューで情報が取得できるか確認して下さい。 　 ※ all_tab_columns ビューのowner 列にテーブルの所有者名が 　　　格納されています。 2) テーブルが大文字/小文字混在で作成されている。 　 テーブルを大文字/小文字混在でCreate table しても、大文字でテーブルが 　 作成されますが、テーブル名をダブルクォーテーションで囲むと大文字/小文字 　 混在で作成させる事ができます。 　 その場合、ディクショナリにもテーブル名は大文字/小文字混在で格納されて 　 います。 　 where upper(table_name) = upper('テーブル名') で確認してみて下さい。 3) Synonym 経由で別の表にアクセスしている。 　 Synonum 経由で別の表にアクセスしている場合も、user_tab_columns や 　 all_tab_columns ビューには列情報は格納されません。 　 select owner, object_type, object_name from all_objects 　　 where object_name = '先に指定したテーブル名'; 　 上のSQL で、どの所有者のどのようなオブジェクトにアクセスしているか 　 確認してみて下さい。
>カーソルおよびフェッチ時にダブルクウォートを削除、またはシングルクウォートに変換をすることが可能でしょうか。 なんか違う気がする。 >※※※上記TESTREC.TEST_NAMEに"AAAA"の形でデータが入るため、下記実行時にORAエラーが発生する。 というのを >EXECUTE IMMEDIATE V_EXEC_STRING INTO V_EXEC_COUNT; で実行されるＳＱＬ文が、 >V_EXEC_STRING := V_EXEC_STRING || 'SELECT COUNT(*) FROM READ_TBL WHERE TEST_NAME = '|| TESTREC.TEST_NAME; によって作成された SELECT COUNT(*) FROM READ_TBL WHERE TEST_NAME = "AAAA" になっているからAAAAという項目がないってエラーになっているようです。 "を除去したところで、 SELECT COUNT(*) FROM READ_TBL WHERE TEST_NAME = AAAA になるだけ。 やはり、AAAAという項目がないってエラーになるのでは？ V_EXEC_STRING := V_EXEC_STRING || 'SELECT COUNT(*) FROM READ_TBL WHERE TEST_NAME = '''|| TESTREC.TEST_NAME || ''''; にすると、 SELECT COUNT(*) FROM READ_TBL WHERE TEST_NAME = 'AAAA' となるので、TEST_NAMEの値が、AAAAの件数を取得できる ということかなと思いますがいかがでしょう？
＿＿＿＿＿＿＿ Dim rs As New ADODB.Recordset rs.Open "～(1)～", cn, adOpenDynamic, adLockOptimistic, adCmdText ￣￣￣￣￣￣￣ を ＿＿＿＿＿＿＿ Dim rs As ADODB.Recordset Set rs = cn.Execute("～(1)～") ￣￣￣￣￣￣￣ に変えてみるとどうでしょう？
> テーブルA：承認が必要なデータが保存されます。 > テーブルB：承認が完了したデータが保存されます。 > 承認処理はWebからオンライン処理で行います。 > 承認完了後、バッチ処理でテーブルBに内容をコピーします。 一般的な話をすると、テーブルAとテーブルBが1:1で共通の属性を持っているなら、 そもそもテーブルAとテーブルBを分けたりしません。分けることで冗長になるので。 それに、承認済みデータと未承認済みデータはフラグや承認日時列を設定してあげる事で、 SQLで絞り込めますから。性能云々についても、何千万件ならいざしらず、たかが50万件 程度ならチューニング次第でどうにでもなるでしょう。 もちろん、これは一般論であり、そうせざるを得ない理由があるなら話は別です。 なので、まずは、Cテーブル以前にまずBテーブルがなぜ必要なのか明確にしていただかないと。 > １．テーブルAの完了フラグをONにする。 > 　　バッチ処理は、テーブルAの完了フラグがONのデータを対象とする。 > ２．新たにテーブルCを設け、承認完了したデータをコピーする。 > 　　バッチ処理は、テーブルCに存在するデータを対象とする。 前提条件等にもよりますが、普通はますます冗長になる２案は採用しません。 さらに言えば、１案よりもNo.2様が言われている、承認してAテーブルのデータを削除する際に Bテーブルにデータを入れる方が良いでしょう。 もっと言えば、データを移動するくらいなら、冒頭で述べたとおり、Bテーブル自体も無くし、 承認された時点で承認日時を入れるためのUPDATEをするのが良いように見えます。
お疲れ様です。 tmnktmnkさんの言われていることで十分わかりますよ。 きっとそんなにOracle詳しくないので、言葉足らずかもしれませんが、 十分わかります。 >ログをスイッチし、Oracleは動作したのですが 確かに、listener.logをリネームすることをスイッチするって言われる方いますよね。 正しくはリネームというと思いますが、スイッチでわかります。 >dllからは動作しません。 固まるんじゃないんですか？応答がない感じで、ぐるぐる回ってるんじゃ？ エラーは特に表示されないんじゃ？ >なんとなくですが、with句を用いたものが失敗しているようです。 with句はSQLが複雑になっているんで、with句だけじゃなく複雑なものだと失敗すると思いますよ。 結論としてですが、 そのアプリケーションサーバからdll経由で接続したセッションが、DB側に残ってないでしょうか？ 質問されてからですので、20時間くらいセッションをはったものがないでしょうか？ それを切断すれば大丈夫です。 切断できない場合は、Oracleを再起動しかありませんが… こういった現象をなんとなく聞いてわかるようになるのには、経験しかありません。 エラーから調べることも大切ですが、現象である程度わかるようになれるといいですね。 tmnktmnkさんの今後のご活躍を期待します。 エラそうですみません。
CASE式で書くならば、 CASE WHEN A.c - A.d > 0 THEN A.c - A.d ELSE 0 END AS sa ですね。
こんにちわ。 > そもそも2台だけで構築は可能なものでしょうか？ 確かにRAC を構築するのであれば、共有ディスクが必要になります。 でもVMware とかを使えば、1台でもRAC の構築は可能ですょ。 物理マシンは1台なので、当然可用性はありませんが、動作検証などで 使用するには十分です。 手順については、この辺を見て下さい。 http://otndnld.oracle.co.jp/products/database/or … http://sakusakuit.blog.fc2.com/blog-entry-96.html http://www.doppo1.net/oracle/admin/rac_install_1 … > (2)のShared File System（共有ファイルシステム）とは、NFSといった話でしょうか？ NFS とは違います。 NFS の場合、複数のマシンから同じファイルを一貫性を保って更新する事が できないため、RAC のStorage として使用する事はできません。
select 職員番号, 氏名, レベル, 点数 from aaaa a0 where 点数 is not null and レベル <= 4 and a0.レベル=(select max(a1.レベル) from aaaa a1 where a1.職員番号 = a0.職員番号 and 点数 is not null and レベル<=4) and a0.点数 = (select max(a2.点数) from aaaa a2 　　　　　　　　　　where a0.職員番号 = a2.職員番号 and　 　　　　　　　 　　　a0.レベル = a2.レベル) order by 職員番号 　ウィンドウ構文を使わずにやろうとすると、こんな感じでしょうか。 　なお、もし、（職員番号，レベル）の組に重複がないのであれば、where区内の２つめのselect文を含む条件( a0.点数=で始まる比較）は不要です。（ちなみに、一応実験は、01100でレベル４で得点5点を追加して行っています。） 　また、常識的に、職員番号が同じで氏名が違うなんてことはあり得ないとしていますが、もしこれを考慮に入れ別人として扱う必要があるなら、その条件は追加が必要です。
こんにちわ。 > 本来ならここでプライベート（これって仮想IPのことですよね？） 違います。 ざっくり言うと、こんな感じです。 Public IP : アプリケーションからアクセスする時に使用するIP 　　　　　　 Node 毎に1つ必要で、Node が停止してもFailover しない Private IP : RAC がNode 間通信で使用するIP 仮想 IP : 基本的にPublic IP 　　　　　　 Node 毎に1つ必要で、Node が停止すると別Node にFailover する。 　　　　　　 → VIP はGrid が管理して動的にNode に割当てるので、 　　　　　　　　ping が通る (どこかのマシンに割当てられている) のはダメです。 更に11.2 からはSCAN IP と言うのがあって、1つのホスト名で3つのIP Address を ラウンドロビンで引けるようにしておきます。 SCAN IP はRAC を構成する何れかのNode に割当てられており、Node が停止すれば 自動でFailover します。 これで、アプリケーションがSCAN IP で接続するようになっていれば、RAC の Node 追加/Node 削除があっても設定を変更する必要がなくなっています。
select 生年月日.ID,生年月日,基準日, cast(substr(基準日,1,4) as int)-cast(substr(生年月日,1,4) as int) -case when substr(基準日,5,4)<substr(生年月日,5,4) then 1 else 0 end as 年齢 from 生年月日,基準日 です。
各テーブルの関連が不明なのですが、こんな感じのことでしょうか。 select T.*, N.SIME from TOKUTEN T inner join KIHON K on (K.SYKNCODE = T.SYOKUINCD) inner join NAME N on (N.SYOKUINID = K.SYOKUINID and T.HYOKIKAN_FR between N.TKYSTADATE and N.TKYENDDATE); NAMEテーブルにレコードがないTOKUTENテーブルのレコードも取得したいなら、LEFT JOINに変えてください。
こんにちわ。 ブロック破損ですか。 Oracle の場合、DBMS_REPAIR Package を使用する事で、破損ブロックを除外して データにアクセスさせる事ができます。 詳細は、この辺のマニュアルを確認して下さい。 http://otndnld.oracle.co.jp/document/products/or … Oracle のバージョンによって、使い方も変わってくる可能性がありますので、 バージョン毎のマニュアルを必ずご確認下さい。 http://www.oracle.com/technetwork/jp/indexes/doc … 大まかな手順としては、こんな感じです。 1) DBMS_REPAIR.ADMIN_TABLES で、障害状況補足用テーブル (REPAIR_TABLE, ORPHAN_KEY_TABLE) の作成 2) DBMS_REPAIR.CHECK_OBJECT で、破損オブジェクトの確認 　 → 破損オブジェクトが索引であれば、Drop&Create で復旧 3) DBMS_REPAIR.FIX_CORRUPT_BLOCKS で破損ブロックをマーク 4) DBMS_REPAIR.DUMP_ORPHAN_KEYS で破損データブロック関連の索引エントリの確認 5) DBMS_REPAIR.SKIP_CORRUPT_BLOCKS で破損ブロックのスキップ指定 6) 破損ブロックのSKIP して、exp, expdp 等で外部に退避 参考URL：http://www.oracle.com/technetwork/jp/indexes/doc …
select 項目 from テーブル where 'ABCDEF' like '%' || 項目 || '%'; regexp_likeを使うなら、 select 項目 from テーブル where regexp_like('ABCDEF', 項目); とかではどうでしょうか。 インデックスが使われないのでパフォーマンスに問題があるとは思いますけど。
> 但し、私はWHEREの所で、今日のデータの中の重複データを削除されるつもり > でいたのですが、今日以前の物も全て削除されてしまいました。 > 構文に誤りがあるのでしょうか。 構文に誤りはありません。構文通りに削除されただけです。 ＊WHERE句とGROUP BY句は、なんか引っかかってたのですが気付きませんでした。 副問い合わせの部分で、今日(SYSDATE)の重複しているデーターのID最少値を取得しています。 DELETEでは、そのID以外をすべて削除、ですので、日付などは関係なく削除されます。 今日のみというのであれば、DELETE文にもWHERE句で日付の指定を入れてください。 DELETE FROM D入庫データ WHERE ID NOT IN ( SELECT MIN(ID) FROM D入庫データ WHERE TO_CHAR(SYSDATE, 'yyyy/mm/dd') = TO_CHAR(登録日時, 'yyyy/mm/dd') GROUP BY PRID, 台車番号, 入庫数量, ロット番号, TO_CHAR(登録日時, 'yyyy,mm,dd') ) AND TO_CHAR(SYSDATE, 'yyyy/mm/dd') = TO_CHAR(登録日時, 'yyyy/mm/dd') ; ---- NOT EXISTS句を利用した方がパフォーマンスが良くなるかもしれませんが詳しくは調べてください。
こんにちわ。 > 非同期I/Oが有効なら、I/Oスレーブが使用されるのではないでしょうか？ http://docs.oracle.com/cd/E16338_01/backup.112/b … この辺が参考になるかと思います。 http://docs.oracle.com/cd/E16338_01/server.112/b … http://docs.oracle.com/cd/E16338_01/server.112/b … RMAN に限った話ではありませんが、非同期I/O がサポートされていない時に、 I/O を高速化するためにSLAVE 数をDBWR_IO_SLAVES に指定するようですね。 参考URL：http://docs.oracle.com/cd/E16338_01/backup.112/b …
先ず、理論の組み立てが大切です。 (1)TBL_1からJUDGE=OKのものを抽出する。 (2)TBL_2からJUDGE=OKのものを抽出する。 (3)上記(1)と(2)をIDで結合する。 次にOracleのバージョンにより結合式の 書式が違います。 バージョンを明記しましょう。 最新と仮定すると、以下のようになります。 SELECT A.ID,A.JUDGE,B.DATE FROM (SELECT ID,JUDGE FROM TBL_1 WHERE JUDGE='OK') A INNER JOIN (SELECT ID,DATE FROM TBL_2 WHERE JUDGE='OK') B ON A.ID=B.ID 結合したクエリから条件を指定して抽出 するより、先に条件で絞り込んだクエリを 結合する方が件数が減っているので効率が 良くなります。まぁ、今時は機械も速いし、 件数が何十万でもなければ、どうやっても 見た目の変化はありませんが、昔はこういう ことをしないと、処理時間に大きな差がでた ものです。
ANO.3です。 後でみたところ、１行抜けてしまいました。 訂正というか、下の行を追加します。 ＞回線エラーなのでロールバックしようとすると、 ＞ロールバックする情報は自サーバで、ロールバックする先は、他サーバなのに ＞回線はつながらない といったことがおきないことを確認しておく必要があるはずです。 ＞・・・２フェーズコミットのサポートはしていたはずなので大丈夫だったと思いますけどね。
こんにちわ。 > ODBC設定画面にて接続テストを実施すると、テスト環境への接続は > 問題なく成功しました。 > しかしながら、Accessを起動すると本番環境を参照しにいって > しまいますので、Access内に作成した本番環境へのリンクを一旦 > 削除し、テスト環境へのリンクを作成し直す必要があると思いますが、 > 如何でしょうか？ であれば、Access のプログラムが上で設定したODBC 接続を使っていない のではないでしょうか？ この辺の作りは、Access のアプリを作成された方に確認して見て下さい。
こんにちわ。 > 制御ファイルを別ホストのrmanのカタログなり制御ファイルに登録する > 必要があるかと思うのですが、それはどうやってやればいいのでしょうか。 http://docs.oracle.com/cd/E16338_01/server.112/b … 制御ファイルには、上記マニュアルにある通りデータベース物理構造が 格納されていますが、ホスト名等情報は特に格納されていませんので、 マニュアルにある通りの方法で良いかと思います。 それとも、マニュアルにある通りの方法で操作して、何らかのエラーが出ている のであれば、エラーの内容を記載して下さい。 参考URL：http://docs.oracle.com/cd/E16338_01/server.112/b …
まず、Ｏｒｅｃｌｅの場合、ほとんどがカスタマイズ可能なものです。自動で割り当てられるのほとんですが、作成時に指定、システムから自動に割り当て（変更化、不可あり＜＝システムの設定を変更）、作成後システムを停止後設定変更等があります。そのうえで下記のように検索しましょう http://www.google.co.jp/search?hl=ja&q=%22DBA_SE … から http://docs.oracle.com/cd/E16338_01/server.112/b … （オンラインヘルプですね） http://www.oracle.co.jp/forum/thread.jspa?thread … （あなたと類似の質問です） 上記を理解したうえで http://www.google.co.jp/search?hl=ja&q=%22DBA_SE … で検索すると、 http://docs.oracle.com/cd/E16338_01/server.112/b … （オンラインヘルプ） そこで http://www.google.co.jp/search?hl=ja&q=%22DBA_SE … から http://otn.oracle.co.jp/forum/message.jspa?messa … などを見れば、何を意味しているかわかってくるかと。
3つある場合は、 SELECT * FROM ( SELECT 社員番号, 日付, 内容 FROM Aテーブル UNION SELECT 社員番号, 日付, 内容 FROM Bテーブル /*--------追加ここから--------*/ UNION SELECT 社員番号, 日付, 内容 FROM Cテーブル /*--------追加ここまで--------*/ ) ORDER BY 日付, 社員番号, 内容 ……という風にUNIONでつなげていけばOKです。
こんにちわ。 > ひょっとして、Oracleに設定すべきもの？ そうです。 ディレクトリオブジェクトです。 こんな感じで設定して下さい。 sqlplus "/ as sysdba" SQL> Create directory EXPORT_DIR as 'D:\TEST'; SQL> grant read on directory EXPORT_DIR to ユーザ名; SQL> grant write on directory EXPORT_DIR to ユーザ名; SQL> exit
要はある整数で割り切れるデータ、ということでいいですよね？ select データ from テーブル where mod(あるカラム, 整数) = 0; でいいのではないでしょうか。
No.1の補足にある >col1もcol2も同じく小さければという条件 の意味が理解できませんでした。 どのようなデータから、どのような結果を取得したいのかを 具体的に書いてもらえればアドバイスできるかもしれません。
SELECT * FROM 表 WHERE コード = ( SELECT コード FROM (SELECT コード, 番号, MAX(番号) OVER() max番号 FROM 表) WHERE 番号 = max番号 ); とかでしょうか。
こんにちわ。 > インストールしたいのですが、注意点はありますか？？ バージョンの低い方から先にInstall すれば後は余り気にしなくて 大丈夫な筈です。 > Oracle Client10g⇒Aシステム > Oracle Client11g⇒Bシステム 使うシステムに合わせて、ORACLE_HOME, PATH 環境変数を設定して やれば大丈夫な筈です。 http://www.oracle.com/jp/system-requirement/inte … でも上記のURL を確認して、接続対象のDB Version によっては どちらか一方のClient で大丈夫な場合もあります。 参考URL：http://www.oracle.com/jp/system-requirement/inte …
NOT EXISTSを使う方法もあります。 SELECT id, key, code, cls, add_date FROM table t1 WHERE NOT EXISTS ( SELECT * FROM table t2 WHERE t1.key = t2.key AND t1.code = t2.code AND t1.add_date < t2.add_date ); 分析関数を使うなら、 SELECT id, key, code, cls, add_date FROM ( SELECT id, key, code, cls, add_date, ROW_NUMBER() OVER(PARTITION BY key, code order by add_date desc) rnum FROM table ) WHERE rnum = 1; といった感じでしょうか。
-- #!/bin/sh while :; echo "exec dbms_mview.refresh('mview_name','c') -- マテビュー(mview_name)を完全リフレッシュ" sleep 60 done | sqlplus Userid/Passwd@sid exit 0; -- これで60秒ごとにコマンドがSQL*Plusに送られリフレッシュが実行されるはずです。
tableAに加え、sysdateを取得するために dualを加える。 日付形式・時刻加算等は適宜調整 select sysdate from dual;
こちらが参考になると思います。 http://www.shift-the-oracle.com/plsql/dbms_lock/ …
基本的に本で独学でした。 当時主に参考にしたのは ・標準ＳＱＬガイド（C.J.DATE　アスキー） ・ＳＱＬ９２／９９標準リファレンスブック（マーチン・グルーバー　ピアソン・エデュケーション ・プログラマのためのSQL（ジョー・セルコ）　SQL92・99準拠 ・SQLパズル ・Oracle8i&UNIXパフォーマンスチューニング ・ＯＲＡＣＬＥハイパフォーマンスチューニングＳＱＬ編 ・ORACLE9i ハイパフォーマンスチューニング―STATSPACK編（廃版） ・データベースパフォーマンスアップの教科書 基本原理編 あたりでしょうか。「SQLパズル」は「SQLでこんなことができるのか」と驚かせてくれましたが、一方で「何でも無理にSQLで処理するのは避ける」きっかけになりました。 パフォーマンス・チューニングは学ぶと奥が深いですね。OSやストレージ、ネットワークの総合的な知識が求められます。 今は開発ライセンスでOracleを自分のPCにインストールして試せますし、GUIで実行計画が見られるSQL Server の Express版もあります。 実際にSQLを結構簡単に試せるので本を読みながらSQLとその実行計画を確認したりすることをお勧めします。
・3秒毎 ・REDOログバッファが3分の1になった時 はいずれもトランザクションがコミットされているという保証はありません。 逆に言えば、コミットされた時点で「このトランザクションはコミットされた」という情報もログファイルに書き込んでいるのです。 (6)name列確認 結果⇒test01 のタイミングではコミットされていませんので、UNDOデータを読みに行って「test01」を返しています。
>Cannot find a J2SE SDK installed at path:C:\Program Files\Java\jre6. とあるようにJDKをインストールする必要がありますが、指定したパスはJREのようですよ。 >Sqldeveloperはデスクトップ上から起動させていますが、そもそも64bit版の場合はどこのフォルダへ 格納するのが正しくて 64bit版に関わらず、インストールガイドにあるように好きなフォルダでいいのではないでしょうか。 http://docs.oracle.com/cd/E38764_01/doc.32/b7021 …
TABLEとINDEXで同じSEGMENT_NAMEの場合もあるので、SEGMENT_NAMEではユニークにならないです。 たぶんSELECTする際にはSEGMENT_TYPEを指定するのでしょうから、これで重複する事はあまり無いと思いますが。 上記以外でも、パーティション表の場合、 各パーティションのSEGMENT_NAMEは同一になり、PARTITION_NAMEにそれぞれのパーティション名が入るようです。 当方の環境は10g XEなので、パーティション機能を利用することは出来ないのですが、 DBA_SEGMENTSを見てみたらSYSAUX表領域にそのようなデータがあることが確認できました。 参考になれば幸いです。
select テーブルＡ.カラム１, テーブルＡ.カラム２, max(テーブルＢ.カラム２) from テーブルＡ, テーブルＢ where テーブルＡ.カラム１ = テーブルＢ.カラム１ group by テーブルＡ.カラム１, テーブルＡ.カラム２;
プロシージャの実装方法ですよね？ こちらの例のように、配列で受け取って表関数を使用するようにしてはいかがでしょうか。 http://www.shift-the-oracle.com/plsql/table-func …
いちお～こちらのかんきょう（10gXE）でかくにんしてますけど～（笑） SQL> with data as ( 2 select '0001' code, '3-15' "date", 'A' status from dual union all 3 select '0001' , '3-15' , 'B' from dual union all 4 select '0001' , '3-15' , 'C' from dual union all 5 select '0002' , '3-15' , 'A' from dual union all 6 select '0002' , '3-15' , 'B' from dual union all 7 select '0003' , '3-15' , 'B' from dual union all 8 select '0004' , '3-15' , 'A' from dual union all 9 select '0005' , '3-15' , 'C' from dual 10 ) 11 select code from data 12 where "date" = '3-15' 13 group by code 14 having 15 0 < sum(case when status = 'A' then 1 else 0 end) 16 and 17 0 < sum(case when status = 'B' then 1 else 0 end); CODE -------- 0001 0002 SQL> with data as ( 2 select '0001' code, '3-15' "date", 'A' status from dual union all 3 select '0001' , '3-15' , 'B' from dual union all 4 select '0001' , '3-15' , 'C' from dual union all 5 select '0002' , '3-15' , 'A' from dual union all 6 select '0002' , '3-15' , 'B' from dual union all 7 select '0003' , '3-15' , 'B' from dual union all 8 select '0004' , '3-15' , 'A' from dual union all 9 select '0005' , '3-15' , 'C' from dual 10 ) 11 select code from data 12 where "date" = '3-15' 13 group by code 14 having 15 0 < sum(case when status = 'C' then 1 else 0 end) 16 and 17 0 = sum(case when status = 'C' then 0 else 1 end); CODE -------- 0005 1)でandをorに変えると別のSQLになっちゃいますよ。
CSEって32bitアプリケーションらしいですよ。 それに対して64bit版InstantClientを利用しようとすることが そもそも違う気がしますが、32bit版InstantClientだと ダメなんですか？
やりたいことそのままのSQLがこちらに載っています。 http://codezine.jp/article/detail/5154?p=2 参考になれば幸いです。
こんな事例がありますよ 参考URL：http://blog.goo.ne.jp/cxq02162/e/0e7dc86799b4a47 …
ANO1.ですが、頻度が同じものがあるとうまくいかないですね。 TF.freqだけでなく、TF.telでもorder byするとか。
え～と・・・時間ができたので（笑）SQL版をば -- keyの設定（SQL*Plusでの実行を想定） VARIABLE v_key NUMBER EXECUTE :v_key := 1 -- なんか…無理矢理だな～、DB設計が悪いんだよな（笑）版 SELECT MAX(CASE WHEN A.fno = 1 THEN B.fvalue END) AS field1, MAX(CASE WHEN A.fno = 2 THEN B.fvalue END) AS field2, MAX(CASE WHEN A.fno = 3 THEN B.fvalue END) AS field3 FROM ( SELECT 1 AS fno, field1 AS fname FROM テーブルA WHERE key = :v_key UNION ALL SELECT 2 AS fno, field2 AS fname FROM テーブルA WHERE key = :v_key UNION ALL SELECT 3 AS fno, field3 AS fname FROM テーブルA WHERE key = :v_key ) A, ( SELECT 'item1' AS fname, item1 AS fvalue FROM テーブルB WHERE key = :v_key UNION ALL SELECT 'item2' AS fname, item2 AS fvalue FROM テーブルB WHERE key = :v_key UNION ALL SELECT 'item3' AS fname, item3 AS fvalue FROM テーブルB WHERE key = :v_key UNION ALL SELECT 'item4' AS fname, item4 AS fvalue FROM テーブルB WHERE key = :v_key UNION ALL SELECT 'item5' AS fname, item5 AS fvalue FROM テーブルB WHERE key = :v_key ) B WHERE A.fname = B.fname / 「動的SQL」をオススメします。
とりあえずSPFILEを適当な名前にリネームしておいて、 PFILEから起動（startup）するという手は？
"EXECUTE IMMEDIATE"が余計です。 取りましょう。
ご参考 http://www.insight-tec.com/mailmagazine/ora3/vol …
Aさんがコミットして更新（この場合INSERT）を確定すれば Bさんからも見えるようになりますよ。 Aさんが確定しない限り、Aさんの更新はBさんからは見えません。 このカラクリがないと Aさんが「やっぱ、や～めた」ってロールバックした時 困るでしょ？ Bさんから見えてたら。 SQL*Plusで SET AUTOCOMMIT ON として自動コミット機能を有効にすれば Aさんが更新するたびに自動的（強制的）にコミットされますが、 Aさんは、その更新をロールバックすることができなくなります。 よ～～～く、考えて使うべき機能です。
こんにちわ。 > rmanコマンドに、時間を引数として渡したいのですが、渡し方がわかりません。 以下RMAN マニュアルの「例3-34 置換変数の指定」が参考になるかと。 http://docs.oracle.com/cd/E16338_01/backup.112/b … 参考URL：http://docs.oracle.com/cd/E16338_01/backup.112/b …
こんにちわ。 > 上記のテーブルにはIDという項目があるのですが、このテーブルで > 使用していないIDのみをSQLで抽出できないかと考えております。 ID にどのような書式でデータが格納されているか記載されていないので '00000001' から連番で入っていると仮定して 00001000までの間で使用 していない番号を求めるなら、こんな感じです。 Select to_char(level, 'FM00000000') as id from dual connect by level <= 1000 minus select id from XXXマスタ;
あまり考えてないので無理やり感でいっぱいですが・・・ select min(CD) + 1 from ( select CD from TB union select (101 - 1) from DUAL) where CD >= (101 - 1) and (CD + 1) not in ( select CD from TB union select (101 - 1) from DUAL ) ; とか。
動的SQLにするか、 SELECT A.* FROM testtable A WHERE A.testID = 123 AND (変数A = 0 or A.testName = 'aiueo'); なんてSQLにしておくとかでしょうか。
起動ユーザか環境変数の問題だと思われるので・・ （１）JP1が実行するユーザでの動作検証 （２）JP1が実行するときの環境変数 の2点を確認するとよいと思いますよ。 確認するまでもなく、接続エラーの時のエラーメッセージで判るような気もしますけどね。
セッショントレースで、捕まえられないのなら・・ オラクルがキャッシュしているＳＱＬを見る位しか思いつかないんですが、 データディクショナリのv$sqlやv$sqltextを見ると今実行中のＳＱＬを確認できます。 v$sessionと絡めれば、どのクライアントからリクエストなのかも切り分けできますよ。 ただし、バインド変数を使っていると、バインド変数名が表示された気がしますけどね。 SQL文を提示するといいんですが、今手元に環境がないので、ご自分で試行錯誤してみてください。 （昔、どっかの掲示板で書いてあげた思い出はあるんですが、見つけられませんでした）
#1 です。 ＞という事はPL/SQL内の静的SQLではバインド変数は使えないと言うことでしょうか？ ストアドプログラム（パッケージ/プロシージャ/ファンクション）内では動的以外には使えないと思います。 （SQL*PlusからストアドをEXECUTEする時の引数として使用する事は、もちろん可能ですが） 但し、私が例に書いた通り、無名PL/SQLブロック（DECLARE～BEGIN～END）内では静的にも使用可能です。 質問者様の試したサンプルで言えば。 CREATE OR REPLACE PROCEDURE TEST.TEST(v_Id IN VARCHAR2) IS v_name varchar2(20); BEGIN SELECT name INTO v_name FROM test WHERE id = v_Id; EXCEPTION WHEN OTHERS THEN RETURN; END; / これでコンパイルは通りますよね。（すいません、環境が無いので未検証です） 「これじゃ、v_Idはバインド変数にならないんじゃ？」と思うかもしれませんが、これバインド変数なんです。 （うーん、混乱しちゃいますかね？） SQLトレースを取るとわかるんですが、引数v_Idが '1' だろうが '2' だろうがトレースで解析されるSQLでは WHERE id = :b1 と言うバインド変数になるんですよ。 ＞このあたりが理解できていない部分です。 パフォーマンスチューニングで扱われるバインド変数と置換変数（リテラル）の差異を把握する事が、実はこの辺の理屈を理解する上での近道かもしれません。 OTNでパフォーマンス・チューニング・ガイドを落とすか、もしくはパフォチュー系の本を一冊読んでみるとよいかと思います。 もしJavaの経験がおありでしたら、"?"（プレースホルダ）を使ったSQLと、リテラル直指定の同じSQLをそれぞれ実行するJDBCプログラムを作って、SQLトレース（とtkprof）を取って較べてみると見えてくる物があると思います。 私自身、SQLトレースの中身を見るようになって、この辺の事が理解できるようになりましたから。 （SQLトレースに関しては前述のチューニング・ガイド等参照）
バージョンによって、名称が違うけど、8iだか9iの頃から機能的には用意されていますよ。 設定が面倒だけど、他社製DBMSを、DBLINKしたオラクルDBのごとく扱えます。 http://otndnld.oracle.co.jp/document/products/or … 参考URL：http://otndnld.oracle.co.jp/document/products/or …
バージョンによって違うかもしれませんが、 enterprise manager で表示できませんでしたっけ? 各オブジェクトのDDL が表示できたと思います。 でも、export して import すれば同じものができると思いますけどね。
※「当月」初日の求め方 「当日」を「月」で切り捨てる TRUNC(SYSDATE, 'MM') ※「前月」末日の求め方 「当月」初日の前日は「前月」末日 TRUNC(SYSDATE, 'MM') - 1 ※「前月」初日の求め方 「前月」末日を「月」で切り捨てる TRUNC(TRUNC(SYSDATE, 'MM') - 1, 'MM') ほかの方の回答と合わせれば、もう大丈夫でしょう。
>データベースとのセッションを切断してもサーバ上にhsodbcプロセスが解放されずに残る現象が発生しています。 というのは当然かと思います。 設定方法とかを見ていると、Listenerで定義していること等から、OracleサーバとListenerの間での接続なので、クライアントがセッションを切ろうが関係なく、 Oracleサーバが必要だと思っている限りは、クライアントがどうしようとつながっているから、 hsodbcは解放されないと思えます。 じゃあ、クライアントから接続を切る方法はないのかと調べてみました。 Oracle10gじゃないけど、11gR2では以下のような説明を見つけました。 （10gは調べてみてください。10gではまだ実装されていない機能かもしれません。） --引用-- アプリケーションで不要になった高コストの接続を切断するには、データベース・リンクを使用して確立されたリモート接続を終了することが有効です。・・・（中略）・・・ 次の文は、salesデータベース・リンクが指すリモート・データベース内のセッションを終了します。 ALTER SESSION CLOSE DATABASE LINK sales; 以上以下のサイトより。 http://docs.oracle.com/cd/E16338_01/server.112/b …
-- こういうことじゃないのかな？ select X1, min(X1) over (partition by substr(X1,1,1)) from zz where 条件
Accessとオラクルクライアント機能だけで処理可能だと思うのですが、あえて別に用意したいということですか？ もし、あえてフリーソフトを使いたいということであれば、その理由を挙げた上で質問されると、紹介できるものがあるかも知れません。
▼以下のSQLで無効化できます。 alter index ind_test invisible; alter index ind_test unusage; 有効化は以下です。 alter index ind_test rebuild; invisibleでオプティマイザから索引が見えなくなります。 unusageでDML発行時の索引の更新を抑止します。 有効化するときはテーブルと同期がとれていない状態なので 索引を再構築する必要があります。 ▼無効化している間のDMLで索引も更新されても問題ない場合はunusageのみでOKです。 alter index ind_test unusage; 有効化は以下です。 alter index ind_test usable; こちらの方が手軽ですが、大量データを入れる場合の性能改善はありません。 索引がない場合のオプティマイザの動作確認に使うくらいでしょうか。
tb_trn_aa_day_r の定義が分からないと、正しい回答は出来ないような気がします・・・ >全てNUMBER型のテーブル列で、NOT NULL制御を施しています。 とありますが、仮に tb_trn_aa_day_r が、テーブル%ROWTYPE だとしても各カラムの制約は引き継がれません。 そこを勘違いされているのかもしれません。 また、 >ちなみに、tb_trn_aa_day_r.tx_00～tx_23に「0」をセットしても とありますが、これはどのようにセットして確認したのでしょうか？ TO_NUMBER2ですが、strにどんな値が来たときにexceptionブロックに飛ぶことを期待していますか？ 空文字やNULLの場合は、exceptionは発生しないのでNULLが返りますよ。
んと、クライアントのバージョンだけInstant Client 10.2とかに あげるならばADO.NETもODP.NETも可能ですが、7のままだと確かに ADO.NETはダメなようですね。 そうすると当然同じテクノロジーを利用しているODP.NETもダメです。 クライアントとサーバのバージョン差異がでかすぎると怪しいですし。 OLEならいけるかも、らしいですよ。 ただ、速くなるかどうかは別のお話なので、どうしても変えたいなら COMでoo4oを使うのが限界じゃないでしょうか。
他の方の指摘通り、commentは予約語です。 で、予約語を項目名につけたときの指定は、""でくくればよかったはずです。 update table set "comment" = '新規' where code = '111'; で試してみてください。 ※予約語を項目名に使うことはお勧めしません。。。
行を一意に識別できる unique かつ not null な属性群が主キーですから， > id name sex date1 > 1 'A' '男' 20120101 > 1 'A' '男' 20120101 と，同じ内容の行が複数存在しているというのが事実であるなら，それは質問者が主キーだと思い込んでいるけれど主キー設定されていないということを示しています。 となると，失礼ながら，質問文に挙げられたデータ例の真偽も少々訝しく感じられてきてしまいます。確認のため差し支えなければ，次の３つのSQLをそれぞれ実行して表示された結果を，そのままCopy&Pasteで提示していただけるとありがたいです。 (1) select * from table; (2) select min(date1) from table where id = 1 and name = 'A' and sex='男'; (3) select * from table where date1 = (select min(date1) from table where id = 1 and name = 'A' and sex='男');
>（１）インポート についてですが、 impdpを使うなら、CONTENT=DATA_ONLY DATA_OPTIONS=SKIP_CONSTRAINT_ERRORS impなら、IGNORE=Y のパラメータを設定することで、うまくいくのではないでしょうか。
こんにちわ。 > oracle 11gでは、1990年以前は、サポートしていないのでしょうか？ Oracle のDate 型の基準日はユリウス日です。 正確には憶えていませんが、紀元前4000年頃からサポートされている筈です。
聞くところが間違っています。 eventパラメータの詳細はサポートを通じてしか知り得ない情報です。 なので、サポートに聞いてください。
dda167さん 蛇足や余計なお世話などではありませんね。 質問者さんの欲しい値を取るには、 select SYS_CONTEXT ('USERENV', 'SID') from dual; こちらですね・・・ ご指摘ありがとうございました。 また、関数名について回答していませんでした。 確実に使えるかは分からないですが、DBMS_UTILITY.FORMAT_CALL_STACKの戻り値のコールスタックの内容から取得できるかもしれません。 当方の環境（10g XE）で少し試してみました。 インデントしていないので見づらいですが・・ --ストアド名を返すファンクション create or replace function get_name return varchar2 is callstack varchar2(2000); currentname varchar2(2000); begin callstack := DBMS_UTILITY.FORMAT_CALL_STACK; /* コールスタックの最初には、このファンクション自身の情報が入っているため 2つ目のストアド名を取得する */ currentname := regexp_substr(callstack, 'procedure.+$|function.+$|package.+$',1,2,'im'); return currentname; end; / --上記ファンクションを呼ぶだけのファンクション create or replace function func_a return number is begin dbms_output.put_line(get_name); return 0; end; / --プロシージャ create or replace procedure proc_a is begin dbms_output.put_line(get_name); end; / --パッケージ create or replace package pack_a is procedure proc_a; end; / create or replace package body pack_a is procedure proc_a is begin dbms_output.put_line(get_name); end; end; / --無名ブロックで上記ファンクションらを実行 set serveroutput on declare w_num number; begin w_num := func_a; --function スキーマ名.FUNC_A proc_a; --procedure スキーマ名.PROC_A pack_a.proc_a; --package body スキーマ名.PACK_A end; / set serveoutput off 無名ブロックのコード内にある、コメントの内容が出力されました。 パッケージの場合は、プロシージャ名までは取得できないようです。 参考になれば幸いです。
>MAX(日付) OVER (PARTITION BY 出発, 到着, 年齢) AS 最新, >LAG(運賃) OVER (PARTITION BY 出発, 到着, 年齢 ORDER BY 日付) AS 前日 上記の記述で大丈夫だと思います。 Good luck!
こんにちわ。 > 何かもっと有効な方法がありますか？ サーバーA とサーバB が同じOS で、サーバーA のインスタンスを停止できるのであれば、 以下の手順で可能かと 1) サーバーA のインスタンスを停止 2) データファイル, 制御ファイル, Online Redo Log 等を全てサーバーB にコピー 3) 初期化パラメータファイル, tnsnames.ora, listener.ora 等の設定ファイルを サーバーB にコピーして、ホスト名等の環境依存の部分を修正 　 ※ 制御ファイルのパスがサーバーA とサーバーB で異なる場合はここで修正 4) サーバーA のインスタンス起動 5) Windows 環境であれば、oradim でサービス作成 6) 必要であれば、orapwd でパスワードファイル作成 7) サーバーB のインスタンスをmount で起動 8) サーバーA とサーバーB のデータファイル等のパスが違っている場合は 　 alter database rename file コマンドでファイル名を修正 9) サーバーB のインスタンスオープン 要は、Cold Backup のリストア＆リカバリと同じ事です。
きっといいと思います。 唯一気にした方がいい部分としては、日付項目は明示的に日付型に 変換した上で比較してあげましょう。 個人的には必要性がない場合にFROM句内にサブクエリを書くのが 見通しが悪くなって嫌いなので SELECT 　　　A.ENAME 　　　B.FCODE 　　　C.DATE FROM　AAA A, 　　　BBB B, 　　　CCC C WHERE A.FNAME = B.FNAME AND　 B.ID　　= C.ID AND　 C.DATE >= TO_DATE('2012/10/31', 'YYYY/MM/DD')
最初のFETCHをループの外ですればいいのでは。 open cur1; fetch cur1 into rec1; if cur1%notfound then close cur1; raise NO_DATA_FOUND; end if; loop --処理 fetch cur1 into rec1; exit when cur1%notfound; end loop; close cur1;
Merge文のサンプル。 http://www.shift-the-oracle.com/sql/merge.html Ｂテーブルの項目数や属性とＡテーブルの項目数や属性に依存関係はないです。 例えば、Ｂテーブルのvarchar2に、ＡテーブルのdateからTO_CHAR()を使ってデータを格納する とかもできますし、Ａテーブルに項目がないので固定値をＢテーブルに入れることもできます。 ＡテーブルとＣテーブルを結合した結果を副問い合わせの形で指定すれば、複数のテーブルから 格納することすらできます。 ただね、利用できない条件がOracle10gではあった。 （11gの環境では試していないので大丈夫かもしれませんが） 例 MERGE INTO Out_Table USING In_Table ON ( Out_Table.Key_ID = In_Table.Key_ID) ・・・ で、In_Tableのデータが以下のような場合、 In_Tableのプライマリキー:Key_ID,UpdateDate Key_ID,UpdateDate,・・・ A,2012/1/5 B,2012/1/5 C,2012/1/5 A,2012/2/4 D,2012/2/4 ・・・ Out_TableのKey_IDにAが存在していなくて、 1回のmerge命令で同じレコードに対してInsertとUpdateが同時に行われる場合、 エラーになってました。 べたの場合より早いかどうかは、少なくとも遅くはないとはいえますが、処理によっては同じになる かもしれませんので、早いとは言い切れません。 （でも、プログラムは見やすいのは確実。） ## ANO2の人が書いているXEとは、ユーティリティ類等の一部機能がなかったと思いますが、 ## 基本的にOracleの機能が実装されたソフト。 ## 利用条件にも制約はあったと思いますが、無償。 ## サイズが大きいのでダウンロードでタイムアウトしないかどうかはわかりませんし、 ## ダウンロード元が英語サイトなので、私は、ちょっと薦めるには躊躇しますが、 ## ダウンロードして使う環境を作っておけば、いろいろ試せるので便利なことは確か。 ## 私の使っているとあるノートＰＣでも動いていたりする。。。
あなたの想いとは違うかもしれないけど -- 運賃比較 SELECT 日付, 出発, 到着, 運賃, LAG(運賃) OVER (PARTITION BY 出発, 到着 ORDER BY 日付) AS 前日 FROM 運賃テーブル; -- 運賃変更 SELECT * FROM ( SELECT 日付, 出発, 到着, 運賃, LAG(運賃) OVER (PARTITION BY 出発, 到着 ORDER BY 日付) AS 前日 FROM 運賃テーブル ) WHERE 運賃 <> 前日;
LINECDの型は数値型なんですよね？ エラー発生時の、sSQLの中身はどうなっていますか？ 実行直前にブレークポイントを張って、値を確認するなり、 Debug.Printでイミディエイトウィンドウに出力するなりして確認してみて下さい。 "LINECD = OR"みたいに、=の右辺に値が無かったり、 "LINECD = '001 OR"みたいに、=の右辺に数値以外の文字があったりしませんか？ たぶん、Cells(3, 20)～Cells(20, 20)に空のセルがあったり、数値以外が入ったりしているんじゃないかと思います。
３点ほど。 １．emConfig.logのエラー内容を頂けませんでしょうか。 ２．「set ORACLE_UNQNAMEとありましたので、orclをsetしてみましたが、エラーメッセージが変わっただけで問題解決にいたりません。」とありますが、変わった後のエラーメッセージを教えてください。 ３．https:～は、VM上のWindowsのIEからやりましたよね？ すみませんが、よろしくお願いします。
TO_DATEは文字列をDATEに変換する関数。 DATEをDATEに変換してどうする？ また、大小比較するので、0時を跨ぐ場合(0時を跨ぐかどうかは、FROM>TOで判定可能)は 日付カラム >= 18:00 or 日付カラム < 02:00 にする必要あり わかりやすくすると、 (18:00 <= 日付カラム AND 日付カラム < 24:00) OR (00:00 <= 日付カラム AND 日付カラム < 02:00) だが、マイナスの時刻や24時を超えた時刻は存在しないから前述のとおり
No1 , No3です。 何度もスミマセン。 >ログ出力先をオラクル外へ変更する場合、オラクルを止なくても全く問題ないでしょうでしょうか？また一般論でかまいませんが、ｔｒｃログはオラクルhome外へ出力しておくのが良いのでしょうか？メンテナンス的にも楽なんですが。。 Oracleを停止しなくても変更可能です。 詳細はOracleのマニュアルの"ALTER SYSTEM"を参照してください。 次ですが、アラートログやトレースログ等は、容量が増えていく＝ディスクを圧迫していくので、システム系以外の別なディスクに格納するのが絶対です。 でないと、システムディスクがパンクし、最悪システムダウンになりかねませんので。 また、当然ですが、そういったログの中には機密情報等が含まれる可能性がありますので、一般ユーザに教えない・見えないようにしておく事が必須です。 余談ですが、私はシステムエンジニアとして、多数の顧客のOracleDB等の管理する仕事をしています。
Oracleのバージョンの記載が無いため、最新版という解釈で回答しますね。 質問１のポイントは、SQL文の実行計画が低コストで実施されるよう書いてあるかが大前提ですので、explain planや、SQLトレースを使用して、低コストになるようSQLを書きなおす、そしてテストを行い、再度トレースを採取し・・の繰り返しでチューニングを行うのがベターかと。 ちなみにですが、where句にインデックス項目が使用されていても、その項目が型変換されるよう書き方をされている場合インデックスが使用されなくなる可能性がありますのでご注意下さい。 質問２ですが、これは一概に「こうだ！」という説明は難しいと思います。（詳細な環境説明が無いため回答しにくいです） また、これはDB全般に言えることですが、１つのSQLをチューニングしていくのはなく、もっと多くなくくりでチューニングをして行ったほうが早い場合もあります。 それには、スタッツパック等のツールを使用します。 それには、CPUの負荷はどれくらいか、ディスクのIO待ちは発生していないか、キャッシュメモリに余裕があるか、バッファヒット率が高いか、一番遅いSQLは何か、ナドナド、様々な情報が出てくるツールですので、それを元に「システム自体のチューニング」を実施していったほうが良いと思います。 乱文乱筆失礼しました。 また、参考にならかったらスミマセン。
これでどうでしょうか？ select human.名前 from human where exists ( select 'Y' from kotoba_have where kotoba_have."human.id" = human.id and kotoba_have."kotoba.id" in (select id from kotoba where koboba.名前 in ('日本語','英語') ) ) and exists ( select 'Y' from kakutougi_have where kakutougi_have."human.id" = human.id and kakutougi_have."kakutougi.id" in (select id from kakutougi where kakutougi.名前 in ('柔道','空手') ) )
こんにちわ。 > (2)select * from user_sys_privs;でもselect等の権限の確認はできませんでした。 > (3)select * from user_tab_privs;では一件も出てきませんでした。 (2) がSYSTEM 権限 (DML やDDL を実行する権限) で (3) がOBJECT 権限 (特定の表やSEQUENCE に対する操作権限を他ユーザに付与) です。 > 上記3つは何か間違えているのでしょうか？ 恐らくは、ROLE (権限の塊り) 経由で権限が付与されているのではないでしょうか？ ユーザに付与されたROLE はuser_role_privs で確認できます。 また、ROLE に付与された権限を確認する場合は、dba_role_privs を確認して下さい。 詳細は、Oracle のリファレンス・マニュアルを確認して下さい。 http://docs.oracle.com/cd/E16338_01/server.112/b …
--たとえば…… select No from tmp group by No having 0 < sum(case when Flg = 'A' then 1 else 0 end) and 0 = sum(case when Flg = 'B' then 1 else 0 end);
そんなに難しくないですよ。 select TABLE1.X , (select count(*) from TABLE2 where TABLE2.Z = TABLE1.X) from TABLE1
SELECT CD, SUM(CASE WHEN FLG = 0 THEN KINGAKU ELSE 0 END) AS KINGAKU_0, SUM(CASE WHEN FLG = 1 THEN KINGAKU ELSE 0 END) AS KINGAKU_1 FROM 対象TBL GROUP BY CD;
> どのような参考書を使えば良いですか？ 大きめの書店のデータベースのコーナーに行けば入門書がたくさん有りますから、その中から気に入ったものを選べばよいでしょう。 一つ挙げるとすれば下記の書籍がお勧めです。 http://www.amazon.co.jp/dp/4798118818/ > 独学で出来るのでしょうか？ 基本的な知識を身に付けるという点では独学で出来ると思いますよ。 ただし、何事でもそうですが、知識だけではスキルが有るとは言えませんが。 > 20代後半から勉強しても出来るようになるものでしょうか？ 十分出来ますよ。 > 基礎をマスターするのにどれくらいの時間がかかりますか？ SQL92の範囲を一通り覚えるだけであれば、数十時間も見れば十分でしょう。 (もちろん使いこなすには、はるかに時間が掛かるでしょう) > このスキルを使って就職できるようになるまでどれくらい時間がかかりますか？ うーん、独学で勉強したというだけでは採用の決め手になる可能性は少ないでしょうね。業務実績が無いとさほど評価はされないでしょう。まあ、難関とされている資格を持っていれば少しは興味を持ってもらえるかも知れません。 就職については、学んだスキルが一助となるかも知れない、程度に考えておいたほうが良いでしょう。 > 資格などはありますか？ いろいろ有ります。各DBベンダーがそれぞれの製品向けの技術認定試験を行っているケースも多いです。 DB関係の資格の例を挙げてみます。 「データベーススペシャリスト試験」 http://www.jitec.ipa.go.jp/1_11seido/db.html 「オラクルマスター」 http://www.oracle.com/jp/education/certification …
１つ確認ですが、SQL-AとSQL-BとSQL-C、それぞれの処理速度を厳密に比較したいという事ですよね？ であれば、それぞれのSQLを実行する前に、DBを再起動する必要があると思います。 SQLを実行すれば、どうしてもデータはキャッシュにのってしまいます。 なので、DBを再起動して、完全にまっさらな状態にする必要があります。 「運用上それが出来ない」となれば、その環境と同じ環境を別に用意して、そこでテストを行うしか無いと思います。 ちなみに、No1の回答者さんが示したURLは、OracleBIを使用している場合の説明ですね。
こんにちわ。 http://docs.oracle.com/cd/E16338_01/appdev.112/b … 上記のマニュアルにある通り、PL/SQL でLONG RAW 変数の上限は32760 Byte になります。 なので、PL/SQL でLONG RAW のデータを扱うのは難しいと思います。 どうしてもと言う事であれば、TO_BLOB で一度BLOB 型に変換する事になるかと。
こんにちわ。 http://docs.oracle.com/cd/E16338_01/server.112/b … 上記のメッセージマニュアルによると、詳細はAlert Log, Trace Log を確認するように 記載されています。 ORA-53203 発生時のAlert Log, Trace Log には何が記録されていますか？ 52000番台って、Oracle Multimedia 関連のエラーのようですので、Oracle Multimedia を 使っている部分を確認してみてはどうでしょう？
>どちらのテーブルを左側 FROMの次の最初のテーブルが左側です。 尚、後で解析しやすいように、なるべくLEFT JOINを使い、どうしてもRIGHT　JIONが必要な場合のみRIGHT　JIONを使う事を推奨します。
遅くなりましたが、参考になれば。 EMは、それ単体でWEBサーバのような役割を持っています。（これがdbconsoleプロセス） なので、DBが停止していようが、リスナーが停止していようが、EMプロセス自体は使用できます。 また、DBプロセス、リスナープロセスは、EMプロセスとは完全に独立していますので、EMからそれらの状態を確認することが出来ます。 ただ、EMから、DBにアクセスする処理、リスナーにアクセスする処理を実行する際には、当然、それらのプロセスが起動していないとアクセス出来ません。 という意味です。
これって、単に金額が＋なら、１行ずつ出力して、 －なら、日付でgroup byして出力したいってこと？ SELECT　case when 金額>0 then ID else Null end,　日付,　sum(金額), case when 金額>0 then 伝票 else Null end,　・・・ FROM 　出納帳 group by case when 金額>0 then ID else Null end,　日付, case when 金額>0 then 伝票 else Null end,　・・・ order by 日付,case when 金額>0 then ID else Null end ででるはずですが（未検証ですが。）
>※Col1に重複がある場合、重複結果の1行目のレコードをData2に入れる の「1行目」の定義がハッキリ書かれていませんが、 例を見ると一番小さな値ということでいいのでしょうか。 それなら単純に、 UPDATE Table2 T2 SET Data2 = (SELECT MIN(T1.Col2) FROM Table1 T1 WHERE T1.Col1 = T2.Data1); でいいのではないでしょうか。 ただ、このSQLだとTable1にTable2のData1と一致するデータがない場合は NULLに更新されてしまうので気を付けてください。 もし、そういうデータが存在するのであれば UPDATE文のWHERE句にEXISTS条件を書くようにしてください。
--綺麗かどうかはともかく、かなり無理やり SELECT 日付, SUM(金額) AS 金額 FROM ( SELECT 日付, 金額, ROW_NUMBER() OVER (PARTITION BY 日付 ORDER BY 金額) AS id FROM 出納帳 ) GROUP BY 日付, CASE WHEN 金額 < 0 THEN 0 ELSE id END;
こんにちわ。 > 「integer external」と「decimal external」のどちらが良いのですか。 > 違い、使い方を教えてください。 interger とdecimal は全く意味が異なります。 http://docs.oracle.com/cd/E16338_01/server.112/b … 上記のマニュアル (Oracle ユーティリティ) に記載されている通り、 integer は整数型, decimal はパック10進となります。
例１）単純に縦に出力したいときに使う。 select 課名,'予算' as 予実,nvl(予算金額,0) from 課マスタ left outer join 予算マスタ on 課マスタ.課コード = 予算マスタ.課コード union select 課名,'実績' as 予実,nvl(実績金額,0) from 課マスタ left outer join 実績マスタ on 課マスタ.課コード = 予算マスタ.課コード order by 課名,予実 とすると、 1課 予算 10000 1課 実績 8500 2課 予算 20000 2課 実績 0 ・・・ とでる。 例２）例１と違ってどちらか一方にしかないデータをどちらも出したいときに使う。 select 課名,sum(予算金額), sum(実績金額) from ( select 課名,予算金額 as 予算金額,0 as 実績金額 from 予算マスタ union select 課名,0 as 予算金額,実績金額 as 実績金額 from 実績マスタ ) group by 課名 order by 課名 とすると 1課 10000 8500 2課 20000 0　　　←実績マスタなし 3課 0 8500　←予算マスタなし とでる。 例３）今年新規（過去３年間取引のなかった取引先も新規として扱う）で獲得した取引先の数 select count(*) from ( select distinct 取引先コード from 売上マスタ where 年度 = 2012 minus select distinct 取引先コード from 売上マスタ where 年度 = 2011 minus select distinct 取引先コード from 売上マスタ where 年度 = 2010 minus select distinct 取引先コード from 売上マスタ where 年度 = 2009 ) 例４）（これはどっちかというとシステム保守要件ですが。） 何らかの異常があったときに不整合データのチェックに使う select * from Ａマスタ_バックアップ minus select * from Ａマスタ Ａマスタ_バックアップにあってＡマスタにないものが出てくるので、 これらを調べたりする。 select * from Ａマスタ minus select * from Ａマスタ_バックアップ 逆のパターンのデータ。これも調べる。 とか。 例５）Orの代わりにunionを使うと便利なこともたまにある。 select * from table1 where Key1 between 1 and 3 union select * from table1 where Key1 between 6 and 7 union select * from table1 where Key1 between 12 and 18 select * from table1 where Key1 between 1 and 3 or Key1 between 6 and 7 or Key1 between 12 and 18 と書けばしまいなのだが、orを使うとインデックスを使ってくれないことがあるので、 orを使わないselectをunionしたほうが早いことがたまにある。 ★table1が、5000万件あるときなどあくまで例外的な使い方です。 ！！！普通は、orを使ったほうがいいです！！！ ## SQLはこんな感じだったと思うというレベルで書いています。（うまく動かないかも） ## とりあえず、過去に使った例ですぐに思いついたパターンを挙げてみました。
こんにちわ。 > 元々キャッシュに関してはデフォルトのまま（20）で試してますが、欠番は確認できていません。 > 以前のoracleのバージョンだと欠番されていたが、11gだと起きないものなのでしょうか？ Sequence から採番した時に、SGA (Shared Pool) にCache されるので、 事前に「select seq1.nextval from dual;」とか行って、アクセスしておかないと Cache されません。 11g (11.2.0.3) で最近確認しましたが、Shared Pool をFlush しただけで普通に 欠番が発生していました。 書き忘れましたが、RAC 環境だったりすると、1Node を再起動しても、もう1Node が 情報を持ってたりするらしく、欠番は発生しませんでした。
Oracleのバージョンが書いていないのですが、10g以降であればmodel句を使って、こんな感じでどうでしょうか。 SDATE、EDATEのデータ型が不明なのでDate型と言う前提です。 --この部分はテーブルを作るのが面倒なので疑似データを用意しているだけです with tableA as ( select 1 KEY1, 1 KEY2, 1 KEY3, date '2012-07-12' SDATE, date '2012-09-11' EDATE from DUAL union all select 2 KEY1, 2 KEY2, 2 KEY3, date '2012-06-01' SDATE, date '2012-07-31' EDATE from DUAL ) --実際のSQLはここから select key1,key2,key3,to_char(dt, 'yyyy/mm/dd') dt from tableA model partition by (KEY1,KEY2,KEY3) dimension by (0 as IND) measures(trunc(SDATE, 'mm') as DT, months_between(trunc(EDATE,'mm'), trunc(SDATE,'mm')) as TERM) rules(DT[for IND from 0 to TERM[0] increment 1] = add_months(DT[0], cv(IND)));
#1 です。 こちらこそ、補足に気が付きませんでした。 ＞１）ORACLE_SID は、XE に設定しております。 ＞２）DBサーバはローカルです。 うーん、私の予想は外れでしたね。 だとすると、ちょっとわかりかねます。 お役に立てず申し訳ありません。 後は、TWO_TASK環境変数に無効なTNS接続子が書かれているとか。。
＃１です。 うーん、不思議ですね。主キーはなんでしょう？ 検証できる環境が手元にないのですが、やはり＃１の最後に書いたように 　MINUS前後を別SQLにして、キー項目だけで考えてみては？ SUMをしないでT1.COL5を素直にSELECTさせてみるのが良いと思います。 実は何か別テーブルと結合してるとか？
ANo.1です。 説明の内容に誤解をまねく内容がありましたので訂正します。 >質問に書かれた【Ａテーブル】の中身のように、 というのはちょっと違っていて、 start with 品目番号 = 'B' となっているので、 【Ａテーブル】 品目番号,親品目番号 B,A B,C の２レコードを拾ってきてそれぞれについて正展開しています。 だから、 start with 親品目番号 = 'B' としたら、 B1,B の１個しか拾ってこないから目的が達成できたと思うけど・・・ （未確認。ひょっとしたらエラーになるかもしれません。 　申し訳ないですが今手持ちの試せる環境がないので。）
こんにちわ > SQLPLUS system/???@???でつながります。 > 別のクライアント機からは > EXP system/???@??? FILE= full120725.dmp LOG= exp_full120725.log FULL=y そうすると、SQL*Plus とexp で異なるtnsnames.ora を参照している可能性位しか 考えにくいですね。 sqlplus とexp は同じDos Prompt から実行しても、今までと同じ結果になるでしょうか？ Oracle Client は、TNS_ADMIN 環境変数 (Windows の場合はレジストリも) で参照する tnsnames.ora の指定できるようになっていますので、その辺を画くインした方が 良いかも知れません。 環境変数はマイコンピュータから、レジストリはHKEY_LOCAL_MACHINE\SOFTWARE\ORACLE の下から 探してみて下さい。
OpenJDKでインストールしようとすると文字化けを起こすことがあります。 OracleのJDKをいれてみてはどうでしょう。
>これは、plsqlの記述内に加えるのでしょうか 同じplsql内では同じユーザーですので、GRANT権限が無いのが普通ですので、GRAN権限の有るユーザーで接続してGRANTします。 ＞それとも一度これを実行（コンパイル！？）すれば良いのでしょうか。 DROP　TABLEしない限り、一回実行しておけば良いので、通常はCREATE　TABLE直後にGRANTを実行しておきます。
副問合せにunionを使っている事自体に問題はないですね。 「こんな感じ」ではなくて、実際にxx1とxx2しかないシンプルなテーブルを3つ用意して試してみましたか？
こんにちわ。 > 動的SQLでは無い方法でそのような事が可能でしょうか？ decode を使えば可能かもです。 例えば、v1, v2, v3 と言う数値型変数にそれぞれ列B, 列C, 列Dに 対する検索値が格納されていて、値が-1 だった場合に、検索条件を 無効化する場合、以下のようなSQL で実現できます。 select * from tablea 　where a=1 and b=decode(v1, -1, b, v1) and 　　c=decode(v2, -1, c, v2) and 　　d=decode(v3, -1, d, v3); こうすると、例えばv1変数に-1 が設定されている時の検索条件は 「b=b」となり常に真となるので、実質検索条件を指定していない 場合と同じ事になります。
(3) はい，version名です。11gでよいでしょう。 (1) Bが先でAが後でもかまわないでしょう。 ただおそらくほぼすべての受験者が， 基本的な内容であるAのオンライン試験（13,600円＋税）を先に合格した後， Bの会場試験（21,200円＋税）を受験しているはずです。 (2) 1Z0-017（ 90分，40問，合格ライン70%）の出題の方が市販問題集の内容に似ているという口コミもありますけれど， 新刊の市販問題集はほとんど1Z0-051（120分，55問，合格ライン60%）対応をうたっているんじゃないでしょうか。 1Z0-051の受験でいいんじゃないかと思いますけれど。 (5) Amazon.co.jpのカスタマーレビューを参考にしてください。 (4) 転職でしたら，ペーパードライバーじゃダメでしょう。 実務経験はなくても，実際にOracleDBを操作できる実機経験をアピールできないと評価されないと思います。実機でOracleDBを扱うことができるなら，Bronzeでも評価されるんじゃないですか。 Oracle 11gのトライアル版を収録した参考書も出版されていますし， http://www.amazon.co.jp/dp/4797359293/ 無償版の XE(Express Edition) を試してみてもよいでしょう。 http://www.oracle.com/technetwork/database/expre …
こんにちわ。 > 「ORA-12514: TNS: リスナーは接続記述子でリクエストされた > サービスを現在認識していません」 > どのようにすれば復旧・接続できるようになるのでしょうか？ Server 側のListener/Instance とClient 側の設定が合っていない 可能性が高いです。 恐らく以前は接続できていたと思うのですが、その時から サーバのホスト名, IP Address 等、network の構成は変更しました でしょうか？ 以下の情報を確認して見て下さい。 ※ サーバ側 1) lsnrctl status <Listener 名> の結果 2) service_names, local_listener, instance_name, db_name, db_domain 初期化パラメータの設定内容 3) listener.ora, sqlnet.ora の内容 4) /etc/hosts の内容 ※ クライアント側 1) sqlnet.ora, tnsnames.ora の内容 2) 接続失敗している接続文字列の内容 3) /etc/hosts の内容
「フィールド００１」は「varchar2(2)」ですか、正確な列定義を提示してください。 そうでないと回答も曖昧になってしまいます。 後、 SELECT ':' || フィールド００１ || ':', COUNT(*) FROM テーブルA WHERE REPACE( TRIM( フィールド００１ ), '0', '' ) = '9' GROUP BY ':' || フィールド００１ || ':' を実行してみてください。「90」なども対象になってしまいますが、とりあえず現状がどうなっているのかわかると思います。
## 余計なお世話ですけど。。。 （前）SELECT DISTINCT a.ID1, a.NAME1 FROM TABLE1 a, TABLE2 b WHERE a.ID1 = b.ID2 （後）SELECT a.ID1, a.NAME1 FROM TABLE1 a 　　　WHERE EXISTS ( SELECT 'X' FROM TABLE2 b WHERE a.ID1 = b.ID2) のほうも、一緒の結果になるとは限りませんが。。。 例）TABLE2はTABLE1のID1がすべてID2にあるとして。 a.ID1, a.NAME1 1 あ 2 い 2 い 3 う というデータがあれば、 （前） 1 あ 2 い 3 う （後） 1 あ 2 い 2 い 3 う となりますが。 ・・・ID1が単独でプライマリキー、またはユニークインデックスとして設定されている という前提がないと同じ結果にはならないです。
こんにちわ。 > SUB1.sql、SUB2.sqlで失敗していても・・・ MAIN.sql の最初で、以下のコマンドを実行してみて下さい。 ---------------------------------------------------- WHENEVER SQLERROR EXIT FAILURE ROLLBACK ---------------------------------------------------- > MAIN内のそれぞれのsqlの実行結果ログを取得 MAIN.sql を以下のようにしてみて下さい。 sub.log に追加でログを取得していきます。 ---------------------------------------------------- set echo on spool sub.log append @&1 @&2 commit; spool off quit ----------------------------------------------------
こんにちわ。 > 桁数を増やすとか、・・・ v$sysstat をSelect する前に、以下の何れかを実行して下さい。 SQL> col value format 999999999999999 又は、 SQL> set numwidth 15
以下のコマンドを実行すれば確認できます。 "$ORACLE_HOME/OPatch/opatch" lsinvetory
> この時、実行計画が > HASH JOIN RIGHT OUTER > TABLE ACCESS FULL TABLE-B > > のように出ましたが、どのように解釈すれば良いのでしょう？ AAとBBをハッシュ外部結合した。 > TABLE-Bは件数が少ないのでACCESS FULLでも問題ないでしょうか？ たかが30件ですからね。。 > たとえば、この場合のより適切な実行計画ってありますか？ 「*」の部分が本当に「*」で、AAの件数（条件色々で絞り込んだ結果）が 極めて大きいなら、他の実行計画は考えにくいです。 # TABLE-Aの件数は非常に多く（例100万)、条件は複雑です。 従って、この部分をなるべく高速に返せるようにすることが重要です。
こんにちわ。 > 何回のFullScanの結果として読み込んだ行数が > 「table scan rows gotten 151275758」で、 > Full Scanの総数 ＝ table scans (short tables) + > table scans (long tabels)と考えて良いのでしょうか？ Oracle のマニュアル (9.2 リファレンス) を見るとその解釈で良さそうです。 以下のURL で、9.2 リファレンスが参照できます。 http://otndnld.oracle.co.jp/document/oracle9i/92 … 参考URL：http://otndnld.oracle.co.jp/document/oracle9i/92 …
こんにちわ > そのSQLでどの程度PGAメモリを消費するか・・・ http://docs.oracle.com/cd/E16338_01/server.112/b … 上記、管理者ガイド (11.2) のメモリ管理に以下のように記載されています。 > PGAメモリーの使用統計を提供する動的なパフォーマンス・ビューが > 用意されています。これらの統計のほとんどは、PGA_AGGREGATE_TARGETが > 設定されると使用可能になります。 > 作業領域メモリーの割当ておよび使用に関する統計は、次の動的 > パフォーマンス・ビューで表示できます。 > V$SYSSTAT > V$SESSTAT > V$PGASTAT > V$SQL_WORKAREA > V$SQL_WORKAREA_ACTIVE > V$PROCESSビューの次の3つの列では、Oracle Databaseプロセスによって > 割り当てられ使用されているPGAメモリーがレポートされます。 > PGA_USED_MEM > PGA_ALLOCATED_MEM > PGA_MAX_MEM SQL と紐付けるなら、V$SQL_WORKAREA かV$SQL_WORKAREA_ACTIVE を使用 する事となります。 ※ V$SQL_WORKAREA_ACTIVE の場合、現在アクティブなものしか出力 　 されませんが。 現在のPGA の使用量であれば、V$PROCESS かV$SESSTAT を集計するのが 簡単だと思います。 ※ V$SESSTAT で、統計名 "session pga memory" と "session pga memory max" 　 でセッション毎のPGA メモリ量が確認できます。 　 こちらは、PGA_AGGREGATE_TARGET とは関係なく取得できます。 > PGAメモリを消費しやすいSQLとは・・・ http://docs.oracle.com/cd/E16338_01/server.112/b … 上記チューニングガイドには、以下のように記載されています。 > 複雑な問合せ(たとえば、意思決定支援の問合せ)の場合、ランタイム領域の > 大部分が、次のようなメモリー集約型演算子で割り当てられた作業領域に > 使用されます。 > ・ソート・ベース演算子(たとえば、ORDER BY、GROUP BY、ROLLUP > およびウィンドウ・ファンクション) > ・ハッシュ結合 > ・ビットマップ・マージ > ・ビットマップ作成 > ・一括ロード操作で使用される書込みバッファ それと、In-Memory Parallel Query を使っていなければ Parallel Query の場合もPGA に直接読込みます。
OEMは恐らくAWRという機能を利用して負荷の高いSQLの情報を出力しているのでしょう。 AWRは負荷が高いSQLの情報のみを取得しているようなので、負荷が少ないSQLの実行計画を 見るにはSQLトレースを取得するしかないように思います。 SQLトレースは非常に負荷がかかる処理なので、AWRで負荷少ないSQLの情報まで取得すると 普通にシステムが動かなくなってしまいますからね。。
ん？ > CREATE OR REPLACE PROCEDURE A.P930 > ( > varCD IN VARCHAR2, > varDate IN VARCHAR2 > ) は procedure (function じゃない)だし、out の引数もないから、 > Set myRs = .Execute ではなにもかえってこないんではないですか?? function の戻り値を ADO で得るためには、なんかくふうが要るようだ。 http://homepage2.nifty.com/sak/w_sak3/doc/sysbrd … out で戻すなら、 http://www.progress-japan.co.jp/support/SupportL … ADODB.Command.Execute の戻り値は Command が SQL であるときのレコードセットじゃないかな?? ADOのしがらみがめんどうならば、ストアードで、ワークテーブルに書き込んで、 execute の戻り値をとらずに、ワークテーブルを直接見に行くかしたらいいんじゃないですかね? 　 　 　
こんにちは。 エラーの内容を詳しく知りたいです。 >where q2.新新品番(+) = A.品番」は、 >間違いでしょうか。 上記の結合条件であってるはずです。
まず、 >トリガーを使って、作業用のテーブル作ってやればいい、 >みたいなことを言われたのですが、 は、TB4を作る。 CREATE TABLE TB4 ( id number, data1 varchar2(200) data2 number(18,3) data3 number(18,3) ); 1 aaa 0.1 0.2 2 bbb 0.3 0.4 TB3のInsert/Update/Deleteトリガーを作って、 TB4を更新する って趣旨でしょうね。 それはさておき。 >ORA-01722:数値が無効です。 を防ぎたいなら、CAST(の後にNVLを入れるだけで対応はできます。 AND CAST(NVL(・・・,0) AS DECIMAL(2,1)) といった感じですね。（Nullなら0に置き換える処理です。） でも、本当にそれでいいの？ ## ま、その前に、ANo1/2をみていて、要件を小出しにするのはやめましょう～。 ## と言いたいところですが。 (1)逆じゃないの？と思う点 TB2.keynoが100であり、TB3.dataのサイズ1が0.1のデータのTB1.nameを取りだす これはいいのですが、 TB2.keynoが100であり、TB3.dataのサイズ1が0.15のデータのTB1.nameを取りだす とかしたいのでは？ （つまり、問い合わせ時の値が0.1と0.2の間ならすべての場合で、 　TB3の1を対象にしたいということでは？） (2)idって検索条件につかっていいの？ INNER JOIN TB3 ON TB3.id=TB1.id という検索条件でいいのかな？ もしそうなら、TB1とTB3に分けている理由が良く分からない。 TB1の中にDATAを作ればしまいのように思えるため。 （ま、あえて分ける理由が思いつかないわけではないのですが。） TB1の 1 sample1 に対して、TB3の複数のレコードが対応するんじゃないのかな？ という疑問。 (3)TB3のdata char(200)の中身は？ 本当に、 1 aaa,0.1,0.2 という形で１個しかないの？ 1 aaa,0.1,0.2,aab,0.3,0.5,aac,0.6,0.9 とか複数あるのでは？ と疑問に思ってしまいます。 ## 大丈夫です。というならそれでいいけど、要求事項の小出しはやめてくださいね。
失礼しました、「T_在庫日次」のテーブル名の右です。（質問の１行目が２行で表示されていたので２行目のと書いてしまいました）
ディスクI/O が遅いとかそんなことはないでしょうか？ vmstat, iostat, sar などでexp 中に出力先のディスク・ボリュームの稼働状況 に問題がないかチェックしてみてください。 > 作業中 DB アクセスは本 exp のみで他の作業は行っていませんでした。 No.1 の方が指摘されていますが、それは考えにくいですね。 log file sync が頻繁しているということはトランザクションが存在していることを 意味しているからです。 業務をやっていなかったということであれば、統計情報取得などのバックグラウンド ・ジョブやバッチ処理の実行時間と被っていなかったか確認が必要です。 > インスタンスの設定を no archive log モードに変更する必要が有ったのでしょ > うか？ ありません。それよりも、リスナー経由にしなければならない理由があったので しょうか？　ローカル接続の方が fork だけで済むのでオーバーヘッドが少ない でしょう。 exp system/password file=instance_def.dmp log=instance_def.log full=y \ compress=n rows=n direct=y
こんにちわ。 > 階層化が無い分、速いのでしょうか？ この程度であれば、あまり違いは無いと思います。 違うのは、実行計画をたてるとこだけですし。
こんにちわ。 先の記載にtypo があったので訂正します。 誤:Procedure : 'ROCEDURE' 正:Procedure : 'PROCEDURE'
＜＃１の２回目＞ ＜VIEW（KOKYAKU_V01）の作成＞ 　　日付の取得でそれそれを抽出 CREATE OR REPLACE VIEW AA_KOKYAKU_V01 (UKETUKE_DATE01,UKETUKE_DATE02,UKETUKE_DATE03,KOKYAKU_ID,KOKYAKU_NAME_KANA, KOKYAKU_NAME,KOKYAKU_ADD) AS SELECT AA_GET_DATE(KOKYAKU_ID,1) UKETUKE_DATE01, AA_GET_DATE(KOKYAKU_ID,2) UKETUKE_DATE02, AA_GET_DATE(KOKYAKU_ID,3) UKETUKE_DATE03, KOKYAKU_ID, KOKYAKU_NAME_KANA, KOKYAKU_NAME, KOKYAKU_ADD FROM AA_KOKYAKU_V order by KOKYAKU_ID,UKETUKE_DATE,UKETUKE_TIME / ＜データ＞ 2012/05/152012/05/142012/05/101000000アオキAOKI神奈川県横浜市都筑区１－１－１ 2012/05/152012/05/142012/05/101000000アオキAOKI神奈川県横浜市都筑区１－１－１ 2012/05/152012/05/142012/05/101000000アオキAOKI神奈川県横浜市都筑区１－１－１ 2012/05/152012/05/142012/05/101000000アオキAOKI神奈川県横浜市都筑区１－１－１ 2012/05/132012/05/102012/05/011000001オリヒカORIHICA神奈川県横浜市都筑区１－１－２ 2012/05/132012/05/102012/05/011000001オリヒカORIHICA神奈川県横浜市都筑区１－１－２ 2012/05/132012/05/102012/05/011000001オリヒカORIHICA神奈川県横浜市都筑区１－１－２ 2012/05/132012/05/102012/05/011000001オリヒカORIHICA神奈川県横浜市都筑区１－１－２ ＜VIEW（KOKYAKU_V02）の作成＞ 　　＜VIEW（KOKYAKU_V01）＞をDISTINCTする。 CREATE OR REPLACE VIEW AA_KOKYAKU_V02 (KOKYAKU_ID,UKETUKE_DATE01,UKETUKE_DATE02,UKETUKE_DATE03,KOKYAKU_NAME_KANA, KOKYAKU_NAME,KOKYAKU_ADD) AS SELECT distinct(KOKYAKU_ID), UKETUKE_DATE01, UKETUKE_DATE02, UKETUKE_DATE03, KOKYAKU_NAME_KANA, KOKYAKU_NAME, KOKYAKU_ADD FROM AA_KOKYAKU_V01 order by KOKYAKU_ID / ＜データ＞ 10000002012/05/152012/05/142012/05/10アオキAOKI神奈川県横浜市都筑区１－１－１ 10000012012/05/132012/05/102012/05/01オリヒカORIHICA神奈川県横浜市都筑区１－１－２ ＜VIEW（KOKYAKU_V02）＞の情報から。 SELECT UKETUKE_DATE01, UKETUKE_DATE02, UKETUKE_DATE03, KOKYAKU_ID, KOKYAKU_NAME_KANA, KOKYAKU_NAME, KOKYAKU_ADD FROM AA_KOKYAKU_V02 order by KOKYAKU_ID: 2012/05/152012/05/142012/05/101000000アオキAOKI神奈川県横浜市都筑区１－１－１ 2012/05/132012/05/102012/05/011000001オリヒカORIHICA神奈川県横浜市都筑区１－１－２ になります。 受付内容についてはそれぞれの日付においてデータがあるので、いろいろ考えてひとつにまとめればいいかと思います。 長くなりましたが、大体は実現可能です。
こんにちわ。 > やはりSQL１文ではチョット無理なようですね。 SQL 文1つでは無理ですが、ちょっと工夫すればこんな感じでできます。 SQL> select owner, count(*) from dba_tables where tablespace_name = 'SYSAUX' group by owner; OWNER COUNT(*) --------------- ---------- SYSTEM 24 DBSNMP 16 APPQOSSYS 4 SYS 297 上記のような状態で以下のようなスクリプト (count.sql) を用意します。 [count.sql] -------------------------------------------------------------------------------- set pages 1000 set lines 180 set echo off set feedback off set heading off set verify off set termout off set trimspool on col sql_txt format a170 col cmd format a100 spool count1.sql select 'set pages 100' as cmd, 'set lines 100' as cmd, 'set echo off' as cmd, 'set feedback off' as cmd, 'col owner format a15' as cmd, 'col table_name format a30' as cmd, 'col tablespace_name format a15' as cmd, 'col cnt format 99999999' as cmd from dual; select 'select ' || chr(39) || owner || chr(39) || ' as owner, ' || chr(39) || table_name || chr(39) || ' as table_name, ' || chr(39) || tablespace_name || chr(39) || ' as tablespace_name, ' || 'count(*) as cnt from ' || owner || '.' || table_name || ';' as sql_txt from dba_tables where owner = user and tablespace_name = upper('&1') order by table_name; select 'exit' as cmd from dual; spool off set heading on set termout on @count1.sql exit -------------------------------------------------------------------------------- これを、以下のように実行してやると SYSTEM スキーマ (ログイン名) が 所有者でSYSAUX 表領域 (パラメータ) にあるテーブルの一覧が取得できます。 $ sqlplus system/manager @count.sql sysaux 最終的に実行しているSQL は、count1.sql (count.sql で作成しています) を 確認して下さい。
「インストール可能でしょうか？」と聞く前に、製品のドキュメントをまず読むべきでは？ すでに回答して頂いているリンク先にもあるとおり、 The following items were certified after the 10.2.0.1 release: ・Windows 7 Oracle Database and Oracle Database Client 10g Release 2 (10.2.0.5 or later) are supported on Windows 7 (32-bit and x64). ですね。 ＞このような問題が出る場合、どのような可能性があるのでしょうか。 oracle製品に限らず、動作保証環境の確認は必須です。保証環境外で不具合が起きたとしても、メーカーはサポートしてくれませんよ。
こんにちわ。 > Oracle Client が入っているサーバのIPアドレスは変更しても問題ないでしょうか？ これは全く問題ないです。 Client のIP Address 変更だけであれば、特に問題は無いです。 念のため。hosts, lmhost 等を確認して下さい。 サーバ側で、TCP.INVITED_NODES 等でClient のIP Address を設定している 場合は、別途変更が必要です。 > Oracle Databaseが入っているサーバのIPアドレスは変更できない認識・・・ そんな事はありません。 Grid Infrastructure 使ってなければ、hosts, DNS, tnsnames.ora, listener.ora 位の変更で済みます。 先週、RAC 環境でDB Server のIP Address 変更を実施しました。 SCAN IP とか、local_listener の変更が必要でしたが、特に問題はありませんでしたょ。
私の勤務する会社で、協力会社に業務依頼する場合、ＤＢ環境も、相手先に贈るのですが、以下の方法で行っています。 １）本番用ユーザー全体をＥｘｐｏｒｔします。 ２）テストユーザーＡを作成し、Ｅｘｐｏｒｔしたデータを、ユーザーＡにインポートします。 ３）データ件数を絞りたいテーブルは、不要なレコードを削除します。 ４）ダミーデータに置換したい場合は、Ｕｐｄａｔｅ文にて個別にダミーデータに置き換えます。 ５）加工が終わったユーザーＡをＥｘｐｏｒｔします。 ５）でＥｘｐｏｒｔしたデータを協力外医者に送付します。 ダミーデータに置き換えるべきフィールドが何か、テーブル定義書などで事前に入手できませんか？ お客様での作業時間を減らすことができます。 テストユーザーＡを作成することで、本番ユーザーに影響する時間の短縮になります。
> 最新の情報がわかりません。 公式サイトを参照。 http://www.oracle.com/jp/education/certification …
１． (X, Y, Z) で複合索引を張るのであれば、(X, Y, Z) でも、(Z, Y, X) でも変わらないでしょう。 単一列の索引の場合は X を使用するのが最も効率が良いです。 ヒント句を指定しても良いですが、統計情報をちゃんと取得しておけば、 X, Y, Z の各列に索引が張られていても X が使用されるはずです。 ２． 以下の２つは同じです。 ・パターン１ 　　where X <> 'Z' ・パターン２ 　　where X > 'Z' or X < 'Z' ３． 書きなおす必要はありません。 Xの結果セット（レコード数）がYと比べて小さい場合は、 Y.DATE2列に索引がない場合は張ることを検討してください。 外部結合でNL結合される場合は、(+)が付いていない方が駆動表、 付いている方が内部表になります。
こんにちわ。 > SQL-PLUSも動くようになりました。 > しかし、PHPとの連動は未だに出来ません。 SQL*Plus が動いているなら、Oracle Client の設定は大丈夫な筈です。 恐らくは、PHP の設定に漏れがある可能性が高いです。 Oracle のバージョン, PHP の設定手順も分からないので何とも 言えませんが、この変が参考になるかと思います。 http://board.phpbuilder.com/board/showthread.php …
こんにちわ。 > 参照元テーブルのカラムをNOT NULL属性に変更した場合・・・ NOT NULL にする事で、元テーブルに格納できるデータの制限が 厳しくなる訳なので、問題は無いように思います。 11.2.0.3 環境で軽くやってみましたが、特に問題はありませんでした。 ただ、実際にMaterialized View で指定しているクエリや、 リフレッシュタイプ, Oracle のバージョンによって内部動作は 変更になる可能性がありますので、実際の環境で似たような Materialized View を作って確認する事をお奨めします。 ※因みにこちらで確認したMaterialized View は高速リフレッシュです。
> TNS_ADMIN 環境変数とは マイコンピュータのプロパティから、詳細設定 -> 環境変数 -> システム環境変数新規 で環境変数の追加ができます。 環境変数を設定したら、念のためPC を再起動してから確認してみて下さい。
32bit版の例ですが http://d.hatena.ne.jp/ramen26/20100927/1285578442 ダウンロードするにはOracleのアカウントが必要です。英語で取っつきにくいかもしれませんがそこは我慢して登録してください。 Oracleはメモリをかなり食います。デスクトップアプリと共存させるなら64bit環境でOracleに4～8GB程度割り当てるのが現実的かもしれません。
connect_by_root演算子が使えるのでは？ （例） select connect_by_root ename as rootname from emp where ename = 'SCOTT' start with mgr is null connect by prior empno = mgr ; 詳しくはgoogle先生に聞いてください。
確証はありませんが、特殊記号などを含む名前には 引用符とか、カッコなどで囲んで、予約語や特定の 機能を示すものではないことを知らせます。 よって、SELECT "番号","メーカー名"・・・ とすべき ではないでしょうか。 PostgreSQLでは英大文字でも引用符が要ります。
こんにちわ。 > 名前解決がうまくいってない気がしますが、どこを修正すれば良いでしょうか、、、 TNS_ADMIN 環境変数に、tnsnames.ora が置いてあるフォルダを指定してみては いかがでしょう？
パッと思いつくのでは以下です。 ・全く同等のSQLであれば、SQL解析時間 ・結果がキャッシュされるため。 ・実行計画の出力結果を生成する時間 キャッシュがクリアされるようにした上で再度実行したほうがいいでしょうね。 （あるのかどうかわかりませんがデータベースかインスタンスの再起動してみるといいかもしれません） いずれにしても複数回(10回程度)実行して、平均値を取ったほうがいいでしょう。 一番大きい値と一番小さい値を除いた平均や 一番最初と一番最後を除いた平均も 用意しておくといいでしょうね。 最大値、最小値もそれはそれで評価します。
「Application Expressを用いて作成したユーザでSqlPlusからログインできない」 ということなのでしたら、作成したユーザーにconnect権限を持たせてありますか？
環境が今ひとつ分かりませんが、SQL*PLUSでその「ABC」というユーザーは接続できるのでしょうか。
こんにちわ。 1点訂正です。 LONG 型データを含まないテーブルの表領域移動をするコマンドに 間違えがありました。 以下のように訂正します。 誤:SQL> Alter table テーブル名 move <新表領域名>; 正:SQL> Alter table テーブル名 move tablespace <新表領域名>;
こんにちわ。 > SQL*PLUSで CONNECT　AA/AA＠ORCL > とやっても、ORA-12154エラーがでてしまうのですが・・・。 そうすると、SQL*Plus がtnsnames.ora をきちんとみつけられて いないようですね。 tnsping ORCL を実行して見てください。 --> tnsnames.ora をどこから探しているか分かると思います。 TNS_ADMIN 環境変数にtnsnames.ora が置いてあるディレクトリを 指定してから再度確認して見てください。
ODBCから先の接続はあくまでオラクルなので、オラクルのプロトコルで通信されます。 これは、ローカル、リモート関係ありません。Ｎｏ１さんと同じく、設定や、設置操作、エラー内容、呼び出し方、一切記載がないので、、答えようがありません。 まあ、いえるとしたら、設置、設定から見直したらいかかでしょうか？　よくあるのが、名前解決や、ポート制御等（開放も含め）、設置ミスや、設定ミス、勘違いですね。 エラー内容ぐらいは、記載しましょう（普通、見えているか、見えてないかぐらいから検証するよね？）。
こんにちわ。 > 今までは他のWindows7のＰＣ複数にインストールして、 > 正常に動いているので大丈夫かと思ったのですが、 > なんかしらの支障があるのでしょうか？ 正式にWIndows7 に対応したのが、Oracle10.2.0.5 と言う事になります。 ですので、10.2.0.4 以下のSoftware をWindows7 で使用した場合、 正常に動作しない可能性があります。 US OTN に行くと、Windows7 用のOracle10.2.0.3/Oracle10.2.0.4 が公開 されていますが、Windows7 で使う場合にはPSR 10.2.0.5 以上をInstall するように記載があります。 http://www.oracle.com/technetwork/database/enter … 参考URL：http://www.oracle.com/technetwork/database/enter …
RAID1+0（ミラーリング＋ストライピング）でも、構成が1つならパーティションを分けても同一のRAIDにアクセスに行くので物理アクセスは離しません。 パフォーマンス的にはパーティションを分ける意味はありません。
変数としてINに指定しているnochg_beforeあくまで一つの値です。 意図しているような、c1でもc2でもc3でもない、にはならず "c1","c2","c3"ではない、になってしまいます。 そういう意味でIN検索に変数を渡しても意図したような動きにすることは出来ません。 似たような事をするには、一時テーブルを作成する方法、SQLを動的に作成する方法などがありますが、本当にそこまで頑張る必要があるのでしょうか？ 素直に、変数を３つ用意する方法が一番簡単ですが、もちろん変数の数は固定になります。
基本かもしれませんが ・SYSTEM表領域、SYSAUX表領域にユーザーデータは置かない ・索引と元データは別表領域にした方が索引の再構築などで都合がいい ・索引の表領域とデータの表領域ではエクステントサイズを調整したほうがいい場合がある ぐらいでしょうか。 同一のRAID上につくるならあまり神経質にならなくてもいいとは思います。 ただ、昨今ではSSDが普及していますから、更新が大量に発生するシステムなどではデータファイルではなくログファイルをSSDに配置するなどすると効果的かもしれません。
こんにちわ。 > 実行時にエラーとなってしまいうまくいきません。 DATE 型は内部で7Byte の数値型データです。 ※ 小数点から上で日からの経過日数, 小数点以下は 　 本日00:00 からの経過秒です。 　 なので、date1 + 7 (翌週) やdate1 - 1/12 (2時間前) といった 　 演算ができます。 　 なので、DATE 型データ同士の減算を行うと結果は数値 (Number型) 　 となります。
>> SQL/PLUS から実行しても、 ODP.NET 経由で実施しても同様の結果になります。 SQL/PLUSがハングするのでしたら、少なくともORACLEのタイムアウトが検知されていないので、別の原因だと思います。 >> 仮に、通信速度不足が原因とした場合、そのタイムアウトまでの時間を伸ばすことは可能でしょうか？ ORACLEのセッションについては可能です。VPNのセッションについてはその構造によります。 今回の場合、通常の通信よりも特定が困難なので切り分けが大事です。 「ハングしてしまう」というのが少し曖昧なので、状況をもう少し詳しく教えてください。 エラーが出るとか、ログに何か出力されるとか。
提示されているSQLとテーブルでは、暗黙の型変換が問題なく成功するはずです。 実際のテーブル定義と実際にエラーになるSQLを提示することは可能でしょうか？ カラム名や個人情報は伏字でも構いませんが。
#1さんに加えて。 統計情報があるため、固定値のリテラルではインデックスが効いて、バインド変数ではフルスキャンしている、などが考えられます。 （その日付項目のカーディナリティにより、逆の結果になる事もある） また、件数の増減が激しいテーブルであれば、統計情報取得タイミングも考えないとダメでしょう。 リテラル版とバインド版で、それぞれトレースを取り、実行計画を比較してください。 施策の一つとしてはリテラル版に近い実行計画になるようなオプティマイザヒントを付与する事です。 トレースやオプティマイザヒントに関しては、OTNでパフォーマンスチューニング関係のマニュアルがダウンロードできるので、そちらを参考に。 実施環境が本番なのか、テスト環境なのか、も考慮する必要があります。 テスト環境で遅くても本番では速いかもしれないし、逆もまた然り。
１）多数の表の特定の列名を対象にALTER文をつくる select 'ALTER TABLE '|| table_name ||' MODIFY '|| column_name || ' VARCHAR2(500);' from user_tab_columns where column_name='BIKOU'; ２）特定の表の多数の列を対象にALTER文をつくる select 'ALTER TABLE '|| table_name ||' MODIFY '|| column_name || ' VARCHAR2(500);' from user_tab_columns where table_name='TB01' and data_length=250; 質問の内容からすると２）でしょうか。
> １．degree句を設定すると対象テーブルの統計情報取得処理がn並列で > 　　稼働し、処理時間の短縮が図れるということでしょうか。 その認識で間違いないと思います。 > ２．適切な並列数はどのように設定すればよいでしょうか。 > 　　多ければいいというものではないですよね。 10g以上で特に理由がなければ、DBMS_STATS.AUTO_DEGREEやDBMS_STATS.DEFAULT_DEGREEを 指定することで、CPU数や初期化パラメータの設定値から適切な多重度を自動的に設定して くれるかと思います。 多重度を設定するとパラレル・クエリと同様にパラレル・スレーブ・プロセスが生成する ため、極端に大きくするとオーバーヘッド（複数のスレーブ・プロセス間の同期など）が 大きくなるかと思います。 参考URL：http://docs.oracle.com/cd/E16338_01/appdev.112/b …
MINUS句を使用したSQLはNOT EXISTS句を使用したSQLに置き換えれられるかと思います。 NOT EXISTS句を使用したSQLではROWIDも指定できます。 例えば、MINUS句を使用した以下のSQLは・・・ select cola1, cola2, cola3 from taba minus select colb1, colb2, colb3 from tabb; ↓ select rowid, cola1, cola2, cola3 from taba where exists (select * from tabb where cola1 = colb1 and cola2 = colb2 and cola3 = colb3);
問題の趣旨は NAMES 　の　Mark Messier 11　と POINTS　の　Joe Sakic 94　がでるかでないかで、 A. INNER JOIN B. LEFT OUTER JOIN C. RIGHT OUTER JOIN D.FULL OUTER JOIN の違いを理解しているか尋ねています。 結果は、 A.どちらもでない。 B.Markのみでる。 C.Joeのみでる。 D.両方でる。 となるので（何故かは文法書を参照してください） 質問 Which of the following statements will display the player name, number, and points for all players that have scored points? の条件にあうものを選びます。
実行計画取得の前に統計情報はきちんと取ってますか？
> ＢＢＢはWHEREでＡＡＡに対して比較だけを行いたい この一文から推測すると、結合しているのが間違いな気がします。 ↓の様な形になるべきなのかも知れません。 SELECT COUNT (*) AS XXXX FROM AAA WHERE AAA.AAA IN (SELECT BBB FROM BBB WHERE 何らかの条件) AND ・・・ 他の方も指摘されている通り、もう少し情報を出して頂かないと正確な回答をすることは無理ですね。
追加の情報です。 はてなbookmarkもmySQLです。 またOKWEBもmySQLだったと思います。 下記は2006年、はてなbookmarkが45000人だったときのサーバー構成です。 45000人でサーバー：17台!! OSやSQL代金は無料ですが、サーバー代金が累積的に掛かってきますね。 ユーザー10万人程度なら個人でもできますが、5000万人にもなるとスポンサーは必要かと思います。 http://thinkit.co.jp/free/article/0610/1/1/ ユーザー：45,000人 ブックマーク数：535万件 ページビュー：5,000万/月 サーバー：17台 サーバーの内訳は、次の通りです。 リバースproxy×1 mod_perlを組み込んだWebサーバー（アプリケーションサーバー）×9 DBサーバー×7台（マスター×1、スレーブ×6） ハードウェアは、はてなブックマークに限らずはてなのサービスでは基本的にすべて自作のPCサーバーを利用しています。はてなブックマークで利用している17 台もすべて自作のPC サーバーで、基本的なスペックは、次のようにごく普通なものです。 CPU：Pentium 4 3.2GHz メモリ：Webサーバーには1GB／DBには4GB ディスク：IDE（SCSIは使っていない）／DBはRAID LinuxのディストリビューションにはFedora Core Apache 2.0＋mod_perl 2.0／Apache 2.2 MySQL 4.0 Perl 5.8 といった構成です。
メッセージの通りです。ストアドファンクションでは更新対象表を参照することはできません。 UPDATE文を工夫して対処してください。 ストアドプロシージャでUPDATEするようにはできます。
参照先のページにもある通り、ほとんどのSQLの実行実装では相関副問合せは 「ループ処理隠し」です。 外側のテーブルのレコードを順に参照し、それに対して相関副問合せを実行しています。 ORACLEやPostgreSQLなどでEXPLAINを行えばそれは確認できます。 ただ、意味論的には「集合の切り分け」でも間違いではありません。例示されたSQLでは 副問合せの側から「性別が同一で最大の年齢を求め、等しいレコードを抽出している」 ともとれます。
select A,B,C,C from ( select *, row_number() over (partition by A order by to_number(B) desc ,to_number(C) desc, to_number(D) desc ) rn from テーブル名 ) where rn = 1;
では、#1のヤツを下のように変えてみたら、どうなるのかな～？（エイリアス付加） insert into AAA ( フィールド１ ,フィールド2 ,フィールド3 ) select ZZZ.フィールド１ ,BBB ,ZZZ.フィールド2 from テーブル名 ZZZ
> この復元方法は正しいのでしょうか？また問題はないでしょうか？ 正しいです。問題もありません。 > PFILEからSPFILEを作成しなおす方法もあると思いますが・・・ PFILEからSPFILEを再作成すると、自動メモリ管理で内部的に チューニングされた情報が失われてしまいます。 もちろん、起動後に再度チューニングされるため、それほど問題には ならないでしょうが、SPFILEをバックアップする方法が最善であるため、 PFILEからSPFILEを再作成する方法は次善でしょう。
sqlplus / as sysdba alter user sys identified by 新しいパスワード; alter user system identified by 新しいパスワード; でどうでしょうか？
すみません。 回答になっていないと思うのですが、 こちらでは、Oracle9iをwindows7に入れて使用しています。 ただ、office２０１０が入っているようだったら アンインストール後にインストールするとすんなりインストールできました。 サポートはないのかもしれませんが・・・
シンプルかどうかはともかく、10g以降ならMerge文が使えます（9iではDeleteできない）。
初期化パラメータファイルにnls_language=Japaneseを追加してもダメですか？ もしくは、環境変数NLS_LANG=Japanese_Japan.JA16SJISを設定してもダメですか？ ９バイトで通るのは、おそらく日本語ではなく、英語の「Wedensday」（水曜日）が 返ってきているためでしょう。 まずは、設定変更をしてみて、SQL*Plusから SELECT TO_CHAR(TO_DATE('2012/02/01'),'Day') FROM dual; で期待した結果が返ってきていることを確認してみてください。 あと、これは32bit版、64bit版の問題ではないですね。
異なるバージョンがあるように見えますね。 10gがインストールされている環境に、11gを載せた？ はどうだったんですか？ > 上記にある、c:\oracle\product\10.1.0\がＰＣのCドライブには > 見当たりませんでした。 > フォルダが作られていないようです。 EMも、「フォルダが無いから起動できない」でしょうね。 > 一度、11gからインストールしなおした方がいいでしょうか 10gの件を整理できないままでは、同じ結果のような気がします。 試すだけ試してみて、それでもダメなら一度すべてのOracle関連ファイルを 削除でしょうね、レジストリも含めて。 方法はキーワードを「oracle 環境　レジストリ　クリーン」にしてググってみてください。
「仕事でOracleを使うことになりました」の中身によりますね。プログラミングでOracleに接続するということなのか、データベースの運用管理を行うのか、開発プロジェクトでデータベース設計を行うのか。 使うEditionは何なのか。 もう少し補足が欲しいですね。
こんばんは。 用途がいまいちわからないです・・・。 それを取り込んだ後、何するんですかね？？？ トランザクションの間で使うだけなら、テンポラリテーブルでもいいかと・・・。
＃１です。ソースを見てないので、「その前段階をチェック」の方針で回答しますが。 ＴＮＳＰＩＮＧが通ったのであれば、次はＯＤＢＣ単体でのテストを行ってみる。 ※エクスプローラの設定で、拡張子を表示できるようにしておいてください。 デスクトップででも、どこでも良いので、右クリック＞新規作成で、新規テキストを作成。 名前は、ファイル名は何でも良いので拡張子をＵＤＬとする。 （Universal　Database　Linkの略） 表＋PCみたいなアイコンになるので、起動。 作成済みＯＤＢＣソース名を選択して、接続ＩＤとパスワードを設定して、「接続をテスト」。 接続文字列を新たにビルドすることもできます。 これも通るのであれば、後はアプリの問題です。
select key, ltrim(sys_connect_by_path(col, ','),',') as cols from ( select key, col, row_number() over (partition by key order by col) as num, count(*) over (partition by key) as cnt from tab) where level = cnt start with num = 1 connect by prior key = key and prior num = num - 1;
回答がつかないようなので、根本解決にはならないでしょうが、参考までに。 私自身、Oracelを管理していないので、Oracleのどこを見れば良いか、は分かりませんが、Oracleのデータを利用できるならOracel自体を操作しなくても、Excelで見てみることはできます。 以下Excel2003を使用した場合です。 使っていないシートを表示しておいて、 [データ]-[外部データの取り込み]-[データの取り込み]-[新しいソース]ボタンクリックで「データ接続ウィザード」が表示されます。 接続するデータソースの種類で「ODBC DSN」を選択し[次へ]ボタンをクリック 「接続するODBCデータソース」で「OracleDNS」を選択し[次へ]ボタンをクリック すると「Oracle ODBCドライバ接続」が表示されます。 ここに表示されるサービス名が今接続できるOracleのデータソース名（CONNECTSTRINGに代入する値）です。 ここで実際にユーザー名とパスワードを入力してデータを取得することが出来るかテストできるので、ユーザー名とパスワードが有効か確認することが出来ますよ。 Excel2007以降ではメニューが変わってきますが、外部データの取り込みは出来るはずなので、同様に見ることはできると思います。
こんにちは。 ＞spoolコマンドで試してみたところ whenever oserrorが定義されていても SP2-0322 のメッセージは出力されるのです。。 えーと・・・、「SP2-00332」じゃなくて？ コマンド実行後です・・・。 ついでに、 ＞SP2-0130 「SP2-00310」じゃなくて？
全件じゃなくって条件が成立するレコードだけを削除したいなら、 delete from テーブル名　where 　 プライマリキー in (select プライマリキー from テーブル名 where 条件 and rownum <= 5000) commit; といった感じですが。
システム環境変数のORACLE_HOMEはどのような指定になっているのでしょうか。 もし、dbhomeへのパスが設定されている場合、clientへのパスを設定してみてはいかがでしょうか。
こんにちわ。 > execute immediate内で変数は使えないのでしょうか？ execute immediate に指定するSQL 文(文字列)にプレースホルダを指定して、 USING で対応プレースホルダに対応する変数を指定してやれば可能です。 詳細は、以下のURL (PL/SQL 言語リファレンス) を確認して下さい。 http://docs.oracle.com/cd/E16338_01/appdev.112/b … 参考URL：http://docs.oracle.com/cd/E16338_01/appdev.112/b …
Amazon.co.jpのカスタマーレビューを判断基準とした限りでは，黒本が最適の参考書とは思えませんでした。 単に問題集を暗記するのではなく，知識が曖昧な点を無償のOracleDatabaseXEで実機確認していれば，自信を持って試験に臨めると思います。 http://www.oracle.com/technetwork/jp/database/ex …
こんにちわ。 > 下記エラーが発生してしまいます。 エラーメッセージを見る限り、独自型の問題ではないように見えます。 exp した時に設定されていた、NLS_LANG, NLS_DATE_FORMAT 環境変数を imp する環境でも同じ設定にして確認してみて下さい。
こんにちわ。 > odbc4200 ora-00900 sql文が無効ですとなります。 エラーとなったSQL 文が書いてないので、はっきりした事は分かりませんが Stored Procedure を実行する文法って、SQL*Plus とODBC で違って ませんでしたっけ？ SQL*Plus : Execute Procedure名; ODBC : Call Procedure名; だったかと思いますが・・・。
こんにちわ。 > sqlplus testuser/passwd@TESTの形式ではログインできますが、・・・ @で指定しているのは、接続文字列で$ORACLE_HOME/network/admin/tnsnames.ora に設定されています。 この値を、ORACLE_SID に設定してもOracle には接続できません。 先ずは、tnsnames.ora を確認してどこのDatabase に接続しようとしている のか確認して下さい。 ローカル環境のDatabase であれば、そのSID をORACLE_SID に設定 して下さい。
こんにちわ。 > コンパイルエラーになってしまいます PL/SQL のコンパイル時に「1.」で作成しているテーブルが存在しないために エラーになっています。 「2.」をExecute immediate を使って動的SQL にする事でコンパイルエラーを 回避できます。 後は、#1 の方の言うように、事前にテーブルを作成しておくかですね。
発注がなければ仕入がないんですから、 SELECT 　　　 発注データ.発注番号, 　　　 発注データ.数量 - (SELECT NVL(SUM(仕入データ.数量), 0) FROM 仕入データ 　　　　　　　　　　　　　WHERE 仕入データ.発注番号 = 発注データ.発注番号) FROM 　　　 発注データ とかすればいいんじゃないですかね。
付け加えると、「CREATE GLOBAL TEMPORARY」で作った一時ファイルはアクセス権限があるユーザーからはセッション開始時点ですでに存在するように見えます。 ただ、セッションが異なれば、それぞれ独立して扱われます。
こんにちは。 シングルコーテーションは、2つ書けば1つのシングルコーテーションとして認識されます。 エスケープのようなもの？ 例えば、あるカラムに対して「'」を一つだけINSERTしたい場合などは、 INSERT INTO TABLE VALUES(''''); となります。
こんにちわ。 #1 のmuyodhid です。 > 1.ユーザー「test」を作成。権限はconnectロールのみ。 > 2.sqlplusにtestでログイン(sqlplus test/***) > 3.テーブル「t1」を作成/行移動を有効。 Oracle 10.2 から、connect ロールにはCreate session System 権限しか 無くなった筈ので、Create table もできないはずです。 権限を付与したユーザとFlashback を実行しているユーザの権限を 再度確認した方が良いと思います。 以下、11.2 のセキュリティガイドのConnect ロールに関する説明です。 http://docs.oracle.com/cd/E16338_01/network.112/ …
> １０ｇの導入を進めていますが、なんとかオラクルのライセンスコストをカットするいい方法はないでしょうか？ こんなところでしょうか・・・ - No.4の方が回答されているように、開発ライセンスを使用する。 - 開発環境ライセンスをプロセッサではなく、指名ユーザにする。（既にされていると思いますが） - 本番開始時に開発環境を潰す（本番ライセンスで開発し、本番開始時に切り替え） - SE, SEOneでよいところは切り替える > また、上司の意見は有りでしょうか？？？ なくはないですが、開発環境がおかしくなった時に、間違えて本番プロセスをkillしてしまうリスクは回避できないでしょうね。あと、開発環境は手荒に使うでしょうから、暴走してしまい、本番運用に悪影響を及ぼすリスクも拭えないでしょうね。 まあ、やるなら少なくともOracleホームは別にするべきでしょう。
SQL得意というわけではないですが、、 こんな感じでもいけるのではないかとー SELECT * FROM T_REQUEST T1 , (SELECT 商品番号, MAX(更新年月日) 更新年月日 FROM T_REQUEST GROUP BY 商品番号) T2 WHERE T1.商品番号 = T2.商品番号 AND T1.更新年月日 = T2.更新年月日 AND T1.依頼ステータス = '1' AND T1.更新年月日 <= '20111031' AND NOT EXISTS(SELECT 1 FROM T_ORDER T3 WHERE T3.商品番号 = T1.商品番号) SELECT * FROM T_REPLY T1 , (SELECT 商品番号, MAX(回答年月日) 回答年月日 FROM T_REQUEST GROUP BY 商品番号) T2 WHERE T1.商品番号 = T2.商品番号 AND T1.回答年月日 = T2.回答年月日 AND T1.回答年月日 <= '20111031' AND NOT EXISTS(SELECT 1 FROM T_ORDER T2 WHERE T2.商品番号 = T1.商品番号)
変数Iが宣言されていないですし、代入文もおかしいです。 元のプログラムを極力変えずにいくと、 DECLARE CURSOR KEKKA IS SELECT BUMON_CD,COUNT(*) RCNT FROM BUHYO GROUP BY BUMON_CD ORDER BY BUMON_CD; TYPE BUMON_TAB IS TABLE OF KEKKA%ROWTYPE INDEX BY PLS_INTEGER; WK_ARRAY BUMON_TAB; I PLS_INTEGER := 0; --追加 BEGIN FOR WK_BUMON IN KEKKA LOOP I := I + 1; WK_ARRAY(I).BUMON_CD := WK_BUMON.BUMON_CD; -- = を := に修正 WK_ARRAY(I).RCNT := WK_BUMON.RCNT;-- = を := に修正 DBMS_OUTPUT.PUT_LINE(WK_ARRAY(I).BUMON_CD || ',' || WK_ARRAY(I).RCNT); END LOOP; END; / こんな感じでしょうか。 この場合、添え字は1から始まることになります。
基本情報処理試験と応用情報処理試験はおもにプログラマを念頭に置いているのでORACLEの資格と一概に比較できないです。 まあ、強いて括って言うと ---------------- 基本情報処理試験 Oracleブロンズ ---------------- 応用情報処理試験 Oracleシルバー ---------------- みたいな感じ。 Oracleプラチナはさすがに難しい。けどOracleゴールド取れるからデータベーススペシャリストが確実に取れるとは限らない。
INSERT INTO 新テーブル SELECT 項目1, ... TO_CHAR（項目n,'FM999...'.), ... FROM 旧テーブル; の要領でやればいいのでは。 ただし、制約、インデックスはいったん外してINSERTしてから、ALTER SESSION SET SORT_AREA_SIZE = ... でソートエリアを拡大してから再作成したほうがいいと思います。
select ID1, ID2 from テーブル２ group by ID1, ID2 having count(*)>1; を投げて、結果が得られたらキー重複
＃２です。 update test set tel_no = substr('##########',1,length(tel_no)); のほうがよいかも
>　「ORA-12170: TNS: 接続タイムアウトが発生しました。」 とでるということは、クライアントとサーバーが接続できていないのだから まず、 PING IPアドレスで接続できるの？（⇒ダメならOracle以前で、ネットワーク環境自体の問題） PING サーバ名で接続できるの？（⇒ダメならOracle以前で、名前解決の問題） という確認が先だと思いますけど。 また、サーバ-クライアントの伝送経路途中にFireWallがありませんか？ （FireWall機能を持つハードが途中にないといえるかどうか。） TRACERT サーバ名 で、経路のIPアドレスが順番にでてきます。それらがHUBやルーターだけで、 フィルタリングしていないことを確認する必要があります。 また、サーバおよびクライアント上の対ウイルスソフトも、特定のポート番号を禁止する設定には できますが、ポート1521の接続の許可はしていますよね？ ・・・ ＞C:\Windows\System32\LogFiles\Firewall\pfirewall.logに接続がブロックされたことが ＞ログとして出力されると思いますが、出力されませんでした。 とありますがこれは、サーバのこと？それともクライアントのこと？ また、 ＞サーバーでは同様のユーザ(SYSTEMユーザ)とパスワードでデータベースに接続できることは ＞確認できています。 というのは、TCP/IPで接続していますか？ というのも気になりますが。（他の接続方法で接続されていてうまくいっていても、 ユーザー名が正しく設定されていてログインできるという証明にしかなりません。） サーバー上で、TCP/IPでうまく接続できているのなら、そのTNSNAMES.ORAとクライアントの TNSNAMES.ORAを比較すれば、問題が分かるかもしれません （Oracle Net Configration Assistantの設定内容を見比べてもいいです。） ## と、とりあえず思いついたところだけ。 ## 上記がすべてクリアなら、listener.oraとtnsnames.oraの記述が不整合を起こしているのかな？ ## (それぞれGUIで設定されているかもしれませんが。) ## という感じです。
基本的にファイルシステムベースなら大丈夫そうですが、WindowsのOracleのサービス停止はデフォルトはSHUTODOWNモードが規定されていないので、一抹の不安はあります。 http://otndnld.oracle.co.jp/document/products/or … の「5.3 サービスを使用したデータベースの起動および停止」を参考に、「サービス停止時にインスタンスを停止」する状態になっている状態にが望ましいと思います。
間違っているということをどうやって気付かれたのでしょうか？ エラーが出たからでしょうか？ であれば、エラーメッセージくらい書いても良いと思います。 あと、回答する側が実機で試してみようにも、 表定義がなければそれをいちいち起こさなければなりません。 これだけ長いSQLを一目しただけでココが悪いと言える人はそれほどいないと思います。 （実機で問題を再現できる程度の情報は出すべき。 サポートでさえも再現できない問題は取り合ってくれませんし） さて、肝心の回答ですが、group by句の所を確認してください。 SELECT NY.nko_yotei_date, KM.shoh_nm, KM.btr_center_cd, KM.souko_cd, KM.juchuu_kikakukai, KM.tokki_kbn, KM.shoh_idx, KM.haitatsu_kikakukai, SUM(NY.yotei_ps_sou_su) FROM M_SC_KIKAKU_SHOUHIN KM LEFT OUTER JOIN T_SC_NKO_YOTEI NY ON KM.BTR_CENTER_CD = NY.BTR_CENTER_CD AND KM.SOUKO_CD = NY.SOUKO_CD AND KM.juchuu_kikakukai = NY.juchuu_kikakukai AND KM.tokki_kbn = NY.tokki_kbn AND KM.shoh_idx = NY.shoh_idx AND KM.haitatsu_kikakukai = NY.haitatsu_kikakukai AND KM.shoh_nm = NY.shoh_nm WHERE KM.SHOH_CLS = '1' AND KM.HAITATSU_KIKAKUKAI = '11124' AND NY.nko_yotei_date = '20111215' AND KM.HI_SHUH_FLG = '0' GROUP BY km.btr_center_cd, km.souko_cd, km.juchuu_kikakukai, km.tokki_kbn, km.shoh_idx, km.haitatsu_kikakukai, nko_yotei_date, km.shoh_nm ORDER BY btr_center_cd, souko_cd, juchuu_kikakukai, tokki_kbn, shoh_idx, haitatsu_kikakukai, nko_yotei_date, shoh_nm DESC; drop table M_SC_KIKAKU_SHOUHIN; create table M_SC_KIKAKU_SHOUHIN ( z varchar2(10), btr_center_cd varchar2(10), souko_cd varchar2(10), juchuu_kikakukai varchar2(10), tokki_kbn varchar2(10), shoh_idx varchar2(10), haitatsu_kikakukai varchar2(10), SHOH_CLS varchar2(10), HI_SHUH_FLG varchar2(10)); drop table T_SC_NKO_YOTEI; create table T_SC_NKO_YOTEI ( yotei_ps_sou_su varchar2(10), SOUKO_CD varchar2(10), juchuu_kikakukai varchar2(10), tokki_kbn varchar2(10), shoh_idx varchar2(10), haitatsu_kikakukai varchar2(10), shoh_nm varchar2(10), nko_yotei_date varchar2(10), BTR_CENTER_CD varchar2(10));
> 上記で作成した関数を，別に作成したプロセスから呼び出しているのですが これが良く変わらないので何ともいえませんが Pro*Cでシグナルを扱ったことがありますが普通に処理できましたよ 書き方も特に変わったことはいていませんでした。 DB関数のライブラリの部分をスタブにして普通のCで書いてみたら ちゃんと動きますか? 以降の動作をしない というあたり割り込みが割り込みをよんでませんかね? ちなみに、扱ったことがあるのは SIGINT, SIGTERM, SIGCHLD, SIGUSER1 SIGUSER2です。
エラーの通りです。 >insert into テーブルA (K1) >select K1|| ' ' ||K2|| ' '||K3　 >from テーブルB; >指定していないMIDが何故でてくるのでしょう？ テーブルAのK1にテーブルBのK1+K2+K3のみを インサートしようとしてます。 つまり主キーを指定していないから出てくるんです。 INSERT INTO テーブルA SELECT MID,K1|| ' ' ||K2|| ' '||K3　 FROM テーブルB;
ANo.2です。 ＞PL/SQLでLoop処理に組み込んで、スクリプト実行させたい場合 ちょうどいいサンプルがOTNにあったので。 http://otn.oracle.co.jp/sample_code/db_connect/p … サンプルは10回繰り返していますが、 FOR i IN 1..10 LOOP を FOR i IN 1..1000 LOOP にしたら1000回繰り返すことになります。
ご質問の内容から性能要件などが全く読み取れません。 2万件程度であればdelete文で全く問題がないように思います。 いずれにしても、削除する方法となれば delete, truncate, drop くらいしか解がありません。さらに、全権削除しちゃダメで、 パーティションも使えないとなれば where 句を指定した delete 文 しかありません。 ただ、2万件程度であればdelete文で全く問題がないと思います。
これじゃダメですか？ SELECT 　TO_CHAR(V_SYORI_YM, 'YYYYMM') AS "年月" , 　SUM(V_A_CHAG), 　SUM(V_B_CHAG), 　SUM(V_C_CHAG), 　SUM(V_ALL_CHAG) FROM 　( 　SELECT 　　V_SYORI_YM, 　　V_A_CHAG, 　　V_B_CHAG, 　　V_C_CHAG, 　　V_ALL_CHAG 　FROM 　　V_001 　WHERE 　　V_CRT_DTS >= TO_DATE('20110401', 'YYYYMMDD') AND 　　V_CRT_DTS < TO_DATE('20120401', 'YYYYMMDD') 　UNION ALL 　SELECT 　　V_SYORI_YM, 　　V_A_CHAG, 　　V_B_CHAG, 　　V_C_CHAG, 　　V_ALL_CHAG 　FROM 　　V_002I 　WHERE 　　V_SYORI_YM >= TO_DATE('20110401', 'YYYYMMDD') AND 　　V_SYORI_YM < TO_DATE('20120401', 'YYYYMMDD') 　) GROUP BY 　　TO_CHAR(V_SYORI_YM, 'YYYYMM');
サーバーからピングのお返事は？ ファイアーウォール等セキュリティソフトの状況は？
>上記の2つがありますが、どう違うのでしょうか？ 公式情報の上では、試験問題数/試験時間やその合格ラインが異なります。 上記の違いから、試験問題の難易度も異なっているのが実情のようです。 （(1)11g SQL基礎I の方が、各問題の難易度が高い。） 合格だけを目指すなら、 試験問題が簡単な(2)の方が手抜き勉強で合格できると思います。 >できれば、将来性のある方を受けたいのですが SQL試験の技術的な内容そのものは、1990年代の技術的内容から変わっていないので、 将来性は気にする必要がないと思います。 >(1)が11g、(2)がが10g、11gに共通すると思って良いのでしょうか？ >それであれば(1)の方が将来性があるのでしょうか？ (1)の試験内容も10gで普通に動きます。 >12gが出る頃にはSillverやGoldを受けたいのですが、 もしDBA資格のことをおっしゃっているなら、 SQL試験があるのはBronzeだけなので、気にする必要ありません。 （Silver/GoldはDBA試験のみです）
１．高速リフレッシュしているなら、マスターサイトにマテリアライズド・ビュー・ログが いるはずなので ALL_MVIEW_LOGSか、DBA_MVIEW_LOGSから、 LAST_PURGE_DATE DATE 前回の消去が実行された日付 LAST_PURGE_STATUS NUMBER 前回の消去の状態（エラー・コード、または正常終了を示す0） あたりをSelectでみてみたらいいのでは？ （ただし、遅延消去している場合なら検知までにタイムラグがでると思いますが。） ２．上記で無理があるなら、DBLINKを利用して、相手側の ALL_MVIEWSか、DBA_MVIEWSを参照して、 LAST_REFRESH_DATE DATE マテリアライズド・ビューがリフレッシュされた最新の日付 （まだ移入されていない場合は空白） STALE_SINCE DATE マテリアライズド・ビューが失効した時刻 他をSelectでみてみるとか。 ３．DBLINKを利用して、相手側のDBA_JOBSやDBA_JOBS_RUNNINGを見てもいいかも。 いずれも、selectする項目の詳細はマニュアル見てみて。 http://docs.oracle.com/cd/E16338_01/server.112/b … 第II部 静的データ・ディクショナリ・ビュー に全部ありますから。
複合トリガーについては理解できていないのですが、質問の内容でも必要なのでしょうか。 >あるTBL１のフィールド：[氏名]を入力すると同テーブルのフィールド：[社員番号]が自動でセットされるようなトリガー だけなら、普通のトリガーでいいと思うのですが。 たとえば、 CREATE OR REPLACE TRIGGER TRG_SET_AUTO_SHAIN_NO BEFORE INSERT ON CM_PORTAL_SHAIN FOR EACH ROW WHEN (NEW.DATA_KBN in (2,3)) DECLARE GRP_CD VARCHAR2(3); SEQ_NO NUMBER(4); NEW_SET_NO VARCHAR2(7); BEGIN IF :NEW.DATA_KBN = 2 THEN GRP_CD := '999'; ELSE GRP_CD := '888'; END IF; --社員番号はグループごとに連番で振りたいということですよね？ --質問文のコードでは連番取得後にテーブルの更新処理をしていないですが必要じゃないですか？ --実際にはSEQUENCEを使った方がいいような気がします select SQ.GROUP_CD,SQ.SEQUENCE_NO + 1 into GRP_CD,SEQ_NO from CM_HAKEN_GROUP_SEQUENCE_MT SQ where SQ.GROUP_CD = GRP_CD for update; update CM_HAKEN_GROUP_SEQUENCE_MT set sequence_no = seq_no where GROUP_CD = GRP_CD; --SHAIN_NOに値を設定するだけで、トリガー内でINSERTやUPDATEを発行する必要はない --質問では、NEW_SET_NO := substr(GRP_CD,LPAD(SEQ_NO,4,0)); となっていましたが --本当は連結するのだろうと勝手に想像しました。 :new.SHAIN_NO := GRP_CD || LPAD(SEQ_NO,4,'0'); end; / こんな感じでも。
No.4の方の回答を補足すると、 >　2.アーカイブ、オンラインREDOログでロールフォワード するときに、REDOログに記録されたトランザクションが再実行されます。 　「更新トランザクションが再実行される」＝「更新に伴うUNDOデータが再生成される」 となるので、「2.」が完了した時点で、 　「ロールバックに必要なUNDOデータはREDOログを元に再生成済み」 の状態になっています。 従って > 3.UNDOでロールバック は、「2.」で再生成済みのUNDOデータを使ってロールバックすることになります。 余談ですが、この挙動はOracleだけの話であり、他のDBMSソフトウェアでは また異なる動きをしているので注意してください。
データベース・コンフィギュレーション・アシスタント（dbca）では、最後のステップで実行コマンドをスクリプトに保存する選択肢が出てくるので、ここのみにチェックを付けて終了すると、指定したディレクトリにシェル（Windowsの場合はバッチ・ファイル）とSQLスクリプトが出力されます。 制御ファイルのパスは、初期化パラメータ・ファイル、system、temp、undoなどのパスはCreateDB.sqlに出力されるので、そこをエディタで編集し、手動でDBを作成するのが簡単だと思います。 というか、GUIだけでやってしまうと何も残らないので、「DBを再作成してください」と言われたりすると困っちゃうんですよね。。
「英字を含まない」ですよね？ select * from table_a where length(translate(upper(item_a), '9ABCDEFGHIJKLMNOPQRSTUVWXYZ', '9')) = length(item_a);
「'AAA'が登場するIDは、他の条件を付けることなく除外したい」で良いんですね？ （なぜ'XXX'が登場したんだろう？） ならばATAIに'AAA'が登場するIDのリストを作り、NOTで否定すればよい。 where条件に以下の一行を追加。 and A.ID not in (select ID from table_A where ATAI='AAA')
賛成。 length( regexp_substr(ADATA,"^\d*") )
今すぐ検証できる環境ありませんが Unix/Linuxならクライアント側で $export NLS_LANG=Japanese_Japan.AL32UTF8 してからsqlplsuを立ち上げてみる。 Windowsなら >SET NLS_LANG=Japanese_Japan.AL32UTF8 してからsqlplsuを立ち上げてみる。 これでだめなら、SPOOLされたCSVファイルをnkfかnkf32コマンドでUTF-8に変換してはどうでしょう。
こんにちわ。 > なんとか、現在のPC（Vista Home Premium SP2）で試験勉強を出来る環境を Oracle はVista Home Premium に対応していませんので、このままでは Oracle を動かす事はできません。 対応策ですが、Vista Home Premium にVMware Server を導入して その上にCent OS 等でGuest OS を立ててやれば、仮想環境上で Oracle を動かす事も可能かと思います。
読んでいて ４．リモートPCからSQLPLUSで接続できない！PINGも飛ばない！　でもIPアドレス指定ならOK。 が繰り返しおきているとしか思えないのですが。 これなら、Oracleは関係なくって、WindowsServer2008がつながっているDNSとのやり取りに使われるポートが、firewallで開放されていないから、Aレコードがうまく飛ばずに、WindowsServer2008の名前とIPアドレスの対応が行方不明になるからとしか思えませんが。（詳しくは・・・忘れました。というか、ドメインは？、DNSは？…が書かれていないので誰もわからないかと。） あるいは、ドメインでなくワークグループにしていてホスト名が競合していても起こるかと。 あるいは、ドメイン名が、aaa.co.jp等のような形式でなく、abcとかでも起こるかも・・・。 こんなときには、ANo1の方の回答も有効。DNSでなくHostsというファイル（あるいはlmhostsを使ってもいいんだけど。）を使って名前解決するので、DNSがどうなっていようが影響ないため。 また、ファイル共有したら解消されたのは、Netbeui等TCP/IP以外のプロトコルを使っているからか WINSを使った名前解決で名前をクライアントＰＣが把握できるようになったためかと。 調べようと思えば、クライアントからnslookupで、サーバの名前は見えますか？ 等など。 適当に一言言うと、firewallでは、DNSで使っているポート53は開放していますか？ （他にもあけておかないといけないポートはあったはずだけど、私は詳しくない。） ・・・ （このレベルだと、はっきりって、Oracleとは関係ない世界です。 　「ホスト名を使ったPingが通らなくなる」に絞って別のカテゴリで聞いたほうが早いかも。 　⇒FireWallやAntiVirusソフト以外の、Oracle等のアプリが影響して 　ホスト名を使ったPingが通らなくなるのは考えにくいです。）
(蛇足） CASE WHEN TO_CHAR(B.KAKAKU) IS NOT NULL THEN '登録なし' ELSE TO_CHAR(B.KAKAKU) END as 登録価格 これは逆ですね。 CASE WHEN B.KAKAKU IS NOT NULL THEN TO_CHAR(B.KAKAKU) ELSE '登録なし' END as 登録価格
後、Oracleのサポートがないということ、バグレポート、パッチも貰えないというのはかなり判断の根拠になっっていると思います。オープンソースDBではその点では人柱になる勇気もいりますが、自分たちで何とかできる可能性もありますから。 > 一般的な、アプリケーションを作るというのが目的の人は、 > 十分動くのにコストをかけて別の技術を覚えたりしないと思うので > それが原因なのでしょうか？ 現在では商用DBでもOSS-DBでもそれなりに動作しますし、本当にハイエンドな機能を求めなければ、ソースが公開されているほうが安心して使えるという人もいると思います。
　前後の処理があるとは思いますが、もし、コピー前にＢテープルのデータを削除しているなら、いったんその処理だけ止めておきます。コメントアウトするも良し、デバッグモードを組み込んでおくもよし。 　Ｂテーブルに事前にＡテーブルにあるデータとユニークキーが同じデータを一つ登録しておきます。 　後は、プログラムを実行してみればＯＫ。 　Ａテーブルの内容を事前にＢテーブルにコピーしておいても可ですが、途中でエラーになった時の挙動の確認が出来なくなるかな。まぁ、エラーになった時の処理内容によりますが。
SQLDeveloperではダメなのですか？ http://www.oracle.com/technetwork/jp/developer-t …
リファレンスを見てみるようにするといいと思います。 http://download.oracle.com/docs/cd/E16338_01/ser …
後,「column」を追加する alter table VISITOR_SCHDULE drop column "総務部.受付ID-1"
>入力が非表示なだけ まぁそういうものです。 まずはユーザ・パスワードの組み合わせが有効になっているかどうかを確認しましょう。コマンドプロンプトで「sqlpllus ユーザー/パスワード」と打ってみてください。これで接続できなければそのユーザ・パスワードの組み合わせが有効になっていないということです。
SELECT COALESCE(T1.品番,T2.品番) 品番, T1.全長, T2.入数 FROM テーブル１ T1 FULL JOIN テーブル２ T2 ON T1..品番=T2.品番
こちらが参考になるでしょうか http://www.drk7.jp/MT/archives/001012.html http://www.atmarkit.co.jp/fdb/rensai/ora_admin/0 … そもそもフラッシュバッククエリを使用する必要があるかどうか。 定期的にRMANでバックアップデータを削除できないか。 検討してみてください。
>こちらでは万一変更前MEMOに15桁フルで使用されている場合は とありますが、CHAR(15)と定義しているのであれば全データが15桁まで半角スペースで埋められますよね。 http://download.oracle.com/docs/cd/E16338_01/ser … ですので、 >090-XXXX-XXX1 >090-XXXX-XXX2 >090-XXXX-XXX3 >A >B >C >' 090-XXXX-XXX4' >' 090-XXXX-XXX5' >' 090-XXXX-XXX6' このようなデータはあり得ないわけです。実際には '090-XXXX-XXX1__' '090-XXXX-XXX2__' '090-XXXX-XXX3__' 'A______________' 'B______________' 'C______________ ' '_090-XXXX-XXX4_' '_090-XXXX-XXX5_' '_090-XXXX-XXX6_' というデータになっているはずです。（アンダースコアは半角スペース） 上記を踏まえて、更新後にどのようなデータになっていたらいいか提示していただけますか？
create view 商品サイズ as select 商品ID, sys_connect_by_path(サイズ名,',') as サイズ名 from (select 商品マスタ.商品ID,商品マスタ.商品名,サイズマスタ.サイズ名, Row_Number() over(partition by 商品マスタ.商品ID order by 商品サイズマスタ.サイズID) as Rank, count(商品マスタ.商品ID) over(partition by 商品マスタ.商品ID) as MaxLevel from 商品マスタ join 商品サイズマスタ on 商品マスタ.商品ID = 商品サイズマスタ.商品ID join サイズマスタ on 商品サイズマスタ.サイズID = サイズマスタ.サイズID ) where Level = MaxLevel start with Rank = 1 connect by Prior 商品ID = 商品ID and Prior Rank = Rank-1; create view 商品カラー as select 商品ID,商品名, sys_connect_by_path(カラー名,',') as カラー名 from (select 商品マスタ.商品ID,商品マスタ.商品名,カラーマスタ.カラー名, Row_Number() over(partition by 商品マスタ.商品ID order by 商品カラーマスタ.カラーID) as Rank, count(商品マスタ.商品ID) over(partition by 商品マスタ.商品ID) as MaxLevel from 商品マスタ join 商品カラーマスタ on 商品マスタ.商品ID = 商品カラーマスタ.商品ID join カラーマスタ on 商品カラーマスタ.カラーID = カラーマスタ.カラーID ) where Level = MaxLevel start with Rank = 1 connect by Prior 商品ID = 商品ID and Prior Rank = Rank-1; で select 商品カラー.*,商品サイズ.サイズ名 from 商品カラー join 商品サイズ on 商品カラー.商品ID = 商品サイズ.商品ID; まあ、かなり無理やりですね。一旦VIEWにしないとOracleの構文解析のバグなのか一発で通らないし、階層別問合せの結果はINDEXが使えないので負荷が高いです。
＞上記サイトでダウンロードすれば、その時点の最新版が手に入るので、 この手のツールを個人で使用する方は少ないので、一応ヒントを書いたつもりなんですが、 http://www.oracle.com/jp/support/faq/index.html http://www.oracle.com/jp/support/faq/faq-contact … http://www.oracle.com/jp/support/faq/faq-contact … http://www.oracle.com/jp/support/support-index-0 … http://www.oracle.com/technetwork/jp/topics/secu … などをみれば、サポート契約と言うのがキーである事をおわかりかと、 業務用では（そうでなくても）特に、全国展開向け（一般向け）、個別向け（サポート契約顧客向け）用、 パッチに区分けされる事はご存知かと思います。メーカーによっては、どちらもDLできる状態の場合もありますが、個別パッチは通常、パスワードやIDが必要になることがほとんどです。 ただし、マイクロソフトでもそうですが、そのほとんどの場合、公開される時期の問題で、”サービスパック”、”アップデーター（マイナーバージョンアップ or リビジョンアップ<=不具合修正＜＝３桁目のバージョンが上がる）”などで、その修正が、セキュリティー対策が施されます。 つまり、契約していれば、その都度不具合修正版が入手でき、即応できます。していなければ、半年とか、１年単位でリリースされるアップデートバージョンでの入手しかありません。 これは大抵、公開されている場合が多く、契約していなくてもDLできるケースがほとんどです（ここ１０年くらいで、マイクロソフト等の大手がそのようにしてきたので業界自体が、右ならえですね）。 抜粋： 「このページに掲載された内容は、オラクル製品のセキュリティ対策のために自由にお使いになることができます。セキュリティに関するパッチは、My Oracle Supportからダウンロードすることができます（My Oracle Supportのご利用にはメンテナンスサポート契約が必要です）。また、米国での情報公開時に、電子メール（英語）にて」 「一般公開されている脆弱性の修正情報 一般に公開されている脆弱性に関する問題で、Critical Patch UpdateとSecurity Alertで修正が提供されている問題の情報です。下記ページの一覧からご確認ください」 なんて上記に掲載されていますよ。 これ以外のところからは、代理店などのデベロッパーです。開発等のデベロッパー契約していれば、ほとんどの場合入手かのうです。 この手の仕組みは、業務用ソフトではどこも同じだと思うのですが・・・
select 年,品番,品名 from 商品マスタ a where 年 = '2010' and not exists ( select * from 商品マスタ b where a.品番 = b.品番 and b.年 = '2011'); でどうでしょうか。
ううむ、一般的に謂われるOracleMaster資格は、 　DB管理者（DBの作成/メンテナンスをする人）向けであり、 　DB利用者（DBへアクセスする人）向けではないんですよね。 DB利用者としての立場だと、下記のアプリ開発者向け試験の方が良いかもしれません。 ORACLE MASTER Silver Oracle PL/SQL Developer http://www.oracle.com/jp/education/certification … Oracleバージョンとの対応付けは、9i~11gまで、ひとつの資格で対応しています。
> ちなみにupdateやdeleteをした後にselectとすると処理が反映されたのが表示されますか？ UPDATEやDELETEしたセッション（トランザクション）であれば処理が反映されたものが表示されます。 他のセッションからはCOMMIT後でないと反映されません。
こんにちわ。 > TEMPですが、方法として、物理ファイルTEMP02を追加し、TEMP01という > 物理ファイルを削除することで・・・ と言う事は、1つの一時表領域に一時ファイルを追加して、既存の一時ファイルを Oracle の機能を使用せずに削除したと言う事でしょうか？ その場合、一時表領域の状態が明らかにおかしいので、別の一時表領域を新たに 作成して、新しく作成した一時表領域を使用するように設定を変更するしか ないのではないでしょうか？
こんにちわ。 > Oracleの公式なページやマニュアルに書かれているのでしょうか？ 特にマニュアルに記載は無かったかと思います。 以前に、サポートに確認した事があったので、憶えていただけです。 > 該当システムは本番機しかなく検証できる環境がないのため、 ユーザ登録が必要ですが、以下のサイト (US OTN) から開発ライセンスを Download する事ができるので、検証環境を作成する事は可能です。 http://www.oracle.com/technetwork/database/enter …
強いて上げればOracle Enterprise Managerでしょうか。 ただし、パフォーマンス監視などもできるのですが、テキストのインポート、エクスポートなどはできないし、かなり使い勝手は違います。
「入出力バウンド」とは処理の中で入出力の割合が多いものを言います。他に「CPUバウンド」と言えば、CPU使用率が高く、I/Oの占める割合が低いものです。 非同期I/Oが効果的な場合は多量のランダムアクセスでのREAD、WRITEだと思うので例えば複数インデックスの更新を伴う挿入・更新・削除処理でしょうか。
これから買おうというのではなくて ７インチのモニタを今現在お使いなのですよね？ 定規で計ってみては？？？ ちなみに、モニタサイズは対角線の長さを表しています。 １インチは約2.54センチですから７インチのモニタならば対角線の長さが 7ｘ2.54≒17.8センチということになります。
このあたりを参考に Oracle10g OEM 再構築 手順 で検索すれば一杯出てきます 参考URL：http://www.ilovex.co.jp/blog/system/systemsoluti …
不勉強な回答でご迷惑をおかけしてすみません。 マニュアルを一読していただければ、お気づきと思いますが、管理エージェントがアップロードできない理由は、エージェント側に割り当てられたディスク領域ではなく、対向の管理サービス・リポジトリ側に割り当てられたディスク領域が不足しているためという可能性もあると思います。 管理サービス・管理リポジトリの保守が適切に行われているか確認してみてはどうでしょうか？ （アップロード先のディスク容量やリポジトリのハウスキーピングの実施など） あるいは、同一の管理サービスを利用する他の管理エージェントも同様な問題が起きているのなら、管理サービス・リポジトリ側の問題が強く疑われると思います。 >オラクルも結構バグありますよ。。。 オラクルに限らず、自分の不勉強が原因で設定ミスや管理ミス、操作ミス、マニュアルの読み違え（不適切な翻訳や意味の取り違え）をした経験の方が私は多いです（今回のようにマニュアルの一部だけしか読んでいないためにミスに気づかないとか）（－－；） また、Oracleのドキュメントには、最大800万TBのデータ量を扱えたり、CLOB とかの仕様では128TBを扱えるとあったので適切なインストールや設定をすれば簡単に扱えるのかと思っていました・・・。（パフォーマンスは別として） tetubun さんのご苦労を察することができず失礼いたしました。
どこまでやるかの問題だと思います。 普通は明治まで対象にしたい場合が大多数だと思うので、PL/SQLで明治、大正、昭和、平成の開始日（開始年ではありません）から変換するストアドファンクションを作成するのが一番工数も少なくて済むと思います。 明治　1868/9/8～ 大正　1912/7/30～ 昭和　1926/12/25～ 平成　1989/1/8～
・この処理を行うのは毎月第1営業日となるため、月末日で月またがりになることはありません。 ならば、条件２は気にする必要ないですね。 ・売上明細テーブルと売上明細累積テーブルのプライマリーキーは、支店CD・顧客NO・売上年月と 　先ほどの質問には書かれていない売上区分の4つとなっております。 ということでしたら、 売上区分が異なるだけで、支店CD・顧客NO・売上年月が同一のレコードが複数あった場合の処理は どうしますか？ 例） 　　STNCOD、KKKNO、URIYM、URIKIN、URIKBN 　　001　　　 000012　　201007　　　 2,000　　　1 　　001　　　 000012　　201007　　　 100　　 　3 STNCOD、KKKNO、URIYM、NAME、TEL、URIKBN,RYOFLG 　001　　　 000012　　201007　　Ａ田太郎　　123-1234　1　　 　001　　　 000012　　201007　　Ａ田太郎　　123-1234　3　1 となっていた場合、 (1)それぞれ１行目は累積へ移動して消したいが、 ２行目は消したくないとするのが普通、ですかね。 (2)それとも、領収済フラグはどれか１レコードにしか入らないので、１行目にあっても ２行目にあっても、１，２行目両方累積へ移動して消したいということですか？ また、領収済フラグは、'1','2','3'の３種類とも対象にしたいのでは？ (1)の場合、 INSERT INTO URIMRUITBL SELECT * FROM URIMTBL a WHERE ( URIYM < ADD_MONTHS (SYSDATE, -12) ) and (select max(b.RYOFLG) from URITBL b where a.STNCOD= b.STNCOD and a.KKKNO = b.KKKNO and a.URIYM = b.URIYM and a.URIKBN = b.URIKBN) in('1','2','3'); または、in('1','2','3')を>' '(スペース)とするなど。 ※プライマリキーで一意のレコードが取得できるのでmax()は別に必要ないですが、 ま、習慣的につけていてもいいかも。 (2)の場合は、 INSERT INTO URIMRUITBL SELECT * FROM URIMTBL a WHERE ( URIYM < ADD_MONTHS (SYSDATE, -12) ) and (select max(b.RYOFLG) from URITBL b where a.STNCOD= b.STNCOD and a.KKKNO = b.KKKNO and a.URIYM = b.URIYM) in('1','2','3'); または、in('1','2','3')を>' '(スペース)とするなど。 ※max()を使っているので、 スペースと'1'があれば、大きいほうの'1'を取得します。 プライマリキーで取得できていないのでmax()をつけていないと 複数レコードが取得されます。実行時にエラーとなります。 注：スペース、ですよね？　Null(なにも入っていない状態)ではないですよね？ Null なら、>' 'ではなく、is not null とか書きます。 なお、 プライマリキーが2件以上存在する構成にはならないようにしています。 プライマリキーとはレコードを一意（ユニーク）に識別するためのキーであり 重複を許すキーはプライマリキーにならないです。 （プライマリキーという用語の意味です。念のため。）
こんにちわ。 > delete from > ( > select 受注NO from T受注明細 > where T受注明細.受注NO = D売上.受注NO) こう言う事でしょうか？ delete from T受注明細 where 受注NO in (select 受注NO from D売上); 又は delete from T受注明細 T1 where exists (select null from D売上 T2 where T1.受注NO = T2.受注NO); 削除する件数と索引の有無によって、どちらのSQL が高速化は異なりますので ご注意下さい。
> その際、各クライアントも11gをインストールする必要がありますでしょうか？ その必要はありません。 No.1の方がリンクされているところに詳細が書かれています。
>ビューを作ったとき、UPDATEやINSERT文が有効・無効になる違いは何でしょうか？ おおざっぱにいうとVIEWがテーブルの主キーを保持しているか、ということではないですかね。 このあたりを読んでみてください。 http://download.oracle.com/docs/cd/E16338_01/ser … http://download.oracle.com/docs/cd/E16338_01/ser …
exp(従来からのエクスポートユーティリティ)ならOWNERパラメータとROWS=Nパラメータ(表の定義は出力されるが中身はスキップされる)を使う、expdp(データ・ポンプ・エクスポート)ならSCHEMASパラメータとEXCLUDEパラメータを使えば、出来そうな気がします。
SQLの文法から発生しています。 Oracleのバージョンに関わらず、同じエラーが発生します。 GROUP BY している場合、ORDEY BY する項目は、SELECT される項目である必要があります。 （机上で考えて、GROUP BYしてたら、SELECTしないと並び順決まらないですよね。） ※このSQL分、GROUP BYしているのに、集合関数（例、MAX）がでてきません。根本的に間違ってませんか？
こんな感じではだめですか？ begin loop update テーブルA set カラム3 = ( select カラムc from B where テーブルA.カラム2=テーブルB.カラムB ) where exists ( select 1 from テーブルB where テーブルA.カラム2=テーブルB.カラムB ) and rownum <= 5000; commit; exit when (sql%rowcount < 5000); end loop; end; /
こちらにアカウントを登録します。 https://myprofile.oracle.com/EndUser/faces/profi …|shippingAddress|communities|japan&nextURL=https%3A%2F%2Flogin.oracle.com%2Fpls%2Forasso%2Forasso.wwsso_app_admin.ls_login%3FSite2pstoreToken%3Dv1.2~0C25F121~DA643FF3D44446EE1BA0B666B4AD7E091F8383DC9A4F57A84D7DC512BAB895B185AC9BE7344876E27BD290A60147EF4E9EC5EACEE1FCF1760C8E5A0F9855A86561FF5D0EE6A8CA0DEF6923C7B2F0B0E71D0EA2B8ECE5A029EEC4C5D38AAFA9C6D7E908B4A378A30039C83418520D5E4D3A1E389F3CD25DE5BE215154A1F056A795F6C86B8FB77255F1C6FDDC5FEEDCBA52A032EEA3031E7C919BB0422844C308847E03FC5BB0AA16B06EB018B90FD09068CCF8D78C8DE241508356BF8E3BC69DC543753CE9CD0186868CACEF5DBDC87C3FE59534E61B061F06D4B2D276569A17 登録すれば http://www.oracle.com/technetwork/database/enter … からデータベースソフトの開発ライセンスでダウンロードできます。 （実運用はできませんのできをつけてください） 実運用をしたい場合は10gXEか11gXEベータ版になります。 あと、OracleのStandard Edition、Enterprise Editionはメモリを結構食うのでインストールするマシンのスペックには気をつけた方がいいでしょう。
ログインシェルでNLS_LANGに「JAPANESE_JAPAN.UTF８」を設定してください。
●がNull（あるいは空文字）も、%や?等の特殊記号も入力できないという条件ならば （この条件でなければ、a1もb1もnullのレコードを除く全レコードが取得されるのでそれが最大） select x.Moji,count(*) cnt from ( select substr(A.a1,1,1) Moji from A where a1 is not null union select substr(A.b1,1,1) from A where b1 is not null and ( a1 is null or substr(A.a1,1,1) <> substr(A.b1,1,1) ) ) x where x.Moji is not null group by Moji order by cnt desc の1行目に出てくる文字が最大件数。 （SQLは未検証なので多少間違えているかもしれません。）
select 名前 from A union select 名前 from B union select 名前 from C union select 名前 from D で重複が削除されないなら8iのバグです。 11g R2ではユニークな値が抽出されます。
＃５です。Bテーブルとエイリアスが不足してました。 (1)と(2)をunionしてはどうでしょう？ select a.id, b.名前 from Aテーブル a, Bテーブル b where a.番号1 is not null and a.番号1 = b.番号1 union select a.id, b.名前 from Aテーブル a, Bテーブル b where a.番号1 is null and a.番号2 = b.番号2 ;
いま、試せる環境にないので未検証ですが。 SQLファイル.sqlの内容は、そのものをコピペしてますか？ 一行目はset trimspool on ですよね。 set feedback offをコメントアウトして、どうなりますか？ もしかしたらSQLファイル.sqlの先頭行に空行（Enterのみ）を設けるとか。
#1 のmuyoshid です。 > もう少し簡単な方法はありますでしょうか 先ずは、こちらをご覧下さい。 http://www.oracle.com/technetwork/jp/content/fla … Oracle8i/9i と言う条件ではこの中で使用できるのはFlashback Query (Oracle9i) のみです。 つまり、Oracle8i 環境ではLogMiner を使用しなければ (Trigger や監査を使って変更履歴を取得していなければ) 更新履歴を取得する事は できません。 [注] Flushback Query は、現在のデータにUndo 情報を適用する事によって、過去のある時点に 遡ってデータを取得するものです。 そのため、更新履歴を取得すると言う質問者様の要件とは若干異なります。 上記PDF では、Select 文にAS OF 句を指定する事でFlashback Query が使用できるように 記載されていますが、Oracle9i ではDBMS_FLASHBACK パッケージを使用します。 詳細は、アプリケーション開発者ガイドを参照して下さい。
delete from T where exists ( select 1 from T T2 where T.K>T2.K and T.S=T2.S )
SQLを少し直せば、質問に記載の考え方でもいいと思います。 select data from (select data from t where key < '003' order by key desc) where rownum = 1 union all select data from (select data from t where key >= '003' order by key) where rownum <= 2; もしくはnot existsを使って、 select data from t a where key = '003' or not exists ( select * from t b where (a.key < '003' and b.key < '003' and a.key < b.key) or (a.key > '003' and b.key > '003' and a.key > b.key) ); とかでもいいかもしれません。
10gのOracleサーバ(クライアント)に含まれるexpユーティリティを使って、 11gのデータベースサーバに接続してダンプファイルを生成すれば、 10gのデータベースサーバにインポートできる形式になります。
すべてのソフトウェアは無償でダウンロード可能で、それらには「開発者ライセンス」が付属していて自己学習の目的に限り使用可能と記載されています。 http://www.oracle.com/technetwork/jp/indexes/dow … ですので、試験対策の学習ということであれば問題無いと思います。
こんなんでいいんじゃないかな。既に出ている回答の方が高度なのかもしれないけど。 select 抽出テーブル.コード　as コード、抽出テーブル.seq　as seq,抽出テーブル2.フラグ as フラグ 　 from 抽出テーブル， (select コード,フラグ　from　抽出テーブル where seq = 1) 抽出テーブル２ where 抽出テーブル1.コード(+)=抽出テーブル2.コード order by 抽出テーブル.コード,抽出テーブル.seq;
connect_by_root演算子で最上位の値を取得できます。 SELECT CASE WHEN LEVEL = 1 THEN OYACD ELSE CONNECT_BY_ROOT KOCD END OYACD ,KOCD FROM TBL1 START WITH OYACD = 0 CONNECT BY PRIOR KOCD = OYACD; としてみてください。 最上位の場合はOYACDをそのまま出力するようにするために、LEVELを使って判断しています。 すでに読んでいらっしゃるかもしれませんが、こちらが分かりやすく解説してくれていると思います。 http://codezine.jp/article/corner/301
実行はできますが ・更新（コミット）以前の古い統計情報を取得することになる。 ・更新処理が書き込んでいるUNDO表領域を読み取りにいくのでI/Oの競合が発生する。 ので、注意が必要です。
#1 のmuyoshyid です。 ももうひとつの方法を、 A Instance, B Instance に接続するListener を分けられるなら、 sqlnet.ora にTCP.INVITED_NODES, TCP.VALIDNODE_CHECKING を指定してListener を 再起動してみて下さい。 その際、A Instance用, B Instance 用のListener はそれぞれ別のsqlnet.ora を 使用する必要がありますので、そこはTNS_ADMIN 環境変数で切り分けて下さい。
(1)１サーバの中に顧客毎にインスタンス（データベース）を作成する (2)１インスタンスに顧客分ユーザを作成してユーザ毎にスキーマをもたせる >セキュリティや個別メンテナンスを考慮すると前者の方が良いのでしょうが とおよそ認識しておられるとおりですし、ANO1の方が書いておられるとおりです。 で、追加するポイントとして、 障害発生時にはどうなるかという点くらいですか。 (1)なら、ハードやOSレベルの障害でなければ、１インスタンス＝１ユーザがダウンするだけ。 (2)なら、全ユーザがダウン。 最近はあまりないですけど、セッションが切れないとかだんまりになっているとかが おきたときにインスタンスを立ち上げなおしたりしたくなることはあります。 必ずサーバを再起動するとか考えておられるなら、(1)でも、全ユーザダウンなので一緒。 あと、資源の利用は(2)のほうが効率的であり、作業の手間も少ないのですが、どれくらい良いかは、 テーブルの持たせ方しだい。 ユーザ毎に別テーブルを持たせて、ユーザ毎にシノニムかビューを作って、同じ名前でプログラムから アクセスさせる方法もありえます。あるいはユーザ毎に同じ名前の別テーブルを作る方法も。 これらだと、効率的なのは、単にインスタンスに関連する資源だけ。 全ユーザが同じテーブルを参照するようにすると、全テーブルに会社区分を入れて、それを参照して 処理が動くようにしないといけないので今がそうなっていないと作業の手間はかえって増えます。 それより、ちょっと気になったのが、 >複数社に納入しているC/S型パッケージ業務ソフトを、 >ASP化しようと検討しています。 >（現状は各顧客先にサーバとクライアントを >　設置していますが、今後はサーバのみ１台に集約して >　データセンタに設置し、顧客側にはクライアントのみ >　設置する予定です。） どうされるのかよくわからない書き方ですが、 ＤＢサーバのみデータセンタにおいてクライアントから直接アクセスさせるつもりですか？ クライアントとやりとりするサーバはDMZ(非武装地帯)といわれるサーバへの攻撃に対して抵抗力の弱い場所 （今はそんなに弱くないかもしれませんが、それでも万一のときに大丈夫なように内部ネットワークと分けているのが普通。）におかざる得ないので、 ＤＢサーバをおくと攻撃受けてデータ漏洩事件とか比較的簡単に起きてしまいますが。 ＡＰサーバが間に入っているのだが記載を省略しているのならいいのですが。
動作保証自体はOracleサポートに確認してください。 32bit版を64bitOSにインストールしても32bitで動くので問題はないと思います。 ※この組合せで使ったことはないですが。
ノーアーカイブモード前提ですみませんが ・移行先サーバーにダミーのデータベースを構築（データベース名は同一にする） ・移行先サーバーにsql*plusでsysdbaでログインしShutdown ・現行のOracle停止 ・制御ファイル（通常、*.CTL）、データベースファイル（通常、*.DBF）、REDOログ（通常、*.LOG）、初期化パラメータファイルをすべて移行先にコピー ・移行先サーバーでsql*plusから「STARTUP」で起動。エラーメッセージがでたら「RECOVER」を実行。
to_char(to_date('9999/01/15', 'YYYY-MM-DD'), 'YYYY/MM/') でもいいですが、 substr('9999/01/15', 1, 8) の方がオーバーヘッドが軽そうですね。 性能も含めて両方試してみると良いでしょう。
こんな感じじゃダメですか？ （formatの部分はDATE型を6桁または4桁文字列に変換するための書式） update table_b b set 到着日 = TO_CHAR(SYSDATE + 1, 'format') where exists (select * from table_a a where a.伝票No = b.伝票No and a.発送日 = TO_CHAR(SYSDATE, 'format')); update table_a set 到着日 = TO_CHAR(SYSDATE + 1, 'format') where 発送日 = TO_CHAR(SYSDATE, 'format') and exists (select * from table_a a where a.伝票No = b.伝票No); commit/rollback; 何らかの理由で冗長なレコードを持っているなら トリガーを実装すべきだとは思いますけどね。
#2 のmuyoshid です。 済みません。 訂正します。 #1 の方がおっしゃられている通り、Stored Procedure の中でファイル 出力させたい場合は、UTL_FILE パッケージを使用する必要があります。 DBMS_OUTPUT は単に画面に出力するだけで、spool はSQL*Plus の機能です。
【解決策】 １．まず、実行計画を確認しましょう。appendヒントがうまく効いているか、知りたいですね。 explain plan for SQL文; select * from table(dbms_xplan.display()); → "LOAD AS SELECT"ならダイレクトパスインサートになっている（appendヒントが効いている）。しかし、これだけ遅いと、なっていないのではないか。なっていない場合は、"INSERT STATEMENT"（通常ＩＮＳＥＲＴ）のはず。 ２．ダイレクトパスインサートにならない理由としては、トリガーが設定されていることが考えられます。 select * from user_triggers; → 当該テーブルにトリガーはついていないでしょうか？ ３．トリガーがついているのであれば、それが無効化しても良いものであれば、無効にしてＩＮＳＥＲＴすれば、ダイレクトパスインサートできると思います。 alter table tbl_temp_eoutsrcrate disable all triggers; ＳＱＬ実行 -- 有効に戻す alter table tbl_temp_eoutsrcrate enable all triggers; しかし、意味があってトリガーがついているのであれば、単純に無効にするとダメかもですが、設計を確認してみてください。 【原因について】 トリガー以外だと、redoログやログバッファ、データファイルの配置や設定がまずくて更新処理が非常に遅いなんていう可能性もゼロではありません。はっきり特定するためには、トレースを取りましょう。 以下を実行するユーザにＡＬＴＥＲ ＳＥＳＳＩＯＮ権限が必要ですので無ければ権限付与してください。 alter session set sql_trace = true; SQL実行 alter session set sql_trace = false; → v$parameterの"user_dump_dest"にtrcファイルが出力される。そのファイルをtkprofコマンドで整形した結果を確認すると、何に時間がかかったかが分かる。
「複数のキーの中でひとつだけ違うレコード」 これはどういう意味でしょうか？ 複合キーを構成する列のうち一つだけ違うというものでしょうか？ 出来ないことはないと思いますが4列でも ( A.フィールド１=B.フィールド１ AND A.フィールド2=B.フィールド2 AND A.フィールド3=B.フィールド3 AND A.フィールド4<>B.フィールド4 ) OR ( A.フィールド１=B.フィールド１ AND A.フィールド2=B.フィールド2 AND A.フィールド3<>B.フィールド3 AND A.フィールド4=B.フィールド4 ) OR ( A.フィールド１=B.フィールド１ AND A.フィールド2<>B.フィールド2 AND A.フィールド3=B.フィールド3 AND A.フィールド4=B.フィールド4 ) OR ( A.フィールド１<>B.フィールド１ AND A.フィールド2=B.フィールド2 AND A.フィールド3=B.フィールド3 AND A.フィールド4=B.フィールド4 ) のような述語が必要になりますね。 あと、「あ」「」い」「う」で「あ」「い」だけ抽出するという基準はなんなのでしょうか？（抽出するレコードの優先順位）
> 何をさしてもオブジェクト、というところが非常にネックです。 > テーブルやビューや索引などがデータベースオブジェクト、 > というならば、例えばPostgreSQLにも同様のものがあると思いますし、 索引がオブジェクトだとは言っていません。 「Oracle Databaseの場合……索引もオブジェクト」だと回答しました。 例えば，ある架空のデータベースソフトを仮定します。 このDBソフトでは，表中の属性に索引を定義することができるとします。 そしてこの索引は，表を構成するファイルの中に隠された領域に実装されているとしましょう。 表の中の一部として索引が存在する，となると，表を削除すると同時に索引も消えますよね。であるなら，この索引をオブジェクトと呼ぶのは適切ではありません。 それに対して Oracle Databaseの場合は，表も索引もそれぞれ別物として実装しているのですよね。索引を削除せずに，索引を表から切り離すこともできるし，索引を再び表に紐付けることもできる。表を削除したって，索引は残せる。だからOracleでは，索引はオブジェクトと呼ばれるのが適切なわけです。 　> オブジェクト(object)という英単語は，単位として扱える 　> （ひと固まりとなっている）「物」を表す概念です。 あるDBソフトに索引機能があることと，そのDBソフトで索引がオブジェクトとして実装されていることとは，別の問題です。
> 同じタイトル・同じバージョンのOracle University Live Virtual Classも対象となります。 http://education.oracle.com/pls/web_prod-plq-dad … > Oracle University eKit は、iPad でも閲覧可能です。 http://education.oracle.co.uk/html/oracle/70JA/I … とのこと。 希望の時間帯で実施されているコースをご自身で探したり，Oracle側に問い合わせてみてはいかがですか。 ---------------- 以下，直接の回答ではありません，悪しからず。 私個人の考えですが，Oracle MASTER Gold の履修コース修了要件を会社補助金なしでクリアしようなんて，酔狂な人だと思います。Bronze合格の段階ですでに知識レベルはクリアしている「入門 SQL基礎 I」だって履修コースとして認められるのですよ。ですから，コース受講料として支払われる20万円以上のカネは，Goldレベルの技術知識の持ち主であることを示すために必要なのではなく，Oracleブランドで商売をしたい者に対するミカジメ料・Oracleに対する忠誠心を示すための貢物だとでも捉えた方がいいでしょう。 企業がそのブランド価値をカネで買おうとするのは分かります。でも，個人が技術者としてそれをするのは解せません（20万円が小遣い金程度に思えるお金持ちなら話は別ですが）。 別の言い方をしてみます。 もしも私の会社に，Gold履修コース修了要件の20万円以上のカネを自分のポケットマネーで出しました，という人が入社応募してきたなら，その人にPCと Oracle Databaseを与えて実機でのOracle管理の実力を試したくなります。もっとありていに言うと，資格マニアか経験豊富な実力者か，20万円以上を注ぎ込んだGold様の実力を見せていただきましょうか，といったところです。 個人で勉強しているのなら，そんなことに20万円以上のカネを注ぎ込むのは無駄，もっと有意義な勉強のために20万円が使えるはず，というのが正常の感覚なはずです。 私は，「Gold DBA科目には合格していますが，個人受験なので履修コースに20万円以上のカネを注ぎ込めず，資格としてはSilverです」と堂々と言える人の方が，その金銭感覚を信用できますし，資格を神格視しないビジネス感覚も信頼できます。
キーボードの左上の半角キーを押す 戻すときはキーボード中央の変革キーの 右隣を押す
テスト環境が手元にあるようなら実際に試した方が話が早いでしょう。 SELECT COUNT(*) FROM テーブルA,テーブルB WHERE テーブルA.会社ＣＤ = テーブルB.会社ＣＤ AND テーブルA.型式ＣＤ = テーブルB.型式ＣＤ AND テーブルA.区分 = '1' AND テーブルB.種別 = ' ' ;
記載のテーブルと質問内容の関連がわかりづらいのですが・・・ 月売上TRは稼働区分が設定されていますが、すでに存在するテーブルなのですか？ それとも別のテーブルを基にこのデータを抽出したいということですか？ >・休業MTの休業区分 = 09 且つ その休業日合計が同月内で7日以内場合に稼動タイプにフルを適用。 >・休業MTの休業区分 = 03 である限り、同月に何回休業してもフルを適用 これらはどちらが優先されるのでしょうか？ 記載の休業MTを、店舗CD：AAA・年月：201103で見ると 休業区分：03で休業日数：14、休業区分：09で休業日数：1 のデータが取得できることになります。 この場合はどうなるのでしょうか？記載の月売上TRでは"特殊"となっていますけど。 また、休業MTの開始日と終了日が月またぎになっていることはないのでしょうか。 それによって休業日の計算のしかたが全然ちがってくると思います。 もうちょっと正確な情報を教えていただけますか？ また、CASEやEXISTSをどこでどう使おうとしているのでしょうか。 うまくいかないというSQLも記載できますか？
こんにちわ > async disk IO　という聞きなれないイベントが出ております DBWR が、データファイルに対して非同期書込みを行っている場合に発生します。 リカバリ要件のため、Redo Log に対する更新は同期書込みを行う 必要がありますが、データファイルは (Redo Log に更新内容が記録されているため) 非同期書込みを行います。
＃１ですが、実務で実際に行ってること（考え方）を回答したんだけど。 レスが何もないということはあまりお困りではなかったのかな？ selectの結果が１０００行なら、hogehoge.sqlの中身に１０００行のUpdate文が作成されるんですよ。 update 会員マスタ set flg = '1' where 会員ID ='0001'; update 会員マスタ set flg = '1' where 会員ID ='0002'; update 会員マスタ set flg = '1' where 会員ID ='0003'; のように。
Oracle® Databaseインストレーション・ガイド 11g リリース2(11.2)for Linux http://download.oracle.com/docs/cd/E16338_01/ins … の「2.3.1 オペレーティング・システムの要件」 Linux x86の場合: Asianux Server 3 SP2 Oracle Linux 4 Update 7 Oracle Linux 5 Update 2 Red Hat Enterprise Linux 4 Update 7 Red Hat Enterprise Linux 5 Update 2 SUSE Linux Enterprise Server 10 SP2 SUSE Linux Enterprise Server 11 となっており、Ubuntuは対象外になっています。 ただし、CentOSはRed Hat互換でインストール可能です。 http://www.asami.asia/tech/oracle/11gR2-install. …
Updateしてないようですけど。 CURSOR CURSOR1 IS SELECT * FROM T_テーブル FOR UPDATE; として、 REC_CURSOR1.カラム := HIGH_VALUE_WORK; ではなく、 UPDATE T_テーブル SET .カラム = HIGH_VALUE_WORK WHERE CURRENT OF CURSOR1 ; では
>>１．オラクルマスターブロンズは短期間集中的に勉強すれば合格する資格なのか。 人によるでしょうが、データベースと言う単語を知ったというレベルなら、半年くらい勉強が必要かもしれません。もちろん記憶力が強くて、試験勉強（一夜漬け？）が得意な方であれば、もっと早いかもしれません。ただ、オラクルの試験は、「単なる試験勉強が上手なだけの人は合格させない」という方針だと推測していますので、短期集中の試験勉強ではなかなか合格できないようにしていると思います。 >>２．合格するためには、どの程度の知識を身につけなければならないのか。 黒本に書かれたレベル＋アルファではないでしょうか？実際の試験では、「こんなの黒本の問題になかったよ！」という問題が出ると思いますからね。 >>（３．会社の意図は何か・・・） そりゃあ、質問者さんの会社が他社から仕事を獲得するとき「当社にはオラクルマスターが○○人います。技術力については安心して仕事をまかせてください。（そのかわり単価はちょっと高いですよ！）」とアピールできるようにするためでしょう。 ただ、昔に比べて、オラクルもＳＱＬＳｅｒｖｅｒのように、とりあえず簡単に使えるように改善されてきていますし、ＭｙＳＱＬなど他のフリーなデータベースも十分に使えるレベルになってきてますから、オラクルマスタに対する市場評価は、昔ほどは高くないかもしれません。 データベースの専門月刊誌であったＤＢマガジンもしばらく前に休刊になりましたし・・・。
こんにちわ > コラムのタイトルが表示されなくなってしまいます。 $ORCLE_HOME/sqlplus/admin/login.sql でPAGESIZE が0 に 設定されていませんか？ PAGESIZE が0に設定されている場合、ヘッダ情報は出力されなかった 筈です。 PAGESIZE が0に設定されていない状態でタイトルが表示されない 状況が再現するのであれば、show allの結果を教えて下さい。
>最新の日付が当月の場合はデータを残す。 >つまり、前月以前のデータは除外となります。 別に最新にこだわる必要はなく（当月のデータが１件でもあれば最新じゃなくても条件成立のため） 補足の Select ＊ from aテーブル a where not exists (select 'X' from bテーブル b where a.商品番号 = b.商品番号) and not exists (select 'X' from cテーブル where (a.商品番号 = c.商品番号) and /* ここから */ (select to_char(to_date(max(c.日付),'YYYYMM'),'YYYYMM') ,'YYYYMM') < to_char(to_date(to_char(sysdate,'YYYYMM'),'YYYYMM')-1 ,'YYYYMM') の /* ここから */以下を、 to_char(to_date(c.日付,'YYYYMM'),'YYYYMM') < to_char(to_date(to_char(sysdate,'YYYYMM'),'YYYYMM')-1,'YYYYMM') ) としても取得できます。但し、負荷が高い、レスポンスが悪いかな。 and a.商品番号 not in (select distinct 商品番号 from cテーブル where trunc(日付,'MM')>=trunc(sysdate,'MM') ) か and not exists (select 'X' from cテーブル where c.商品番号 = a.商品番号 and c.日付 = (select max(c2.日付) from cテーブル c2 where c2.商品番号 = c.商品番号) and trunc(c.日付,'MM')>=trunc(sysdate,'MM') ) あるいは and not exists (select 'X' from cテーブル where c.商品番号 = a.商品番号 and c.日付 = (select max(c2.日付) from cテーブル c2 where c2.商品番号 = c.商品番号 and trunc(c2.日付,'MM')>=trunc(sysdate,'MM') ) か。 どれが早いかは、抽出された結果の商品番号の件数やaテーブルの件数等に依存しますので 良く分かりませんが。
いまいちルールがわかんないんだけど、 > ２．次に、取得したF_2のXXX・DDDを条件に、F_1のDDD、F_2のYYYを取得します。 XXXはどう条件に絡めてるの？？ 末端が欲しいなら select F_1, F_2 from ( select F_1, F_2, Level, connect_by_IsLeaf as isLeaf from TBL start with F_1 = 'AAA' connect by F_1 = prior F_2 ) where isLeaf=1 一番深いとこが知りたいなら select F_1, F_2 from ( select F_1, F_2, Level from TBL start with F_1 = 'AAA' connect by F_1 = prior F_2 order by Level desc ) where rownum=1 かな？
＃１です。 > 同じデータであることは間違いありません。 ＃２さんのご指摘のとおり、確認することからはじめたほうがよさそうですよ。 「レコード件数が一致しているか」二つの環境を確かめましたか？ まずは結合しないで、レコード数と数値項目のSUMを取得。 select count(*), count(DISTINCT ID) from MST_ENTRY; 同数が得られれば良いが、2:1の結果が出るようなら 「ID列にPRIMARY KEY貼り忘れてる＆うっかりINSERTを2回実行」とか。 select count(*), sum(MCNT), sum(PCNT) from TBL_VOTE; こちらも二つの環境で完全一致しますか？
＞VBに関しても同様ということでしょうか・・？ データベースを使用するようなアプリケーションを作成するなら 用意されたデータベースを利用する場合も 自分でデータベースを構築して使用する場合も 知識があったほうがいいですね
インラインビュー（サブクエリ）を作り別名を付ければ通りますよ。
DBLinkもダメってことなら、Accessで両方のテーブルのリンクテーブル作って AccessのSQLを発行すればSQLのみで結合できますけどね。 データ量によってはレスポンス悪いしOracleのサーバに負荷かかるし お勧めではありませんけど。 プログラムで、両方のテーブルの全レコード取得して、マッチングプログラム作るよりはまし。 ということで一応書いておきます。
http://www.shift-the-oracle.com/plsql/update-whe … の「WHERE CURRENT OF による UPDATE 処理」をサンプルに組んでみられては？ ここの cursor cur is select id, txt from insert_sample for update; を cursor cur is select t.年月,t.店舗区分１,t.売上取引先,m.開始日,m.終了日 from トランT t,マスタT m for update of t.店舗区分; とすればよいと思います（未確認）。 この形で、t.年月とm.開始日,m.終了日を判定してもいいし（遅いし負荷が高いけど）、 このfrom句の次にwhere句でt.年月とm.開始日,m.終了日に関する条件を設定してもいい （早いし負荷が軽いのでこちらをお勧め。） 注：for update of について OF句で指定した表のSELECTしたレコードがロックされますが、OF句で指定してない表はロックされません。
前方一致ならインデックスが効くと思います。 当然、DBMSがそのインデックスを使用する実行計画を選択した場合ですが。 2回SELECTした場合はディスク走査が2回になりそうです。 厳密に言えば、クエリーのパース時間も2回分になるでしょう。 LIKE 'A%' OR LIKE 'B%'の場合はディスク走査はおそらく1回で済みそうです。 キャッシュやバッファ等もあるので、2回実行するからといって、純粋に時間も2倍とはならないでしょうが、LIKE条件をORで結合したほうが速そうな印象はあります。 いずれにしても、現在のサーバー性能で数万件程度のデータ操作なら、大差はないと思います。 ただし、ループ内で実行する等、高頻度で実行するのなら、小さな差も無視できません。 どうしても白黒つけたい場合、想定データ量も分かっているようですし、自分ならテストデータを作って試してみます。一応の根拠にはなりますよね。
VB6を使って、ということではないのですが以下のSQLを実行すればいいのではないかと思います。 UPDATE Aテーブル A SET ｃｄ３ = 0 WHERE NOT EXISTS ( SELECT * FROM Bテーブル B WHERE A.ｃｄ１ = B.ｃｄ１ AND A.ｃｄ２ = B.ｃｄ２);
INSTERT の前に　COMMIT文があると、 結果がちがうのかなぁ？
一時的に「set define off」を実行してください。 置換変数機能がむこうになります。 使うときは「set define on」で。
ANo.4のbaunceです。すみません。 他の方が回答されている事に気づきませんでした。 nora1962さんの回答と同じでした。 nora1962さんごめんなさい 大変失礼しました。
RMANに詳しくはないのですが、気になるところがあります。 > ORA-19612:データ・ファイル1はmissing or corrupt dataのため > リストアされませんでした。 ということなので、フルバックアップデータからの「データファイル1」の リストアに失敗しています。この時点ではアーカイブログやREDO ログは 使用されないはずです。 「(5).RMANでバックアップ」したデータのバックアップないしは再構築した 環境へのバックアップデータのコピーに失敗しているということは ないでしょうか。 あるいは データ・ファイル1 が corrupt data のためリストアされない のでしたら、データファイル1を削除して restore database すると うまくいかないでしょうか。
select max(case when rnum = 1 then キー番号 else null end) キー番号1 ,max(case when rnum = 1 then 内容 else null end) 内容1 ,max(case when rnum = 2 then キー番号 else null end) キー番号2 ,max(case when rnum = 2 then 内容 else null end) 内容2 ,max(case when rnum = 3 then キー番号 else null end) キー番号3 ,max(case when rnum = 3 then 内容 else null end) 内容3 from ( select キー番号,内容, row_number() over(order by キー番号) rnum from テーブルＡ where 利用フラグ = 1); みたいなことでしょうか？ 質問の際にOracleのバージョンも書いたほうがいいですよ。 このSQLも古いバージョンでは動かないので。
Decodeってのもあります。 Select NO, Decode( No, 1, 'aaa', 2, 'bbb', 3, 'ccc', '???' ) As "CODE" From TBL CaseとDecodeは似たような関数ですが、Caseの方が多機能です。 でも個人的にはDecodeの方が1列にまとめ易いので好き。 必要に応じて使い分けましょう。
osamuyさんの回答のとおり、まず提示のSQL自体が期待する結果にならないですよね。 「T1」＆「OP123」と「T5」＆「A7777」を抽出する条件を再度明確にしてもらえますか？ >棚コードが主キー、商品コードが副キーとしたときこの組み合わせ 明らかにこれは違いますよね。
ま、参考までに。 OracleにおいてRMANやRMAN以外のバックアップ/リカバリはOSの復旧は完了している前提ですから。 ここでOracleのバックアップ/リカバリの講義をするつもりはさらさら無いのであしからず。 参考URL：http://otndnld.oracle.co.jp/document/products/or …
ちょっと違いますね。訂正版です。 WITH CCC AS ( SELECT コード, TO_CHAR(TO_DATE(適用終了日, 'YYYYMMDD') + 1, 'YYYYMMDD') AS 適用開始日, '99999999' AS 適用終了日 FROM BBB WHERE 適用終了日 <> '99999999' ) SELECT DISTINCT コード FROM (( SELECT コード, 適用開始日, 適用終了日 FROM AAA MINUS SELECT コード, 適用開始日, 適用終了日 FROM BBB MINUS SELECT コード, 適用開始日, 適用終了日 FROM CCC ) UNION ALL ( SELECT コード, 適用開始日, 適用終了日 FROM BBB UNION ALL SELECT コード, 適用開始日, 適用終了日 FROM CCC MINUS SELECT コード, 適用開始日, 適用終了日 FROM AAA )) /
#2 です。 因みに、そのPL/SQLから切り出す（実行計画を取りたい）対象のクエリが沢山あるなら、SQLトレースの方が遥かに楽です。 autotraceと同様に、ただ単に、実行するだけなので。 そして正確です。 PL/SQLからクエリを切り出すと言う事は、バインド変数・置換変数（リテラル）による実行計画の差異を気にかけて実行計画を取る必要があります。 （そこをカバーできるようにSQLを書き換える必要がある） SQLトレースは、PL/SQL内で実際に実行されたクエリ、そのものの実行計画なので、正確、と言うわけです。 サーバー側での作業が必須であり、そこの工数（ってほどでもないけど）とのトレードオフですね。 一回、定常的なスキームにしてしまえば、それほど手間ではありません。
select 品目,番号,日時,数量 from ( select 品目,番号,日時,数量 from 作業 where 番号>=17000 order by 番号 ) where rownum=1; 必要があれば、ORDER BY の条件に日時、品目などを追加してください。
AUDIT文で監査を設定すれば、操作が行われた日付時刻も取得できます。
見やすいように、1バイト空白2個を2バイト空白に変換しました。 【9i】 SELECT STATEMENT REMOTE　 Cost = 2933 　SORT UNIQUE　 　　FILTER　　 　　　NESTED LOOPS　　 　　　　NESTED LOOPS　　 　　　　　HASH JOIN　　 　　　　　　TABLE ACCESS FULL テーブルA　 　　　　　　INDEX FAST FULL SCAN PK_テーブルB UNIQUE 　　　　　TABLE ACCESS FULL テーブルA　←　問題はここ 　　　　INDEX UNIQUE SCAN PK_テーブルB UNIQUE 　　　INDEX UNIQUE SCAN PK_テーブルB UNIQUE 【10g】 SELECT STATEMENT REMOTE Cost = 180 　SORT UNIQUE 　　TABLE ACCESS BY INDEX ROWID テーブルA TABLE 　　　NESTED LOOPS 　　　　NESTED LOOPS 　　　　　NESTED LOOPS ANTI 　　　　　　HASH JOIN 　　　　　　　TABLE ACCESS FULL テーブルA TABLE 　　　　　　　INDEX FULL SCAN PK_テーブルB INDEX (UNIQUE) 　　　　　　INDEX UNIQUE SCAN PK_テーブルB INDEX (UNIQUE) 　　　　　INDEX RANGE SCAN PK_テーブルB INDEX (UNIQUE) 　　　　INDEX RANGE SCAN テーブルA_IDX01 INDEX NESTED LOOP JOINの中にテーブルAのFULL SCANが入っています。 これではコストが高くなって当然です。(テーブルAがかなり小さいなら別ですが） 疑問なのは10gで該当する部分が「INDEX UNIQUE SCAN PK_テーブルB INDEX (UNIQUE)」になっていてテーブル名も違います。 失礼ですがコピーする際にミスはありませんでしたでしょうか。 解決の方向としては、実行計画の「TABLE ACCESS FULL テーブルA」を「INDEX SCAN」に変えることです。 これ以上は実際のSQLと作成されているINDEXの情報がないと困難です。 情報の補足をお願いします。
書けなくはないですが…… SELECT YMD, LTRIM(SYS_CONNECT_BY_PATH(HIN, ' '), ' ') AS HIN FROM ( SELECT YMD, HIN, COUNT(*) OVER (PARTITION BY YMD) AS cnt, ROW_NUMBER() OVER (PARTITION BY YMD ORDER BY HIN) AS rn FROM TBL ) WHERE LEVEL = cnt START WITH rn = 1 CONNECT BY PRIOR YMD = YMD AND PRIOR rn = rn - 1
こんなのはどうでしょうか？ select a.bangou || '-' || b.bangou from(select a.bangou,row_number() over(order by a.bangou) rbangou from tbl a where not exists(select * from tbl b where a.bangou - 1 = b.bangou)) a left join (select a.bangou,row_number() over(order by a.bangou) rbangou from tbl a where not exists(select * from tbl b where a.bangou + 1 = b.bangou)) b on (a.rbangou = b.rbangou);
SQLServerのテーブル変数をよく分かっていないので外れているかもしれませんが、 コレクション http://download.oracle.com/docs/cd/E16338_01/app … や カーソル変数 http://download.oracle.com/docs/cd/E16338_01/app … ではダメでしょうか？
こんにちわ。 > Windowsの標準機能のバックアップ(バックアップデータには、system stateも > 含んでいます。)からバックアップしておいたデータを復元させました。 このバックアップが、データベースのバックアップとして使用できない方法で 取得された可能性があります。 このバックアップはどのように取得されましたか？ データベースのバックアップ方法は、大きく以下の2通りです。 ・DB を停止して全データファイル, 制御ファイル, Redo Log ファイルをバックアップする。 ・アーカイブ運用している前提で、Alter tablespace ～ begin backup を行い 　対象表領域をOS コマンドでコピーする。 OS コマンドでのコピーが完了したら、Alter tablespace ～ end backup を行う。 こういった事をせずに、データベース運用中にデータファイル等を単にコピー しただけでは、バックアップとして使用できません。 D ドライブに、全てのデータファイル, 制御ファイル, Redo Log ファイルが格納 されていて、C ドライブ障害時のD ドライブの内容が全てのこっているのであれば、 それらを全て復元してインスタンスを再起動すれば、インスタンス・リカバリが 行われてデータベースがオープンできる可能性があります。
Oracleは全然わからないのですが、個人的にデータベースの正規表現がどこまで利用可能なのか気になったので参戦させてください。 まず、Oracle11gだと仮定して 次の二つのページの機能が使える事を前提にしました。 10gだとsubexprが使えないようなので、別の解法が必要になると思います。 http://download.oracle.com/docs/cd/E16338_01/ser … http://download.oracle.com/docs/cd/E16338_01/ser … また、マッチ条件を次のように決めつけました。 「SENTENCE」カラムの最後に入っている＜foo：bar＞のfoo部分。 「SENTENCE」カラムの末尾には必ず＜foo：bar＞が入り、その後よけいな文字列はつかない そうすると、ID1~3まで全て次のような条件でいけそうな気がします。（'i'は他のでも構わないと思います。） REGEXP_SUBSTR(SENTENCE, '^.*＜(.+?)：.+?＞$', 1, 1, 'i', 1) さすがにもっとちゃんとした正規表現・解法がありそうな気もするんですが・・・ もし簡単に試せる環境なのであれば、取り敢えず動いたかどうかフィードバックして頂けると嬉しいです。 （他の方々からもっとちゃんとした回答がついたら、この書き込みは無視しちゃってください）
OracleさんのOTNは参照されてますか？ 参考URL：http://www.oracle.com/technetwork/jp/index.html
get_daisya.cshの中身がわからないとなんともいえません。 ちなみに、cshでlsを使用すると以下のように条件にマッチしないと出力されます。 $ ls a* ls: 照合パターンに合いません. ※aからはじまるファイルが存在しないので出力されます。 ちなみに、この場合はエラーコードは1です。 $ echo $? 1 シェルの中でマッチするファイルが存在しない時の処理がかかれてないのではないでしょうか？ シェルの中でlsを使用している箇所を探し、実際にどんなコマンドを発行しているか確認してください。
> このレジストリの設定を変更できない場合は権限の問題でしょうか? そうだと思います。
SELECT BLOCKS * BLOCK_SIZE /1024/1024/1024 GB_SIZE FROM V$ARCHIVED_LOG; ですかね
startup upgrade で起動するとどうでしょうか。 また、alert.logは確認されましたか？
インストーラーのエラーメッセージやエラーログを確認してはいかがですか。
データの内容がわからないのではっきりとはいえませんが、 データの内容によっては、質問のSQLはまずいです。 商品コード,日付 101,5/5 102,5/6 103,5/4 とあると、102しかとってこないのでは？ 普通は、 SELECT 商品コード FROM 商品テーブル X WHERE 商品コード IN (101, 102, 103) AND 在庫区分 = '0' AND 日付 = (SELECT MAX(日付) FROM 商品テーブル Y WHERE X.商品コード = Y.商品コード AND Y.在庫区分 = '0' ) とします。 で、もう１点問題があって ランク の部分です。 商品コード,日付,ランク 101,5/5,3 101,5/6,2 とあるとどちらを優先ですか？ このパターンがないとして、 商品コード,日付,ランク 101,5/5,3 101,5/5,2 101,5/5,1 のようなデータが入っているので、 最大の日付を優先とすると、 AND X.ランク = (SELECT MAX(ランク) FROM 商品テーブル Z WHERE X.商品コード = Z.商品コード AND Z.在庫区分 = '0' AND Z.日付 = (SELECT MAX(日付) FROM 商品テーブル Q WHERE Q.商品コード = Z.商品コード AND Q.在庫区分 = '0' ) ) とでもしますか。 別の方法 SELECT X.商品コード FROM 商品テーブル X, ( SELECT 商品コード,MAX(日付) as 日付 FROM 商品テーブル WHERE 商品コード IN (101, 102, 103) AND 在庫区分 = '0' group by 商品コード) Y, ( SELECT 商品コード,日付,MAX(ランク) as ランク FROM 商品テーブル WHERE 商品コード IN (101, 102, 103) AND 在庫区分 = '0' group by 商品コード,日付) Z WHERE x.商品コード IN (101, 102, 103) AND x.在庫区分 = '0' AND x.商品コード = Y.商品コード AND x.日付 = Y.日付 AND x.商品コード = Z.商品コード AND Y.日付 = Z.日付 AMD x.ランク = Z.ランク という方法もあります。 （副問い合わせで抽出された結果のデータ量が多いとリソースを食うし、レスポンスは悪いですが。）
可能かどうか、で言えば可能だと思います。 MDBファイルに書き込む方法については、おそらく質問者様が既にお調べになったのは Oracle Generic Connectivity（ODBC、OLE DBでの異機種接続）を使用する方法だと思います。 この場合、構文は ORACLE の構文になりますが、実行できるのは SELECT/INSERT/DELETE/UPDATE だけです（だったと思います）。 DDLすら実行できないので、当然データベースを作る（新規MDB作成）などは Generic Connectivity ではできません。 PL/SQLで（と言うかストアドで）MDBを作成する方法としては、 (1)Javaストアド (2)COM Automation呼び出し (3)外部プロシージャ呼び出し などが考えられます。 (1)はJava＋JDBCでソースを書く必要があります。 (3)はC/C++でソースを書く必要があります。 VB、VBA、VBSなどで CreateObjectを使った事があるなら、(2)のCOM Automation呼び出し（ORDCOMパッケージを使用）が一番やりやすいと思いますね、個人的には。 と、ここまで読んで何となく、おわかりかと思いますが、かなーり大変です。 異機種接続やCOM呼び出しでハマッた私が言うのですから、間違いありません。 単体テストレベルまで行き着くのもそれなりに大変ですが、仮にできたとしても、運用フェーズで、おそらくゲッソリするようなトラブルに見舞われる可能性が高いです。 しかもサポート（に入っていたとして）に聞いても、余り正確な解答が得られない事も考えられます。 ODBC、OLE DBでの異機種接続やCOM呼び出しなんて、実のところ、ORACLEにしてみたら「そんなのスコープ外です！」と言いたいところでしょう。 と、言う事でお薦めのソリューションは、PL/SQLからMDBを作成したり、更新したりはしない、別のアプローチを考える、と言う事です。 そもそも、ORACLEからMDBに書くのではなく、ODBC、OLE DBアプリケーションからORACLE向きとMDB向きの2コネクションを用意して書き込むスタイルなら（つまり逆向きにすれば）何ぼでもサンプルがありますよね。 どうしても、「ORACLEから」にするなら、最悪でも Generic Connectivity までにしておくべきでしょう。 PL/SQLを考えている、と言う事は、その無名PL/SQLなりストアドなりを実行するアプリケーションがあるわけですよね？ 例えば、それがWindowsのバッチであれば、MDBの雛形をコピーするようなバッチなどを用意しておき、PL/SQLの前に実行すればいいわけです。
SQL はSQL_ID とHASH_VALUE でユニークになっていたと思いますが。 HASH_VALUE だけでは衝突の可能性が全くないとは言えないことはご認識の 通りだと思います。 もっとも、そんな簡単に衝突するのであればSHA1やMD5などが役に立たないと いうことにも繋がってくるので、故意に衝突させることは不可能なレベルではありますが。
>「ウィンドウのサーバーにオラクルを載せた方がコストパフォマンスがあがる場合もあります」 って言われたら、Windows Server 2008などにOracleをインストールするってことだと思いますけど。 Windows ServerとMicrosoft SQL Serverは全く別物です。
No.3です。 > Oracle関連の或る入門書の中で、何故か1521番のポート開放の必要性が強調されていました その入門書にどのように書かれているのかわかりませんが、それは「ルーターやファイアーウォールの外からアクセスする場合」という前提条件の上での説明ではないですか? http://otndnld.oracle.co.jp/document/products/as … にある正式なインストーレーションガイドでは、「4.7.6 ループバック・アダプタのインストール」にてループバックアダプタのことが書いてありますが、そこにはポート開放が必要だとは書かれていません。また、「付録D ファイアウォール内で開くポート」にて開放すべきポート番号が書かれていますが、そこの図D-1にあるように、ポート1521の開放はLANの外から内部にアクセスする場合に必要となるものです。
一般的に、ループバックとは自分自身に対して接続することを言います。 自分自身に対して接続するので、自分以外の機器(＝外部)と通信することはないかと。 QNo.6710494からの質問っぽいですけど、多分「Microsoft loopback Adapter」についての理解が必要と思います。 http://www.google.co.jp/search?hl=ja&lr=lang_ja& … 要はDHCPなネットワークだと後でまずいことが起きるかもしれないから、固定的に使えるネットワークを仮想でもいいから準備しておけと。
「インポート時」というのはimp パラメータの「index=y」のことでしょうか？ 索引データのインポートをしないで、＃１の方が回答してくれたやり方でCreate Indexを している時に、ということでしょうか？ もし、インポート後に個別にcreate indexしようとしたときに、表のフルスキャン で時間がかかる、という意味だったら、索引を作るために表を見に行くときの、 マルチブロック読み取りの問題です。 DB起動時の初期化パラメータDB_FILE_MULTIBLOCK_READ_COUNT（初期値8）を64とか 128(最大値)にするのが手っ取り早いでしょう。 キャッシュのヒット率やビジー状況を見て、DB_KEEP_CACHE_SIZEを変えるのも効果 あるでしょう。 一般的にはそんなところです。 ＃DBのバージョンやDiskの構成、IO等状況、具体的な手順・コマンド、何をしたときに、 何をもってボトルネックを判断したか、くらいは説明しないと、雑把すぎて、どう回答 すればいいのかわからないですよ。
参考は下記で 参考URL：http://www.shift-the-oracle.com/sql/functions/rt …
存在するかどうかでいいんですね？ SELECT COALESCE(SUM(CASE WHEN 項目名 = C THEN 1 ELSE 0 END), 0) AS ANSWER_1, COUNT(*) AS ANSWER_2 FROM TEST WHERE 項目名 IN (A, B, C) いずれも1以上ならば存在する、0ならば存在しない。
こちらの情報を、参照してください。 ＯＴＮ－Ｊａｐａｎ掲示板より http://otn.oracle.co.jp/forum/message.jspa?messa …
>■テーブルＡのキーとテーブルＢのキーは繋がり、繋がったテーブルＢの情報は別レコードとして取得します。 という条件からテーブルＢのうち、テーブルＡに存在するキーのみのレコードを取得すると思われるので、 yorozu_yaさんのＳＱＬの一部だけ変えて、 SELECT A.キー, 'テーブルＡ' AS フラグ, A.項目1, NULL AS 項目2, NULL AS 項目3, NULL AS 同じキー, NULL AS 同じ値 FROM テーブルＡ A UNION ALL SELECT B.キー, 'テーブルＢ' AS フラグ, NULL AS 項目1, B.項目2, B.項目3, C.キー AS 同じキー, C.項目3 AS 同じ値 --FROM テーブルＢ AS B FROM (ＳＥＬＥＣＴ * FROM テーブルＢ B WHERE EXISTS (SELECT * FROM テーブルＡ A WHERE A.キー = B.キー)) B LEFT JOIN テーブルＢ C ON B.項目2 = C.項目2 AND B.キー <> C.キー ORDER BY 1, 2, 4; で希望の結果になると思われます。 （Oracleだとテーブル別名指定時にＡＳは使えないので消してあります） この回答でうまくいくようであれば、ベストアンサーはyorozu_yaさんにお願いしますm(__)m
こんにちわ。 > DB内のデータを「指定されたレコード数」だけ増幅したい 例えば、hoge表のデータを増幅させるとして、SQL*Plus から 以下のようにすると簡単にデータ増幅ができます。 ※ Primary Key があったりすると、エラーになりますが SQL> inset into hoge select * from hoge; SQL> / SQL> / SQL> / SQL> commit; テキストに出力するのであれば、こんな感じです。 SQL> select h.* from hoge h, (select 1 from user_tab_columns where rownum <= 100) t; → user_tab_columns に100件以上データがあれば、hoge 表のデータが100回出力されます。 データの中身を変えながら増幅させるのであれば、無名PL/SQL ブロックが便利です。
SIDはインスタンスの識別子、service_nameはサービス名。 インスタンスとサービスの違いはRAC を勉強されるとよくわかると思います。 サービス名は初期化パラメータのservice_namesで設定します。 設定されていない場合は先述のとおりdb_unuque_name.db_domainになります。 （これが同義と誤解されやすい原因となっているわけですが） ところで、service_namesパラメータですが、複数形になっていることからもわかるように、複数のサービス名をコンマ区切りで指定できるようになっています。 これをこのように使います。 ２ノードＲＡＣ環境で、インスタンス１（SID=hoge1）、インスタンス２（SID=hoge2）があったとします。 ノードを意識することなく接続できるようにするためにクライアント側のtnsnames.oraにはこんな設定を追加します。 HOGE.EXAMPLE.COM (DESCRIPTION = (LOAD_BALANCE = ON) (ADDRESS = (PROTOCOL = TCP)(HOST = host1)(PORT = 1521)) (ADDRESS = (PROTOCOL = TCP)(HOST = host2)(PORT = 1521)) (CONNECT_DATA = (SERVER = DECIDATED)(SERVICE_NAME = hoge.example.com)) ) インスタンス１とインスタンス２のservice_namesパラメータにhoge.example.comを追加します。すると、インスタンス１とインスタンス２にラウンドロビンで接続できるようになります。 ここで、もしtnsnames.oraのservice_name=...がSID=hoge1だったらどうなるでしょう？ インスタンス２のSIDはhoge2ですから一致せず、インスタンス２には接続できず、いつもインスタンス１に繋がってしまいます。 次に、一時的にメンテナンスのためにインスタンス２にアクセスしてほしくないケースを考えます。service_nameであれば、インスタンス２のservice_namesパラメータからhoge.example.comを削除することで（動的に変更できます）直ちにインスタンス１にのみ接続されるようにできます。 ここで、もしORACLE_SIDだったら・・・変更のためにインスタンスの再起動が必要になってしまいますね？ 最後にservice_namesは複数登録できます。３ノードRAC環境において、オンライン処理（service_name=ONLINE）、バッチ処理（service_name=BATCH）があったとします。 バッチ処理は１つのノード（インスタンス１）でのみ処理したいとします。オンライン処理は３つのノードでしたいとします。 そんなとき、service_nameであれば、 ＜＜サーバ側の初期化パラメータ＞＞ 1:service_names = online, batch 2:service_names = online 3.service_names = online ＜＜クライアント側のtnsnames.ora＞＞ オンライン処理 ONLINE.EXAMPLE.COM (DESCRIPTION = (LOAD_BALANCE = ON) (ADDRESS = (PROTOCOL = TCP)(HOST = host1)(PORT = 1521)) (ADDRESS = (PROTOCOL = TCP)(HOST = host2)(PORT = 1521)) (CONNECT_DATA = (SERVER = DECIDATED)(SERVICE_NAME = online.example.com)) ) BATCH.EXAMPLE.COM (DESCRIPTION = (LOAD_BALANCE = ON) (ADDRESS = (PROTOCOL = TCP)(HOST = host1)(PORT = 1521)) (ADDRESS = (PROTOCOL = TCP)(HOST = host2)(PORT = 1521)) (CONNECT_DATA = (SERVER = DECIDATED)(SERVICE_NAME = batch.example.com)) ) と、クライアント側では接続先サーバを気にすることなく構成できますね？ BATCHのノードを１から２にしたい場合の変更はサーバ側のみでできますよね？ serivce_namesの"batch"設定をノード２に移すだけです。
こんにちわ。 > これって両方設定しなくてはいけないのでしょうか？ 接続する対象が特定できれば良いので、どちらか一方で構わないです。 SID指定/SERVICE_NAME 指定でつながったり、つながらなかったりとの 事ですが、つながらない時ってどんなエラーが出ているのでしょう？
DATE型ではミリ秒を保持しないので、TO_DATE関数では変換できません。 ですので、TO_TIMESTAMP関数を使えばいいです。 >to_char(to_date(:DENPYO_DATE,'YYYY-MM-DD HH24:MI:SS.000'),'YYYYMMDD') to_char(to_timestamp(:DENPYO_DATE,'YYYY-MM-DD HH24:MI:SS.FF3'),'YYYYMMDD') もしくはSUBSTR関数を使って".000"を除外してもいいと思います。 to_char(to_date(substr(:DENPYO_DATE,1,19),'YYYY-MM-DD HH24:MI:SS'),'YYYYMMDD')
こんにちわ。 >おすすめのツールを教えていただけないでしょうか。 Transaction Generator がお手軽で良いと思います。 参考URL：http://www.transactiongenerator.com/
可能です。 フィールドリストを ( DENPYO_NO, SALES_QTY, PRICE, SECTION "substr(:DENPYO_NO,1,4)" ) このように定義すればいいです。
長い間使っていますが、出た事ありませんのでわかりませんが、 http://search.yahoo.co.jp/search?b=1&n=10&ei=UTF … など、出てくる場合は、初期設定か、エラーの場合ですよね。 違いは、ODBCドライバーが違うのでは？ ユーザーの権利が違うのでは？　（OSでのグループ設定） OSのパッチや、ベンダー製のドライバーなら、バージョンが違うとか、 その辺調べてみましたか？ 同じマシンでおくるなら、タイムアウトなど接続先の問題かと。
こんにちわ。 > 以下のSQLで確認した結果、PCT_USED等が表示されませんでした。 自動空きセグメント管理 (DBA_TABLESPACES.SEGMENT_SPACE_MANAGEMENT='AUTO') の表領域では、PCT_FREE, FREELIST, FREELIST GROUPS は無視されます。 ※ Oracle がビットマップで勝手に管理します。 詳細は、SQL リファレンスでCreate Tablespace を確認して下さい。
#1 のmuyoshidです。 補足＆訂正です。 access のProgram 名は、access.exe じゃなくてMSACCESS.EXE でした。 自セッションのProgram 列の取得は、こんな感じでできます。 select lower(program) from v$session where audsid=userenv('SESSIONID'); 後は、raise_application_error で例外を発生させればOk です。
ユーロ記号ってShift-jis（cp932）に存在していますか。
SELECT 氏名, 判定 FROM 氏名テーブル, 判定テーブル WHERE BMI BETWEEN 開値 AND 終値; ってな感じかな。
> Indexを考慮して どのようにというのが欲しかったのかもしれませんね。 例を出して説明してあげるとか。 例えば、列に関数を適用すると索引が使われないとかあるじゃないですか。
>件数が多いとちょっと重くなりそうな気がするのですが 『鈴木（空）』を取得するのが表示上の問題だとすると、 SQLとして本質的なことではないでしょう。 （人間様には必要でも、DBではあずかり知らぬこと） そんな場合、DBには SELECT A.名前, B.所持品 FROM A, B WHERE A.ID = B.ID(+) だけ投げておいて、『鈴木（空）』はフロントエンド側で 何とかする……というのも一つの方法だと思います。 今回は、面白そうなSQLだったので参加しました（笑）。
総論、初動としては、#1さんの回答のとおりです。 各論的には、 ・STATS PACK レポートの取得 ・遅い部分が特定できているなら、本番実機での実行計画の取得 とかですかね、とりあえず。 それと、今からでもパフォーマンスチューニング関連の書籍を購入してください。
ご質問の意図は、単純に SQL Developer や MS-Access や ObjectBrowser 以外のツールを求めている、と言う事でしょうか？ それとも、クライアントのみインストールした状態で使える SQL*Plus 以外のツールと言う事でしょうか？ 前者でしたら、私自身は、SQL Developer か ObjectBrowser、それにSQL*Plusがあれば十分だと思っているので、ピンと来るお薦めは特にないのですが、後者であれば、WEBベースの Enterprise Manager（XEであれば「WEB管理ツール」）が使えます。 ＞OpenOffice（のデータベース）が Oracle社のものになってから結構使えるようになっていたりするでしょうか。 いいえ。Oracleのものになったとは言え、OpenOfficeのデータベース（Base）は原則、HSQLDB です。 XEでもLiteでもありません。 （使う事はできますが）
QNo.6667204の方に回答しましたのでご確認ください。
いまいち条件がきちんと理解できていないのですが。 A・Bは全レコード、Cは最大値ということは、取得した全レコードはCの値は同一になるということでいいですか？ それなら、 SELECT A, B, MAX(C) OVER() C FROM TEST WHERE Z = 'xxxxx' AND Y = 'x' AND X = 'Y'; でいいと思います。
制御ファイルのWHEN句では < というオペレータは使えないようですね。 フィールドリストでCASE式を使ってはどうでしょうか。 No_colum "CASE WHEN LENGTH(:No_colum) < 5 THEN LPAD(:No_colum,5,'0') ELSE :No_colum END" という感じです。 桁数オーバーになるレコードはエラーになるので取込まれないと思います。
DBA_TABLES 及び DBA_INDEXES の NUM_ROWS、LAST_ANALYZED の確認でよいと思います。
プロシージャ内でも動的SQLを使えばDDLの実行はできます。試してみてください。 set serveroutput on declare w_str varchar2(1000); begin --TABLE作成 execute immediate 'create table test_table(val varchar2(100))'; --データ投入 execute immediate 'insert into test_table values (:val)' using 'テスト'; --VIEW作成 execute immediate 'create view test_view as select * from test_table'; --VIEWからSELECT execute immediate 'select val from test_view' into w_str; --結果出力 dbms_output.put_line(w_str); --TABLE,VIEW削除 execute immediate 'drop table test_table purge'; execute immediate 'drop view test_view'; exception when others then raise; end; / set serveroutput off ただ、今回の質問はkouta77さんのおっしゃるとおりVIEW動的に作成する意味がよくわかりませんね。 やりたいこと、目的を明確にしてもらうと何かアドバイスできるかもしれません。
>前後にも"他"が使われる可能性があるので単純な置換はできません の意味がよく分からないのですが、普通に select regexp_replace(文字列,'(他\d+件)',' \1') from table; ではダメなのでしょうか？
10gXEにはメモリ1GB、データベースファイル合計4GBの制限があります。 すでに、領域を使い切っていたりするとエラーになるでしょう。 後、データベースファイルに使用状況が断片化していたりすると、制限値にかかりやすくなります。 時間に余裕があるのなら、テーブルの索引の削除と書きとめ、DB全体のエクスポート、DBCAでＤＢの削除と再作成、インポートと索引の作成を行えば。領域に余裕は出来ると思います。 領域制限意外の問題なら、そもそもエラーメッセージが出ていると思うのでそれを提示してください。
「USER_TABLES」「DBA_USERS」にあります。
ORACLEのデータはDB->表領域->データファイル(TEMPファイル)という形で構成されます。 表領域は複数のデータファイルを含むことができ、それぞれ異なる目的に使用されます。 SYSTEM表領域->Oracleの各種オブジェクトを管理するデータが格納される SYSAUX表領域->SYSTEM表領域の補助領域 UNDO表領域->更新処理時の更新前イメージを格納する。表領域内はUNDOセグメントという単位で管理される。 一時表領域->DISKソートなどに使われる。この表領域はDATAFILEではなくTEMPFILEとして作成する。 ユーザー表領域->ここに一般のユーザーデータ、索引データが格納される。格納単位はセグメント（表・索引）->エクステント->ブロックのようになる。 ・PCTFREE ブロックに大してデータが最初に挿入されるときの空き領域の割合。挿入後、UPDATEでデータ長が増える分の余裕が主な用途。これが小さすぎてUPDATEによるレコード長の増加が大きいと別ブロックにデータを移しポインタのみ残す行移行が多発し、アクセスのパフォーマンスが劣化する。 大きすぎても、領域に無駄が生じる（フルスキャン時にはアクセス時間が増大する）。 ・PCTUSED DELETEやUPDATEでブロック内の領域の使用割合が指定された値を下回った場合、INSERT処理の対象ブロックとなる。 大きすぎると実際にはレコードを挿入できないのに、挿入可能対象リスト内に含めて管理しなければならないので負荷が増大する。 PCTFREE+PCTUSED≒100は禁忌。 ・INITTRANS ブロックに対して同時にトランザクションが発生する場合に確保する領域の初期値。 詳しくはこちら http://www.insight-tec.com/mailmagazine/ora3/vol … ・SORAGE 記憶特性の記述 INITIAL 表領域内に一つのセグメントが最初にアロケートするエクステントのサイズ。 NEXT INITIALエクステントを使い切った時に次にアロケートするエクステントのサイズ。 MAXEXTENT UNLIMITED 使用するエクステントの数に制限をもたせない（一応2Gだったかの上限はあるけど、事実上無制限） PCTINCREASE 0 NEXTのエクステントを使い切った時にもエクステントサイズを増やさない。NEXTで指定したサイズでアロケートを続ける。 ただし、ここで取り上げられているのはディクショナリ管理方式と呼ばれ、エクステント管理情報を一括してSYSTE表領域で管理される。 そのためSYSEM表領域の肥大やアクセスの集中が起こりやすいので今はローカル管理方式が推奨されている。 CREATE TABLESPACE XXX DATAFILE 'file_2.dbf' SIZE 1G EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;
>すみません一つお教え頂きたいのですが、 >A.品番 = C.品番 (+)の(+)はどういう意味でしょうか。 (+)はleft joinの事です 例えば、以下の(1)と(2)のSQL同等です (1) SELECT 　　　TABLEA.* FROM 　　　TABLEA, 　　　TABLEB WHERE 　　　TABLEA.CD =TABLEB.CD (+) (2) SELECT 　　　TABLEA.* FROM 　　　TABLEA 　　　　　　LEFT JOIN TABLEB ON 　　　　　　　　　TABLEA.CD =TABLEB.CD A.品番 = B.品番 AND A.単価実行日 = B.MAX_単価実行日 AND ここで、単価実行日の最大のものに絞込み A.品番 = C.品番 (+) AND C.品番 IS NULL; ここで、既にM商品単価に入っている品番を除外しています。 先ほど書いたものは、 (+)の後にANDが抜けていましたので訂正します。 　　　INSERT INTO 　　　　　　M商品単価(品番,商品分類,売上単価,単価実行日,登録日時,登録者) 　　　SELECT 　　　　　　A.品番,A.商品分類,A.売上単価,A.単価実行日,A.登録日時,A.登録者 　　　FROM 　　　　　　tmpM商品単価 A, 　　　　　　(SELECT 品番,MAX(単価実行日) AS MAX_単価実行日 FROM tmpM商品単価 GROUP BY 品番) B, 　　　　　　(SELECT DISTINCT 品番 FROM M商品単価) C 　　　WHERE 　　　　　　A.品番 = B.品番 AND 　　　　　　A.単価実行日 = B.MAX_単価実行日 AND 　　　　　　A.品番 = C.品番 (+) AND // ←ANDが抜けてた 　　　　　　C.品番 IS NULL;
気になったので見直してみたら、微妙に違っていました。すみませんでした。 ・LEFT OUTER JOIN は、左から右に評価されるようです。 ・ON の結合条件は、 ( ) で囲みます。（データベースソフトのＳＱＬ解析器によっては省略しても動作することが期待できますが、 ( ) で囲むのが可読性的にもいいと思います） というわけで、 FROM 句を修正するとうまくいくかもしれません。 FROM [p].[Price] TABLE1 LEFT OUTER JOIN [p].[Receive] TABLE2 ON (TABLE2.[Code]=TABLE1.[Code]) LEFT OUTER JOIN [p].[Product] TABLE3 ON (TABLE1.[Code]=TABLE3.[Code]) ところで、なぜ下のように結合しているのですか？ Price -< Receive -< Product 下のようになる気がするのですが・・・？ 私の勘違いでしょうか？ Receive -< Product -< Price
Pieere85さんの回答にあるとおり、バターを取得する条件が不明なのですが、 Bテーブルのseqが一番大きいものと勝手に妄想しました。 select A.品目, B.子品目 from Aテーブル A left join ( select 品目, 子品目 from Bテーブル where seq = (select max(seq) from Bテーブル group by 品目)) B on (A.品目 = B.品目); とか select A.品目, B.子品目 from Aテーブル A left join ( select 品目, 子品目 from ( select 品目,子品目,row_number() over(partition by 品目 order by seq desc) rnum from Bテーブル) where rnum = 1) B on (A.品目 = B.品目); こんな感じでどうでしょうか。 質問の際には使用しているOracleのバージョンを記載した方がいいと思いますよ。
左に文字列を追加するLPAD関数があります。 http://download.oracle.com/docs/cd/E16338_01/ser … SQL*Loaderの制御ファイルのフィールドリストでは関数を使用することができます。 http://download.oracle.com/docs/cd/E16338_01/ser … ですので、 項目名 "LPAD(:項目名,5,'0')" と記述すればいいです。
こんにちわ。 先ずは、Statspack Report を確認して見て下さい。 Top5 Timed Event だけでも見れればと思います。 恐らくデフォルトの状態と推察しますが、log_buffer の設定 (sga_target では制御されません) も気になります。 更新系の処理が多い場合、log_buffer を50MB ～ 100MB 程度に増やすと 効果があるかも知れません。
こんなかんじでどうでしょうか。 select cd,denday,suu,kingaku,t2cd,henkoday,nm from( select t1.*,t2.cd t2cd,t2.henkoday,t2.nm ,row_number() over(partition by t1.cd,t1.denday order by t2.henkoday desc)rnum from table_A t1 inner join table_b t2 on (t1.cd = t2.cd and t1.denday >= t2.henkoday)) where rnum = 1; とか select t1.*,t2.* from table_A t1 inner join table_b t2 on (t1.cd = t2.cd and t1.denday >= t2.henkoday) where t2.henkoday = ( select max(henkoday) from table_B t3 where t1.cd = t3.cd and t1.denday >= t3.henkoday); です。
アクセル・アイと読みます。が、意味は無いのでアクセライでも ライラライでも何でもいいです。 個人的には、うえおあい方が面白かったですね。 あなたの仮の名前をそう付けてるという解が思い浮かびます。 グラフィックが生成された理由は思うがままに書いた。 という想像が出来ました。 うえおいあなら、暗号か何かかなと。 あなたの中でこんにちは、と言う意味なのかもしれません。 グラフィックが生成された理由は、こんにちはのお辞儀を している様子を図示化したものというところでしょうか？
>あれから自分なりに調べたのですが、10g XEで使用できるキャラクタセットは西ヨーロッパ（WE8MSWIN1252）とユニバーサル（ALL32UTF8）の２つだけのようです。 参考までに、SJISで作成することもできますよ。 http://www.betatechnology.jp/pp/index.php?Oracle … ですので、当初はデータベースの文字コードはSJISなのだろうと思ってしまいました。 もう少し早く気づければよかったです。
こちらは参考にならないでしょうか。 http://www.dba-oracle.com/oracle_tips_db_copy.htm imp/expも必要なく、ファイルをコピーするだけで済むので簡単でした。
Yahoo!知恵袋の方でも同じ質問をし、既に回答ももらっているようですが。。。 「累計」ではなく、「『年度＋部署コード』毎の合計を、各行にくっつけるだけ」のように見えますが？ そうであれば、サブクエリでの集計結果をジョインするだけです。 本当にいわゆる「累計させていく」なら、Oracleであれば既に分析関数が実装されてういるバージョンだと思いますが？
テーブルＡＡＡを作成する必要はありません。 手順は足りていると思います。 マテリアライズドビューの内容によっては、(1)は必要ありませんが。 マニュアルは読んでみましたか？ マテリアライズドビューについてだとここらへんでしょうか。 http://download.oracle.com/docs/cd/E16338_01/ser …
１．目的の結果を取得するＳＱＬを作る ＜例＞ SELECT 社員テーブル.社員ＩＤ, 障害テーブルＡ.障害番号, 障害テーブルＢ.事象, 障害テーブルＣ.ステータス FROM 社員テーブル INNER JOIN 障害テーブルＡ ON <社員テーブルと障害テーブルＡの結合条件（障害テーブルＡに発見者社員IDなどの列があるかな？）> INNER JOIN 障害テーブルＢ ON <障害テーブルＡと障害テーブルＢの結合条件（障害テーブルＢに障害番号の列があるかな？）> ; ２．UNIXサーバ上に以下のようなファイルを作る ================================== spool result.csv ＜ここに上記SQL文を挿入＞ quit; ================================== ３．UNIXサーバ上で、SQL*PLUSからSQLファイル実行 $ sqlplus スキーマ名/パスワード <２のファイル名> ３のコマンド実行でresult.csvが作成されるはずです。 あとは、上記コマンドを実行するシェルスクリプトなりを作ればよいかと思います。 こんな感じでよろしかったでしょうか？
>ですので、意味や要素の関係性は度外視して下さい。 　残念ですが、この言葉が、この文脈で出てくる時点で、データベースの意味・しくみ・使い方の基本の基本が出来ていないと判断せざるを得ません。 　なぜなら、本来、テーブルの構造というのは、フィールドの意味とフィールド間の関係を定義したものです。検索を含む全てのデータベース操作は、テーブルの構造に依存して行われるものです。 　というわけで >要点は >(1) 複数のテーブルから >(2) それぞれ任意の列を指定して検索、 >(3) その結果を結合した一覧を１つのCSVファイルに出力 　これに答えるためには、あなたが「度外視してください」と言われるそこに全てのポイントがあるんです。 　フィールドの意味も関係も、テーブルの構造も解らずにＳＱＬをはじめとするデータベース操作全般を一般論として解説せよという質問でしたら、それこそ本になりますので、ここで解説することは不可能です。 　 　アドヴァイスとしては、データベースの入門書から勉強されることをお勧めします。このデータベースの分野に関しては、断片的な知識だけで利用できるほど単純なものではなかったりしますので。
UTL_RAW.CAST_TO_RAW関数を調べましょう。
基本的にOracle11gはXP Home Editionには対応していないはず。 かなり面倒くさいけど、現状のプログラムインストーラとデータをバックアップして、windows 7 Pro 以上にアップグレード（上書きインストール）。 使っていたプログラムの再インストール。バックアップしていたデータのリストア。出来れば使用デバイスのドライバの更新。 で、windows7環境に移行。 これで、OracleのUnivasal Installerを起動してみては。 私の場合はWindows 7 Ultimate 64bit メモリ12GBだったけどOracle11gR2が問題なくインストール出来ました。
確かに、MySQL にも PostgreSQL にも DBLink に似た機能はあります。 ポスグレは、その名もdblink、MySQLの場合は、ストレージエンジン・・・かなぁ？ （詳しい方は突っ込みよろしく） ですが、ORACLEやMS SQL Serverのように異機種間でのリンクは自分の知る限り、不可だったように思います。 因みに、（こちらはご存知かもしれませんが）ORACLEの場合は、Generic Connectivityと言う機能で、MySQL や ポスグレへのリンクが可能です。 Windowsの場合は比較的簡単に設定できますが、Unix/Linuxの場合は、unixODBCなどを使うのでハマると思います。 （実用的には？？？） ＞また、MｙSQL や PostgreSQL から Oracle へ DBLink する場合、 ＞Oracle のライセンスなどが必要になったりはしないでしょうか？ もし可能だったとしても JDBC thinドライバなど、クライアントライセンスが発生しないミドルウェアでない限り、ORACLEクライアントライセンスが発生します。
なんの問題もなく動きます。 動作保証されていないため、サポート契約を結ぶ場合にはNGですが、その必要性 がない環境の場合はよくつかわれる手段ですし、自分もよくやります。 ただ、最近ではOracle Enterprise Linux が無償で入手できます。OSパッチを当 てる必要がない場合は検討されるとよいでしょう。
別にUNIONせずとも、以下でよい気がします。 テーブルAは一回しか読みません。 select a.コード,case when a.区分 = 1 then b.名称 else c.名称 end as 名称 from テーブルA as a left outer join 得意先マスタ as b on a.区分 = 0 and a.コード = b.コード left outer join 商品マスタ as c on a.区分 = 1 and a.コード = c.コード ;
12迄は残すアナウンスが出ているはず。 今現在は動作しているが、～JOINでの記述に切り替える方が良い。
気をつける点を簡単に記載すると、おおよそ以下の項目があります。 (1)ライセンスの確認 　サポートに入っていればバージョンアップは無料です。 　現状を確認しましょう。※購入時の代理店や営業に確認しましょう。 　またバージョンアップパスも確認しましょう。 　8iから10gへ直接アップデート可能か等。 (2)バージョン違いによる動作確認 　バージョンによって動いていたものが動かなくなるケースはあるので、ひと通り動作確認を行う必要があります。 　※バグで動いていたのが、バグが直ってしまい動かなくなることもあります。 　 　クライアントアプリが該当DBバージョンに対応しているかも確認する必要があります。 (3)オブジェクト・データ移行 　ユーザー、テーブル、ビュー、ストアドなどのCreate文の有無。 　※残っていればスクリプトから作成。なければexpでスクリプトを抜き出し。 　データ量と移行に使える時間との兼ね合い。 　データ量から移行時間を計算し、使用できる時間内で移行できるかを計算する。 　出来ない場合はシステム停止時間をのばすなど調整が必要。 　データ移行方法の決定 　・exp/imp 　・CSV等のファイルに落としてからSQL*Loaderで取り込む。 　・DBリンク経由で直接Insertする。 (4)並行稼働の方法 　新旧を比較するため並行稼働を行うことが可能か、また、その方法の決定。 　※そもそも並行稼働が可能か？ 　　ハード購入が出来なくて、同一筐体にインストール？ 　 (5)オプティマイザの違いによるレスポンスの違い 　オプティマイザのバージョン違いにより、レスポンスが低下する可能性があります。 　レスポンスがでなくてロジック自体の見直しが必要になる可能性もあります。 (6)戻し計画 　新環境にしてから業務を行ったがバグ等で旧環境に戻す必要がある際の手順。 ざっと考えただけでこれだけあります。
基本不要らしいです。 ただ、旧バージョンから以降の場合は要注意です。 アナライズが余計なおせっかいをしてパフォーマンスが落ちる恐れもあります。 そういった場合は、旧バージョンの設定を参考にしてみてください。
> 先に統計情報を取得してからインデックス（プライマリキー設定も含む）を > 作成すれば、インデックスの統計情報が取得されないことになってしまいます。 これは誤りでした。表の統計情報が存在していれば索引作成時には 索引の統計情報が自動的に取得されるようです。 明示的に取得することが望ましいことには変わりありませんが。
NOT EXISTSを使えばいいと思います。 select 営業所,支店,コード,品番 from Table2 where not exists ( select * from Table1 where Table1.営業所=Table2.営業所 and Table1.支店=Table2.支店 and Table1.コード=Table2.コード and Table1.品番=Table2.品番); という感じでどうでしょうか。
No.1の方の回答に少し条件追加m(_ _)m select * from ( select rownum,A.* from ( --テーブルAのMAXの日付のレコード抽出 select SAGYO_DT,TANTO,NAIYO from テーブルA where SAGYO_DT in(select max(SAGYO_DT) from テーブルA) and SAGYO_NO = '01' union all --テーブルBのMAXの日付のレコード抽出 select SAGYO_DT,TANTO,NAIYO from テーブルB where SAGYO_DT in(select max(SAGYO_DT) from テーブルB) and SAGYO_NO = '01' union all --テーブルCのMAXの日付のレコード抽出 select SAGYO_DT,TANTO,NAIYO from テーブルC where SAGYO_DT in(select max(SAGYO_DT) from テーブルC) and SAGYO_NO = '01' ) A --降順で並び替え order by SAGYO_DT desc) where rownum = 1;
Viewを作るか、PL/SQLでファンクション作ってSELECT時に使うかですね。 一応、VIEW例 CREATE VIEW 製造VW as SELECT a.日付,b.コード,a.数量 　FROM 製造 a, (SELECT 名前,MAX(コード) コード FROM 品目 group by 名前)　b WHERE a.コード = b.名前
where条件で「”すべての列がNullのもの”ではない行」を書くのでは駄目ですか？ where not (列1 is null and 列2 is null ・・・ and 列n is null) 状況に応じて、andで他の条件加えてください。
oracleの場合、シーケンスの払い出しはセッション単位に行います。 テーブルのcreate時にデフォルト値に指定は出来ないようです。
batファイルとsqlファイルを作成すればいいと思います。 たとえば、 [test.bat] @echo off rem データベースに接続 sqlplus -l username/password @test.sql rem エラー判定 if %errorlevel% EQU 0 ( echo "OK" ) else ( echo "NG" ) [test.sql] --エラーコード設定 whenever oserror exit -1 whenever sqlerror exit -1 --select実行 select sysdate from dual; --sqlplusを抜ける quit というようなファイルを作って、test.batを実行します。
今、手元にC#、Oracleの環境がないので、vb.net、MYSQL/ODBCになってしまいますが。 Imports System.Data.Odbc Imports System.Collections.Generic Class MyOLER Public Shared Sub Main() Dim connectionString As String Dim queryString As String connectionString = "dsn=MYSQL;user id=root;password=nara1109;database=test;" querystring = "show tables;" Using connection As New OdbcConnection(connectionString) Dim command As New OdbcCommand(queryString, connection) connection.Open() Dim reader As OdbcDataReader = command.ExecuteReader() Dim TableNames As New List(Of String()) Dim s As String() While reader.Read() s = New String(2) {} s(0) = reader(0).ToString s(1) = "" 'TableNames.add(reader(0).ToString) TableNames.add(s) End While For Each TableName As String() In TableNames Console.WriteLine(TableName(0)) Next reader.Close() End Using End Sub End Class のように、ADO.NETの「connection」オブジェクトに接続文字列設定してOpen、Oracleだったら「select owner,table_name from all_tables」をcommandに設定してクエリを実行。 2つのフィールドが帰ってくるので、それを配列（上記ならs）に代入。 で、「reader.Read()」がfalseになるまで回す。 格納数は「配列のリスト」になります。 ポイントは格納する配列はループ内でレコード単位にNewで生成することぐらいでしょうか。
「表B,表Cの値の挿入」ここが少しよく分からない。 結合ならすでに提示されていらっしゃるやり方で。 それとも SELECT * FROM 表B UNION SELECT * FROM 表C を挿入したいのかな？
オラクルインスタンスがSHUTDOWNされている（アイドルインスタンス）状態でも、タスクマネージャー上は「ORACLE.EXE」は存在します。 ですので、プロセスの存在のみで接続可能とは言えません。 Weblogicサーバーなどでは、常時接続しておいて、定期的にテーブルアクセスを行う（レコード件数取得する）ことで死活監視していましたね。 昔、委託開発先が巨大なマスタテーブルを監視対象に登録したせいで、パフォーマンステストで散々な目に会いました。
> 昨年実績 NULLIF 昨年実績=BLANKS の項目長の指定がないためです。 CSVデータの場合は「TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'」の指定は項目単位に行う必要はあまりありません。 制御ファイルの内容を OPTIONS(ROWS=500,BINDSIZE=700000) LOAD DATA INFILE '/home/oracle/TEST/00_BIN/YOSAN.csv' TRUNCATE INTO TABLE MT_YOSAN FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ( 日付, 店舗コード, 予算 NULLIF 昨年実績=BLANKS, 昨年実績 NULLIF 昨年実績=BLANKS ) にすればロードできます。
主キーに重複があるレコードの登録は不可能です。 修正方法としては一番普通なのは、今の主キーに別の列を 追加して複合キーにすることですかね。 CREATE TABLE <表名> ( 列名1 データ型, 列名2 データ型, ... CONSTRAINT [インデックス名] PRIMARY KEY(列名1, 列名2) ); ※列名1：今の主キー ※列名2：今の主キーとセットにすることで、重複をなくすことができるキー 『複合キー』が良くわからない、という場合は、 Google 等でしっかり調べられることをお勧めします。
出力されない理由は#1さんの回答の通りです。 対応方法も#1さんのでよいのですが、出力結果が沢山あってpagesizeを超える場合もあると思います。 その場合、そこで1行、余分な改行が入ってしまう事が考えられます。 pagesize は 0 のまま、spool と select の間に prompt 文でヘッダーを付けてやればよいのでは？ （と言うか、自分はそうしています） 但し、ご質問の例だと、タブ区切りなので、この場合は、一応SELECTの方がいいかもしれません。 （前略） spool hoge.txt select 'aaa' ||CHR(9)|| 'bbb' ||CHR(9)|| 'ccc' ||CHR(9)|| 'ddd' from dual; select aaa||CHR(9)|| （以下略）
条件が二つだからエラーになるのではなく、UPDATE文のどこにもtable_Bが出てこないので table_Bを参照することができないからエラーになっているのですよね。 以下のようにしてはどうでしょうか。 UPDATE table_A a SET a.name = 2 WHERE EXISTS ( SELECT * FROM table_B b WHERE a.Add = b.Add AND b.name = 3);
select distinct col1 from テーブル t1 where not exists ( select 1 from テーブル t2 where t1.col1=t2.col1 and t2.col2 = 'BBB') もありかと。
書式 MON はNLS_DATE_LANGUAGEやNLS_LANGUAGEに依存します。 下記のやり方でTO_DATEしてみて変換できるか試してください。 TO_DATE('28-Jul-1948 12:00:00 AM', 'dd-Mon-yyyy HH:MI:SS AM','NLS_DATE_LANGUAGE = American')
select テーブル1.A from テーブル1 left join テーブル2 on テーブル1.A = テーブル2.A where テーブル2.A is null とか？
ビューの参照先の表で、列定義が VARCHAR2(4000) となっているのではないでしょうか。 こちらで試す限り、ビューの参照先の列が VARCHAR2(256) であれば、 CREATE TABLE ... SELECT ... しても、VARCHAR2(256) になるようです。 ---------------------------------------------------------------------- create table test1 (text varchar2(256)); create view test1v as select text from test1; desc test1v create table test2 as select * from test1v; desc test2 ---------------------------------------------------------------------- 【実行結果】 SQL> desc test2 Name Null? Type ---------------- -------- ------------------ TEXT VARCHAR2(256) 4000よりも小さい値を指定しても桁あふれが発生しないことが予め分かっている場合には、 以下のように、明示的に CREATE TABLE でデータ型を指定した後に、 INSERT INTO ... SELECT ... すればいいのではないでしょうか。 ---------------------------------------------------------------------- create table test3 (text varchar2(4000)); insert into test3 values ('abc'); commit; create view test3v as select text from test3; create table test4 (text varchar2(16)); insert into test4 select text from test3v; commit; ----------------------------------------------------------------------
Oracle Database 10g であれば、ON COMMITでの索引同期化が使えるのではないでしょうか。 ON COMMIT での索引同期化は、CREATE INDEX の PARAMETERS 句の SYNC オプションで指定できます。 既存の索引に対しては、 ALTER INDEX <索引名> REBUILD PARAMETERS ('REPLACE METADATA SYNC (ON COMMIT)'); で、同期化モードを変更できます。 これで、元表に対する更新処理が COMMIT されたタイミングで、索引情報も更新されるようになります。 同期化モードを、元の手動に戻すには、 ALTER INDEX <索引名> REBUILD PARAMETERS ('REPLACE METADATA SYNC (MANUAL)'); とします。 ただし、ON COMMIT での索引同期化では、索引が極端に断片化する可能性があります。 Oracle Text では、$I と呼ばれる内部表を用いて索引情報を管理しています。 新規に追加・更新されたレコードの索引情報は、この $I 表に新規に INSERT されます。(UPDATE ではなく、INSERT です。) このため、索引の同期化を繰り返すうちに、索引が次第に断片化していきます。 このあたりの動作は、OTNオンデマンドの「Oracle Text 概要」という資料で説明されています。 http://www.oracle.com/technetwork/jp/content/ind … → http://www.oracle.com/technetwork/jp/content/ora … → p.9「索引メンテナンス ～ 新規文書情報の追加」 索引が断片化すると、検索パフォーマンスが劣化するため、索引の同期化処理は、要件が許す限り、頻度を低くすることが望ましいと考えられます。 また、索引が断片化してしまった場合には、索引を最適化すれば、検索パフォーマンスを回復させることができます。(同 p.10、p.12) テスト環境が無いとのことですが、その気になれば、手元のパソコンにWindows版のOracle Databaseをインストールすることもできるのではないでしょうか。テスト環境であれば、物理メモリが 1 GB もあれば十分です。 なお、テスト目的でのインストールであれば、ライセンス上の問題はありません。実際、「Oracle Technology Network Developer License Terms」には以下のように記載されています。 We grant you a nonexclusive, nontransferable limited license to use the programs only for the purpose of developing, testing, prototyping and demonstrating your application, and not for any other purpose. http://www.oracle.com/technetwork/licenses/stand … 以上、ご参考になれば幸いです。 参考URL：http://www.oracle.com/technetwork/jp/content/ind …
失敗したときのログを貼り付けてもらわないと回答しようがないのですが・・・ あと、10gR2 で試してみましたが、少なくとも以下のスクリプトは run で括っていなくても正常に完了しました。 backup device type disk tag '%TAG' database include current controlfile; backup device type disk tag '%TAG' archivelog all not backed up delete all input; allocate channel for maintenance type disk; delete noprompt obsolete device type disk; release channel; なので、何が問題なのかわかりかねます。
あぁ。。。すみません。 'True'と'False'の記載が反対、もしくは B - A　の記載、でした。
>例えば上記のものを使ってシステム日付を取得してＳＱＬを発行して得た >データのファイル名に日付を持たすなんていうこともできますでしょうか？ 可能ですが、言語やツールに依存するので可能としか言いようがありません。 もう少し目的や制限（言語やツール）を教えてもらわないと【可能です】という 回答になってしまいます。
ヒットした順です。ただし、WHERE 句で指定するため、適用される のは ORDER BY 句や GROUP BY 句を適用する前です。 全表走査の場合はブロックの先頭から検索されるのでその順という ことになるでしょうが、結合がある場合は実行計画により内部的に ソートされたり、順不定になるものもあるので、一概には言えませ ん。
以前は63ノードという制限があったと記憶していますが、 最新のリリース（11gR2）ではそれ以上可能になっているかもしれません。
こんな感じでしょうか。 --全角でインデントしています create table temp2 as select 　code, to_char(to_number(year_start) + rnum , '00') year from ( 　select 　　a.code, a.year_start, to_number(a.year_end) - to_number(a.year_start) term 　　,row_number() over(partition by a.code order by rownum) - 1 rnum 　from temp1 a, temp1, temp1) where rnum <= term; 1.クロスジョインを使って行数を増やし、各codeごとに0からの連番を振ります。 2.start_yearからend_yearまでの期間分の行を取得します。 3.取得した行のstart_yearに1.で振った連番を加算することで期間中のyearが取得できます。 質問する際には使用しているOracleのバージョンまで明記されるといいですよ。 バージョンによって使用できる関数などが違ってきますので。
すみません。追記です。 Javaという文言を見落としていました。 ストアド・プロシージャのことでしょうか？ Javaストアド・プロシージャとは、oracleDBに格納されたJavaメソッドのことで クライアントから呼び出され引数を受け取りJavaのメソッドを実行し結果を戻します。 とあります。 ※「%」はデータ（単なる文字列）なのですよね？ 　そうだとすると%が検索してヒットしない原因というわけではないかと思います。 　たまたま置き換える前の値が「%」付きのものだということで 　その固定文字列（%1、%2）をreplaceしているのではないでしょうか？ Javaを勉強していないので間違っているかもですが(-;
１案：Shellでファイルを一つずつ順次処理する。 ２案：Shellでファイルを一つに結合する。 ３案：Shellで制御ファイルを作る。
SQL*Loaderは、ロードがエラーになってもリターンコード自体は 0 になってしまうんですよね。 #1 さんの回答にあるように bad を拾うのも手だと思いますが、自分は大抵の場合、ログを grep しています。
今のところ(11.2まで)Oracle Databaseは長さ0の文字列をNULLとして処理するので、 ... and SUB2.ZYOUKEN = '' ではなくて ... and SUB2.ZYOUKEN IS NULL で条件にマッチしませんか(SUB2.ZYOUKENがVARCHAR2型という前提ですが)。
■APPENDで主キー重複が起きるか？ ダイレクトパスロードか否かで、結果が変わります。 LoaderのオプションがDIRECT = TRUE、かつダイレクトモード可能な条件を満たしている場合、ダイレクトパスロードとになります（素晴らしく速い）が、APPENDモードで主キー重複のレコードができてしまいます。 主キーが重複した場合、主キー制約/インデックスが無効状態になっており、INSERT/DELETE/主キーのUPDATEがエラーになってしまいますので、ご注意ください。 その場合は、TRUNCATE　TABLEでいったんデータを消してしまえば、復活できます。 ダイレクトパスロードでない場合のAPPENDモードでは、主キー重複はエラーではじかれます。 ■REPLACEの動き PKが重複するものの入れ替えではなく、まるっと削除してからの追加になります。 TRUNCATEとの違いは、途中でエラーが発生したときにレコードが削除する前の状態に戻る点です。 レコードが消えて良いならTRUNCATEモードのほうが速いですね
>for r_emp in c_1 loop の前で、 out_val := 0; として、 INSERT文の後で out_val := out_val + 1 ; とします。
ちょっと原因が分からないので、 sqlplus接続後のところで、 set echo on spool ログファイル名 を追加して実行して、ログファイルに何が出るか見てみていただけますか？ また、truncate文の後ろに、 select 'OK' from dual; quit; を入れておけば、途中で切断されたのか最後までいったのか分かるかと思います。
回答は既に出ていますので、プログラムの記述方法についてです。 このようなカーソルループであれば for loop文の方が楽に書けますよ。 ご参考まで。 http://download.oracle.com/docs/cd/E16338_01/app …
＞主キーとは別で明示的に指定した方が良い場合 インデックスとはDBでデータを検索する際の索引です。 ですのでデータを抽出する条件句(Where句)や結合句で指定されない列に指定しても意味はありません。 またインデックスを指定する列が1,または2のように索引をつけても意味がないような種類のデータしか格納されない場合はインデックスを付加しても意味がありません。 またデータ件数がすくないテーブルに対して索引をつけてもパフォーマンスは向上しません。 またインデックスはインデックス用の領域を持ちます。これはUpdateなど更新が実行されると領域が肥 大化していきます。この領域はOracleなどではテーブルの再作成などを実行しないとクリアされない為、断片化の原因となりパフォーマンス悪化の原因となる事がある為、注意が必要です。 上記を踏まえて索引を付けるのはデータ件数がある程度になるテーブルでかつ、データ抽出の際の条件句や結合句となる列、でかつ、ある程度のデータ種類のある列である必要があります。 また上記条件を満たしていてもインデックスを付加したら必ずパフォーマンスが向上するという訳ではないのでインデックス付加後と前とでSQLの実行計画やコスト、実行速度などを計測して付加を判断するという事も必要になります。 いろいろと面倒ですが不要なインデックスを付ければパフォーマンスの悪化を招くこともありますので気をつけましょう。
まず、現在の資格体系ではセミナーを受講することは必須となっています。 質問とはあまり関係ないかもしれませんが、 ORACLE MASTERの取得に必要な料金を調べてみました。 ＜ Bronz ＞ 　SQL 基礎 I　：　22,260円 　DBA 11g　：　22,260円 　----- 取得までに 44,520円 ＜ Silver ＞ 　DBA 11g　：　22,260円 　----- 取得までに 66,780円 ＜ Gold ＞ 　DBA 11g　：　22,260円 　要履修コース(選択)　：　218,295円～ 　----- 取得までに 307,335円～ ＜ Platinum ＞ 　要履修コース(選択)×2コース　：　218,295円～×2コース 　実技試験　：　242,550円 　----- 取得までに 986,475円～ ※料金はすべて税込。 ※料金の合計は最安の要履修コースを選択した場合。 プラチナまで取得しようとしたら最低でも100万円近くかかります。 専門学校に一年間通う学費と同程度、 と捉えると不思議と価格が高いと感じなくなる・・・わけないか。 受験チケットや要履修コースを割引販売をしているサイトもある・・・ 特に要履修コースを半額近くで受けられるもの（SE倶楽部）とかがあるので、 個人で受けるなら活用しない手はないですね。 参考URL：http://www.seplus.jp/seclub/
大外のSQLのFrom対象は副問い合わせの結果だけなので、そちらです 「内部SQL実行結果を指すemp」ですね というか、外側のSQLから副問い合わせに使用したテーブルの値を指定する事は出来ません from employee emp を emp1、 from ( select name,・・・ ) emp を emp2とした場合、 大外のSQLでemp1.nameやemp1.yearと指定するとエラーが発生します
VIEW同士のUNIONは可能です データ型が一致していない列があるとUNION出来ない、これは書かれている通りです そのようなエラーが発生していたのであれば、そのような理由であると思われます View作成時にデータ型を設定する方法ということですが、 これは普通に明示的に型をキャストすることで可能です 例(NUMBER→VARCHAR2) Create Table TBL_NUM( NUM NUMBER ); Create View VIEW_NUM1 As Select NUM From TBL_NUM; Create View VIEW_NUM2 As Select To_Char( NUM ) As "NUM" From TBL_NUM; Desc TBL_NUM Desc VIEW_NUM1 Desc VIEW_NUM2 VIEW_NUM2.NUM は VARCHAR2型辺りになっているはずです
質問内容に記載の >NOTNULLが”YES”になってしまっています。 この箇所に関しても NULLABLEが”YES”に・・ということだったのですね。 うまくいかないマテビューですが、”AMV_TENCD”と”AMV_WARCD”以外の項目は 外部結合しているテーブルの項目ではないでしょうか？ 該当テーブルがNULLABLE="NO"になっているとしても、 外部結合なのでレコードが取得できないときは当然NULLになってしまいますよね。 ですので、むしろNULLABLE="NO"になっていたら困ってしまいます。 INSERTできなくなってしまいますので。 原因が外部結合であるということを確認するために、いったん全てのテーブルを内部結合にして試してみてはいかがでしょうか。 >昨日は体調不良で昼から寝込んでおり 私も先日インフルエンザにかかってしまいました。 どうぞご自愛ください。
LIKE '0%'とするかSUBSTR(MAIN.店舗コード,1,1) = '0'とか つまり CASE WHEN MAIN.店舗コード LIKE '0%' THEN MAIN.在庫数 　　　 ELSE 0 END as 店舗在庫数, CASE WHEN MAIN.店舗コード NOT LIKE '0%' THEN MAIN.在庫数 ELSE 0 END 倉庫在庫数 か CASE WHEN SUBSTR(MAIN.店舗コード,1,1) = '0' THEN MAIN.在庫数 　　　 ELSE 0 END as 店舗在庫数, CASE WHEN SUBSTR(MAIN.店舗コード,1,1) NOT = '0' THEN MAIN.在庫数 ELSE 0 END 倉庫在庫数
#1です。 OracleConnectionを使うとしてそれが正しいのなら、「Provider=OraOLEDB.Oracle」は不要のようですね。 接続方法は、おそらく、間接的な「Oracle Net Service」経由です。 となると、「tnsname.ora」が怪しいことになります。 「data source=orcl」とされていますが、「orcl」は「tnsname.ora」で「SERVICE_NAME」で定義されていますか。 確認願います。
　ううむ。Windowsなのかな。できればOSの名前（XP Pro、Vista Business、2003 Standard、7 Ultimate x64、2008 R2 Standardなど）と、 http://localhost:8080/apex (127.0.0.1にしてもダメでした。）←localhost:8080にすると「どうなったのか」 という事を書いていただけるとありがたい。 さて、私はOracle 10g Database Express Edition（以下Ora10gXE）をWindowsにインストールした事は無い（←今したけど）ので的はずれな部分があるかもしれないが基本的にfor Linuxと同じだと思うのでチェックするポイントを説明してみたいと思う。 １．Oracle君は8080を待ち受けているか。 コマンドプロンプトを立ち上げて C:\>netstat -anb とするとポート番号8080で待ち受けているプログラムのプロセスID(PID)がわかる。今実際にまっさらなWindows Server 2003 Standard上にインストールしてみるとoracleが127.0.0.1:8080で待ち受けていた。しかもoracle.exeじゃなくてtnslsnr.exeだね。上のコマンドで何も表示されずにC:\>に戻ってくるようであれば8080で待ち受けているプログラムが無いという事だ。さて、今度はタスクマネージャーを開いてプロセスタブにPID列を表示させると先ほど調べた8080を使っているPIDを探す。これがoracle.exeになっていれば問題は別にある事になるが、たとえばtomcat.exeとかそんな風になっていればポート番号の調整を行わなければいけない。 ２．tnslsnr.exeだった場合、または8080を待ち受けているプログラムが無かった場合。 Ora10gXEはapex 2.2というものを内包しており、そいつが8080番でHTTPを待ち受ける訳だが、本当にそうなっているかは以下の方法で調べる事ができる。SQL*PlusなどでOracleにログインし（sysかsystemで入るのが良いかも）、 > select dbms_xdb.gethttpport from dual; 8081 これで上のように8081とか返ってきたら8080の代わりにhttp://localhost:8081/apexもアクセスすれば良い。これで0が返ってきたら、待ち受けを行っていないという事だ。待ち受けさせよう。 > exec dbms_xdb.sethttpport(8081); ３．tnslsnr.exeだった場合、その２。 上の２が全く問題なければそれ以外の要因で繋がらないのだ。たとえばWindows Server 2003などでは規定でInternet Explorerのセキュリティ設定が最高になっており、localhostでさえ（ゾーンがイントラネット）信用しない。まぁここにたどり着いたらかなり症状は重いのでまた質問を投げる方が良いだろう。 ４．tomcat.exeとかだった場合。 上の２の方法でgethttpportを調べ、対処しよう。 　ところで、あまり関係ないがOra10gXEは基本的にOracleServiceXEとOracleXETNSListenerの２つだけで動作するので他のOracle関係は停止しておいた方が問題の切り分けが簡単かもしれない。
(1)と(2)でGROUP BY に入庫数、出庫数まで含めているのは正しいのでしょうか？ 具体的なデータが分からないのでかなり妄想入っていますが、こんな感じのことでしょうか。 SELECT 在庫情報.ID,なんらかのマスタ？？.品番,なんらかのマスタ？？.品名,在庫情報.現在庫数 FROM (SELECT ID,sum(入庫数) - sum(出庫数) 現在庫数 FROM 入庫台帳 INNER JOIN 出庫台帳 ON (入庫台帳.ID = 出庫台帳.ID) GROUP BY ID) 在庫情報 INNER JOIN なんらかのマスタ？？ ON (在庫情報.ID ＝ なんらかのマスタ？？.ID); もうちょっと具体的なデータを書いた方がちゃんとした回答が付くと思いますよ。
65535が最大値だからのようです。 65536以上の値を設定すると 注意: RECORDLENGTH=65536は65535に切り捨てられました。 と出力されますので。
oracleのデータベースリンクは「create database link」時点ではユーザー、パスワードの妥当性をチェックしません。 ローカルホストからSQL*PLUSでデータベースリンク作成時のSQL文で使ったユーザ名、パスワード、接続文字列でつながるか確認してみてください。 11gから認証の際の大文字小文字を区別するようになっているみたいですから注意してください。 > なんでSnapshotやマテリアライズドビューなどが存在しているのでしょうか？ Snapshotやマテリアライズドビューはローカルホストにデータがありますから、SQL発行のたびにネットワーク経由でのアクセスが発生しません。 当然、パフォーマンスも向上します。
ORA-39087: ディレクトリ名LOGDIRは無効です というエラーが出ていますので、処理実行ユーザにLOGDIRへの権限が与えられていないのではないでしょうか？ 以下を実行してからもういちど試してみてください。 sqlplus system@*** grant read, write on LOGDIR to 処理実行ユーザ; なお、ディレクトリオブジェクトで定義された実ディレクトリがパーミッション777なだけでなく、 OSのoracleユーザが実際にそのディレクトリに読み書きできる必要もあります。 （上位レベルのディレクトリ権限がないと、その階層に到達できずNG）
それは１行だけですか？複数の行でその状態になりますか？ CSVの項目の数だけSQL*Loaderの項目定義がありますか？ 可能ならSQL*Loaderの定義を見せてください。
実行されたC#の文を示されていますが、 実際にOracleに投げられたSQL文を見れば、エラー原因が分かると思います。 逆に、今示された内容ですと、変数部分の値が分からぬため、エラー原因が分かりません。 "insert into kanri2 values('aaa'," + dateTimePicker1.Text + "," + checkedListBox1.CheckedItems +","+ checkedListBox6.CheckedItems +")"; この文字列を、ログ出力するなどして、変数名が実際の値に置き換わったSQL全文を見てみることはできますでしょうか？ そのSQL文をSQL*PLUSやSQL DeveloperなどのSQL実行ツールで実行しながらデバッグしていくとよいですよ。 差し当たり推測としては、変数の値が文字列値なのであれば、前後をシングルクオートで囲む必要があり、それが原因かと。恐らく、以下のような感じかな。 "insert into kanri2 values('aaa','" + dateTimePicker1.Text + "','" + checkedListBox1.CheckedItems +"','"+ checkedListBox6.CheckedItems +"')";
>VIEW上にないレコードは作成されませんでした。 とありますが、 >FROM View >WHERE View_TENCD = w_TENCD としているので存在しないTENCDのデータは取得できないので当然ですね。 他の回答者様も言っているように、外部結合すれば問題ないと思います。 --全角でインデントしてます。 INSERT INTO TBL_B SELECT 　A.TENCD,NVL(B.GRPCD,'000'),A.SYOCD,A.URIAGE FROM 　TBL_A A 　LEFT JOIN ( 　　SELECT GRPCD,TENCD 　　FROM ( 　　　SELECT 　　　　GRPCD,TENCD 　　　　,ROW_NUMBER() OVER(PARTITION BY TENCD ORDER BY YMD DESC,GRPCD DESC) RNUM 　　　FROM 　　V) 　　WHERE RNUM = 1 ) B 　ON A.TENCD = B.TENCD; No.2様の考え方と同様ですが、No.2様のそのままのSQLだと内側のサブクエリが期待どおりにならないと思います。 where rownum = 1 の条件はorder by より先に適用されるので 降順で並べた1件目、にはならないはずです。（たまたまなる時もあるかもしれませんが） select * from (select * from tbl order by ソート条件) where rownum = 1 という風に一旦ソートしたサブクエリを作る必要があります。
以下の問題がありますね。 ダイレクト・パス・エクスポートのパフォーマンスの問題 ダイレクト・パス・エクスポートの起動時に、RECORDLENGTH パラメータの値を大きくす ると、パフォーマンスが向上する場合があります。実際のパフォーマンス向上の度合いは、 次の要因によって異なります。 DB_BLOCK_SIZE 表の列の型 I/O レイアウト（エクスポート・ファイルの転送先ドライブは、データベース・ファイ ルが常駐するディスク・ドライブとは別にする。） RECORDLENGTH の値は、次のように設定することをお薦めします。 ファイル・システムのI/O ブロック・サイズの倍数であること。 DB_BLOCK_SIZE の倍数であること。 RECORDLENGTH=65535 は > ファイル・システムのI/O ブロック・サイズの倍数であること。 > DB_BLOCK_SIZE の倍数であること。 を満たしてませんね。
ora-01017位マニュアル見ればすぐ分かると思うけど。 ユーザ名かパスワードが認証できない。 listener.logを見ればわかるのでは。 http://otndnld.oracle.co.jp/document/products/or … 参考URL：http://homepage1.nifty.com/k-umezu/oraerror/ora- …
記載されている記述で問題ないように思うのですけどね。 当方の環境（10.2.0.1.0）では正常にロードが完了しました。 データに数字ではない文字列が含まれていたりしませんか？ 質問する際はエラーになった具体的なデータを書いたほうがいいと思います。 回答者が余計な想像をしなくてすみますので。
こういうことでしょうか？ "to_char(to_date(:売上日付,'yyyy/mm/dd hh24:mi'),'yyyy/mm/dd')"
UPDATE文のWHERE句（WHERE文ではなく句です）のEXISTSでSET句と同様のSELECT文を記述するのは、 その条件がないとSET句のSELECT文で取得できるデータがないときに値がNULLになってしまうからです。 今回の場合であれば、WHERE句にはSET句のSELECT文をそのまま記述しなくても WHERE EXISTS( SELECT 'TRUE' FROM TBL02 WHERE TBL02_OKFLG = 1 AND TBL02_TENCD = TBL01_TENCD AND TBL02_REN = TBL01_REN AND TBL02_UPDKBN = 2 ); で大丈夫だと思います。 要はSET句に書くSELECT文で必ず値が取得できる条件を書けばいいです。 >（SELECTの結果をWHERE文の中で簡単に呼び出して使えないのでしょうか？） そういうことは出来ないです。
Oracleにはサーバ版とクライアント版があって、 サーバ版をインストールしたPCとは別のPCからネットワーク経由でOracleを使う場合にクライアント版をインストールします。 あなたのPCが1台だけでOracleを使うなら問題ないです。 CSEもどきなら http://www.oracle.com/technetwork/jp/developer-t …
左側の「接続」タブがありますよね？ ＋のアイコンを押すと新規接続の作成画面になるので、 そこで必要な情報を入力してください。 DBに接続するための情報はこちらでは分からないので現場の方に確認してください。
CSV（TSVでも同様）をSQL*Plusでspoolするのに必須と言えるSET文が足らないですね。 set linesize 1000 ライン長を指定しないと、デフォルトでは適当なところで折り返されてしまいます。 1000は1000バイトです。 普通、とりあえず5000くらいにしておきますが、業務要件に則して想定される最大のバイト数を指定してください。 それと、正直、colsep をカンマにしてCSVを作るのはお薦めできません。 （多分、仕事で使っている人は殆どやらないと思います） 面倒くさいけど、カラムを連結する方法が確実です。 ↓ SELECT COL1 || CHR(9) || COL2 || CHR(9) || COL3 || CHR(9)... FROM T_JUTYU; CHR(9) はタブです。 また、上記は、カラムがすべて文字列の場合の例です。 数値や日付がある時は明示的にTO_CHARでキャストしてください。 ↓ TO_CHAR(数値型カラム) TO_CHAR(日付型カラム, 'YYYY-MM-DD HH24:MI:SS')
>・Oracle Database 10g Release 2 (10.2.0.1) >Express Edition for Microsoft Windows をダウンロードするとファイル名が「OracleXE」になってますね。 .exeがないファイル名でダウンしてしまいます。 ダウンロード時にファイル名を「OracleXE.exe」にするか、 ダウンロード後に「OracleXE」を「OracleXE.exe」にRENAMEしてください。
パスワードは２カ所に同じのを入力しますが、間違ってないですか？
No.1です。先ほどのSQLについて少し説明しますね。 1.一番内側のselect文（トランを直接参照していることろ）で、 　「直近３日分を予定欄へセットする」を満たすために、店ＣＤ・区分ごとに日付順でならべた行番号を振ります。 　このとき、実績データ（区分='1'）には1件しかない前提なので必ず1が振られます。 　 2.その一つ外のselect文では、1.で振った行番号が3以下という条件で抽出します。 　これにより、実績データと予定データの直近3件が取れます。 　ここで、区分と1.で振った行番号を使って実績と予定１～３を取得します。 3.そして一番外側のselect文で、マスタと結合して各項目に設定する値を取得しています。 　「実績２を実績３へ、実績１を実績２へ移してから、トランの日付を実績１欄にセットする」とあるので、 　実績１は、2.で実績が取得できていればその値を設定し、取得できていなければ現在の値を再設定(=更新しない）。 　実績２・３は、2.で実績が取得できていればそれぞれ実績１・２を設定し、取得できていなければ現在の値を再設定(=更新しない）。 　予定に関しては、2.で取得した予定１～３をそのまま設定。 という感じです。 内側からひとつずつselect文を実行していくと、やっていることが分かると思います。 もちろん、もっといいやり方もあると思いますが参考にしてみてください。
通常のビューは実態ではなく、データベースからの検索結果を データテーブルのように見せているだけです。当然、全ての参照は 可能であり、１対１でテーブルが結合されたビューならば、ほとんど テーブルと同じ操作ができ、更新や削除、挿入も可能です。 ビューのデータというのは置いてあるものではなく、参照に行ってから 始めて作成されるものです。そのため、パフォーマンスは遅くなります が、常に最新のものが参照されます。 マテリアルビューは実体のあるビューです。これは検索のスピードを 上げるために開発されました。ビューはどうしても複数テーブルを クロス参照するためにアクセスが遅いのです。マテリアルビューは、 ビューで定義されているカラムのデータをキャッシュに書き込むのです。 元のテーブルに変更があるたび、マテリアルビューも更新されていきますが、 そこには遅延が発生することもあります。検索データが最新では無い 可能性もあります。
ファイル「php_oci8.dll」「php_oci8_11g.dll」は所定のフォルダにありますか？
insert into 売上台帳 (支店コード,受注No,伝票No,品番,品名,数量,オーダー宛先,売上日, 住所,電話番号,更新日時,更新者) select支店コード,受注No,伝票No,品番,品名,数量,オーダー宛先,売上日, 住所,電話番号,更新日時,更新者 from T受信データ where 支店コード = 002 and not exists ( select 1 from 売上台帳 U where T受信データ.受注No=U.受注No) って書けませんでしたっけ。
11gR2は64BitWindowsに対応してますよ 参考URL：http://www.oracle.com/technetwork/jp/database/en …
こんばんは。 単純に文字列結合して、小さいものを取ればいいのでは？ DATEカラムがDATE型、GYOカラムがNUMBER型と仮定します。 違ってたら、適当に型変換してください・・・。 SELECT * FROM テーブルA WHERE TO_CHAR(DATE,'YYYYMMDD')||RPAD(TO_CHAR(GYO),3,'0') < 同じように変換した、対象データ やってる事は一緒です。 ただ、SQLでやってるだけ・・・。
> CSVの取得はDOSバッチとTeratermのマクロで取得しようと思っています。 windows標準添付のfpコマンドは転送エラーを拾えません。ftpgetとかPerlのNET::ftpかrubyのnet/ftpなら拾えた気がします。 > CSVファイルのInsert処理はPL/SQLで開発を行おうと考えています。 Sql*Loaderを使用しない理由が理解出来ません。Insert処理はSql*Loaderの方が圧倒的に高速です。特に全件置き換えの場合はDirectモードが使用可能です。 > PL/SQLで他のサーバーのテーブルとリレーション 「他のサーバーのテーブル」がOracleならデータベースリンクで参照が可能です。ただし、リモートテーブルとのJOINはINDEXを使用できません。パフォーマンス的にかなり苦しいことが予想されます。 REMOTEテーブルのデータ量が少なければHashJoinを利用できる可能性もありますが。 データベースリンクについてはマニュアルを参照してください。 http://download.oracle.com/docs/cd/E16338_01/ser …
>REFERENCING NEW ROW R1 という記述はできないと思います。 登録用プロシージャの引数はレコード型にしておいて、 トリガーでselect into でレコード型変数に値を格納して渡すようにしてはどうでしょうか。 トリガーではカラムを一つずつ列挙しないといけませんが、 プロシージャの引数はすっきり書けるようになります。 create or replace procedure test_proc( a_rec table_a%rowtype --不要な項目が多ければ別途レコード型を作成しても ) is begin insert into table_b values (a_rec.c1,a_rec.c2,…); end; / create or replace trigger test_trig after insert on table_a for each row declare w_rec table_a%rowtype; begin select :new.c1,:new.c2,… into w_rec from dual; test_proc(w_rec); end; / あんまり変わらないですかね・・・
インデックスの事でしょう。 インデックスを1から10個まで定義可能にして、それぞれのインデックスを構成する項目に並び順の数字を記入するのでしょう。
No.2さんフォローありがとうございます。 varchar2型ではないなんて考えもしませんでした。 char型だとしたら確かにうまくいきませんね。 >RTIME(テーブルB.住所) RTRIM(テーブルB.住所) ですね。
>検索結果はAテーブルに存在しているが、BテーブルまたはCテーブルには存在していないデータ。 というのは、 ・BとCのどちらかに存在していれば検索対象外 ・BとCの両方に存在していれば検索対象外 の2つの意味に取れますよね。 前者なら SELECT * FROM テーブルA WHERE (NOT EXISTS(SELECT * FROM Bテーブル WHERE Bテーブル.CODE=Aテーブル.CODE AND Bテーブル.NAME=Aテーブル.NAME) AND NOT EXISTS(SELECT * FROM Cテーブル WHERE Cテーブル.CODE=Aテーブル.CODE AND Cテーブル.NAME=Aテーブル.NAME)) 後者なら SELECT * FROM テーブルA WHERE (NOT EXISTS(SELECT * FROM Bテーブル WHERE Bテーブル.CODE=Aテーブル.CODE AND Bテーブル.NAME=Aテーブル.NAME) OR NOT EXISTS(SELECT * FROM Cテーブル WHERE Cテーブル.CODE=Aテーブル.CODE AND Cテーブル.NAME=Aテーブル.NAME)) でしょうか。
想像ですが、SQL*Plusは一個のSQL文しか処理しませんよね。 つまり、APPENDで複数のSQL文を格納したファイルを@ファイル名で実行した後に、 listと入力すると最後のSQL文だけが表示されますよね。 しかし、get ファイル名の後にlistすると複数の文が表示されます。 SQL*Plusの通常の状態ではSQL文は１つしか許さないのに複数のSQL文がしかも/付きで バッファにあるので、そのような状態は考慮していないのでしょう。 ま、仕様がちゃんと考慮されてないのでしょうね
Oracle８Client（Application User）だと SQL Loaderはインストールされないのではないでしょうか？ Clientのインストール時に選択肢があって、 管理者用（正確な名称は覚えていない）でインストールする必要があったと思います。
下記ツールを使えば、簡単です。 http://www.superdbtool.com ExcelDBToolで1つのテーブルが出来ましたら、同じ列名のほかのテーブルにコピーできます。 また、Excelに線を引いて、引いた線でデータの作成もできます。 下記のダミーデータ作成もできます。 日付, 時間, タイムスタンプ, 都道府県, E-Mail, URL, 郵便番号, 携帯, 苗字のみ, 氏名, ふりがな, 性別, 年齢, 血液型, 固定電話, 婚姻, 固定値, 国籍, 国籍英語, 国籍英語略, 企業名, 住所, 住所ふりがな, 半角英字, 市区, 町村, 最寄駅, 最寄駅ふりがな, 路線, 銀行コード, 銀行名, 銀行カタカナ, 支店コード, 支店名, 支店カタカナ, 大学名, 業種大分類, 業種大分類名称, 業種中分類, 業種中分類名称, 業種小分類, 業種小分類名称, 職種大分類, 職種大分類名称, 職種中分類, 職種中分類名称, 職種小分類, 職種小分類名称, 数値連番, 整数・小数点数, 英数混在, 文字列＋連番, 文字列＋全角連番, 全角漢字, ひらがな, 全角カタカナ, 半角カタカナ, 全角英数, 全角数値, 全角英字, 全半混在, 特殊文字 ご参考まで。 参考URL：http://www.superdbtool.com
> クライアント側　oracle_Client10.2.3 windows2003 > サーバ側　oracle11g(64bit)Windows7(64bit) > > で接続したいのですが、tnsnameのhostをサーバ側のＩＰに変更しました。 クラサバが逆じゃないかな？変更する前は動いてましたか？ サーバ自身の自ＤＢに対するTNSPINGは通りますか？
>ＰＬ/ＳＱＬを想定しています の意味がちょっとわからないのですが、ひとつのSQLで書いてみました。 売上Tの売上区分='2'・予定日が指定日以降のレコードを 店舗ごとに日付順に番号付けして、番号で設定項目を振り分けます。 --全角でインデントしています update tenpo_t set (plan1,plan2,plan3,plan4,plan5) 　= (select max(plan1),max(plan2),max(plan3),max(plan4),max(plan5) 　　from 　　　(select 　　　　tenpo 　　　　,case when recnum = 1 then yotei else null end plan1 　　　　,case when recnum = 2 then yotei else null end plan2 　　　　,case when recnum = 3 then yotei else null end plan3 　　　　,case when recnum = 4 then yotei else null end plan4 　　　　,case when recnum = 5 then yotei else null end plan5 　　　from 　　　　(select 　　　　　tenpo,yotei,row_number() over(partition by tenpo order by yotei) recnum 　　　　from uriage_t 　　　　where kbn = '2' 　　　　and yotei >= /* 指定日 */ date'2010-12-11') 　　　where recnum <= 5) src 　　where tenpo_t.tenpo = src.tenpo 　　group by tenpo); ORACLE10g XEでの確認なので9iではうまくいかないかもしれませんが参考までに。
No.1です。 すみません、質問をきちんと読めていませんでした。 >UPDATE、INSERTをそれぞれ一回で完了させるＳＱＬ UPDATEとINSERTは別々のSQLで処理したいのですね。 なら、それぞれ --UPDATE update yosan_t target set yosan = ( select g_yosan.yosan from tenpo_m inner join gyoumu on tenpo_m.kbn = gyoumu.kbn inner join g_yosan on gyoumu.yosan_g = g_yosan.yosan_g where target.tenpo = tenpo_m.tenpo ) where yosan = 0 and exists ( select g_yosan.yosan from tenpo_m inner join gyoumu on tenpo_m.kbn = gyoumu.kbn inner join g_yosan on gyoumu.yosan_g = g_yosan.yosan_g where target.tenpo = tenpo_m.tenpo ); --INSERT insert into yosan_t target select tenpo_m.tenpo,g_yosan.yosan from tenpo_m inner join gyoumu on tenpo_m.kbn = gyoumu.kbn inner join g_yosan on gyoumu.yosan_g = g_yosan.yosan_g where not exists ( select * from yosan_t where yosan_t.tenpo = tenpo_m.tenpo); こんな感じでいけると思いますがどうでしょう？ 先ほども書きましたがoracle10g XE での確認なので9iでは上手くいかない所があるかもしれません。
#2をレコード挿入するならこんな感じ。 INSERT INTO t3 (num1, kingaku3) SELECT num1, sum(kingaku) FROM (SELECT num1, kingaku FROM t1 UNION ALL SELECT num1, kingaku2 AS kingaku FROM t2) GROUP BY num1;
仮にＢテーブルのカラムが KEY, COL2 NUMBER, COL3 VARCHAR2 だとします。 SELECT Ａテーブル.*, Ｂテーブル.* で取得時にNULLの内容を 0 に置換する事はできません。 以下のように取得時に明示的に置換するしかないと思います。 SELECT Ａテーブル.*, NVL(Ｂテーブル.COL2, 0) COL2, NVL(Ｂテーブル.COL3, '0') COL3
多分、グレゴリオ暦の扱いが違うんだと思います。 ・Ruby require 'date' hoge = Date.new(2010,12,1) piyo = Date.new(1,1,1.) puts (hoge-piyo).to_i → 734108 hoge = Date.new(2010,12,1) piyo = hoge = Date.new(1582,10,15) #グレゴリオ暦開始日 puts (hoge-piyo).to_i →156371 ・Python import datetime hoge = datetime.datetime(2010,12,1) piyo = datetime.datetime(1,1,1) print hoge - piyo →734106 hoge = datetime.datetime(2010,12,1) piyo = datetime.datetime(1582,10,15) print hoge - piyo →156371 ・Oracle select to_date('2010-12-01','yy-mm-dd') - to_date('0001-01-01','yyyy-mm-dd') from dual →734108 select to_date('2010-12-01','yy-mm-dd') - to_date('1582-10-15','yyyy-mm-dd') from dual →156371
いや、あなたは >エクスポートコマンドを実行 って言ってるけど、補足のはimpコマンドですけど。 それにlogの内容もないし。
できなかったSQLを見せてください。 SELECT B.部署コード ,SUM(A.金額) FROM A,B WHERE A.社員番号=B.社員番号 group by B.部署コード もしくは SELECT 部署コード ,SUM(金額) FROM ( SELECT B.部署コード ,A.金額 FROM A,B WHERE A.社員番号=B.社員番号 ) group by 部署コード
マニュアルが一番詳しいんですが（OTNで参照、ダウンロードできます） 独学しようというなら 「プロとしてのOracleアーキテクチャ入門」 http://www.sbcr.jp/products/4797349801.html 「プロとしてのOracle運用管理入門」 http://www.sbcr.jp/products/4797355123.html 「プロとしてのOracle物理設計入門 増補改訂版」 http://www.sbcr.jp/products/4797345599.html あたりがお勧めでしょうか。 運用管理用のSQLを知りたいということなら 「Oracleデータベース 運用・管理ポケットリファレンス―Oracle10g/9i対応」 http://gihyo.jp/book/2005/4-7741-2544-X
DBの起動/停止とサービスの起動/停止は別物です。 サービスの「OracleServiceSID」と「OracleOraDb11g_home1TNSListener」は、それぞれDBとリスナーのためのもので、DBやリスナーそのものではありません。 サービスの「OracleServiceSID」と「OracleOraDb11g_home1TNSListener」を起動状態にした後で DBやリスナを起動します。 以下を参考にしてください。 http://www.shift-the-oracle.com/config/startup-o … http://otndnld.oracle.co.jp/beginner/oracle10g/1 …
物理ファイルが何を指しているのかわかりませんが、 SELECT COL1 ,COL2 ,1 ,'X' FROM xxxx とか書けますよ。1,'X'が無い列ですね
質問者さんはファンクションインデックスの意味を理解してないのでは... http://www.atmarkit.co.jp/bbs/phpBB/viewtopic.ph … http://www.atmarkit.co.jp/fdb/rensai/oraobstacle …
スキーマA君がDBLINK(B)を使える権限さえあれば、問題ないように思いますが、 何か発生しましたかね？ なお、そもそもDBリンクオブジェクトはDBインスタンスに帰属するもので、スキーマの所有物のイメージではないと思います（＾＾）
comboBox1、comboBox2 は必ず'YYYY-MM-DD'形式で入力されてますか？ ＃１さんのご指摘の通り、シングルクォートで囲まないまま入力が'YYYY/MM/DD'形式だと、 /を実行指令と解釈しておかしくなるかも。 先頭１行目は、右辺のstrSQLを省略しておかないと、何があるかわからないので注意されたほうが良いですよ。 strSQL = "select K.Hiduke 日付, S.Syouhinmei 商品名, S.Tanka 単価, K.Suryou 数量, (S.Tanka * K.Suryou) 金額"; strSQL = strSQL + " from SyohinHyo S, Kounyurireki K"; strSQL = strSQL + " where K.Syouhinbangou = S.Syouhinbangou"; strSQL = strSQL + " and to_char(K.Hiduke, 'YYYY-MM-DD') "; strSQL = strSQL + " between '" + comboBox1 + "' and '" + comboBox2 + "'"; 'ここでMessage Box でも用いて組み立てたstrSQLの中身を確認する
＞ ストアドプロシージャを出力したいと思っているのですが ＞ オブジェクトブラウザからですと、対象のSPを選択し、スクリプト出力することで 出力と言っているのが、「ソースの出力」なのか「実行結果の出力」なのかが不明ですが、「オブジェクトブラウザのスクリプト出力」なので前者であろうと想定して回答します。 ＞ sqlplusなどから、同様にファイル出力を行うことは可能でしょうか？ はい。可能です。 オブジェクトブラウザも内部的には、ALL_SOURCEやDBA_SOURCEなどのディクショナリからソースを取得していると思われますので、同じ事をすればよいだけです。 以下のSQLを実行して SPOOL すればテキストに保存できます。 実行時のSET文にはちょっと工夫が必要です。 SET HEAD OFF; SET PAGES 0; SET LINES 300; SET TRIMS OFF; --↑他にもあったかもしれませんが、とりあえずこんな感じで。 ACCEPT TARGET_SP_NM PROMPT ストアドプロシージャ名入力： ACCEPT TARGET_SP_OWNER PROMPT 所有スキーマ名入力： SPOOL &TARGET_SP_NM..sql -- &TARGET_SP_NM SELECT TEXT FROM ALL_SOURCE WHERE NAME = UPPER('&TARGET_SP_NM') AND OWNER = UPPER('&TARGET_SP_OWNER') ORDER BY LINE; SPOOL OFF; 「ソースの出力」ではなく「実行結果の出力」であれば、 EXECUTE SP_XXXX(&引数 ...); などで実行できます。 （※OUTパラメータを使う場合は、無名PL/SQLブロックを使う必要があります） SPOOL の方法は同様なので、上記を参考にしてください。
statusのコマンドでタイムアウトしているので必要なポートとかがセキュリティソフトでブロックされたりしていないでしょうか。
Oracleのデータガードのマニュアルはごらんになられていますか？ Oracleオンライン・ドキュメントからダウンロードして、読んでみてください。 ただ、マニュアルだけは難しいのも事実で、 そのような場合はOracle保守サポートに、こういうことをやりたいのだがどうすればよいか？ というご相談をすれば、アドバイスいただけるものと思います。 業務上という話であれば、それが一番安全確実なすすめかたですので。
INSERT INTO 別テーブル (列名) SELECT COUNT( * ) FROM テーブル１ または UPDATE 別テーブル SET 列名 = ( SELECT COUNT( * ) FROM テーブル１ ) WHERE 条件
1文ずつのSQLではこの機構の大事さがピンと来ないかも知れませんね。 (1)のユーザが、updt_flagを1にした後、コミットされるまでに1になっていることを前提に 実施される処理を考えてみてください。 つまり、「updt_flag」を1にするSQLを実施している最中とか直後に、0に戻されている 可能性があるとしたら、 「updt_flag」を1にupdateする 行為そのものが信用出来なくなりませんか？ 「1にしたけど、もしかしたら同時に0にされてるかもしれない」 「1にしたけど、もしかしたら同時に10にされてるかもしれない」 ： 一々、Select文で「1のままだよね？」って確認したとしても、その確認の最中とか直後に また同じ心配が発生しちゃいます。 常時監視するしかないですかね？変更があったら自動的に通知されるような仕組みを作る？ その通知を受け取ったら、「1にする処理が信用出来なくなった」として処理を変更？ ・・めんどくさいというよりナンセンスですよね。 一連の処理（＝「トランザクション」と言います）が完了して、じゃ、次の処理で「updt_flag」 （在庫数かもしれないし、許可フラグかも知れないし）を操作して良いよ、というところまで、 データは不変でなければいけません。 ＝「データの一貫性」が守られないとＤＢを使ったプログラム・操作が出来ませんのでデータを ロックする（守る）必要がある、ということです。 ちなみに、ロックされているデータを使いたい方から見れば、ロックされてるか（フリーズした みたいになっちゃいますから）知りたいって時は、(2)の update dept set updt_flag=0 where id=1111; のときに、 select updt_flag from dept where id=1111 for update nowait; とすると、前の処理の完了（commitか、rollback）を待たずに、「ロックされてたよ」とエラー を出して制御が戻ってきます。（試してみてください） ORA-00054:リソース・ビジー、NOWAITが指定されていました。 10秒だけ待つ、なんて書き方も出来ます。 select updt_flag from dept where id=1111 for update wait 10; 一連の処理同士が開放を待ち合ったまま動けなくなるデッドロックや、ロックされている行数が 増えたら表全体のロックにエスカレーションしたり、Insert・Deleteの場合はとか・・ロック戦略 は奥が深いです。 ↓この辺の用語を理解出来ると、その制御を実現するために不可欠な仕組みだという事が 理解出来るでしょう。 排他制御、ダーティ・リード、ファントム・リード、ACID特性 当然、これらの概念はＤＢ共通です。 ※すいませんがSQLは（合ってると思いますが）実際に検証してません。 　SQLのマニュアル参照してください。
LONGROWが不要ならSELECTで列名を列挙してください。 とりあえず表を作りたいなら create table 新TABLE as select * from コピー元TABLE WHERE ROWNUM < 0
＞sqlplusに接続後、 ＃１の方の回答の通りです。 が、expdp/impdp は、sqlplusのコマンドではありません。 なので、sqlplusで実施されても出来ません。OSから起動します。 従来のエクスポート・インポートをどのように実施されていたか判りませんが、 sqlplusをタイプ（実行）するところでexpdp～を実行して下さい。 tool等お使いの場合は、エクスポートのオプション設定が出来ないか、 確認されると良いでしょう。 （大抵はGUIにしているだけで、裏ではexpdp/impdpが動いてますから）
SET TRANSACTION USE ROLLBACK SEGMENT ロールバックセグメント名; ですか？これは外から書けないですけど。SQL*Plusなら何とかなると思うけど。
先ほど回答を入れたbaunceです。 申し訳ないです。すでに私と同じような内容で既にみなさん が回答されていました。 むだな投稿してしまいました。 すみません。
もう解決済みかもしれませんが、Packageか何か function の上位のクラス(?)の名前をつけたらどうでしょうか。 パッケージ．GETKANANAME('00001')
他のクライアントのバージョンやＯＳ等はどうなのでしょうか バージョン差異やＯＳ差異があるとOracleの不具合の可能性も考えられます。
回答についてはNo.1さんのおっしゃるとおりなのですが、 >ところで、外部結合において良くある間違いとして以下のようなSQLがあります。・・ というのはどういうことでしょうか？ たとえば with a as ( select 1 id from dual union all select 2 id from dual ) ,b as ( select 1 id ,'テスト' name from dual union all select 2 id ,'' name from dual) select a.id aid,b.id bid,b.name from a left join b on a.id = b.id and b.name = 'テスト'; とした場合、 AIDBIDNAME 11"テスト" 2"""" となりますが、これは >外部結合が全く意味をなさないSQL なのでしょうか？ 自分としては正しい外部結合になっていると思うのですが。 oracle10.2.0.1.0で確認しました。 便乗質問で申し訳ありませんが教えていただけたら幸いです。
(1) マテリアライズドビューログを作成後からマスター表への更新が全て記録されます。 マテリアライズドビューの有無には関係ありません。 (2)完全リフレッシュの際にはマテリアライズドビューログは使用されません。 が、完全リフレッシュ以前のマテリアライズドビューログは不要になり削除されます。 (3)高速リフレッシュが終わった後はマテリアライズドビューログは不要になり削除されます。
＞日付型（yyMMdd）にした変数を引数にして 日付型（yyyyMMdd）にしてみては？
IBM DB2の書籍が電子書籍として翔泳社から無償公開されております ・DB2 9.7 エバリュエーション・ガイドブック（書籍版（翔泳社刊：書籍版￥2,310）と同等の内容） ・DB2 9.7 & Oracle 11g 比較ハンドブック ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ・共有ディスク型クラスタ「DB2 pureScale」の実力 ・DB2 徹底使いこなし講座 Oracleとの比較もダウンロードできるようなので、この機会にユーザー登録してみては いかがでしょうか？ ご確認ください 参考URL：http://nakayama.ddo.jp/wordpress/?p=704
Enterprise Managerの設定にSYSのパスワードがあるはずです。(これがないとEnterprise Managerといえど、DBはさわれません。) そこも変えないとEnterprise Managerでは対応できないと思います。 停止・起動を手動で行えばいいと思いますが。
No1さんも言っていますが、対象のデータがわからないと何が回答しずらいです。 対象データと、抽出する仕様を具体的に教えてください。 また、記載のSQLと現在の表示の整合性がないです。 受信日はどこにいってしまったのでしょう・・ 具体的かつ正確に質問内容を書いた方が回答も付きやすいと思いますよ。
確認ですが、その項目はdate型ですか。それともcharやdateがたですか。 data型なら単純に、to_char(項目,'yyyy/mm/dd')　でOKですが、 文字型に、そのままいれてるだけだと一工夫が必要です。 日付に変換してからフォーマットを指定するとか。 to_char(to_date(項目),'yyyy/mm/dd') データ型を気にする癖をつけたほうが良いですよ。
無名ブロックは、毎回同じSQLを流し直す必要がありますが、 CREATE PROCEDUREを作成すればDBにそのプロシージャが作成されて、 次からは名前指定で実行できます。 exec 名前 私は特に区別はしてないですが、 クライアントから実行する場合はプロシージャを作成しますが、 サーバ上のバッチでSQLファイルからを実行するときは無名ブロックを使ってます。 ※いちいちプロシージャを直すより、SQLファイルレベルで直すほうが個人的にはやりやすいので。 まあ、このあたりは各現場次第な気がしますけどね。
SELECT * FROM cd_table WHERE cd_title in (SELECT cd_title FROM price_table WHERE cd_price<1500) か SELECT * FROM cd_table a WHERE exists (SELECT * FROM price_table b WHERE b.cd_price<1500 and a.cd_title = b.cd_title) でいいと思います。
> set Colsep を指定するときに''の中でTABを押すと出力されるファイルもTAB区切りになるのでしょうか? Yes > また、出力ファイルの最後に「～行選択されました。」の文字は消すことは出来ないのでしょうか? こちらをどうぞ。 http://oracle.se-free.com/utl/C1_csv.html
何らかの方法で８進数を１６進数に変換してからSQLLOADERでしょうね。 変換はlinuxならsedとかで簡単にできるでしょう。所詮２５６パターンですから。
VARCHAR2(4000 CHAR)を実際の環境で確認しました。 4000バイトの制限がありますね。私の勘違いでした、申し訳ありません。
同じことを昔、調べました。 10gR1はVIPをひとつしかもてないですが、10gR2からはユーザ定義でVIPを設定できるので対応できるはずです。 各VIPのフェイルオーバー、テイクバックの検証・運用が面倒なのでやりませんでしたが。 なので負荷分散ならAPサーバでやった方が良いと思いますよ。 複数のAPサーバの経路を分散し、APサーバからDBサーバは同じVIPを使うほうが良い気がします。
たとえば select col,sum(col2) from table1 having col3 = 10 group by col1 having sum(col2) > 10 こんなSQLを書くってことでしょうか？ 自分的にはわかりずらいです・・
マニュアル http://otndnld.oracle.co.jp/document/products/or … によると2/の方のようにDEFINE_COLUMNが必要のようですけど。
＞フリーのソフトでそれに代わるものはないのでしょうか ありません。 フリーのDBはたくさんあるので、それを使えばいいではないですか？　ただし、オラクルの代用にはなりません。 LinuxがWindowsの代わりにならないのと一緒です。Linux信者は、Windowsよりも優れているとか、将来Windowsに取って代わるとか、おおぼら吹いて１０年以上たちますが、そのようになっていますでしょうか？ もともとコンセプトが違うので、それぞれの分野で活躍すべきです。 比べて、探そうなんて、発想自体がおかしいし無駄です。 OSでもそうですが、フリーのDBの場合、いろんなことをやろうとすると、他のフリーソフトを使ったりOSの機能をつかったりと、組合わせが重要になります。 それらを駆使して行う力があれば、それらを使うといいです。 例に出せば、クラスタリングとかですね。これはストレージなどを含めたクラスタリングです。開発環境もそれに該当しますね。
問題ありません。 >オラクルではキャラクタセットでAL16UTF16を指定しています。 これはデータベースに格納される際の文字コードを指定しています。 Oracleではデータベースの格納文字コードと取り出した後の文字コードはデータベースサーバで変換 します。 ODP.NETやOO4Oの場合プラットホームがWindowsとわかっているので、取り出しはUTF-8と決まってます。 このAL16UTF16からUTF-8への変換は自動で行われます。 何に変換するかは指定しますが、ODP.NETやOO4Oは変換する文字コードの指定が自動的にUTF-8になっているのです。
下記ツールを使えば、簡単です。 www.superdbtool.com ExcelDBToolで1つのテーブルが出来ましたら、同じ列名のほかのテーブルにコピーできます。 また、Excelに線を引いて、引いた線でデータの作成もできます。 ご参考まで。 参考URL：http://www.superdbtool.com
動的SQLを使えばいいです。 動作確認はしていませんが、 declare cdata varchar2(20); testrec test%rowtype; begin cdata:='sample'; execute immediate 'select * from test where testcolum=' || cdata into testrec; end; / みたいな感じです。 http://otndnld.oracle.co.jp/document/products/or …
UTL_FILE_DIRを使う方法と、CREATE DIRECTORYをする方法を混同されているようですね。 提示された参考ページはきちんと読んだのでしょうか？ まずはそのとおりにやってみてから、自分のやりたいことに応用していけばいいのでは。
関数Aの戻り値が文字列なら buffer := buffer ||【関数A（i）】; とか。
初期化パラメータファイルの場所分かりますか？ $ORACLE_HOME/rdbms/インスタンス名　のパスの下にinit.oraみたいな名前のファイルがあると思います。 その中に、sga_max_sizeとかsga_targetとかいうところの値に3G（もしくはMやK表記かも）という値が入っているかと思います。それを1.5Gに変えて起動してみてください。 変更前にはファイルコピーしておきましょう。 何かやらかしたと思ったときは変更前ファイルと比較してみてね。
> ・空きメモリ不足によりデッドロックが発生する可能性があると考えられるでしょうか。 　　空きメモリ不足云々は、物理的な要因であり、デッドロック　とはまったく 　関係ありません。 > ・デッドロックが発生したことにより、空きメモリが消費されてしまうと考えられる でしょうか。 　　ありません。 　　ただし、デッドロックにより、データベース関連の処理がスムースに行われなくなり、 　システム全体としてのスループットが落ちます。 　　そうすると、システムの中に滞留している状態の情報が増加するので、それらを保持 　すのために　メモリが消費されることはあります。
私も、なぜ？　と言う気もしますが。 でもまあ、普通クラスターにする時ぐらいにしか使わないでしょう。つまり、物理的にNICが２つ以上あり、又は、OSレベルでクラスター設定になっている時に、分散処理できるようにするための設定かと思います。 なのでまずOSレベルで２つ以上の通信手段が必要です。それに対して一つずつ、リスナーの割り当てが可能。 これ以外は、エリアスになります。例えば、hostsなどで 111.111.111.111 orahost tokyo.co.jp oosaka.co.jp なんてした場合ですよね。具体的に、対象のマシンが認識するドメイン名（ホスト名とIPがバインドされている）があれば、リスナー名はいくらでもエリアスできます。 そうだったような気がしますが。
間違っていないと思います。 でも、私は、NUMBER 型を使います。 理由は、プログラムを書くときに、明示的にフラグだと解るようにしたいからです。 フラグとしての使い方を考えると、 プログラム上では、単体で動作する事が多くなってきます。 例えば、データを論理削除する場合に、削除フラグとして利用します。 その時には、SELECT の時には、WHERE の一部として入力されて利用されます。 UPDATE では、他のデータと同時にってよりも、削除フラグだけを設定する事が考えられます。 その為に、他のデータと記述上で見分けが付くように、しておきたい為です。 また、入れるデータも プログラム言語上で利用する True や False を使って明示的に解るようにしたい為です。 この辺りは、何が合っていて、何が間違っているって言うのは少ないと思います。 ルールをしっかりして、混合する様なルールになっていなければ、正解だと思います。
[テーブル1]は[キー]と[値A]でユニークになると仮定すると、下記の様なSQLでもINSERTできるかと。 なお、ORACLE では試していません。 INSERT INTO テーブル2 (キー, 金額1, 金額2, 金額3) SELECT COALESCE(t1.キー, t2.キー, t3.キー), COALESCE(t1.金額, 0), COALESCE(t2.金額, 0), COALESCE(t3.金額, 0) FROM (SELECT キー, 金額 FROM テーブル1 WHERE 値A = 1) t1 FULL OUTER JOIN (SELECT キー, 金額 FROM テーブル1 WHERE 値A = 2) t2 ON (t1.キー = t2.キー) FULL OUTER JOIN (SELECT キー, 金額 FROM テーブル1 WHERE 値A = 3) t3 ON (t2.キー = t3.キー OR t1.キー = t3.キー)
できません。
異種間のデータベースリンクは向きによっては可能です。 SQLServer -> Oracle http://www.sunvisor.net/db/link_table http://support.microsoft.com/kb/280106/ja これはOracle 10gですが http://www.atmarkit.co.jp/bbs/phpBB/viewtopic.ph … Oracle 11gですが http://otndnld.oracle.co.jp/document/products/or … ここはOracle8i http://otn.oracle.co.jp/forum/thread.jspa?messag …
for update nowait としたらどうでしょうか？ 参考URL：http://oracle.se-free.com/dml/10_forupdate.html
NULLが入りうるカラムはNVLで括った方が安全です。 SELECT SUM(NVL(項目,0)) from テーブル WHERE 条件 SUMの場合は、変わりないですが、AVGだと結果が違ったりします。 件名を見て、SUM以外の関数についても含むようだったので一応。
データ項目に互換性が無いものが存在するし、SQL文が完全互換でないでしょう。 アプリケーションがOracleとMySQLの両方に対応するなんてことは不可能だし。
手法としては、昔からよくある手法だとは思います。 デメリットとしては、扱うデータ数が増えた時に、検索の性能劣化が起きる可能性が高くなる事ですね。 不要なテーブルもすべて結合していてWHERE条件の増減で結果を絞るとなると、カーディナリティの低い項目同士の結合などにより、索引を使用しない実行計画となり、結果として性能劣化する場合があります。 「条件無しでも駆動表の全表走査＋α程度の劣化しかない」 「条件無しはエラーとして弾いている」 「条件無しはROWNUMで絞っている」 などの対処を行なっていれば、性能障害の可能性を低くする事はできます。 但し、その場合でも定期的な監視は必要だと思います。
まず、処理速度の見積もりですが、想定だと危険です（特に、１００件でｎ秒だったから、１００万件だと、かけるいつだねとか）。 一番いいのは、実環境（ハードウェア、データ量、トラフィック）と類似の状態で実測するのが、確実です。 CSVファイルを１行ずつという処理自体は、特に問題ないと思います。 ロック単位（トランザクション単位）さえ、注意していれば。 参考になれば幸いです。
このあたりを参考に http://d.hatena.ne.jp/mokkouyou2001/20080305/120 … http://d.hatena.ne.jp/srkzhr/20090617/1245254444 http://www.oracle.co.jp/forum/thread.jspa?messag …
今回に限ったことではないのですが、質問は1カ所だけにしておいた方がいいと思いますけど。。 回答する人は別の掲示板で既に書かれていることを知らずに書いてしまうこともありますよね。 そうするとお互いに時間の無駄になるのではないでしょうか。 ですので、merge文についてはあちらに書かせてもらいますね。
nvl関数を使ってもいいと思います。 select 　日付, nvl(ブランドコード,'01') ブランドコード, sum(金額) 合計金額 from 　t1 group by 　日付, nvl(ブランドコード,'01')
DBConsoleプロセス（Windowsならサービス）が上がってないんじゃないでしょうか。
>ビューの作成はうまくいっているのですが、 がどの部分を指しているのか分かりませんが、 >SELECT文 >　　取得カラムA, >取得カラムB, >取得カラムC FROM句がないSQLは実行できません。質問時に省略されているだけでしょうか？ もし省略しているなら全文を記載してみてください。 ここに記載してあるSQLが正しいとしたら「ORA-00923」になるように思いますけど。
「ORA-00928」でググるとたくさん出てきます。 空行がありませんか？
NULL文字はX'00'ではありませんから、お間違えの無いように。 その、エラーになるUPDATE文を提示可能ですか？ CHAR属性のフィールドをWHERE句に記述してませんか？
具体的にインストールのどのあたりで発生しますか？ IPアドレスがDHCPなのではないですか？
CASE式を利用すればいいです。 SELECT a.USER_ID, a.TYPE, a COUNTRY, CASE WHEN b.STATUS = 'Z' THEN '999' ELSE b.STATUS END STATUS FROM TABLE1 a LEFT JOIN TABLE2 b ON a.COUNTRY=b.COUNTRY
NWなのであれば60MB/secは最低速度ではなく、最高速度と捕らえたほうがいいでしょうね。 60MB/sec出れば万々歳だと思います。 NW経由でテープライブラリに直結することはできないので、 LANフリーバックアップ（LANを経由しないバックアップ）にしてはいかがでしょうか。 DBサーバにNetVaultサーバを入れてDBサーバにSCSI経由でLTOドライブをつなげば もう少しスピードは出ると思います。 NetVault自体の負荷は微々たるものですし、 バックアップの負荷も結局はDBサーバを経由しますので DBサーバがNW経由でバックアップサーバにデータを送るか、SCSI経由で テープに送るかの違いです。 バックアップ専用LANを用意していないのであればSCSI経由で直接 LTOにDBサーバがバックアップした方が負荷が少なくて済むと思いますよ。
ループを二つに分ける必要ってありますか？ この処理であれば一回のSQLで欲しいデータが取得できそうな気がしますが。 create or replace procedure hoge ( 　sItemClass in コード表.品番%type, 　out_val out pls_integer, 　out_cursor out sys_refcursor ) is begin 　open out_cursor for 　　'select b.資材名,b.色,b.種類,b.サイズ,b.棚番号' 　　|| ' FROM 部材表 a,資材項目 b,コード表 c' 　　|| ' WHERE a.ID = b.資材ID' 　　|| ' AND a.入数 = c.入数 AND a.重量 = c.重量 AND a.才数 = c.才数 AND a.ロケーション = c.ロケーション ' 　　|| case when sItemClass is null then '' else 'AND c.品番 = ' || sItemClass end; 　out_val := 1; end; /
バックアップをバッチ処理で実行するのですか？ それとも、バッチ処理の実行の前後とかでバックアップを取得するのですか？
テーブル数・列数が多いと面倒ですが、列名をDump関数で文字列化して、like検索しては？ 実機テストしてませんが。 TableA( Col1, Col2 )として。||は連結です。 select '|'||dump(Col1,16)||'|'||dump(Col2,16)||'|' dcstring from TableA where dcstring like '%|0|%' --（もしかしたら　where dcstring like '%|00|%' 　かも）
前回に引き続きまたまた、回答させていただきます。 まず期限ですが http://item.rakuten.co.jp/it-test/c/0000000127 のような受験チケットを9/30までに購入すれば来年の8月までは1.5万 （楽天で買えば1枚1.3万ほど）で受験できます。 次に勉強ですが、厳しいことを言うといくら問題集を解いても教科書本を理解しても これ以上は合格率は上がらないと思います。過去のOracle Masterはそうではありませんでしたが 最近ではOracle Masterの資格者も十分増えてきて日本オラクルも合格者を増やそうという 動きからOracle Masterの価値を維持しようといった形にシフトしているように思えます。 なので実践的な問題や応用力を試すような問題が実際には数多く出題されます。 試験対策本、教科書本はオラクルと共同で出版しているので、試験に出る問題をそのまま 対策本に掲載するようなことは期待できません。 あくまで試験対策本などは範囲や出題傾向を知る参考であって試験本を完全に理解しても すぐに受かるということは難しいのが現状です。 幸いOracle Databaseは日本オラクルのHPから無料でダウンロードして XPマシンなどにインストールすることができるため、実践的な力をつけるためにも 実際の環境を作って色々と試してみることが合格への一番の近道かと思われます。 机上の勉強だけで合格できたのは、もう昔の話だと思ってもらえればと思います．．．
もちろん書いてあると思いますよ。 読んでみてください。 参考URL：http://download.oracle.com/docs/cd/E16338_01/app …
batのリダイレクト>>を使わず、SQL*Plus（@ではなく*です）のspoolを使ってはいかがでしょう？ set NLS_DATE_FORMAT='YYYY/MM/DD HH24:MI:SS' sqlplus -S USER/PASS@TNSNAME @data_delete.sql data_delete.sqlの中身 -------------------------- whenever sqlerror exit failer set echo off spool log.txt select sysdate||' データ削除開始' delete from table where flg = 1; select sysdate||' データ削除終了' -------------------------- ご希望のように yyyy/mm/dd hh:nn:ss.xx データ削除開始 yyyy/mm/dd hh:nn:ss.xx データ削除終了 XXX行が削除されました。 とするためにはちょっとSQLだけではできないのでPL/SQLを使う必要があります。
・・・ご自身で少しは考えていらっしゃいますか？ やりたいことはそういうことなのだろうと思っていましたが敢えて書きませんでした。 CHANGENAMEが変更されたら、というIF文を書けばいいだけなのではないですか？ if :old.CHANGENAME != :new.CHANGENAME THEN --insert end if; CHANGENAMEにnullが入る場合は上記の条件では足りないと思いますが、 そこはご自身で書いてください。
tyome2さんも参照先を示されていますが、 1Z0-051-JPN 11g SQLIと1Z0-017-JPN Bronze SQL Iの違いは難易度のような気がします。 前者（51）が問題数が多く、時間も長い代わりに合格に必要な正答率はやや低い。 後者（17）はその逆ですね。 51→120分、55問、60% 17→90分、40問、70% 問題集をどちらも立ち読みをして自分にしっくり来る（理解しやすい）ほうが51であれば 51を受けたほうが易しいような気が私はしました。 なお、試験費用は10月から一気に値上がりしますのでご注意を！！ http://www.oracle.com/global/jp/education/news/c …
ExportファイルのサイズとImport後のサイズは同期しません。よくある誤解です。 ExportファイルにはCreate文とInsert文が書かれています。 Create文にテーブルの初期サイズが設定されてます。初期サイズはCreate時に確保されます。データが少なくても（＝Insert文が少ない）初期サイズが大きければテーブルのサイズも大きくなってしまいます。 もちろん、索引のサイズが大きい可能性はあります。 ただ、索引がデータ量の4倍のサイズになるとは思えません。 show=yでインポートを行うと、Create文が表示されるので、そこの初期エクステントを調べればわかると思います。 ＞インデックスをインポートしないようにすると ＞DBへデータを入れたあとにインデックスがきかなくならないのでしょうか？ 索引が存在しないので当然、索引検索は行われません。 ＞それともインポート後に検索したときに自動で ＞つくものなのでしょうか？ 明示的に作成しない限り自動で作成はされません。
Oracleのテーブルの種類（？）でトランやワークなどといったものはないのですが…。 単にテーブル名に～トラン，～ワークとついてるだけですよね？ それぞれ、使い方が違うテーブルなのだと思います。 ～トランは、トランザクションの略。 日々の業務上発生するトランザクション（一連の処理）から出力するデータのことで、何かの処理の都度、追加・更新されていくテーブルに付けられることが多いです。 ～ワークは、作業用。 何かの処理で一時的にデータを保存し、処理が終われば削除するようなテーブルに付けられることが多いです。 ただ、これらはあくまで僕が経験した業務で使われてた名前で、作った人によって微妙に異なることがあります。 プログラムからの使われ方を調べるか、テーブルの設計者に確認されてください。
select onwer,table_name,tablespace_name,INITIAL_EXTENT from user_tables where table_name = 'テーブル名' テーブル名は大文字です。
未だに異常終了の展開から抜け出せないのでしょうか?
資格取得が目的なら、黒本や赤本で勉強しましょう。 OracleのBronze、Silver、Goldは運用に関する知識なので、SQLが効率よく書ける勉強ではありませんので、お間違えないように。 データベースの技術は、SQLが効率的に書ける、表/索引の設計ができる等のアプリケーションスキルとインストールやデータベースのチューニング、トラブル対応ができる等の運用スキルに大別されます。 どちらを目指すか、どちらも目指すかを考えてください。
■oracle10g サーバのIPアドレスを変更した場合の対処 (1)oracle\product\10.2.0\db_1\NETWORK\ADMIN配下の以下のファイルにIPが記載されているためそのIPアドレスを変更し、サーバ再起動 【ファイル名】 listener.ora tnsnames.ora http://sememo790.blog71.fc2.com/blog-entry-23.html
ユーザー、スキーマ、テーブル毎に、 (物理的な格納方式という意味で、) 文字コードを個別に指定することはできません。 ただし、基本的には、クライアント側の文字コードと、 Oracle Database 内の物理的な文字コード（＝データベース・キャラクタセット） は独立しています。 したがって、アプリケーション毎、ユーザー毎に、 アクセスする際のクライアント側の文字コードを切り替えれば いいのではないでしょうか。 たとえば、データベースキャラクタセットが JA16EUC の場合でも、 NLS_LANG 環境変数を、 NLS_LANG=Japanese_Japan.JA16SJIS のように設定すれば、クライアント側の入出力文字コードは Shift_JIS になります。 この文字コードの変換は、Oracle Net が行います。 データベース・キャラクタセットとしては、 全ての文字コードのスーパーセットである AL32UTF8 を利用する、 という考え方もあります。
TRANSLATE関数なんかが役に立つかも。
dbms_lob.substrとconvertを組み合わせれば、お好みの文字コードに変換可能だと思いますよ。 blobフィールドのサイズが大きいと面倒ですけどね。
どうにもならないと思います。
こんばんは。 実際に試してはいませんが、 こんな感じでいかがでしょうか。 SELECT テーブルA.X, テーブルB'.Y FROM テーブルA LEFT OUTER JOIN (SELECT MAX(Y) Y FROM テーブルB GROUP BY X ) テーブルB' ON テーブルA.X = テーブルB'.X
http://www.shift-the-oracle.com/sql/national-lan … ここを参考に、to_multi_byteとnlssortを使えばいけるかなと思ったのですが、 半角カナで濁点があったりするとダメでした・・ ORACLE TEXT を使ってみてはどうでしょうか？ http://www.esco-sb.jp/blog/roughjustice/archives … http://www.okisoft.co.jp/esc/ora.html#ora01 を参考に。
正規表現で抽出条件を指定すればイケると思います。 WHERE REGEXP_LIKE(列,'.*XXX.*') http://www.shift-the-oracle.com/sql/functions/re … http://www.shift-the-oracle.com/sql/regular-expr …
Not In を使えばいいと思いますよ。
2の方の通りで、項目のデフォルト値が設定されます。デフォルト値を指定していない場合にはnullになります。 1の方のゴミは入りませんので、お間違えの無いように。
sqlplusで実行しているなら、 set serveroutput on unlimited set lines 32767 pl/sqlのみなら DBMS_OUTPUT.ENABLE(1000000) とかでは。
簡単な規則で表せるようでしたら、制約(CONSTRAINT)を表に追加されてはどうですか。
Oracleでは、ユーザ名は英大文字、カラム名は"で囲まない限り英大文字になります。 ですから、 (1)は owner in ('SYS','ADMIN')または( owner = 'SYS' or owner = 'ADMIN' ) (2)は column_name like '%AAA%' です。
#手元で実験できないのでてきとーなことを言っているかもしれないので参考程度に。 CONNECT BY と SYS_CONNECT_BY_PATH() を組み合わせればちょこちょこっとできませんかね? KEYの値が同一だから階層に出来ないかなー? oracleのSQLリファレンスあたりでCONNECT BY のサンプルに そんなサンプルがあった気がします。
#1 です。 訂正。 ＞カラム <> '’ ↓ カラム <> ''
TABLESPACEのデフォルト値、TABLESPACEにデフォルト値がなければ、64K
SQL> create table ord_search_pattern 2 ( 3 ORDER_NO varchar2(5), 4 KANRYO_DAY varchar2(8) 5 ); 表が作成されました。 SQL> create table ORDER_INF 2 ( 3 ORDER_NO varchar2(5), 4 KANRYO_DAY varchar2(8) 5 ); 表が作成されました。 SQL> insert into ord_search_pattern values('A','20100820'); 1行が作成されました。 SQL> insert into ORDER_INF values('A',null); 1行が作成されました。 SQL> select * from ord_search_pattern ; ORDER KANRYO_D ----- -------- A 20100820 SQL> select * from ORDER_INF ; ORDER KANRYO_D ----- -------- A SQL> SQL> DECLARE 2 CURSOR r_search IS SELECT * FROM ord_search_pattern; 3 BEGIN 4 FOR r IN r_search LOOP 5 UPDATE ORDER_INF t1 6 SET t1.KANRYO_DAY = r.KANRYO_DAY 7 WHERE t1.ORDER_NO = r.ORDER_NO; 8 COMMIT; 9 END LOOP; 10 END; 11 / PL/SQLプロシージャが正常に完了しました。 SQL> select * from ord_search_pattern ; ORDER KANRYO_D ----- -------- A 20100820 SQL> select * from ORDER_INF ; ORDER KANRYO_D ----- -------- A 20100820 更新されますが？ データの整合性の問題では？
こういうことでしょうか。 select 　DB2.区分1,DB2.フラグ1,M1.名称 　,DB2.区分2,DB2.フラグ2,M2.名称 　,DB2.区分3,DB2.フラグ3,M3.名称 　,DB2.区分4,DB2.フラグ4,M4.名称 from 　DB2 　　inner join DB1 M1 on M1.区分 = DB2.区分1 and M1.フラグ = DB2.フラグ1 　　inner join DB1 M2 on M2.区分 = DB2.区分2 and M2.フラグ = DB2.フラグ2 　　inner join DB1 M3 on M3.区分 = DB2.区分3 and M3.フラグ = DB2.フラグ3 　　inner join DB1 M4 on M4.区分 = DB2.区分4 and M4.フラグ = DB2.フラグ4;
>ためしに　SELECT 文を実行したところ　参照できてしまったのです そうですか。DBの内容やそのSQLが分からないので確認方法として正しいのかはこちらで判断できませんね。 システム権限やロール、個別にオブジェクト権限が付与されていないかを確認してみて、 なぜ参照できているのかの原因をはっきりさせるところからですね。 参考URL：http://www.atmarkit.co.jp/fdb/ref/ref_oracle/pri …
記載の記述内容で間違っていないです。プロシージャに埋め込む必要もありません。 記載内容をコピペして全角スペースを消したら当方の環境(10.2.0.1)で正常に処理できました。 4分くらいで完了しましたが。 DBの規模がわからないのですが、ただ純粋に処理に時間がかかっているだけなのではないしょうか？
SELECT A.* FROM Ａテーブル A INNER JOIN TABLE(SELECT B1,B2,COUNT(*) SU FROM Ｂテーブル GROUP BY B1,B2) B ON A.A1=B.B1 AND A.A2=B.B2 AND A.A4<>B.SU または WITH B(B1,B2,SU) AS (SELECT B1,B2,COUNT(*) SU FROM Ｂテーブル GROUP BY B1,B2) SELECT A.* FROM Ａテーブル A INNER JOIN B ON A.A1=B.B1 AND A.A2=B.B2 AND A.A4<>B.SU こんなのでどうでしょうか？ 後者の方が標準的（他のDBシステムでも 使える可能性が高い）かと思います。
>Oracleは、時刻をHH:MI:SSの24時間形式で格納します。 デフォルトでは、時刻部分に何も指定しない場合、日付フィールドの時刻部分は00:00:00 A.M. （真夜中）になります。 とマニュアルにありますね。 参考URL：http://otndnld.oracle.co.jp/document/products/or …
(1)当該Webページから「試験合格申請/移行申請を行う」をクリック (2)検索条件で資格種別(ORACLE MASTER), 資格(ORACLE MASTER Bronze Oracle Database 10g(11g))を選んで「検索」をクリック で、1Z0-017Jが検索結果に出てきませんか。
SELECT B.商品コード,A.X,B.カテゴリー FROM (SELECT 商品コード,COUNT(商品コード) X FROM テーブルA WHERE 追加年月=201008 GROUP BY 商品コード HAVING COUNT(商品コード)>1) A INNER JOIN テーブルA B ON A.商品コード=B.商品コード 感覚的にはこのようなSQLになると思います。 サブクエリの方でレコード数を絞っておくべきで、結合後の 結果に対してWHERE句を割り当てるより高速です。 ただ、これで目に見えるほど改善されるかどうかは不明です。
conn / as sysdba で接続しても駄目ですか？
10g（R2？）以降、GROUP BYではソートはおこなわれず HASHを使うようにアルゴリズムが変更されましたが、 そのことでは？
select * from DB a where 'フラグ'=1 and 　　　'金額'=(select max('金額') from DB b where a.No = b.No and 'フラグ'=1) くらいでよいですか？ 質問に書いてある以上のフィールドがあって、ちゃんとレコードを選択する必要があるなら、こうなると思います。 本当に、質問に書いてあるだけのフィールドで、金額の数字さえ解ればよいのであれば、Ｎｏ．１さんの解答の方が、シンプルですね。
LOAD DATA TRUNCATE CONTINUEIF LAST != '"' INTO TABLE WORKTABLE TRAILING NULLCOLS ( data1 char TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"', data2 char TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"', data3 char TERMINATED BY x'09' ) のように、フィールド毎に、区切りや囲みを指定する事は可能です。 上記の例だと、第３フィールドは「""文字列,文字列""」という内容で登録されます。 ローダーはダブルコーティション以外の囲み文字の場合には、ダブルコーティションを エスケープ文字として使えないので、そのままロードされます。 なので、data3にREPLACE関数記述で、ダブルコーティション２個を１個に置換すれば、 実質的にエスケープ文字として使えるんじゃないですかね。 （「""aa,bb,"",cc,""」→「"aa,bb,",cc,"」のような感じで。）
BYTEは >アクセスされるバイト数のCBOのアプローチによる見積もり ですね。あくまで予想される読み込みバイト数です。実際の値ではありません。 これくらいは読むだろうと言う予測です。 >検索条件に合致して取得できるデータが多いほうがバイト値が大きくなる 検索条件に合致しているかどうかも、読んでみなければわかりませんから。 結果のバイト数ではありませんよ。
＞一行目：履歴番号がNULLのときは変更回数0とする。 ＞二行目：履歴番号が他レコードの番号と一致する場合、1を持つ。そのレコードの履歴回数がNULLなら判定終わり。 ＞三行目：履歴番号が他レコードの番号と一致する場合、1を持つ。そのレコードの履歴番号が更に他レコードと一致する場合、2を持つ。そのレコードの履歴回数がNULLなら判定終わり。 と言うこと前提に結論です。ＳＱＬでは書けません。フロントエンドでの処理が必要です。 つまり、一行しかヒットしなかった場合は当然履歴番号はＮＵＬＬですね。でそのＩＤのレコード取得は終了ですね。 二行ヒットした場合は、ＮＵＬＬデータの処理と履歴を持つレコードの処理が必要になりますね。つまりここで二重作業（レコードの再検索）が必要になります。 さらに三行ヒットした場合、上記に加えて三行目の処理も必要になります。（再度のレコードの再検索） しかしレコード数は一定ではないと推察しますので、一回のＳＱＬ文でこの様な全データを取得するのは不可能と考えます。 また常に３レコードあるとすれば何とかなりそうですが３レコード以上の場合もあるとすれば１回のＳＱＬ文でこのようなデータを取得するは不可能です。 行うとすれば、ＩＤ毎に必要な処理をさせてワークテーブルにＩＮＳＥＲＴし、更新回数を設定する。出力結果としてワークテーブルの内容を出力するという方法しか今の私には思いつきません。
SQL 文と 各オブジェクトの状態が分からないので、一般論です。 ・ORDER BY 句に指定する列に INDEX が無い。 ・INDEX が張ってあっても、該当列は NULL データを許可している。 ・単純にデータが膨大。 等々。 もう少し詳細情報（出力された実行計画など）があれば、詳しいアドバイスが期待できると思いますよ。 参考URL：http://www.hi-ho.ne.jp/tsumiki/doc_1.html
10g XEはWindows7に対応してないと思うけど。
はい、そうです。
回答No.7 です。 WHERE句が間違っていました。ごめんなさい。 ------------------------------------------------------------------------- SELECT * FROM 対象テーブル a WHERE NOT EXISTS (SELECT 'x' FROM 対象テーブル b WHERE a.店舗CD = b.店舗CD AND (a.適用日付 < b.適用日付 OR (a.適用日付 = b.適用日付 AND a.ID < b.ID))); -------------------------------------------------------------------------
DECODEの使い方が間違ってるだけなんですが・・ DECODEの中で、比較演算子は使えません。 R11をお使いなら、無理にDECODEを使うよりは、 CASEで書き直したほうがいいと思いますよ。 case when a.最大在庫-(b.場内在庫-b.引当数量)>0 THEN a.最大在庫-((TRUNC(b.場内在庫/b.入数,0))*b.入数 ELSE '-' end case AS 補充数量, (a.最大在庫-(a.最大在庫-((TRUNC(b.場内在庫/b.入数,0))*b.入数))) AS 補充梱包数量, という感じなんですが・・ 疑問符が付くところが数箇所・・ (1)引当済みの在庫は、補充数量に数えなくて良いのか？ (2)補充梱包数量とは、補充数量を入数で割った数なのでは？ 想像ですけど・・ case when a.最大在庫 - (b.場内在庫 - b.引当数量) > 0 THEN a.最大在庫 - (b.場内在庫 - b.引当数量 - mod(b.場内在庫 - b.引当数量,b.入数)) ELSE '-' end case AS 補充数量, (a.最大在庫 - (b.場内在庫 - b.引当数量 - mod(b.場内在庫 - b.引当数量,b.入数))) / b.入数 AS 補充梱包数量, こんな感じかな・・
コンパイルエラーはステップインではわかりませんし、コンパイルエラーのあるプロシージャは実行できないのでステップインが出来ません。 そのプロシージャのソースをsqlplusに貼り付ければ、どこの行がエラーかは表示されます。 show errorsとかでね。
質問に対してどう対応するべきかの論議はお任せするとして技術的な回答をさせていただきます。 （１） 社内のDBのアーカイブログが10Gくらいあるがこれは普通か。 １日に出力されるアーカイブログファイルの合計容量が10Gだとすれば （何の知識も無いあたなに託すシステムとしては）多いでしょうね。 例えば教えてgooはH16に１日の質問件数が1500件となったそうです。 １件の質問が平均2000文字、回答は8000文字だとすると、至極単純に考えて 10000文字×2（マルチバイト）×1500件＝30MB/日のアーカイブログが溜まります。 （もちろん他にも色々と記録する情報はあるので、実際にはこれの数倍になるかと思います） ただ、そもそも論を言いますとその10Gのアーカイブログは全く無意味です。 なぜならEXPでダンプを取っている場合、そのダンプを取った時点までは戻せますが、 それ以降のタイミングへはアーカイブロクがあっても戻すことはできません。 アーカイブロックを使って任意の時点に戻したいのであればRMANや専用のコマンド を使ったバックアップが必要です。 （２）アーカイブログはリカバリ以外にも用途はあるか。 厳密にはLogマイナーというREDOログやアーカイブログの中身を見る機能がありますので そちらでどんなSQLが発行されたかを追うことができます。ただし、Oracleは監査機能として 別にauditという機能がありますのでそちらで監査をすることがほとんどです。 なので、アーカイブログはリカバリ以外の用途で使うことは無いと思ってよいです。 ただ、繰り返しとなりますが今の状態ではアーカイブログは何の意味も持たない （それどころか単なる負荷になっています）ので 上司に「障害時は最悪１日前まで戻りますけどいいですよね？」と確認だけして EXPコマンドで１日１回バックアップを取る運用は続けて アーカイブログを出力しないノーアーカイブログモードで運用することをお勧めします。 （もちろんダンプファイルはDBとは別のディスクに置いてくださいね。） 実際、アーカイブログが合ってもちゃんと指定した時点まで戻す方法は分からないでしょう。 リカバリできないバックアップデータほど役に立たないものは無いです。 最後に。 実際に障害が発生した際にあなたができることは正直、少ないと思います。 ただそれが悪いことではないです。適応を考慮せずに無理やり仕事を押し付けた上司が悪いんです。 でもこの際ですから、少しづつ色々と調べてDBに詳しくなる勉強の場として社内のDBを 利用すればいいと思います。「仕事中にOracleの勉強ができるなんてうらやましい」 と日々思っているOracle技術者はたくさん居ますので．．．
#1さんの言うANSI方式でSQLを書いた方が分かりやすいかも・・・ SELECT AB.*, CD.*, E.*, F.* FROM ( SELECT A.*, B.* FROM TOIAWASE A INNER JOIN KOKYAKU B ON(A.KOKYAKU_NO = B.KOKYAKU_NO) ) AB LEFT JOIN ( SELECT C.*, D.* FROM TOIAWASE_TAISHOU C INNER JOIN MOUSIKOMI_INFOMATION D ON(C.MOUSIKOMI_TYPE = D.MOUSIKOMI_TYPE) ) CD ON(AB.TOIAWASE_NO = CD.TOIAWASE_NO) LEFT JOIN MOUSIKOMI_INFOMATION E ON(CD.OLD_MOUSIKOMI_TYPE = E.MOUSIKOMI_TYPE) LEFT JOIN KINMU_MASTER F ON(AB.KINMU_CD = F.KINMU_CD) WHERE 「その他選択条件」 こんな感じかなぁ・・・
おそらくこういうことをやりたいのではないですか？ SELECT A.NO, B.BUSYO_CODE, C.BUSYO_NAME FROM TABLE1 A LEFT JOIN TABLE2 B ON(A.NO = B.NO) LEFT JOIN TABLE3 C ON(B.BUSYO_CODE = C.BUSYO_CODE) これなら部署コードや部署名が無い場合はNULLで表示されますから・・・
Java内で生成したSQL文を見ないとなんとも言えないけど。 Javaでリテラル吐き出して編集してますかね？ select UserID, UserName from mstUser where UserID = '001'; みたいな。 条件によって 001 の部分を変化させるような。 だったらJavaでシングルクォートを吐き出すところを二重にしてみるとどうかな？ ダブルクォートでは無いよ。二重に書くことでシングルクォート一個と解釈されればOKのはず。 そうしておかないとSQL文全体を文字列で扱うんだろうから、シングルクォートの対応が崩れる。 つくりとしては以下のように作成。 select UserID, UserName from mstUser where UserID = ''001''; みたいな。 SQL文を文字列変数に格納するんだろうから 'select UserID, UserName from mstUser where UserID = ''001'';'
確かに記号の場合は、移行時に問題が発生する物もありますが、●については、普通にVARCHAR2で問題ないです。 ●以外の値が入らないのであれば UTF-8なら VARCHAR2(3)、 それ以外なら VARCHAR2(2) でよいでしょう。 （固定なのでCHARの方が望ましいかな） 但し、Excel側のデータの精度が不明なので、前後にスペースや改行が入っていないか、等を確認し、移行時にTrimして桁あふれが起こらないようにする必要があります。
ないでしょう。
残したいデータ（レコード）に共通点があれば可能です。 予めパーティションテーブルとしておいて、 残したいデータのみを挿入するパーティションとそれ以外のパーティション定義とします。 パーティションレベルでのTRUNCATEやDROPであれば一瞬でできますし、 必要としている１万行が消えることも一切ありません。 ただし、EEのオプションとなりますが。 EEを買っていないのであれば各パーティションに相当するテーブルを作って テーブルとテーブルをUNIONするVIEWを作る形になります。
GLOBALとは? マニュアルを見てください。そのくらい自分で見てください。買った時に一緒についていたはずです。しかもオンラインヘルプもあるし。 下記のURLからもDLできます。 http://www.oracle.com/technology/global/jp/docum … http://www.oracle.com/technology/global/jp/docum … （この中身は掲載できないのであしからず。） SELECT文からどうのこうのとありますが、意味不明です。 構築に関する記事を読めば出てきます。 上記のサイトで全て解決。そういえば、そのURLもglobalが使われていますね。そういう意味です。共有か専用か、ローカルかグローバルか、グローバル用に設定（作成）してください。
#1です。 cacheが効かないことは無いと思いますよ。 SSDのプチフリ対策のRAMDISK関連の記述とかにも良く載っていますが SSDが速いといっても所詮数百MB/secレベルです。 それに対してcache（メモリ）は数千MB/secレベルなので10倍以上速くなるはずです。 処理時間が変わらなかったのであればおそらく最初からメモリに載っていたのだと 思います。 OSを再起動した直後に普通に一発目でselect count(*) from table_name; とする場合とcacheに載せてから（alter table...だけではキャッシュには載りません その後select * from table_nameを行って初めてキャッシュに載ります） select count(*) from table_nameとするのでは格段の差が生まれると思います。 実際に計測するときにselect * from table_nameでやってしまうとDISKやメモリへの アクセス速度だけではなく、結果の画面表示の時間がほとんどになってしまって 差は生まれない（隠れてしまう）と思います。
＞||が、「または」でその後の'%'がどう言う意味 || は「または」ではなく、文字列の連結です。 つまり where 商品種類 like 'aa10%%' と言う意味になります。 通常の曖昧検索で使用するワイルドカードは % ひとつでよいので、%% とする意味はあまりないように思いますが、プログラムの作り上、このようになっているのではないでしょうか？ 例えば、'aa10%'部分がプログラムから与えられるパラメータだとしたら、入力が無かった場合でも（like '%' になるので）商品種類を全部表示するようにする、とか。
すでに回答がありますが、具体的にdba_tablesにアクセスできるDBA権限を持ったユーザでのログイン方法ですが、 sqlplus "/as sysdba" でログイン可能です。 あとは sqlplus system/manager@{接続文字列名} でもログイン後dba_tablesにアクセス可能です。 接続文字列はtnsnames.oraと言うファイルの中に定義する文字列です。 tnsnames.ora自体の書き方についてはGoogleなどで「tnsnames.ora 書き方」 などとして検索してもらえればたくさん出てくると思いますのでそちらを参考にしてください。
まず、本当にやりたいことを教えてください。 なんとなくですが、手動でのアクティブ・スタンバイの構成をとりたいようなニュアンスが伺えますが、本当はどうなんでしょうか。 それとも同時にデータベースを参照したいのでしょうか。 その場合、RAC構成になりますのでRACに対応した外部ストレージを用意してください。 単にPC2でもデータがみたいだけならOracleCliantをいれて接続してください。 本当にやりたいことを第三者に伝わるように記載してください。
出来ますけど。 PROCEDURE PutErrorLog( pkgName IN VARCHAR2 , funcName IN VARCHAR2 , errcd IN INTEGER , sqlerr IN VARCHAR2 ) IS BEGIN DBMS_OUTPUT.put_line(TO_CHAR(SYSTIMESTAMP,'YYYY-MM-DD HH24:MI:SS.FF') || ' ' || pkgName || '.' || funcName || ' '|| errcd || ' : ' || sqlerr); END PutErrorLog; こんな感じ。DBMS_OUTPUT.put_lineを呼んでます。
DBA権限で、 SELECT TABLESPACE_NAME,OWNER,TABLE_NAME FROM SYS.DBA_TABLES WHERE OWNER NOT IN ('SYS','SYSTEM') ORDER BY TABLESPACE_NAME,OWNER,TABLE_NAME
次のfetch openが失敗する。
IBMKEYB.CNFを編集するか、Ctrl＋N/Pでもいけそうな気もします。 http://ttssh2.sourceforge.jp/manual/ja/setup/key … ちなみに最新バージョンを使っていないようなので、 http://sourceforge.jp/projects/ttssh2/ から最新版を入れておいたほうがいいかと。 参考URL：http://sourceforge.jp/projects/ttssh2/
10gのOracleサーバ(クライアント)に含まれるexpユーティリティで11gのデータベースサーバに接続してダンプファイルを生成すれば、10gのデータベースサーバにインポートできる形式になります。
一見したところ、 >"Data Source=ORA_TEST;uid=UID_TEST;pwd=PWD_TEST") で、;pwd=PWD_TEST の後にセミコロンが必要ではないでしょうか？
統計情報が最新でないためデータのアクセス方法がデータの状態と合わない。 統計情報を最新にしてください。
#2さんへの補足から、Oracleビューの変更を未だしていないようなので、#2さんが例として挙げているSQLをSQL Plus等で実行して変更してください。 その後MDBファイルを開き、変更しようとしているリンクテーブルを一旦削除します。 （変更対象テーブルを右クリックし、削除を選択） そして新規にリンクテーブルを作成します。 （「新規作成」ボタンをクリック 　「テーブルのリンク」を選択してOK 　ファイルの種類から「ODBC データベース」を選択 　データソース名から接続しているデータベースを選択してOK　通常データベース名 　ユーザ名とパスワードを入力してOK 　リンクしたいビュー名を選択してOK　毎回パスワードを聞かれないようにするなら「パスワードの保存にチェックをいれる これでリンクテーブルが作成されます。作成前と名前が異なる場合は、右クリックから「名前の変更」でテーブル名を変更してください。
＞DBMS_OUTPUT.PUT_LINEが実行されたタイミングでリアルタイムに画面表示する方法はありますか？ ストアドプロシージャ、と言う事であればありません。 （無名PL/SQLブロックであれば、ブロックを分ける事で可能ではありますが） 処理時間が掛かるような場合は、UTL_FILEでファイルにAPPENDして経過を確認するか、 DBMS_APPLICATION_INFOパッケージを使って、セッションに書き込まれた情報で経過を確認する、などの方法を取ります。
中身がよくわからないので何ともいえませんけれど パフォーマンス低下の原因はCOMMITだと思いますよ。 SQLの基本は一括処理なのですが コミットする理由と一度に処理しない理由は何ででしょう？ 処理途中で異常終了してもちゃんと全体の整合性はたもてていますか? 10gってMERGE文は使えませんでしたっけ?
select t1.syain_no, t1.syain_name from syain_tbl t1, ( 　select '0001' syain_no from dual union 　select '0002' syain_no from dual union 　select '0003' syain_no from dual ) t2 where t1.syain_no = t2.syain_no(+) order by t1.syain_no ;
imp時にはdba権限のあるユーザで以下のように実行してください。 imp dba権限のあるユーザ/そのパスワード fromuser=exp時のユーザ touser=imp先のユーザ file=c:expdat.dmp
SELECT BANK_CD FROM BANK ORDER BY CASE WHEN BANK_CD = '9999' THEN 0 ELSE 1 END, BANK_CD; # 未検証です
「ある時期以降のCPUでJAVAの誤動作が発生してうまくインストールできない」が原因のはず。 さらに悪いことに、レジストリに中途半端に情報作成するので、途中で止まると厄介だった記憶があります。 キーワード「Oracle インストールできない sysmcjit」で解説されてるサイトが見つかるはずです。 インストールファイルをHDD上に展開して、symcjit.dllを検索してリネーム(or削除)する必要がありました。 レジストリは「oracle」に関連するものを「検索しては削除」の繰り返し。 必ずバックアップの上で実施してくださいね。
＞(1)駆動表のサイズを調べる方法はあるのでしょうか？ ＞ハッシュ結合は駆動表の大きさがhash_area_size以下の場合有効（処理速度が速い）と ＞あったのですが… ないと思います。 でも、実行計画ありきなら、机上計算である程度の値は算出できると思いますが。 （その労力がどれだけ報われるかは分かりませんが） あと、OLTPであればハッシュ結合よりもNL結合が選択されるように 索引定義を検討することが最優先だと思います。 （ハッシュ結合が行われる索引を有効活用できないケースが多いので） ＞(2)また、条件が等価結合の場合とあったのですが ＞WHERE t1.YMD = t2.YMD ＞AND t1.srv_cd = t2.srv_cd ＞AND t1.no < t2.no ＞のような場合どうなるのですか？ ＞等価部分の条件までで作成されるのか、等価条件以外が入ってしまっているので ＞作成されないのか… 等価部分の条件までで作成されるでしょう。 ただし、その結果他の結合方式の方が有利であればそちらが選択されるでしょう。
Webサイト関連の職種につきたければ、　Photoshop, Illustrator, Dreamweaverが使えることはかなり有利です。 結局、Webサイトは、デザインの問題なので・・・ SQLデータベースを触る機会はほとんどないと思います。 WordpressとかXoopsとか、Joomlaは、SQLデータベース を使っていますが、自分で操作する場面は一般的には ないでしょう。自分でプログラム作る気ならば別です が・・・ ホームページデザイン系の会社と、プログラミングする 会社は全く別ですし、プログラミングするとなると、 SQLだけではなく、Ruby,　Perl,　PHP、Javaはマスター していないと雇ってくれないと思います。ま、いずれ もObject志向の近縁言語なので、どれかひとつ完璧に マスターすれば、応用は利くのでそんなに心配しなく ても大丈夫です。専門にやるならJavaですかね。
重要なのは確実な製品ではなく、お客さんが満足する製品です。 なので、OKでしょうね。 まあ実際のとこODBCなりADOなりでアクセスしてるだけでしょうから 別に間違いはしないでしょうし。
ストアアドプロシージャ名を取得する変数はありません。 下記のoracle ストアアドプロシージャ名を取得する用SQL文を参照する SELECT A.OBJECT_NAME FROM SYS.ALL_OBJECTS A WHERE (A.OWNER = 'ユーザID') AND (A.OBJECT_TYPE = 'PROCEDURE') SYS.ALL_OBJECTS 参照： http://www.werunsoft.com/tips.aspx?db=oracle&id=84
こんな感じかな。 create table hoge ( id int, name varchar2(40), address varchar2(60), mail varchar2(40), constraint hoge_pk primary key (id) ); select TABLE_NAME from user_constraints where CONSTRAINT_NAME = 'HOGE_PK' and CONSTRAINT_TYPE = 'P';
昨日Silver DBA11gに合格した者です。 Bronze DBA11gは問題集だけ買ってそれを繰り返し間違えることがなくなるまで勉強し、合格することができました。その問題集はこちらの11g版です。 http://www.amazon.co.jp/ORACLE-MASTER-Bronze-DBA … 正解率は75%ぐらいでしたのでこれでいけるのではと思います。 逆にSQL基礎も同じ問題集で勉強したのですが、１問足りず落ちてしまいました。 なので、あわて黒本をかって勉強をしたら無事合格できました。 SQL基礎は黒本だけで合格できると思います。 ちなみにSilverは黒本だけでは合格できません。黒本記載外の問題が多く出題され ていました。
かっこは必要ないですよ。 そのまんま、結合した順だとおもえばOKです。
こんにちは。 今後、この手の質問をする際にはOracleのバージョンや OSの種類も記述した方が良いですよ。 バージョンによっては記述が異なる場合があります。 あと・・・export と import、両方ともエラーになってるんでしょうか？ それともどちらかだけ？ パッと見で気になったのは以下２点です。 (1)　imp や exp の前にある $ 　　そのままつけて流してますか？不要な気がしますが。。 (2)　exp の 「lows=y」 　　「rows = y」の間違いではないですか？
オラクルという企業が、オラクルっていう名のデータベースソフトを売っています。 お友達さんが言ってる「オラクル ブロンズ」っていうのは そのソフトを使いこなせますっていう資格の１つで 正式には「オラクル マスター ブロンズ」という名の資格です。 ちなみにオラクル マスターの資格は ブロンズ・シルバー・ゴールド・プラチナ という４種類があり、↑の右に行くほど難易度が高いです。 簡単にいうと、１級・２級・３級・・・みたいに級の違いをカッコ良く言っているだけです。 となるとブロンズって１番下だし、たいしたことないの？っていうと、そうでもないです。 社会人でオラクル使って開発してますって人でも、勉強なしで取れるようなものではないです。 実務に関係のない、深い部分まで理解していないと取れません。 ＩＴ系の企業であれば、オラクルのデータベースを使うことは少なくないので これらの資格を持っていると、オラクルを使って開発をする会社であれば 開発者として就職するのに有利です。 私の会社（ソフトウェア開発業務）では、オラクル マスターの資格を取ると報奨金がもらえます。 （しかし報奨金より受験料の方が高かったりしますが・・・；) こんな説明で理解していただけますか？
訂正。 ＞これが「a.の文」です。 ＞これが「b.の文」です。 a.、b.が逆になってました。訂正してお詫び致します。
こんにちわ。 > updateしたレコード件数を取得する方法・・・ SQL%ROWCOUNTT で取得できます。 こんな感じです。 begin 　update hogehoge set ・・・; 　cnt := SQL%ROWCOUNT; 　insert ・・・ (table_name, update_cnt) values ('hogehoge', cnt); 　commit; end;
(1)サーバ版はデータベースの作成が可能。クライアント版はデータベースを利用だけ可能。 (2)http://www.oracle.com/technology/global/jp/index …
次の四つ書き方があります。（結果同じ） SELECT t1.no , t1.type , t2.name FROM table1 t1 INNER JOIN table2 t2 ON t1.type = t2.type AND t2.locale = 'ja' / SELECT t1.no , t1.type , t2.name FROM table1 t1 INNER JOIN table2 t2 ON t1.type = t2.type where t2.locale = 'ja' / SELECT t1.no , t1.type , t2.name FROM table1 t1 , table2 t2 where t1.type = t2.type and t2.locale = 'ja' / SELECT t1.no , t1.type , t2.name FROM table1 t1 , ( select no , name from table2 where locale = 'ja' ) t2 where t1.type = t2.type SQLの実行効率面を考えれば、この前の三つは同じです、最後の書き方は一番速いです。 SQL実行ログを参照してください（table1とtable２の十万件のレコードがあるケースを例とする）。 -----　VISUAL SQLTOOL 実行 Log　------------ 14:25:48:875 SQL: SELECT ... [ 行 1 - 8 ] ->: 100000 件 0.203秒 14:25:49:140 SQL: SELECT ... [ 行 11 - 18 ] ->: 100000 件 0.203秒 14:25:49:421 SQL: SELECT ... [ 行 21 - 28 ] ->: 100000 件 0.203秒 14:25:49:656 SQL: SELECT ... [ 行 31 - 40 ] ->: 100000 件 0.187秒 参考URL：http://japan.werunsoft.com/tips.aspx?db=oracle&i …
SELECT * FROM A, B b1, B b2 WHERE a.id = b1.id AND a.id = b2.id ここの「テーブルBを2回結合している」-> 意味ない。 -> SELECT * FROM A, B b1 WHERE a.id = b1.id　→ 結果件数同じです。 実行時間テスト。 テーブルA/Bのデータ件数＝10000件 ******* VISUAL SQLTOOLS - Log ************ 14:38:04:890 SQL: SELECT * FROM TEST_TABLE , TEST_TABLE1 b1 , TEST_TABLE1 b2 WHERE TEST_TABLE.id = b1.id AND TEST_TABLE.id = b2.id ->: 10000 件 0.562秒 14:38:05:546 SQL: SELECT * FROM TEST_TABLE , TEST_TABLE1 b1 WHERE TEST_TABLE.id = b1.id ->: 10000 件 0.390秒 14:38:05:984 SQL: SELECT TEST_TABLE.ID FROM TEST_TABLE , TEST_TABLE1 b1 , TEST_TABLE1 b2 WHERE TEST_TABLE.id = b1.id AND TEST_TABLE.id = b2.id ->: 10000 件 0.078秒 14:38:06:125 SQL: SELECT TEST_TABLE.ID FROM TEST_TABLE , TEST_TABLE1 b1 WHERE TEST_TABLE.id = b1.id ->: 10000 件 0.062秒 ご参照ください。
DATABASE LINK　を使用してください。 ■作成方法 １．CREATE DATABASE LINK文 　　CREATE [PUBLIC] DATABASE LINK dblink 　　　[CONNECT TO user IDENTIFIED BY password] 　　　[USING connect_string]; dblink データベース・リンク名を指定します。 ドメインを省略した場合は、データベース・リンクを作成したインスタンスのデータベース・ドメインが付加されます。 PUBLIC句 　この句を指定するとパブリック・データベース・リンクが作成できます。 CONNECT TO句 接続ユーザを指定する事ができます。CONNECT TO句を指定しないとデータベース・リンクにアクセスした現行セッションのユーザでリンク先へ接続します。 ユーザ名はuserで指定し、パスワードはIDENTIFIED BY句の後のpasswordで指定します。 USING句 リンク先に接続する時の接続文字列を指定します。指定できるのはtnsnames.oraで定義されているネット・サービス名、または簡易接続ネーミングです。 例１ 現行セッションのユーザでリンク先に接続するデータベース・リンクの例です。 　　CREATE DATABASE LINK remote 　　　USING remote 例２ 固定のユーザでリンク先に接続するデータベース・リンクの例です。 この例だと現行セッションのユーザに関わらず、常にtest/testでリンク先に接続します。 　　CREATE DATABASE LINK remote 　　　CONNECT TO test IDENTIFIED BY test 　　　USING remote; ■アクセス方法 データベース・リンクを使用してリンク先にアクセスするには@dblinkをオブジェクト名の後に記述します。 例 remoteインスタンス上のtable1という表にアクセスします。 　　select * from table1@remote; 参考URL：http://blogs.yahoo.co.jp/mr_makochi/9103121.html
相関サブクエリを使っても出来ますね。 テーブルの定義は1の方と同じとして、下記の様になります。 例) -------------------------------------------------- SELECT * FROM TEST_TABLE a WHERE NOT EXISTS ( SELECT 1 FROM TEST_TABLE b WHERE a.HINBAN = b.HINBAN AND a.HIZUKE < b.HIZUKE ) ------------------------------------------------------ 「各品番について最新日付のデータ」は以下の様に読み替えられます。 「『同じ品番でより新しい日付の別のデータ』が無いデータ」 これをSQLで表現していることになります。 参考URL：http://codezine.jp/article/detail/1076?p=2
今作っているSQLが分からないとHAVING句をどのように使用すればいいか分からないと思います。 元がテーブルなら select * from テーブル t where not exists ( select 1 from テーブル t2 where t.品番 = t2.品番 and t.日付 < t2.日付 ) の要領で最新日付のものを取得出来ると思うのですが。 参考になりませんか？
アンインストール方法 サービスの停止 Oracle Universal Installer で削除 レジストリの削除 参考URL ＞ｃドライブにアクセスできなくなってしまいました と言うことは上記アンインストールもできないので、リカバリ（クリーンインストール）になります。 参考URL：http://q.hatena.ne.jp/1151553166
select 連番,社員番号,社員名 from (select 連番,社員番号,社員名 from RIREKI_TBL_A union all select 連番,社員番号,社員名 from RIREKI_TBL_B) as ta where ta.連番 in (select MAX(連番) from(select 連番 from RIREKI_TBL_A union all select 連番 from　RIREKI_TBL_B) ) ですかね。。 試してませんが。 AとBの最大で大きい方ということですよね 両方の最大ならもっと簡単ですし。
これでいかがでしょうか？ SELECT A.品番ID, A.納期, A.受注数 FROM　テーブル A WHERE (A.品番ID, A.納期) IN (SELECT B.品番ID, Min(B.納期) FROM テーブル B WHERE B.状態K = "未出荷" GROUP BY B.品番ID)
「プログラム」じゃなくて「クエリ(SQL)」ですね。 先ず、(1)と(2)は主従関係のある結合になります。 これは「OUTER JOIN」と言います。これには どちら（先に書くか後から書くか）のテーブルが主に なるかで、LEFT（先の方）とRIGHT（後の方）の ２種類があります。 (1)の考え方 SELECT A表.* FROM A表 LEFT OUTER JOIN B表 ON A表.a=B表.b AND A表.b=B表.b WHERE B表.a IS NULL AND B表.b IS NULL A表とB表を結合しますが、A表が主で、左(先)に記述 してあるので、LEFT OUTER JOIN になります。次に、 結合条件を示すON句で、それぞれのaとbの関係を記述 します。この結合ではA表は全て取得され、B表に無い 項目はNULLになりますので、WHERE句でB表側の項目が NULLという指定をすれば「A表にあってB表にない」を 抽出できます。主キー項目はNULLにできないので、 WHERE句に記述する条件はａかｂの一方だけでもよい はずです。 (2)の考え方 もう分かると思うので省略します。 (3)の考え方は両方にあるものが前提なので、主従の 関係はありません。この場合は INNER JOIN になり ます。また、条件はA表.c<>B表.cとなります。 SELECT A表.* FROM A表 INNER JOIN B表 ON A表.a=B表.b AND A表.b=B表.b WHERE A表.c<>B表.c
私も勉強がてらやってみました。 TABLE_B には、「__C__」のように、LIKE で使える文字列を入れておきます。 かつ、このSQLでは B の結果を 1 件に絞る必要があります。 ---------- SELECT * FROM TABLE_A WHERE VAL LIKE ( SELECT COND FROM TABLE_B )
emp_ins emptabtype; を TABLE OFとかなんとかってしないと 配列にならないんじゃなかったけ? 最近は MERGEとか INSERT ALLでカーソル回さなくても DMLだけで処理できることがおおいので あんまり自信ないけれど。。。。
SELECT A.ID,A.NAME FROM (SELECT ID,NAME,COUNT(*) KAZU FROM USER GROUP BY ID,NAME) A LEFT OUTER JOIN (SELECT ID,NAME,COUNT(*) KAZU FROM USER GROUP BY ID,NAME) B ON A.ID=B.ID AND A.KAZU<B.KAZU GROUP BY A.ID,A.NAME HAVING COUNT(B.ID)=0 こんな感じかな？ ID、NAMEと件数からなるクエリを二つ作り、それぞれを結合 させます。本命のAから見て、同じIDを持ち、自分より件数の 大きいB側のレコード数を調べます。これが０であるもの、即ち、 「自分の件数より大きい件数のデータが無い」が抽出条件です。 尚、最大件数と同数のデータは全て抽出されます。
うまくいかないということですが、何かエラーメッセージでも出るのでしょうか？ たとえ上位バージョンであってもエディションが低いと下位バージョンの機能が使えない場合があり、下位バージョンで使っていた機能に関わる部分でインポートがエラーになることはあります。 ※exportしてできたダンプファイルに対してバイナリエディタでパッチしてからimportした経験が実際にあります。
drop tableしてからimpですか？ プラットフォームによりますが、大きなファイルに対してI/Oした直後は OSのファイルキャッシュが増えてしまい、ページングが発生することがあります。 OSからみた性能遅延などは発生していないでしょうか？
t1、t2はエイリアス（別名）です。 fromの後ろでselectしているのでt2というテーブルに見せかけてます。 元テーブルはt_tempだけなのですがselect 　from　で２つのテーブルを扱っているように見せてます。 RDBの例題で、社員マスタに社員/上長が混在しているようなサンプルがあると思いますよ。 Oracle の EMPLOYEES等のサンプル
こんにちは SELECT ID, NUM, SIGN FROM (SELECT ID, NUM, SIGN, COUNT(ID) OVER(PARTITION BY SIGN) AS SIGN_COUNT -- ここでSIGNの数を数える FROM (SELECT ID, NUM, MAX(NUM) OVER(PARTITION BY ID) AS MAX_NUM, SIGN -- 後ではじくために、NUMとMAX(NUM)を取得 FROM Table) WHERE NUM = MAX_NUM -- NUMが最大のものだけ抽出 ) WHERE SIGN_COUNT != 2 -- ここで初めてSIGNの件数で抽出 考え方はこれでいいと思いますが、SQL的にチューニングの余地はかなりありますね・・・。 （もっといい書き方があると思います） 何しろ今Oracleが手元にないもので・・・。 テストしてません^^;
SQLPLUSで投入したPL/SQL無名ブロック内でのエラーでも、「whenever sqlerror ～」で、 キャッチできますよ。少なくともWindows版SQLPUSは、そういう動作です。 発生源が、SQL文であっても、PL/SQL無名ブロックでも、ORA-nnnnnのエラーを拾わないと 「whenever sqlerror ～」の意味が無いですからね。
9iの時はエクステントの単位が小さく、10gになるとローカル管理となって エクステントが大きくなっているため容量が小さな表がたくさん表領域に存在すると 領域の利用効率が悪くなっているのではないかと思います。 なお、export/importはブロック単位の情報を取り出しているわけではなく 表の定義や生データを取っているので4KB単位でimportしているわけではありません。
NLS_LANGとNLS_CHARACTERSETは全く別物です。 NLS_CHARACTERSETはデータベースの文字セットでデータベース(インスタンス)作成時に指定して、変更できません。 NLS_LANGは端末側の文字コードの指定です。TeraTermとかXWindowsとかの文字コードをして今します。
こんにちは tableBの表定義やインデックス、データに関しては、それでOKです。 統計情報に関しては別です。 変更後に再取得されていない場合は元のまま、取得されている場合は戻りません。 放っておけば取得し直しますし、手動で取得し直す（DBMS_STATS）事も可能です。
　SunからJ2SEのダウンロードは必要ありません。Oracleが提供しています。 Enterprise Managerも必ず必要ではなく、Oracleインスタンス＋リスナー(これはJavaが全くなくても動きます)があれば、別マシンよりSQL*PLUSで接続させたり、ODBCやJDBCを使ってアクセスすることもできます。
こんにちは。 高速リフレッシュはMVログ情報を元に差分リフレッシュを実行しますが、TRUNCATEを行うと、対象レコードの情報がMVログ、MVに登録されないため、差分のリフレッシュの元ネタが見つからなくMVに反映されません。回避案としては、強制オプションを指定して高速リフレッシュNG時に完全リフレッシュさせればいかがでしょうか。 　　DBMS_MVIEW.REFRESH( 'xxxx', '?' ); この場合、TRUNCATE後の１回目のみ完全リフレッシュ、以降はTRUNCATEするまで高速リフレッシュになるはずです。 参考（10G R2例) :http://otndnld.oracle.co.jp/document/products/or …
出来ますが、エクスポート／インポートに使用するバージョンの制約があるので、 マニュアルで確認してください。 http://otndnld.oracle.co.jp/document/products/or … 参考URL：http://otndnld.oracle.co.jp/document/products/or …
8iならマルチオラクルホームに対応しているはずです。 ただし、OO4OとかODBCの使い分けには注意が必要だったはずです。 このあたりはサポートに確認したほうが良いでしょう。
# 9iでできたかちょっと微妙ですけど。。。 表の結合とかしているのが前提ですけど 実行計画でみたときに HASH JOINとかなっていませんか？ コストベースの場合件数が多くなるとHASH JOINが選択される可能性があります。 コストベースだとFULLSCAN==NGというものでもないので難しいところです。 適切にINDEXが張ってあるならばNESTED LOOPにしてあげるのも よいかもしれませんね あとはパラレルに処理できるようにしてあげるか。。。
マニュアルに記載されています。 あとに指定された方に上書きされます。 http://download.oracle.com/docs/cd/E16338_01/ser … コマンドラインでのパラメータの入力と同時にパラメータ・ファイルを指定できます。実際、パラメータ・ファイルとコマンドラインの両方に同じパラメータを指定することもできます。コマンドラインでのPARFILEパラメータと他のパラメータの位置によって、優先されるパラメータが決まります。 たとえば、パラメータ・ファイルparams.datにパラメータINDEXES=yを指定し、エクスポート・ユーティリティを次のコマンドラインで起動するとします。 exp PARFILE=params.dat INDEXES=n この場合、INDEXES=nはPARFILE=params.datの後にあるため、パラメータ・ファイルに指定されているINDEXESパラメータの値は、INDEXES=nによって上書きされます。
サイレントインストールは以下を参照してください。 http://otndnld.oracle.co.jp/document/products/or … データベースの作成は、他の環境でDBCAを使ってスクリプトを作り、それを編集して作成していました。
敢えていうなら、Xの後のカンマが不要です。 select * from (select key from A union select key from B union select key from C) X LEFT JOIN A ON X.key=A.key LEFT JOIN B ON X.key=B.key LEFT JOIN C ON X.key=C.key Aテーブルのkey、Bテーブルのkey、Cテーブルのkeyが重複する可能性があり、 keyが重複する場合は、単純横展開ではなく、1行にしたいという条件であれば、 (+)を単純にLEFT OUTER JOINにするだけで良いと思います。
＞実はその方法までは検索で行き着いております。 ＞ただ、下記エラーが出てしまいます。 ＞ORA-01427: 単一行副問合せにより2つ以上の行が戻されます このエラーが発生するときのSQLを出せる範囲で提示してもらえませんか？ 質問内容と希望する回答がなんだか違っているように思えますが・・・ このエラーはselectの列指定かwhere句の条件指定でselect吹副問い合わせをしているときに出ます。私があげた例では、副問い合わせは使用していないので出ないはずです。 ちなみに同一個人ID、識別番号のデータを探すのなら、以下のselect文でいけるはずです。 select 個人ID, 識別番号 from 住所テーブル group by 個人ID, 識別番号 having count(個人ID) > 1 and count(識別番号) > 1
日本のサイトと米国のサイトは、それぞれ別のユーザー管理になっていますので、 米国サイトでダウンロードするなら、米国サイト側でユーザ登録してください。 米国サイトでしか配布していないものが結構あるので、ユーザ登録して損はないと思いますよ。
各OS別のインストレーションガイドに「インストール前の作業」という章があります。ここの「ハードウェア要件の確認」「ソフトウェア要件の確認」を見てください。 http://download.oracle.com/docs/cd/E16338_01/nav … 正式な回答が欲しい場合、OracleDirectに相談するとよいでしょう。 http://www.oracle.com/lang/jp/direct/index.html
再インストールによって、tnsnames.oraが消失したとか、オラクルホームが変わったとか・・だと思いますが、 それ以上は、質問に書かれた内容では判りません。 オラクルクライアントを新規にインストールした場合、Oracle Net Manager等で、 接続するデータベースを定義すると思いますが、その作業をもう一度行えば良いかと思いますよ。 （オラクルクライアント上で、動くODBCなどのミドルウエアは、そのままで動作するはずです。）
参考URLのIBT@anywhereの項目を見ると、2009年9月25日に終了したようです。 現在は会場で受けなければならないと思います。 参考URL：http://www.oracle.com/global/jp/education/certif …
アップグレードガイドと新機能ガイドで確認してください。 アップグレード・ガイドの「動作の変更点」を見る限り、R1からR2で動作が変わる点はあまりなさそうです。 アップグレード・ガイド http://download.oracle.com/docs/cd/E16338_01/ser … 新機能ガイド http://download.oracle.com/docs/cd/E16338_01/ser …
トリガーでログ出力機能を用意しても、本体でエラーが発生すると、 ログ出力内容までロールバックされますが、それでいいのですか？ （自律トランザクション書けば、ログをロールバックしないように出来ますが・・） ご質問のトリガーでのINSERT文ですが・・ INSERT文の構文自体は、普通のINSERT文です。 ただ、トリガーを仕込んだテーブルの新旧の値は、:new.xxxや、:old.xxxのような表現で扱えるので、 insert into table2 (col1,col2) values(:new.colA,:new.colB); のような書き方になります。
こんにちわ。 select distinct 大分類,中分類,小分類 from 商品テーブル じゃだめでしょうか？
>このシステムにログインするPCのOSとして、Windows7を採用することは可能でしょうか？ クライアントPCに、オラクルクライアントのインストールが必要なら、 現時点ではWindows7は無理だと思いますよ。 これは公式サポートOSではないという理由であり、動く動かないの話であれば、 使い方次第では動く可能性はあると思いますけど、業務に使用するなら、 障害時対応のためにも、公式サポートから外れるような構成は使わないほうが良いかと思います。
insert into answer( select id,sum(case syori when '1' then to_number(suti) else to_number(suti) * -1 end) from temp group by id )
ORACLE_HOMEやPATHおよびtnsnames.oraファイル が設定されているか確認されたらどうでしょうか？
行バッファサイズが初期値80だから。 Set linesize 300 とでもしておく。 ただ、これを設定してSPOOLに吐き出すと、右余白の多さに苦しみます。 なので Set TrimSpool on も設定。 あと、ヘッダーを最初の一回のみにしたいなら、 set PageSize 0 も設定。
>>また主キーにすることで記述を変えることが出来る 主キーである必要はありません。 簡単に書きすぎたので、少し説明しますと…… No.1の2番目のUPDATE文の場合、 更新される方（この場合テーブル１）の行に対して 更新する方（この場合テーブル２）に該当する行が複数存在すると、 どのデータで更新すればよいのかOracleにはわからないわけです。 テーブル２が一意になることを保障してやる必要があります。 保障する方法の1つが主キーを貼ることなのですが、 テーブル２のキー項目（品番＋規格＋取引先）で 一意索引を作成してもかまいません。 # うまく説明できてないな…… # 「更新可能なビュー」「ORA-01779」あたりで検索してください。 >>in条件が使えない理由 特定のデータでうまくいかないのであれば、そのデータを…… Oracleがエラーメッセージを返すのであれば、そのメッセージを…… うまくいかない状況を挙げてみてはいかがでしょう。 # 両テーブルの主キーは何だろう？
表の統計情報が変化した、つまりレコード数が変わったとか索引が変わった(追加/変更/削除)とか。 SQL文が全く同じですか?引用符で囲った値も同じですか？ AUTOTRACEで表示される実行計画は実行した計画ですね。 EXPLAINは実行計画の予測です。実際の実行計画は実行してみないとわかりません。
update テーブル１ set 日付=sysdate where 日付 is null and (品番,規格,取引先) in (select 品番,規格,取引先 from テーブル２) ; な感じかなぁ。
select * from テーブル where (大区分,小区分) in ((1,3),(1,4),(1,5),(2,1),(2,2)); とか。
接続のための要件は、 http://www.oracle.com/lang/jp/direct/seminar/faq … にありますが、ご自分のPCでないとのことですので、 動画で見られたほうが良いのではないでしょうか。 多くのセミナーは動画でダウンロードできるようですので、 http://www.oracle.com/technology/global/jp/ondem … こちらですと、Windows Media Playerがあれば見られそうです。 参考URL：http://www.oracle.com/technology/global/jp/ondem …
adminスキーマは、oraスキーマのオブジェクトに対する参照権限はもっていますか。 ない場合は与えてください。 grant select on ortest to admin; そうすれば以下のようにテーブル（スキーマ名.オブジェクト名）を指定すれば参照出来ます。 select * from admin.adtest a inner join ora.ortest b on a.key = b.key いちいちスキーマ名を指定するのが嫌ならシノニムを作成します。 create synonym ortest for ora.ortest;
データベース名が同じでないなら、コピーするのが一番手っ取り早いと思いますよ。 関連ファイルをコピーして、インスタンス定義をoradimで作成、リスナー定義を追加。 これだけです。 もし、ディレクトリ配置が変わるなら、コントロールファイルの再作成など、余分な作業が増えますけどね。
不細工の判断基準は、よくわからないんですが・・ select a,b,c from (select * from x1 union select * from x2) x,y,z where A と書いたほうが、性能的に良いかと思いますよ。
DELETE A FROM A LEFT JOIN B ON A.KEY1 = B.KEY1 AND A.KEY2 = B.KEY2 WHERE B.KEY1 IS NULL こんな感じのような気がします。 お試しあれ。 A.KEY1 = B.KEY1(+) とか A.KEY1 =* B.KEY1 みたいな書式は互換性が乏しいので、 如何なものかと・・・
　ＳＥです。汎用コンピュータを経て、サーバ系システムを担当してます。 　この文書は、大型の汎用コンピュータのシーケンシャルファイルと、サーバ系のデータベースを比較した文書のようです。 　各プログラムやシステムで、それぞれが独自にデータを持っていると、（１）は起こります。が、データベースもうまく考えないと同じことになりますし、重要なマスタにアクセスが集中しすぎてしまう場合には、逆に分散させることも考えなければなりません。 　（２）と（３）は例を挙げると２０００年対応で年月日の桁数を６桁から８桁にしたら、２桁ずつ全てのデータの位置が狂うと言うことです。データの位置を先頭からの桁数だけで管理しているのが問題です。Oracleなどのデータベースでは、日付型の項目を設定できるので無縁ですが、汎用系のデータベースでは、同じように桁数で項目を管理している物もあるので、正しいとも間違っているとも言えないですね。 　この文書は、データベース自体の特徴を書いているとは全く思えないです。１０～２０年ぐらい前に書かれた本ではないですか？
nullが原因だと思うので、＃１で書かれているように、nullを意識した条件式を使うか、 人間的条件解釈に近いdecode式やcase文を使うと良いと思いますよ。 たとえば、 select count(*) from member_account where decode(delete_flag,'1',1,0) = 0; や select count(*) from member_account where case when delete_flag='1' then 1 else 0 end = 0; は、16343を戻すはずです。 ちなみに、関数式を条件にすると、通常は索引が無効になりますが、 nullデータの検索は所詮索引を使えないので、実質的に問題ないと思います。
テーブルの中身を知らないので何ともいえませんが インデックスの基礎知識として選択の結果が15%以下でないと 使用する意味がないとされています。 ということで単純にSQLを実行した結果の選択行数がおおいから フルスキャンの方が早いと判断されただけではないでしょうかね？ is nullで索引が効かなくなるといわれているのもこれと同じ理由です。 遅いというのならば索引の付け方が間違えているとかかなぁ？
エラーメッセージに表示されたとおりです。 ホスト名ではなく接続識別子を指定してください。 sqlplus system/password@接続識別子 接続識別子は%ORACLE_HOME%\network\adminフォルダ（デフォルト）の tnsnames.oraファイル内で設定します。
select * from hoge where (部番,連番) in (select 部番,max(連番) from hoge group by 部番); とか select * from (select hoge.*,row_number() over(partition by 部番 order by 連番 desc) R from hoge) where R=1; とかで良いかと。
参考ページをみるに、負荷が高い場合にもおこるようなことが書いてあります。 バッチモードを使用したり、できるだけ負荷の少ない構成で作成しなおしてみてはどうでしょうか。 英語が得意なら参考ページを読んでみてください。 参考URL：http://technet.informatica.com/forum/product-use …
リスナーの設定やインスタンスの設定が10gと11gで変わってませんか？
1回でできることを複数回でやるメリットは 全くありません。先ず、結果が3000件でも 1件でも抽出にかかる時間はほぼ同じです。 つまり、後者は前者に比べ、2999回分の 余計な時間がかかるということです。 キャッシュ云々は結果論であって、クリアな 状態を前提とすべきです。 むしろ、SQLの組み方一つで実行時間に差が でます（特にOracleは）ので、高速になる 技法を学ぶ方がずっと有益です。 例えば、以下のようなSQLがあるとします。 SELECT * FROM Z WHERE 条件1 AND 条件2 色々な条件が絡みますが、次のようにすると 速度が改善されることがあります。 SELECT * FROM (SELECT * FROM Z WHWRE 条件1) WHERE 条件2
リアルタイムに監視するのは難しいかと…… V$SQL_PLANを検索すれば キャッシュに残っているSQLを拾うことは可能だと思います。
無いものを表示するのは、出来ません。 なので自分で作ります。 select key,count(adr) from hoge, ( select 1 as key from dual union all select 2 from dual union all select 3 from dual union all select 4 from dual ) where key=adr(+) group by key; な感じかな。 でも、テーブルhogeの件数によっては、事前に集約した方が良いかも。 select key,c from (select adr,count(*) as c from hoge group by adr), ( select 1 as key from dual union all select 2 from dual union all select 3 from dual union all select 4 from dual ) where key=adr(+);
試験機関(現在はピアソンVUE)のホームページはご覧になりましたか。 支払方法はチケット(バウチャー)の他に、クレジットカード、口座振込、現金(一部のテストセンターのみ)があります。 なお、大きなテストセンターではほぼ毎日試験が行われますが、オラクルマスターの場合再受験ポリシー(一度不合格になった科目は、2週間再受験できない)がありますのでご注意下さい。 参考URL：http://www.vue.com/japan/index.html
バージョンにもよります。 dbms_metadataが使えるなら、こちらを使いましょう。 select dbms_metadata.get_ddl('VIEW','View名') from dual; 使えない場合は、データディクショナリuser_viewsを参照しましょう。 exp/impの場合はViewのみの抽出はできません。 tablesパラメータはテーブルにしか適用できません。
もしかすると、「ON」で条件を指定する際、 テーブルの指定をしてないんじゃないですか？ ＜例1＞ SELECT * FROM 在庫テーブル LEFT JOIN 商品マスタ ON 在庫テーブル.品番 = 商品マスタ.品番; または ＜例2＞ SELECT * FROM 在庫テーブル A LEFT JOIN 商品マスタ B ON A.品番 = B.品番;
Oracle8iへは、対象テーブルの所有者でログインすることもできないのでしょうか？それだとどうしようもないのですが・・・ 対象テーブルの所有者でログインできるのならば、expコマンドでその所有者でログインし、tables,rowsパラメータを指定すればテーブル単位で定義のみエクスポートできるはずです。
結合条件を示すON句がありません。 ～group by 売価変更確定ＲＦ.品番) SUB2 ON SUB1.xx = SUB2.yy xxとyyは必要な項目を指定してください。
普通に、 select 番号,count(*) as 枝番 from テーブル group by 番号 order by 枝番 desc; で問合せ可能だと思いますよ。（少なくとも、10r2では正しく表示されます）
これでどうでしょうか？ select A.R1 as R1, sum(A.リンゴ) as リンゴ, sum(A.イチゴ) as イチゴ, sum(A.マンゴ) as マンゴ from (select R1, nvl(decode(R2,'リンゴ',1,0),0) as リンゴ, nvl(decode(R2,'イチゴ',1,0),0) as イチゴ, nvl(decode(R2,'マンゴ',1,0),0) as マンゴ from 元テーブル ) A group by A.R1;
Windows XPは、R8.17以降の対応となりますので、原則OKです。 但し、パッチ等必要な場合もありますので、お持ちのインストール媒体をご確認ください。 なお、Windowsのエディションも、プロフェッショナル版に限定されます。
厳密に言うと、HAVING句は集計した結果を条件に する場合に使います。対して、WHERE句は最初から 分かっているレコード固有の値を条件にする場合に 使います。例えば、SUM(売上金額)>1000000という 条件は合計して始めて値が分かるので、HAVING句で しか指定できません。しかし、売上年月日の範囲指定、 ブランド名等は最初からレコードにある値が条件なので、 WHERE句を使います。
先日、同じような質問がありましたが…… 表を再定義するしか方法はないです。 1. 新しい定義で仮表を作成する 2. 元表のデータを仮表に移動する（INSERT ～ SELECT） 3. 元表を削除（DROP）する 4. 仮表を元表の名前でリネーム（RENAME）する 5. 制約や索引などを追加する といった手順になります。 オンライン表再定義という方法もあります。 興味があれば検索してみてください。 # この手の要望って結構多いのですねえ
> Oracleの見積もった合計実行時間という認識でよろしいのでしょうか。 Oracleが実行計画を作成するときのパラメータの1つぐらいの認識でよいでしょう。 この値が1秒だから実際の実行時間も1秒じゃないとおかしい…… といった値ではありません。あまり深く考えなくてもよいと思います。 私の場合、Autotraceは軽く実行計画を確認したいときなどに使用します。
Yahoo!知恵袋の質問に対し、詳しく回答しておきましたから、そちらを参照願います。 http://detail.chiebukuro.yahoo.co.jp/qa/question …
テストしとらんけどクロス結合じゃダメなんかな? イメージ的にはこんな感じ WITH AB AS(SELECT A.AAA, A.BBB, B.BBB as BBB2, B.DDD, B.EEE FROM A_MST A, B_MST B), SELECT DISTINCT A.DDD, A.EEE, B.DDD, B.EEE FROM AB A CROSS JOIN AB B WHERE A.AAA = B.BBB2 AND EXISTS( SELECT 1 FROM C_MST CMST WHERE CMST.A_RYAKU = '123' AND ( (CMST.CCC = A.BBB OR CMST.FFF = A.BBB) OR (CMST.CCC = B.BBB OR CMST.FFF = B.BBB) ) ) . まぁ、どう転んでも効率悪いからテーブルそのものの 正規化することをおすすめします。 親子関係があるのならせめて CONNECT BY使えるようにするとか。。。
一般的には以下のような方法をとります。 1. 作業表を作成する create table temp_table (A, B, D, C); 2. 元表のデータを作業表に挿入する insert into temp_table (A, B, D, C) select A, B, null, C from orig_table; 3. 元表を削除する drop table orig_table; 4. 作業表をリネームする rename temp_table to orig_table; 5. 制約等を追加する alter table orig_table ...; # 要件に合わせて使用するとよいでしょう。
Windowsなら、administratorでインストールしてますか？
（オラクルは触ったことないんですが、クエリはなんとなく同じだと思いますので。。。） 格好悪いけど↓でできると思います。 select '1' as [カラムA], count(*) as [件数] from テーブル where カラムA='1' union select '2' as [カラムA], count(*) as [件数] from テーブル where カラムA='2' union select '3' as [カラムA], count(*) as [件数] from テーブル where カラムA='3' union select '5' as [カラムA], count(*) as [件数] from テーブル where カラムA='5'
ご参考 http://www.atmarkit.co.jp/fdb/rensai/ora_admin/0 …
これでどうですか？ SELECT TO_CHAR(sysdate,'eeyy"年 "month" "fmdd"日"','nls_calendar = ''Japanese Imperial''') as AA FROM DUAL
set pages 10000 lines 10000 trims on col username for a30 col osuser for a30 col program for a30 col machine for a30 col terminal for a30 select sid,serial#,username,osuser,program,machine,terminal from v$session where type = 'USER'; こんな感じでどうですか？ ちなみに、a30は30文字分の幅という意味です。 number 型のデータの場合には指定方法がかわりますが、 number 型はそのままでも表示が乱れることはあまりないので、 それほど気にしなくてもよいでしょう。
　テーブルを使用するのも作成するのも面倒がありますが、構文上の問題はありません。というのが、答えになるでしょうか。 　表名や列名に日本語文字を使用する場合は、名前を" "で囲う必要があります。制約はただこれだけです。（マニュアルに記載があります。） 　ただこれだけのことなので、自分で開発したデータベースを、自分で作成したアプリで利用する場合には、何の問題もありません。ただし、日本語とシングルバイトの英文字が混在する場合は注意してください。この場合、英文字の方の大文字小文字をきちんと区別する必要があります。""で囲っていない場合は、総ての名前は大文字変換されて使用されるのですが、囲った場合はこの変換がないからです。 　それより、やっかいごとは外からやってきます。 　データベースの開発・メンテナンスにsql plusやＥＭだけを利用しているなら大丈夫ですが、サードパーティー製のソフトを利用している場合は、そのソフトが日本語表名・列名を正しくサポートしていることが必要です。 　また、アプリケーションの作成の際に、ライブラリーなどを利用しているのであれば、これらも正しく日本語表名・列名に対応している必要があります。 　なぜなら、普通列名や表名を" "で囲うということはしないからです。囲うことによる副作用もありますから、ライブラリーやソフトが日本語文字が混在していることを正しく認識して、日本語の混じっている時だけ正しく" "で囲うという処理が必要で、これは、明らかに特殊な処理ですから。 　 　まぁ、今までの経験からすると、囲わなくても正しく動くことが多いです。が、正式に構文として明記されている以上、動く方が偶然であると認識しておくことは必要でしょう。特に、二バイト目のコードがASCIIコードの特殊文字の文字コードと同じになっているいくつかの文字あたりが鬼門になると思います。 　表名も列名もとっても見やすくなり、メンテナンスも楽になります。が、ある程度のリスクを抱えての選択であると言うことは意識しておく必要はあるでしょう。 　作法としてやって良いかどうかは、宗教論争の面がありますで、避けることにします。
以下は（1）～（4）に対しての回答となります。 現在のOTN-Jは、DBのダウンロードをOTN-USへのリンクにしてトライアル版の配布はしていないのはご存知でしょうか？ ということで、学習や評価用にはOTN-USのユーザ登録をして使ってねという事らしいです。 http://www.oracle.com/technology/global/jp/softw … 過去にも同様な回答をしています。 http://oshiete1.goo.ne.jp/qa5209939.html 11gの最新版はRelease2ですが、試験ならまだRelease1の方だと思います。 DBのダウンロード＆インストールは大変だと思いますが頑張ってください。
Enterprise EditionとStandard Editionのどちらかは関係なく、 Enterprise Manager（Database Control）を構成すると sysmanとdbsnmpユーザはopen状態になります。 Enterprise Manager は DBCA でデータベースを作成する時に、 構成するかどうかをチェックボックスで指定するようになっているはず です。
> 11ｇのgoldって11ｇのsilver保持していないと受験できないとかあるので > しょうか？（10gのsilver受けたいので。） 10g で始めたとしても移行試験を受けることによって 11g の資格を手にすることができます。 ただし、移行試験を受けるには 15,750 円の受験料がかかりますし、 名の通り試験を受ける必要があります。
　ちょっと今手元にOracle10gXEの環境が用意できなかったので推測でしかないが、接続拒否ではなくタイムアウトという事なので、ひょっとしてそれはOracleじゃなくてファイアーウォールの設定によるのではないか。これまた話からの推測だが「自分のPC」というのはWindowsだろうて。Oracle10gXEのWindows版は特に外からのIP接続を弾く初期設定にはなっていないので、Windows ファイアーウォールでtcp/1521番を例外にしてみる、ファイアーウォールを無効にしてみるなどで接続できるのであれば、それはファイアーウォールが邪魔をしていると言う事だ。 　ところで、Oracle10gXEをインストールすると2つのサービスが実行されているはずだ。oracle.exeとtnslistener.exeというもので、このうちoracle.exeがもちろんDBMSで、tnslistener.exeはTCP/IPなどでネットワーク接続を待ち受けてクライアントからの要求をoracle.exeに渡す役割を担っている。なので、「ローカル（sqlplus.exe）ではつながるのに別のパソコンから（sqlplus.exe）ではつながらない」と言った時、ネットワークの構成とは別にtnslistener.exeが起動していなかったり、tnslistener.exeの設定がおかしかったりする場合もある。この時、ローカルでつながる理由は C:\>sqlplus system/manager などとサービス名（一般的にサービス識別子）を指定しなかった場合、レジストリ内の値を引っ張ってきて共有メモリ経由でoracle.exeとやりとりをするからで、その場合はローカルでもlocalhost経由だと接続できない。今回の話はローカルのJDBCドライバーから接続できているのでこのパターンではないと推定されるが、Oracle豆知識のようなものなので覚えておくと良いだろう。
select max(id) as id ,max(trim(category)) keep (dense_rank Last order by create_date) as category ,max(create_date) as create_date from PRODUCT_LIST group by trim(lower(category)) order by 1 --- 結果 --- IDCATEGORYCREATE_DATE 4ddd01/01 5aaa02/01 6bbb02/01 7CCC02/01
8の環境がないので、動作する保障はできませんが、 select 号機, max(decode(月, '08', "MAX装置温度")) as "8月装置最大温度", max(decode(月, '08', "MIN装置温度")) as "8月装置最低温度", max(decode(月, '08', "AVG装置温度")) as "8月装置平均温度", max(decode(月, '09', "MAX装置温度")) as "9月装置最大温度", max(decode(月, '09', "MIN装置温度")) as "9月装置最低温度", max(decode(月, '09', "AVG装置温度")) as "9月装置平均温度" from ( select 号機, substr(年月日, 6, 2) as 月, max(装置温度) as "MAX装置温度", min(装置温度) as "MIN装置温度", avg(装置温度) as "AVG装置温度" from テーブル where 年月日 between '2009/08/01' and '2009/09/30' group by 号機, substr(年月日, 6, 2) ) group by 号機; 月毎の表示を柔軟にしたければ、動的SQLにしてください。 # 本来はアプリケーションの仕事でしょう。
10gのOUIを使えばいい(最新のパッチセットを適用すればOUIは10gになる)の でしょうが、おそらくはサポートされないと思います。
ネットワークにつないでいる時はDHCPですか固定IPですか。 DHCPの場合、ループバックアダプタを追加する必要があると思います。 http://otndnld.oracle.co.jp/document/products/or …
リスナー経由の接続は、ログがテキストで書かれているので、それを解析するなら、 オラクルに接続する必要はありません。 通常は\network\log配下に書かれています。
PL/SQLは解析⇒実行ですよね。 この解析時にINSERTしたいテーブルがなければエラーになります。 なので、とりあえずエラーとしないのであれば、INSERT文も動的SQLにした方が良いと思います。 BEGIN EXECUTE IMMEDIATE 'CREATE TABLE tb (t TIMESTAMP)'; EXECUTE IMMEDIATE 'INSERT INTO tb VALUES(SYSDATE)'; END; / 間違ったINSERT文なら、実行前にエラーにしてくれるという恩恵にあずかれなくなりますが。
まずは、F社からご提供されているシステムのデータベースには何を使用しているのでしょうか？ ご質問者様のITスキルが判らないのでざっくりした説明になりますが、 システムというのは、プログラム（ソフトウェア）と動かすためのハードウェア（PC）で成り立っていますね。 そのソフトウェアというのは、大きな会社のシステムであれば、プログラムそのものにデータを保持するわけにはいきませんよね。だから、データベースソフトというのに、データを保持しておいて、ソフトウェアを使って、データを呼び出したり、変更したりするわけですよね。 Oracleはこのデータを保持して置くためのデータベースソフトを一般的には提供する会社です。 老朽化しているというシステムにもたくさんのデータがありますよね。これはどこのデータベースソフトを使用していますか？Oracleもそれなりに古くからある会社ですので、もしかしたら、現状が既に ハードウェア　⇒　F社のもの システム（ソフトウェア）　⇒　F社が開発したもの データベースソフト　⇒　Oracle ということも十分にありえるわけです。この場合、Oracleの製品を使用しているからと言って、問題が解決するわけではないのはおわかりかと思います。Windowsを使っているからと言って、F社のPCばかりを買うのを避ける対策にならないのと同じでしょう。そして他のソフトウェアハウスに注文した場合でも、 ハードウェア　⇒　どこかのベンダーが選定した結果F社のもの システム（ソフトウェア）　⇒　どこかのベンダーの開発したもの データベースソフト　⇒　Oracle ということだってありえるのです。 結果、F社のハードウェアばかりということを避けたいということなのであれば、リレーショナルデータベースマネジメントシステム（RDBMS）が何であるかではなく、ハードウェアの選定を自分たちでするとか、システムコンサルタントに相談してみるとか、いっそ開発も含めて、どこか独立系のベンダーに頼むかという方針を固めることが必要なのではないでしょうか？安易な解決策にはのらないことをお勧めします。
PL/SQLとあるあたり、おそらくORACLEだろうと推測して、 DECODE関数により実現出来ると思います。 select test1 ,decode( test2 ,10 ,20 ,20 ,22 ,test2 ) as test2 from TESTtable where test2 = in (10,12)
回答できるかと思って少し調べてみたのですが、 Accessをほとんど使用していない私には 少し難しかったみたいです。 こんな情報が載っていましたが、 いかがでしょうか。 的外れならすみません。 マイクロソフトサポートページ内のコメントを以下に引用いたします。 「メモ型フィールドまたは OLE オブジェクト型、クエリのフィールドでは Access グループ化できません。 また、SQL ステートメントの GROUP BY 句はメモ型または OLE オブジェクト型のフィールドを含めることはできません。 含めるにはメモ型または OLE オブジェクト フィールドを集計クエリは、QBE グリッドにフィールドをドラッグし、そのフィールドの集計] 行で、集計 (合計) 関数 First() または Last() を選択します。」 参考URL：http://support.microsoft.com/kb/88926/ja
UGA に含まれているのはセッション固有の情報、 従って、MACKAさんが挙げられているALTER SESSION などで 変更した初期化パラメータなんていうのもUGA に格納されている 情報でしょうね。 他にも、SQL 文をの実行した際の結果行を含むカーソルの情報なんてのも セッション固有の情報になりますね。 でも、UGA が置かれる場所が専用サーバと共有サーバでは異なります。 専用サーバの場合はPGA 内に置かれます。PGA は Oracle が使用する メモリ領域のうちのSGA (要するに共有メモリ) 以外の部分と考えると わかりやすいと思います。 (厳密には正しくないでしょうが・・・) 共有サーバの場合はSGA 内に置かれます。これは、共有サーバの場合、 セッション間でメモリを共有するため、共有メモリとして割り当てる 必要があるからです。 あまりちゃんとした回答になっていなくてすみません。。。
【その１】 update テーブル１ set コード = ( select コード from テーブル２ where テーブル２.キー = テーブル１.キー ) where exists ( select * from テーブル２ where テーブル２.キー = テーブル１.キー ); 【その２】 update ( select テーブル１.コード as code1, テーブル２.コード as code2 from テーブル１ inner join テーブル２ on テーブル１.キー = テーブル２.キー ) set code1 = code2;
select dbms_metadata.get_ddl('TABLE',<table_name>) from dual; <table_name>には実際のテーブル名を書く。シングルクォーテーションで囲む。全て大文字にする方が無難だろう。 Oracle 10g Express EditionにもあるパッケージなのでEnterprise様ならきっとあるでしょうとも。
年度毎のシーケンスを持てばいいのではないでしょうか。 要件次第ですが、年度が変わっても過去のデータを作成する必要はないのですか。１つのシーケンスを使い回すと、前の年度で作成された番号がまた採番されてしまいます。そこで過去年度のデータを作ろうとすると、番号が重複してしまいます。 年度末に休んでいて、年度が変わってから出社して入力したら、番号が重複して入力できないのは変ですよね。 プログラムで年度を判定しシーケンスを使い分けてあげるのはどうでしょうか。翌年度用のシーケンスは年次処理で作成するジョブを用意しておけばOKでしょう。 絶対に過去年度のデータは作成されないのなら、年次処理(4月01日00時00分に起動する)でシーケンスを初期化するジョブを組めばよいと思います。 シーケンスを使わないなら、採番テーブルを作ってロジックで管理するしかないと思います。その場合でも、年度毎に持っておいた方が無難だと思います。
質問２： 無理やり感が漂っていますが、こんな感じでできました。 select LTRIM(TRANSLATE('　　１２Ａ３４５Ｂ','１２３４５６７８９０　'||TRANSLATE('　　１２Ａ３４５Ｂ','1234567890１２３４５６７８９０',' '),'1234567890　'),'　') AS KEKKA from dual --------結果-------- KEKKA 12345 正規表現（REGEXP_SUBSTR）等を使った綺麗な回答が 他にあると思うのでそれまでのつなぎにどうぞ。
マニュアル参照。 http://otndnld.oracle.co.jp/document/products/or … > IN >メンバーとの等価性をテストします。=ANYと同じです。 > NOT IN >!=ALLと同じです。メンバーのいずれかがNULLの場合には、FALSEと評価されます。 なので「NOT IN」と「!=ALL」は同じです。 同じなら他の人にもわかりやすい「NOT IN」を使うほうがよいと思います。ALLを使ったSQLは、あまり見たことがありません。 それよりは「not in」と「not exists」の違いを把握しておいた方がよいです。 http://oshiete1.goo.ne.jp/qa5419099.html http://otndnld.oracle.co.jp/document/products/or …
「ORA-12560」で検索すると、初期段階でのはまりポイントが見つかるので、そちらを確認してみては。 逆にケアレスミスじゃないのだとすると、解決が難しくてOSクリアインストールからやり直したほうが簡単かもしれない。 参考URL：http://www.google.co.jp/search?hl=ja&q=ORA-12560 …
> おそらくバインドピークのデメリットが顕著にでてしまった 値の偏った列ということですね。 > 表名＋インデックス名を書いてました /*+ index(table_name index_name) */ですね。 以下はマニュアルの抜粋ですが 別名の件はご存知でしたか？ -------------------------------------------------- アクセスする表は、文に指定する場合と同じように正確 に指定してください。文が表の別名を使用している場合、 表の名前ではなく、表の別名をヒントで使用する必要が あります。スキーマ名が文中にある場合は、ヒント内の 表名にそのスキーマ名を入れないでください。 -------------------------------------------------- http://otndnld.oracle.co.jp/document/products/or … SQL、ヒント、統計情報の取得に問題がないのであれば、 INDEX RANGE SCANよりINDEX FULL SCANがコストが低いと オプティマイザが判断したということでしょうね。 # バインド変数をやめてリテラルで指定するとか…… > タイトルをつけないで投稿してしまい タイトルとつけないとこうなるんですか。 （知らなかった……） 勉強になります（笑）。 # 現場にいれば、あれこれとできるんですけどね。 # もどかしいものですね（笑）。
>COMMENTS列には'Constraint definition …'というデータが取得されていますが、LOWER関数を使っているのに先頭が大文字になっているのは、なぜでしょうか? 検索条件に関数を使用しても、SELECT句では指定してませんよね。 >WHERE LOWER(COMMENTS) 上記はあくまで検索時に実施されるだけです。 表示の際にも反映させたいなら、下記のように明示的に指定してください。 SELECT LOWER(COMMENTS) >SELECT * 上記はLOWERを指定していませんよね。*で指定した場合は、単に以下と解釈されます。 >SELECT COMMENTS >また、COL COMMENTS FORMAT A44と指定してから、SELECT を行っていますが、 >この'COL COMMENTS …'は、DICTIONARY のCOMMENTS列を44バイトに変更しているのでしょうか？ SQL*Plus上での書式を変更しているだけです。マニュアルを参照しましょう。 http://otndnld.oracle.co.jp/document/products/or … >データディクショナリには、ALL～、USER～,DBA～があるとありますが、DICTIONARYもデータディクショナリでしょうか？ >ユーザがアクセス可能な情報を格納したものであり、データベース管理者でなくてもアクセス可能な情報なのでしょうか？ >接頭語が付いていませんがALLが付いたようなものでしょうか？ 「DICTIONARY」は静的データ・ディクショナリ・ビューです。マニュアルにも載っています。 http://otndnld.oracle.co.jp/document/products/or … >DICTIONARYは、データ・ディクショナリ表およびデータ・ディクショナリ・ビューについて示します。 上記の説明がマニュアルには記載さています。ユーザが参照できないディクショナリも表示されます。 実際はSYSの所有するViewなので以下SQLで定義を見てみると、特にユーザによる制限はしてません。 set long 10000 select * from dba_views where view_name ='DICTIONARY'
まず、Windows OS に日本語フォント (日本語言語パック？) がインストール されていること。次にブラウザの言語設定で日本語フォントが中国語フォン トよりも上に設定されていること。(Firefox の場合、ツール-オプション-コ ンテンツタブ-言語設定。IE にも同様の設定があるはずですが場所を忘れま した) サーバ側にも日本語言語パックや Oracle 製品のインストール時に英語と中 国語だけでなく、日本語が選択されていなければならなかったかもしれませ ん。
UNDO表領域が格納されているデータファイルにUNDOデータが格納されると思います。REDOログファイルではないでしょう。 参考URLにもあるように、UNDO表領域は独立した表領域として、ユーザデータとは別のデータファイルに作成することが多いです。 参考URL：http://otndnld.oracle.co.jp/skillup/oracle9i/2_1 …
ログオントリガーは ユーザーがデータベースに接続するとき 起動するトリガーです。 簡単な例を挙げます。 ------------------------------------------------------------ SQL> conn / as sysdba 接続されました。 SQL> create or replace trigger logon_scotch_trigger 2 after logon 3 on scotch.schema 4 declare 5 v_program v$session.program%type; 6 begin 7 select program into v_program 8 from v$session 9 where audsid = sys_context('userenv','sessionid'); 10 if v_program = 'sqlplus.exe' then 11 raise_application_error(-20000,'SQL*Plusで接続しちゃ駄目！'); 12 end if; 13 end; 14 / トリガーが作成されました。 SQL> conn scotch/whisky ERROR: ORA-00604: 再帰SQLレベル1でエラーが発生しました。 ORA-20000: SQL*Plusで接続しちゃ駄目！ ORA-06512: 行8 警告: Oracleにはもう接続されていません。 ------------------------------------------------------------ ↓OTN掲示板の関連スレッド http://otn.oracle.co.jp/forum/message.jspa?threa … http://otn.oracle.co.jp/forum/message.jspa?threa … http://otn.oracle.co.jp/forum/message.jspa?threa … http://otn.oracle.co.jp/forum/message.jspa?threa … 検索すれば他にもたくさん出てくると思います。 興味があれば研究してみてください。 # 私自身はなかなかこの手の要件がなくて # 実戦では使ったことがないのですが……
補足です。 これに関して → PL/SQLのパラメータの受け渡しに関して C言語などの解説サイトはたくさんあります。 # パラメータの参照渡しについては知識として知っておいたほうがいいかもしれない
REDOログはオンラインREDOログとアーカイブREDOログがあります。 オンラインREDOログには、グループとメンバーがあります。 グループは複数存在し、サイクリックに使用されます。 グループ01 --> グループ02 --> グループ03 --> グループ01 --> ... グループ内で同一ファイルを複数作成したものをメンバーといいます。 01a 01b 02a 02b 02a 03b なぜメンバを複数作成するかというと、使用中のオンラインREDOログのことを、カレントREDOログと言いますが、これが破損するとDBが停止します。 ただし、メンバーが１つでも生きていて、書き込み可能なカレントREDOログが存在すればDBは停止しません。 このメンバのことをオンラインコピーといいます。 REDOログはサイクリックに使用されるので、次にカレントになると上書きされてしまいます。そのためコピーを作成しないとリカバリ時に変更情報がなくなりリカバリができません。 これをアーカイブREDOログといいます。カレントが入れ替った際にアーカイブREDOログとして作成されるコピーのことです。 オフラインコピーとはアーカイブREDOログのことを指します。 このあたりのことはマニュアルに詳しく書かれています、 http://download.oracle.com/docs/cd/E16338_01/ser …
PLS-00103は構文解析エラーです。 指定されている行にはセミコロンがありませんが、 これが原因だとすると、 エラーメッセージは後ろに続く文で出るはずです。 エラーメッセージで示された箇所より前の部分（行）を調べてください。 # ソースの内容をイメージで示されても困ります。 # 回答者に超能力者は（おそらく）いないと思いますので # 勘で答えるよりほか仕方がありません。
> 調べてみると、どうも、OracleのCompanionCDの中に > 入っているようですが(？)、CDからこのファイルを取得する事は > 可能でしょうか？ companionCDのメディアイメージであればOTNからダウンロードできますので、 ダウンロードしてきてディレクトリ名から判断して含まれていそうなjarファイルを １つずつ展開して目的とするファイルを探す以外にないと思います。 インストールしてもよいのであれば別の場所にインストールして 目的とするファイルだけコピーすればよいと思います。 ただし、普通のやり方だとcompanionCDはDBがインストールされている ホームにしかインストールできないので、DBもインストールする必要があります。
> サーバーのIPをクライアント側のtnsnames.oraに設定したら問題なく接続できました。 ホスト名でも試してみてください。 OTN掲示板のスレッドを1つご紹介しておきます。 http://otn.oracle.co.jp/forum/thread.jspa?thread …
タイプミスがありました。 一行目のVARですが・・ VAR WCOUNT NUMEBR => VAR WCOUNT NUMBER SQL*PLUS上なら、特別な作業を必要とせずに、バインド変数は使えるはずです。
> カーソルで定義したORDER BYの順に動くと考えてもよいのでしょうか。 カーソルで定義したORDER BYの順に処理されます。 > うまく順位が入るようなのですが、これはたまたまなのでしょうか。 たまたま、成績の値が重複しなかったからでしょう。 重複した成績の値を持つデータを作ってテストしてみてください。 例のようにプログラムするとすれば、私なら…… DECLARE CURSOR カーソル IS SELECT 成績, count(*) as cnt FROM tb GROUP BY 成績 ORDER BY 成績; n number := 1; BEGIN FOR r IN カーソル LOOP UPDATE tb SET 順位 = n WHERE 成績 = r.成績; n := n + r.cnt; END LOOP; END; # 順位だから1から始まるようにしています。
>oo4oを利用してJavaのプログラムからOracleにつなぐことは可能でしょうか？ Javaを使いながら、プラットフォームが限られるoo4oを使う意義が理解できませんが・・ Java-COMブリッジを使えば、Javaからでもoo4oを利用できると思いますよ。
SET句でRANK関数を使うことはできません。 （使うことができるRDBMSもあるようです） UPDATE文でRANK関数を使用するときは、少し面倒なことになります。 update tb set 順 = ( select t2.順 from ( select 数値, rank() over (order by 数値 desc) as 順 from tb ) t2 where t2.数値 = tb.数値 ); # 例のテーブル構成では、数値が重複している場合、 # 上記UPDATE文は失敗します。 # 実際には主キーがあるでしょうから # その点は工夫してください。 # ちなみに下記UPDATE文なら重複していてもOKです。 RANK関数を使用しない方法もあります。 update tb set 順 = ( select count(t2.数値) + 1 from tb t2 where t2.数値 > tb.数値 ); # 例のSQL文と処理結果が合致しません（降順と昇順）。 # とりあえず降順で処理しています。
SYSDBAやSYSOPERといった権限は非常に強力であるため、 普通にはCONNECTさせないよってことです。 これらの権限で接続するときは、 データベースの外部で認証する必要があります。 ・OS認証 ・パスワードファイル認証 マニュアルなどで確認してください。 http://otndnld.oracle.co.jp/document/products/or …
可能かどうかという意味では可能です。 マニュアルを参照してください。 http://otndnld.oracle.co.jp/document/products/or … 必要なのは「OSDBAグループ」と「Oracleインベントリ・グループ」です。特に名前は関係ありません。 ※内部的にはグループはIDで管理されてるし、グループ作成時にIDを指定しない限りそれぞれの環境でバラバラなので、名前には特に意味はないです。 開発環境で別バージョンのOracleを入れるときに、OSユーザ毎に権限を変えたくて、dba10gとか、dba9iとかは作ったことがあります。 本番環境では、あえて変えたことはないですね。
こういった場合、以下のようなマスタ類を整備します。 ■状態マスタ 状態コード、状態 ・10:登録済み ・20:申請済み ・30:本社承認済み ・40:連携済み ・50:反映済み "本社承認済み"以前は、「where 状態コード > 30」で表現可能です。 ※というか、以前以後を表現するためには「本社承認済み」という文字列では表現できません。 また、ユーザに対しては参照可能な「状態コード」を付与します。 こうすることで、ユーザが参照可能な状態を定義します。 ■ユーザマスタ ユーザID、参照可能状態コード、ユーザ名 ・01　10　社長 ・02　10　部長 ・03　10　課長 ・04　40　係長 ・05　40　一般職 ・06　40　派遣 こうしておけば以下条件で各ユーザが参照可能な状態を指定できます。 ユーザ毎に個別指定も可能です。 「where 状態コード >= 参照可能状態コード」 一般職は40からしか見られなくなりますし、課長は10から見られます。 ■状態マスタ ・99　すべて ・10　登録済み ・20　申請済み ・30　本社承認済み ・40　連携済み ・50　反映済み (1) 検索条件取得 「一般職」が状態「登録済み」を指定。 ・ユーザID(05)と参照可能状態コード(40)を取得 ・指定された状態(10)を取得 (2)SQLの組み立て 　(1)で取得した条件を以下に当てはめていきます。 　カッコで条件の優先順位を定義します。 条件は(a)、(b)、(c)に分けます。 (a) 自己データの検索部分 (b)ユーザ権限による検索部分 (c)指定された状態を権限に付与する。 優先順位は以下にします。 ただし、(c)の条件は99の場合は指定しません。 ( (a) or (b) ) and (c) 以下のようなSQLとなります。 --(a) 自己データの検索部分 -- 登録者、申請者 、承認者が自分 の場合は、状態を検索条件にしない。 where ( ( (登録者コード = 05 or 申請者コード = 05 or 承認者コード = 05 ) ) -- (b)ユーザ権限による検索部分 -- 参照可能な状態を指定する。 or ( where 状態コード >= 40) ) -- (c)指定された状態を権限に付与する。 -- ※99の場合は条件指定を省略 and 状態コード = 10 -- これくらいのテーブル構成でないと、実現はできないと思います。 じゃないと、java内部で条件指定を直書きすることになります。 あと、これだと（and条件）、登録も申請も承認も「派遣」の人が全部やったデータしかみられませんよ？ >Select * from 予定情報 where 状態 ='登録済み' >and 登録者 = '派遣'　and 申請者 = '派遣'　and 承認者　='派遣'
$ORACLE_HOME/bin/emctl status dbconsoleでステイタスを確認してください。 ひょっとするとこけてるかもしれません。 また、OEMへの接続にはポート番号(デフォルト1158）が必要ですが接続時に指定しましたか？ http://IP:1158/
10g以上であれば、REGEXP_LIKE関数が使えるかもしれません。 一度、調査されてはいかかでしょう。 SQL> conn scotch/whisky 接続されました。 SQL> with student as ( 2 select 'あああABCいいい' name from dual union all 3 select 'あああAbcいいい' name from dual union all 4 select 'あああＡＢＣいいい' name from dual 5 ) 6 select * from student 7 where regexp_like(name,'[AaＡ][BbＢ][CcＣ]'); NAME ------------------------------------------------------ あああABCいいい あああAbcいいい あああＡＢＣいいい
昨日（No.2）は簡単に済ませて失礼しました。眠かったもので（笑）。 > in句でもカンマ区切りで指定した場合は1000件までで、 > 副問合せであれば問題なしという記述もありました。 こちらが正解でしょう。1000件というのは「式のリスト」の制限ですね。 下はマニュアルの抜粋です。 > カンマで区切られた式のリストには、最大1000個の式を指定できます。 > カンマで区切られた式の集合のリストには、任意数の式の集合を含める > ことができますが、各集合に指定できる式は最大1000個です。 http://otndnld.oracle.co.jp/document/products/or … SELECT文で指定してやる分には問題ないと思いますよ。 【実験】 SQL> select count(*) 2 from ( 3 select level 4 from dual 5 connect by level <= 2000 6 ); COUNT(*) -------- 2000 1行が選択されました。 SQL> select ename, sal 2 from emp 3 where sal in ( 4 select level 5 from dual 6 connect by level <= 2000 7 ); ENAME SAL ---------- -------- SMITH 800 ALLEN 1600 WARD 1250 MARTIN 1250 TURNER 1500 ADAMS 1100 JAMES 950 MILLER 1300 8行が選択されました。 # inの使用に問題がないのであれば…… update A_TBL set status = '4' where seq_no in ( select seq_no from ( select seq_no, key_2, status, max(key_2) over (partition by key_1) as max_key_2 from A_TBL ) where key_2 <> max_key_2 and status = '0' ) でいいかもしれません。
Oracleの異なるバージョンとかを入れる予定がなければ、なんの問題もありません
間違ってるので訂正。 select B.所属,A.結果,count(*) as "人数" from ( select x.*,row_number() over(partition by ID order by 回数 desc) R from 健康診断テーブル x ) A, 個人情報テーブル B where R=1 and A.ID=B.ID group by B.所属,B.結果 ;
> 早速の御回答ありがとうございます。oracle9iのcdのexp.exeをコピーして検証してみます ネットワークがつながっているのであれば、exp.exeをコピーしなくても system/manager@orcl というように接続識別子を指定することでリスナー経由でリモートの サーバからエクスポート可能です。 exp.exeをコピーするのであればDLLもコピーする必要がありますし、 Oracle10g のDLLと競合しないようにパス設定しなければならないなど、 多くの壁があると思いますので。
初期化パラメータファイルは制御ファイルのように多重化されておらず、日常のデータベースバックアップでも忘れられがちなので、一度破壊されると復旧は結構厄介です(バイナリのSPFILEともなればなおさら)。 ※以下、テキスト形式のパラメータファイルを"PFILE"、バイナリ形式のパラメータファイルを"SPFILE"と呼びます。 (1)とりあえずSPFILExxxx.ORA(おそらくSPFILEORCL.ORA)をSPFILE.ORA.BAK等にリネームする(バックアップ兼Oracleから認識されないようにする) (2)一度でもデータベースを正常起動したのでしたら、アラートログに「(パラメータファイルから読み込んで)設定した非デフォルトのパラメータ」が列挙されているので、その記述と(1)のSPFILEを元に、PFILE (INITORCL.ORA)を作成し、データベースの起動を試みる(起動できるまでは何度か編集することになりますので、PFILEのまま運用する)。 (3)以後PFILE(INITORCL.ORA)のままで運用されるならこのままでも結構ですが、元通りSPFILEでの運用を希望されるのでしたら、以下のSQL文でSPFILEを再作成します。 CREATE SPFILE FROM PFILE;
http://otndnld.oracle.co.jp/document/products/or … 「コマンドラインの長さ：2500文字」の制限に引っかかったのではないでしょうか。 @ファイル名などで、SQLスクリプトを実行すればよいと思います。
10g以降ならmodel句も使えます。 利点はなんとなくカッコいいところです。 select dept_id,item_id,item1,item2 from tab model return updated rows partition by (dept_id,item_id) dimension by (Row_Number() over(partition by dept_id,item_id order by dept_id,item_id) as rn) measures(time as item1,time as item2) rules(item2[1] = item2[2]) order by dept_id,item_id -- 結果 -- DEPT_IDITEM_IDITEM1ITEM2 111100016030 1111000240 1112000130
Oracle11gR1 の最低のリリースが 11.1.0.6 です。 メディアからインストールすれば 11.1.0.6 になっているはずです。 11.1.0.1 というものは存在しません。（正確にはベータ版だったかな？）
>>通常は、(1)(3)(4)(5)(7)(2)(8)の順じゃないかと思うのですが・・ >インスタンスの作成は、ORADIMでなくDBCAと言うツールで出来ました。 >そちらを使うようにしてみます。 DBCAを使ってインスタンス作成作業するなら、手順が変わると思います。（質問に書かれた手順で良い） そもそも、ファイルをリストアするなら、インスタンスの作成作業自体が不要です。 ORADIMを使って、インスタンス（サービス）の立ち上げ用の定義だけ作ればよい。 DBCAでDBを作っても、バックアップからリストアすることで、DBCAの作業自体が無駄に近く、 結局レジストリ定義だけ使う感じになります。 レジストリは、前述のようにORADIMで作れますので。 オラクルのバージョンやエディションが変わる場合は、単純なリストアでの移行って訳にはいかないと思いますが、 今回のようなケースだと、ハードウエア障害等でのバックアップからの復元と同じ考え方でいけると思いますよ。 ちなみに、バージョンやエディションが変わる場合は、DBCAでインスタンスを作成することになると思いすが、 ＤＢキャラクタセットの変更がなければ、ファイルはリストアせず、データファイルだけをトランスポータブル表領域の エクスポート・インポートで移行するのが簡単な方法かと思います。
バッチ処理ということで気になったので…… APPENDヒントは単一行INSERT（INSERT INTO ... VALUES ...）の場合、 無視されるので注意してくださいね。 INSERT INTO ... SELECT ... の形で使用することになります。
>例えば、「ゆ」で始まる文字列が100万件あったとして、「ゆ」「ず」という文字列の並びを検索すると >該当件数が50万件になる、という検索方法です。 あくまで、Oracle側で行う処理は、前方一致(Like)検索になります。 一般的には、フロントエンドのアプリケーションで、入力項目が変異する都度、 DB検索と検索結果表示を行う仕組みとなります。 入力の邪魔を邪魔しないような非同期検索の仕組みをアプリケーションに組み込めば良いかと。 フロントエンドのアプリケーションをどんな環境・言語で書くのか判らないので、 これ以上の説明はできません。
まずは、問題の切り分けのために、sql*plusで、同じSQL文が通るかどうか確認されたほうが良いと思いますよ。
SQL*Plusはデフォルトでインストールされますよ。 スタート→プログラム→Oracle Database 10g Express Edition→SQLコマンドラインの実行 コマンドプロンプトから、 C:\>sqlplus と打ってもOKです。 ※ GUI版のSQL*Plusは付属していません。
Oracleのexportのダンプファイルをアスキーモードでftp転送してはいけません。 そのダンプファイルは残念ながら使用できません。 修復もできません。 OSがWindowsであろうがSolarisであろうが関係なく使えません。
一致する項目の数で、レコードを選択すれば良いと思うので、 select T1,T2,T3,T4,M1,M2,M3,M4 from ( select T.*,Mx.*,row_number() over(partition by T1,T2,T3,T4 order by CNT) R from テーブル T, ( select M1,M2,M3,M4, decode(M1,'*',1,0)+decode(M2,'*',1,0)+decode(M3,'*',1,0)+decode(M4,'*',1,0) as CNT from マスタ M ) Mx where decode(M1,T1,1,'*',1,0)=1 and decode(M2,T2,1,'*',1,0)=1 and decode(M3,T3,1,'*',1,0)=1 and decode(M4,T4,1,'*',1,0)=1 ) where R=1 とか。
1回のUPDATE文で複数テーブルの更新はできません。 質問の目的によりますが、 2回UPDATEしたくない事情としては、 アプリケーションからDBMSへの通信をどうしても1回にしたい、というためでしょうか？ であれば、2テーブルを更新するようなPROCEDUREを作成し、それをコールするようにすれば、「アプリケーションからDBMSへ1回の通信で複数テーブルを更新する」ということは実現できます。
SYSユーザーで接続してください。 パスワードはご存知ですよね。 パスワードは知らないといわれてもアドバイスできません。 接続モードをSYSDBAにします。
特に問題ないと思います。 ライセンスの条文を見てもそのようなことをしてはいけない とは書かれていません。 ちなみに、OTN でライセンスの話題をしてはいけないことになっているのは、 正確性の問題に因ります。 Oracle Direct に問合せることでサポート契約がなくても 正確な情報が確認できるのに、なぜ正確な情報が得られないかもしれない ところでご質問なさるのか、理解しかねます。
本当にこれだけの条件なら以下SQLで十分だと思います。 ちゃんとキー項目に索引がついていればパフォーマンスもそれほど悪くないと思います。 しかし、tbl2を２回読むのは、あまり嬉しくない作りです。 必ず２件あるならtbl2にc1とc2でカラムを持たせた方が良いと思います。 create table tbl1 ( key varchar2(3), a varchar2(3), b varchar2(3) ); create table tbl2 ( key varchar2(3), col varchar2(3), c varchar2(3) ); insert into tbl1 values('111','A1','B1'); insert into tbl1 values('222','A2','B2'); insert into tbl1 values('333','A3','B3'); insert into tbl2 values('111','1','AA'); insert into tbl2 values('111','2','BB'); insert into tbl2 values('222','1','CC'); insert into tbl2 values('222','2','DD'); insert into tbl2 values('333','1','EE'); insert into tbl2 values('333','2','FF'); select tab_ab.key, tab_ab.a, tab_ab.b, tab_c1.c, tab_c2.c from tbl1 tab_ab left outer join tbl2 tab_c1 on tab_ab.key = tab_c1.key and tab_c1.col = '1' left outer join tbl2 tab_c2 on tab_ab.key = tab_c2.key and tab_c2.col = '2' order by tab_ab.key ; KEY A B C C --- --- --- --- --- 111 A1 B1 AA BB 222 A2 B2 CC DD 333 A3 B3 EE FF
リスナーサービスは、オラクルサーバ側で接続を待ち受けるための差0ビスですので、 クライアント側でサービスを起動する意味はありません。 クライアント側は、tnsnames.oraが適切に作成されていれば、OKです。 sqlplus.exe scott/tiger@orcl のような起動時に接続文字列(例:orcl)を指定するか、 set local=orclのように、接続先を環境変数に指定してから、sqlplus scott/tigerとすれば 接続できると思いますよ。
補足（蛇足？）です。 >知識があるからといって、いきなりシルバーや >ゴールドを受講することは無理なのでしょうか？ ブロンズやシルバーの試験を受けないで、ゴールドだけ取得して認定してもらえるか ということでしたら……それは無理です。下位試験の認定が上位試験の認定条件になります。 今は試験だけじゃなくて講習があるから大変ですね。お金が……
NO2さんが言われてる実行計画の確認と有効な統計情報が何か わからなければOracleのチューニングとはどんなものなのか 勉強することからどうぞ。 http://www.geocities.jp/a1770053/jyoho/pt/chapte … http://www.geocities.jp/a1770053/jyoho/pt/chapte … 1から16までまずは読んでみられてはいかがでしょう。 ボトルネックになっている原因探しから、その対処の決定とテスト 改善が確認されたら、実運用への適応というのが流れととなるでしょう。 内容がよく理解できないのであればプロの御願いするのがいいでしょう。 原因探しは結構難しいです。
共有メモリということは、 変更したパラメータは「SGA_TARGET」？ それとも個々のパラメータ（shared_pool_size、db_cache_size）？ このあたりは、リソースのチューニングの問題になってきます。 SGA（共有メモリ）は各セッション共有の用途で使用されるもの、 例えば、ディスクから読み出したデータだったり、すでに誰かが 実行済みで、解析済みのSQLだったり、ディクショナリーだったり、 そういった共有用途で使用される領域で、DB起動時に、 物理メモリー、仮想メモリーから事前に決めたサイズを割り当てて、 OracleDBの共有用途専用として確保する領域です。 もし、SGA_TARGETを広げて、全体のパフォーマンスが遅くなったのだとしたら、 物理メモリでは不足し、スワップ（ディスクの仮想メモリ）を使用している 可能性があります。当然、物理メモリとディスクで代用した仮想メモリでは、 処理スピードは段違いです。 個々のパラメータを変更して遅くなったと感じた場合は、 たとえば、バッファキャッシュを大きくするため、最低値として、 「db_cache_size」の値をかなり大きくし、SGA_TARGETにかなり近い値に したとすると、SGAでは他の用途、共有プールだったり、redoバッファだったり、 いろいろな用途でのも使用していますから、他の用途用のメモリが 不足し、パフォーマンスが遅延する可能性があります。 また、個々に値を設定した状態で、自動メモリ管理(10g)を使用している場合には、 通常の用途よりも1ステップ作業が増えるので、何か不具合に該当することが あるかもしれません。 ま、不具合であったら、サポートに確認しましょう。 処理全体が遅いのか、特定の処理が遅いのか、 遅くなった時期は毎回遅いのか、ある時だけ遅く感じたのか 問題切り分けをしましょう。 処理する対象のデータが増えれば、処理が遅くなるのは当然ですし、 索引などのメンテナンスなどがきちんとされていなければ、 ある日突然、実行計画が変わって遅くなることだってあります。 DBのパフォーマンスがあがり、処理可能量が増加し、 いままで発生しなかったような遅延が発生しているかもしれません。 また、DB上の処理の問題ではなく、APServerやNetworkの問題だったり、 H/W上の問題だったりするかもしれません。 こういった問題を切り分けするために、StatsPackやDiagnosticsPack といったツールがあり、OS上のパフォーマンス情報を収集しておくと いったことも、ある日突然パフォーマンスダウンといった場合に有効です。 まずは、何事も問題切り分けからです。 もし、難しそうであるなら、サポートの指示を仰ぐのも一つの手です。 バッファキャッシュは物理メモリのサイズなどの条件などを全く考えないなら、 大きければ、大きいほどよいです。 ただし、32bit版だとSGAのメモリ上限は通常、2GBまでです。 このあたりは、「32bit Oracle メモリ上限」とかでgoogleで 調べれば情報はあるはずです。 Oracleでは、データのやりとりは、ディスクと直接行うのではなく、 ディスク内から、必要なデータの入っているブロックを、 メモリ上に確保したSGAの中のバッファキャッシュ用の領域に読み込み、 その読み込んだデータを元に、SQLPLUSなどのユーザープロセスに対し 結果を返しています。 つまり、バッファキャッシュとは、 ディスクの中から、SQLが処理に必要なデータをためておくための領域のことになります。
>>select to_date(20091211) - to_date(20091204) / 7 from dual >>→ORA-00932: データ型が一致しません: NUMBERが予想されましたがDATEです。 >(日付 - 日付)は、to_numberでくくって数値に変換してから割り算しないと、エラーになるのですね。 to_numberで数値化しないのが問題なのではなく、カッコを忘れてるから、 日付型と数値の演算になってるのがエラーの理由です。 select (to_date(20091211) - to_date(20091204)) / 7 from dual のように、質問のような式であれば、to_numberなしでも結果は戻ります。
No.2の人、サメンションではなく、サメイションですよね。恥ずかしすぎます・・・
練習用ということであれば、 フリーで使えるOracle Database 10g Express Editionはいかがでしょうか？ http://builder.japan.zdnet.com/sp/oracle-db-2008 … 当然のことながらサポートはありません。自己責任となります。
ディスク領域が不足している事から、 ディスク領域を増やして上げればよいのではないでしょうか。 具体的に、どれ位のディスク領域が必要なんですか？(DBインスタンスサイズも含めて)
テーブル名：tab、列名：colと仮定して・・・ select distinct to_char(col, 'yyyy') from tab; か、 select distinct substar(col, 0, 4) from tab; とかかな？ #1さんも指摘してますが、ＳＱＬの書き方ならネットでたくさん引っかかるかと思いますので、一度ご自分でも検索されたほうがよいと思います。
バージョン9.2.0のユーティリティでExportしたものって バージョン9.0.1のユーティリティではImportできなかったような。 9.0.1のExportツール使用して、 9.2.0のDBからExportして、インポートを試してみるのが一番かも。
されないと思いますよ。 ODP.NETってWindowsClientの機能ですので、UNIX用ではサーバーでもクライアントでもインストールされません。
>『NLS_LANG』の値が空になっています。 初期化パラメータで設定されているのですかね？ >64bit版ではデフォルトが空なのでしょうか？ 確認できる環境が手元にありません。 ご不審に思われるのであれば、サポートに相談されてはいかがでしょうか。 >32bit版では接続されませんでした。 10gのデフォルトの認証はOS認証であると思いますが…… インストール後、パスワードファイル認証に変更したってことはないですか？
ゴールとなるＢサーバが、JA16SJISであるなら、何をしようが、 JA16SJISで表現できる文字コード以外文字化けする。 NLS_LANGをJA16SJISに設定したクライアントで、 (1)Ａサーバからエクスポート (2)Ｂサーバへインポート するのと一緒。 今回の場合、それで問題が出るなら、DB作成時のキャラクタセットの選択ミスであり エクスポート／インポートで何とかできる問題ではない。 最初にも書いていますが、必ず文字化けが起こるわけではないので、注意してください。 クライアントPCのOSやミドルウエアに何を使うかで、JA16SJISでも問題なく使えますので。
Oracleのインストールには以下のタイプがあります。 OracleデータベースのインストールではExp/Impがインストールされます。 Oracleクライアントのインストールでは管理者を指定するか、カスタムで指定すればインストールされます。 ・Oracleデータベース 　# StandardEdition # EnterpriseEdition # カスタム http://otndnld.oracle.co.jp/document/products/or … ・Oracleクライアント 　# InstantClient 　# 管理者 　# ランタイム 　# カスタム http://otndnld.oracle.co.jp/document/products/or …
簡単に説明すると、 OPatchはパッチ適用ツールです。 OISCからダウンロードも可能ですし、 DBインストールすれば、「ORACLE_HOME\OPatch」下にも インストールされています。 複数のバージョンのOPatchが存在し、パッチ適用時には、 DBのバージョンに合ったバージョンのOPatchを使用します。 「パッチ」は 「個別パッチ」とか「ワンオフパッチ」とか呼ばれ、 一つの不具合を修正するための修正プログラム（パッチ）のことです パッチ自体は、Oracle社とのサポート契約のもと、 サポート指示のもと、MetaLinkからダウンロードして適用します。 複数の不具合で同じファイル内の記載内容を 修正するケースがありますが、この場合、 個々のパッチを適用すると同じファイルが上書きされ、 結果的に一つの修正しかあたっていないことになりますので、 このように、コンフリクトしてしまう場合には、 そうならないように、1つのパッチに、 複数の修正の効果をまとめた「マージパッチ」を Oracle社が提供してくれている場合もあります。 パッチセットリリース（PSR)は、 修正を大量にまとめたものになります。 たとえば、 10.2.0.1というバージョンを10.2.0.4に バージョンアップするためのものです。 10.2.0.1から、10.2.0.4までには、 大幅な不具合なり、セキュリティ強化なりの修正パッチがあり、 個別パッチをそれぞれ適用していては膨大な数になります。 なので、このようにPSRとして、まとめた形で、 Oracle社が提供してくれています。
DBVERIFYのことですかね？ http://otndnld.oracle.co.jp/document/products/or …
Oracleのインストーラー（OUI）を起動したら インストール済みの製品のバージョンを確認できます 確認後はキャンセルでインストーラーを終了させればOKです
select id||'/'||name from student;
>この場合SGAのメモリ枠は何メガまで拡張できるかどのようにして >判断したら良いか教えてください. こちらのサイトを参考にしてください。 http://homepage3.nifty.com/owl_h0h0/unix/job/ORA … SGAメモリの最大容量についてはこちらのQ&AのChip'n Mole さんの回答をどうぞ。 SGAサイズ 最大値 オペレーティング・システムによって異なる。 だそうです。 http://www.oracle.co.jp/forum/message.jspa?messa … >75Mぐらい増やしましたがOS上では減っておりません。 >freeは42Mと増えてます。 SGAメモリの設定を増やせば、oracleが最初にメモリを確保するような前提で考えておられますか？ もしそうならば違っているように思われます。 最初に紹介したサイトのoracle プロセスのメモリマップを実行すれば 実際使用しているメモリの状況が確認できます。 oracle9iのチューニングについてのサイトを紹介します。 http://www.geocities.jp/a1770053/jyoho/pt/chapte … chapter1からchapter15まであるので最後の数字を変えて読んでみてください。 SGAの調整は実搭載メモリ量内に収めておくほうが良いと思われます。 実際の運用上で必要な量の計算についても記載されています。 無駄に大きくしても無意味と考えます。 難しいところもあろうかと思いますが、ご健闘ください。
SELECT DISTINCT T1.A1, T1.A2, T1.A3, T1.A4, T1.A5, T1.A6, T1.A7 FROM tblA T1, tblA T2 WHERE T1.A1 = T2.A1 AND T1.A2 = T2.A2 AND T1.A3 <> T2.A3 AND T1.A4 <> T2.A4 AND T1.A5 = T2.A5 AND T1.A6 = T2.A6 AND T1.A7 = T2.A7 という方法もあります。自己結合だからパフォーマンスはちょっと…… Oracleだと、ROWIDが使えるからDISTINCTはいらないですけどね。
KROWN が参照できているということはサポート契約されているんですよね？ サポート契約元に確認されるのがよいでしょう。
単に ORDER BY lower(NAME) で良いんじゃないですか？ http://www.shift-the-oracle.com/sql/functions/up …
> select DISTINCT a.1, a.2, a.3　(3つともKey項目です。) 同じ意味合いのキー項目がdata,insideにもあるようですので [SQL] select column1, column2, column3 from music where a.4 = 20091118 minus ( 　　select column1, column2, column3 from data 　　union 　　select column1, column2, column3 from inside ) でいかがでしょう？
Oracleデータベースにクライアントから接続するには以下の手順が必要となります。 (1)Oracle Cliantのインストール (2)Netcaを起動し接続情報を設定 ※他のクライアントからtnsnames.oraをコピーするのも可。 (3)ODBCを使用する場合は、(2)で作成した接続情報を元にシステムDNSを作成。 　※ODBCやoo4oを使用するかはプログラム、ツールによる。 (4)接続用のプログラム、ツールに(2)か(3)で作成した接続情報を設定する。 どこまで設定を行っており、なにを聞きたいのかをまとめてください。 記載している内容では、なにをアドバイスすべきか判断できません。
　素直に、トップページからたどり着く方法が見つけられないので、一気に、結果だけ。（今現在のＵＲＬですので、下手すると、変わる可能性は大） 　http://www.oracle.com/technology/products/databa … 　このページから、右側にある、「FREE DOWNLOAD」の赤いボタンがある下にある、WINDOWSのリンクをたどる。 　OracleXEUniv.exe (216,933,372 bytes) 　OracleXEClient.exe (30,943,220 bytes) 　この二つのファイルをダウンロード。ちなみに、一番上の「OracleXE.exe (165,332,312 bytes)」は、日本語データが扱えないので注意。 　ダウンロードの際には、ORACLE.COMのログインｉｄが必要ですので、無いようでしたら、ダウンロード画面の前のログインページから、入会手続きをして、再度やり直してください。 　素直なルートがあると、ある程度安定した経路になるんですが・・・真ん中へのＵＲＬ直うちは、ちょっと不安だわ・・・
むつかしく考えすぎておられるのでは？ IDを主キーにするなら、 【tableA】 id name 1 西部ライオンズ 2 読売ジャイアンツ 【tableB】 id name 1 中島 2 中村 3 小笠原 4 ラミレス 【tableC】※numberは型なのでnbrとしました id nbr 1 0 2 1 3 2 4 3 【tableD】 tablea_id tableb_id tablec_id 1 1 1 1 2 2 2 3 3 2 4 4 SELECT a.name, b.name, c.nbr FROM tableD d INNER JOIN tableA a ON a.id = d.tablea_id INNER JOIN tableB b ON b.id = d.tableb_id INNER JOIN tableC c ON c.id = d.tablec_id この場合、tableA、tableB、tableCはマスタで 各テーブル間に関連はなく、tableDで関連付けてやるわけです。 tableA、tableB、tableC、各テーブル間で関連を持たせるのであれば、 【tableA】 id name 1 西部ライオンズ 2 読売ジャイアンツ 【tableB】※id1がtableAのidと対応 id1 id2 name 1 1 中島 1 2 中村 2 1 小笠原 2 2 ラミレス 【tableC】 id1 id2 nbr 1 1 0 1 2 1 2 1 2 2 2 3 SELECT a.name, b.name, c.nbr FROM tableA a INNER JOIN tableB b ON a.id = b.id1 INNER JOIN tableC c ON b.id1 = c.id1 AND b.id2 = c.id2 関連付けするためのtableDは不要となります。 tableCが何を意味するテーブルなのか、 私にはわからないので一応上のようにしてみました。 tablaBとtableCが一対一対応… 例えば「巨人軍の小笠原の背番号は2である」 というような場合は、そもそもテーブルを分ける必要はなく、 【tableA】 id name 1 西部ライオンズ 2 読売ジャイアンツ 【tableB】 id1 id2 name nbr 1 1 中島 0 1 2 中村 1 2 1 小笠原 2 2 2 ラミレス 3 SELECT a.name, b.name, b.nbr FROM tableA a INNER JOIN tableB b ON a.id = b.id1 でもよいわけです。 質問のタイトルは「テーブルを結合」でしたよね。 何を説明しているのでしょうね……わたし(笑)
こんな感じですか。 SELECT * FROM a a1 WHERE report_date >= (SELECT MAX(report_date) - 7 FROM a a2 WHERE a2.shop_name = a1.shop_name);
エラーの内容は、 >ORA-00001: 一意制約(OES4.PK_SITT_IKO_LOG)に反しています ですから、表にPrimary key句があるか、unique索引があるはずです。 その制限事項に引っかかってます。 タイムスタンプでもWindowsの場合の精度は1/100秒で、Unix/Linuxでも1/1000秒くらいです。 LoopしてInsertしたら同じTimeStampの値になるのは当然です。
ご自分で答えを出しておられるようですが…… NULLに比較演算子を適用しても決してTRUEには（FALSEにも）なりません。 以下のページが参考になるでしょう。 3値論理とNULL（http://codezine.jp/a/article/aid/532.aspx）
表と索引は別ですから、表のinitial値は1.4Gで、索引のinitial値を0.4M(?)にして下さい。 それから,MAXEXTENTSは表が拡張したときに、不連続の領域になったときの、ばらばら度合いを指定する物なので、2Gってのは変ですね。 >(今、MAXEXTENTSを2G以上にするとエラーが発生します） どんなことをしてエラーになったのでしょうか？ 実行したこととエラーをUPして下さい。
なぜオラクルに接続するのに”SqlConnection”で接続しようとしているのですか・・・・　（笑 OracleConnectionが用意されているのでこちらを使ってください。 サンプルソース http://www.okisoft.co.jp/esc/db/ora04.html
UNION ALLで問題があるのですかね。こういうことかな。 SELECT id, name1 name, name1_cate name_cate FROM table1 WHERE name1 IS NOT NULL UNION ALL SELECT id, name2, name2_cate FROM table1 WHERE name2 IS NOT NULL ORDER BY 1,3; もしくは、 SELECT id, name, name_cate FROM ( SELECT id, CASE WHEN p = 1 THEN name1 ELSE name2 END name, CASE WHEN p = 1 THEN name1_cate ELSE name2_cate END name_cate FROM table1, (SELECT level p FROM dual CONNECT BY level <= 2) x ) WHERE name IS NOT NULL ORDER BY id, name_cate; ORDER BYは不要でしょうから抜いてください。
他の解答者さんもおっしゃっているように、論理演算子「AND」の問題ですね。（質問者さんは、どうやら比較演算子「NOT IN」の方は理解されているようですし。） >nullが検索されるとなぜ０件なのか教えていただけますでしょうか。 通常は、0『偽（FALSE）』か1『真（TRUE）』 のどちらかなのですが、NULLがきた場合、AND演算子では検索の処理を強制終了したような感じとなって「０件」、つまり該当する件数無しとする訳ですね。 where empno <> NULL 　AND empno <> 1000 　AND empno <> 1030 は、0です。 参考URL：http://www.rfs.jp/sb/sql/02/02.html#AND
T質問テーブルのデータ値が特定できるのであれば、データ毎にシーケンスを用意すれば良いと思います。 シーケンス例： 質問ID／シーケンス 1／シーケンス1 2／シーケンス2 T質問テーブルのデータ値が特定できないのであれば、上記の「シーケンス例」で記述したものを、別のテーブルで管理すれば良いのではないでしょうか？ 上記の状態で、T質問テーブルの質問IDが ・1だった場合、管理テーブルを参照し、シーケンス1を使用 ・3だった場合、管理テーブルにデータがないため、シーケンス3を新たに作成し、シーケンス3を使用 ※質問IDのデータの種類が少なければ良いと思います。
insert into A(o,p,q,r,s,t) select B.o,B.p,B.q,B.r,C.s,C.t from B,C where B.o=C.o and B.p=C.p; って感じかと。普通に問合せ文を書くだけですよ。 問合せ文自体は、内部結合だろうが外部結合だろうが何でもＯＫ。
補足、ありがとうございます。 マスタテーブル：YYY に「その他の場合」の値として列１がNULLの行を登録しておくとすると、下記の様な方法が考えられます。 ・別テーブルとマスタテーブルを LEFT OUTER JOIN ・列2がnullになった行には、マスタテーブルの列1がNULLの行の列2の値を設定 例) -------------------------------------------------------------- SELECT XXX.列Ａ, CASE WHEN YYY.列2 IS NULL THEN (SELECT 列2 FROM YYY WHERE 列１ IS NULL) ELSE YYY.列2 END AS 列2 FROM XXX LEFT OUTER JOIN YYY ON(YYY.列１= XXX.列Ａ) ------------------------------------------------------------------
こんにちは。 過去1年以内のデータを取得したいのならば下記でどうでしょうか。 SQL> desc test; 名前 NULL? 型 -------------------- ------- ---------------------------- VCDT VARCHAR2(14) SQL> select * from test; VCDT ---------------------------- 20081002161322 20081120161322 SQL> select * from test 2 where vcdt >= to_char(add_months(sysdate,-12),'yyyymmddhh24miss'); VCDT ---------------------------- 20081120161322 本日を1年前としてそれより大きいと判定しました。
ログオントリガーで対応できると思いますが、 このトリガーでエラーを出してしまうと誰もログインできなくなるので気をつけてくださいね。 システム停止状態で導入してログインテストしたほうがよろしいです。
「つきみweb」っていうのがよくわかりませんが、 単純にWindowsのOracleクライアントの「ociw32.dll」にパスを通すだけなら、 「スタート」→「マイコンピュータ」→「プロパティ」 →「詳細設定」タグの「環境変数」をクリック →「Path」環境変数に、 　「Oracle_HOMEのBIN」のパスを、 　「Path」環境変数選択し、「編集」クリック、で、 　 適当に（ま、一番先頭にかな）追記。 　 （「Oracle_HOMEのBIN」のパスは 　　例えば、C:\Oracle\product\10.2.0\client_1\BINみたいに、 　　インストールした先。） 　（ま、わからなければociw32.dllを検索で探してみて、 　　入っているフォルダを探せばよいかと。） これでよいのでは。
リアルタイムでの同期が必要なのでしょうか？ データベースリンク経由のトリガーの場合、ネットワーク接続が障害になってトリガーが実行できない場合には、トリガーの起動元のトランザクションも失敗しますが、それでもいいのでしょうか？ つまり、利用者はトリガーのことを知らないとして、裏にあるトリガーが原因でトランザクションがエラーになります。 リカバリなどが面倒なことになりますけど。 同期の遅れ許容時間がある程度あるなら、普通はマテリアライズドビューで複製を作成します。
MERGEを使って何をしたいのか理解できていないのですが・・ 自分自身に、MERGEって、普通はありえない使い方ですよね。 質問に書かれている条件であれば、WHEN-MATCHEDにしか該当しないと思うので、 MERGEでなく、UPDATEを使うのが普通なのではないですかね？ ちなみにエラーに関してですが、MERGEのONに指定する条件が、単一行同士を結合する条件でなければ、 MERGEは適正な動作をしないと思いますよ。
マニュアルを参照しましょう。 > 1. Oracle9iでエクスポート =>Oracle10iにインポート 可能です。 > 2. Oracle10iでエクスポート =>Oracle9iにインポート 10gのexpで作成したファイルは9iではインポートできません。 9iのexpツールで10gからexpすれば可能です。ただし、10gからの新機能のオブジェクトは非対応です。 http://otndnld.oracle.co.jp/document/products/or … ># エクスポート・ダンプ・ファイルは、特別なバイナリ形式で格納されているため、インポート・ユーティリティによる読取り専用です。 ># すべてのエクスポート・ダンプ・ファイルは、上位リリースのOracleデータベースにインポートできます。 ># インポート・ユーティリティでは、上位のメンテナンス・リリースまたはバージョンのエクスポート・ユーティリティで作成されたエクスポート・ダンプ・ファイルの読取りはできません。 >たとえば、リリース2（9.2）のエクスポート・ダンプ・ファイルは、リリース1（9.0.1）のインポート・ユーティリティではインポートできません。 ># 下位バージョンのエクスポート・ユーティリティを上位バージョンのOracleデータベースで実行すると、下位バージョンに存在しないデータベース・オブジェクトのカテゴリは、常に、エクスポートから除外されます。 ># ダイレクト・パスの場合も従来型パスの場合も、Oracle9i のエクスポート・ユーティリティを使用して作成されたエクスポート・ファイルは、旧リリースのインポート・ユーティリティとは互換性がないため、インポートに使用できるのはOracle9i のインポート・ユーティリティのみです。下位互換性が問題となる場合は、Oracle9i データベースに対して下位のリリースまたはバージョンのエクスポート・ユーティリティを使用します。
>CASEで上記のような制約をつけることは可能でしょうか？ その壊れた構文のCASE式では、エラーになって当たり前かと。 正しい構文であれば、CASEを使ったチェックも可能かと思いますよ。 たとえば、 CHECK ( CASE WHEN (GEND = '1') AND (NAME BETWEEN 'a' AND 'z') then 1 WHEN (GEND = '2') AND (NAME BETWEEN 'A' AND 'Z') then 1 WHEN (NAME BETWEEN '1' AND '9') then 1 ELSE 0 END = 1 ) 綺麗な式ではないけど、構文的＆論理的には正しい式なので、通ると思いますよ。
>1.制約だけが削除されて、値は変わらない。 子表の制約も削除されますが、子表のデータは残ります。 試してみましょう。 SQL> create table oya_table 2 ( 3 col1 number PRIMARY KEY 4 ); 表が作成されました。 SQL> SQL> SQL> create table ko_table 2 ( 3 col1 number PRIMARY KEY 4 ); 表が作成されました。 SQL> SQL> ALTER TABLE ko_table 2 ADD CONSTRAINT fk_ko_table 3 FOREIGN KEY (col1) 4 REFERENCES oya_table(col1); 表が変更されました。 SQL> SQL> SQL> SQL> insert into oya_table values(1); 1行が作成されました。 SQL> insert into oya_table values(2); 1行が作成されました。 SQL> SQL> insert into ko_table values(3); insert into ko_table values(3) * 行1でエラーが発生しました。: ORA-02291: 整合性制約(SYS.FK_KO_TABLE)に違反しました - 親キーがありません SQL> insert into ko_table values(1); 1行が作成されました。 SQL> SQL> commit; コミットが完了しました。 SQL> SQL> select * from oya_table; COL1 ---------- 1 2 SQL> select * from ko_table; COL1 ---------- 1 SQL> SQL> drop table oya_table cascade constraint; 表が削除されました。 SQL> select * from ko_table; COL1 ---------- 1 SQL> insert into ko_table values(3); 1行が作成されました。 SQL> select * from ko_table; COL1 ---------- 1 3
(1) NVLかCASEを使う。 (2) 分析関数を使う。 以下のようなSQLで可能です。 select * from TB_A; NUMBER1 NUMBER2 RESULT_CNT ---------- ---------- ---------- 100000 200000 50 100001 200000 50 100000 10 100001 500000 30 select case when NUMBER1 is null then NUMBER2 else NUMBER1 end AS NUMBER1, NUMBER2, RESULT_CNT, SUM(RESULT_CNT) over(partition by NUMBER2) AS SUM_CNT from TB_A; NUMBER1 NUMBER2 RESULT_CNT SUM_CNT ---------- ---------- ---------- ---------- 100000 100000 10 10 100000 200000 50 100 100001 200000 50 100 100001 500000 30 30
9iと10g同居って、Oracle_Home分ければ簡単に出来たかと思うけど、 なんか、入れてみて問題ってありました？ まずは、やってみるのが一番かと思います。
エラー内容をテキストで出力すれば、出来合いのメール送信プログラムを利用してメールを出せるんじゃないですか？ ＶＢ側は、それを起動するだけで済むし、簡単な変更だと思いますけど。
マニュアルの以下、作業は行なっているでしょうか。 2 インストール前の作業 oracleユーザーの環境の構成 http://otndnld.oracle.co.jp/document/products/or …
select * from A minus select * from B;
>こういう場合はスキーマに直接、GRANTするのが一般的なのでしょうか 一般的だと思いますよ。 権限を付与するか、シノニムを定義するぐらいしか方法はないと思いますよ。
表の項目にCHECK制約をつければいいのでは。
以下、判り難いので、プログラムが更新するサーバをａ、追従したいサーバをｂとして書きます。 手っ取り早いのは、以下のような更新トリガを使った方法じゃないかな。 (1)ａに対し、ｂへのデータベースリンクを張る。 (2)ａの各表に対し、更新トリガ（ＤＢリンク上の表に対する更新を行うプロシジャ）を作る。 注意としては、サーバａの更新が起こると、更新トリガ分の負荷がかかることと、 トリガ内で行うサーバｂへの更新でエラーが起こると、サーバａへの更新もエラーとなる。
Unlimitedなら、「DBA_SYS_PRIVS」。 そうでないなら 「DBA_TS_QUOTAS」。
ヒント句の記載がORACLE特有のSQLであるため、ODBC経由ではうまく処理できないのではないかと思います。 ODBCにSQL文の処理をさせず直接Oracle側にSQLを投げる方法としてパススルークエリという方法があります。 なのでパススルークエリを使えばうまくいくかもしれません。 コーディングは得意でないので怪しいサンプルですが、下記のような感じでどうでしょう？ （実行環境がないので試せていません。） === Dim dDB As Database Dim sSQL As String Dim rRS As Recordset Dim ConnectStr As String ConnectStr= "ODBC;DSN=XXX;UID=XXX;PWD=XXX;" sSQL = "SELECT /*+ index( テーブル名　インデックス名) */ * FROM テーブル名 WHERE 各種条件 ORDER BY 順序指定" Set dDB = OpenDatabase("", False, False, ConnectStr) Set rRS = dDB.OpenRecordset(sSQL, dbOpenSnapshot, dbSQLPassThrough) ・・・ === もし、動作しないようであれば、パススルークエリについて調べて動くように修正してみてください。 === Your DBA MOTO:TAKER 参考URL：http://www.accessclub.jp/dao/OpenRecordset.html
(+)は、今回の場合だと ・「テーブル１ x」のレコードは全部出す。 ・他のテーブルの列は「テーブル１ x」に 紐付くデータをくっつけて表示 ・もしも紐付くデータが無い時はＮＵＬＬを表示という意味です。 ↓にコピペでそのまま動作する結合のgroup byを用意したので 参考にして下さい。 --------------------------------- with a as( select '001' as ID,1 as SAL from dual union all select '002',2 from dual union all select '003',3 from dual union all select '004',4 from dual ), b as ( select '001' as ID,1 as SAL from dual union all select '001',1 from dual union all select '003',3 from dual union all select '005',5 from dual ) --↓ここから重要 select b.ID,b.SAL from a,b where a.ID(+) = b.ID group by b.ID,b.SAL;
あんまり声に出していうことは無いですが、必要なときは「たて棒２本」などと言いますかね。 英語でも「Vertical bar」みたいですから、そのまま「縦棒」ですね。 http://ja.wikipedia.org/wiki/%E3%83%90%E3%83%BC% … ちなみに、プログラミング言語では「または」の(短絡の)論理演算子として使われることが多いですね。
tnsnames.ora, listener.ora たしかに、いろいろと分かりにくいですよね 今回のエラーは ORA-12514: TNS:listener でありますので、 DBサーバ側の tnsnames.oraは関係ありません。 listener.ora そして DBNAMEの問題です。 listenr.oraは、TNSリスナーの設定ファイルです。 質問に書かれているリンク先から、 Oracle Database 10g Release 2 (10.2.0.3/10.2.0.4) Enterprise/Standard Edition for Microsoft Windows Vista and Windows 2008 をダウンロードして、インストールしたと理解しました。 >tnsnames.oraファイルというのは、クライアント側で設定するものではないのでしょうか その通りです。詳細は異なりますが、おおまかに、 tnsnames.oraは、クライアントで設定します。 そして、サーバー側で設置するものが、 listener.oraです。 not currently know of service とあります。 これは、 サーバーのlistener.oraが設定している、Service名と、 クライアントの tnsnames.oraが設定いる Service名が一致しな いことを意味しています 9i(正式には8i)以降は、listener.oraの中にサービス名を記入せず、 動的リスナーであることが多いので、今回は、すでに起動中の リスナーから確認してみましょう ◆実際にやってみましょう DBサーバー側で コマンドプロンプトを起動してください C:\Users\MOTOTAKA>lsnrctl LSNRCTL for 32-bit Windows: Version 10.2.0.3.0 - Production on 08-10月-2009 Copyright (c) 1991, 2006, Oracle. All rights reserved. LSNRCTLへようこそ。詳細は"help"と入力してください。 ◆状況を確認します LSNRCTL> status (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1)))に接続中 リスナーのステータス ------------------------ 別名 LISTENER バージョン TNSLSNR for 32-bit Windows: Version 10.2.0.3.0 - Pr 開始日 08-10月-2009 23:57:00 稼働時間 0 日 0 時間 0 分 48 秒 トレース・レベル off セキュリティ ON: Local OS Authentication SNMP OFF パラメータ・ファイル C:\oracle\product\10.2.0\db_1\network\admin\listener ログ・ファイル C:\oracle\product\10.2.0\db_1\network\log\listener. リスニング・エンドポイントのサマリー... (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(PIPENAME=\\.\pipe\EXTPROC1ipc))) (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=MOTOTAKA-PC)(PORT=1521))) サービスのサマリー... サービス"ORCL_XPT"には、1件のインスタンスがあります。 インスタンス"orcl"、状態READYには、このサービスに対する1件のハンドラがあります サービス"PLSExtProc"には、1件のインスタンスがあります。 インスタンス"PLSExtProc"、状態UNKNOWNには、このサービスに対する1件のハンドラが サービス"orcl"には、1件のインスタンスがあります。 インスタンス"orclsid"、状態READYには、このサービスに対する1件のハンドラがあります コマンドは正常に終了しました。 LSNRCTL> いろいろありますが、この サービス"orcl"には、1件のインスタンスがあります。 インスタンス"orclsid"、状態READYには、このサービスに対する1件のハンドラがあります がサービス名です。ですので、この場合は、 サービス名が orcl この名称（大文字小文字関係なし）と、 クライアントの tnsnames.ora　のサービス名を合わせる必要があります。 ちなみに、 SID(インスタンス名)が orclsid になります。 ◆　クライアントの tnsnames.oraをみてみます MMM = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = 127.0.0.1)(PORT = 15211)) ) (CONNECT_DATA = (SID = XE) ) ) このようになっていたら、 サービス名接続ではなく、SID接続になります。 よって、サービス名 orcl で接続させためには、 MMM = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = 127.0.0.1)(PORT = 15211)) ) (CONNECT_DATA = (SERVICE_NAME = ORCL) ) ) としてください。 サービス名は、大文字小文字関係なしです。 これにより、 今回のエラー ORA-12514: TNS:listener は、解決します Your DBA MOTO:TAKER
DBMS_METADATA.GET_DDLはスキーマオブジェクトの参照なのでTABLESPACEは見えません。 代わりに、alert.logにCREATE TABLE SPACE文の一部が記録されているはずです。 CREATE USERもわかりません。
検索できるようにするのは、他の方の回答でよいです。 しかし、ディクショナリには以下の種類があり、それぞれ参照可能な範囲が違ります。 dba_ :DB全体 all_ :自分の所有物及び権限付与された物 user_ :自分の所有物のみ 本当に「TEST01」というユーザにDB全体のディクショナリ情報を見せてもよいのでしょうか。そういう作業はDBA権限を持つ管理者ユーザでやるべきではないでしょうか。 また、ある処理でどうしてもDBA_XXXを参照しなければならないのであれば、個別のディクショナリにSelect権限を与えることで、権限を最小限にした方がよい気がします。
テーブルアクセス1回で済みます with a as( select id,年月1,年月2,count(*)over(partition by 年月1,年月2) co from tbl_temp ) select * from a where co >= 2
> 『ORA-25154: USING句の列の部分には修飾子を持てません』 先に例示したSQLのUSING句には、修飾子は無いのですが・・・。 「 USING(ID) 」の部分を 「 USING(グループ表.ID) 」などと変更しては無いでしょうか？ USING句と同じことを ON を使っても書けますので、そうした場合はどうでしょうか？ 例) -------------------------------------------------------------- SELECT グループ名, SUM(CASE WHEN 売上額 IS NULL THEN 0 ELSE 売上額 END) FROM グループ表 LEFT OUTER JOIN 売上表 ON(グループ表.ID = 売上表.ID) GROUP BY グループ表.ID, グループ表.グループ名 ------------------------------------------------------------------ ちなみにUSING句のカラムには表名修飾はできません。 http://okwave.jp/qa4871143.html
経験からすると、 本で漠然と書かれているようなSQLをただやっても やっぱり必要に迫られないので、あまり経験値たまらないです。 もし、現場で役立つようなSQLを書けるようになりたいのであれば、 「こんな用途のSQLを作りたい」って決めて、 それを作ってみるのが現場で 役立つSQLを書けるようになる第一歩でないかと。 単純なSQLなら、 　表作成、View作成、MView作成、 　ユーザー作成、権限付与、ロール作成 　表へのUpdate,Insert,delete,select 　表定義の取得 descコマンドだったり、dba_xxx表やV$表の情報確認とか。 ちょい運用系なら、 　デッドロックの発生させるSQLと、発生時のロック解除SQLとか、 　SHRINKやIndexのリビルド、統計情報の取得、DBのリカバリーとか、 　監視系（表領域閾値超過とか、トリガーやAuditかけて監査とか）の 　スクリプトを作ってみるとかね。 HPで参考にしたいなら、「SAK Streets」をgoogleって見るとかもいいですね。 あとは、他人が作ったスクリプトを参考にして見るのも勉強になります。 すぐには全部は覚えられないので、 とにかく、身の回りに必要となる運用SQLから覚えていくってのが普通ですね。 いきなり難しいSQLよりはまず、基本がわからないと応用も利かないかと思います。 結構、DBの内部構造とかも把握しておくのも、SQLを作成する上で重要だったりします。
項目Ｂがパーティションキーなので、パーティションプルーニングによる絞込みが効きますね。 よって、項目Ｃのローカルインデックスが一番効率が良くなると思います。 B+Cのグローバルインデックスでも遜色ないアクセス速度が出ますが、インデックス長が大きくなる分データサイズがより大きくなって、キャッシュもより多く消費するのと、パーティション削除などのパーティションメンテナンスをする場合にグローバルインデックスだとインデックスリビルドが必要となるので、この場合、Cローカルが勝ります。 しかし、試せないというのはよろしくないですね。 本番環境以外は貧弱すぎてデータが入らない、などでしょうか？ Oracleはパフォーマンス面では理論やサポートの回答だけではなかなか判断がつかないことが多いため、かならず実践での裏づけを得て対処を選択すべきと考えています。 サーバに入れられないのであれば、開発用PCにエクスプレスエディションを入れるなりして、トレースをかけて実際のブロックアクセス数を確認したいですね。
おそらくスペースです。 長くなってる項目をcol 項目 for ○○とすればなおるかもしれません。
「termout」という、ファイルから実行したコマンドの出力表示を抑止するパラメータがあります。 set termout off　を実行してから、SQLスクリプトでスプールすれば画面には表示されません。 これらのパラメータはSQL*Plusのマニュアルに記載されています。
＞いったんデリートしたという事実はアーカイブログかなんかで わかるんですよね？ アーカイブログでも分かりますが、SQL監査（audit）を有効にしていると、詳細に記録が残ります。本番DBということであれば恐らくある程度の監査をかけているのでは？と思います。 （ロールバックしても記録が残ります） 仕事での出来事はちゃんと報告をしましょう。 隠しても何もよいことはありません。きちんと報告をして次への対策を上司を練ってください。そうすれば、ミスを責められることよりも、むしろ信頼を得る結果になると思います。 逆に、黙っていて監査ログを確認されたら・・・、非常によろしくありません。 本番環境でのデータ更新作業は、 ・事前バックアップを取る ・作業のログを取る ・作業内容の手順書やスクリプトを事前に作成し、関係者でレビューする ということをぜひ行ってください。 いまこういうことが行われていないなら、ぜひ提案しましょう。 「急いでいるから」というのは、スピード違反で事故を起こすようなことになるので、大事件が起こる前に改めましょう。 本番での作業準備や作業に十分な時間を与えられないなら、上司に必要性を強く訴えましょう。
select * from DB where telno1||telno2||telno3 = replace( n1 ,'-','') ;
DBの容量は、意外と分かりやすいものです でも、Enterprise ManagerなどのGUIをつかよりも、 SQL を使ってコマンドで調べてみましょう ◆ お答えします まず、DBのデータは、ファイルに格納されています ASMのケースもありますが、まずは、通常のファイルシステムの 場合でお答えします DB容量は、 [______________________________________] まず、このように全部で格納でいるファイルを作ります。 そのファイルを、データファイル　といいます。 そのデータファイルをまとめた入れ物が テーブルスペースといいます。日本語では、表領域です。 そして、その表領域に、テーブルを作成して、行を格納します [■■■■■■__________________________] このように格納されます。（イメージ図です） この時、２つの尺度があります。 １つ目は、 データファイルがまとまった表領域のサイズがどれくらいで、 その内、どれくらの割合を使われているか ＊これは、あとどれくらいで満杯になるかが分かります [■■■■■■__________________________] であれば、３０％ぐらいでしょうか・・・ ２つ目は、 データファイルがまとまった表領域の中で 既に使用済みのテーブルの、空き具合は、どうなっているのか？ ＊これは、どれくらい、無駄に使っているのかが分かります 実際の現場では、１つ目の確認だけをやれば まず大丈夫です ◆　では、実際にやってみましょう データファイルがまとまった表領域のサイズがどれくらいで、 その内、どれくらの割合を使われているかを求めるSQL文 select ddf.TABLESPACE_NAME, ddf.BYTES, ddf.BYTES-DFS.BYTES "BYTES_USED", round(((ddf.BYTES-dfs.BYTES)/ddf.BYTES)*100,2) "PERCENT_USED", dfs.BYTES "BYTES_FREE", round((1-((ddf.BYTES-dfs.BYTES)/ddf.BYTES))*100,2) "PERCENT_FREE" from (select TABLESPACE_NAME, sum(BYTES) bytes from dba_data_files where autoextensible='NO' group by TABLESPACE_NAME) ddf, (select TABLESPACE_NAME, sum(BYTES) bytes from dba_free_space group by TABLESPACE_NAME) dfs where ddf.TABLESPACE_NAME=dfs.TABLESPACE_NAME order by ((ddf.BYTES-dfs.BYTES)/ddf.BYTES) desc 実行結果 列の意味 TABLESPACE_NAME 表領域の名前 BYTES 　　　　　　表領域のサイズ BYTES_USED 　　　　表領域の使用済みサイズ PERCENT_USED 　　　使用済みの割合 BYTES_FREE　　　　まだ使えるサイズ WHERE句の意味 where autoextensible='NO' これは、データファイルの空きが０になったら、 自動拡張するかどうかです。これが、NOなので 今回は自動拡張しないものを、SELECTしています TABLESPACE_NAME BYTES BYTES_USED PERCENT_USED BYTES_FREE ------------------------------ ---------- ---------- ------------ ---------- PERCENT_FREE ------------ APPS_TS_SEED 3126853632 3061055488 97.9 65798144 2.1 APPS_TS_TX_DATA 5956042752 5764939776 　　　　 96.79 191102976 3.21 SYSAUX 497745920 468385792 94.1 29360128 5.9 APPS_TS_TX_IDX 8112570368 7470710784 92.09 641859584 7.91 今回のサンプルでは、 どれも９０％を超えているので、これから表領域のサイズを広げる必要がありますね・・・ 表領域を広げるには、 　　データファイル自体のサイズを広げる 　　新たに別のデータファイルを追加する などがあります。 Your DBA MOTO:TAKER
お答えします ◆　実際にやってみます 動いているオラクルの場合は、v$versionで確認します 32bit版で実行 SQL> select * from v$version; BANNER -------------------------------------------------------------------------------- Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - Production PL/SQL Release 11.1.0.7.0 - Production CORE 11.1.0.7.0 Production TNS for Linux: Version 11.1.0.7.0 - Production NLSRTL Version 11.1.0.7.0 - Production 64bit版で実行 SQL> select * from v$version; BANNER -------------------------------------------------------------------------------- Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production PL/SQL Release 11.2.0.1.0 - Production CORE 11.2.0.1.0 Production TNS for Linux: Version 11.2.0.1.0 - Production NLSRTL Version 11.2.0.1.0 - Production 64bitの場合のみ、64bitの文字が見えます。 32bitの場合は、bit情報は、なにもでません。 この方法で、 32bitと、64bitが識別できます。 ◆　つづいて、停止している場合の確認方法です これは、Unix系だけですが・・・ binフォルダの下にある、oracleというファイルを、 fileで確認します 32bit版 [oraprod@ebsdb 11.1.0]$ cd $ORACLE_HOME/bin [oraprod@ebsdb bin]$ file oracle oracle: setuid setgid ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), for GNU/Linux 2.6.9, dynamically linked (uses shared libs), for GNU/Linux 2.6.9, not stripped 64bit版 [oracle@oralove bin]$ cd $ORACLE_HOME/bin [oracle@oralove bin]$ file oracle oracle: setuid setgid ELF 64-bit LSB executable, AMD x86-64, version 1 (SYSV), for GNU/Linux 2.6.9, dynamically linked (uses shared libs), for GNU/Linux 2.6.9, not stripped これで、64bitであることが分かります ◆　続いて、お答えします >x64未対応のCPU上でOracle10g R2(64bit版)が正常に動くのかどうか 結論　　動きません 単純にファイル操作を行っているわけではなく、カーネルなどの 64bit, 32bitに関わりますので、動きません。 ただし、expdp/impdpであれば、別の環境に移行することは可能です Your DBA MOTO:TAKER
お答えします たしかに、Viewのソースを確認するのは、とってもムズイです。 dba_sourceから、Procedureなどのソースは簡単に出せるのに、 どうして、Viewだけは、ソースを簡単に出せないのでしょうね・・・ ◆　実際にやってみます Connected to: Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - Production With the Partitioning, OLAP, Data Mining and Real Application Testing options SQL> select * from v$version; BANNER -------------------------------------------------------------------------------- Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - Production PL/SQL Release 11.1.0.7.0 - Production CORE 11.1.0.7.0 Production TNS for Linux: Version 11.1.0.7.0 - Production NLSRTL Version 11.1.0.7.0 - Production SQL> select view_name, text from user_views 2 where rownum = 1; VIEW_NAME ------------------------------ TEXT -------------------------------------------------------------------------------- AQ$DEF$_AQCALL SELECT q_name QUEUE, msgid MSG_ID, corrid CORR_ID, priority MSG_PRIORITY, decode ◆　確実に切れてますね。 LONG型である、TEXTをたくさん表示しまます set long 20000 を行います。 SQL> set long 20000 で、もう一度同じSelect文を実行します SQL> / VIEW_NAME ------------------------------ TEXT -------------------------------------------------------------------------------- AQ$DEF$_AQCALL SELECT q_name QUEUE, msgid MSG_ID, corrid CORR_ID, priority MSG_PRIORITY, decode (state, 0, 'READY', 1, 'WAIT', 2, 'PROCESSED', 3, 'EXPIRED', 10, 'BUFFERED_EXPIRED') MSG_STATE, cast(FROM_TZ (delay, '-08:00') at time zone sessiontimezone as date) DELAY, delay DELAY_TIMES TAMP, expiration, cast(FROM_TZ(enq_time, '-08:00') at time zone sessiontimezone as date) ENQ_TIME, cast(FROM_TZ(e nq_time, '-08:00') at time zone sessiontimezone as timestamp) ENQ_TIMESTAMP, enq_uid ENQ_USER_ID, enq_tid ENQ_TXN_ID, cast(F ROM_TZ(deq_time, '-08:00') at time zone sessiontimezone as date) DEQ_TIME, cast(FROM_TZ(d eq_time, '-08:00') at time zone sessiontimezone as timestamp) DEQ_TIMESTAMP, deq_uid DEQ_USER_ID, deq_tid DEQ_TXN_ID, retry_ count, decode (state, 0, exception_qschema, 1, exception_qschema, 2, exception_qschema, NULL) EXCEPTION_QUEUE_OWNER, decode (state, 0 , exception_queue, 1, exception_queue, 2, exception_queue, NULL) EXCEPTION_QUEUE, user_data, decode (st ate, 3, decode (deq_tid, 'INVALID_TRANSACTION', NULL, exception_queue), NULL) ORIGINAL_QUEUE_NAME, decode (state, 3, decode (deq_tid, 'INVALID_TRANSACTION', NULL, exception_qschema), NULL) ORIGINAL_QUEUE_OWNER, decode(state, 3, decode(deq_time, NULL, decode(deq_tid, NULL, decode (expiration , NULL , 'MAX_RETRY_EXCEEDED', 'TIME_EXPIRATION'), 'INVALID_TRANSACTION', NULL, 'MAX_RETRY_EXCEEDED'), NULL), NULL) EXPIRATION_REASON FROM "DEF$_AQCALL" WHERE state ! = 7 AND state != 9 WITH READ ONLY でました。 Your DBA MOTO:TAKER
インストールのときにポート番号に変な値を入れてませんか？ すでに使用されているポート番号を入れたりすると、 リスナーインストール自体がうまくいきません（経験談） 通常はデフォルト値で問題ないと思いますが・・・・
これはOracleの問題ではなくＯＳやＯＳの標準的スクリプトの問題です。 Oracleが稼働しているＯＳの名前とバージョンによって回答が 違うのですが、コマンドがexp80ということで多分Windows系？ exp80 system/***@orcl file=EXP%DATE:~0,4%%DATE:~5,2%%DATE:~8,2%.DMP とか exp80 system/***@orcl file=EXP%DATE:~8,2%.DMP でどうでしょうか？
質問は、３テーブルの外部結合についてではなかったのですか？ とりあえず・・ フィールドの区分を含めた名前が、フィールド１ａ～１ｊ、２ａ～２ｊ、３ａ～３ｊ、４ａ～４ｊだとして・・ select x.店舗コード, x.フィールド１ａ+x.フィールド１ｂ+x.フィールド１ｃ+～～+x.フィールド１ｊ "フィールド１ｎ", x.フィールド２ａ+x.フィールド２ｂ+x.フィールド２ｃ+～～+x.フィールド２ｊ "フィールド２ｎ", x.フィールド３ａ+x.フィールド３ｂ+x.フィールド３ｃ+～～+x.フィールド３ｊ "フィールド３ｎ", x.フィールド４ａ+x.フィールド４ｂ+x.フィールド４ｃ+～～+x.フィールド４ｊ "フィールド４ｎ", y.フィールド５, z.フィールド６ from テーブル１ x,テーブル２ y,テーブル３ z where ～ な感じで書けば良いのかと思います。
こんなんでも select * from 品番テーブル a where not exists ( select 1 from 品番テーブル b where a.会社=b.会社 and a.発売日<b.発売日 ); select a.* from 品番テーブル a inner join (select 会社,max(発売日) 発売日 from 品番テーブル group by 会社 ) as b on a.会社 = b.会社 and a.発売日=b.発売日 order by a.会社;
以下のような構成を考えてみて下さい。 クライアント 　　　　↓ サーバ　↓ 　リスナー 　　　　↑ 　インスタンスfoo(SID=foo)　インスタンスbar (SID=bar) 上記の環境では、サーバ上にインスタンスfooとbarの２つが起動していま す。でも、リスナーは独立したプログラムですので、起動した時点で同一 サーバ上にどのようなインスタンスがいるかを知りません。 そこで、 インスタンスfooの初期化パラメータにservice_names=foo.example.com、インスタンスbarの初期化パラメータにservice_names=bar.example.com を設定します。 この動作は、インスタンスfooはリスナーに、「foo.examples.comを指定してクライアントが接続して来た場合、そのコネクションは私宛だから私に渡 してね」とリスナーに指示します。 同様に、インスタンスbarはリスナーに、「bar.examples.comを指定してク ライアントが接続して来た場合、そのコネクションは私宛だから私に渡 その結果、クライアントが service_name=foo.example.comを設定した接続記述子を使ってサーバに 接続した場合、インスタンスfooにつながり、 service_name=bar.example.comを設定した接続記述子を使ってサーバに 接続した場合、インスタンスbarにつながります。 一方、net_service_nameはエイリアスです。 接続するたびに、 scott/tiger@(DESCRIPTION= (ADDRESS=(PROTOCOL=tcp)(HOST=test)(PORT=1521)) (CONNECT_DATA= (SERVICE_NAME=service_name)))※ みたいなことを書くのは大変なので、別名net_service_nameを tnsnames.oraに定義しておくことで、 scott/tiger@net_service_name と簡単な記述ができるようになります。 ※このような書き方ができるか否かは分かりませんが、 　意味合い的に理解していただければと思います。
既にテーブルが存在する状態での話であれば・・ テーブルの所有者を指定してインポートすればＯＫかと。 （既に存在するテーブルへのインポートは、IGNORE=Yオプションを指定すればＯＫです）
こんにちわ。 > テーブルとマテリアライズドビューをどのように使い分ければ > よいのでしょうか？ マテリアライズド・ビュー (MV) は、元になるテーブルを予め集計・結合を 行ってデータを保持します。 元々、データ・ウェアハウス等、大量のデータを集計・結合行う場合は 事前にサマリ表を作成して集計・結合を行っておく事がありました。 MVは、これをOracle が行ってくれる機能です。 例：売上履歴 (表), 店舗マスタ (表) --> 月別・地域別売上実績 (MV) また、リフレッシュ (元表に対して行われた更新のMVへの反映) の仕組みも 提供してくれています。 また、MV が定義されている場合、可能であれば元表への問合せをMV を 使った問合せにOracle が内部で問合せの書換えを行ってくれます。 そのため、アプリケーションからはMV の有無は透過的に扱われます。 > また、マテリアライズドビューは、Oracle10g 11gなどでもあるのでしょうか？ 当然、10g, 11g でもサポートされています。
>CONVERT関数やCHR関数などの変換関数は不要です SJISで運用しているので、変換は要らない、という意味ですか？ データベースキャラクタがSJISでない場合は、CONVERT関数を使って、 SJIS化した文字列を作らないと、SJISのコード値は得られませんよ。 SJISの文字列であれば、ASCII関数で１０進のコード値は１文字づつ取れると思いますよ。 （１６進のコード値が欲しいなら、RAWTOHEX関数で）
>> ○対象表のNextExtentsおよびMIN_EXTENTS、PCT_INCREASEの現在の値は？ >エクスポートしてきたダンプファイルから取得したCREATE文から抜き出しました。 >INITIAL 524288 >NEXT 524288 >MINEXTENTS 8 >MAXEXTENTS 2147483645 >PCTINCREASE 50 その対象表を事前にCREATE出来ますか？ できるなら表を作成しておいてIGNORE=YでIMPを実行できますが。
CREATE USER文のACCOUNTは、昔はありませんでした。 やたらと、セキュリティがうるさくなって出てきました ◆ お答えします 自分でユーザを作成する場合には、ACCOUNT句は不要です。 気にしないで良いです。 ◆　では、どんな時に必要になるかというと、 たとえば、最初にデータベースを作成したときに、 SCOTTなどのユーザを作って（しまって）、そのユーザを 有効にしていないとき、 にAccount句を使います。 SCOTTユーザを使いたい場合は、 ACCOUNT句を使って、ユーザを有効にします 逆に不要なユーザなんだけど、削除するのは、ちょっと 怖いなーという場合は、 ACCOUNT句を使って、ユーザを無効にします ◆ 実際にやってみます アカウント状態の確認 SQL> select username, account_status from dba_users; USERNAME ACCOUNT_STATUS ------------------------------ -------------------------------- ZPB OPEN PRP OPEN EDR OPEN ZSA OPEN ORACLE_OCM LOCKED AD_MONITOR EXPIRED & LOCKED SPATIAL_CSW_ADMIN_USR EXPIRED & LOCKED した半分がロック状態です。 ですので 下記のようにログインしてみても、 SQL> conn oracle_ocm/oracle_ocm ERROR: ORA-28000: the account is locked Warning: You are no longer connected to ORACLE. と、ORA-28000　が出て、　ロックしてるからログインできません とでます では、このロックを解除してみます SQL> alter user oracle_ocm account unlock; User altered. 変更できました 接続してみます SQL> conn oracle_ocm/oracle_ocm ERROR: ORA-01017: invalid username/password; logon denied Warning: You are no longer connected to ORACLE. 今回は、ロックではなく、パスワードが違いますよ、 とエラーになりました パスワードがあっていれば、ログインできることがわかります ちなみに、先ほどの ACCOUNT_STATUSは、 SQL> select username, account_status from dba_users; USERNAME ACCOUNT_STATUS ------------------------------ -------------------------------- ZPB OPEN PRP OPEN EDR OPEN ZSA OPEN ORACLE_OCM OPEN AD_MONITOR EXPIRED & LOCKED SPATIAL_CSW_ADMIN_USR EXPIRED & LOCKED となってます Your DBA MOTO:TAKER
参考までに、 なぜ、「dba_free_space」 を確認するようにいったかというと、 「（「DBA_FREE_SPACE最大BLOCK_ID」- 1) × 8K」 がデータファイルのResize可能サイズなので。 (8Kは初期化パラメータのブロックサイズと同じ値を随時設定）。 上記で出した値をMBにして以下を実行すれば、 alter database datafile 'x:\xxxx\xxxx.dbf' resize xxM; データファイルの縮小が可能なので、 あまり大きくなりすぎてたら、縮小（DatafileのResize）もいいかと 思ったので。
-------------------------------------------------------------------------------- DECLARE str VARCHAR2(2000); BEGIN DBMS_OUTPUT.PUT_LINE('----結果------'); FOR i IN 1..10 LOOP select dummy into str from dual; DBMS_OUTPUT.PUT_LINE(i||':'||str); END LOOP; END; ----結果------ 1:X 2:X 3:X 4:X 5:X 6:X 7:X 8:X 9:X 10:X PL/SQLが実行されました(0 msec.) --------------------------------------------------------------------------------
全バックアップファイルと制御ファイルがリストアされている状態で mountまでできているということなので、 1. SQL> startup mount 2. SQL> recover database until cancel; 3. SQL> alter database open resetlogs； リカバーかけて戻せるところまで戻して、 SCN番号一緒にしてオープンしてみればどう？ また、なんかオープンできないなら出来ないなりに、 Alertログとか、画面メッセージも記載したほうがよいかと。
> 1．会社CD、部署CDは、システムを利用する会社側が意識しない、システム管理上のCDとした場合でも、異なる会社で同じ部署CDを付けられないのは、パターン（2）の欠点となるのでしょうか？ ユーザが目にしないシステム管理上のCDならば、(1)と(2)はほとんど違いません。 > 2．パターン（1）、（2）をそれぞれ見た場合、業務の違いの差というものを読み取れるものでしょうか？パターン（1）、（2）の違いは、業務の違いにより使い分けを判断するレベルの内容になるのでしょうか？ 業務とは無関係です。マスタ間の親子関係が維持されれば、どちらでも同じだけのことができます。
移行方法などの詳細は、OTN上の「アップグレード・ガイド」を参考にするのが 良いと思います。 (ttp://otndnld.oracle.co.jp/document/products/oracle10g/102/doc_cd/index.htm） 移行考えるのなら、 -------------------------------------------------------------- ○移行にかけられる（DBを停止しておける）時間。 ○移行元のデータ総量 ○移行先に適用されている個別パッチや隠しパラメータの修正内容が 　アップグレードするバージョンで修正されているか、 　修正されていないなら、そのバージョンの個別パッチが用意されているか。 ○既存で使用している機能が移行先で使用できるかどうか。 ○アップグレードするにあたり、既存不具合がないか、 　非推奨パラメータはないか、OISC上で確認。 -------------------------------------------------------------- ってところが一番重要な確認箇所でないかと。 （当然、データ量が多ければ、Export・Importは無理。 　また、サーバーが用意できなければ、既存DBをアップデートするしかないし、 　DBをなかなかとめられないのであれば、一度複製作って、 　ある段階でどんと移行するしかないので。） （DBアップグレード時には既存不具合などかなりあり、 　また、10gで廃止になったパラメータなどは数多くあります。 　また、新規に追加された機能を使用するかどうかなどの判断や、 　既存の運用で使用している機能がバージョンアップ後でも 　使用できるのかって確認は重要ですね） この結果により、移行前バックアップ方法、移行方法、 移行中の並行期間運用をどうするかといった内容を決めます。 さくっとどんな移行方法があるか概要を説明すると、 --------------------------------------------------------------- 1.「新規に10gのDBを作成しておき、そこに移行」する方法 新規に10gR2をインストール。 　既存DBからデータを移動。 　　Exportして、新規DBにImport、 　　トランスポータブル表領域を使用 　　データファイル、制御ファイルを移動してデータ移行。 2.「既存の9iDBをそのままアップグレード」 　タイトルのとおり、複製を用意せず、自前のDBをバックアップしておいて、 　そのままDBのバージョンアップを実施。 3.「DBを複製後、Upgrade」する方法 現行のDBのバックアップを元に、新規作成のDBサーバに複製を事前に作成しておく。 現行DBを停止し、現行DB停止前までのアーカイブログを複製先に適用。 　複製先のDBをアップグレード。 --------------------------------------------------------------- こんなところでしょうか。 あまり詳細なところまで記述するとサポート規約に引っかかる可能性があるので、 どのパラメータがとか、どのようなエラーがとかっていうのは、 きっとみんなここには記述できないと思うので、詳細はサポート使用するなり、 ベンダー使用するなりするのがよいかと思います。
簡単な方法なら、 Oracle DBのデータをCSVで抜いて、MySQLに取り込むのでもいいし、 MS-AccessでODBC接続して、Excelファイルにして、 MySQLにODBCで接続して貼り付けすればいいのではないかと。 結局のところ、 Oracle側の質問っていうより、 取り込み側のMySQL側がどんなデータくれれば取り込みできるのかっていう MySQL側の質問ですね。 この質問は。
個人的には、9iでいいんでないかなと思います。 Oracleの基本的なところって、9iベースでいいと思いますし。 （SQL + Oracle入門) 11gのブロンズとっても、9iのSilver fellowでも、 実際のところ、実務経験なきゃ意味ないですし。 10gとか11gだと、Oracle Enterprise Managerが 9iのものとは、全く別ものなので、 実機が無い状態で勉強しても身につかないので 眠くなるだけなんでないかと思います。 新機能やらパラメータとか、Logの場所の位置が違ってたりもするので、 実物がないとイメージがつきずらいし、 単に資格取るだけの勉強で終わってしまいますので。 心配されなくても、最初のとっかかりさえ教えれば、 11gとか使用するようになった段階で、 協力会社の方は、自分で勉強すると思いますよ。DBAなら普通。 それにわざわざ、それだけのために黒本やら白本やら購入するのも どうかとは思いますし。昔の教材そのまま生かして教えればいいのではないかと。
各サーバー上のlistener.log見れば、 どこから、どんなアプリケーションで接続してきたのか、 わかりませんでしょうか？ 現行PCの接続先インスタンス名を確認したいのなら、 「select instance_name from v$instance;」で 自分の接続しているインスタンス名がわかるので、 どのサーバー上のインスタンスに接続されたのか、 わかるかと思います。
１クエリで、という事なら無理です。 各クエリの末尾にセミコロン付けて、SQL/Plusに一気に貼り付けるのはダメなのでしょうか？ COMMENT ON COLUMN DB_USER_MST.DB_USER_ID IS 'お客様ID'; COMMENT ON COLUMN DB_USER_MST.DB_PASSWORD IS 'パスワード'; COMMENT ON COLUMN DB_USER_MST.DB_NAME IS 'お名前'; COMMENT ON COLUMN DB_USER_MST.DB_POSTCODE IS '郵便番号'; COMMENT ON COLUMN DB_USER_MST.DB_PREFECTURE_ID IS '県ID'; COMMENT ON COLUMN DB_USER_MST.DB_ADDRESS IS 'ご住所'; COMMENT ON COLUMN DB_USER_MST.DB_TELEPHONE IS 'お電話番号'; COMMENT ON COLUMN DB_USER_MST.DB_SEX IS '性別';
回答番号：No.1の者です。 補足といいますか、こちらの方が パフォーマンスはよいかもしれません。 select 　HOGE.A 　,HOGE.B 　,HOGE.C from 　TBL_HOGE 　join　( 　　　　　select 　　　　　　min(A) as A 　　　　　　,B 　　　　　from 　　　　　　TBL_HOGE 　　　　　group by 　　　　　　B 　　　　)　TMP 　on　　TMP.B = HOGE.B order by 　TMP.A 　,HOGE.B ご参考までに。
#1です。すいません。Oracleのカテコでしたね。 他のと混同してしまいました。 http://www.shift-the-oracle.com/sql/functions/to … ここ見てください。 to_char関数を使って編集します。この関数は日付の編集などにも 使う便利な関数です。
どこまで詳しく書けばいいのか不明ですが、 接続識別子を使用しなければ、リスナは使用されないと思いますが、 その場合、sqlplus専用のOracleのサーバープロセスが起動します。 このサーバプロセスはsqlplusの子プロセスとなりますので、sqlplusとサーバプロセス間でパイプが設定され、セッションが生まれるのだと思います。 こういう説明でいいでしょうか。 それとももっと別のクライアントアプリケーション(プログラム)からの接続についての話？かな…。
エラーメッセージを見る限り、SQL解析・実行で固まって（？）しまって、回答を待ちきれなくてネットワーク側の機器等でタイムアウトが発生し、セッションを強制的に切られているようにも思えます。 nas02さんのように実環境で検証している訳ではないのであてずっぽうですが、実行計画・コストの差を比較すること、ネットワーク機器・ミドルウェア設定で最短のタイムアウト時間との関連を調査される事をオススメします。 条件の書き方もありますが、SQLの形を見る限り、オプティマイザがそんなに悪化するようなことは無いと思います。 なので仰るとおり、私も索引やパーティション等、リソース環境に原因があるように思います。が、もし切断している原因がネットワーク側に無ければサポート対応か、SQLの形を変えて回避するしか無さそうですね。
こんにちは。 すこし考えれば、こうなって同然の結果と思います。 > Aの4件（Aのみ存在）+（3（Bの件数）×3（Cの件数）×3（Dの件数））=29件 これは31件の間違いと思いますが、これを以下のように考えるとしっくり来ると思います。 Aの4件（Aのみ存在）+（1（Aの件数）×3（Bの件数）×3（Cの件数）×3（Dの件数）） AとBで7件、これにCが加わって13件、更にDが加わって31件となります。 Aの1件のデータに対してB,C,Dのデータが3件ずつ増えていくのでこうなります。 もし、AのKOUOMKUNOが主キーになっていなくて、1のデータが2件あったら 4＋（2×3×3×3）＝58件　となります。 逆に、B,C,DのKOUMOKUNOが主キーで1のデータが1件ずつだったら 4＋（1×1×1×1）＝5件　となるはずです。
insertで失敗しているのか、selectで失敗しているのか、確認できていますか？ dump関数で、格納されている内部コードを表示できるので、もう一度確認した方が良いような気がします。 （問題の切り分けが適切でないと余計な時間がかかるので・・） 例） select dump(項目,1016) from hoge;
order by 指定なら何番目の列って指定も出来るので以下のようにも 指定できるでしょう。 select A.カラム1,'Aのテーブルだよ' from A union select b.カラム1,'Bのテーブルだよ' from b order by 2 それか、列名をつければテーブルから抽出してきたデータと なんら変わりなく使うことが出来ると思います。 select A.カラム1,'Aのテーブルだよ' hoge from A union select b.カラム1,'Bのテーブルだよ' hoge from b order by hoge
＞全く上手くデータをこの形で出すことができません。 現状の情報くらい書きましょうよ。 SQL> select A ||'(' || IS || ')'|| B from table1; select A ||'(' || IS || ')'|| B from table1 * 行1でエラーが発生しました。: ORA-00936: 式がありません。 なぜ「(」「)」が出てくるのでしょうか。 なぜ、この括弧の方はシングルコートで囲って文字列として扱っているのに、なぜISをシングルコートで囲わないのでしょうか。 ISをくくってあげれば以下のようになります。 SQL> select A ||'(' || 'IS' || ')'|| B from table1; A||'('||'IS'||')'||B ------------------------------------------------- 1(IS)XXX 要件を満たすには以下となります。 文字列として扱うので、数値型のaをto_charする。 ※前ゼロをどうするとか指定があれば、書式マスクで設定します。 コンキャット（||）で文字列 ' is 'と連結する。 ※ちゃんと、' '空白をいれること。 コンキャット（||）で文字列型のbと連結する。 SQL> select to_char(a) || ' is ' || b from table1; TO_CHAR(A)||'IS'||B ------------------------------------------------- 1 is XXX
サービスの削除ってなにのことでしょうか？ Windowsのサービス？ Crystal Reportで使っているODBCのこと？ 内部コードエラーってなにが出しているの？ オラクルのDBMS（だったらORA-600のようなエラーコードを教えて）？ VB6のアプリケーション？ Crystal ReportのODBC部分？
最強のクライアントツールというのは知りませんが、Oracleがフリーで配布している 「Oracle SQL Developer」でPL/SQLの開発をした事があります。 普通に開発するには、これで十分でした。 勿論、ステップ実行やブレイクポイント設定、変数の値の表示等、デバッグに必要な機能は最低限あります。 このツールの利点は、Oracle Clientをインストールしていなくても動かせる事でしょうか。 フリーなのでOracleは基本的にサポートしませんが、結構バグフィックスをしています。 インストールも基本はモジュール一式のファイルコピーで済みます。 また、Javaで作られているのでLinux上などでも動かせます。 尚、Oracle 11gからこれの旧版を標準でインストールしています。 もし使った事がないようでしたら一度使われてみては如何でしょうか？ http://www.oracle.com/technology/global/jp/softw … http://www.oracle.com/technology/software/produc … ※ご存知だと思いますがダウンロードするには会員登録が必要です。 マニュアルはこちらからどうぞ。 http://otndnld.oracle.co.jp/document/products/sq …
select k.番号 as 番号 ,k.名前 as 名前 ,(select s.身長 from 身長 s where k.番号 = s.番号 and not exists ( select 1 from 身長 s2 where s.番号 = s2.番号 and s.更新<s2.更新)) as 身長 ,(select t.体重 from 体重 t where k.番号 = t.番号 and not exists ( select 1 from 体重 t2 where t.番号 = t2.番号 and t.更新<t2.更新)) as 体重 from T個人 k; でも
REPLACE関数は、文字列中の指定文字(または指定文字列)を置換します。 置換先を、''とすれば、空白文字を削除することになります。
＞Export／Importでバックアップ／リストアをする方法と 主な用途：ユーザ単位、オブジェクト（テーブルなど）単位など論理的な復旧・リカバリ等に使用します。 ＞RMANでバックアップ／リストア・リカバリする方法 主な用途：サーバ全損、データファイル破損、コントロールファイル破損、表領域破損、など主に物理的な復旧・リカバリに使用します。
同バージョンのオラクル間での移行の場合、 コールドバックアップからもどすのが適切です。 １、サーバ（Ａ）をシャットダウン。 ２、データファイル、パラメータファイル、ネットワークファイルをバックアップ。 ３、サーバ（Ｂ）にて（Ａ）と同じフォルダ構成にする。 ４、２のバックアップを全てサーバ（Ｂ）にコピー。 ５、サーバ（Ｂ）でstartup コールドバックアップからのリカバリと同じです。 必要フォルダ・ファイル郡に不足がないように確認は必要です。
setup.exeはwindowになるはずです。 本の説明等にもあったような・・・・？ 基本的に、本の付録のＣＤを使わなくても ＯＴＮのサイト↓　でダウンロード可です。（無料） http://www.oracle.com/technology/global/jp/index … 使用期間等の規約は読んでおいてください。 サポートの有無は別として、fedoraでもインストールは大丈夫かと思います。 ↑　一般的にオラクルを知っている人達の世界では常識の範囲です。 頑張ってください。
実際受けてみるとわかりますが、PL/SQLの試験とデータベースの試験は殆ど被る内容がありません。 認定する技術がプログラミングだから当然といえば当然です。 この試験の合格に必要なのは、PL/SQLの構文とPL/SQLでできないことを明確に把握していることであって、それ以上ではありません。 （処理効率のいいモジュールを書く能力は問われません） だから、PL/SQLを受けて構わないと思いますよ。
C:\WINDOWS\system32\drivers\etc\hosts に ipアドレス　　　　ホスト名 例）192.168.100.50 DBSERVER を追記すると、ホスト名でもＯＫです。
OTN-Jでは、Oracle11gの30日間トライアル版を配布してます。 実際に期間制限があるかは不明ですが、試使用ライセンス契約上期間を延長して使うの不味いです。 雑誌や書籍には、だいたいこれが付属されているのではないでしょうか。 あまり知られてないのかもしれませんが、OTN-USでは学習目的であれば期間制限なしに無料で使ってよい事になっています。 ダウンロードするにはOTN-USの会員登録(OTN-Jとは別)が必要ですがこちらから入手される事をお勧めします。 OTN-USはこちらからどうぞ。 http://www.oracle.com/technology/index.html 以下にOTN-USの入会方法が書かれてます。 http://www.oracle.com/technology/global/jp/us_ac … 以下の冒頭に学習目的云々の事が書かれています。 http://www.oracle.com/technology/software/index. … Oracle11gはこちらからどうぞ。(最新の11.1.0.7.0をダウンロードしましょう) http://www.oracle.com/technology/software/produc … (※日本語にも勿論対応してます) 尚、マニュアルはOTN-Jから入手しましょう。(こちらの会員登録がまだなら入会しましょう) http://www.oracle.com/technology/global/jp/index … また専用の掲示板がありますので利用されたら良いです。 http://otn.oracle.co.jp/forum/index.jspa?categor …
＞以下の2つのSQLを比較してどちらがパフォーマンスが良いでしょうか。 ＞先に抽出して結合した方が良いと昔聞いた事がありましたが ルールベースの場合の話かも知れません（9i以前なら使用可能） コストベースオプティマイザを使用すると、内部結合のON条件とWHERE句とを同等に解析してくれるので、特に書き方来る性能差はないと考えればよいです。 (1)と(2)についてですが、「実行計画」をそれぞれ表示して比べてみてください。autotraceもよいですね。おそらく同じような結果が出ると思うのですが、基本的には(2)のような書き方はあまりすべきではありません。コストベースオプティマイザによる最適実行計画立案を妨げる恐れがある書き方だと思います。（もっと複雑なSQLだと、特に） 常に(1)のような書き方を心がけ、ベストの実行計画が出にくい場合にヒント句で調整するのが一番よい方法です。
#1さんのやり方は、一見出来そうですが残念ながらエラーとなります。 以下にも説明がありますが、前回のCURRVALを使うのは難しそうです。 http://otndnld.oracle.co.jp/document/products/or … (以下は抜粋です) セッションの中でCURRVALを参照する前に、NEXTVALを使用して数値を生成する必要があります。 NEXTVALを参照すると、現在の順序番号がCURRVALに格納されます。 トリガーで何をされたいのか分かりませんが、別の方法を考えられた方が良いと思います。
with x as( select a.*,'TABLE A' as tab from a union all select b.*,'TABLE B' from b ) select x.heisei,x.bangou,x.syubetu from x where x.heisei = 21 group by x.heisei,x.bangou,x.syubetu having count(*) = 1 ;
>SQL*PLUSは >使用するたびにコマンドから呼び出すのではなく >予めファイルを作成して次回からはこのファイルをクリックして >使用することができるのでしょうか？ >現在はＳＥから購入したシステムから紙ベースで >出力して手作業で入力を行っているため 手作業で「sqlplus ユーザ/パスワード」でログインして作業しているということでしょうか。 それではWindowsのバッチファイル内に以下のように記述して バッチファイルをダブルクリックすれば自動実行できます。 sqlplus ユーザ/パスワード @SQLファイル名 「sqlplus bat」で検索すれば例はたくさんありますよ。
参考書は翔泳社の「オラクルマスター教科書 Silver Oracle Database 11g DBA11g編」が 解説が分かり易くお奨めで、付録のCD「iStudy LE」を有料版にアップグレードして勉強、 問題集はインプレスジャパンの「徹底攻略ORACLE MASTER Silver DBA11g 問題集」を 勉強しておくと合格は固いと思われます。私はこれで受かりました。 特に「iStudy」有料版の問題は本番でもそこそこ出題されましたのでお金はかかりますがお奨めです。 http://www.amazon.co.jp/%E3%82%AA%E3%83%A9%E3%82 …
テーブルスペースの管理方法はなんですか？ ローカル管理かつUNIFORMになっているのではないでしょうか。 http://otndnld.oracle.co.jp/skillup/oracle9i/2_1 … ローカル管理だと、INITIALで指定されたサイズと同サイズ分の エクステント（複数）を確保しにいきます。 ＞BYTES列が、全て1048576 ということならUNIFORMサイズが1MBなだけだと思いますよ。 ※デフォルトが1MBだし。
その作成されたプロシージャを一旦削除した後にもう一度実行してみてはどうでしょうか？
削除できなかったフォルダやファイルが何かは不明ですが、 エラーなくインストールできたということであれば問題ないと 思いますよ。
= を in にしてみて下さい。
作業前にはマニュアルを参照しておいてください。 http://otndnld.oracle.co.jp/document/products/or … Redoにはメンバーとグループがあるので、マニュアルを見て理解してから作業してください。 オンラインRedoログを喪失するとえらい目にあうので、注意して作業してください。
この辺りのことを聞きたかったのではないでしょうか。 正確には「DBのオプティマイザが立てる実行計画には、どんな種類のアクセスパスがありますか？」だと思います。 ・問合せオプティマイザのアクセス・パスについて http://otndnld.oracle.co.jp/document/products/or … >全表スキャン >ROWIDスキャン >索引スキャン >クラスタ・アクセス >ハッシュ・アクセス >サンプル表スキャン >索引一意スキャン >索引レンジ・スキャン >索引レンジ・スキャン降順 >索引スキップ・スキャン >全体スキャン >高速全索引スキャン >索引結合 >ビットマップ索引 >ネステッド・ループ結合 >ハッシュ結合 >ソート/マージ結合 >デカルト結合 それよりも質問の意図を聞き出した方がよかったと思いますよ。 自分の知識・経験と相手の知識・経験は違うのですから、意図を確認したうえで、あなたの知識・経験を伝えることが面接では大事だと思います。
>「OracleDBconsoleorlc」などはあるものの肝心の >「OracleDBconsoleORACLE_SID」がありません。 デフォルトでインストールした場合、 ORACLE_SIDはorclです。 よって『「OracleDBconsoleorlc」などはある』 （多分転記ミスだと思うのですが・・・） のであれば、そこは問題ありません。 ※ただし、そのサービスの起動停止が 成功するかどうかはわかりません。 ＃２で回答したように「Home Premium」では 対応していないためです。
こんなのでもいいのかな？？ TABLE:TEST FIELD1　　　　FIELD2 --------　---------- 07-03-31　　　　　5 07-04-01　　　　　10 08-03-31　　　　　5 08-04-01　　　　　10 select to_char(add_months(field1,-3),'YYYY'),sum(field2) from test group by to_char(add_months(field1,-3),'YYYY') order by 1; add_months関数で3ヶ月前に持っていき、その日付の年で集計しています。
ファイルにリダイレクトすれば、テキストファイルとして保存されると思いますけど・・。 （ imp xxx/xxx@xxx full=y show=y file=d:\db20090727.dmp > out.txt ) show=y付きのインポート処理は、表示処理のみで更新はしません。 途中で止めても問題ありません。
全く同じバージョンで、Windowsなんですね。 DBサーバの構成の記述は無いようなのですが、 RAC構成とは、 たとえば、外部装置にデータファイルを配置して、 「Aサーバ」と「Bサーバ」の2台のサーバからアクセスし、 処理負荷分散や片方のノード（AサーバまたはBサーバ）がDownしても 継続運用できるようにしてある構成のことですね。 当然、RAC構成の場合には、Clasterwareが必要になります。 ま、多分、DドライブとEドライブといっているところからすると、 サーバー1台構成で、ローカルドライブにデータファイルを おいているんですかね。 とすると、 簡単に、 データファイルの配置先やらSIDを一緒にできるなら、 こんなところですね。 -------------------------------------------- 1. 移行先のDBに、OracleDB9iをインストール。 2. 移行先にて、元のサーバーと同じ名前のSIDを持つDatabaseを作成。 3. 移行先のDBを全停止（WindowsのDBサービスも停止。） 4. 2で作ったDBをBackup。 5. 移行元のDatabaseを全停止。 6. 移行元の以下のファイルを移行先の同じ場所へコピー。 「全データファイル」 「制御ファイル」 　○移行対象データの確認は移行元DB上で、 　　「select name from v$datafile;」 　　「select name from v$controlfile;」で確認可能。 ○初期化パラメータファイル 　　もし、spfile使用時は、一旦、 　 「create pfile='ドライブ名\ファイル名.txt' from spfile」のように、 　　事前にパラメータファイルをテキストファイル化しておくこと。 7. その他必要なファイルがあれば移動。 　(その場で事前でnetcaなどで作ってもＯＫ。 　 sqlnet.oraや、tnsnames.oraや、listener.ora） 　　　 8. 移行先でWindowsのDBサービスを起動し、DB起動確認。 　 SQLPlusでアクセスし、DBの各表などにアクセスできることを確認。 9. バックアップを取得する。 -------------------------------------------- もし、上記で行う内容がどういうものかわからないと、 ちょっと、移行自体はやめた方がいいか、 もしくは、バックアップをきちんととって、 何度失敗しても大丈夫なように備えておくことをお勧めします。
スキーマ＝名前空間 例えば、scottスキーマのemp表とdemoスキーマのemp表は 同じemp表でも別の表として識別されます。 Oracleの場合はスキーマ＝ユーザ（厳密には同じではない）です。 なので、余計にわかりにくいのでしょうね。 インスタンス＝プロセスのセット UnixでOracleを起動すると以下のようなプロセスが上がりますが、 SMON、PMON、DBWn、LGWR、ARCn そのセット。インスタンスを識別する物がSID。 RACではない場合、データベース(データファイル、制御ファイル、REDOログファイルのセット)１つに対してインスタンスは１つ。 RACの場合、データベース１つに対してインスタンスは複数（ノード数分） サルでは分からないでしょうが・・・
マニュアル参照。 http://otndnld.oracle.co.jp/document/products/or … >デフォルトのCOMPRESS=yを指定すると、インポート時に表データを1つの初期エクステントに整理統合するためのフラグが付きます。エクステント・サイズが大きい場合（たとえば、PCTINCREASEパラメータが指定されている場合）、データの格納に必要以上の領域が割り当てられます。 昔からよく聞く話ですね。 データがDeleteで消されていても、再編成していないのでエクステント数が多いテーブルがあったとします。 そのままエクステントをまとめると、データ量に対してエクステントのいサイズが大きいテーブルが出来てしまいます。
#1です。 ＞OracleクライアントとしてもVISTA HOME BASICは使えないのでしょうか 照会したリンクは確認しなかったようですね。中に「Oracle Database - Client」もあったのですが。 Client Editions: Oracle Database is certified to run on the Business, Enterprise, and Ultimate editions of Microsoft Windows Vista.
門外不出のOracle現場ワザ http://www.amazon.co.jp/gp/product/4798109290?ie … SQLの分析 => 対応したチューニングまで書かれていて便利です
出来る出来ないで言えば出来ます。 ※というか期限を越えても動きます。 が、「トライアルライセンス」を期限を越えて使用するのはライセンス違反です。 (1)フリーのXEを使う。 (2)OTN開発ライセンスを使う。 http://www.otn-shop.jp/statichtml/?fn=shop_guide2 今後、Oracleを使っていくのであればライセンスについても気をつけましょう。
ログオン中のユーザなら select * from USER_PASSWORD_LIMITS; を実行して PASSWORD_LIFE_TIME がその値になるはずです。
DBを使い始めてまだ１週間も経っていないので、「Silver」ではなく、「Bronze」の方でしょうか? ORACLE MASTER Bronze　SQL基礎I 講座（1） Oracleで使うSQLの基礎を学ぶ http://jibun.atmarkit.co.jp/lskill01/rensai/bron … 間違いやすいポイントを追え！ Bronze SQL基礎I 第1回 リレーショナルデータベースの基本とSQL*PLUS http://jibun.atmarkit.co.jp/lskill01/rensai/bsql …
オークションに出品してみてはいかがですか？
困ってるのは4ですね。 （3はインストールだけだし・・・構成が分かってれば困らない） http://jibun.atmarkit.co.jp/lskill01/rensai/sdba … 自分はオッサンなので、exp/impしか知らないですけど。 それに代わるユーティリティのようです。 完全なのはクローンじゃないでしょうか？ http://www.scribd.com/doc/6818979/CLONING-DATABASE とりあえず、私なら 1.exp/impを試す。（TargetでCreateUserしてimp） 2.DataPumpなるツールを検討し、試す 3.クローンにチャレンジ！！ 切り分けが必要かな？って読んでて思いました。 何が必要で、何が不要なのか・・・ 読んでいると、DBに詳しい方にお見受けしますが、何をしたいのかが明確じゃないように思います。 例えば、きちんとexp/imp出来ればREDOなんていらないんじゃない？と思うのは私のレベルが低いからでしょうか？ そもそも、新DBのバージョンも構成も同じなら、DBの初期設定を同じ様にしてやって、dbfを上書きすりゃいいんじゃない？と思うんですけど。 低レベルなアドバイスで申し訳ないです。
シノニムを作るはどうでしょうか？
こんなのではどう？ ●シェルファイル記述内容 ------------------------------------------------------- #!/bin/sh export ORACLE_BASE=/opt/oracle export ORACLE_HOME=/opt/oracle/products/10.2.0/db export ORACLE_SID=xxxx export PATH=$ORACLE_HOME/bin:$PATH export NLS_LANG=American_America.JA16SJIS sqlplus -s /nolog <<EOF connect dbsnmp/dbsnmp as sysdba @/xxx/xxxx/test.sql exit EOF ------------------------------------------------------- ●test.sql記述内容 spool文とdrop文を追記。 -------------------------------------------------------
今度は、ディレクトリ名を英字にしてみてやってみるとか、 「ttp://unkar.jp/read/pc11.2ch.net/db/1163907455」 みたいに、DBインストールユーザーに権限がなかったりとか のような気も。 やってみるのが一番かと。
なんの根拠も無いですが、私なら 物理メモリの利用可能領域が十分にあって Oracle未インストール状態でCPU使用率は殆ど無風状態 であるなら、ＸＰの９ｉにします。 （OSはなるべく軽い方がいいので・・・。 可能であるなら、XPの10gにします ^^; ） また、9iではオプティマイザにルールベースがありましたが、 10gでは非推奨なので、9iでルールベースだったのであれば、 その辺のチューニングが必要かもしれません。 前述とは逆説にありますが、10gではいろいろ9iにはない自動化が されています。Oracleに詳しい人がいないのであれば10gのほうが 楽かもしれません。 全く参考にならないと思いますが、参考まで。 ※あくまでも私心です。
こんにちは。 Oracleを学ぶなら、 ウチダ人材開発センタのOracleコースをおすすめします。 http://www.uhd.co.jp/ 「データベースとは？」から、「データベース管理」「indexのつけ方」等、 幅広く受講できます。 実績も多く、古くから運営されているのでおすすめです。
これは明らかに結論が逆です。 【1】は失敗し、【2】は正しく更新されます。 【2】はいわゆる「相関副問い合わせ」なっており、副問い合わせの中でUPDATEの対象のSALARYテーブルを参照しています。したがって、SALARY１行につき正しくAMOUNTが１つ選択され、正しく更新されます。 一方、【1】は単なる「副問い合わせ」であり、副問い合わせの中のSALARYは更新対象となるSALARYとは別のテーブルと見なされています。 だから複数行が返ってエラーになります。 （おそらくこのケースではJOINを使った書き換えはできないのでは）
oracleのバージョンがわからないですが with a as( select 01 as id,'ユーザーA' as username,'部署A' as busyo from dual union all select 02,'ユーザーB','部署B' from dual union all select 02,'ユーザーB','部署C' from dual union all select 03,'ユーザーC','部署D' from dual union all select 03,'ユーザーC','部署E' from dual union all select 03,'ユーザーC','部署F' from dual ) select id,username as ユーザー名, substr( replace(replace(XMLAgg(XMLElement("busyo",busyo) order by id),'</busyo>'),'<busyo>',','),2) as 部署 from a group by id,username ----結果---- ID|ユーザー名|部署 1|ユーザーA|部署A 2|ユーザーB|部署B,部署C 3|ユーザーC|部署D,部署E,部署F 参考URL：http://oraclesqlpuzzle.hp.infoseek.co.jp/10-75.h …
select テーブル２.年月 "年月", テーブル２.班 "班", テーブル１集計結果.回数計 "回数", テーブル１集計結果.秒計 "秒", テーブル１集計結果.件 * テーブル２.円 "円×件" from (select 班,sum(回数) 回数計,sum(秒) 秒計,count(*) 件 from テーブル１ group by 班) テーブル１集計結果, テーブル２ where テーブル１集計結果.班=テーブル２.班 ;
初心者さん 可能だと思います。 やったことはありませんが。 11gはJavaのDLLのpathとSIDでコネクトできます。 （ＩｎｓｔａｎｔClientで検索ください） 8iは知りませんが、DLL使っててもpath変えてやればOKでしょう。 ODBCなんてクラシックな方法は忘れましたが、やって出来ないことは無いと思います。 OracleHomeがpathで解決できなければ仕方無いです。 けど、11gの可用性でなんとかなると思うんですけどね・・・。 アドバイスになれば幸いです。
データの件数が増加したことで、テーブルスペースの領域が、自動拡張・自動拡張されたような状態になっているということはありませんか？
ttp://rions.seesaa.net/article/35943233.htmlとか、 ttp://blogs.wankuma.com/rti/archive/2007/07/13/85074.aspx とかみたいにOfiiceがインストールされているとかの 競合の問題だったりするような。
OTNで聞いたら？と思いました。 （可能ですか？と質問されてますが、出来ない事をご存知ですよね？） OSの差異があるとクローンも出来ません。（残念です） exp/impが出来るとは到底思えません。 手間が掛かりますが、ご自身でUnicodeで吐き出して、impするのが手っ取り早いです。 面倒ですよね・・・。 Oracleに文句を言いましょう。 私なら、DBA領域にアクセスして情報を抜き出すPL/SQLを作ります。 もしくは、「なんでAIXやねん！！」と言い切りますｗ
「IMP-00017: 次の文は～」とか書いてあるけど、 この後ろにでてくるのがエラーなのでは？
このＵＲＬにＯＳとオラクルのバージョンのサポート情報が あります。 ちなみにWINDOWS2008ですと、Oracle10R2以上となっています。 Oracle9iは厳しいかも・・・です。 参考URL：http://www.oracle.co.jp/iSeminars/090124_1330/20 …
時間を除く日付での範囲条件を書くなら、 where trunc(日付変数) between to_date(start,'yyyymmdd') and to_date(end,'yyyymmdd'); と書くのが適切かと思いますよ。 DATE型に、数値や文字列の定数や変数を比較させると暗黙の型変換が行われますので、場合によっては誤動作の種になります。
分析関数は使えるなら、こんな感じで。 select 年月,店名,品名,個数 from TBLA a, (select 年月 開始年月,lead(年月,1,999999) over(order by 年月) 改定年月,品名,個数 from TBLB) b where a.年月>=b.開始年月(+) and a.年月<b.改定年月(+);
#1,#2です。 >MIN_SCOREが同じものが複数ある場合 なるほど、そういうケースの値も入りうるわけですか。 それは想定していませんでしたが、以下のように条件を追加します。 SELECT ROW_NUMBER() OVER (ORDER BY MIN(MIN_SCORE)) CLASS, MIN(MIN_SCORE) MIN_SCORE, MAX(MAX_SCORE) MAX_SCORE, COUNT(*) N FROM (SELECT DISTINCT CONNECT_BY_ROOT ID AS ROOTID,ID,MIN_SCORE,MAX_SCORE FROM TABLE1 CONNECT BY ( (PRIOR MIN_SCORE<MIN_SCORE AND PRIOR MAX_SCORE+50>=MIN_SCORE) OR (PRIOR MIN_SCORE=MIN_SCORE AND PRIOR ID<ID)) ) WHERE ROOTID IN (SELECT MIN(ID) FROM TABLE1 t WHERE NOT EXISTS (SELECT ID FROM TABLE1 WHERE MIN_SCORE<t.MIN_SCORE AND MAX_SCORE>=t.MIN_SCORE-50) GROUP BY MIN_SCORE) GROUP BY ROOTID 自分のMIN_SCORE～MIN_SCORE-50点のレンジにレコードが存在しないものを起点として、 自分のMIN_SCORE～MAX_SCORE+50点以上の間にあるレコードを辿っていくわけなので、 MIN_SCOREが同じならばIDが最小の１つをとり、他のものはCONNECT先に含めるようにします。 ところで、本件を考えているうちに、CONNECT BYを使わなくても実現できることも気づきました。 構造だけなら、こちらの方がわかりやすいかもしれませんので、ご参考までに。 SELECT ROW_NUMBER() OVER (ORDER BY x1.MIN_SCORE) SEQ, x1.MIN_SCORE, x2.MAX_SCORE, (SELECT COUNT(*) FROM TABLE1 WHERE MIN_SCORE BETWEEN x1.MIN_SCORE AND x2.MAX_SCORE) N FROM (SELECT ROW_NUMBER() OVER (ORDER BY MIN_SCORE) SEQ, MIN_SCORE FROM TABLE1 t1 WHERE NOT EXISTS (SELECT * FROM TABLE1 WHERE MIN_SCORE<t1.MIN_SCORE AND (t1.MIN_SCORE-50)<=MAX_SCORE) GROUP BY MIN_SCORE) x1 INNER JOIN (SELECT ROW_NUMBER() OVER (ORDER BY MAX_SCORE) SEQ, MAX_SCORE FROM TABLE1 t2 WHERE NOT EXISTS (SELECT * FROM TABLE1 WHERE MIN_SCORE<=(t2.MAX_SCORE+50) AND t2.MAX_SCORE<MAX_SCORE) GROUP BY MAX_SCORE) x2 ON x2.SEQ=x1.SEQ
原因はわかりませんが、ORACLEの項目名はマルチバイト文字コードは保証 してなかったと思います。
Oracle 11g Bronze SQL基礎でしたら黒本だけで十分合格できると思います。DBAとは違い、しっかりとした内容、わかりやすい記述になっていると思います。（自分が黒本で勉強してそう感じました） だた、他の方も言われているように理解が必要だと思います。 暗記だけではSQLは無理かな？ でもわかりやすい内容ですのでいけますとも！ あと下記のサイトはとっても参考になりますよ。 ある意味、黒本より参考になるサイトです。 http://jibun.atmarkit.co.jp/lskill01/rensai/bsql … 実際、黒本なくても上記サイトだけでもSQLは合格できると思います。 がんばってSQL取得して下さい。 参考URL：http://jibun.atmarkit.co.jp/lskill01/rensai/bsql …
> 現行とSPFileという欄がありますが、現行欄に表示されている内容は > いったいどこから表示されているのでしょうか？ 基本的にはインスタンス起動時にSPFILEの値からきています。 但し、他のパラメータより動的に導出されるものもあります。 > pga_aggregate_target　が　SPFileでは０なのに現行には112と表示 > されているのが不思議です。 この場合、pga_aggregate_targetが0なのは WORK_AREA_SIZEがAUTOなのでOracleが自動で決めるという意味です。 > いまいち初期化パラメータファイルが > わかっていないのかもしれないですが、 OTN（http://www.oracle.com/technology/global/jp/index …）って 知っていますか？無料で会員になれるので登録してはどうですか？ マニュアルがダウンロードできたりいろいろな情報が入手できますよ > 初期化パラメータファイルには２種類 > ・サーバーパラメータファイル > ・テキスト初期化パラメータファイル > が存在するという認識なのですが、 > テキスト初期化パラメータファイルはいったいどこにあるのかまったくわかりません。 > Oracleをインストールしただけだとできないのでしょうか？ > Oracleのマニュアルを見ると Oracle_Homeのdatabase配下に > init.oraというファイルが出来ると書いてあるようなのですが・・・ データベースを運用するときに初期化パラメータファイルを サーバーパラメータファイル（SPFile）にするか テキスト初期化パラメータファイル（Pfile）にするかを決めます いま（11g）の標準はSPFileなのでPfileはありません あっても無効です
まず、大雑把でもボトルネック（遅くなっている原因）を突き止めましょう。 ネットワークなのか、DiskのIOなのか、特定の処理なのかSQLなのか。 記載された内容だけでは対象が広すぎてアドバイスも貰いにくいと 思います。 インフラ系は複雑なので、特定の操作しかした覚えがなくとも、 思わぬ所に弊害が出ていたりするものです。 9iから11iの変更でメモリやDiskの管理方法も大きく変わっている 点もあります。 Enterprise Manager を御使用であれば、GUIでもある程度のことは 判りますし、ORACLEには、この手の解析をするツールや手法の情報も 多く、OTNのドキュメント「2日でデータベース管理者」や 「2日でパフォーマンス・チューニング・ガイド」などを参考に、 もう少し頑張って解析されることをオススメします。 tyome2さんのおっしゃっているのは、SQL実行時の実行計画を立てる ためにデフォルトでは１時間置きに実行される統計情報収集（自動 ワークロード・リポジトリ（AWR））のことだと思いますが、あて ずっぽうを承知で言えば、例えば対象データが数万件程度の規模で SQLの実行時間が変わらないなら、LOGIN時のセッション確立 のためのコストのほうが怪しいと思います。 御参考までに。
>１．接続してくるクライアントのコンピュータ名（IPアドレスでも可）の履歴を取りたい Auditで以下の項目は取れます。 USERHOST：クライアントのホスト・マシンの名前 >２．１のシステムがどのテーブルを参照、更新しているかの履歴を取りたい テーブル単位であれば取れます。カラム単位だと発行したSQLを解析しないと難しいかも。 >３．１、２の履歴を数週間取りたい。 その期間だけAuditを使うしかないでしょう。 >４．有料のソフトはできれば使いたくない 標準のAudit(監査)を使うしかないでしょう。 監査には以下のタイプがありますが、この場合は「スキーマ・オブジェクト監査」になるでしょう。 ・文監査 ・権限監査 ・スキーマ・オブジェクト監査 ・ファイングレイン監査 ただし、監査を仕掛けるとパフォーマンスは落ちるので注意しましょう。それと10gR1から10gR2で追加された部分もあるので注意が必要です。 このあたりを参考にしてください。 http://www.insight-tec.com/mailmagazine/ora3/vol … でも、監査はかなり難しいですよ。 テスト環境で十分テストしてから実施してくだい。
１． DELETEが発生するテーブルの場合、インデックスに空きスロットができて無駄に膨れ上がっている可能性もあります。 DELETEや、INDEX列のUPDATEがあるテーブルのINDEXはANALYZEして無駄領域を検査してみてください。 INDEXのREBUILDで無駄領域が解消され、アクセスも早くなる場合があります。 ２． 一定期間INDEXのMONITORINGをかけて、使われてなさそうなものがあれば削除しましょう。 ３． インデックスがうまく使われているおかげで、データ量が増えても性能にあまり影響がないのかも知れません。テーブルフルアクセスと違い、データ量が増えても少ない検索範囲でデータ参照するためのものですからね。 しかし、あまりデータ量が増えすぎてキャッシュ効率が落ちだすと性能に影響が出始めるかも知れません。 システム寿命の年数の運用に耐えるだけのメモリとディスクを確保していないのであれば、 業務上、もう必要ないデータを別の場所に移す・削除するようなデータアーカイブ・クリーニング運用を行って、データが際限なく増えないようにしないといけないでしょうね。
表領域の別ディスクへの分散はディスクI/Oが問題であれば効果があります。 UNDO表領域も別ディスクに配置した場合、ディスクI/Oが分散はされ るでしょう。これはUNDO表領域に限らないはなしです。 ※これはUNDO表領域の複数作成とは別の話。
他の方が言われているとおりOracleが自動起動になっているので速度低下していると思います。 が、OSがvistaでメモリ1Gは少ないですね＾＾； 最低2Gはほしいところです。 Vistaは起動だけでも700M前後メモリを使うはずです。 メーカー製なら裏で他のサービスが自動起動するので1Gでも足りないと思います。 そこにOracleをいれれば、かなり遅くなります。 メモリを増やせば解消すると思いますよ＾＾ OSがVistaの時点でメモリ以外のスペックは十分だと判断します。 Vistaなら最低メモリ2G入りますね。
>where c.calling_num = m.orig_opn_dgt(+) >and m.cust_id = p.cust_id >and p.area_id = c.area_id(+) ; 向きがバラバラです。 エイリアス c に(+)を付けるのなら、すべての cエイリアスに(+)を付けなければいけません。エイリアス m も同様ですね。 条件によって付ける/付けないではなく、テーブルのエイリアス単位に付ける必要があります。 また、ORACLEでも9i以降であれば、MySQL同様、「LEFT JOIN」のANSI構文が使えます。
そのマシンのリスナーの設定はしたのでしょうか？ コマンドプロンプトから tnsping データベース名 でちゃんと設定されているかどうかを確認してください。
> この本の正誤表を見ましたが、載っていませんでした。 間違っていないですから・・・。 > リスナーは、複数のインスタンスで共有できるもので、グローバルデータ > ベース名はいらないと思うのですが・・・ 共有できるからこそ必要なのではないでしょうか？ リスナーとインスタンスは独立しています (Windows版を除く)。 クライアントから、Aインスタンスに接続したいという要求が来たときに、 Aインスタンスがどこにいるか分からないと接続できませんよね。 Aインスタンスがどこにいるかという設定がグローバルデータベース名の設定です。 listener.oraにこんな設定を追加すると、orcl.us.oracle.com向けの接続は/u01/app/oracle/product/11.1.0/db_1上で起動しているサービス名orcl.us.oracle.comを持つインスタンスに接続されます。 SID_LIST = (SID_DESC = (ORACLE_HOME = /u01/app/oracle/product/11.1.0/db_1) (SID_NAME = orcl) (GLOBAL_DBNAME = orcl.us.oracle.com) ) ただ、この設定は必須ではありません。動的構成と静的構成の２種類の設定方法があるからです。 上記は静的構成です。動的構成というのは、インスタンス側が自分が持っているインスタンスの情報をローカルリスナーに登録するというもので、この場合、上記のような設定はいりません。 ただ、動的構成にはインスタンスが起動していないとインスタンスの情報がリスナーに登録されません。つまり、停止中のインスタンスには接続できないということです。 何だか説明がまとまっていないですが・・・ 分からなければまた質問してください。がんばってくださいね。
(1)でログインできないのはOracleの障害の気がします。 他にエラーが出ていませんか? ユーザ・パスワードが違うだけですと以下のようなエラーが出ます。 >ORA-01017: ユーザー名/パスワードが無効です。ログオンは拒否されました。 pingもtnspingも通るということは、ネットワーク・リスナーが悪いわけではないと判断できます。 (1)のエラーコードで判断できると思います。 Oracleの問題ですとalart.log等を参照しないと原因はわからないでしょう。 >すぐにパスワードを問われるのですが、 >サーバのパスワードでは×でした。 >オラクルのパスワードなのでしょうか？ >（オラクルのユーザーＩＤとパスワードがあるのかわからないのです） OSユーザのユーザ・パスワードではなく、Oracle上のユーザ・パスワードが必要です。原因の究明はこの部分の切り分け次第だと思います。
そのユーザーに「CREATE TABLE権限」が無いからでしょうね。 sysまたはsystemでログインして、権限を付与してください。 grant create table to ユーザー名;
select sysdate syoribi,z.tablespace_name,x.jidou,x.gensaize,y.siyoryo from dba_tablespace z, ( select a.tablespace_name, to_char(sum(a.MAXBYTES)/1024/1024, '999,999,990') jidou, to_char(sum(a.BYTES)/1024/1024, '9,999,990.9') gensaize from dba_data_files a group by a.tablespace_name ) x, ( select b.tablespace_name, to_char(sum(b.BYTES)/1024/1024, '9,999,990.9') siyoryo from dba_segments b group by b.tablespace_name ) y where z.tablespace_name=x.tablespace_name(+) and z.tablespace_name=y.tablespace_name(+) ; どう違うのか判らないので推測するしかないけど、外部結合なら良いんじゃないかな。
CREATE TABLE TEST ( デフォルト設定をしましょう。 DEFAULT systimestampをつけてあげればOKです。 ID NUMBER PRIMARY KEY, NAME VARCHAR(10), ENTRY TIMESTAMP DEFAULT systimestamp ); 表が作成されました。 SQL> insert into test (id,name) values (1, 'taro'); 1行が作成されました。 SQL> select * from test; ID NAME ENTRY ---------- ---------- --------------------------------------------------------------------------- 1 taro 09-05-27 10:58:24.567349
SQL> ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD HH24:MI:SS'; セッションが変更されました。 SQL> select sysdate from dual; SYSDATE ------------------- 2009-05-27 14:52:50 SQL>
>以下のSQLの2つの結果は同じでしょうか？ 同じ結果が得られる場合もデータ次第ではあるえるけど、通常は違った結果になる。 >LEFT OUTHERは、ON句の中の左の表を全て取得するというものでしょうか？ ON条件中の左側でなく、OUTERキーワードの左側です。 from A left outer B　は、「Aの全件」と「条件に合うB」の結合結果が戻ります。 RIGHT OUTERの場合は、OUTERキーワードの右側が基準になります。 >LEFT OUTHER JOIN dept d ON (e.deptno=d.deptno) >LEFT OUTHER JOIN jobs j ON (e.jobid=j.deptno)； >では、empとdeptで、empを全て表示 >deptとjobsでdeptを全て表示となる気がするのですが。。 from (( emp left outer join dept ) left outer join jobs ) と解釈されます。 empとdeptの結合結果に対し、jobsを結合するので、jobsの結合条件には empの項目もdeptの項目も文法上は利用可能です。 ただ、今回のように外部結合の場合は、外部結合(dept)側の項目は、NULLの可能性があり 結合条件として成立しないかもしれませんけどね。
データベースに格納される情報は、データベースキャラクタセットで決まります。(つまりunicodeとは限らない) クライアント側でデータと取り出した場合は、クライアント側のNLSに合わせたコード変換がされて、 クライアントの文字セットで取り出せます。 登録もクライアントの文字セットで登録／更新した文字列は、データベースのキャラクタセットに変換し格納します。 NLSで変換不能な文字については、？に置き換わると思いますが・・ どのようにして登録されたのか判りませんが、データが正しく登録されていて、正しく設定されたクライアントなら SQLPLUSでも、それなりに表示されるはずですよ。（OSが表現できない文字とかは、部分的に？になるけど）
考慮したつもりでいるのですが、and,orの混在なので括らないないと誤判定されるのかも。 where 区分 = :入力の区分 and ( (:入力の開始 between 開始 and 終了) or (:入力の終了 between 開始 and 終了) or ((開始 between :入力の開始 and :入力の終了) and (終了 between :入力の開始 and :入力の終了)) ) ) ;
オンラインバックアップは整合性が取れていないので、 リストアしたままの状態でオープンすることはできません。 時間指定 (もしくはSCN 指定) のリカバリをしてから resetlogs でオープンすればよいと思います。戻すべきバックアップセットや適用すべきアーカイブログは rman が判定してくれるので、ユーザは意識する必要はありません。 RMAN> RUN { 　SET UNTIL TIME "TO_DATE('2009-05-23 06:00:00', 'YYYY-MM-DD HH24:MI:SS')"; 　RESTORE DATABASE; 　RECOVER DATABASE; } RMAN> RUN { 　SET UNTIL SCN 123456; 　RESTORE DATABASE; 　RECOVER DATABASE; }
取得できるかといえば、以下のようなクエリで可能です。 SELECT a.ID ID, a.AID AID, a.JOB JOB, b1.PID AID_PID_1, b2.NAME AID_NAME_1, b2.PID AID_PID_2, b3.NAME AID_NAME_2 FROM TABLE1 a INNER JOIN TABLE2 b1 ON b1.ID=a.AID INNER JOIN TABLE2 b2 ON b2.ID=b1.PID INNER JOIN TABLE2 b3 ON b3.ID=b2.PID 複数回クエリを実行するオーバーヘッドの方が高いと思います。 一発で取ってかまわないでしょう。 気になるならTABLE2のPIDにもインデックスを張ってください。
規則についてはマニュアルを参照してください。 論理条件 http://otndnld.oracle.co.jp/document/products/or … 比較条件 http://otndnld.oracle.co.jp/document/products/or …
spoolでSQL*Plusの出力をファイルに保存して、開発元に送りつけるだけで いいのではないですか。エラーの発生箇所など気にせず、「エラーがある から検収できない」というだけで向こうから対策を考えてくるでしょう。
管理者用ページの下の方に関連リンクがあると思います。 その中の「SQLワークシート」をクリックすると別画面が表示されますので、その画面でSQLコマンドが発行できます。 ただし、ブラウザでの操作は使い辛いのでお勧めしません。 別途SQL DeveloperをOracle(US)の公式HPからダウンロードして、そちらを使われた方がよいと思います。 ※インストールした中にも同ツールがありますがバージョンが古いです。 尚、isqlplusは、11gから廃止されたみたいです。
CREATE TABLE NEW_TABLE AS (SELECT COLUM_ID_1, COLUM_ID_2, cast( 'TT' as varchar2(*) ) as COLUM_ID_3 FROM OLD_TABLE ) でもいけるのじゃないかと。(*)には必要なバイト数を指定してください。
今後はデータベース監査証跡を使って当該テーブルのUPDATEの記録を残すと良いですね。 DBAユーザで、 AUDIT UPDATE ON テーブル名; という感じで監査を有効にし、 監査記録はDBA_AUDIT_TRAILテーブルで確認します。 たまりすぎないように古いレコードを掃除するなどの配慮も必要です。 詳しくは、Oracleドキュメントのセキュリティ・ガイドをごらんください。 参考URL：http://otndnld.oracle.co.jp/document/products/or …
以下のようなSQLで可能です。 SQL> select * from a; B ---------- AAA BBB CCCCC lskf;;; ddddd SQL> Update a set b = '○' || substr(b,2,length(b)); SQL> select * from a; B ---------- ○AA ○BB ○CCCC ○skf;;; ○dddd ----- SQLの意味は以下となります。 '○'　　　　-- 置き換える文字列 || 　　　　--文字列連結 substr(b,　--bを切り取る 2,　　　　　--2行目から length(b)　　--文字列の文字列長。 ) ちなみに関数は以下の特長があるので注意しましょう。 length '文字数基準 substr '文字数基準 lengthb 'バイト数基準 substrb 'バイト数基準
テストデータ作成及び管理に良いツールなら、SuperDBToolとSuperDevToolをお勧めしますよ。今は無料で公開しています。速めにダウンロードに行ってください。 http://www.google.co.jp/search?hl=ja&q=superdbto … データの関係で一括でデータを作るツールです。
>SQL plusでSYSユーザーでログインするにはどうすればよいのでしょうか？ 特別なことする必要がないと思います。 ログインできない場合いろいろな原因が考えられます。 一番可能な原因は設定によってSYSユーザーNOMAL権限でログインできない場合あります。 この場合 sqlplus sys/パスワード@接続文字列 as sysdba で試してください。 >SYSTEMユーザーやSCOTTユーザーではログインできるのですが、SYSユーザーになる方法がわかりません。 conn sys/パスワード@接続文字列 as sysdba
気のせいではありません。14日間あけてください。 http://www.oracle.com/global/jp/education/certif … 私が過去に再受験したときには、プロメトリックに「○日受験の再受験だけど、この日で申し込んで大丈夫か？」って確認しました。
まずはマニュアルを参照してください。 ・Oracle Flashback Databaseの制限事項 http://otndnld.oracle.co.jp/document/products/or … >Oracle Flashback Databaseで実行できるのは、Oracleデータベースで行われたデータ・ファイルへの変更の取消しのみです。 >これは、メディア障害を修復したり、誤って削除したデータ・ファイルをリカバリする場合には使用できません。 上記マニュアルから抜き出しましたがディスク破損などのメディア障害に「Flashback Database」は対応していません。今までどおり、データファイルのバックアップを戻してRedoログを適用します。 Oracle Flashback Databaseは論理バックアップです。ある時点のデータを戻すために使用するものです。物理バックアップは通常通り取りましょう。
#1です。 リアルで15分は掛かりすぎですよね。 トレースを取るなどして、何にそれほど時間が掛かっているのかを解決すべきかと思います。 （10gなので Automatic Workload Repository（AWR）辺りで） ご質問への解としては、一案として。 （結構、込み入った事をしています） 仮に、問題のSPを SP_OSOI とします。 4発パラレルでリソースを食い合う事無く、15分で終わる事が大前提となります。 まず、制御用テーブルを作ります。 NON-UNIQUEインデックスとして2つのSESSION-IDを持ちます。 （※PKでも大丈夫かな） この値としては、userenv('SESSIONID') が入ります。 1つは、呼び出し側セッションのSESSION-ID、もう1つは（後述する）JOB起動されたセッションのSESSION-IDです。 それ以外は、処理済みフラグです。 SP_OSOIのラッパSP_OSOI_WRAPを作ります。 ラッパの仕事は、パラメータの授受と制御用テーブルの更新。 パラメータはSP_OSOI本来のパラメータ以外に、ラッパを呼び出す側から受け取るSESSION-IDです。 ラッパの中でSP_OSOI実行前に制御用テーブルにINSERTし、実行後に制御用テーブルを処理済みとして更新します。 呼び出し側のメインSPは、DBMS_JOBと動的SQLを使ってSP_OSOI_WRAPを4発実行します。 DBMS_JOB自体が非同期で実行するセッションとなるので、4発シリアルでもスルっと一瞬で流れるはずです。 その後は、JOBの時間を即時にすれば、SP_OSOIは、DBMS_JOBによって（ほぼ）パラレルで処理が流れます。 4発実行の後、LOOPで、自分のSESSION-IDがすべて処理済みになるまで制御用テーブルをSELECTし続けます。 ここは、CPU食いまくる処理になるのでLOOP内で5分くらいずつSLEEPした方がいいでしょう。 SLEEPの閾値をどの辺にするかによりますが、パラレルなので15～20分くらいで終わるはずです。 （理論的には）
単純にSQL*Plusを起動した時にいたディレクトリに ファイル作成権限が無いのではないでしょうか。 いったんSQL*Plusをexitで抜けてファイルを作成 してみてください。
できません。 また、Bashのように２つ以上過去に実行したSQL のヒストリを参照すること もできません。 たしかに、SQL*Plusの編集機能はあまり強力ではありませんが、 「ed」コマンドを実行すると、現在のバッファの内容をエディタ (デフォルトではWindows の場合はメモ帳、Unix、Linuxの場合は ed) で編集できますので、一応は期待されている動作をさせることもできるのではないでしょうか？
誤解しているようですが、「SELECT ANY TABLE」権限は DB上の全てのテーブルを参照できる権限です。 userAのテーブルだけではなく、全てのテーブルが参照できてしまいます。 下記の要件を満たすには個別テーブルに対して権限を与える必要があります。 >userAが持っている表、ビューの参照権限を >userBに与えようと思います。 面倒であれば、下記URLのようにディクショナリからSQL文を生成します。 http://otn.oracle.co.jp/forum/message.jspa?messa … >以下のエラーが出ました。 >　ORA-01031：権限が不足しています。 > >これは、userAに権限を付与する権限がないのだと >理解しました。 「SELECT ANY TABLE」はシステム権限です。 ですので通常DBAが権限を付与します。所有者はSYSです。 「userA」に「SELECT ANY TABLE」を付与しても、また貸しのように 他ユーザに付与できません。 もし、どうしても「userA」から権限を与えたい場合、「userA」に対して「WITH ADMIN OPTION」付きで「SELECT ANY TABLE」を付与します。 しかし、また貸しで権限を付与するのはわかりにくいのでやめた方がよいでしょう。
マニュアルを参照しましょう。 「SQL リファレンス10g リリース2（10.2）」 > 表のフラッシュバックの制限事項: > この文には、次の制限事項があります。 > 表のフラッシュバック操作は、クラスタ内の表、マテリアライズド・ビュー、 > アドバンスト・キューイング（AQ）表、静的データ・ディクショナリ表、 > システム表、リモート表、オブジェクト表、ネストした表、 > 表の個々のパーティションまたはサブパーティションには無効です。 つまり無理です。
オプティマイザは、統計情報を見て「ヒントに指定されたHASHを使うべきか」を判断します。 >アナライズのサンプルレートにより効いたり、効かなかったりします レートを変えると言う事は、NUM_ROWS、カーディナリティ、分布の統計情報取得が変化する、と言う事ですから、ちょうど閾値にまたがった時など、効いたり効かなかったりはあると思います。 （つまりヒントは万能ではないのです） ※効いた時の実行計画でストアドアウトラインを保持してみては？
> ORA-01152: ファイル1は十分に古いバックアップからリストアされていません。 このエラーのとおりです。リカバリするためには最も新しいデータファイルのSCN よりも先までのアーカイブログ (もしくはオンラインログ) が必要ですが、それが存在しないことを意味しています。 つまり、もっと古いバックアップからリストアし、理科張りしなければならないと言うことですが、バックアップが存在しないと言うことでしたら復旧できません。
タイプミスと、EMPCD_CDA, EMPCD_CDBに結合条件が指定されていない点は私も気になりました。 #1さんの回答で十分説明されているので、補足みたいなものです。 そもそもGROUP BYする必要があるのかということについですが、 今使われている以下のサブクエリでは、GROUP BYを使っているため、結果は0行または1行です。 GROUP BYを使うと、キー単位にグルーピングする結果、キーのある場合しか結果が返らないからです。 SELECT COUNT(*) AS EMPINFO_MAP_COUNT, EMPNO,EMP_ID FROM EMPINF0_MAP WHERE EMPNO = :P_EMPNO AND EMP_ID = :P_EMP_ID GROUP BY EMPNO, EMP_ID 一方、単純に件数だけを取るようにすると、対象がなくても「0件」と返ってきますから、結果は必ず1行返ります。 SELECT COUNT(*) AS EMPINFO_MAP_COUNT FROM EMPINF0_MAP WHERE EMPNO = :P_EMPNO AND EMP_ID = :P_EMP_ID 結果が必ず１行返るので、外部結合もNVLをする必要もありません。 その場合はクエリは以下の通りです。 SELECT EMPINFO_A.EMPNO, EMPINFO_A.EMP_ID, EMPCD_CDA.CDA_NAME || EMPCD_CDB.CDB_NAME AS EMPCD_CDNM, EMPINFO_MAP_VIRTUAL.EMPINFO_COUNT AS EMPINFO_MAP_COUNT FROM EMPINFO_A, EMPCD_CDA, EMPCD_CDB, (SELECT COUNT(*) AS EMPINFO_MAP_COUNT FROM EMPINF0_MAP WHERE EMPNO = :P_EMPNO AND EMP_ID = :P_EMP_ID) EMPINFO_MAP_VIRTUAL WHERE EMPINFO_A._EMPNO = :P_EMPNO AND EMPINFO_A.EMP_ID = :P_EMP_ID
主キー（プライマリ・キー）自体の制約は以下です。 ・1テーブル内でユニーク（一意）を保証する。 ・Nullを許容しない(NotNull）。 ですので、主キー自体の値は物理的には更新可能です。 ただし、例えば以下のような場合に製品テーブルの主キーが 更新された場合どうなるでしょうか。 ・製品テーブル（マスタ） 　製品コードが「A1」※主キー 　名称が「ねじA」 ・在庫テーブル 　製品コードが「A1」※主キー 　在庫数が100個 製品テーブルに該当するコードがなくなるので、在庫テーブル側からは名称がわからなくなります。リレーショナルが失われるので、製品テーブル側からは在庫数がわからなくなります。 ですので、通常、主キーの更新は行ないません。 しかし、現実世界では様々な統廃合が行なわれるので主キーを更新せざるを得ない場合もあります。その場合は、各テーブルの関係を考慮に入れて、関係するテーブルすべてのキーを更新する必要があります。 子テーブルにレコードがあった場合、親テーブルのレコードが削除できないのは外部キー（フォーリン・キー）です。 この場合は、子テーブルにデータがある限り、親テーブルからは、参照しているレコードを削除することはできません。
流れ的には以下です。 全体に影響のないところから進めていった方がよいでしょう。 ----- 調査 (1)ADDM or STATSPACKで現状を確認。 (2)該当SQLのトレースを取り実行計画を調べる。 ----- 対応1 (3)該当SQLを書き換える。 　無駄な結合を省く、索引を使用するSQLに修正するなど。 　ヒント句などを埋め込む。 (4)統計情報を取得する。 　アナライズを行い、最新の統計情報を使用する。 ----- 対応2 ※他の影響が大きい。 (5)物理構造を変更する。 　索引の追加やテーブル構造変更。 　※該当SQL以外も参照している可能性があるので注意。 (6)初期化パラメーターを調整する。 　(1)と(2)で調査した結果を元にチューニング可能なパラメータを変更 　※該当SQL以外にも影響があるので変更には注意。 　※自動統計収集など自動系の処理を見直す。 (7)ハードを増強する。 　最終手段。メモリ・CPUの増設、高速ハードディスクへの変更など 順番は適宜、入れ替えてください。 個別SQLが速くなっるかどうかはテーブル定義、実SQLと実行計画、データ量などの情報がないと判断できません。
Oracleの方でフィールド数を絞ったVIEWを作り、テーブルとして リンクする方法が簡単で、オススメです。 ＞VBAからselect文で（Select　SYA_ID　from　IDOU）起動しても～ これはCurrentDbに対してOpenRecordsetを使ったからでは？ ODBCの接続オブジェクトに対してOpenRecordsetを使ってみて ください。勿論、フィールド数は255以内にします。
11gSilver保持者です。 問題集をやっておけば、40%は取れる。 あとは、10g対応の翔泳社の黒本でOK。 この2冊で65%ぐらいだね。出題範囲から考えると。 あとは、11g関係の本で勉強するしかないね。
採番は、どのようにして行っていますか。 ・シーケンスを使っている。 ・採番用のテーブルで管理している。 ・インサート時にロジックで行なっている。 どのような方法を取っているかはわかりませんが、 現状の実装方法がわからないと、適切な方法は 選べないと思います。
前提条件については参考リンクに書いてあります。 >資格取得の前提条件について: >資格認定のためには、フローで記述されている前提資格を取得している必要があります。(PlatinumはGold、GoldはSilver、SilverはBronzeが前提資格になります。) 試験に合格しただけではOracleMasterにはなれません。 合格したあと、Webから合格申請を行って試験に合格したことを「認定」してもらう必要があります。 http://www.oracle.com/global/jp/education/certif … このときは画面で合格した試験を選択して申請します。 申請したものが「認定」されるまでは数日～１週間くらいかかりますが、その試験に合格した結果、OracleMaster資格の「認定」要件も揃ったと判断されると、「試験合格」と「Oracle Master資格」の両方が認定されます。 「認定」の前提要件なのであって、受験資格に影響するわけではありません。したがって、試験はもちろん受けられます。 （下の資格を持っていないと受験すら認められないのはプラチナの実技試験だけです） 合格したらちゃんと合格したことになりますし、合格申請もできます。 ただ、Bronzeの２試験にも合格して、合格申請を行った後で初めて、「Oracle Master Silver DBA 10g」に認定してもらえます。 （たぶんこういう順番で申請をすると、BronzeとSilverの同時認定になりますね） ＃なお、私は下から順番に申請したので、上記には該当しません。 参考URL：http://www.oracle.com/global/jp/education/certif …
単純な拡張ならresizeで可能です。 SQL> alter database datafile '/u01/app/oracle/oradata/undotbs01.dbf' resize 50m; データベースが変更されました。
No.1です。 AVG関数を使えばもっと簡単にできました。 例) ----------------------------------------------------------------- SELECT AVG(CASE WHEN a = 0 THEN NULL ELSE a END), AVG(CASE WHEN b = 0 THEN NULL ELSE b END), AVG(CASE WHEN c = 0 THEN NULL ELSE c END) FROM avg_sample; ---------------------------------------------------------------------
9iスタンダード以降なら、探査回数が一回で済むよう分析関数を使った方が効率的な気がします。 select USERID,KYOUTUNO,SEQ,BIKOU from ( select x.*,row_number() over(partition by USERID,KYOUTUNO order by SEQ desc) R from TABLE x ) where R=1; 分析関数が使えないバージョン・エディションなら、 select * from TABLE where (USERID,KYOUTUNO,SEQ) in (select USERID,KYOUTUNO,max(SEQ) from TABLE); のようなサブクエリを使った解決策になります。
　ローカルネットサービス名はXP側に登録します。Win2003にはローカルネットサービス名は不要。Win2003側に必要なのはTNSリスナーの設定（多分Oracle Serverインストール時に自動で行われているはず）。 　そもそもODBCドライバ「のみ」ではよそのパソコンのOracleには接続できません。Oracle Net、Oracle OCIなどの「Oracle Client」が必要です。状況から、それはXP側に入っていると推測されるので問題はないですけど。 手順 １．XPでOracle Net ManagerあるいはNet Configuration Assistantでローカルネットサービス名を作る。ここで接続できるか確認（ここでつながらないのにODBCでつながる訳が無い）。 ２．ODBCのDSNにそのネットサービス名をつけて接続確認。
MAXを使った例です。 SELECT A.NAME,B.ID,B.DATE FROM Atable A INNER JOIN Btable B ON B.NAME=A.ID WHERE B.DATE IN (SELECT MAX(DATE) FROM Btable WHERE NAME=B.NAME)
下記ツールはいかがでしょうか。 こちらは使ったことがあります。結構便利だと思います。 http://www.superdbtool.com/ -------------以下はサイトからの説明です------------- あなたは、テストデータの作成が遅くて悩んでいますか？ Excelから作ったデータを直接DBに登録したい。 と思っていませんか？ 簡単にExcelを使ってデータをOracle/DB2に登録することができて、 そして簡単に大量なデータを迅速に作成できるとしたら・・・ あなたは興味がありますか？ もし興味があるなら、とっても簡単にご利用できるソフト、 SuperDBTool @ Excelをダウンロードして試してみましょう。 SuperDBToolは効率的なOracle/DB2のデータ作成に不可欠なDBツールです。 Excelのアドインとして、誰でも簡単に使えます。 Excel DB 連携、Excel DB 接続、是非、ご利用ください！ 主な機能： http://www.superdbtool.com/help.htm テーブルを選択... 全てのシートのテーブル定義を取得(シート名で) 条件でデータを取得... 選択されたシートのデータを取得 全てのシートのデータを取得 論理名を取得 その他のデータ取得>現在のシートのデータを取得 その他のデータ取得>コメント条件で現在のシートのデータを取得 その他のデータ取得>コメント条件で全てのシートのデータを取得 SQL実行... データ作成>他のシートデータから1件のデータを作成 データ作成>選択された列のデータを作成 データ作成>データ関係シートを作成 データ作成>データ関係を自動作成（同名列のみ） データ作成>データ関係定義シートでデータ関係を作成 データ作成>データ関係でデータを作成 データ作成>関係シートから各シートへデータコピー 選択されたシートのデータを入換 全てのシートのデータを入換 選択された行データを追加 選択されたシートのデータを追加 全てのシートのデータを追加 選択された行データを削除 条件でデータを削除 SQL実行履歴 DB接続>DB接続情報変更 DB接続>DB切断 参照してください。 参考URL：http://www.superdbtool.com
TEST_TBLにはどんなレコードが格納されていますか？各バージョン環境で完全に同一だったでしょうか？それが分からないとなんとも言えませんが、 このSQLですと、BETWEENに何を指定してもTEST_TBLのレコード件数＝ALLCNTになるとしか思えないのです。 T2に対する絞込みは、1つ目のSQLのWITH内の問い合わせや2つ目のSQLのT1内の副問い合わせと直接関係がないからです。
http://www.digital-wks.com/select.html それは、別名ですね。 色々なサイト・入門書で、自分なりにしらべてください。 FROM TABLEA TABLEA1, TABLEA TABLEA2, TABLEA TABLEA3 とすると、同じTABLEAでも、TABLEA1,TABLEA2,TABLEA3では違う用途で 使用する（Where句での条件付けなど）ことができます。 また、 FROM TABALEA TBA と書けば、SELECT句に記述するフィールド名を別名表記で記述することもできます。 SELECT TBA.FIELD1 FROM TABALEA TBA
BACKUPSETとBACKUP CIPIESですから、単純にデータファイルをバックアップする（コピーするか） データファイルをバックアップ（未使用領域を圧縮してバックアップするか）の違いだと思われます。 表領域にデータがほぼいっぱいいっぱいに詰まっている場合は後者を選択するべきで、いっぱいっぱいに入っていない場合は前者を選択するべきなのが一般的な手法ですが、 ほぼBACKUPSETでよいと思います。 またBACKUPSETは複数のデータファイルを１つにまとめたり、まとめた上でまた特定のサイズごとに分割したりすることができますが、 BACKUP COPIESだとデータファイルと必ず１対１になります。 圧縮といってもlzhやzipのように圧縮するわけではなく、 未使用領域を縮めるだけなのでCPU負荷もほとんど変わりません。 十中八九はBACKUPSETの方がバックアップ時間を短縮できるでしょう。 RMANにおける各パラメータのデフォルト値は固定で決まっている わけではなく、色々なパラメータとの相関関係があるものが多くあります。 たとえばFILESPERSETパラメータ（１つのデータファイルを何個のファイルに分割してバックアップするか） などは 「デフォルトでは、チャネル・リソースを最適に使用するために、 Recovery Managerによって、ファイルがバックアップ・セットに分割されます。 バックアップされるファイルの数が、チャネル数で除算されます。 その結果が64未満の場合は、その値がFILESPERSET値になります。 それ以外の場合、FILESPERSETはデフォルトで64になります。」 といった記述がマニュアルにあります。 http://otndnld.oracle.co.jp/document/products/or … 公式な文章であればまずは http://otndnld.oracle.co.jp/document/products/or … などを見て色々とケーススタディを実施したほうがよいと思います。 一般のサイトであればもう少し分かりやすくウォークスルーを まとめた文章があるかもしれません。 http://www.atmarkit.co.jp/fdb/rensai/ora_backup0 … http://www.atmarkit.co.jp/fdb/rensai/ora_backup1 …
補足ですが、リンクをご覧ください（OTN)。 >分析ファンクションは、問合せで最後に実行される演算（最後のORDER BY句を除く）の集合です。すべての結合およびすべてのWHERE、GROUP BYおよびHAVING句は、分析ファンクションが処理される前に実行されます。そのため、分析ファンクションは、SELECT構文のリストまたはORDER BY句のみに指定できます。 ROW_NUMBERは分析関数またはウィンドウ関数といわれ、抽出条件に直接指定することはできないのです。 参考URL：http://otndnld.oracle.co.jp/document/products/or …
マニュアルにもこのような記述がなされています。 > Oracleコンポーネントをインストールするコンピュータに、 > Administratorsグループのメンバーとしてログオンします。 その他、セキュリティの設定（ファイヤーウォール、ウィルスソフトなど）も全て無効にしてみてください。 参考URL：http://www.oracle.com/technology/global/jp/docum …
ランニングコストを考慮に入れた方がよいですよ。 サポート料金もばかにならないですから。 あと、開発時のコストも考えておかないといけないでしょう。 Oracleは実績により導入コストが押さえられますが、 SQL Serverになると新規にノウハウから構築する分の コストも必要でしょう。 アプリをOracleから移植するのは両者の違いがわかっていないと大変ですよ。 また、SQL Serverの導入・構築・運用が出来る人をアサインできないと厳しいです。 その分のコストを見積もらないといけません。 案外、そのコストが一番かかるかもしれませんね。
接続識別子はあくまで username/password@{接続識別子} というように接続文字列の一番最後に来るものを示すだけであって その記述方法をtnsnames.oraを利用して username/password@hsagentと簡単に書いても良いですし、 tnsnames.oraでマッピングせず usernaem/password@'(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=localhost)(PORT=1521))(CONNECT_DATA=(SID=hsagent)))' と直接書いてもかまいません。 上記の場合はもちろん '(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=localhost)(PORT=1521))(CONNECT_DATA=(SID=hsagent)))' が接続識別子となります。 ですので 「・接続識別子には、ネットワーク・ホスト名とデータベース・サービス名が含まれる。」も正解となります。
はっきりと申し上げて無いと思いますね。 おっしゃるとおり データ数や結合テーブル数・条件の複雑さによって一概には言えません。 INSERTであればまだある程度は言えると思いますが、 UPDATEやDELETEもwhere句が入ればインデックスのあるなしやテーブル 削除対象件数などでどうとでも変わってきますし、 ましてやSELECT文であれば中間表、DISKの速さ、フェッチ件数 などでいくらでも変わってきます。 フェッチ件数が10件、結合するテーブルの件数がそれぞれ10万件件、 結合テーブル数が3個、結合方式が内部結合のハッシュジョイン、 orderby,groupbyは無し、DISKのアクセス速度は2msec、 DBキャッシュにはヒットしないこととし、ハードパースも走ることとする。SQL文の長さは200文字程度といった程度の情報があって やっと±500%くらいのブレでやっと見積もれると思います。 と言っても机上で見積もる方法はなく、それと同じ環境を作って試すだけなのですが。 あと、1msecであればチューニングしなくてもよいというのも間違いです。1msecのSQLが100万回実行されているなら 100秒かかっている1回だけ実行されているSQLよりも優先してチューニングするべきです。 もちろん「1msecより0.1msecでも縮められる場合は」ですが。 データベースを勉強している人はよく陥りがちなのですが、 SQLを速くすることがメインの目的では無いのです。 あくまで誰かが使うアプリケーションを速くすることが目的で そのためにアプリケーションが内部で発行しているSQLを速く するのです。0.1msecのSQLが速い遅いを決めるのではなく、 「このアプリケーションのこの処理を何秒で返せるようにする。」 それが目的です。 SQL個々の処理時間の目標を決めるのではなく、 DB全体を見渡してのボトルネックの特定とそのボトルネックを一つ一つ改善していくことが一番のアプリケーション高速化の近道だと思います。
以下のようなSQLを実行すれば一番体感できると思います。 インデックスが有るか無いかで十分体感できるほどの差があるかと思います。 検証用テーブル作成 create table test (col1 number); データ挿入 declare i := 1; begin for i in 1..100000 insert into test values (i); if mod(i,1000)=0 then commit; end if; end loop; end; / インデックス無しでのSELECT（フルスキャン） select * from test where col1 = 100; インデックス作成 create index ind_test on test (col1); インデックスありでのSELECT（インデックススキャン） select * from test where col1 = 100; 検証用テーブル削除 drop table test purge; 実際には上記のようにインデックスを張ればすぐに使ってくれるとういうほど易しいものではないので いかに自分が意図した実行計画（この言葉も勉強しているかと思います。）となるように操作できるかにかかっています。
＞また、システムエラーログでは、問題となっているSQLの''(クォーテーションマーク)や、<>(不等号記号)が変換されて表示されています。 ＞ひょっとすると、そういった違いが影響しているのかもしれないと思っているのですが、その可能性はありえますか? これはないのではないかと思います。ログの表記はあくまで便宜上のものでしょう。 デバッグを行いながらSQLを抽出したとのことですが、まだ「本当にアプリで実行されたSQLが抽出できた」のかどうか疑問です。具体的な方法が書かれていないため分からないのですが、「アプリではバインドで実行されているようなのに、リテラルにしないと同じ速度にならない」というのはおかしいです。 私のA案～C案など試して、本当に実行されているものを抽出してみてください。特に、トレース取得などはOracleを使う開発者としてステップアップするのに必要不可欠な技術ですので、この機に調べてみてはいかがでしょうか？どの案を試しても、このSQLの解明をしながら技術力を身につけることができると思いますよ。
・KEEPバッファを指定する。 ・ALTER TABLE テーブル名 CACHE あたりでしょうか。 CACHE指定の場合はLRUアルゴリズムによるので必ずメモリに常駐するわけで はありませんが。
今実際には試せないのですが、IDをキーにMAXを使ってグルーピングしたらできませんか？
テストしてないけど、こんな感じで出るかと。 select 機種, trunc(アクセス日時,'MI') アクセス日時, max(case when R1=1 then 回数 end) 初回, min(回数) 最小, max(回数) 最大, max(case when R2=1 then 回数 end) 最終 from ( select x.*, row_number() over(partition by 機種,trunc(アクセス日時,'MI') order by アクセス日時) R1, row_number() over(partition by 機種,trunc(アクセス日時,'MI') order by アクセス日時 desc) R2 from TBL x ) group by 機種,trunc(アクセス日時,'MI');
ファイアウォールがブロックしてくれてるんじゃないかな？ ファイアウォールを無効にするか、例外としてポート番号を入れましょう。 それでもエラーが出る場合は、下記3点を調査してみましょう。 １．Oracleサーバとの接続を確認 　　「ping」コマンドを使います ２．リスナーとの接続・動作を確認 　　「tnsping」コマンドを使います ３．Oracleデータベースとの接続・動作確認 　　tnsnames.ora、データベースが起動しているかを確認 上記3点は調査の基本となるので、これ以上の内容は学習のためにも自分で調べることをオススメします。
tnsnames.oraの中身 xxx_SVR = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = server01)(PORT = 1521)) ) (CONNECT_DATA = (SID = sid) ) ) を xxx_SVR = [スペース](DESCRIPTION = [スペース][スペース](ADDRESS_LIST = [スペース][スペース][スペース](ADDRESS = (PROTOCOL = TCP)(HOST = server01)(PORT = 1521)) [スペース][スペース]) [スペース][スペース](CONNECT_DATA = [スペース][スペース](SID = sid) [スペース]) ) のように修正して同じディレクトリに保存してみてください。 理由はわかりませんが、スペースを入れることによって私はうまくいきました。
10.2ならこんなの使えます。 SELECT * FROM TESTTBL WHERE UTL_I18N.TRANSLITERATE(FIELD1,'HIRAGANA_FWKATAKANA) LIKE '%カタカナ%' 参考URL：http://otndnld.oracle.co.jp/document/products/or …
　基準日から何日たったかを実数で格納しています。単位が日ですから、何時間何分何秒は小数になりますね。 　例えば、基準日を１９９０年１月１日０：００に取ります。 　さて、１９９０年１月２日０：００はどうやって表現してあるかというと、基準日より１日ちょうどたってますから、1.0とデータベースには格納されます。１９９１年１月１日１２：００だったら、３６６．５となります。基準日が何年だったか忘れましたが、こうやって格納しておけば、７バイトもあれば十分なわけです。ただし、欠点は、基準日からの日数を日付に直す計算をしないと表示できないわけですが、この計算のアルゴリズムは昔から知られたものが存在しますので、たいした欠点にはなりません（所詮、データベースを利用するプログラマやユーザーはまったく知る必要もないことでもあります。オラクルが全部自動でやってくれますから（笑）） 　一方利点は、日付の加減算をする時に、日付特有のもろもろの規則をまったく考慮しなくてすむことです。普通に足し算・引き算するだけで結果が出ますから。 　アルゴリズムに関する詳しい資料の例として、参考ＵＲＬを一つ書いておきます。グレゴリオ暦とかユリウス暦というキーワードで検索すれば、かなりの資料があります。 参考URL：http://www5d.biglobe.ne.jp/~noocyte/Programming/ …
initファイルの差し替えはシャットダウンの状態でなければダメでしょうか？シェルを一回たたいてアーカイブログモードに変更するしたいと考えております。 →この質問にだけ答えるとなると 「その必要はありません」が答えになります。 Oracle Masterでも習いますが、initファイルはstartup nomountの 際に読み込まれるので起動中に内容を変更しても起動中のインスタンスに 何ら影響を与えません。 ただし、entreeさんのおっしゃっているように アーカイブログ⇔ノーアーカイブログの切り替えには initファイルの編集は一切必要ありません。 最初からアーカイブログ用にLOG_ARCHIVE_DEST_nを記述 しておけばいいだけです。 （LOG_ARCHIVE_DEST_nを設定せずにアーカイブログモードで起動 しても確か $ORACLE_HOME/rdbms/配下かどこかに自動で出力したような気がします。）
https://ホスト名:1158/em で接続できませんか？ ちなみにスタートメニューにある「Database Control - ＳＩＤ名」 からもアクセスできるはずです。
オラクルマスターブロンズを受験するのが良いです。 ブロンズ合格者がシルバーに挑戦でき、シルバー合格者がゴールドに挑戦できます。 ブロンズはSQLとDBAとの二種類の試験に合格する必要があります。体験談ですが、それぞれ20時間ずつの学習で合格可能と思います。 ちなみに、シルバーは40時間程度必要で、ゴールドは30時間程度です。（体験談ですので、参考程度に） 試験情報ですが、試験の予約は2週間以上前にはしましょう。気合が入りますし、好きな時間や会場を選べます。 合格後、申請する必要があります。申請完了まで10日程度、その後配送申請を出します。配送申請後、合格証書が届くまで3日程度かかります。 elliedotdotさんは1週間に17時間の学習予定なので、ブロンズならギリギリ間に合うと思います。 理解してくるとおもしろいので、頑張ってください。
今のSQLを書くなり、ちゃんと説明をしないと回答がつきにくいと思いますよ。 想像して書くとこんな感じ。 select a1, max(case when b2=1 and R=1 then b4 end) "b4-1", max(case when b2=2 and R=1 then b4 end) "b4-2" from ( select a1,b4,row_number() over(partition by b1,b2 order by b3 desc) R from a,b where a1=b1 ) group by a1 ;
「ARCHIVELOG」は、Oracleの運用モード ・ARCHIVELOG　変更情報を全てアーカイブログに出力する。 ・NOARCHIVELOG　変更情報をアーカイブログに出力しない。 NOARCHIVELOGの場合、最後のバックアップまでしか復旧できない。 ARCHIVELOGの場合、最後のバックアップの後の変更情報がログに記載されているので障害時の時点まで復旧が可能。 モードはインスタンス作成時に指定します。また、あとからでも変更可能です。 RMANはリカバリーマネージャーというバックアップ用のソフトウェア。 デフォルトでインストールされているはず。 RMANが必須なのはRMAN経由でバックアップしているからでしょう。 ARCHIVELOGが必須なのはオンラインバックアップをするからでしょう。 ※Oracleを停止せずにバックアップを行なうオンラインバックアップはARCHIVELOGモードの必要があるため。 RMANに関しては以下マニュアルを参照。 http://otndnld.oracle.co.jp/document/products/or …
追加インスタンス分の空きメモリがあるのであれば、 停止する必要はありません。
OTNの質問はOTNにした方が良いかと思いますが・・・ 以下URLを参照してみてください。 http://www.oracle.co.jp/account/qa.html >そもそも、機能ごとにアカウントが別々に必要なのでしょうか？ そういうことはない筈です。 ただ、サイトごとに制限があったりしますが。 （たとえばPartnerNetwork等はOracleのパートナー契約していないと許可されませんので。）
>RATIO_TO_REPORT(sum(jikan)) over() を >RATIO_TO_REPORT(sum(jikan)) over(PARTITION BY riyousya) でどうですか？
ネットワークにつなげていない環境で、Windowsの場合なら 「Microsoft Loopback Adapter」を使うことでDBconsoleを 使えると思います。 （参照URL） http://otndnld.oracle.co.jp/document/products/or … インストール時のIPアドレスと違うIPアドレスを割り当てたい 場合にはコマンドプロンプトから emca -deconfig dbcontrol db -repos drop emca -config dbcontrol db -repos create でDBconsoleを再構成します。 ※勉強として使用するのであれば、いっそ再インストールしてみる 　という方法もありますが(^^;
レコードが取れないということはどこかに問題があるのだと思いますが、 見た感じ明らかにおかしいところはありません。 列の型や値がもしかしたら不整合かも知れませんので以下確認願います。 【確認1】 以下のSQL結果はどうなりますか？ Select * from A WHERE A.A_Year='2009' AND A.A_Month='03' AND A.A_Day='06' AND A.A_No='1111' 【確認2】 以下のSQL結果はどうなりますか？ Select * from B WHERE B.CNo = '01' 【確認3】 以下のSQL結果はどうなりますか？ desc A 【確認】 以下のSQL結果はどうなりますか？ desc B
現状はドキュメントの「手動アップグレード」に該当するかと思います。 リカバリは成功と判断なさっていますが、アップグレード時は以下のように作業する必要があります。 そうしないとディクショナリ等が更新されないので10gとして使えません。 SQL> STARTUP UPGRADE SQL> @catupgrd.sql アップグレードガイドに従って作業を進めることを改めてお勧めします。
※最悪のケースを考えて予めバックアップすることをオススメします。 　expなどでデータだけでも・・・ ※また、当方はSolarisの知識が無いので間違っている可能性も・・・ 改善方法ではないのですがアドバイス（？）を。 > SVR4 Error: 28: No space left on device 「No space left on device」とあるので、データファイルを 追加しようとした領域に空きはあるのでしょうか？ >１）なぜ、datafile09.dbf は OSでファイルが認識されているのに、 >sqlplusでデータファイルを一覧したときには表示されないのか。 エラーが出ているので出てこない方が正解だと思います。 ファイルがOSで認識されていることのほうが不思議です。 > ２）datafile09.dbf をいったん消したいのですが、 > OSレベルで datafile09.dbf を削除してもオラクルに悪影響は > 出ないのでしょうか。正しい消し方がわかりません。 V$DATAFILE,V$DATAFILE_HEADER,DBA_DATA_FILES 上に無いのであれば Oracle上では認識されていないと思われます。 データディクショナリビュー上に無いのであれば、OSレベルで削除 してかまわないと思います。 p.s.申し訳ないですが、コレによりDBが破損してしまっても 　　私には保障できないので念のため・・・
行ロックが発生しているのでは。 http://www.systeminfinity.co.jp/sub/tech/doc/ora … http://otn.oracle.co.jp/forum/message.jspa?messa … http://634.ayumu-baby.com/oracle/oracle_killsess … を参考にして「alter system kill session」でセッションを切断してみて ください。
ORACLE 10gR2 CLIENT はNT4.0で動きましたっけ。 WIN2000からの対応じゃなかったでしょうか。
ちなみに、 「ホスト資格証明」がora_dbaのあるOSユーザ指定、 「データベース資格証明」がsysdba権限のあるOracleユーザ（スキーマ）指定です。 「データベース資格証明」のほうにSYSDBA権限のないOracleユーザを指定したりはしていないですかね？念のため・・。
これでいいのでは？ UPDATE 商品テーブル SET 備考フィールド = replace(replace(replace(備考フィールド,'%明太子味',''), 'のり味','')'のり味','');
よくよく考えると、１つのテーブルだけなので、 create table bbb as select * from aaa.bbb where 1=2; で、テーブル定義だけコピーすれば良いような気がします。 もし、索引等の定義もコピーが必要なら、エクスポートで定義だけダンプして exp userid=aaa/pass file=aaa.dmp owner=(aaa) rows=N direct=Y インポートで、定義を出力させ、コピー＆ペーストで、必要なSQL部分を切り出せば良いかと。 imp userid=ccc/pass file=aaa.cmp show=Y （インポートユーティリティは、show=Yが指定されると、画面表示のみで、インポート処理をしません。）
10gのブロンズを取得したいということですね。 >(1)「Bronze SQL基礎I　 1Z0-017J 」 >もしくは >(2)「Bronze SQL基礎I　 1Z0-017J 」　＋　「Bronze SQL基礎I　 1Z0-017J 」 書き間違えるとわけわかんなくなりますね。。 (1)「Bronze SQL基礎I　 1Z0-017J 」 もしくは (2)「SQL 1Z0-011J 」　＋　「Oracle入門 1Z0-012J 」 が正しいです。 (2)はOracle 9iのSilver FellowというBronzeレベルの資格を取得するための試験ですが、 Oracle 9iのSilver Fellowの人も試験を受け直さなくてもOracle 10gのBronzeに挑戦できるようにこの方法も認められているということで、新しく受ける場合は(1)が普通です。 >「Bronze DBA10g1Z0-041J」を受験しこちらを合格してやっとORACLE MASTER Bronze合格 となるのでしょうか。 　その通りです。厳密にはSQLとDBAの合格後に、Oracleのサイトから「申請」するとOracle Master Bronzeに「認定」されるということです。受験の順番はどちらが先でも構いません。 初心者にはDBAよりもSQLの方が敷居が高いと思います。 でもいわゆる「プログラミング」ではなく、「SQL文」をしっかり理解することが重要です(試験問題の選択肢はSQL文だらけです)。 とはいいつつも、SQL文を理解さえしてしまえば、楽勝です（ものすごく種類が多いわけではありません）。 まずは「黒本」と呼ばれている「オラクルマスター教科書」で勉強されることをお勧めします。 理解しないうちに問題集を買う必要はありません。 （オンラインでも「めざせオラクルマスター」などのページが人気があるようです）
目的が「GUIからのレコードの挿入・更新・削除」ならば Oracle SQL Developerというものがあります。 おそらく内部統制などの考え方から ＤＢ管理とデータ管理の機能を 別ツールとして分割したんでしょうね・・・ 参考URL：http://www.oracle.com/technology/global/jp/produ …
VistaマシンにOracle Database 10g Release2をインストールするにはバージョンが10.2.0.3.0以降のメディアを使用する必要があります。 http://otndnld.oracle.co.jp/document/products/or … 「Oracle Database 10g Release 2 (10.2.0.3.0) for Microsoft Windows Vista (32-bit) and Microsoft Windows Server 2008 (32-bit)」 等のメディアが必要になります。 ※Oracle E-Delivery Japan Webサイトからダウンロードできるみたいです。
>環境変数を設定したのですが、駄目でした。 >レジストリーでしょうか? レジストリは無いと思います。 ちなみにDBとDBのクライアントバージョンは何を使われてますか？ ちなみに私の環境（10gR2）で確認した内容です。 DBサーバのシステム時刻はGMTにしています。 ------------------------------------- 以下実行結果 D:\>sqlplus -s / as sysdba col sessiontimezone format a40 col current_timestamp format a40 col localtimestamp format a32 col systimestamp format a32 SELECT dbtimezone,sessiontimezone FROM dual; DBTIME SESSIONTIMEZONE ------ ---------------------------------------- UTC +00:00 SELECT localtimestamp,current_timestamp,systimestamp FROM dual; LOCALTIMESTAMP CURRENT_TIMESTAMP -------------------------------- ---------------------------------------- SYSTIMESTAMP -------------------------------- 09-03-01 01:08:43.812000 09-03-01 01:08:43.812000 +00:00 09-03-01 01:08:43.812000 +00:00 exit D:\> D:\>set ORA_SDTZ=Asia/Tokyo D:\> D:\>sqlplus -s / as sysdba col sessiontimezone format a40 col current_timestamp format a40 col localtimestamp format a32 col systimestamp format a32 SELECT dbtimezone,sessiontimezone FROM dual; DBTIME SESSIONTIMEZONE ------ ---------------------------------------- UTC Asia/Tokyo SELECT localtimestamp,current_timestamp,systimestamp FROM dual; LOCALTIMESTAMP CURRENT_TIMESTAMP -------------------------------- ---------------------------------------- SYSTIMESTAMP -------------------------------- 09-03-01 10:08:48.531000 09-03-01 10:08:48.531000 ASIA/TOKYO 09-03-01 01:08:48.531000 +00:00 exit D:\>
Oracleはcase文を発行できるバージョンですか。 であれば以下のようなSQLで可能です。 select 日付, SUM(case when タイプ=1 then 額 else 0 end )AS タイプ1, SUM(case when タイプ=2 then 額 else 0 end )AS タイプ2, SUM(case when タイプ=3 then 額 else 0 end )AS タイプ3, SUM(case when タイプ=4 then 額 else 0 end )AS タイプ4 from table group by 日付
tnsping サービス名 はつながりますか？ 後、SQLPLUSで接続した状態で select name,value from v$parameter where name like 'service_names'; の結果は？ それとtnsnames.oraの中味を出せるだけ出せますか。
マニュアルに -------------------------------------------- マニュアル引用開始 5.2 Operating System Requirements Oracle Database Express Edition is certified to run on the Business, Enterprise, and Ultimate editions of Microsoft Windows Vista. -------------------------------------------- マニュアル引用終了 とあるので質問者さんの環境ではサポートされていないようです。
ディクショナリーの中身は大文字ですので where username = 'BBS' でないとデータがとれません。 それと、ディクショナリーはselect catalog role という ロールが付与されている必要があります 但し、select catalog roleを含むロールが 付与されていれば、あえて付与する必要はないですが。
>一般的にOracleはコンピュータ名か、IPアドレスを変更した場合、サービスが正常に起動しなくなると言われています。 そんなことはありませんよ。 少なくてもOracle8、Oracle10gでIPアドレスやホスト名の変更を 実施したことがあります。 ただし、（Webベースの）EMについては一癖あるかもしれません。 （大抵停止させてしまうのでやってみたことがありませんでした） SQLserverの場合、起動しなくなるという事例はありました。 （SQLserverもレジストリを検索／書き換えて起動させたことは 　あります。サポート対象外になりかねないですが(^^;。 　過去形にしたのは現在のSQLserverがどうなっているのか 　わからないためです。）
単純に文字リテラル（'11/11 11:11:11' ）と 書式（'yyyy/mm/dd hh24:mi:ss.ff3'）が一致していないので エラーになっているのだと思います。 （年とミリ秒は入っていないですね） SQL文を使って更新するのであれば、対応するOracleクライアント をインストールされているのであればCSEでも実行できます。 （実際、CSEで10gのDBを更新してたりしていました）
おそらくその本のバージョンは10.2.0.1のものだと思われます。 Vistaに対応しているバージョンは10.2.0.3.0以降です。 参考URL） http://otndnld.oracle.co.jp/document/products/or … したがってOSを替えるかVista対応のインストールメディアが必要になると思います。 Vista対応メディアは 「Oracle Database 10g Release 2 (10.2.0.3.0) for Microsoft Windows Vista (32-bit) and Microsoft Windows Server 2008 (32-bit)」 です。
>EXITをLOOPの直後に持ってきましたが結果は同様でした。 FETCHの後じゃないと意味ないです。 loop fetch souk_cur into p1; exit when souk_cur%notfound; dbms_output.put_line(p1); end loop; close souk_cur; END;
#1です。すいません、訂正です。 項目4 EXPRESSION "SUBSTR(:項目1,-1,1)|| ' ' || SUBSTR(:項目2,-1,2)|| ' ' || SUBSTR(:項目3,-1,3)"
こんばんは。 誰も回答されていないようなので、ちょっと考えられるところを。 1.まさかとは思いますが、ディスクの物理領域か、表領域がいっぱいではないですか？デフォルトでは自動拡張のはずなので、表領域は問題ないと思いますが、別途用意した、create table spaceのスクリプトを、流しているのであれば、Enterprise Managerで表領域の拡張が制限されていないか確認してみてください。 2.アーカイブログの設定はどうなっていますか?impの際、アーカイブログがONであると、ログを作りながら、impするので、非常に遅いです。設定は、noarchivelog というキーワードあたりで検索してみてください。 　 　 　
DOSの場合 echoコマンドで標準出力してアペンドすればいいと思います。 echo aaaaa >> path\tnsnamese.ora echo bbbbb >> path\tnsnamese.ora
#2です。 >プラチナの所有者の給料がいくらなるんですか？ #2でも回答したように、「プラチナ所有＝給料が上がる」ということにはなりません。 会社により、待遇がまったく違うので、「給料がいくらになる」という答えはないのです。 私が長年勤めた会社では、一時金で5千円出るだけで、給料は変わりません。 一方、会社によっては、毎月2万円程度の資格手当が出るところもあります。
No.5です。 変数に値を入れただけになっているため、UPDATEしないといけないですね。以下のような感じになると思います。（コンパイル確認までできていませんのでご了承ください。） この方法ですとあえてシーケンスをつかわなくてもよいかもですね。 declare seq_no number := 1; cursor cur1 is select colA, colB, colC from tableA order by colA, colB -- ☆追加（カーソルをFOR UPDATE付きで宣言する） FOR UPDATE; begin for cur_rec in cur1 loop --☆変更（現在レコードにUPDATEをかける） --cur_rec.colC := seq_no; Update tableA set colC = seq_no where current of cur1; seq_no := seq_no + 1; end loop; end; /
No.5ですが、補足です。 「共有プールクリアは勝手には行われない」と書きましたのは、 「”alter system flush shared pool”は勝手には行われない」という意味で、No.6様のおっしゃるとおり、あまりアクセスされないオブジェクトがキャッシュアウトすることはありえます。 そういった場合は、CACHE確保していた分、シーケンス番号が飛ぶことになりますね。
dmpファイルの中にDDLはストレージ情報も入ってますので、 引き継がれますよ。 ただ、expで「エクステンドを圧縮しますか？」で yesにすると、ネクストのサイズが最適化されますので、 create tableで指定したサイズと異なりますが・・・。 また、impの時dmpファイルに入っている、表領域がなければ、 違う表領域に張られるかエラーになります。 （権限によってかわります。）
出来ません。
こんなんじゃだめでしょうか UPDATE テーブル1 SET テーブル1.MONEY4 = 0 WHERE テーブル1.MONEY4 > 0 AND EXISTS ( SELECT 1 FROM テーブル2 WHERE テーブル1.ID = テーブル2.ID AND テーブル1.DAT1 = TO_CHAR(テーブル2.DAT + 固定データ) AND TO_CHAR(テーブル2.DAT2 + 固定データ) = 4 )
＃１です。 ＃２さんの書かれた「トランザクションの定義」を質問者さんが理解されていたかどうかはともかくとして、 質問者さんの書かれた「Oracleのトランザクションの性質」の理解は別に間違ってはいません。 >「トランザクションは、1つ以上のSQL文を含む論理作業単位です。トランザクションはアトミック（基本）な単位です。つまり、トランザクション内のすべてのSQL文は、すべてコミット（データベースに適用）されるか、すべてロールバック（データベースから取消し）されるかのどちらかになります。 トランザクションは、最初の実行可能なSQL文から開始します。トランザクションは、COMMIT文またはROLLBACK文を使用して明示的に、またはDDL文を発行して暗黙的にコミットまたはロールバックされた時点で終了します。」 トランザクションは対象が複数のテーブルにまたがったからといって、別に開始されたりするものではありません。その意味ではデータベースレベルの概念と言ってよいです。 また、INSERT/UPDATE/DELETEでもテーブルロックはかかります。ただ同時に行レベルでもロックがかかっているので「行ロックしかかからない」といわれるだけです。 取得されるロックは、以下の通りです（質問者さんのいう特に指定しない場合） ・SELECT　　　　　　　　　　：ロックなし ・SELECT（FOR UPDATE句あり）：行レベルの排他ロックとテーブルレベルの行共有ロック ・INSERT/UPDATE/DELETE　　　：行レベルの排他ロックとテーブルレベルの行排他ロック 実際には行レベルの排他ロックにより、他のトランザクションが同じ行に対するロックを取得するのを防いでいますが、同時に低いレベルのテーブルロックもかかることにより、たとえば LOCK TABLE table IN SHARE MODE　　　　　　　　：テーブルレベルの共有ロック LOCK TABLE table IN SHARE ROW EXCLUSIVE MODE ：テーブルレベルの共有行排他ロック LOCK TABLE table IN EXCLUSIVE MODE ：テーブルレベルの排他ロック など、テーブルロックコマンドによるロック取得も防いでいます。 参考URL：http://otndnld.oracle.co.jp/document/products/or …
select ・・・ from ・・・ where ・・・ for update nowait で、できますよ。
2ノード×2の場合、1ノードが死んだらそのRACはノードがいきなり半減します。しかし4ノード×1の場合、1ノードが死んでも3/4ですみます。 縮退時のことも考慮に入れましょう。 アプリケーション・パーティショニングを行い、キャッシュ・フュージョン（ノード間ブロック通信）を減らすのはRACでは必須です。 業務ごとにどのノードにアクセスするかを決めておきます。 通常時はノード1・2に50、ノード3・4に50づつアクセスするように しておけば、負荷分散可能です。 ※テーブルが上手く業務ごとにわけれれるかが問題となります。 この辺りを調整すれば、負荷・パフォーマンスも維持できると思います。 あと、運用負荷もありますので、2ノードRAC×2の運用と4ノードRAC×1の運用の、どちらが楽かという面も考慮した方が良いと思います。
文字集合が何なのかの「回答」ではないので参考意見として http://otndnld.oracle.co.jp/skillup/oracle9i/1_1 … 「キャラクタ・セットを決める観点」「（2）」 機種依存文字なども保持できる
このSQL内容であれば、以下のようにスカラー副問い合わせ（SELECT文の中に入っている、単行を返すSELECT文）を使うのがベストだと思います。また、もしマスタに「区分＋レベル＋コード」のインデックスがなければ追加してください。 スカラー副問い合わせはマスタから名称を取るような場合に最適な方法のため、元SQLがうまく最適化されていれば同等のパフォーマンスとなる可能性もありますが、良くなることはあっても悪くなることはない書き方になります。（今回の場合。） 厳密な比較のためには、元SQLと実行計画やSQLトレースを比較してみてください。 （インデックスのほうが原因という可能性もありますね。） ------------------------------------------------------------------ select A.連番 , A.支店コード , A.部署コード , A.課コード , A.得意先コード , A.得意先住所コード , (select 名称 from MASTER_CODE where 区分＝1000 AND レベル＝1 AND コード = A.支店コード) AS "支店名" , (select 名称 from MASTER_CODE where 区分＝1000 AND レベル＝2 AND コード = A.部署コード) AS "部署名" , (select 名称 from MASTER_CODE where 区分＝1000 AND レベル＝3 AND コード = A.課コード) AS "課名" , (select 名称 from MASTER_CODE where 区分＝1100 AND レベル＝1 AND コード = A.得意先コード) AS "得意先名" , (select 名称 from MASTER_CODE where 区分＝1100 AND レベル＝2 AND コード = A.得意先住所コード) AS "得意先住所" from TRAN_TABLE A ;
ユニーク索引があるなら、その索引を使ってプライマリーキーを追加可能です。索引の名前は変えないようですので、そのままプライマリーキーを追加すればよいのではないでしょうか。 alter table ccc add constraint PK_CCC PRIMARY KEY (bbb); 確認用SQL select * from dba_constraints where table_name ='CCC'; select * from dba_cons_columns where table_name='CCC';
なんとなく、ORACLE_SIDの環境変数の設定あたりが怪しそうな 気がしますが・・・ 障害に対する情報ではないのですが、参考として。 Windowsプラットフォームの場合、データベースの起動は バッチ処理で起動するようにします。 サービス起動時にDBインスタンスも起動する設定をしないようにし (1)ORACLE_SID環境変数の設定 (2)サービスの起動（net startコマンド） (3)sqlplusでstartupの実行 (4)listenerの起動（lsnrctlコマンド） を実行するバッチをグループポリシーのスタートアップスクリプト などに登録します。 バッチの結果をリダイレクトしておけば、エラーになったときも 確認取れますし。 終了もサービスに頼らずにシャットダウンするバッチを作成し グループポリシーのシャットダウンスクリプトに登録します。
こんにちわ 考え方・視点を変えて、『長嶋さんが現役でサードを守ってるもん』 って思えば出来るますよ。 長嶋SQLです。
シェルから単純にSQL*Plusを呼んで $?で取得すればよいのではないのでしょうか。 シェルには #!/bin/sh sqlplus user/pasward@tnsname @aaa.sql $IN_PARAM return_code=$? SQLには、 variable retcd declare result number; begin procedureA( &1, result); :retcd := result; end; exit :retcd
Windows版のオラクルは、PL/SQLでCOMオートメーションを利用できますので、 EXCELを起動し、セルに情報を追記することは、可能です。（標準機能） オラクルサーバにEXCELがインストールされている必要がありますけどね。 ただ、EXCELで統計資料を作成するのが目的なら、EXCEL側にVBAでオラクルデータを 読み出して、資料を作成する方が簡単かつ事例がたくさんあるように思いますよ。
10gではこの処理以外は良好な速度で稼動しているのですかね？ 10gと9iの環境で処理時間が劇的に違いすぎる感じですね。 10gと9ｉは同じマシンではないですよね？ テスト中のCPU、メモリの稼動状況も比較確認してみたほうがよいです。 ホスト的に問題なしであれば、 １．STATSPACKレポートで7時間のうち、主に「何の処理」をしていたか調べる ２．１の結果で改善箇所が明確にならない場合は、SQLトレースを取る ということをすれば悪い箇所が明確になると思います。 ３．２の結果で非常に遅いSQLがあった場合、実行計画を表示して分析する という流れになるかと思います。
No,1です。 IDがユニークになってるのでしたね。 申し訳ありません。 副照会(キー抽出)を カテゴリー毎に最大日付をとるようにしてみたら いかがでしょうか。 SELECT A.CATEGORY, A.ID, A.CREATE_DATE FROM TABLE_NAME A, (SELECT CATEGORY, MAX(CREATE_DATE) as CREATE_DATE FROM TABLE_NAME GROUP BY CATEGORY) B WHERE A.CATEGORY = B.CATEGORY AND A.CREATE_DATE = B.CREATE_DATE
１．Osqledit シェアウェアで4000円ですが、テーブルをINSERT文にできる以外にも非常に使い勝手がよく、おすすめです。最初はお金払わなくても全機能試用可能なのでぜひ試してみてください。 ２．SQL Developer OracleのOTNサイトからダウンロードできる無料のツールです。 かなり機能は充実しており、11gからは標準のツールとして付属するらしいです。PCスペックが悪いと若干動作が遅くなるところがありますが、いいマシンをお使いであれば問題ないですね。 ３．データパンプエクスポート Oracle10gのexpdpというデータをダンプ出力するユーティリティに、「SQLとして出力する」とゆうオプションがあります。このオプションを使ったことはないのですが、自動的にバッチ処理でテーブルをSQL化する、などの本格的用途の場合はこれが良いかもしれません。Oracleユーティリティガイドなどを読んで確認してみてください。
後者のケースではこちらで試した限りは count(count(colA)) --------------------- 0 というようにゼロが返ってきますね。 ただ、問題はそこよりも「Group By」していることだと思います。 Group Byは条件に合致したレコードに対して行うので、該当するレコードがなければ、キーも存在しないので、NULLになりますが、 Group Byを切らなければ、かならず０が返るはずです。 もし、グルーピングしたColBの件数が取りたくてやっているのであれば、 SELECT COUNT(DISTINCT ColB) FROM ...が普通です。
一旦DROPして再設定するしかないと思います。 ALTER TABLE TMP DROP CONSTRAINT FK_COL3; ALTER TABLE TMP ADD CONSTRAINT FK_COL3 FOREIGN KEY (T_COL3) REFERENCES EMP(E_COL1) ON DELETE CASCADE; 具体的には http://otndnld.oracle.co.jp/document/products/or … MODIFY CONSTRAINTはENABLE/VALIDATEなどの設定変更のためにしか使えないです。
統計について言及されていますが、B.SQLの実行計画を確認することも重要です。現状とあわない統計に基づいて実行計画を立てていた場合、非効率な実行計画が表示されていたはずです。（800万行もあるのにROWSが1となるなど） DBMS_STATSで解決したら良いですが、しなかった場合は、「コストベースで立てたプランが悪い実行計画となってしまった」ということが考えられます。コストベースだと、ほぼ同じデータでもある日突然遅くなることが十分考えられます。こっちの場合は、SQLにヒント句を組み込み、以前のような良い実行計画に誘導するやり方が考えられます。 もしくは、ダイレクパスロードのミスで主キーインデックスが壊れてしまい速度劣化するような場合などもありますが、いずれにしても、もしまだ遅かったら実行計画を出して分析してみてください。よく分からない時はここに実行計画を貼り付けたら皆さんがアドバイスくれるかと思います。
＞添付について HELPを見たところ、質問・回答時に添付できるようです。 この質問はいったんクローズし、改めて別質問を追加していただいて、そこに必要なファイルを一式圧縮して添付していただければ良いのではないかと思います。
SQL単文でなくトランザクションの成否を要素とするなら、ROWレベルトリガでファイル出力は無理があります。 ログの出力先をオラクル上のテーブルとし、事後にファイル出力する形態にした方が無難かと思いますよ。 なお、自律型トランザクションは、トランザクションが独立してしまい、本体トランザクションの成否に関わらず、 動作してしまいます、今回の場合は、使ってはなりません。
2)について。 先に2行目から。 set SPATH1=1.OracleClient9.2.0.1.0 これは、SPATH という名前の変数に、"1.OracleClient9.2.0.1.0" という文字列を値としてセットします。 1行目も同様ですが、ここで "%CD%" の部分は「CD という名前の変数の値（の文字列）」に置き換えられます。 変数 CD は特殊な役割をもつ変数で、カレントパスがセットされています。（この例では、このbatファイルの置かれている場所（フォルダ）をあらわす文字列だと思ってください。 たとえば、このbatファイルが、Eドライブの"OracleSetup"というフォルダに置かれているとすると、変数 CD の値は "E:\OracleSetup" となっています。） set RUNPATH=%CD% 上の例でいえば、"%CD%" が "E:\OracleSetup" に置き換えられて set RUNPATH=E:\OracleSetup ということになり、変数 RUNPATH に "E:\OracleSetup" という値がセットされます。 3行目も同様に置き換えられて、上の例の場合、 1.OracleClient9.2.0.1.0\install\win32\setup.exe -responseFile E:\OracleSetup\1.OracleClient9.2.0.1.0\Response\clientruntime.rsp というコマンドになります。 "-responseFile" は、この setup.exe （ORACLE のセットアッププログラム）のオプションで、その後ろに記述された名前のレスポンス・ファイル（clientruntime.rsp）を使用してインストールを行う、という指定だそうです。 http://otndnld.oracle.co.jp/document/products/as …
CSVファイルを作ったＯＳはLinuxですか？ CSVファイルをLinuxで参照したとき^Mのような文字は出てませんか？ また、データは日本語を含みますか？
あ！、肝心の質問に対する回答してないや >バックアップファイルを戻してからOracleインストール時にまで戻す リカバリーはこのような事を言っているのではありません > Oracleの場合はリストア→リカバリの順番で処理させてる DBの場合更新ログがありますのでリストア後にこのログを使って特定の日時 時点へ復旧させる事が可能なのでこのような表現がされているのだと思います
これだけの情報では分かりかねます。 ・オラクル本体のサービスは立ち上がっていますか。 ・立ち上がっているのならオラクルをインストールしたユーザーでローカル 　で「SQLPLUS / as SYSDBA」で接続は可能でしょうか。
#1です。 >要はテーブル名が可変なファンクション 結局それを実現するのが、「EXECUTE IMMEDIATE」か「DBMS_SQL」を使う、と言う事になると思います。 >同じようなSELECT文が実際のコード上では２０回以上 これを動的SQLでまとめたとしても、実際は違うSQL（テーブルが違うなら間違いなく違うSQLです）を発行しているので、その点では、ストアド化でパフォーマンスが大きく改善する事はないと思います。 動的SQLの場合、解析の時間も余計に食いますし。 解析の時間を減らす、と言う意味では、パラメータは、code, Table1のままにして、動的SQLではなくロジックでELSIFで冗長に判断する方がいいでしょうね。 それよりも、１つ１つの実行計画が良好なものであるなら、20発くらいの連投はパフォーマンスに大きな影響はないはずですよ。バッチ処理ならなおさらです。
ネットワークは、DHCP構成ですか？ もしそうであれば、Microsoft LoopBack Adapterをハードウェアに追加する必要があります（簡単に追加できます）。また、ハードウェアの追加に加えて、hostsファイルの設定変更も必要となります。 とりあえず、 ネットワークがDHCP構成かどうかだけ教えてください。
MS Officeが普通にできれば、大丈夫です。 ちなみに私は50代後半ですが、過去に（30年くらい前）SE（システムエンジニア）をしていましたが異業種に転向し、約8年前、40代後半にまたIT業界で仕事をするようになりました。古いOSやシステムしか知らない私は必死になって新しいOSや言語に挑戦し、今ではVB、VC++、PL/SQL、Shell、Ruby、VBAを使いこなせるようになり、OracleもEBSというシステムでのSEとしてのマネージメントができるほどになりました。サーバー構築も小規模のものなら何とかできると思います。ただし、こうなるまでには、自分で言うのもなんですが、かなりの勉強を必要としました。 要は、どんなスキルよりも、自分に対していかに妥協せずに、スキルアップをして行けるか、という向上心の強さと忍耐力が必要だと思います。目先の仕事だけにとらわれず、大きな視野で努力なさることを期待します。「必要こそ発明の母」ではないですが、努力と忍耐こそ夢の実現の大きな要素です。頑張ってください。
その通りです。２つの試験に合格後、Webから申請するとブロンズが認定されます。 http://www.oracle.com/global/jp/education/certif … DBAはOracleというデータベースに関する知識、SQL基礎はSQLに関する知識です。ただ、この２つの試験はそれぞれ独立したものですので、２つ一緒に受ける必要はありません。またオラクル試験の合格履歴と資格認定は基本的に失効しないので、２つの受験の間に時間があいても問題ありません。 現在は10g、11gの試験がありますが、上記リンクの通り、SQLに関しては10g用の試験(1Z0-017J)を受けても、11g用の試験(1Z0-051J)を受けてもブロンズ11gの認定条件は満たします。 （つまりSQLについては10gも11gも大差ないということ） 一方DBAの方は、DBA10g(1Z0-041J)／DBA11g(1Z0-018J)は別で、それぞれ該当するバージョンの認定にのみ有効です。 どちらを受けるかについては、 ・DBAに関しては、11gの方が機能が増えている分だけ少し範囲は広い。ただし、ブロンズ10gを後でブロンズ11gに移行しようとすると、結局DBA11gの試験にも合格しなくてはならない http://www.oracle.com/global/jp/education/certif … ・SQLに関しては、10g用の方が相対的にやさしいが、合格点は11gの方が低い ・今仕事などでオラクルを使う環境にあるならば、そのバージョンのものを勉強した方がいい ・常に新しいバージョンの資格に更新し続けるつもりがあるなら、最初から最新バージョンのものを受けた方がよい などでしょう。
こんにちは。 ＞＞やっぱ、諦めざるをえないですかね。。。 そうですね・・・。 いったんLOBに変更できてしまえば、DBMS_LOB.SUBSTR()でもできますが、 このTO_LOB()が厄介で・・・。 （普通のSELECTでは使えないんですよね～） PL/SQLが駄目ということですが、自作関数レベルならいいのではないでしょうか？ それでよければ具体例など提示しますが・・・。
10gの方法で、11とは仕様が異なる可能性がありますが Oracleディレクトリの削除 レジストリからOracleの名前の付いたキーの削除（下位Oracleがインストールされてない事が条件） 環境変数からOracleのパスを削除 以上です。インストーラ経由でやるのと大差はありません。
うーん、あまり考えられませんね。 9iの環境で簡略して環境でやってみましたが、正常にSELECTできましたよ。
>今日中しか時間がありません。どなたかお知恵をお願いします。 とのことなのでこんな遅い回答役にたたないのでしょうが後学の為と思い 記載いたします。 >ユーザーがPCをガンガン落としたようです。 突然のシャットダウンによりoracleデータベースのデータファイルと CTL．ORA（コントロールファイル）の不整合が発生すると 起動時　Initialization（初期化）に失敗しoracleが起動できなくなります。 エラー内容は不整合の発生したDBFファイルを指しています。 この場合recoverだけでは修復できません。 修復するにはまず不整合を解決しなければならないからです。 不整合の解決は現状のデータファイルからコントロールファイルを作成しなおすのが もっとも早道といえます。 oracleの環境変数ORACLE_SID=****を指定し oracleマネージャでsysでログインします。 STARTUP NOMOUNT　でデータベースをマウントせずスタート CREATE CONTROLFILE REUSE DATABASE "ORCL" NORESETLOGS NOARCHIVELOG MAXLOGFILES 32 MAXLOGMEMBERS 2 MAXDATAFILES 20 MAXINSTANCES 16 MAXLOGHISTORY 1600 これもINIT.ORAの内容にあわせて数値は書き換えてください。 LOGFILE GROUP 1 'd:\oracle\database\log1ORCL.ora' SIZE 200K, GROUP 2 'd:\oracle\database\log2ORCL.ora' SIZE 200K 　あなたの環境にあったログファイル名を記載してください。 DATAFILE 'd:\oracle\database\sysORCL.ora', 　以下すべてのデータファイル名をカンマで区切って列挙 'D:\oracle\DATABASE\usr5orcl.ora'; これでコントロールに内容が現状に合わせて書き換えられます。 その後に RECOVER DATABASE しばらく時間がかかりますがプロンプトが帰ってくれば ALTER DATABASE OPEN; これで起動してきます。 ORA-10567:Redo is inconsistent with data block(file# 3, block# 27669) ブロックエラーもあるようなので完全に保障の出来る対処ではないかもしれません。 あらかじめファイルのDATABASEフォルダのファイルすべてのバックアップを取ったうえで お試しください。 長文失礼しました。
こっちです。 オラクル　ダイアグノスティクス　パック アクセントはノの方で。 （どちらかというとナに近い発音）
残念ですが、9iであればDBMS_SQLを使うしかないでしょう。
参考URLにもあるとおり、Home Editionでの動作は確かに サポートしていないですね。 ただし、サポートしていないのと動作しないのとは違うので ダメで元々、インストールしてみてはいかがでしょうか。 もしかしたらうまく動くかもしれません。 http://www.oracle.co.jp/forum/thread.jspa?messag … では動いたようです。
dba_usersに出てこない以上、そのユーザはデータベース上には存在しないかと思います。 そのパッケージソフトが、どのような構成をしているのかわかりませんが、パッケージ上のユーザとデータベースのユーザが別なのではないでしょうか。 パッケージ上のAというユーザが、データベース上のXというユーザにログインして動作するというのは、よくあるパターンです。 パッケージのサポートに確認するのが良いかと思います。
要件が漠然とし過ぎていて予想でしか答えれませんが、 納品書データを持ったテーブルと明細書データを持ったテーブル、 および納品書データの一貫番号となるSEQUENCEオブジェクトがあり 明細書データを元に納品書テーブルのデータを作成していき 納品書と明細書を紐付けるという解釈でよろしいでしょうか？ 一応書いてみました。 |CREATE OR REPLACE PROCEDURE [SCHEMA].[OBJECT_NAME] IS | CURSOR c1 IS | SELECT [明細書一貫番号] | FROM [明細書テーブル] | WHERE [対象を絞り込むための条件] | ; | l_c1 c1%ROWTYPE; | l_count PLS_INTEGER; | l_seq NUMBER; |BEGIN | -- 変数の初期化 | l_count := 0; | l_seq := 0; | | -- 納品書番号の取得 | SELECT [定義済みseq].NEXTVAL INTO l_seq FROM DUAL; | | -- 対象明細書カーソル | OPEN c1; | LOOP | l_count := l_count +1; | FETCH c1 INTO l_c1; | EXIT WHEN c1%NOT_FOUND; | | -- 納品書テーブルレコード作成 | INSERT INTO [納品書テーブル]( | [納品書番号] | ) VALUES ( | l_seq | ); | | -- 明細書テーブルレコード更新 | UPDATE [明細書テーブル] SET | [納品書番号] = l_seq | ,[明細書番号] = l_count | WHERE [明細書一貫番号] = l_c1.[明細書一貫番号] | ; | | -- カウンタリセット、納品書番号再採番 | IF l_count = 6 THEN | l_count := 0; | SELECT [定義済みseq].NEXTVAL INTO l_seq FROM DUAL; | END IF; | END LOOP; | COMMIT; |EXCEPTION | WHEN OTHERS THEN | ROLLBACK; | DBMS_OUTPUT.PUT_LINE(SQLERRM); |END; 当方の回答が的外れだったとしてもものすごく単純で簡単なプログラムに なると思います。OTNなどでマニュアルを読まれた方が早いかもしれません。 参考URL：http://www.oracle.com/technology/global/jp/index …
私は、SQLの基本的な知識は持ってましたので１週間の勉強で取得できました。 SQLの勉強も含めても、１ヶ月もあれば余裕じゃないでしょうか。
Oracleでは、SQLとして実装されていません。 お使いのバージョンよっては、簡単に取り出すパッケージを用意されているので、 同等のことは可能です。 http://www.shift-the-oracle.com/plsql/dbms_metad … 簡単なコーディングですが、それも面倒なら、OEMでSQL文は表示できますので、 コピー＆ペーストした方が早いかも知れません。 もし、古いバージョンをお使いでMETADATAパッケージが利用できない場合、 エクスポート＆インポートユーティリティで、定義情報だけエクスポートして、 その内容を表示するという方法でテキスト化が可能です。
トランザクションの管理(１)～トランザクションの基礎 http://www.grapecity.com/japan/devclub/Consultan … 「トランザクション」という名称について ＞ところでこの名称、DBMSが当たり前になる以前のCOBOLなどで業務 ＞処理を作っていた人の中には、別の意味を示す言葉として受け取る ＞人もいるかもしれません。 ＞過去の業務処理ではテーブルに対して『マスターとトランザクション』 ＞という分類が存在したのです。これは、あくまでプログラマーから見える ＞レベルでの、テーブルの用途を基準とした分類による呼称です。 おそらく上記の意味で使っている様に思われます。
OEMを使う方法ではありませんが、 参考URLのページにLogMinerの使い方が詳細に書かれています。 ただし、結構手順は複雑ですのでお試しになる際には あらかじめバックアップなどを取得しておくことをお勧めします。 参考URL：http://otn.oracle.co.jp/beginner/PAK/ha/redolog. …
>>oracle Database 10g を利用したい どのように利用されたいかは分かりませんが、 他の回答にもありました通りTrialよりもExpressを オススメします。 文字コードについては初期化パラメータの設定にて変更可能です。 ただ、当方担当の現場にOracle10gExpressをインストールしていますが "JavaからOracleを操作する"ことは出来ますが "Oracle上でJavaを扱う"事はサポートされていないかもしれません。 蛇足ですが、Expressの場合デフォルト時の最大セッション数が10に 設定されているので必要であれば変更して下さい。 これを知らずに10を超えると以降のセッションが受け付けなくなり 「何事！？(゜Д゜;)」ってパニクります。 参考URL：http://shodai.hp.infoseek.co.jp/oracle_global/or …
> さらにこのＳＱＬでだした結果data1, data2, data3 の数をcountで集計したいと思ってるのですが、うまくいきません・・・。 これって何がやりたいのか日本語で仕様を説明してください。 各レコードでdata1, data2, data3にデータが入っている数を出すという意味ですか? 100| あああ | いいい | ううう --> 3件 101| かかか | null | null --> 1件 102| null | さささ | null --> 1件 103| null | null | たたた --> 1件 であれば、以下で出せます。 select NVL(field1,NVL(field2,field3)) field4, data1, data2, data3 (nvl(data1,0) + nvl(data2,0) + nvl(data3,0)) from XXX
>サーバー（ホスト名；aspire） >VistaHomePremiumSP1 多分、OSがソフトウェア要件を満たしていないせいだと思われます。 参考URL：http://otndnld.oracle.co.jp/document/products/or …
SELECT MAX(LENGTHB(B)) FROM A では？
UTL_FILE.FCOPYの引数の「start_line」、 「end_line」は 「コピー操作を開始する行の番号」、 「コピー操作を停止する行の番号」ということらしいので バイナリファイルを操作するのはダメかもしれないですね。
> systemではall_directoriesに入っていることを確認しましたが > userには何も入ってきておりません。 > それが問題だと思うのですが如何でしょうか？ ディレクトリオブジェクトは、たとえユーザでCREATE DIRECTORYを 実行したとしてもユーザの所有物にはならないようです。 ＃私の環境だとSYSの所有物になりました。
もしかしたら、SQLPlus限定の話でしたか？ （そんな気がしてきました） それでよければ#3さんのように置換変数を使ってやっていただければいいかと思います。 その意味では蛇足ですが、一旦テーブルに受ける方の例を書いておきます。 CREATE OR REPLACE PROCEDURE POP_WORK(inA VARCHAR2) IS outA VARCHAR2(100); cntA VARCHAR2(100); BEGIN SELECT MAX(TABLE_NAME) INTO outA FROM ALL_TABLES WHERE TABLE_NAME LIKE UPPER(inA) || '%'; SELECT COUNT(*) INTO cntA FROM ALL_TABLES WHERE TEMPORARY='Y' AND TABLE_NAME='GTT_' || outA; IF (cntA > 0) THEN DBMS_OUTPUT.PUT_LINE('GTT_' || outA || ' ALREADY EXIST'); ELSIF (outA IS NOT NULL) THEN EXECUTE IMMEDIATE ('CREATE GLOBAL TEMPORARY TABLE GTT_' || outA || ' ON COMMIT PRESERVE ROWS' || ' AS (SELECT * FROM ' || outA || ')'); DBMS_OUTPUT.PUT_LINE('GTT_' || outA); ELSE DBMS_OUTPUT.PUT_LINE('NO TABLE'); END IF; END; / プロシージャが作成されました。 SQL>SET SERVEROUT ON SQL>EXEC POP_WORK('TBL'); GTT_TBLC PL/SQLプロシージャが正常に完了しました。 SQL>SELECT * FROM GTT_TBLC; SQL>TRUNCATE TABLE GTT_TBLC; SQL>DROP TABLE GTT_TBLC;
おそらくダウンロードするファイルがDB以外のものをダウンロードしているようです。 データベースだったら以下のメディアです。 「Oracle Database 10g Release 2 (10.2.0) JP Media Pack for Microsoft Windows (32-bit)」
無駄な空行が邪魔してるんじゃないですか？
お使いのバージョンとエディションが判りませんが、分析関数の使える ８ｉエンタープライズ、９ｉ以降のスタンダードエディションならば select x.* from(select z.*,row_number(partition by ID,NO,POINT order by 番号) R from TABLE z) x where x.R=1; select x.* from(select z.*,row_number(partition by ID,NO,POINT order by 番号 desc) R from TABLE z) x where x.R=1;
前の方のおっしゃるとおり、DELETEしただけでは領域は開放されません（ハイウォーターマークが下がらない）ので、以下を試してみてください。 １．該当テーブルの全件削除で良い場合 truncate テーブル名 drop storage; を実行する。 これで領域も開放されます。（最後のところをreuse storageとすると領域保持する意味となる） ２．部分的にdeleteして、領域を開放したい場合 alter table テーブル名 enable row movement; alter table テーブル名 shrink space cascade; alter table テーブル名 disable row movement; を実行する。 1行目は領域開放の前準備、3行目は1行目の変更を元に戻す意味。 2行目でcascadeしておくと、関連インデックスの領域も一緒に縮小してくれます。
質問者です。 自己解決しました。 リスナーの起動と、oracleエンタープライズマネージメントの起動を 行っていませんでした。 === # su - oracle $ lsnrctl start $ emctl start dbconsole
どのツールを使ってバックアップするかはバックアップ／リストア要件によってある程度決まってくると思います。 バックアップにかかる時間、リストアにかかる時間、どの時点まで復旧する必要があるか等。 RMANに関してもいろんなバックアップ方法があります（全体、増分、差分、etc・・・・）。 また、データ量、Oracleのエディション、バックアップ先の容量、書き込みスピードなどでもバックアップ方法は変わると思います。 ツールの注意点は以下のような感じです。 1. データ量が多い場合には向かない。 2. COMMITのパラメータが無いため、大量のデータをインポートする際にUNDO表領域、一時表領域が多く使う場合がある。 1.2.は論理バックアップなのでDBが破壊された場合にはDB復旧は別手段で実施が必要です。 3. 特定のデータのみを元に戻すケースはあまり向かないがDBや表領域を戻す場合には有効。 そういうわけなので(^^;一度マニュアル等を確認して、どのバックアップが合うのか検討してみてください。
正規表現がいけないのではなく、条件の書き方の問題だと思います。 Oracleには空文字はなく、NULLとみなされるため、 REGEXP_REPLACE(列Ａ, '[0-9]{4}','') IS NULL と書かないといけないということでしょう。
select a.*,b.* from table1 a, ( select no, 項目, max(decode(種別,'01',結果)) 結果１, max(decode(種別,'02',結果)) 結果２, max(decode(種別,'03',結果)) 結果３ from table2 group by no,項目 ) b where a.no=b.no and a.項目=b.項目; とかで良いと思いますけど。
質問からの先読みとなりますが、 統計収集パッケージを実行するとコミットされてしまうようなので不可、 となりますと、動的サンプリングを使うと良いかもしれません。 動的サンプリングとは、SQLを実行する瞬間に表の統計情報を取得するやり方で、SQLのヒント句もしくは、DBの、OPTIMIZER_DYNAMIC_SAMPLINGパラメータで動作を制御できます。 具体的には、 大量データ挿入⇒挿入したデータを基にファイル作成（動的サンプリングヒント句つき） で対処できるのではないかと思います。 詳しい使用方法は、Oracleパフォーマンスチューニングガイドや、各種Oracle系情報サイトなどで調べてみてください。 <10gドキュメントのリンク> http://otndnld.oracle.co.jp/document/products/or …
速度を度外視すれば、VM上での動作も可能なので、VMwareを導入して、 ゲストosに、Linux系osを利用するというのも可能です。 Debianなら、コマンド一発でXE版がインストールできるので、楽かと思いますよ。
>create view TEST_VIEW as >select A.rowid AROWID,A.Test1 ID,A.Test2 TITLE,3 MARKER from TEST_TBL1 A >union all >select B.rowid AROWID,B.Test1 ID,B.Test2 TITLE,4 MARKER from TEST_TBL2 B; あのー、TEST_VIEWにはすでにTEST2というフィールドはありませんよね？ （TITLEにリネームしています）
100バイトなのでlengthbで調べます。 ※文字数ならlength select a,lengthb(a),length(a) from table where lengthb(a) > 100 こんな感じです。 select ename,lengthb(ename),length(ename) from scott.emp where lengthb(ename) > 4 order by 1; ENAME LENGTHB(ENAME) LENGTH(ENAME) -------------------- -------------- ------------- ALLEN 5 5 BLAKE 5 5 CLARK 5 5 JAMES 5 5 JONES 5 5 MARTIN 6 6 MILLER 6 6 TURNER 6 6 8行が選択されました。
常識的に考えると、型の変換は、その先にデータ型に依存する”何か”があるから・・ 何だと思いますが、外部プロシジャなどの外部とのデータ交換等があれば、 型を変換する必要が生まれます。 オラクルだけしか利用しないなら、数値はnumber型で十分ですので。
ユーザーズガイドの「DBAでのiSQL*Plusの起動」をご覧ください。 （9iの場合はisqlplus/dbaでなく、isqlplusdba） http://otndnld.oracle.co.jp/document/products/or …
(1) 9iR2(9.2.0.4)からOracle10gR1(10.1.0.2)にバージョンアップした際、 10gR1のバグで、今まで行なっていた処理の結果が9iと異なっていた。 対策 サポートにパッチを作ってもらいました。 ※守秘義務で詳しい内容は話せません。 (2) フラッシュバックドロップの機能のせいでテーブルを削除しても削除済みの状態で残ってしまう。ディクショナリ上も消えないので、ディクショナリを利用した処理で不都合が生じた。 対策 初期化パラメータを変えて、デフォルトで削除するようにした。 (3) Viewを複数組み合わせた複雑なSQLを使った処理が時間内に終わらなくなった。元は10分位で終わっていた処理が3時間くらいになりリミットの時間内に処理が終了しなくて必要なデータが業務時間内に用意できなかった。 対策 パラメータを変えても、アナライズの方式を変えても、SQLを変えてもパフォーマンスが変わらなかったので、実テーブルの持ち方自体を含めて処理方式をを変えた。 パフォーマンスも業務に支障がでればトラブルです。 10gからはルールベースがサポート外になったのと、自動系の管理方法が増えたので実行計画が変わってしまうケースは多かったです。 単純な処理では問題にならないんですけど、複雑なSQLでは支障が出ていました。 どんな処理でも実機で流して結果が同じ、かつ要求性能を満たさない限り、大丈夫だとは誰も保証できません。 そのために並行運用期間を設けて、同一データで現環境・新環境で検証を行ないます。
ビューにしたわけですね。今回のビューのレイアウト（厳密にはID,DATE,ROOM_NO)でテーブルを用意し、 そこから表Ａのようなビューを作成するのが通常のデザインだと思います。 ちなみに表Ａのレイアウトだと、PL/SQLでやってもあまり楽にはならないです。 PL/SQLで別アプローチを取るとしても、CAL01からCAL31までをデリミタ付で結合した文字列から、 指定ROOM_NOの登場件数をカウントする関数を作成するくらいですね。
>一つ判明したのですが、最後の「and E.制御コード IS NULL」を抜くと結果は同じ(2行選択)になりますが、 >入れると結果に相違(2行選択と無し)が出ます。 >is nullの解釈がremote表の操作だと変わるのでしょうか？ >ただ、is nullの対象レコードの結果比較は同じになります。 問題点は絞られましたが、DBリンク経由のシノニムでNull値がかわるとは聞いたことがありません。 以下をお勧めします。 (1)dump(E.制御コード)で、実際の値になにが入っているのかを調査 (2)トレースを取ってOracleサポートへ問い合わせ
こんにちは。 質問者様が >基本的に共有サーバでas sysdba , as sysoperで接続不可 を勘違いされているのでは？接続可能ですよ。 「パスワードファイル」で調べる事をおすすめします。
Oracleはデータベースとインスタンスは1対多の関係です。 ※RACの場合、どのインスタンスに接続しても同一のデータベースを参照します。 インスタンスに接続した時点でデータベースは決定されます。 SQL ServerやSybase ASEはインスタンスに複数のデータベースが作成できますので、そちらと誤解しているのではないでしょうか?
こんにちは。 No.1の方がおっしゃっているように、同一サーバ内では ORACLE_SIDの値を重複させ、起動する事は出来ません。 なのでクライアントからの接続も考慮する必要なしです。 (起動するインスタンスが常に1つのみという事であればまた別です) No.2の方のグローバルデータベースは、同一データベース名を 識別するためのものであり、この質問とは無関係です。 ＃No.1にて回答されているためポイント辞退
動作環境のその他必要条件は満たしてますか？（参考URL参照） gacutil.exe はVisualStudio.NETや.NetFramework SDKに入っているツールです。 「Oracle Developer Tools for Visual Studio .NET は Visual Studio .NET 2003 あるいは Visual Studio 2005 を必要とします。」 とあるのでその辺だと思われます。 参考URL：http://www.oracle.com/technology/global/jp/softw …
マニュアルの「UNION ALLを含むマテリアライズド・ビューの高速リフレッシュに関する制限」は読まれました？ ・高速リフレッシュには、テーブル１、テーブル２にマテリアライズドビューログが必要ですので作成してください。 ・UNION ALLを行う場合、ROWIDとUNION ALLマーカーが必要です。 つまり、Viewは最低でもROWIDとマーカーの２項目が追加されてないとだめです。 ということで、ビューは変更できない質問者さんは、 ・高速リフレッシュはあきらめる ・ビューを経由するのはあきらめ、直接マテビューにUNION ALLを切る CREATE MATERIALIZED VIEW TEST_MVIEW REFESH FAST ON DEMAND AS SELECT 1 Mk,ROWID CRID,Test1,Test2 FROM TEST_TBL1 UNION ALL SELECT 2 Mk,ROWID CRID,Test1,Test2 FROM TEST_TBL2 ということになります。
リファレンスマニュアルにデフォルト値が載っています。 OSで異なるものは「オペレーティング・システム依存」と 書いてあります。 その場合は「固有OSのマニュアル」を参照してください。
OTNは探されましたか？ 「Oracle Databaseデータ・ウェアハウス・ガイド」 バージョンもわかりませんが、91も10gも11gもWebで見られます。 (11g) http://otndnld.oracle.co.jp/document/products/or … (10g) http://otndnld.oracle.co.jp/document/products/or … 一般的な制約は第８章を見れば書かれています。 それで確認できなければ、その点をピンポイントで質問する方が、「制約について思いつくものをあげてください」と聞かれるよりも遥かに回答しやすいと思います。
日付のカラムに索引が付いているなら、日付項目を関数で加工すると索引が使われなくなります。 索引があるなら、右辺側で１１月中かどうかの範囲指定をする方が合理的です。 where 日付 between to_date('2008/11/01','yyyy/mm/dd') and to_date('2008/11/30','yyyy/mm/dd'); 日付のカラムに索引が付いていないなら、日付のカラムを関数で加工してもしなくても 変わらないので、＃１さんのような書き方が簡単明瞭で良いかと思います。
検証してないんですが・・DISTINCTを使えば簡単なんじゃないですかね？ select distinct C.日付,X.キー from ( select 日付,キー from B union select 日付+1,キー from A ) X,C where C.日付>=X.日付 and C.日付<=trunc(sysdate,'DD') ;
そのオラクルのデータですが、 テーブルですか？ もしACCESSでそのテーブルが参照できる 状態になればExcelに変換できます。 わからなかったらHELPを見てください。 ACCESSの設定をするためには、 (1)PCの環境ファイルにインスタンスとサービス名を記載する。 (うろ覚えですがnetwork_adminフォルダにあったかと思います。） (2)ACCESSのDSNを作成（ここにサービス名、スキーマ名を指定） (3)テーブルのリンクにより(2)で作成したDSNを選択し、 スキーマ名等を入力。 以上の手順を踏めばとりあえず ACCESSでテーブルを参照できるのではないか と思います。
crontabから起動すると、.profileが読まれません。 つまり、環境変数がセットされない状態でシェルが起動されます。 ですので、sqlplusパスやORACLE_SIDなどもセットされていません。 各種設定ファイルを別ファイル化しておいて 起動時に読み込ませる必要があります。 あと、crontabに登録する際は標準出力、標準エラーを リダイレクトしてログに書き込めば原因がわかりやすいです。
「Silver DBAは本を読んだだけでも受かるか」という質問であれば、答えはYesです。 オラクルというデータベースを理解するための勉強のモチベーション維持として資格試験を考えておられるならば、そういう考え方もあるかもしれません。 ただ、自分は資格保有者であると会社に言ったり履歴書に書いたりすることを考えているのであれば、聞いた方は普通ペーパー資格だとは受け取らないでしょうね。 誰もが業務でオラクルを使えるわけではないでしょうが、自己啓発ならば家でもできるわけですから、知識を身につけるためにそこは手間を惜しむところではないと私は思います。 なお、資格試験が目的であれば、勉強用にはExpressではなくEnterpriseの評価版を使うことをお勧めします。 評価版はもちろん期限付きですが、Expressでは試験範囲をカバーできない可能性があります。
"select * from v$session"で殆どの要求を実現できるでしょう ただ実行するためにはSYSTEMでログオンするか、ユーザーにSELECT ANY TABLE権限が必要です。 クライアント/サーバーは無関係です。
SELECT ～ from FROM 最初のテーブル A,別のテーブル B WHERE SUBSTR(A.カラム,1,3)||SUBSTR(A.カラム,LENGTH(A.カラム)-1,2) = SUBSTR(B.カラム,1,5) SUBSTR(カラム,1,3)⇒カラムの上３文字 SUBSTR(カラム,LENGTH(カラム)-1,2)⇒カラムの下２文字 ||⇒文字列の結合 ～の所は適当に
サービス名はデータベースのサービス名です。 すべてデフォルトでインストールした場合、orclになります。 ホスト名はデータベースを作成したコンピュータ名です。 ネットサービス名は接続文字列と呼ばれるもので、sqlplusなどで接続する場合に使用します。 sqlplusで接続する場合、以下のようになります。 sqlplus ユーザ名/パスワード@接続文字列 のように入力します。
clyde123さん 上記の例でテーブルでコンピュータ名を表示させたい場合は Computer0001を表示させたい場合は select computername from tablename where IPA || '.' || IPB || '.' || IPC || '.' || IPD = '10.100.200.1' とすれば出ると思います。 || ←が文字列結合です。 後は工夫次第でいろいろと・・・ 後、家のPCではオラクルにすぐに接続できないので、今試せないのですが、たぶんあってると思います。(中途半端ですみません)
XP Proだけで大丈夫です。 IPアドレスを固定にしないと事前チェックで警告がでるので、何か指定した方が(192.168.0.1とか)いいでしょうが、スタンドアロン環境なら無視して進んでも使えます。 Oracleは高いので自宅で勉強するためには、質問者さんのように試用版を使って期限が切れるたびに何度もインストールを繰り返している人が多いと思います（ちなみに私もそうです）。 頑張ってください。
ORACLE（と言うかRDBMS全般）には、SQL実行時に 実行計画を策定するオプティマイザと呼ばれる機能 があります。 実行計画とは、統計情報やオブジェクトの構成に基づき 「どの索引を使うか」とか「どの条件から片付けて行くか」 などを決定するものです。 SQL*Plusで以下のように実行してみてください。 SQL> set autot trace exp; これで、SQL実行時にプランのみ表示し、検索結果は表示 しなくなります。 この状態で、応答時間が違うと言われる2種類のSQLを流して みてください。 多分、結合するテーブルの記述の順番により、違う実行計画 が表示されるのではないか、と思われます。 これは複数のテーブルを結合する場合に、どのテーブルを 「駆動表」とするか、が記述の順番によって変わったから だと思います。 ORACLEのバージョンが古い場合は、PLAN_TABLEを作らないと 上記コマンドでエラーが出るかもしれません。
TBL_AとTBL_Bを結合する条件を指定しないと直積（いわゆる総当たり）に なってしまいます。 TBL_Aのカラム2とTBL_Bのカラム1が結合条件だと思いますので、 SELECT TBL_A.カラム2, TBL_B.カラム2 FROM TBL_A, TBL_B WHERE TBL_A.カラム2=TBL_B.カラム1 AND TBL_A.カラム3='N' ORDER BY TBL_B.カラム2
文字列比較なのは致し方ないとして、桁数と書式が違う要素をBETWEENで評価するんですか？？ まともな結果を期待すること自体、間違っているように思いますけど。 >なぜ同じ条件で取得できるレコードとできないレコードがあるのかが >不明です(いっそ全部取れない or 全部取れるなら合点もいくのですが・・・)。 この手の理不尽な結果って、オラクルのバグによる、という可能性が高いように思いますが オラクルのバグって、サポート契約ユーザ以外には公開しない、サポート契約ユーザは、情報を 公開してはならないというサポート契約義務があるので、表に出にくいです。 ※サポート情報を確認したわけではないので、実際に、バグかどうかは判りません。
>特に >>先頭の列だけ検索条件を指定した場合 > >この場合になぜINDEX RANGE SCANになってしまうのでしょうか？ A |B |C --------- 0001|01|0 0002|01|1 0002|02|1 0003|02|1 0004|02|0 0004|03|0 ・ ・ ・ こんなような感じですよね。 で、アナライズしてあるものと仮定して、 select * from テーブル where A = バインド変数1 and B = バインド変数2 and C = バインド変数3 のようなSQLを実行した場合、カラムA自体はカーディナリティが高いと 言っても、ユニークインデックスではないのですから、オプティマイザが INDEX RANGE SCANを選択するのは自然です。 その値がたまたまユニークになっていてもユニークインデックス でなければRANGE SCANになります。 A, Bの複合インデックスがユニークインデックスなら INDEX UNIQUE SCAN になると思います。
それでは、このくらいで勘弁してください。 SELECT a.個人ID, a.氏名, MAX(CASE WHEN b.組コード=1110 THEN b.組コード END) a, MAX(CASE WHEN b.組コード=1111 THEN b.組コード END) b, MAX(CASE WHEN b.組コード=1112 THEN b.組コード END) c FROM テーブルA a LEFT OUTER JOIN テーブルB b ON b.個人ID=a.個人ID GROUP BY a.個人ID, a.氏名 ORDER BY a.個人ID
このエラーは無視して続行できたような気が・・・ とりあえず、参考URLにインストールガイドを記述しておきます。 そのマニュアルの「Oracle Database のネットワークのトピック」 「DHCP コンピュータでのインストール」（P2-10）を参考に ループバックアダプタを追加してみてください。 参考URL：http://otndnld.oracle.co.jp/document/products/or …
>接続識別子とはどういう役割をしているのでしょうか？ 接続すべきオラクルサービスの識別と接続プロトコルの決定です。 通常は、tnsnames.oraに記述した識別名（＝の左側の文字列）を指定しますが、 オラクルサービスの識別とプロトコルの決定が目的の指定なので、tnsnames.oraの右側に書いてある 長い記述をそのまま指定しても接続できます。 例えば、 sqlplus scott/tiger@(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=hoge)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=hogedb))) 長い記述が大変なので、tnsnames.oraで簡略名を定義し、接続先を簡易に指定できると思えば宜しいかと思います。 >接続識別子を使う場合と使わない場合では、どう違うのでしょうか？ 接続識別子を指定しない場合、環境により動作が異なります。 サーバでもクライアントも、環境変数(Win版はLOCAL、UNIX版はTWO_TASK)が設定されていれば、 その値を指定したものとして接続します。 例えば、SET LOCAL=HOGEDBなら、sqlplus scott/tigerもsqlplus scott/tiger@HOGEDBも同じ動作をします。 環境変数LOCALやTWO_TASKが指定されていない場合、環境変数ORACLE_SIDやレジストリORACLE_SIDに従い リスナーを経由しない接続を行います。
UNIONは、２つのクエリを重複を排除しつつ統合します。 重複を排除するために暗黙のソートが行われます。 暗黙のソートが行われたくないと言うことですので、重複の排除もされたくないかと 想像します。この場合、UNIONでなく、UNION ALLを使うことで、暗黙のソートは 行われません。（重複を排除しないので無駄な暗黙のソートを行わないから） ただ、同じ表を複数回検索するなら、状況によっては、検索を１回にまとめて、 ソートだけを工夫する方が効率的かもしれません。 select ID,NAME from A_TABLE where F1 in ('10','5') order by decode(F1,'10',1,'5',2),decode(F1,'10',F2,null),F3,F4; など。
アカウントのロック解除は以下のSQLでロック解除されます。 alter user ユーザ名 account unlock; sysのパスワードが変わる場合、orapwdコマンドを使ってパスワードファイルを変更（再作成？）したほうがよいかと思います。 （参考URL参照） あとは「connect / as sysdba」の前にORACLE_SID環境変数の設定はしておいてください。 参考URL：http://otndnld.oracle.co.jp/document/products/or …
まずはBronze合格おめでとうございます。 Silverの11gは9/30から開始されたばかりの試験ですので、当然ながら参考書の発売はまだないと思います。 (2月に開始したGold11g新機能の黒本が先週出たばかりです） したがって今準備するなら、10g用＋Gold11g新機能の２冊で勉強するのが最もいいということになりますが、試験範囲を見る限り、Silverでは新機能はあまりたくさんは含まれていないようです。 その意味ではOTNにあるDBA管理者ガイドやASCIIの11g新機能ガイドなどで11g関係のある新機能部分を読んで実機で確認、ということでもいいかもしれません。
sqlplusの仕様だと思います。 どこまでが１行かわからなくなるから、とかそういう理由ですね。 sqlplusのオプションで回避する手は私も知りません。 なので、どうしてもspoolしたいとすれば、SET SERVEROUT ONも切って、無名ブロックを実行するとかになります。 DECLARE lines CLOB; CURSOR cu IS SELECT L FROM (SELECT '"' || col1 || '","' || col2 || '","' || col3 || '"' AS L FROM table); BEGIN FOR cu_row IN cu LOOP IF lines IS NULL THEN lines:=cu_row.L; ELSE lines:=lines || CHR(13) || CHR(10) || cu_row.L; END IF; END LOOP; DBMS_OUTPUT.PUT_LINE(lines); END; これであれば、全部つないで１行なので、空白行はでません。 面倒くさいですけどね。
先日、似たような件に回答しました。 http://oshiete1.goo.ne.jp/qa4355319.html 以下SQLをViewにすればよいかと。 SELECT 請求番号, '2008年' AS 年度, CASE WHEN 請求月 = 200801 THEN NVL(請求金額,0) END 請求金額01月, CASE WHEN 請求月 = 200802 THEN NVL(請求金額,0) END 請求金額02月, CASE WHEN 請求月 = 200803 THEN NVL(請求金額,0) END 請求金額03月, CASE WHEN 請求月 = 200804 THEN NVL(請求金額,0) END 請求金額04月, CASE WHEN 請求月 = 200805 THEN NVL(請求金額,0) END 請求金額05月, CASE WHEN 請求月 = 200806 THEN NVL(請求金額,0) END 請求金額06月, CASE WHEN 請求月 = 200807 THEN NVL(請求金額,0) END 請求金額07月, CASE WHEN 請求月 = 200808 THEN NVL(請求金額,0) END 請求金額08月, CASE WHEN 請求月 = 200809 THEN NVL(請求金額,0) END 請求金額09月, CASE WHEN 請求月 = 200810 THEN NVL(請求金額,0) END 請求金額10月, CASE WHEN 請求月 = 200811 THEN NVL(請求金額,0) END 請求金額11月, CASE WHEN 請求月 = 200812 THEN NVL(請求金額,0) END 請求金額12月 FROM テーブル where 請求月 between 200801 and 200812 GROUP BY 請求番号 ; 参考URL：http://oshiete1.goo.ne.jp/qa4355319.html
こんにちわ。 > 四捨五入か何かされて整数でデータがロードされてしまいます。 そもそも、Number(3,0) って、小数点以下が0桁 (整数) と言う意味です。 Number(5,2) 等、適正なデータ型を使用して下さい。
OSに対して製品が古すぎるような．．．．(^^; この辺を参考にしてみてください。 http://www.hondarer-soft.com/japan/pubwiki.cgi?C … 参考URL：http://www.hondarer-soft.com/japan/pubwiki.cgi?C …
>一度で複数テーブルを更新する事は可能でしょうか？ 可否については、可能な場合もある、という回答になります。 オラクルも、「更新可能なビュー」に対する更新機能を持っていますので、 更新可能なインラインビューが書けるようなケースでは、更新可能となります。 更新可能なビューには、プライマリキーを使った内部結合であること等の条件が ありますので、必ずしも３表の同時更新が出来るとは限りません。
クライアント側の環境が悪いのではなく、テスト用のサーバ側に問題があるんじゃないですか？ （例えば、Firewall機能が邪魔してるとか等）
質問に書いてある条件通りに書くと、こんな感じ。 SELECT 注文NO,商品名,個数 FROM 購入実績テーブル WHERE 購入年月日 LIKE &年月 || '%' AND 商品名=&商品名 UNION ALL SELECT 注文NO,商品名,個数 FROM 購入予定テーブル a WHERE 購入予定年月=&年月 AND 商品名=&商品名 AND not exists (select 1 from 購入実績テーブル b where a.商品名=b.商品名 and a.購入予定年月=substr(b.購入年月日,1,6)) ;
>select 項目1 from テーブル >where 項目1 is null or length(項目1)>0 >で全抽出となりますか？ >>select 項目1 from テーブル >>where length(項目1)=0 はひとつもヒットしないと考えられます。。。 どちらもその通りです。 ただ、繰り返しになるようですが、この件はあくまでOracle限定としてご理解ください。 （それ以外のデータベースと空文字の扱いが違いますから）
サブクエリとは、基本的にSELECTした結果をテーブルと見立てて使うことです（Viewのようなイメージです）。 したがって、サブクエリ自体は完結したものであって(*)、それを使うメインクエリはサブクエリを構成している個別のテーブルには関知しません。 つまり、メインクエリは以下のようなレイアウトのテーブルに対してSELECTを実行しているのと等しいです。 （項目名はサブクエリだけを抜き出して実行したときの戻りの項目名です） TK14_NYUUKIN_DATE, TK14_KANJYA_NO, TK01_NAME, TK13_SEIKYUU_START, TK13_SEIKYUU_END, SUMAMT これらの値を生み出しているサブクエリ内のテーブルとは関係がなくなっています。それがBなどのエイリアスを指定できない理由です。 そう考えていただくと、テーブルの項目名にSUM(xxxx)などという名前は使えませんよね。それがSUMAMTという別名を付けている理由です。 (*) 別に相関サブクエリというものがあり、それはこの説明には当てはまらないかもしれませんが、これは必要になったときに勉強していただければと思います。
こんにちわ muyoshid です。 db file scattered read は主に全件検索の時に使用されます。 索引を使用しないため、Oracle はHWM までのブロックを読込むため 大量のInsert＆Delete が行われて無効ブロックが大量にあるような 場合、結果的に大量のI/O が発生してパフォーマンス劣化の原因 になるので、先ずは大量読込みを行っているSQL をチューニング する事だと思います。
書き込む先が違いますが 検索サイト　履歴削除 などとして検索するといいと思います。 ちなみに↓も参考になるかと思います。 http://www.kisnet.or.jp/~hidamari/help/internet/ …
実態に則さないサンプルを示すと、こういった問題が起こります。 select trunc( months_between( to_date(max(b.日付),'yyyy/mm/dd'), to_date(a.生年月日,'yyyy/mm/dd') ) / 12 ) 年齢, trunc( mod( months_between( to_date(max(b.日付),'yyyy/mm/dd'), to_date(a.生年月日,'yyyy/mm/dd') ),12 ) ) 月 from a inner join b on a.id=b.id group by a.id,a.生年月日 ; な感じじゃないかと想像しますが。
1. インスタンス停止 2. 制御ファイルを削除 3. startup nomount; 4. create controlfile ... トレースに出力されたもの。 noresetlogs と resetlogs のものがあるので、 どちらか必要な方を切り取って SQL*Plus などに貼り付けて実行。 ※resetlogs する場合はオンライン・ログは必要ありません。 5. alter database open; もしくは alter database open resetlogs;
マニュアル的な資料は、文章も硬いのでわかりにくいかもしれません。 オンラインのものですが、セミナーレベルの講義・解説を一度聴いてみてはどうでしょう？ 10月11日（土）に、2つ有ります。 【超入門】 http://www.oracle.co.jp/iSeminars/081011_0930/ 【入門】 http://www.oracle.co.jp/iSeminars/081011_1100/ 等が、最初の仕組みの理解には役立つかと思います。 質問もその場でできます。 他にもたくさん有りますね。「Oracle Direct Seminar」 http://www.oracle.co.jp/direct/seminar/ 仕組みを理解した上で、 http://www.oracle.com/technology/global/jp/colum … のような手順付きのコンテンツに沿って、試していくのが良いのではないでしょうか？ 参考URL：http://www.oracle.co.jp/direct/seminar/
ora-257については、ログイン行為の際に出るようです。（自分で体験したことはありませんが） http://www.drk7.jp/MT/archives/001012.html オラクルのエラーは、必ずしもユーザに表示されるわけではなく、 サーバのコンソール画面に出るものもありますし、アラートログに 記録されるだけのものもあります。 例えば、Windows版オラクルで、サーバのディスクフルの場合、 DOSプロンプトが出現し、メッツセージ表示の上で、サーバプロセスが 停止したりします。
やったことないのですが、Oracleにはサイレントモードのインストール が用意されています。 参考： http://otndnld.oracle.co.jp/document/products/as … インストールされれば、あとはDBの作成はSQLで出来ますので、 それらを一括して動かすバッチファイルでくるめばできあがりそうです。
先ず、問題を整理してみることから始めましょう。 文面からすると、以下のように考えられますが、如何でしょうか？ (1)ColA：ColBは１：ｎである。 (2)全てのColAの値に対し、ｎは同じ。 (3)ColBの取り得る値は本来は全て同じ。 次に「組み合わせが合っている事が分かる」と言う意味が曖昧です。 相手が人間だと、上手く解釈してくれるのですが、機械だとそうは いきません。「正しい組合せのものを抽出する。」とか、「不正な 組合せのものを抽出する。」とかいう表現でないと、実現できません。 それと、基準（模範解答）がどれなのかも明確ではないようです。 A、Bが正しいのか、A、Cが正しいのか、はたまたX、Yが正しいのか・・・ そこで、以下の仮定を立てます。 (1)ColA='01'の組合せが基準 (2)上記のものと一致しない（不正な）データを抽出する。 以下は上記仮定の一例です。 SELECT A.* FROM 表1 A WHERE A.ColB Not In (SELECT ColB FROM 表1 WHERE ColA='01')
プロシジャの挙動として、想定されるエラーの場合に、例外を返すというところは、議論がありそうですが、 データが存在しないチェックの仕方としては、select count(*)で良いと思います。（判りやすいから） ただ、データが存在する場合の処理が、その後に続くなら、データが存在する場合の処理と存在しない場合の処理を 一度の問い合わせで処理可能なので、事前に存在チェックだけを行わずに処理する方が合理的な方法だと思います。 実際どちらが良いかは、ケースバイケースだと思いますよ。
一時的にPCTFREEを大きく指定してリビルドし、PCTFREEを元に戻せば、 索引全域が断片化した時と同じような状態と見なせるのではないですか？
縦横変換の典型ですね。 サンプルを提示しますので、加工してください。 SELECT 会員番号, 商品番号, '2008年' AS 年度, SUM(CASE WHEN 買い物月 = 200801 THEN NVL(請求金額,0) END) 請求金額01月, SUM(CASE WHEN 買い物月 = 200802 THEN NVL(請求金額,0) END) 請求金額02月, SUM(CASE WHEN 買い物月 = 200803 THEN NVL(請求金額,0) END) 請求金額03月, SUM(CASE WHEN 買い物月 = 200804 THEN NVL(請求金額,0) END) 請求金額04月, SUM(CASE WHEN 買い物月 = 200805 THEN NVL(請求金額,0) END) 請求金額05月, SUM(CASE WHEN 買い物月 = 200806 THEN NVL(請求金額,0) END) 請求金額06月, SUM(CASE WHEN 買い物月 = 200807 THEN NVL(請求金額,0) END) 請求金額07月, SUM(CASE WHEN 買い物月 = 200808 THEN NVL(請求金額,0) END) 請求金額08月, SUM(CASE WHEN 買い物月 = 200809 THEN NVL(請求金額,0) END) 請求金額09月, SUM(CASE WHEN 買い物月 = 200810 THEN NVL(請求金額,0) END) 請求金額10月, SUM(CASE WHEN 買い物月 = 200811 THEN NVL(請求金額,0) END) 請求金額11月, SUM(CASE WHEN 買い物月 = 200812 THEN NVL(請求金額,0) END) 請求金額12月 FROM テーブルB where 買い物月 between 200801 and 200812 GROUP BY 会員番号, 商品番号; ポイント ・CASEで該当するデータを横展開する。 ・Group Byで横展開した値を集計し1列に集約する。 応用 　・各カラムのデータ型にあわせてSQLを変更する。 　　※date型、number型、char型。 　・上記は2008年に限定しているので、実際に欲しい形に変更する。 　　※年を意識しない作りにするなど。
from emp e join dept d using(deptno) により、 e.empno,e.ename,e.jobno,e.sal,e.deptno,d.deptno,d.dname,d.empno 1000,ADAMS,100,1000,10,10,PERSONAL,1000 1010,MILLER,200,1200,10,10,PERSONAL,1000 1020,SCOTT,100,800,30,20,DESIGN,(null) という結果が得られます。 そして、改めてEMP表をd.empnoで外部結合するので、 必然的に最初の２件は同じレコード（ADAMSさん）を結合します。 たぶん、from emp e join dept d using(deptno)で得られるフィールドに、 e.empnoとd.empnoの２つが存在し、d.empnoを利用する、ということを 忘れているから混乱してるんじゃないかと想像してますけど。
No.1 の方が既に説明されていますので、私の方で 挙げられた項目を分類しますと、こんな感じになります。 ●表領域：SYSTEM、SYSAUX ●ユーザ：SYS、SYSTEM、SYSMAN ●スキーマ：SYS、SYSTEM、SYSMAN ●権限：SYSDBA、SYSOPER ●ロール：DBA
試験してませんが。 not in は　not exists でもＯＫ。 select ユーザ名 from 商品購入テーブル where 購入フラグ = 1 and ユーザ名 not in ( select ユーザ名 from 商品購入テーブル where 購入フラグ = 0 ) ただし、002、003、003が得られるハズ。 002、003のみにしたいのであれば最初のselect ユーザ名　を select distinct ユーザ名　にしてください。
逆質問になりますが、そもそもoracleをインストールしてコンピュータ名って変更しても大丈夫なんですか？ やり方は、いろいろあるかと思いますがなんか気持ち悪くないですか？ ちなみにバージョンは9?10?11?
こんにちわ。 muyoshid です。 > startup nomountコマンドはしていません startup nomount で、Oracle はSGA を獲得してBackground Process を 起動するので、startup nomount を行わないとCreate Database は できない筈です。 心配であれば、一旦作成したDatabase を削除すれば言いと思います。 Database 削除の手順は、以下の通りです。 1) DB のShutdown 2) Create Database で作成したDatafile/Redo Log/制御ファイルを削除 　 alert log やtrace log は放っておいても構いません。 それと、2点程補足しておきます。 1) pfile, spfile はどちらか一方だけで構いません。 　 spfile を作成すると、pfile は使用されなくなります。 2) pfile を作成したら、SQL*Plus でsysdba 接続してからstartup nomount 　 です。 それでは頑張って下さい。
SELECT t.* FROM AAA t ORDER BY MIN(t.DATE) OVER (PARTITION BY t.GNo), t.DATE でどうかしら？ 結果を教えてください。
INSERT INTO TT_売上明細( 売上番号, 明細番号, 商品コード, 売上数量) SELECT 6 売上番号, 4 明細番号, 1 商品コード, 1 売上数量 FROM DUAL UNION ALL SELECT 7, 4, 2, 2 FROM DUAL UNION ALL SELECT 8, 4, 3, 3 FROM DUAL; でエラーだったらROLLBACK、正常終了だったらCOMMIT。
ある特定の並び順でINSERTしたいなら、 INSERT INTO テーブルA SELECT カラム1,カラム2,カラム3,ROWNUM+100000 FROM (SELECT * FROM テーブルB ORDER BY xxxxxx) みたいな方法になるかと。
> １.CREATE DATABASE文で表領域の指定の箇所でEXTENT MANAGEMENT > LOCAL UNIFORM SIZEとあるのですがここではエクステントの管理方式を > 指定していると思うのですが、SIZEは何を基準にきめたらよいのでしょ > うか？データブロックサイズは8KBです。 CREATE TABLESPACE じゃなくて CREATE DATABASE ですか？ 私は SYSTEM 表領域を UNIFORM SIZE 指定している例は今のところ見たことがありません。というか、できなかったように思います。仮にできたとしても、SYSTEM 表領域と SYSAUX 表領域はかなりブラックボックスですし。 SIZE は大きいとエクステントが断片化しにくくなるでしょうが、データが入っていない表でも最低 SIZE だけの領域が取られてしまうので、小さい表がたくさんあると領域の無駄が多数発生してしまいます。 > ２．SYSTEM,SYSAUX,UNDO,TEMP,USERの中で表領域の自動拡張を選ぶとき > に何か決める基準があれば教えてください。 運用のポリシーによって決まるので、どちらがいいとは言いにくいです。 ただ、事前に使用量がある程度明確に分かっているのであれば自動拡張を ON にしておくひつようはあまりありません。まあ、保険のために ON にしておいても構わないのですが・・・ > ３．SYSAUX表領域をCREATE DATABASE文で作成時にサイズを設定する個所 > では何を基準に決めたらよいですか？ OTN 掲示板に似たようなスレがありますので、ご参考ください。 http://www.oracle.co.jp/forum/thread.jspa?thread …
UPDATE TEST SET C = '200', D = CASE WHEN B='010' THEN '250' ELSE '280' END みたいな感じにはできますが。
私が設計するなら・・ 社員ID,給料,適用開始年月,適用終了年月 101,\100,200801,200807 101,\110,200808,999999 102,\200,200801,999999 103,\200,200801,200805 な感じかな。 更新するときは、適用終了年月が999999のデータを、実際の終了年月で更新し、 新たなレコードを作成する。（新たなレコードの適用終了年月は999999） 新入社員は、新たなレコードを作成するだけ。 社員が辞める場合は、終了年月を埋めるだけ。 データを検索する場合は、 where 調査したい年月>=適用開始年月 and (調査したい年月<=適用終了年月 or 適用終了年月=999999) で探す。 データは、会社の会計年度に合わせるのでなく、歴日で持ち、会計年度で取り扱う必要箇所が多いのであれば、 会計年度と会計期間の変換機能を用意し、人の目に触れるところだけ、会計年度に変換し表示します。 会社の会計年度は変更される場合があるけれど、データまで会計年度で管理すると、変更があった場合に煩わしいから。 これは、日付の和暦と西暦と同じような話で、ユーザインタフェースが和暦であっても、 データとしては和暦でなく西暦で管理するのと同じと考えます。
何が使えて何が使えないか判らないのですが・・ 結合を使うなら・・ select a.社員番号, (select min(履歴番号) from tableB b where a.社員番号=b.社員番号 and b.日付>=trunc(sysdate,'dd')) 履歴番号 from tableA a ; 結合を使いたくない、TableBだけでやりたいなら・・ select 社員番号,履歴番号 from ( select b.*,row_number() over(partition by 社員番号 order by 履歴番号) R from tableB where 日付>=trunc(sysdate,'dd') ) where R=1 ;
サーバ機とクライアントPCのtnsnames.oraは同一でしょうか? また、サーバ機からtnspingは通りますか? tnsping ORCL_VMSVPC
インストールの際に「EE」と「SE」を選択します。 これはライセンス契約がどうなっているかとは関係なく選べます。 なので購入したバージョンとインストールしたバージョンが異なる可能性はありえます。 ※EEとSEもインストールメディアは同一です。 インストールした人が、わかっていないとありえる話です。 ※たまにエディションを間違えてインストールしてしまったという話を聞きます。
all_source,dba_source,user_sourceあたりを調べてみてください。
ご参考 http://otn.oracle.co.jp/forum/thread.jspa?thread …
>提示していただいたSQLだと、余計なデータが取れてしまいます。 外部結合の条件が悪いんでしょうね。 たぶん、適切な結合条件は、以下のような感じだと思います。 SELECT * FROM Aテーブル A LEFT JOIN Bテーブル B ON ( (A.a=B.a or A.a is null or B.a s null) and (A.b=B.b or A.b is null or B.b s null) and (A.c=B.c or A.c is null or B.c s null) ) WHERE decode(A.a,null,0,B,a,0,1)=1 or decode(B.a,null,0,A,a,0,1)=1 or decode(A.b,null,0,B,b,0,1)=1 or decode(B.b,null,0,A,b,0,1)=1 or decode(A.c,null,0,B,c,0,1)=1 or decode(B.c,null,0,A,c,0,1)=1 ; ついでに、絞り込み条件が片側しか書いてないので、少なく絞り込まれる可能性があるので、見直してます。
前提がわかりません。 その「ローカルPC」にはSQL*Plusを含むOracleクライアントがインストールされていますか? インストールされていない場合、インストールしてください。 その「ローカルPC」には「サーバー」への接続設定はされていますか。 されていない場合、設定してください。 接続設定のされている他PCのtnsnames.oraをコピーするのが確実でしょう。完全に新規の場合はNet Configuration Assistantで最初から作成しましょう。 それなりに手間な作業ですのでマニュアルを見ながら作業しましょう。 http://www.oracle.com/technology/global/jp/docum …
スクリプトにしたいということでしょうか？？ 特別な記述をしなくても並べて書いて BEGINとENDで囲めばとりあえず動きますよ。 参考までに。 DECLARE 　-- 変数を宣言する場合はここに記述。 BEGIN 　INSERT INTO tb1(列1, 列2) VALUES('値1','値2'); 　INSERT INTO tb1(列1, 列2) VALUES('値3','値4'); 　INSERT INTO tb1(列1, 列2) VALUES('値5','値6'); 　COMMIT; EXCEPTIPN 　WHEN OTHERS THEN 　　-- エラーが起きたときの処理を記述 　　ROLLBACK; END; /
できません。 で、Oracle9i はフルサポート切れなので、 今後対応されることもありません。
#1です。蛇足以外のなにものでもないんですけど、追加質問に対してコメントしておきます。 実行上のレスポンスは全く変わらないです。 CASE1のクエリを書く人は実際は多いと思います。それはこのクエリのメインの目的は受注数を出すことであって、商品名を出すことではないからです。 例のクエリがシンプルですから、頭の中で全部組み上げて一気にかけますが、もっと複雑なクエリになってくると、本当に必要な数字が取れることを確認してから付随情報を付加していくように書くと思います。 つまり、まず SELECT A.品目CD, SUM(A.受注数) FROM 受注データ A GROUP BY A.品目CD というクエリを書いて想定される数字が出せるかどうか確認し、 それから SELECT A.品目CD, B.品目名, SUM(A.受注数) FROM 受注データ A INNER JOIN 品目マスタ B ON B.品目CD=A.品目CD GROUP BY A.品目CD,B.品目名 と書き足します。 したがって、CASE1のメリットをあげるとすれば、「書きやすい」ことでしょうか。 ここまで来ると個人的な意見にすぎませんけどね。
Webうを動かしているOSユーザの権限はどうなっているのでしょうか。 IISで動かしていると思いますが、IISの実行ユーザが参照できてますか。 手動で使用したユーザとIISの実行ユーザとの差を確認してください。
「Oracle Universal Installer」はインストールしていないということでしょうか。クライアントのCD-ROMからインストーラーを起動してください。 インストレーションマニュアルに削除の方法が載っていますので、その通りに作業を行ってください。 http://otndnld.oracle.co.jp/document/oracle9i/92 …
No2です。 回答したあとで、もうすこし簡略化できることに気付きました。 （私のやり方だと全件Connectするので） SELECT 氏名,乗り物,MIN(乗車開始時間),MAX(乗車終了時間) FROM (SELECT MIN(GRP) GRP,氏名,乗り物,乗車開始時間,乗車終了時間 FROM (SELECT ROWNUM-LEVEL GRP,氏名,乗り物,乗車開始時間,乗車終了時間 FROM 乗車時間 CONNECT BY PRIOR 氏名=氏名 AND PRIOR 乗り物=乗り物 AND PRIOR 乗車終了時間=乗車開始時間 ORDER SIBLINGS BY 氏名,乗り物,乗車開始時間) GROUP BY 氏名,乗り物,乗車開始時間,乗車終了時間) GROUP BY 氏名,乗り物,GRP ORDER BY 1,2 でも、それを踏まえても、No.3さんの書かれたクエリの方がわかりやすいでしょうね。
Oracle JDeveloperを使えばよいと思います。無償です。 参考URL：http://www.thinkit.co.jp/cert/article/0706/12/1/ …
こんにちわ。 SQL*Plus からdesc パッケージ名 と入力して見て下さい。
書けます。以下のような感じでSQLを発行します。 update Aテーブル a set ( Aテーブル.構成順 ) = ( select b.Bテーブル.順番 from Bテーブル b where a.Aテーブル.ID = b.Bテーブル.ID and a.Aテーブル.種類 = b.Bテーブル.種類CD ) where exists (SELECT 'X' FROM Bテーブル x where a.Aテーブル.ID = x.Bテーブル.ID and a.Aテーブル.種類 = x.Bテーブル.種類CD ); updateの構文は以下マニュアルを参照。 http://otndnld.oracle.co.jp/document/products/or … OracleでSQLを書いた場合のエラー対処方法としては、 1.エラーコードを確認する。 　※ORA-XXXXXX、PLS-XXXXXのようなエラーコード。 　　これをマニュアル「エラー・メッセージ」で確認。 　　対処法を確認する。 2. SQLリファレンスを確認。 　　マニュアルのSQLリファレンスを確認し、構文をチェックする。 3. SQLを発行したツールを確認する。 　ツールが対応していない場合もありえるので、 　Oracle標準のツール「SQL*Plus」で発行してみる。　 まずは単体のSQLがSQL*Plusで発行できるか確認してください。
「Oracle Databaseインストレーション・ガイド 11gリリース1（11.1） for Microsoft Windows」 に記載されている方法でやっているのでしょうか？ http://otndnld.oracle.co.jp/document/products/or … インストレーション・ガイドの通りにやればOKです。
> FROM > WHERE ( > "*****"."@@@_@@@@" >= {ts '1998-07-02 00:00:00'} > AND "*****"."@@@_@@@@" < {ts '1998-07-03 00:00:00'} > ); 上記はOracleのSQL構文ではありません。 OracleのSQL構文で書くとTO_DATEを使用します。 ※@@@_@@@@がDate型と想定しています。 Where ( "*****"."@@@_@@@@" >= TO_DATE('1998-07-02 00:00:00','yyyy-mm-dd hh24:mi:ss') AND "*****"."@@@_@@@@" < TO_DATE('1998-07-03 00:00:00','yyyy-mm-dd hh24:mi:ss') ); select * from emp Where ( emp.HIREDATE >= TO_DATE('1981-02-20 00:00:00','yyyy-mm-dd hh24:mi:ss') AND emp.HIREDATE < TO_DATE('1981-02-21 00:00:00','yyyy-mm-dd hh24:mi:ss') ); EMPNO ENAME JOB MGR HIREDATE SAL COMM DEPTNO ---------- -------------------- ------------------ ---------- -------- ---------- ---------- ---------- 7499 ALLEN SALESMAN 7698 81-02-20 1600 300 30 --- {ts '1998-07-03 00:00:00'})は、JDBCやODBC等のドライバがOracle用の書式に変換するようですが、この変換を行わないドライバを使用してSQLを投げているのなら当然エラーになると思います。 JDBCのリファレンスを見ると、JDBCドライバが変換すると書いてあります。 Oracle Database JDBC開発者ガイドおよびリファレンス 10g リリース2（10.2） http://otndnld.oracle.co.jp/document/products/or …
impユーティティは以下の動きをします。 (1)オブジェクトを作成 ※オブジェクトが存在した場合はエラーとなる。 　ignore=yで回避可能。 (2)データをインサート 　exp時点のデータを単純にインサートするだけ。 　既にテーブルにデータが入っていれば重複する。 データを戻す場合はテーブルデータを削除（delete）してからimpします。 ユーザを削除すると、対象ユーザに対する操作（grant等）が 削除されるので、あまりやらない方が良いと思います。 まあ、exp時点に完全に戻したいなら、ユーザ削除からimpでも 良いと思います。
DBサーバの問題点を調査する場合は、たいていは以下を調べます。 (1)ハード・OSのエラー イベントビューアでハード・OSのエラーが出ていないかチェックする。 (2)Oracleのエラー アラートログを確認する。 「ORA-XXXXX」といったエラーが発生していないか確認する。 場所は初期化パラメータ「BACKGROUND_DUMP_DEST」。 (3)その他のソフトウェア アンチウィルスソフトやら、MicoroSoftUpdateやら インストールされているソフトウェアが問題をおこしていないか確認する。
同じ名前でも引数の数や型の違いで識別する方法をオーバーロードといいます。これはDBプログラミングではPL/SQLくらいかもしれませんが、Javaでも.NETでも一般的です。 オーバーロードで検索すればサイトはいくらでもヒットします。PL/SQLとしての本は「オラクルマスター教科書 PL/SQLプログラミング」をお勧めしておきます。
表AのそれぞれのID & RENBANについて、３つのJOIN式に該当する表Bのデータがそれぞれ「２件以上ない」ことが保証されているテーブル構造であるなら、以下のクエリで可能です。 SELECT a.ID, a.RENBAN, MAX(CASE WHEN b.KUBUN=1 AND b.NO=a.NO THEN b.SHOUSAI_NO END) "NO(SHOUSAI_NO)", MAX(CASE WHEN b.KUBUN=2 AND b.NO=a.NO1 THEN b.SHOUSAI_NO END) "NO1(SHOUSAI_NO)", MAX(CASE WHEN b.KUBUN=2 AND b.NO=a.NO2 THEN b.SHOUSAI_NO END) "NO2(SHOUSAI_NO)" FROM 表A a INNER JOIN 表B b ON b.ID=a.ID and ((b.KUBUN=1 AND b.NO=a.NO) OR (b.KUBUN=2 AND b.NO=a.NO1) OR (b.KUBUN=2 AND b.NO=a.NO2)) GROUP BY a.ID,a.RENBAN ORDER BY 1,2 このように表示する意味はわかりませんが、可能は可能です。
>更新処理全体をストアドプロシージャで呼ぶという事ですが Oracleのプロシージャで行うと言う事でしょうか？ そうです。PL/SQLでOracleのパッケージかスタンドアロンプロシージャを作成し、パラメータを渡してコールする仕組みです。 PL/SQLの書き方はさすがにここで説明できませんが、Oledbでの使い方については「ストアドプロシージャ Oledb」で検索すると詳しい説明の載っているサイトが上位でヒットすると思います。
Oracleは商用ソフトなので、ネット上にいくらかの情報はあるものの、まとまった情報はあまりありません。 なので、まずは書店に行って Oracle Master の学習本を購入されることをお勧めします。資格取得を目的とする書籍なので、演習問題もちゃんとありますし、それだけをきっちり勉強するだけでもかなりの実力がつくでしょう。 で、もし会社に Oracle が入った環境があるのであれば、実際に触れて操作を試してみることをおすすめします。 あと、もしサポート契約をされているのであれば、OiSCのサイト (http://support.oracle.co.jp/) にあるKROWN などの情報も非常に参考になるかと思います。 ちなみにマニュアルは難解なので、ここから入るのはあまりお勧めできません。
確かに外部キーをつけるとパフォーマンスには影響がでます（登録・更新の可否をチェックする必要があるため）。しかし、外部キーをつけないと整合性が失われるリスクが高いなら、それ以外の整合性維持の手段はすべて外部キーよりも負荷が高くなりますから、つけるべきものにはつけた方がよいと思います。 外部キーを設定しているフィールドにインデックスを張ることでパフォーマンスが向上することもあります。
本当なら「case when AAA IS NULL then '未入力' else AAA end」がグルーピングのキーであるはずが、GROUPING SETSに指定されているのはAAAですから、「結果がNULLなら'未入力'と表示する」が結果全体に掛ってしまっているのが理由です。 select case when AAA IS NULL then '未入力' else AAA end, count(distinct BBB) from table_A group by GROUPING SETS((case when AAA IS NULL then '未入力' else AAA end),()) とすれば、目的の結果が返ります。 ただ、今回の例ならNVLを使った方が見やすいです。 select NVL(AAA,'未入力'), count(distinct BBB) from table_A group by GROUPING SETS((NVL(AAA,'未入力')),())
>column aaa_ren new_value vaaa NOPRINT 先にバインド変数の:aaaにテーブル名を入れたので、 それをsqlplusの置換変数のvaaaに入れるために行っている ことで、「列aaa_renの内容をvaaaにセットします」と宣言しています。 >select :aaa aaa_ren from dual; そのあとで:aaaの列名をaaa_renとしてselect文を実行すると、selectが実行され、その結果がvaaaに入ります。 Oracleの場合は、from句がないとselect文は実行できないので、 テーブルでなく変数などをselectしたい場合は、「from dual」とつけるのが普通です（select sysdate from dualなどと同じ）。 >select * from &vaaa めでたくvaaaにテーブル名が入ったので、その内容を使ってselect文を実行します(置換変数は&付で記載します）。 念のため10gで確認してから書いたので、別に例じゃないですよ。 そのままやれば動くとおもいますけどね。
UPDATE A SET A.フィールド = (SELECT decode(B.フィールド,'X',B.フィールド,'Y') FROM B WHERE Bの条件) where Bの条件 ; とか UPDATE A SET A.フィールド = (SELECT case when B.フィールド='X' then B.フィールド else 'Y' end FROM B WHERE Bの条件) where Bの条件 ; テーブルＢに合致するレコードがない場合に、どうするか考えれて、SQLを書かねばなりません。 上記の例は、合致するレコードがなければ何もしないSQLです。
>売上品の竹輪か品コードのどちらかを含むものを検索したいのですが 説明文の通りに書くだけです。 SELECT 担当, 商品, 売上品 FROM TableName WHERE 担当 IN (SELECT 担当 FROM TableName WHERE 売上品 = '竹輪' or 品コード = 'K000005') ; 逆に、SQL文を日本語で説明すると・・ 売上品が竹輪か、品コードがK000005の担当者を検索し、その担当者に関するレコードを全て抽出するSQLです。
検索の速度がタイトならファンクション索引を作るのもありかもしれませんね。 create インデックス名 on テーブル名 ( replace(フィールド名,'＿','') );
where A.code1 = B.code1(+) and A.code2 = B.code2(+) ではだめでしょうか。
GUIでも、CUIでも、サービスを停止するとこに違いがありませんので、お好きな方で。 （自動運転を考えるなら、必然的にCUIベースでのサービス停止になると思いますけど、 一度きりなら、やりやすい方で良いかと）
どのような連携をしたいのかによると思いますけど・・ オラクルの分散データベースとして、他社製データベースを扱うことは、 オラクルの標準機能として存在します。 逆に、Interbaseにオラクルデータベースをアクセスする機能を組み込むことも 不可能ではないと思います。（がんばれば・・ですが） 何をしたいのかで、最適な手法が変わるかと思いますよ。
すいません、#8です。オリンピックを見ながらずっとカレンダーを眺めていたのですが、もっと簡略化できますね。 年間カレンダーとしては、#8にもあるとおり全部で１４パターンですが、各月ごとのカレンダーのパターンは、つまるところ２８パターンに全て集約できますね。 ある月の一日が日曜日で始まる場合、月曜日で始まる場合、・・・で、７パターン。それに加えて、閏年がある時も踏まえた上で、各月ごとのカレンダーの末日は２８日、２９日、３０日、３１日の４パターンのみです。よって、７×４より全部で２８パターンですね。 で、土曜日の日数のみを表すテーブルを、以下のように作成します。（年間カレンダーより、規則的にこの様な結果になると思います。） ＼｜28　29　30　31 ーーーーーーーーーー 日｜４　４　４　４ 月｜４　４　４　４ 火｜４　４　４　４ 水｜４　４　４　４ 木｜４　４　４　５ 金｜４　４　５　５ 土｜４　５　５　５ 上記のテーブルを元に、以下のような条件でSQL文を記述すれば、すぐに指定した年月に土曜日が何回あるかがわかることと思います。 列（属性）→LAST_DAY関数を用いて、各月の末日が４つのうちの何れかを求める。 行（組）→TO_CHAR関数を用いて、各月の一日が何曜日から始まるのかを求める。 ちなみに、日曜日の日数のみを表すテーブルは敢えて作成しないでおきますが、上記と同様にすればすぐに専用のテーブルを作成できることと思います。
とりあえず、エラーコードを載せましょう。 また、再現するコードを載せましょう。 > SELECT distinct 担当, 商品, 売上品 > from…か > Group By 担当, 商品 > とやっても何故かエラーが出ます これをみるかぎりだと、select とgroup byの項目が あっていないだけに見えますが? こんな感じ？ >select distinct empno,ename ,count(*) from emp group by empno > * >行1でエラーが発生しました。: >ORA-00979: GROUP BYの式ではありません。 このORA-xxxxが重要です。このエラーコードがわからない限り、何のエラーだか第三者にはわかりません。 根本の問題として、distinctとgroup byの使用目的は異なります。 ・distinctは重複を省く。 ・group byは集計を行う。 目的（仕様）をはっきりさせれば、おのずと使用するsqlは決まります。
エンタープライズマネージャを使ってないので正確にわかりませんが セグメント領域の管理＝自動というのは 表領域の自動セグメント領域管理(ASSM)の事で、気にしている事と違うものを見て判断している感じがします。 懸念しているのはデータファイルの自動拡張の属性ではないですか？
No.1です。それはこういうことですか？ _____担当_____商品_____売上品 _____XXXX_____1111______竹輪 ______________1111______胡瓜 ______________3333______竹輪 ______________3333______胡瓜 だとすると、それは「見栄えの調整」ということですね。 本来はそれはSQLの領分ではない、ということをご理解の上、以下をお試しください（たしか10gですよね）。 SELECT CASE WHEN (ROW_NUMBER() OVER (PARTITION BY 担当 ORDER BY 商品, 売上品))=1 THEN 担当 END, 商品, 売上品 FROM TableName WHERE 担当 IN (SELECT 担当 FROM TableName WHERE 売上品 = '竹輪') AND 担当 IN (SELECT 担当 FROM TableName WHERE 売上品 = '胡瓜') AND 売上品 IN ('竹輪','胡瓜') ORDER BY 担当,商品,売上品
「オラクルの運用の全般について」 http://oshiete1.goo.ne.jp/qa3784798.html DBA関連のサイトについては、上記の過去ログにまとめてあります。 あと、こういったサイトなども。 「DBAの日常業務に必要なスキルとは」 http://builder.japan.zdnet.com/news/story/0,3800 …
全部を移動したくても、コマンド自体は、テーブルオブジェクト単位に投入する必要があります。 ちなみに、索引は、リビルドで、移動可能ですが、これも索引ごとに投入することになります。 収容先の表領域が断片化しないように、収容先ごとに１オブジェクトずつ順番に処理するのが 良いかと思いますよ。
初期化パラメータを流用されたとありますが、マシン(OS)は新規に 導入されたのでしょうか。 HP-UX向けのインストールガイドを参照されて、カーネルパラメータの 設定が正しく行われているかどうか(SHMMAXあたり)確認されるのが良い と思います。既に検討されているようでしたら、申し訳ありません。
SQLに関しては、ほぼ変更がありません。したがって、10g用で勉強しても全く問題ありません。 DBAについては。。そうですか、問題集まで買ってしまったのですね。BronzeではEnterprize Managerの操作関連が主に問われますが、かなり変更点があるので、さすがに10g用で11gの試験は厳しいかもしれません。参考書を無駄にしないために10gを受けるのもありですよ。 Oracle Masterの資格は基本的に有効期限がないので、10gだといつか失効するというわけではありません。
うちの環境でもサイズが違います。 エディタでダンプファイルをみてみると、インサートのデータ部分のサイズが違っているようです。 ユーティリティのドキュメントを見ると、以下となっています。 >従来型パス・エクスポートでは、SQL のSELECT 文によって、データベースの表から >データが抽出されます。 >データはディスクからバッファ・キャッシュに読み込まれ、行は評価バッファに >転送されます。 >式の評価が終了すると、そのデータはエクスポートを実行するクライアントへ転送され、 >そこでエクスポート・ファイルに書き込まれます。 > >ダイレクト・パス・エクスポートでは、データがディスクからバッファ・キャッシュに >読み込まれ、行がエクスポート・クライアントに直接転送されるため、 >従来型パス・エクスポートに比べて非常に高速です。 >評価バッファ（SQL コマンド処理レイヤー）はバイパスします。 >データは、すでにエクスポート・ユーティリティが要求する形式になっているため、 >不要なデータ変換をする必要がありません。 >データはエクスポート・クライアントに転送され、このクライアントで >エクスポート・ファイルに書き込まれます。 > この「すでにエクスポート・ユーティリティが要求する形式になっているため」サイズが小さいように思えます。 私は詳細には見ていないません。 ※テキストエディタで開いただけ。 詳細な裏づけがひつようなら1表だけexpしてバイナリエディタでどこが違うか調べてください。 また公式な裏づけが必要ならOracleサポートに問い合わせしてください。
そういうことですか。 集計前に判断させればいいのでは？ SELECT AAA,BBB,CCC,SUM(DDD), SUM(CASE WHEN EEE < 0 THEN FFF*-1 ELSE FFF END) FROM TABLE_A GROUP BY GROUPING SETS ((AAA,BBB,CCC),());
ANo.1です。 > とりあえず上記は、厳密に言うと > 　　　　WHERE [番号]=前回編集した番号) > でしょうか？ すみません。そうなります。 手元にOracleの実環境がないので机上のクエリになります。 Order By 句ももしかしたら()が不要かな？ それと、 ROWNUM = 1 は、ROWNUM <= 1 が正しかったかもしれません。 ちなみに私の例は、見栄えの関係で全角スペースを入れてありますので、コピーしたままでは動かないと思います。 余談ですが、 「ROWNUM」はクエリの結果に対する内部的なシーケンシャルナンバーです。最終結果に対して振られる番号の為、私の知っている限り「ROWNUM > 5」等では機能しないです。この判定によって最終結果が再び変わるので機能しないのかな？と理解していますが。
以下のガイドは見ていますか? http://otndnld.oracle.co.jp/software/tech/oci/in … 私がテストしたときは以下でいけました。 1．環境変数「TNS_ADMIN」で「tnsnames.ora」の位置を設定 2. 他PCのtnsnames.oraをコピーして修正。 3. 環境変数「ORACLE_SID」「PATH」「NSL_LANG」を設定 でも、インスタントクライアントって別に無償版ってわけでは ないですよね。接続のためのライセンスは必要なはずです。 OracleDirectに問い合わせたほうがよいですよ。 ※プロジェクトで使わなかったので私は調べていません。
SQL*Plusをお使いとのことですので、データ型を揃えるのが面倒でしたら SET COLSEP ','を試してみて下さい。SQL文では策を弄することなく SELECT AAA, BBB, CCC - DDD, EEE FROM table_A... で希望される出力が得られるように思います。
普通はサブクエリでやると思います。 「売上品で”竹輪”と”胡瓜”を含んだ担当コード」を抽出すればいいわけなので、 SELECT 担当, 商品, 売上品 FROM TableName WHERE 担当 IN (SELECT 担当 FROM TableName WHERE 売上品 = '竹輪') AND 担当 IN (SELECT 担当 FROM TableName WHERE 売上品 = '胡瓜') AND 売上品 IN ('竹輪','胡瓜') または SELECT 担当, 商品, 売上品 FROM TableName WHERE 売上品 IN ('竹輪','胡瓜') AND 担当 IN (SELECT 担当 FROM TableName WHERE 売上品 IN ('竹輪','胡瓜') GROUP BY 担当 HAVING COUNT(DISTINCT 売上品)=2) Oracleの例です。
XP は　proですか？ homeでは確かインストール出来ないと思います。
ANo.1さんの回答とは別の一例として… select テーブル１.ID, ・・・(省略) from テーブル１ a , テーブル２ b , テーブル２ c where a.bangou1 = b.ID and a.bangou2 = c.ID and b.flag <> '0' and c.flag <> '0' ; テーブル２を別々に２回リンクしてそれぞれで判定します。 ただし、これだとテーブル２が未存在の場合、表示されないという状況になりますが、それは外部結合なりで解決できるかと思います。 また、flagが数値項目の場合「'」は不要となります。 「and b.flag * c.flag <> 0」といった事も可能になります。
なにか普通に処理してはいけない（＝HAVINGを使わなくてはならない）事情をお持ちですか？ こうやればできますが、CROSS JOINはCostlyです。 SELECT b.ID, b.NAME, SUM(CASE WHEN A.ID=B.ID THEN 1 ELSE 0 END) FROM table_a a, table_b b GROUP BY b.ID, b.NAME 普通は、こんな風に書くのでは。。？ SELECT b.ID, b.NAME, COUNT(DISTINCT cate) FROM table_b b LEFT OUTER JOIN table_a a ON a.ID=b.ID GROUP BY b.ID,b.NAME SELECT b.ID, b.NAME, NVL(CNT,0) FROM table_b b LEFT OUTER JOIN (SELECT ID,COUNT(*) CNT FROM table_a GROUP BY ID) a ON a.ID=b.ID
おそらくWindowsで実行されていると思いますが、以下の各点をご確認下さい。 ・日本語文字を使わなければ、挿入が成功しますか ・SQL文の文字コードは何ですか ・SQL文の文字コードに合わせて、CommonSQLEnvironmentを実行されているマシンの環境変数NLS_LANGを適切に設定されていますか
こんにちは。 まずObjectBrowserですが、クライアント端末上で稼動するアプリケーションである事は理解されていますか？。 つまり回答は、クライアントにインストールされたOracle Client に含まれる exp.exe を利用(指定)して exp します。 次に $ORACLE_HOME 配下の BIN に exp.exe が存在しないという事ですが、単純に Oracle Client をインストールしただけではインストールされません。 カスタムインストールするか、管理者インストールを行わないと、そのツールは利用出来ないはずです。 この辺りの説明はOracle インストールガイドに掲載されている項目です。　一度、熟読される事をお勧めします。 最後に蛇足ですが、開発者なら最低でも、インストール環境，Oracle Version，ObjectBrowserのVersion 位は提示しましょう。 参考まで。
無償のExpress Editionのことですかね？ http://www.oracle.com/technology/products/databa …
ディクショナリから取得可能です。 select object_name,object_type, to_char(created,'yyyy/mm/dd hh24:mi:ss') as created from user_objects where object_name = 'EMP'; OBJECT_NAME OBJECT_TYPE CREATED ----------- ------------ ------- EMP TABLE 2007/11/27 20:16:50
表立った特徴はこんな感じでしょうか？ TRUNCATE ・全件対象で削除。 ・ROLLBACKにて処理の取り消しが不可能。 ・DELETE文より高速。 DELETE ・WHERE文にて条件を記述し、一部のレコードのみ削除が可能。 ・ROLLBACKにて処理の取り消しが可能。 ・TRUNCATEより時間がかかる。
これはempを使ったデモでよくあるパターンですよね。 自分自身と外部結合して比較すればよいでしょう。 <empのパターン> select a.*,b.ename,b.sal from emp a, emp b WHERE a.mgr = b.empno(+) AND a.SAL < b.SAL order by b.ename <社員マスタのパターン> select a.社員名,a.給料,b.社員名,b.給料 from 社員マスタ a, 社員マスタ b WHERE a.上司 = b.社員コード(+) AND a.給料 < b.給料 直属の部下と上司のみの比較ならこれでOKです。
分析関数を使えるバージョンですか？
ひとつの手段として、トリガーを利用するのはどうでしょう。 (合わせてＤＢリンクも必要かな？) トリガーを利用すれば、あるアクション(INSERT、UPDATE、DELETE)を引き金として、特定の処理を実行する事が可能です。 アクション前後のカラム内容の両方を利用する可能ですので、別テーブルに同内容をINSERT、UPDATE、DELETEする事もできます。 ただ、マテリアライズド・ビューと比べてパフォーマンスやCPU負荷がどうなるかは微妙ですね。 頻繁に更新がある表に関しては、マテリアライズド・ビュー。 あまり更新がない表に関しては、トリガー。 がいいのかなぁ？と思っていますが、前者は9i→10g・・・と改善されているので、すべて前者でもいいのかな。 また、他DBの用途にもよりますが、レプリケーションが可能であればそれが一番良いような気もします。 あまり参考にならなくてすみません。
私は http://www.7andy.jp/books/detail/-/accd/31014010 あたりでしょうか
この辺りの資料を読んでください。 詳しく解説されてます。 http://www.insight-tec.com/mailmagazine/ora3/vol … http://otndnld.oracle.co.jp/document/products/or …
そのテーブルのレイアウトを教えて頂けないでしょうか。 SQL*Plusから、 describe テーブル名 の結果をお願いします。 Accessで表現不可能(と言うわけではないのでしょうが)な特殊な型をOracle側で利用している可能性があります。
Oracle11gとAccess2000で試しました。 (1)オラクルデータ型 SQL> desc xxx 名前 NULL? 型 ------ ------ ------------------------------------ XXX VARCHAR2(6) (2)Accessリンクテーブル XXX　テキスト型 (3)SQLの実行結果 SELECT Replace(Right([xxx], 2), "0", "") & "月" FROM SCOTT_XXX; 6月 提示されたSQLは通りましたよ。 上手くいかないとは、どういう事象が発生しているのでしょうか。
B13をすべてチェックしてみてください。 恐らく、年月日にマッチしないデータがあるんだと思います。 例)940101→1994年01月01日 ○ 　　940000→1994年00月00日 × 　　940132→1994年01月32日 × 　　 以下、試した結果です。 SQL> SELECT TO_DATE(TO_CHAR(940101, '000000'),'RRMMDD') FROM DUAL ; TO_DATE( -------- 94-01-01 SQL> SELECT TO_DATE(TO_CHAR(940131, '000000'),'RRMMDD') FROM DUAL ; TO_DATE( -------- 94-01-31 SQL> SELECT TO_DATE(TO_CHAR(940132, '000000'),'RRMMDD') FROM DUAL ; SELECT TO_DATE(TO_CHAR(940132, '000000'),'RRMMDD') FROM DUAL * 行1でエラーが発生しました。: ORA-01847: 月単位の日付は1から月末日の間で指定する必要があります SQL> SELECT TO_DATE(TO_CHAR(940000, '000000'),'RRMMDD') FROM DUAL ; SELECT TO_DATE(TO_CHAR(940000, '000000'),'RRMMDD') FROM DUAL * 行1でエラーが発生しました。: ORA-01843: 指定した月が無効です。 如何でしょうか。
とりあえず、なんとかなったようでよかったです。 新しく質問立てて頂いていいかと思います。 （なにぶん、今は仕事ではOracleを使っていませんので、細かいところをすぐ試すわけにはいかないです。もっと早く回答できる人もいるでしょう） ちなみに、文字列の大小はコードで比較されますが、ASCIIでもUNICODEでも'8'<'A'だと思いますよ。 番号がVARCHAR2で常に10桁(10文字)入っているなら、TO_CHARを使わずにそのまま結合してはだめだったのかな、と思いました。
カーソルにINのパラメータが設定できるので、INで受け取った値をカーソル内のWhere句に指定すれば検索可能です。 昔、こんな感じでやりました。 以下のサンプルはscottユーザで流してみてください。 set serveroutput on size 1000000 DECLARE CURSOR emp_cur IS SELECT empno, deptno FROM emp ; emp_rec emp_cur%ROWTYPE; CURSOR dept_cur ( in_deptno IN NUMBER ) IS SELECT deptno, dname FROM dept WHERE deptno = in_deptno ; dept_rec dept_cur%ROWTYPE; BEGIN OPEN emp_cur; LOOP FETCH emp_cur INTO emp_rec; EXIT WHEN emp_cur%NOTFOUND; OPEN dept_cur ( emp_rec.deptno ); FETCH dept_cur INTO dept_rec; IF dept_cur%NOTFOUND THEN DBMS_OUTPUT.PUT_LINE('dept not found : ' || emp_rec.deptno); ELSE DBMS_OUTPUT.PUT_LINE(emp_rec.empno); DBMS_OUTPUT.PUT_LINE(dept_rec.dname); END IF; CLOSE dept_cur; END LOOP; CLOSE emp_cur; EXCEPTION WHEN OTHERS THEN DECLARE ERROR_CODE NUMBER := SQLCODE; ERROR_MSG VARCHAR2(300) := SQLERRM; BEGIN DBMS_OUTPUT.PUT_LINE('*** ORA-ERROR IN THE EXCEPTION ***'); DBMS_OUTPUT.PUT_LINE('ERROR CODE : ' || TO_CHAR(ERROR_CODE)); DBMS_OUTPUT.PUT_LINE('ERROR MSG : ' || ERROR_MSG); END; END; /
こんにちは 質問文を拝見しましたが、私の理解力不足で、よくわかりませんでした・・・。 このレコードカウントは、編集されたらインクリメントされるんですか？ ほかのテーブルに移動されたレコードは編集対象外となるんですか？ 何をどのようにしたいのかと、それぞれのデータが持つ意味を教えて頂けますか？
Oracle専用じゃなくあくまでレイアウトのサンプルですが 参考URL：http://www.igapyon.jp/blanco/blancodb.html
こんにちは 正式な読み方っていうのはないと思います。 多分、「sys」「auxiliary」の略語だと思うので（勝手にそう思ってます・・・）、 しいて言えば「シスオグジリアリ」かな？ 長いですね・・・。
ご要望とは違いますが、こんなのはどうでしょう? 1)ODBCドライバでMS-Accessにテーブルをリンクする。 2)リンクテーブルを開いて全体を選択する。 2)編集→置換で「すべて置換」。 ただし、以下の問題があります。 ・対象テーブルがわからないので1つ1つやらなければならない ・Oracleでできるかわからない(MySQLでは試しました) ・MS-Accessで処理できる程度のデータ量でなければいけない 以上です。
(1)開発者ライセンス 「OTN Software Kit」を購入して開発者ライセンスを使用する。 http://www.otn-shop.jp/statichtml/?fn=shop_guide2 ・本番と同じ機能が使用できる。 ・使用期限がない (2)試用ライセンス ・本番と同じ機能が使用できる。 ・使用期限がある（30日） http://www.oracle.com/technology/global/jp/softw … (3)製品版を購入+サポートに入る 製品版を購入するメリットはサポートに入れることくらいかなーと思ってます。サポートに入れば技術情報が見れるし、パッチの入手が可能になります。 ※サポートに入らないのなら開発者ライセンスで十分な気がします。 http://www.oracle.co.jp/products/price/pe_lt_dev … 「Oracle Database Personal Edition」で ・ライセンス単価　：5万円 ・年間サポート料金 ：1万円 (4)無償のExpress Edition ・無償かつ使用期限がない ・機能制限があるので本番と同じ機能が使えない。 http://www.oracle.com/technology/products/databa … どの程度、Oracleにかかわるか次第ですね。 SQLを組んで投げる程度ならExpress Editionで十分。 DBAとして導入・運用までやるなら開発者ライセンスか製品版ですか。
以下のような方法で判断しているのが多いと思います。 (1)重複しているキーの判別 select deptno,count(*) from emp group by deptno having count(*) > 1; 「group by」で重複しているかを判断する項目を指定し集計を行う。集計結果から「having句」で「count(*) 」の結果を「 > 1」に当てはまるものだけを抽出する。 (2) 1の結果から得た重複項目をWhere句として利用し、重複行を全表示する。 select * from emp where deptno in( select deptno from emp group by deptno having count(*) > 1 ); ※10gだと分析ファンクションが使えるので以下のような書き方も可能。 select * from ( select a.* ,COUNT(*) OVER (partition BY deptno) count from emp a ) where count > 1; サブクエリ内でcountを分析ファンクションとして使用して、「partition BY 」で集計する項目を指定する。その結果にWhere句で「> 1」を指定して重複行を省く。 要件にあって効率の良い方法を試してください。
>1)スキーマを削除してからスキーマの再作成をしてインポート この場合、削除したスキーマに対して与えられた権限も消えます。 スキーマを再作成して、権限を与えるのはモレがある可能性があります。すべてのロール、システム権限、オブジェクト権限を戻せるだけの準備が可能なら問題ないですが。 GRANTOR(権限付与を実行したユーザー名)だったら良いのですが、 GRANTEE(アクセス権を付与されたユーザー名)だったら、ユーザモードのexp/impだと、付与された権限は戻せないです。 ※ユーザモードのexpファイルにはgrantした権限の「grant文」しか載りません。 以下のディクショナリから情報を抜き出しておいて前後で比較する必要があります。 xxx_sys_privs xxx_role_privs xxx_tab_privs あるいは考慮しなくてもよい要件なのでしょうか。 >2)スキーマ内のオブジェクトを全部削除してインポート スキーマ単位で考慮すべきことを考えなくてもよいので、こっちのほうが妥当かと思います。
答えは他の方がすでに出していますので、ちょっと違う回答をします。 テキストファイル・データベースそれぞれ利点があります。 扱うデータの量が少ない時はテキストファイルが向いています。（扱いが簡単なため） しかし膨大なデータを扱う事を考えてみてください。 （例　：　図書館のデータ。本が３００万冊あるとする） ISBN　著者　タイトル　本棚の番号 00909 オラクル太郎　データベースの謎　C3 03033 吉野家一郎　牛丼の謎　D2 … (中略：300万行） … 39993 砂漠五郎　砂漠の謎　E3 これをテキストファイルに保存した時、"JAVAの謎"というタイトルの本の本棚の番号を調べるプログラムを書く事を想像してみてください。 300万行逐一アクセスしていては膨大な時間がかかってしまいます。 しかし、データベース等を用いて、タイトルにインデックス（索引）をつけていれば、一瞬で見つかります。インデックスの付け方にもよりますが、２２回もアクセスすれば見つかります。スピードにして１万倍以上です。 しかし、本が５冊しかないならば・・データベースは不要と言えます。 他にも利点・欠点はありますので用途に応じて選べばいいと思います。
Where句をジョイン条件と検索条件で分かれるように ()で括ってあげればよいのでは? 以下でエラーにならずに発行できます。 select * from emp a, dept b where a.deptno = b.deptno(+) and ( a.ename LIKE '%A%' OR a.job LIKE '%A%' ); それかANSIのジョイン句を使うかです。 select a.* from emp a left outer join dept b on a.deptno = b.deptno where a.ename LIKE '%A%' OR a.job LIKE '%A%' ;
ALTER文で、KILL SESSIONするのが一般的な方法かと思いますよ。
普通に書けばいいんじゃないですか? この構成なら商品コードに索引がついていると思うので。 実行計画もつけました。 UPDATE 売上T a SET ( a.金額 ) = (SELECT a.数量 * b.単価 FROM 商品M b WHERE a.商品コード = b.商品コード ) WHERE EXISTS (SELECT 'X' FROM 商品M x WHERE x.商品コード = a.商品コード ); 実行計画 ---------------------------------------------------------- Plan hash value: 4109107743 -------------------------------------------------------------------------------------------- | Id | Operation | Name | Rows | Bytes | Cost (%CPU)| Time | -------------------------------------------------------------------------------------------- | 0 | UPDATE STATEMENT | | 1 | 10 | 3 (34)| 00:00:01 | | 1 | UPDATE | 売上T | | || | | 2 | NESTED LOOPS | | | || | | 3 | NESTED LOOPS | | 1 | 10 | 3 (34)| 00:00:01 | | 4 | SORT UNIQUE | | 1 | 3 | 1 (0)| 00:00:01 | | 5 | INDEX FULL SCAN | IDX_商品M_0| 1 | 3 | 1 (0)| 00:00:01 | |* 6 | INDEX RANGE SCAN | IDX_売上T_0| 1 | | 0 (0)| 00:00:01 | | 7 | TABLE ACCESS BY INDEX ROWID| 売上T | 1 | 7 | 1 (0)| 00:00:01 | | 8 | TABLE ACCESS BY INDEX ROWID | 商品M | 1 | 5 | 2 (0)| 00:00:01 | |* 9 | INDEX RANGE SCAN | IDX_商品M_0| 1 | | 1 (0)| 00:00:01 | -------------------------------------------------------------------------------------------- Predicate Information (identified by operation id): --------------------------------------------------- 6 - access("X"."商品コード"="A"."商品コード") 9 - access("B"."商品コード"=:B1) 統計 ---------------------------------------------------------- 0 recursive calls 1 db block gets 5 consistent gets 0 physical reads 0 redo size 696 bytes sent via SQL*Net to client 844 bytes received via SQL*Net from client 3 SQL*Net roundtrips to/from client 2 sorts (memory) 0 sorts (disk) 1 rows processed
可能性の１つとして考えてください。 データベースリンクを作成した際、 ユーザーとパスワードを逆に設定してしまった。 なんて事はないでしょうか？ 普通にCONNECTできているという事は、 権限関係は恐らく問題ないと思われるので。
> 知識はSQL分を少しかじった位程度なのでBronzeも考えましたが、 > どうせならSilverを受けてみようかと考えています。 Silver を取得するための前提条件として Bronze を取得しておくことっていうのがなかったでしたっけ？ (すなわち、Silver を取得するためには Silver DBA に加えて Bronze の SQL、Bronze DBA に合格する必要がある) > お奨めの参考書やサイトなどがあれば教えて貰えないでしょうか？学習 > 期間は3ヶ月と決めてチャレンジする予定です。 翔泳社から出ている「オラクルマスター教科書 Silver Oracle Database 10g DBA 10g (オラクルマスター教科書) 」が有名でかつ辞書が代わりにもなっていいかと思います。ちなみに、このシリーズの著者の方々は銀座でオラクルが主催する研修の講師をされています。 http://www.amazon.co.jp/%E3%82%AA%E3%83%A9%E3%82 …
tnsnames.oraの設定とか・・・
分析関数で無理矢理に・・ select distinct * from ( select コード, replace(translate(商品名,translate(商品名,lead(商品名) over(partition by コード order by length(商品名)),' '),' '),' ','') 共通商品名 from T ) where 共通商品名 is not null;
Windows版oracleのPL/SQLは、COMオートメーションを操作できますので、質問の回答としては、呼出可能です。 詳細は、マニュアルをご覧ください。
--Windows Server 2003 R2 Standard Edition(サーバーOS) 「10日でおぼえるOracle10g 入門教室」はどのOSを前提で やってるのですか？ --「10日でおぼえるOracle10g 入門教室」の電子媒体関連の物は ネット上に落ちていないかどうかの確認も必要かと思われます。
一般的な業務で使われている構成で見れば 普通はクラスタリングとリプリケーションを 併用します。 クラスタリングはサーバー側で行なわれ VCS・RAC・HACMP等があります。 これらは基本的にはサーバーのハードウェア に対する冗長化（２重化）です。 （ソフト側の冗長化にもなっていますが、 　サービス・OSがクラッシュすると、結局は 　同じOS構成なのでスタンバイでも同じ 　問題が起きる可能性があります） HBA・イーサカード・CPUが仕様不可になった場合は スタンバイに切り替わり業務再開となります。 リプリケーションとは大抵の場合はストレージ側（外部HDD） で取られています。 RAID構成の１ボリューム対し　ミラーリング・静止点バックアップ・災害対策 この３つのボリュームが作られます。 ミラーリングとは実際に使用しているデータがそのままコピーされています。 生のデータが入っているので、もしも本番のHDDが壊れた場合は このコピーが即座に使用可能になり業務再開します。 静止点バックアップは、ある一定の間隔でバックアップを取る事によって 不正データ等があった際にその時点までロールバックできます。 災害対策は物理的に違う場所、機器にデータをコピーしておき 地震等の災害に備えてあります。地震が来た際はサーバー側からは HDDが壊れている事等は全く関係なく、遠距離にあるHDDにDBはアクセスします。 クラスター　＝　サーバーの二重化 リプリケーション　＝　HDDの二重化 となります。
NULLは、値が不明であることを意味します。 そして、SQLではTRUE、FALSEからなる2値論理ではなく、UNKNOWNの入った3値論理を使っています。 NULLを含む演算は、不明の値が入っていますので、結果もNULLになります。 また、NULLとの比較は、UNKNOWNになります。 今、T、F、Uであらわします。 empn <> null は、不明の値との比較ですので、結果はUです。 T AND U は、UはTまたはFになる事ができますので、Uになります。 T AND T → T T AND F → F T AND U → U F AND F → F F AND U → F U AND U → U 値がNULLか調べるには　IS NULL　を使います。 empn <> null →　empn IN NOT NULL
こういうことでしょうか？ select T2.shopcode, T2.shopname, COUNT(T1.customercode) from Test1 T1 inner join Test2 T2 on T1.shopcode = T2.shopcode group by T2.shopcode, T2.shopname order by shopcode
10g ですが、問題なく動きました。 もし、動かないようでしたら、Oracleのバグかもしれません。 JOINキーワードを使った構文を、Oracleは取り入れたばかりなので、結構問題が多いようです。 少なくとも、この問題は10gでは解決しているようです。 Oracle方言の下のSELECT文を試してみてください。 select A.*,B.*,C.* from A,B,C WHERE A.XX(+) = B.XX AND B.XX(+) = C.XX; 私は、つい最近natural joinをかけた後のCOUNT(*)のバグを発見して、Oracleに報告したばかりです。
RESUMABLE_TIMEOUTではどうでしょうか？指定単位は"秒"です。 詳細な仕様はOTNの、 Oracle Database管理者ガイド － 再開可能領域割当ての管理 Oracle Database リファレンス 10gr2 あたりを参考下さい。 細かくて申し訳ございませんが、 初期「化」パラメータですよね＾＾；
DHCPが邪魔している気がするので、とりあえず・・ Personal版は、ネットワーク越しに接続できないライセンスです。 ネットワーク越しの接続は考えなくて良いので、TNSNAMES.ORAと LISTENER.ORAのホスト名を、127.0.0.1というようなIPアドレス記述に 変更すれば解決するんじゃないですかね。
Access側がただのフロントエンドで、リンクで接続するというのなら実態はOracle側にありますので特徴は損なわれることはないと思います。
もう少し、なにをしたのかを書かないと回答しにくいです。 インスタンスを複数作成したのなら接続するためには、2つを区別しないと接続できません。 そのための設定は「Oracle Net Configuration Assistant」で行います。 「ローカル・ネット・サービス名構成」を構成し、作成した接続文字列を指定することで接続先を切り替えてください。
betweenは、「a between 1 and 7 (=aは1以上7以下）」のように使うのですが、変数$whereの値がそのようになってないのでは。 変数$whereが具体的にどのような値になっているか補足したら、回答が得られやすいと思います。
トリガ内でSYS_CONTEXT('USERENV', ... )関数使えなかったでしょうか？
テーブルの動的拡張では? 　テーブルの初期時のExtentの数と最大データ時のExtent数の違いが気になります。 　データを入れるたびに領域が足りなくExtentが割り当てられつづける。そして、2万件Insertした時点で増分サイズの設定で全件収まるだけのサイズに拡張されているような気がします。 　Insert時にdba_extentsを監視してみると良いでしょう。 　あと、該当表領域の管理方式がどちらなのかも気になります。 　・ディクショナリ管理表領域 　・ローカル管理表領域 　ディクショナリ管理だとExtentの割り当ての負荷が高いので、 　当てはまる可能性は高いです。 　Storageを見直すか、Truncateを「REUSE STORAGE」付きで実行してExtentの開放を行わないのもひとつの手です。
余りに丸投げなご質問なのでちょっと閉口。。。 至って簡単なPL/SQLなのでネットで構文調べれば分かるかと思います。 一応インデント付けて読みやすくしてみました。 DECLARE 　CURSOR C1 IS 　　SELECT @1 FROM " & MyTable & " WHERE @1 BETWEEN @2 AND @3 ORDER BY CODE; 　PREC C1%ROWTYPE; 　i NUMBER; 　NEWCODE NUMBER; BEGIN 　:RetValue := -1; 　I := @2 - 1; 　NEWCODE := -1; 　OPEN C1; 　LOOP 　　FETCH C1 INTO PREC; 　　EXIT WHEN C1%NOTFOUND; 　　 　　i := i + 1; 　　IF PREC.CODE <> i THEN 　　　NEWCODE := i; 　　　EXIT; 　　END IF; 　END LOOP; 　CLOSE C1; 　:RetValue := NEWCODE; EXCEPTION 　WHEN OTHERS THEN 　:RetValue := -1; END;
extract(hour from ...)がUTCを返すのは仕様です。 extract(timezone_hour from ... )と組み合わせるのはどうでしょう。 select mod( EXTRACT(timezone_HOUR FROM CURRENT_TIMESTAMP) + EXTRACT(HOUR FROM CURRENT_TIMESTAMP),24) local_hour from dual
前にもレスしたんですが、Oracleで可変列はできないと思います。 方法としては以下の代替案があります。 (1)Accessにリンクし、Transfer（集計）クエリにする。 (2)Excelに抽出し、行列を入れ替えてコピペする。
こちらも今Oracle環境がないため外していたらスミマセン。 PL/SQLでやるならCURSORを使えば良いと思いますが。。。 FETCHして対象データなければすぐ抜けますし。 ROWNUMを使えば一文で出来そうな気もします。 Insert into TBL1(COL1) Select COL1 From TBL2 Where COL2 = 'xxx' and ROWNUM <= 10;
言葉の上ではそうです。 SELECT文のFROMが、絞り込まれたクエリであるというだけです。 例えば、SELECT * FROM XXX を考える時、XXXがTABLEでなく、VIEWであったら、 どう考えますか？FROM句の元がテーブルか、クエリかということは気にする必要は ありません。それが、ネストしていたとしても、「たまたま」なのです。 というより、昔のDBシステムは遅かったので、こういう「絞り込み」は半ば常識でした。 「降順で並べた先頭レコードだけを抽出する」という考え方で、ROWNUM=1は ORACLEの方言です。他ではTOP、LIMITというキーワードがあり、使用方法も異なります。
>１．「表データの削除」と「表データの切捨て」はまったく違う現象なのか。どう違う現象なのか。 DML（データ操作言語）の削除とDDL（データ定義言語）の削除とは、全然違います。敢えて対応付けるとすれば、以下のようになるかと。 「表データの削除」→DELETE[DML] 「表の切り捨て」（全ての表データを削除）→TRUNCATE[DDL] 「表の削除」→DROP[DDL] 一般的に、DML[Data Manipulation Language]ではデータベース内のデータに関する操作を行いますが、DDL[Data Description Language]ではスキーマ・オブジェクト（表、ビュー、インデックスなど）に関する操作を行います。よって、Oracleデータベースにおいては、「表データの切捨て」という表現は、おかしくて有り得ないものだと思います。用は、「切り捨て」という言葉は、DDLの中のTRANCATEだけに使用されている言葉だと考えていればいいと思います。 >２．結局TRUNCATE文も表のデータを削除してるのではないのか。 同じ「削除」でも、内部的には以下のような違いがあります。 DELETE→ ・ロールバックが可能。 ・記憶領域（エクステント）は開放せず。 TRANCATE→ ・ロールバックは不可能。 ・記憶領域（エクステント）は開放される。 ・しかし、表構造は残る。 で、表構造まで削除したい場合は、DROPを行います。
> tempdate DATE; DATE型の変数に > select to_char(sysdate, 'yyyy/mm/dd') INTO tempdate from dual; 文字列を代入しようとしています。 create or replace package body Pac is procedure Pro1(p1 in varchar2) is tempdate DATE; begin select sysdate INTO tempdate from dual; DBMS_OUTPUT.PUT_LINE('引数は' || p1 || 'です。'); DBMS_OUTPUT.PUT_LINE('日付は' || to_char(tempdate, 'yyyy/mm/dd') || 'です。'); end; end; / を試してみてください。
10g Express Edition(10g XE) ってやつが無料でずっと使えます。 メモリやデータ領域すべて、たしか4Gの制約が付いていますが、それ以外は製品版と同じです。 勉強するぶんには十分だと思いますよ http://www.oracle.com/technology/software/produc …
技術面に興味を持つ営業、頼もしいですね。 個人的な感想はさておき、 > １．プログラムのプの字も知らない私がオラクルsilverを取るまでに必要な知識はなんでしょうか？ 基本情報処理技術者試験の受験者向けの、SQL解説本を1冊読破されてはどうでしょうか。 RDBMSの一般的な知識はそれで得られるかと思います。 普段Accessを使われてるんでしたら、結構簡単にこなせると思いますよ。 オラクルSilverの問題集を見て、「コンピュータ一般の知識がなさすぎる」と感じられるようでしたら、 一旦、基本情報処理技術者試験のほうから挑戦するといいかもしれません。 > ２．私自身の頑張りにもよりますがどれくらいで取れますでしょうか？ 電車通勤中に30分、昼休みに30分、家に帰ってからコンピュータの前で1時間ほど 時間を費やせるのであれば、1ヶ月ぐらいでいけるんじゃないでしょうか。 応援してます。頑張ってください。
こんにちわ VBで開発とのことですが、もしかしてミドルウェアはoo4oでしょうか？ oo4oでしたら、アーリーバインドを使うと、フィールド名が化けることがありました。 このときは、レイトバインドに変更しただけで解決しました。 ご参考になれば。
こんにちは バージョンは何ですか？ 10g以降だったらMODELでいけるかも・・・。 どれを駆動表に指定しても、最終的なOUTPUTと行数が違うので、普通の外部結合では無理ですね。
残念ですが、DDLトリガーは8i以降の機能です。
単に、インストールしたOracleにアクセス権がないだけでは？ デフォルトではProgram Filesの下や、Cドライブ直下にOracle関連の ディレクトリが作成されると思いますので、適切にアクセス権を設定すれば ODBC接続が可能と思います。
ここからダウンロードできます。 http://www.oracle.com/technology/products/databa … ダウンロードするにはユーザー登録が必要です。 （画面右上のsign in/Register for Accountをクリックして行ってください） 後、ダウンロードするのはUniversal版にしてください。 インストールの参考に http://www.dbonline.jp/oracleinstall/index.html
それって論理バックアップですよね。 ・物理バックアップ 　物理的な障害対策で取得するバックアップ。 　データファイル・アーカイブログなどを取得。 ・論理バックアップ 　ある時点のデータのバックアップ。 　ExpやSelect文でデータの中身を取得する。 つまり、エクスポートユーティリティの増分エクスポートの 方法を知りたいということでしょうか。 でも、増分エクスポートって9iから廃止されてますよね。 > EXP-00041: INCTYPEパラメータは廃止されています
>１．oracleシルバーのどれを取得しても、「oracleシルバー取得した！」と宣言できるのでしょうか？ 宣言自体は出来ると思いますが、以下のサイトにもあるように、同じORACLE MASTER Goldでもその内容によっては、全然違います。 2008年版「いる資格、いらない資格」 第3回　営業効果で見る「役立つ資格」（ベンダー系資格） http://itpro.nikkeibp.co.jp/article/COLUMN/20071 … >２．最終的にゴールドを、短時間の勉強で取得するには、まずはシルバーのどれを取得すればいいでしょうか？ 基本的に、「PL/SQL」や「アプリケーションサーバー」というのは、それがどういった技術なのか分かっている方々が受験する資格だと思います。それに「データベース」以外では、ネットや受験対策本など情報量が格段と少なくなりますから。 一般的には、以下の公式サイトにもある通り、初学者は上から順番に取得していくべきだと思います。 オラクル認定資格制度 Oracle9i Database 管理者 http://www.oracle.com/global/jp/education/certif …
SELECT T1.T1_NM,T2.T2_NM,T3.T3_NM FROM TBL1 T1,TBL2 T2,TBL3 T3 WHERE T1.T1_ID = NVL(T2.T1_ID,T3.T1_ID) AND T2.T2_ID(+) = T3.T2_ID でどうですか？
　INTERVAL YEAR TO MONTH と、INTERVAL DAY TO CECONDをあわせて、期間型といいます。このふたつで、任意の期間が「何年何月何日何時何分何秒」で表示できます。 　さて、期間型の使い道ですが、まずは、文字通り何ヶ月間とか何秒間とかいうデータを保存するのに使うというのが素直ですか。 　もうひとつの重要な使い道は演算です。特に、期間を表すデータがちゃんと期間型としてテーブルに構成されていると力を発揮します。 　考えてみてください。 　あるDATE型のフィールド「A」があり、そこからの経過時間を表すフィールド「B」があるとします。とりあえず、「B」の単位は、「●時間●分間」としましょうか。 　さて、Bが経過した後の日付時刻は？と聞かれたとき、どう計算しますか？というのが問題です。もし、Bのフィールドが、何時間と何分を表すNUMBER型の二つの数値で登録されていたり、「●●：●●」という文字列で表記されていたりしたら、どんな処理が必要か想像してみてください。 　日付時刻の計算というのは意外と面倒だというのがわかると思います。 　INTERVAL ** TO **型であれば、何の気遣いもいりません。そもそもそのための型です。素直に足し算すれば終わりです。引き算も素直にできます。（ちなみに、先の質問の数値や文字列で保存されていた場合の一番簡明な処理方法は、INTERVAL ** TO **型に変換して足し算することかと思います（苦笑）） 　こんな感じでイメージはつかめますでしょうか？
こんにちは 素直に物理メモリを増設するのが一番だと思います。 勉強のためなら最低限のメモリでも動作しますが、OSや他のことを考量すると2ギガ以上が望ましいと思います。 >通常、物理メモリって256MBだと思っていたのですが・・ 上記認識自体は概ね間違っていません。 PC環境が不明なので推測ですがVRAMで8メガほど取られて使用可能なメモリと認識されていないのでしょう。
・WITH READ ONLY　ビューに対するINSERT,UPDATE,DELETEをすべて拒否しま す。 ・WITH CHECK OPTION　ビューの元になるSQL文のWHERE条件に当てはまらない データの挿入やWHERE条件にあてはまらないようになるUPDATEが出来なくなり ます。 WITH CHECK OPTIONはSQL SERVER2005にも実装されていますが、「READ ONLY」 はORACLEの独自拡張でSQL SERVERには実装されていません。
制御ファイルを多重化すれば、それが１つ壊れたら、インスタンス停止後に、壊れていない方から壊れたファイルに上書きすれば、測復旧できます。 　いわば、リアルタイムのバックアップです。
Oracleのストアードプロシージャはファイルとして格納されているわけではないので、ファイルサイズという言葉はあまり適切ではありません。 user_sourceやdba_sourceのビューからバイト数を合計して改行コード分でも足せばテキストに落とした場合のサイズはわかりそうですが。
分析関数を使った例。SQL SERVER2005から、ORACLEなら8iのEE(9iからはSTANDARD EDITIONも）から使えます。 SELECT A.* FROM ( SELECT *,ROW_NUMBER() OVER( ORDER BY ソートキー項目 ) RN FROM テーブル名 ) A WHERE RN BETWEEN 30 AND 50
No2です。 今のご時勢、InnerJoinで書かないと駄目なんでしょうか。 こちらの書き方はあまり馴染みがないので、細かい文法がおかしいかもしれません。 基本的に、全部絞り込んでいけばいいだけのようなので、等価結合していけばいいと思いますよ。 SELECT テーブルA.社員コード, テーブルA.社員氏名, テーブルC.区分コード FROM テーブルA 　((INNER JOIN テーブルB ON テーブルA.社員コード = テーブルB.社員コード) 　INNER JOIN テーブルC ON テーブルA.社員コード = テーブルC.社員コード) 　INNER JOIN テーブルD ON テーブルC.会社コード = テーブルD.会社コード 　　AND テーブルC.部門コード = テーブルD.部門コード WHERE 　テーブルA.年月日 IS NULL AND 　テーブルB.区分コード <> '01' AND 　テーブルD.会社コード = '00001'
ODBCドライバ自身は、特別の事情がなければ、最新版を使う方が問題が少ないので、 自分でダウンロードしたものを使う、で良いかと思います。 インストールのタイプは、そのＰＣからオラクルのツール類を使うことがないなら、 ランタイムで充分かと思います。 後で、ツール類が必要になったら、OUIでいつでも追加できます。 そして、追加することで、管理者インストールと同等の状態は、いつでも作れます。 （管理者機能が必要なら、管理者インストールすれば、手間が少ないだけ、という違いでしかありません）
(1)OSベースではsarとかvmstatでの調査 　Windowsベースならパフォーマンスログを取ってみる。 (2)Oracleならstatspackの活用 (3)手軽にはhttp://www.insight-tec.com/mailmagazine/ora3/vol … 　なんかで負荷の高いSQLの抽出 などでは
自分の使用環境に該当するかどうか分からない不具合を探すより、自分の環境、使用しようとしているSQLで不具合が生じないかを確認する方が、遥かに効率的だと思いますが？
>前半のSELECT文で抽出したレコードの集まりを表として名前を付け 言っている意味が良く分かりません。 ただ、クエリをFROM句に使うことが可能です。 例えば、以下のようにします。 SELCT SHOP_CODE,SHOP_NUMBER,MONEY1,MONEY2 FROM 　(SELECT SHOP_CODE,SHOP_NUMBER,MONEY1,MONEY2 FROM TBL WHERE SHOP_CODE BETWN 'A' AND 'D'), 　(SELECT SHOP_CODE,SHOP_NUMBER,0 MONEY1,0 MONEY2 FROM TBL WHERE SHOP_CODE NOT IN ('A','B','C','D')) 結合条件が無いので、レコード数は両クエリのレコード数の積（和ではない）になりますが、 こういう記述も可能だというサンプルです。レコード数が大量にあるテーブルの場合は このように条件で絞ったクエリをFROM句で使うとにより、処理速度の向上が期待できる場合があります。 特にキー項目で絞れる場合は大きな効果が得られます。 まあ、DBシステムにより、色々なワザがあるわけで、覚えておいても損はないでしょう。
サービス（OracleDBConsole<インスタンス名>）の起動は試したが、 そのサービスが起動しない状況なんですね。 オラクルをインストール後、 コンピュータ名（ホスト名）を変更していませんか？
Oracle9iR2のSQLマニュアルをもう一度ご覧になれば「ALLは、表12-1 の すべての文オプションを監査しますが、表12-2 の追加文オプションを 監査しません。」と書かれています。上の2表から、監査すべきことを 選んでAUDIT文を書くことになります。
No1.さんと同じ見解ですが、こういう方法はどうでしょうかという案で、試してみてください。 システム->環境変数で、変数：TZ、値：JST-9を追加して、 管理ツール->サービス OracleDBconsoleXX サービス(でしたっけ・・・)を再起動してみるでは駄目ですか？
関数を使わない案として select IIF(ZZZ = 'A','','P') from テーブル; または、 select CASE～ IIFでは、ZZZ='A'が真の場合は''を返却 以外は'P'を返却します。 ※すみません、検証してないので、構文あってないかもしれません。関数使わなくていいなら、SELECT CASE、IIF関数で目的達成できるかもと思った次第です。
>残りのプライマリキーが一つならば、IN句の副問い合わせでできそうな感じですが、 >２つある為、IN句では指定できませんでした。 こんな感じで、２項目以上のIN条件(メンバーシップ検査)は可能です。 サンプルがROWNUMを使っているので、同じようにROWNUMを使った場合です。 DELETE FROM テーブル WHERE (P-Key1,P-Key2) IN ( SELECT P-Key1,P-Key2 FROM ( SELECT P-Key1,P-Key2,ROWNUM R FROM ( SELECT P-Key1,P-Key2 FROM テーブル WHERE THREAD = 1 AND TERMID = '端末ID' ORDER BY TIMESTAMP ) ) WHERE R<3 ) ; ROWNUMをROW_NUMBER分析関数に書き換えると、サブクエリが少し単純化されます。 DELETE FROM テーブル WHERE (P-Key1,P-Key2) IN ( SELECT P-Key1,P-Key2 FROM ( SELECT P-Key1,P-Key2,ROW_NUMBER() OVER(PARTITION BY P-Key1,P-Key2 ORDER BY TIMESTAMP) R FROM テーブル WHERE THREAD = 1 AND TERMID = '端末ID' ) WHERE R<3 ) ;
rownumはselectをした際に割り振りされる仮想列です。 ですので、Where句として指定してもrownum単体の条件では索引は使われません。ですので指定したからといって単純に速くなることはありません。 しかし、Web等で1～100件、101件から200件というようにクエリから 返ってくる件数を制限するような用途では効果があります。 何万件ものデータを取得してから100件を表示するのと、 データを100件だけ取得して表示するのでは大きな違いです。 つまり、取得件数を制限することで、転送・メモリを節約する用途では効果があるということです。 あとは、単に連番が振りたいだけとか。 気をつける必要があるのは、selectした順に振られるということは、Order byで並び順を指定しないと結果が異なってしまいます。
多分Windowsかなという前提ですが、 先ず、Oracleは8i×10gでのマルチ環境での動作はサポート してなかったと思います。9i以降は出来たはず。(うろおぼえ) 以下は、インストールするためには？という方法を記載します。 \\HKEY_LOCAL_MACHENE\SOFTWARE\ORACLE 直下に、INVENTORY_LOCというキーがあります。 ここにファイルパスがあるのですが、 そのファイルパス(インベントリといいますが) が示すファイルを元に、ORACLEでインストールされている製品は何？ という情報を、インストーラが参照します。 なので、そのINVENTORY_LOCというキーの参照先を8i用として、 適当なパスに変更します。それによって、8iでインストールを実行して、10gの排他が無いものと認識し、別でインストールできます。 10g環境に戻したい場合は、INVENTORY_LOCのキー値を元に戻してください。 また、既に起動しているサービスの競合(8iと10gそれぞれのサービス) は注意してください。 一般公開のドキュメントを超える話は書けません。 "インベントリ"という情報を元に、Oracleの仕様を探ると幸せになれるかもです。
ジョインすればよいでしょう。 SELECT a.owner, a.table_name, a.tablespace_name, b.file_name FROM dba_tables a, dba_data_files b WHERE a.tablespace_name = b.tablespace_name AND a.table_name = 'EMP' ; OWNER TABLE_NAME TABLESPACE_NAME FILE_NAME ----- ---------- --------------- ----------------------------------------------- SCOTT EMP USERS C:\ORACLE\APP\ORADATA\TEST\DATA\USERS01.DBF 注意点 (1)dba_xxxはDBA権限を持つユーザーかViewに対して個別に 　権限を与えたユーザしか参照できません。 (2)表領域は複数のデータファイルで構成することも可能なので、 　SELECTの結果が複数件返ってくる場合もあります。 (3)別のユーザが同名テーブルを所有している可能性もあるので 　ownerまで指定、表示させたほうが良いでしょう。
列別名にダブルクォーテーションは使えないのでは？
こんにちわ。 > 評価方法がわからず、困っております。 > どのように実施すれ良いでしょうか？ Oracle が動いている最中に、目的のファイルにダミーデータを 書き込めばOk です。 普通に"rb+" でfopen() でopen してfwrite() で壊せます。 因みに、データファイルは多重化できませんので、常に ホット・バックアップから戻す事になります。 制御ファイルやRedo Log 再作成のケース (両ドライブ全滅) の場合は実施しなくて良いのですか？
>SELECT文が実行開始後に発生したトランザクションでの変更について変更 >前のイメージをUNDO表領域に保持します。 >経緯を見る限りでは、UNDO表領域を拡大するするのが最も適当だと思いますが。 >後は長時間かかる問合せをチューニングするとか。 ANo.1さんの意見と同じだと思います。 "SELECT文が実行開始後に発生したトランザクションでの変更" これを、 "(ユーザAが発行した)SELECT文の実行開始後に発生した(他ユーザの)トランザクションでの変更（はUNDOに保存されます）" と捉えてもらえれば同じです。
(1)CREATE UNDO- の場合、AUTOEXTENDはOFF (2)AUTOEXTENDの増分値で、 例えば、100Mの表領域サイズで、10Mの増分値指定とした場合 100Mを使い切った時点で、10Mの増分をしますので、 110MのUNDO領域になります。 そこから、90Mしか使わないようになっても、110Mの 表領域サイズはそのままです(ハイウォーターマーク) 100Mで作成し、10Mで増分の設定の場合、 一気に200Mまで上がったら、10M区切りで領域を増やす処理が10回。 で、200Mのままになってしまいますので　AUTOEXTEND「最大値」「増分値」の指定等は十分注意してください。
企画テーブル 01:node種別(0=親、1=子) 02:企画ID 03:親node ID(-1=親node無し) 04:企画名 05:企画データ node 企画ID 親node 企画名 　0 000001 -1 Ａ企画 　　　1 000003 000001 甲企画 　　　1 000004 000001 乙企画 　0 000002 -1 Ｂ企画 　　　1 000005 000002 イ企画 　　　　　1 000007 000005 甲企画 　　　　　1 000008 000005 乙企画 　　　1 000006 000002 ロ企画 　　　　　1 000009 000006 甲企画 　　　　　1 000010 000006 乙企画 ↑データベースを使ってツリー型の掲示板を作る場合 などでは上記の様なテーブルになります。
実際に動作します。 9.2.0.4は、9.2.0.1に対して、PSR(Patch Set Release)を当てることで、不具合対策がされたものです。 逆に、Windows32bit/64bit何れにおいても、Oracle Client 9.2.0.1ではないリリースのインストーラは無い認識です。 恐らく、OTNのドキュメントを参考されたのではと存じますが、ORACLEの一般公開文章における動作保障というのは、製品サポートという観点での記載ですため、実際に動作する、しないとは全く別口の話となります。PSR9.2.0.4がリリースされる前は、9.2.0.1でのサポートという記載となっていたはずです。
・　Bの別名はやめて、 SELECT 列A,列B,列C FROM テーブル１ A where 列A in ( SELECT 列A,COUNT(*) FROM テーブル１ GROUP BY 列A HAVING COUNT(*) >= 2 ) ; としてみてください。
こんにちわ。 > ALTER SYSTEM SWITCH LOGFILE文で駄目な理由が分かりません。 switch logfile と archive log current で明確な違いが2つあります。 1) switch logfile がLog 切替えを行うのは現行Thread です。 　 archive log current は全Thread のLog 切替えを行います。 　 switch logfile ではRAC/Parallel Server 構成の場合、 　 全てのノードで実行する必要があります。 2) switch logfile は、Log 切替えを行うだけでその後の 　 Archive が成功したかどうかは関知しません。 　 Online Backup 中の変更を確実にArchive しておかないと、 　 Recovery ができなくなるため、archive log current を 　 行います。 > 一般的にはALTER SYSTEM SWITCH LOGFILE文が知られていると思うんですが、、。 Recovery のマニュアルには、「archive log current」を実行するように 記載されています。
osamuyさんと、基本的に同じですが、分かりやすい方を使ってください。 SELECT a,b,c FROM smp WHERE (a,c) IN (SELECT a,MAX(c) FROM smp GROUP BY a);
JDBCのTYPE2（OCI）とTYPE4（Thin）の違いのことでしょうか？ オラクルのマニュアルに記載されています 参考URL：http://otndnld.oracle.co.jp/document/products/or …
各権限は以下のディクショナリで見ることが出来ます。 システム権限： xxx_sys_privs オブジェクト権限： xxx_tab_privs ロール：xxx_role_privs やってみれば一目瞭然。 11gで確認。 SQL> grant all on emp to system; 権限付与が成功しました。 SQL> select GRANTEE,OWNER,TABLE_NAME,GRANTOR,PRIVILEGE from user_tab_privs; GRANTEE OWNER TABLE_NAME GRANTOR PRIVILEGE ---------- ---------- ---------- ---------- -------------------- SYSTEM SCOTT EMP SCOTT FLASHBACK SYSTEM SCOTT EMP SCOTT DEBUG SYSTEM SCOTT EMP SCOTT QUERY REWRITE SYSTEM SCOTT EMP SCOTT ON COMMIT REFRESH SYSTEM SCOTT EMP SCOTT REFERENCES SYSTEM SCOTT EMP SCOTT UPDATE SYSTEM SCOTT EMP SCOTT SELECT SYSTEM SCOTT EMP SCOTT INSERT SYSTEM SCOTT EMP SCOTT INDEX SYSTEM SCOTT EMP SCOTT DELETE SYSTEM SCOTT EMP SCOTT ALTER ALLで権限を与えたことはあまりなかったですが、随分、色々な権限がつきますね。
ODP.NETを使用してはいかがでしょうか。
異なるデータベース間のデータを使用する方法は以下があります。 (1)データベースリンクを使用する (2)ファイル経由でどちらかのDBに必要なデータを集める。 データウェアハウスを構築するなら相互参照可能な環境を構築すべきです。 それが出来れば、UNIONなりジョインなりで集計可能でしょう。 あと、計画と実績って、オーダーに対して発生しますが、 以下のような場合を考慮できているんでしょうか。 オーダーA ■ケーキを4/1に1000個作る計画 ■それに対して4/1に500個の実績、4/2に500個(計画遅れ)の実績 オーダーB ★ケーキを4/2に1000個作る計画 ★それに対して4/2に500個の実績、4/9に500個(計画遅れ)の実績 これを日単位の集計のみで見てもあまり意味がないと思います。 以下のように累計で集計した上でZグラフで見ないと 計画の進捗率などは把握できないと思います。 日　　計画　　実績　計画累計　実績累計 -------------------------------------------- 4/1　1000　　500　　1000　　　500 4/2　1000　　1000　2000　　　1500 4/9　－　　　500　　2000　　　2000 4/2の実績はオーダーAの計画が1000に対してAとBの実績が合算して1000になっており、計画通りに見えてしまいます。 ※累計でみると4/2は500個の遅れが発生してます。 私が関わったシステムと考え方やデータの持ち方が異なっていて 問題がなければいいのですが。
似たような経験がありますが、どうもOracle10Gになって指定のない 部分については順不同となるようです。仕方のない話ですが。 ８ｉ当時は例えば日付、伝票No.、行とあった場合に 日付、伝票No.のみでorder by としていても、データの生成された 時間順序が行No.順であれば暗黙的に行まで並んでくれましたが、 １０Ｇは指定しないと並びません。行がばらばらとなってしまいます。 バグではなく、指定の甘さが原因なのでこれは指定するしかないでしょうね。確実に並ばせたいのであれば。 order by をすべて指定してもそのとおりに並ばないということではないと思いますが。
以下URLから検索しえみてください。 http://www.oracle.co.jp/products/system Windows Viataが対応しているのは Oracle10.2.0.3以降です。
アルファベットを含んでいるのはROWIDであってます 行番号を表示したい場合はROWNUMですね 冷静になってマニュアルを読み直す癖をつけましょう
思いついただけですので聞き流してください。Perl言語でSJIS文字列を扱うと文字コードの一部が制御コードとみなされて文字化けすることがあります。最初に保存されたCSVを「秀丸」等、保存時に文字エンコード種類を指定できるエディターに読み込んで、MySQLがサポートするコードで再保存してみては如何でしょう？
まずSYSユーザーでログインしてDBA_USERSのUSERNAMEをSELECTして、 「ORAUSER」で登録されていることを確認してください。
OTNで体験版をダウンロードしてインストールしてみるのが一番かと。 （もしくは、入門書についているものを使用するなど） 会社じゃＯｒａｃｌｅＸＥは使用しませんし。 あとは安全のために無償のVMWareサーバで環境を構築しましょう。 インストール失敗時に影響は小さいですよ。 参考URL：http://www.oracle.com/technology/global/jp/index …
＞"iniSID.ora”の中の”SORT_AREA_SIZE”を変更するような感じで色々書いてあるのですが、iniファイルには”SORT_AREA_SIZE”たる記述がありません。 初期化パラメータファイル（init.ora）にありませんか。 ただ初期化パラメータの「sort_area_size」を大きめに変更する場合、同時に「sort_area_retained_size」も変更しないと意味がないかと思います。 それと、init.oraを変更して、Oracleを再起動する野は大変ですよね。 ALTER SESSION SET SORT_AREA_SIZE=値；で設定していろいろ試してから変更するほうがらくだと思います。
メッセージ画面が裏に隠れているとかない？
以下のような結合ならエラーになります。 　AとBを外部結合（Aが主） 　BとCを外部結合（Cが主） SQL> l select a.ename from emp a, emp b, dept c where a.empno = b.empno(+) and c.deptno = b.deptno(+) ; SQL> / where a.empno = b.empno(+) * 行5でエラーが発生しました。: ORA-01417: 表が少なくとも1つの他の表に外部結合されている可能性があります。 どうしてもやりたい場合はサブクエリにするとか、Viewにするとか すればよいです。 SQL> l select a.ename from emp a, (select b.empno,c.deptno from emp b, dept c where c.deptno = b.deptno(+) ) x where a.empno = x.empno(+) ; SQL> / ENAME -------------------- ALLEN WARD JONES MARTIN BLAKE CLARK KING TURNER JAMES FORD MILLER ちなみに、例で出された以下の結合ならエラーになりません。 　AとBを外部結合（Aが主） 　BとCを外部結合（Bが主）
データベースが将来的になくなるとは考えにくいので、 需要もそれなりにあるでしょうから、将来性はあるといえるでしょうね。 ただし、通常は、企業のシステム部や、システム子会社が データベースは管理していると思いますで、 独立してやっていけるかというと、管理業務では無理だと思います。 アプリケーション開発に関わるデータベースのスペシャリストであれば、 ある程度、可能性があると思いますが、 下請法の影響もあり、個人や小さな企業が大企業と直接契約するのは難しく、 技術力だけで独立してやっていくこと自体が困難になりつつあるのが、 世の中の流れのように感じます。
考え方 (1)「生産」と「不良」のデータを横展開してカラム数を合わせます。 ・「不良」側に「生産数」はないので、定数として0を設定。 ・「生産」側には「停止時間」はないので各項目を定数として0を設定。 ・「停止時間」は「不良モード」、「マシン要因」、「人的要因」によって集計が 　異なるのでCASEで識別し別カラムとして計上する。 ここで集計に必要なデータを整備します。 (2) ユニオンしたものをキーで集計する。 ジョインだと以下のようなパターンがあるのでユニオンでやっています。 ・「生産」にあって「不良」にない場合。 　※全て良品として計上される場合もありえる。 ・「不良」にあって「生産」にない場合。 　※全て不良品として計上される場合もありえる。 実際のデータには「指示No」とか「工程」等の考え方があると思います。 私が携わったシステムにはありました。 「仕掛」とか「工程在庫」とか「工程歩留」とか「一貫歩留」とか「計上月」とか…。 「見える化」をやり始めると、各データ間の整合性が取れなかったりするので大変ですよ。
select * from t1 where item2 in(select item2 from t1 where item4=1 group by item2 having sum(item3)>500) and item4=1 order by item1
Accessで目的のテーブルをリンクして、CSVにエクスポートするという手もありますね。
補足です。number型の場合は PrecisionプロパティとNumericScaleプロパティで取得可能です。 number型かどうかはTypeプロパティで識別可能だと思います。
見えないとは、どういった状態でしょうか。 エラーコードを教えてください。 確認ポイント (1)権限の確認 user_tab_privsで確認してください。 select grantor,grantee,table_name,privilege from user_tab_privs; (2)シノニムの有無 Bschemaから以下のSQL(スキーマ指定)でも参照できないのでしょうか。 select count(*) from Aschema.sampleTBL; この場合、シノニムを作成しないとスキーマ指定がないと参照できません。
データの種類にもよると思いますけど、お客さんは、普通は削除したくないと思いますので削除しない方向でまずは考えたげます。なのでまず拡張を考えます。 データ量がそのDBを扱うAPのパフォーマンスに影響する。 バックアップ時間が増えたらお客様の業務に影響でてしまう。 領域拡張によってディスクの空きが減るとDBを含めたそのシステムのメンテナンスに支障がでてしまう。 というケースが出てしまう場合には、結局お客様に迷惑をかけてしまうので削除する方向で。
ラリー・エリクソンは多分ビル・ゲイツが嫌いなんだよ。軽い、Windowsへの嫌がらせが入っています。 UniversalInstallerで削除する前に、DataBase Configuration Assistant でインスタンスを削除することを忘れないようにね。 サービスとかが残るとレジストリをいじることになりますから、途中で落としたりはしないように。フォルダが消えない場合はリネームして再起動して消してください。
普通は外部結合を使いますが、次のような書き方もあります。 select A.id, ( select B.name from B where B.code = A.id) as name from A; 3行目のところがスカラー副問い合わせという書き方で、マスターテーブルから1カラム1つの値だけ取りたい場合（かつ、無い場合はNULLで良い場合）に使えるやり方です。 結合するテーブル数が多い場合などに、結合テーブル数増加を防ぐことができるので特に有効です。
マスタテーブルは、日常的に流動するとは限らないテーブル、 トランザクションテーブルの対義語 例えば顧客テーブル、商品テーブルはマスタ 　売上テーブル、支払テーブルはトラン
select a.*, b.* from テーブルA a left join テーブルB b on a.id = b.id and b.種別 = 'a' select a.*, b.* from テーブルA a left join テーブルB b on a.id = b.id where b.種別 = 'a' 欲しい結果はどっちですか？
SELECT COL1,COL2, (SELECT COL4 FROM TABLEB WHERE COL3=COL1) COL4_1, (SELECT COL4 FROM TABLEB WHERE COL3=COL2) COL4_2 FROM TABLEA
> ここから[項目3] = 1 のレコードが含まれているもの > に限り[項目2]でグループ化し、 のところが、やや意味があいまいな気がしますが、こういうことをやりたい のでしょうか。 SELECT T3.項目2 , SUM(T3.項目4) FROM ( SELECT T1.項目2,T1.項目4 FROM TBL T1 WHERE EXISTS ( SELECT 1 FROM TBL T2 WHERE T1.項目2 = T2.項目2 AND T2.項目3 = '1' ) ) T3 GROUP BY T3.項目2
消したいユーザーで接続してませんか？
インストール場所は、C:\Oracle10g　とかではないでしょうか？ ”Program files”などの半角スペースを含むディレクトリではないと思います。 また、権限の与え方も、”サブディレクトリに対しても”許可しましたか？
別解です。これならCODEが昇順にセットされていなくても大丈夫なはず。 select t1.id, ( select t2.code from tbl t2 where t2.id = ( select max(t3.id) from tbl t3 where t3.id<=t1.id and t3.code is not null ) ) code from tbl t1;
NO.1です。 ごめんなさい。 CREATEの行を 「CREATE OR REPLACE FUNCTION SERCH_TXT」にしてください。 （私のデータベースのユーザー名がついてました）
こんにちわ。 > 搭載サーバーのCPUは１つ（ただし2CPUまで搭載可能） 大丈夫のようですね。 詳細は、以下のURL をどうぞ http://www.oracle.co.jp/products/price/dbse_one. …
以下の対策はどうでしょうか？ １．サービスの起動／停止を自動から手動に変更します ２．サービスの起動／停止おこなうバッチファイルを作成します 　　サービスを起動／停止するにはNETコマンドをつかいます 　　　（net /?でヘルプをみてください） 　　NET START サービス名 　　NET STOP サービス名　　（　必要なら　/Y　） 　　※時間調整が必要ならTIMEOUTコマンドを使用します 　　　（timeout /?でヘルプをみてください） ３．グループポリシーエディタでＯＳのスタートアップと 　　シャットダウンに起動するように登録します 　　　「ファイル名を指定して実行」からgpedit.mscを起動 　　　「コンピュータの構成」 　　　 　↓ 　　　「Windowsの設定」 　　　 　↓ 　　　「スクリプト(スタートアップ/シャットダウン)]
こんにちわ。 > 3つ以上の文字列を連結をスマートにする方法 Stored Function を作成してはどうでしょう？ パラメータの数やデータ型が異なれば、同じ名前で複数のFunction を定義できますので 3つの文字列を連結するもの、4つの文字列を連結するもの・・・ と必要なだけ作成してはどうでしょう？
こんにちわ。 > １．外部プロシージャ定義はどのような場合に・・・ もちろん、外部プロシージャを使用する場合に定義します。 答えになってませんね。 「外部プロシージャ」とは、DB Server 上のDLL で提供されている ライブラリをStored Procedure でマッピングしてPL/SQL から 実行する機能です。 この機能を使う必要が無いのであれば、設定しなくてもOk です。 > ２．とりあえず記述しておいた場合に何か問題が・・・ 私が管理者なら必要が無いものは設定しませんが、設定して 問題があったと言う事は聞いた事がありません。 > ３．記述場所は以下でよろしいでしょうか？ 設定については、以下のマニュアルを確認して下さい。 「Oracle Database Net Services 管理者ガイド 13章」 http://otndnld.oracle.co.jp/document/products/or … ※ セキュリティの観点から、外部プロシージャで実行するDLL が 　 ORACLE_HOME/lib や、ORACLE_HOME/bin 以外にある場合はlistener.ora 　 のENVS パラメータで指定する必要があります。
select 顧客名,括り番号,max(番号),min(番号) from テーブル group by 顧客名,括り番号 こんな感じじゃないでしょうか？ http://oracle.se-free.com/dml/06_max.html http://oracle.se-free.com/dml/06_min.html
こんにちわ。 > (1)アーカイブログを取得する際に、・・・ 不要です。 バックアップモードの変更/解除は、データファイルをホットバックアップ する際に実施します。 因みに、アーカイブログの取得はホットバックアップではありません。 > (2)オンラインバックアップでの制御ファイル・・・ 今回のケースでは不要です。 > (3)オンラインREDOログファイルのアーカイブ・・・ 本来、Redo Log のアーカイブは、データファイルのホットバックアップ 取得後 (バックアップモード解除後) に、ホットバックアップ中のRedo Log をアーカイブさせるために実施します。 ですので、今回のケースでは不要です。 > そのほかに、気になる点があれば、ご指摘ください。 今回のケースでは、ホットバックアップになっていないので リカバリ実施時は土曜日のコールドバックアップに対して コールドバックアップ取得後に生成されたアーカイブログと オンライン Redo Log を全て適用する事になりますので、 リカバリに時間がかかると思います。 → 最大で1週間分のアーカイブを適用する必要があります。
こんにちわ。 > どのような違いがあるのでしょうか？ どちらを使っても構わないはずです。 元々Oracle7/Oracle8 の時はSID のみだったはずです。 Oracle8i になって、グローバルデータベース名 (SERVICE_NAME) が指定できるようになりました。
こんにちわ。 Oracle の場合ですが、可変長データの更新に備えてブロック内にPCTFREE で指定された割合の 空き領域を確保しておきます。 ブロック内のデータがUpdate されて項目長が長くなった場合はPCTFREE の領域を使用して データを格納していきます。
フィールドに区分を設定 データ更新時　　　区分→１ 区分１のデータをバッジ処理　区分→０　 以上
こんにちわ。 DATE 型であれば、時(HH24), 分(MI), 秒(SS) までのデータを持っています。 通常は、文字列をTO_DATE 関数でDATE データ型に変換して検索します。 Where SrrDate between to_date('20080101 000000', 'YYYYMMDD HH24MISS') and 　to_date('20080229 235959', 'YYYYMMDD HH24MISS') → 2008/01/01 00:00:00 ～ 2008/02/29 23:59:59 を検索
これです。 ＜＜＜　右クリックでカーソル位置に貼り付けることができます。 実は、コマンドプロンプトでのクリップボードへのコピーも 　　　　右クリック です。
ついでに、なぜ Sub でなく Function なのかな？？
こんにちわ。 #1 のmuyoshid です。 > 暗黙コミットが走っていると思いますから、 DDL 文発行時は暗黙コミットが実行されますが、DML 文発行時は 暗黙コミットは実行されません。 SQL*Plus はEXIT 時に未コミットのトランザクションはコミット されますが・・・。 > インサート処理終了後、・・・データの射影が出来ず・・・ 未コミットのデータは、他のトランザクションから読み取る事はできません。 これを、読取り一貫性と言います。
以下みたいにlike検索の条件にキー情報と%を組み合わせて 実行できますよ。サンプルでは不十分ですがカーソルをうまく使ってやれば実現は可能かとおもいます。 declare a varchar2(100); a1 varchar2(100); begin select group_code into a from group_data where rownum = 1; DBMS_OUTPUT.PUT_LINE(a); select group_code into a1 from group_data where rownum = 1 and group_code like a1||'%'; DBMS_OUTPUT.PUT_LINE(a1); end; SQLを実行中です... CDIS CDIS SQL応答時間 : 0.015000秒 処理が正常に終了しました。
#1です。 クライアント側での処理をさぼるために、サーバ側から受け取るデータ量を2倍、3倍、あるいはそれ以上としていいかどうか考えてみてください。 例えば、のべ1万件受け取ればいいものを、2万件や3万件なら、まだ差は気にならないかも知れません。 これがデータ量や時間が蓄積していき、のべ1億件受け取ればいいものを、2億件や3億件になっても許容できるのでしょうか？ これが許容できるのなら、冗長なSQLにしてもいいと思います。
rank()を使って番号つけたのをカラムごとにピックアップ。 select aaa.id, max(decode(aaa.rank ,1,aaa.busho)), max(decode(aaa.rank ,1,aaa.pict)), max(decode(aaa.rank ,2,aaa.busho)), max(decode(aaa.rank ,2,aaa.pict)), max(decode(aaa.rank ,3,aaa.busho)), max(decode(aaa.rank ,3,aaa.pict)) *****４個目以降も繰り返し******* from ( select kingaku_futan_busho.id,kingaku_futan_busho.busho,kingaku_futan_busho.pict, dense_rank() over( partition by kingaku_futan_busho.id order by kingaku_futan_busho.pict desc,kingaku_futan_busho.busho) rank from kingaku_futan_busho ) aaa group by aaa.id; こんなんでどうでしょ。 １１個目以降の部署を２行目とかあれば rankを割り算の整数部をgroupに入れ 余りmod()でdecode decodeでもcaseでもすきなほうで。
".mts"は、AVCHDで録画されたファイルです。 ソフトで取り込むと".m2ts"となります。 拡張子を変更しても、同じです。
yahooにて「oracle 9i 10g 機能 一覧」で検索し、 ヒットした先頭。 http://www.tis.co.jp/product/oracle/orainfo/10gf … じゃあ、だめですか？
誰も相手にしていないようなので、可能な範囲でアドバイスを。 DBAのベンダー資格で有名な「オラクルマスター」には、対象となるRDBMSの規模に応じて以下のように区分けされます。 小規模DB　→　Bronze 上記以外　→　Silver,Gold,Platinum Silver以降については、私も勉強中なのでよくわかりませんが、Bronzeレベルでしたら、以下のようなツールなどがあったりします。 ORACLE MASTER Bronze　DBA講座： Oracleデータベースの自己診断と最適化 http://www.itmedia.co.jp/career/articles/0801/23 … ORACLE MASTER Bronze　DBA講座（12） Oracleデータベースの自己診断と最適化 http://jibun.atmarkit.co.jp/lskill01/rensai/bron …
オラクルのデータファイルは、当然リストアすると思いますが、初期化パラメータやリスナの定義ファイルも リストア出来るのですよね？ ファイルシステム上に必要なファイルが揃うならば・・ (1)リスナは、リスナの強制起動により、レジストリは再生されます。 (2)データベースインスタンス（サービス）の登録は、oradimで作れます。 ので、環境の再現は可能です。 まあ、ちゃんとコールドバックアップされたデータファイルさえあれば、その他は無くても 手間暇がかかるだけで、再現できなくはないと思いますけどね。 ちなみに、Oracle8は、Windows2000未対応のハズですが。
SQL*Loaderについて調べてみてはいかがでしょう？
Oracle無印ですが・・・・ 通常、事足りると思います。 たまに、BLOBやCLOBが必要な程度だと思います。 日付だからと言って安易にDATEを使うのは危険です。 （手書きの）過去の資料を格納する場合、実際には存在しない日付で 記録されている場合があり、そのデータが入れられなくなります。 日付はVARCHAR2（もしくはCHAR）で設計するのが無難です。 更新日付のように、今後利用するもので、システムが生成するような ものであればDATEでもよいでしょうが。 基本的にCHARを使うメリットはないです。 CHARとVARCHAR2は動きが若干違うので、半端な知識で混在させるなら VARCHAR2に統一したほうがよいです。結合できない、文字列比較セマンティクス で思うようにいかない、などで手間取る危険がありますので。
エラーログとは「sqlnet.log」のことですか? 場所はデフォルトだと以下です。 ${ORACLE_HOME}/network/log/sqlnet.log 場所を変えたい場合は以下のファイルにLOG_DIRECTORY_CLIENTを指定。 ${ORACLE_HOME}/network/admin/sqlnet.ora 詳しくはマニュアルを参照。 http://otndnld.oracle.co.jp/document/products/or …
とりあえず『alert_orcl.log』を見てみてはどうでしょうか？ 何かエラーが発生していたら、エラー内容が記述されているはずです。
create table aaa ( "カラム1" number(10), "カラム2" varchar2(10), "カラム3" varchar2(10), "カラム4" varchar2(10), "カラム5" varchar2(10) ); insert into aaa ("カラム1", "カラム2", "カラム3", "カラム4", "カラム5") select rownum, 'あああ', 'いいい', 'ううう', 'えええ' from dict where rownum <= 200 ; 200行が作成されました。 200行以上の行があるテーブルやビューを利用して、 更にrownum疑似列でナンバリングしてあげれば一発で作成可能です。
select a.koumokuA1, x.koumokuB3, b.koumokuA1, y.koumokuB3 from TableA a,TableB x,TableB y where a.koumokuA1=x.koumokuB2 and x.koumokuB1='001' and a.koumokuA2=y.koumokuB2 and y.koumokuB1='002' ;
select trunc( to_date( '2008-01-04', 'YYYY-MM-DD'), 'IW' ) from dual; とか。 試さないで書いてますが。 参考URL：http://www.shift-the-oracle.com/sql/functions/tr …
テストしてないけど、こんな感じかな select z.NO,z.GroupNO,x.項目名１,y.項目名２ from ( select NO,sys_connect_by_path(K_N,',') 項目名１ from ( select b.*,row_number() over(partition by NO,K_NO order by K_N) R from (select distinct * from B_TABAL where K_NO='K_1') b ) start with R=1 connect by prior R = R -1 and prior NO=NO ) x, ( select NO,sys_connect_by_path(K_N,',') 項目名２ from ( select b.*,row_number() over(partition by NO,K_NO order by K_N) R from (select distinct * from B_TABAL where K_NO='K_2') b ) start with R=1 connect by prior R = R -1 and prior NO=NO ) y, ( select distinct * from A_TABAL ) z where z.NO=x.NO and z.NO=y.NO ;
Oracleの基本的な動作を理解するのであれば、 以下のような本が参考になるかと思います。 『これならわかるOracle超入門教室［第2版］』 『絵で見てわかるOracleの仕組み』 ※共に出版社は翔泳社です。(DB Magazine SELECTIONシリーズです。)
できます。だけではなんですので オンラインでSQLをテストできるURLを付けておきます。要OTN登録 参考URL：http://otn.oracle.co.jp/training/index.html
1000個以上のデータをin句に入れるよりは、いったん一時テーブルに格納して、副問い合わせにしたほうがいいのでは。
色々な理由があるとは考えます。 また、10.2.0からでもOracle Net Managerから 接続できているので大丈夫だとは思うのですが、 運用面を考えてクライアントのOracle製品も 8.1.7にするのが一番良いかと考えます。
確証はありませんが、プリペアドクエリとして動作する為、 SQLインジェクション対策は必要ないように感じます。 動作して確認する環境が言えないので定かではありませんが・・・。 一度単純なファイルを作ってみて、どういう風に動くか 確認してみてはいかがでしょう？
全て一概には言えないですね。 select文は非常に複雑さは多岐にわたりますし、 フェッチ件数によっても全然違ってきます。 insertは必ず1文で1件だけ入るため他と比べるとかなり 1文あたりの性能は安定していると言えるでしょう。 deleteも削除対象件数によってどうとでも変わります。 truncateは対象のテーブルのエクステント数によって変わってきます。 まずは、それぞれがどれほどの件数やエクステント数を 対象とするかが前提としてなければ何ともいえないです。 一番よいのは想定される平均的なパターンを設定してから それを実現するようなPL/SQLを書いて実測することです。 PL/SQLは通常のPro*Cアプリやjavaといったものよりかなり 軽いためわざとリテラル値をセットしたり、安全率を 多めに取ったりして安全側に倒す必要があります。
10.2.0.1を素でインストールすると、パーミッションの設定が 他ユーザは使用できないような設定になってます。 パッチ(10.2.0.2以降)を適用してますか? パッチについては話せないのでサポートに確認してください。 ※ヒント「changePerm.sh」
A No.1さんが回答されておられるとおり、 XP Home Edition には、ユーザーの権限などを緻密に管理するツール 「ローカルセキュリティポリシー」は搭載されていません。 逆説的に、だからこその「Home」Editionなわけです。 残念ですが、XP Professional Editionをお使いになるか、 マシンを潰してもよい（あまりのHDDがある）のなら、 LinuxやSolarisなど、無償で入手できるOSを導入して、 そちらのOS版のOracle XEで挑戦されてみてはいかがでしょうか。 がんばってください。 参考URL：http://www.microsoft.com/japan/technet/prodtechn …
>MySQLでいうところのmysqldumpのようなコマンドはありますか？ 少なくとも標準機能としては存在しません。 やり方次第で、DDL文(オブジェクト定義SQL)は作ることが可能ですが、DML文相当(データのインサート部分)が作れません。 アプリケーションを自作するしかないと思います。 オラクルのデータ属性が多いので、全てのデータに対応するのは面倒ですが、限定的なアプリケーションなら さほど難しくはないと思いますよ。 以前、テキストベースでデータをバックアップしたくて、Perl+DBIでスクリプトを書いたことがあります。 DDL部分は、エクスポートツールで定義のみデータ無しのエクスポートを行い、 エクスポートされたダンプファイルを、インポートツールのSHOW=Yオプションで、テキスト化。 データは、Perl+DBIで、全テーブルデータをCSVテキスト化し、SQL*Loaderのパラメータファイルも作成。 全データのロード用バッチファイルの自動作成。 一番面倒なDDL部分をツールで作るので、データの抽出スクリプトは、数十行で済んだ記憶があります。 ただ、今回のように別のマシンにデータを移設したいだけなら、テキスト化が必須ではないと思いますので、 エクスポートツールとインポートツールで充分かと思いますよ。 （インポート処理が遅いので、テキストベースで移設した方が速い場合はありますが・・） エクスポートツール・インポートツールの詳細については、ユーティリティガイドをご覧ください。
パスワードを調べる方法は絶対にありません。 調べる方法があれば、パスワードにならないので。 デフォルトの設定のままであれば sys/change_on_install system/manager sysman/sysman などが有効かと思われます。
１．各種情報表示させる方法 ご質問のような情報はデータディクショナリといわれる各種のテーブルから取得できます。いろいろあるのですが、ご質問に対応するものをご紹介しておきます。 -- 全スキーマ（ユーザ）一覧 select * from all_users; -- 全テーブル一覧 select * from all_tables; データディクショナリは適切な権限のあるユーザでないと参照できません。どのようにユーザを作っているかによりますが、SYSTEMやSYSなどであればまず間違いなくアクセスできるでしょう。 どのようなデータディクショナリがあるかは以下のクエリで確認可能です。 select * from dict; ２．SQL Developerの入手元 OTNサイトからダウンロードできます。 http://otn.oracle.co.jp/software/index.html 日本のOTNで公開されているものは日本語化パッチもついていると思います。（海外OTNだとより最新のバージョンが取れる場合がありますが、日本語化未対応となります。）
恐らくPCのキャラクタセットとDBのキャラクタセットが異なっている可能性が高いと思われます。 PCのレジストリエディタにて HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\{Oracleホーム} にある「NLS_LNAG」の値とを他のPCと比較して合わせてみてください。
何故2)でも9iなのでしょうか。 9iも２つ前のバージョンですので、サポートの不安はあると思います。 と、いいますか9iに入れてもすぐにまた入れ替えの必要が出てくる気がしますので10g/11gを検討された方が良いと思います。
1行を2行にするとかであれは、union allが簡単かと思います。 select * from A where a=1 union all select * from A where a=1 などすれば、2レコード取得できると思います。 これが、可変で、件数を外部で決めるとなると、 １～１００が入ったテーブルを作成して、そのテーブルと joinしデータを増やした方が得策だと思います。 （私は、以前この形でやりました。）
再編成については詳細な回答がありましたがもう一つ、コアダンプやトレースファイル、アラートファイルといった 「放って置くと溜まる一方」で不要なファイルのクリーニング（削除）もそれなりに効果が見込めるかもしれません。 もし意識されていないのであれば、一度確認することをオススメします。
ロール(任意の権限の集まり)の使い方で正解だと思いますが・・・ 具体的には、例えば「testrole1」「testrole2」という名前のロールを作って create role testrole1; create role testrole2; 「testrole1」をuser1,user3に、「testrole2」をuser2に付与して grant testrole1 to user1; grant testrole2 to user2; grant testrole1 to user3; 新規に表を作成したら、ロールに対して権限を付与すれば、そのロールを付与されているユーザは一括で権限が与えられる。 grant select on user0.atable to testrole1; >>この1文でtestrole1を持っているuser1とuser3だけ、user0.atableテーブルのSELECT権限を得る。 但し、ロール経由ではなく直接権限を与えられないと許可されない動作もあります。 ストアドメンバなどのEXECUTE権限がこれに当たったはずで注意が必要です。 詳しくはORACLEマニュアルのSQLリファレンス、セキュリティガイド辺りのロールに関する記述を参照してください。
開発／本番で実行時間が違うというのであれば、下記要因が考えられます。 ハード→ソフトの順に挙げていきます。 ・本番ハードは他の処理を並列で走らせていたりしていませんか？　 　開発／本番の両方とも、トレース実施時に他のバッチが動いていないのであれば問題は無いと思いますが・・・。 ・本番環境の実行頻度と、開発環境の実行頻度はどれくらいの開きがありますか？　Insertを実行すればする程、Insertがしにくくなるように思います(理論的な根拠はありませんが・・・)。 ・ウォーターマークは十分に取られていますか？　
昔、OTNで同じ質問がありました。 http://otn.oracle.co.jp/forum/message.jspa?messa … glogin.sql内でcolumnのフォーマットを変更している部分を修正してあげればOKです。 以下の記述 > COLUMN plan_plus_exp FORMAT a60
全てのカラムは、USER_TAB_COLUMNSに存在するので、USER_TAB_COLUMNSに対して、 他表(USER_CONSTRAINTS,USER_CONS_COLUMNS)を外部結合するように変更すれば良いかと。
前の投稿でも書きましたがsysとsystemはデータベースの管理ユーザーです。EMの操作はできません。 EMを操作するためにsysman、dbsnmpがいるのです。
Partitioningオプションはエンタープライズエディションに、更に オプションとして購入しないと使用できないものです。 OracleXEでは使用できませんし、有効にできる方法はないです。 方法としては以下が考えられます。 (1) 開発環境を本番と同一バージョンにする。 (2) 該当するパーティションテーブルを手動で通常のテーブルに作り直す。 パーティションを操作するSQLはすべてエラーになりますし実行計画も異なるため厳密な検証はできません。あまりお勧めできません。 開発と本番は環境を同一にするのがベストなのですが……。
OS、ORACLEバージョン等の環境が不明で、おっしゃるような使い方・現象に遭遇しておりませんので参考までに。 「サービス」と書かれている文脈からWindowsサーバとすると、サービスに依存関係を設定することで上記現象は回避できると思います。 「Windows サービス 依存関係」等で検索すれば情報は多く得られるでしょう。 UNIXサーバであればランレベルや起動Shellで起動順制御は可能です。UNIXと一口で言ってもBSD系とSystem V系では大きく異なるため御使用のOS・バージョンに合わせてOSマニュアルやMicrosoft TechNet等で情報を得てください。 ただ、インストーラを使用して順序や条件を正しく導入すれば回避できる類の問題である可能性もあると思います。 一度、サポートに問い合わせてみては如何でしょうか？ 参考URL：http
ライセンスがらみはOracleDirectに聞くのが一番です。 http://www.oracle.co.jp/direct/ 開発目的なら「OTN Software Kit」を購入して開発ライセンスを手に入れるのがよいでしょう。 http://otn.oracle.co.jp/upgrade/ スタンダードなら31,290円で開発ライセンスが手に入ります。 開発以外の目的に使用する場合は、ライセンス契約を結ぶ必要があります。 ライセンス料は御自身が見ている通りの値段がかかります。 ※大手の代理店では値引きしてくれますが個人では無理でしょう。 サポート契約は1年単位の契約で購入価格の10パーセントだったはずです。 サポートに入っていれば以下のサービスが提供されます。 ・バージョンアップ無料 ・パッチが手に入る。 ・技術情報krownが見られる。 ・Tarで質問ができる。 あとは、XEを入れるかですね。
＞もし、私がアクセスの住所録というデータベースファイル（jyuushoroku.mdb)を移行したいとすると、jyuushoroku というデータベースを新たに作成するのですよね？　データベースは複数にあっても構わないのですか？アクセスと違い、データベースを作成する時にとても大掛かりなのでとまどってしまいました。 「データベース（DBインスタンス）」と「スキーマ」という概念がありますが、データベース（DBインスタンス）というのは全体の動作の基礎となる制御ファイル・パラメータファイル・データファイル・SGAメモリなどの集合体です。 これを作るのは確かに大変ですが、通常はひとつ作って、その中に複数のスキーマ（ユーザとそのユーザの所有する表などの集合体）を作って運用すればよいです。 つまり、おっしゃっている、jyuushoroku というのはスキーマにあたるわけです。 スキーマを作るのは、作成済みのDB上でCREATE USERするだけで終わりです。実際にはいろいろと細かい設定が可能なのですが、基本的には非常に簡単な作業です。毎回DBセットアップのような、大変な作業が発生するわけではありません。 なお、10g以降だとOEM（IE上で動作する管理ツール）を使うと、スキーマ管理作業は非常に簡単なのでぜひ一度試してみてください。 ＞ログイン失敗後のアカウントロックについて パスワード入力の失敗許容回数、有効期限日数などの設定はユーザのプロファイルで行います。 おそらく今はDB作成時の状態のままということで、デフォルトプロファイルが割り当てられていると思います。失敗入力の許容回数がいくつに設定されているでしょうか？以下のSQLで確認しましょう。 select * from dba_profiles; この回数失敗するとアカウントがロックされます。 ロックされたユーザはSYSでロック解除すれば良いですが、ロックされたくなければ、失敗許容回数を無限にしましょう。（サーバ設定変更は管理者の方と事前に相談して行いましょう。） SYSDBA権限のあるSYSなどのユーザで以下のSQLを実行すれば良いです。 ALTER PROFILE "DEFAULT" LIMIT FAILED_LOGIN_ATTEMPTS UNLIMITED;
> /dev/shmはデフォルトで設定されていました。 Oracle ユーザが書き込みできるように設定されていますか？ # chown oracle:oinstall /dev/shm
SQLPLUSで指定するスクリプトファイルの先頭に WHENEVER OSERROR EXIT 2 WHENEVER SQLERROR EXIT 1 とか書いておくと、SQL文のエラーやSQLPLUS自身のエラーの際に、SQLPLUSを脱出(EXIT)します。 エラーで脱出したかどうかは、エラーレベルで判断できますので、バッチ処理の場合のエラー処理に利用できます。
こんにちわ。 ロールバックセグメントが3個と言うのは少ないと思いますが、 今回は単純にロールバック・セグメントが拡張できなかっただけです。 imp コマンドはデフォルトでは表単位にCommit を行います。 → 1表のimp を1トランザクションで実行すると言う事です。 　 現環境のロールバックセグメントがこのロールバック情報を 　 格納し切れなかっただけです。 適当な件数imp した時点で内部的にCommit を実行させれば 解決すると思います。 imp buffer=10485760 commit=y ・・・ として下さい。 → 10MB 分の配列をロードしたら内部でCommit してくれます。
根本的に見直して、SQL*Loaderを使う方が良いんじゃないですかね。 パラメータファイル(５～６行）を書く必要がありますが、コマンド一つでロード可能です。 コミットも１万件ごとに発行可能ですし、インサートに失敗したデータも選別できます。 インサートの処理内容もログに書き出されるので、ログを解析すれば、目的は達成されるハズです。
＞親テーブルよりNOが2のレコードと(これは親子関係がないレコード) ＞親子関係のレコードの親レコードであるNOが1のレコードのみを取得したい場合（子レコードは不要）、どうすればよいでしょうか？ 先ほどのSQLに、条件を追加すると下記。 少し、無駄がありそうですね。 SELECT OYA_TBL.* FROM OYA_TBL WHERE ( OYA_TBL.CD1 = 1 OR EXISTS ( SELECT Y.GOODS_NO FROM OYA_TBL X INNER JOIN OYA_KO_TBL Y ON (X.NO = Y.PACK_GOODS_NO) WHERE (X.CD1 = 1) AND (Y.GOODS_NO = OYA_TBL.NO) ) ) AND NOT EXISTS ( SELECT Z.PACK_GOODS_NO FROM OYA_KO_TBL Z WHERE (Z.PACK_GOODS_NO = OYA_TBL.NO) ); ------------------------------------------------------------ 下記の方が良いかな？ 条件を分けて、UNIONで結合。 SELECT OYA_TBL.* FROM OYA_TBL, OYA_KO_TBL X, OYA_TBL Y WHERE (OYA_TBL.NO = X.GOODS_NO) AND (X.PACK_GOODS_NO = Y.NO) AND (Y.CD1 = 1) UNION SELECT OYA_TBL.* FROM OYA_TBL LEFT JOIN OYA_KO_TBL B ON OYA_TBL.NO = B.PACK_GOODS_NO WHERE (OYA_TBL.CD1 =1) AND (B.PACK_GOODS_NO Is Null); ------------------------------------------------------------ 更に別回答。 LEFT JOIN の結合をメインに。 SELECT OYA_TBL.* FROM ( ( OYA_TBL LEFT JOIN OYA_KO_TBL X ON OYA_TBL.NO = X.GOODS_NO ) LEFT JOIN OYA_TBL Y ON X.PACK_GOODS_NO = Y.NO ) LEFT JOIN OYA_KO_TBL Z ON OYA_TBL.NO = Z.PACK_GOODS_NO WHERE ( (OYA_TBL.CD1 = 1) AND (Z.GOODS_NO Is Null) ) OR (Y.CD1 = 1); ------------------------------------------------------------ ついでに、最初の質問の別解。 サブクエリをなくして、テーブル結合で。 SELECT X.* FROM ( OYA_TBL X LEFT JOIN OYA_KO_TBL Y ON X.NO = Y.GOODS_NO ) LEFT JOIN OYA_TBL Z ON Y.PACK_GOODS_NO = Z.NO WHERE (X.CD1 = 1) OR (Z.CD1 = 1); ------------------------------------------------------------ 全てAccess2000で動作確認。 文法の違いが分からないので、 Oracleでも動きそうなものを選んで下さい。
こんにちは。 functionを使えば良いと思いますよ。 こんな感じで。 ※数式エラーとか一切考慮してません。 CREATE OR REPLACE FUNCTION CALC ( SIKI VARCHAR2 ) RETURN NUMBER IS varSQL_Stmt VARCHAR2(256); numRet NUMBER := 0; BEGIN varSQL_Stmt := 'SELECT ' || SIKI || ' FROM DUAL'; EXECUTE IMMEDIATE varSQL_Stmt INTO numRet; RETURN numRet; END; / SHOW ERROR UPDATE TABLE_A SET KEKKA=CALC(SIKI);
少し書き方が？？？の部分があるので明確＆的確な回答は できませんが、 同一プロシージャ内において selectを２回使用しても３回使用しても updateを２回使用しても３回使用しても もっと言えば、 select文が条件によって変えれたり、 update文が条件によって変えれたりと なんでもやりたい放題？です。 ちょっと話はそれますが、プログラムも大切ですが 設計も非常に大切です。 特に、更新系の処理になると異常時の処理をきちんと 考えないといけません。何があってもデータの整合性を保ち、 トラブル時には復旧するということを前提に運用、 プログラム（処理単位）の設計をします。 話は戻りますが、同一プロシージャ内において updateを２回行なえますが、 行なう必要があるのか、別にしたほうが 運用上、異常時のリカバリー上最適ではないかを考慮して 番最適なプログラムを構築して下さい。 心より応援しています。
いわゆる外部結合というものです。 select a.*,b.* from a,b where a.id=b.id(+); とか select a.*,b.* from a left join b on(a.id=b.id); のような記述になります。
Ａサーバ上のテーブルに対する索引はＡサーバ上に作成します。 Ｂサーバが受け付けたSQL文は、Ａサーバのテーブルに対する検索SQLに組み立て直されて、Ａサーバに託されます。 Ａサーバのテーブルを検索するのは、あくまでＡサーバですし、Ａサーバが所有するテーブルの実行計画を立てるのも Ａサーバ自身です。
異種分散データベースのイメージですか．． オラクル側の問い合わせに応じて検索することになるので、オラクル側の連携ツールで対応することになりますね。 パフォーマンスに問題はありますが、OGCを利用すれば、ODBC,OLEDBをデータベースリンクに出来るので 考えているイメージに一番近いかと。 (参考：http://homepage1.nifty.com/kojama/works/rdbms/or …） また、COMオートメーションや外部プロシジャ呼出を使った連携の場合でも、９ｉ以降なら パイプライン表関数の機能を利用して、ストアドファンクションでくるめば、 select * from table(cast(自作関数) as 自作返却型); のように通常のテーブルやビューに近い扱い方が可能です。
１．偶然かどうか？ オプティマイザの動作は実に複雑です。投稿された情報だけでは確実な答えがいえない面があるのですが、両方のSQLの実行計画を投稿していただければ、理論補完可能です。 ２．Viewに対する問い合わせでインデックスが使われないケース ＞あいまい検索や、フィールドに関数や演算をかましているケースとか以外に、テーブルを直接みれば、インデックスが有効なのに、Viewなら無効になるケースって、どんなときなのでしょうか？ ひとつは、実行計画上、Viewがインスタンス化される場合です。インスタンス化とは、Viewのクエリ結果をいったんデータとしてすべて取得し、仮想的にひとつのテーブルのように扱うことです。こうなると、非常に大量のメモリを消費したり、もとの個別テーブルに対するインデックスが効かないため、Viewの中にViewを使うことや、Viewに対してさらに複雑なJOINを行うことは推奨されていません。 （なお、View内でUNIONやGROUP BYを行っていたり、複雑な内容であるとインスタンス化がおきやすいです。） 仮に、「もともとのSQL」でインデックスが使われておらず、「パフォーマンス向上したSQL」でインデックスが使われているとした場合、「もともとのSQL」のほうにインデックスヒントをつけることでもともとのSQLの書き方で同様のパフォーマンスを得られるはずです。 VIEW内のテーブルに対するインデックスヒントなので、「グローバルヒント」という書き方をしないといけませんのでご注意ください。 ３．アドバイス もしかするとヒントなども不慣れかもしれませんが、上記で出てくるOracle用語は、すべて説明がOracleパフォーマンス・チューニングガイドに載っています。（OTNなどからもダウンロードできるOraceマニュアル） まずはこのガイドをひととおり読まれるのが、何よりおすすめのチューニング方法となります。 参考URL：http://otn.oracle.co.jp/
どこまで確認されたかは分かりませんが・・・ 1. MVIEW を作成したいユーザで SQL> SELECT * FROM A.TESTビュー ＯＫ ==> VIEW に対する MVIEW は作成できない ＮＧ ==> →2 へ 2. TESTビューの元表にもA ユーザがアクセスできるように権限付与して1 の内容が成功するか確認してみる。。 SQL> GRANT SELECT ON 元表A TO SCOTT; ＯＫ ==> 元表に対するSELECT 権限も必要 →MVIEW 作成へ ＮＧ ==> コマンドのどこかに問題がある こんな感じで切り分けできるのでは？
Oracleのパフォーマンスチューニングガイドに、基礎となる情報が書かれていますので、お読みになることをおすすめします。 正確な基礎理論が書かれてありますので、きちんと理解すれば自然とチューニングできるようになります。 また、どのSCANが速いか、というのはもちろん場合によって異なってくるので、まずは仕組みを理解するようにしてください。 ガイドはなれるまでは若干読みにくい（むずかしい）ところもありますが、頑張ってください。 参考URL：http://otn.oracle.co.jp/document/products/oracle …
Windowsのファイアウォールの設定でポート1158にアクセス制限をかければよいのではないでしょうか。
こんにちわ。 > XML形式でデータを取得したい XMLELEMENT ファンクションで可能かと思います。 詳細は、SQL リファレンスを確認して下さい。
ごめんなさい。 言われていることとやりたいことが、私の頭の中でかみ合わなくなってきたような気がしてます。 回答2の補足はテーブルCのDelete条件ですよね。 テーブルCはテーブルAのIDと同じレコードが削除になりますね。 それはいいです。 存在しなければ削除しようがないですね。それもいいです。 でも、テーブルAはそのID(テーブルCに存在しないID)のレコードを削除するのですよね。 そこをどうしようとしているのかがわからなくて、回答2の質問になりました。 >削除されない(テーブル)に対してＳＱＬを実行するのはプログラム上良くないですかね… 削除される対象が絶対に存在しない状態のテーブルに対してDelete条件のSQLを発行することを指しているのなら、良くないとは言いませんが「処理時間の無駄」ですよね。
こんにちは。 回答1. SQL*Plusユーザーズ・ガイドおよびリファレンス 回答2. SELECT COL1||','||COL2||','||COL3 FROM テーブル名 みたいにカラムを連結させてしまう方法もありますよ。
こんにちは。 回答しちゃいますけど・・・ CREATE TABLE EMP ( 省略 ) TABLESPACE USERS01 参考URLの"SQLリファレンス"に記載されていますので 調べてみて下さいね。では。 参考URL：http://otndnld.oracle.co.jp/document/products/or …
こんにちは。 同じ条件下で何回実施しても同じ差が出るのでしょうか？ 推測ですけど… ・格納先となる表と表領域の自動拡張が行われた分の時間差 ・他に重い処理が実行されていた くらいし思いつかないです。
バグというか不具合なんだと思いますが、サポート契約ユーザなら、オラクルサポートに確認するのが良いでしょう。 サポート契約がないなら、手に入るもの・あるもので対応するしかないので、まずはサーバサイドか クライアントサイドの問題か切り分けると良いかと。 （仮にオラクルサーバの問題だと、サポート契約ユーザ以外にはどうしようないという結果になります） (1)現在の環境で、オラクルサーバに正しくSQL文が投入されているかを確認する。（セッショントレースとか見る） (2)クライアントサイドの環境を変えてみる。例えば、古いクライアント環境(8i)の接続先をR10.2にして試すとか。
オラクルのオプティマイザは、テーブルの検索の方法を決めますが、外部結合と内部結合で 立案される実行計画に違いがあり、内部結合の方が合理的な検索方法を立案しているので 結果的に、内部結合の方が速いという話なんですが・・ 実行計画を見なければ、判りませんが、 ・外部結合はｂに対して全表検索を選択した。 ・内部結合では、ｂを索引検索を選択した。 ・ｂの検索量が、ｂの格納件数のうち、ごく一部なので、全表検索と索引検索では、極端に検索時間が違う。 ということなんだと思います。（推測なので、実は違うかも知れません） オラクルのマニュアルで、パフォーマンスチューニングガイドというマニュアルがあると思うので、 一読されることをお勧めします。 ちなみに、お書きになったSQLは何か変です。 内部結合のSQLは、ｂの項目を返さないので、実質的にｂに存在するかのチェックを行っているに等しいものです。 書き方や流儀の問題で、内部結合が良いのか、exists条件が良いのか、in条件(メンバーシップ検査)が良いのか 変わってくると思いますが、一応理解できるものです。 しかし、外部結合のSQLについては、ｂを検索するけど、何もしない？？理解に苦しむSQLになっています。 基本的に、内部結合より遅くなる外部結合を、わざわざ書いてみた、というように感じます。 （一般論ですが、同じ書き方をしたら、外部結合は内部結合と同等以下です）
OTNの掲示板ですが・・・ないみたいですよ http://otn.oracle.co.jp/forum/thread.jspa?messag … ただ、バージョン縛りがあるので、実質上使い物にならなくなっているケースはあると思います。9i silverをかなり前に取ったとして・・・、今、9i goldを取るより、10gだったり、もう少しで11gだったりを取りますよね。
insert all into Table values(a,b) into Table values(c,d) select * from dual abcdはデータ内容で、ポイントはinsertの後のallと、select * from dualをつけることです。
>チェックボックスで（Ａ、Ｃ）など複数 >選択された場合には、SELECT文でテーブルＡを抽出し >終わった後、SELECT文でテーブルＣを抽出するのは >問題があるのではないかと思います。 危惧している問題が解りません。 例えば、抽出するSQL投入のタイムラグを問題にしているのか？ または、抽出するプログラムのコーディング量が増えるのを気にしているのか？ 問題があるのではないかと思うなら、それを明示しないと、問題があるのかないのか、 仮に問題があるなら、その問題の解消法が提示できません。 例えば、で書いた２点のような話であれば、問い合わせ結果を一つに纏めて良いなら・・ select * from A where Ａが真なら union all select * from B where Ｂが真なら union all select * from C where Ｃが真なら ; のようなSQLで、複数のテーブルを纏めて検索すればOKかと思います。 （各テーブルの構成が違っても、問い合わせ結果が同じなら、UNION-ALL出来ます）
こんばんは。 「||」の読み方ですが、「Concatenation（コンカチネーション）」と呼んでますね。
Viewの中で使用しているテーブルや、sysnonymの元のテーブルを DropしてCreateした場合、viewやsynonymが壊れているという 状態になります。 User_objects のStatusというカラムの内容を見てもらえれば INVALIDとなっているはずです。 それを、正常な状態にするというのが、コンパイルです。
ロックする対象がなければ、ロックのしようがありません。 インサートするレコードのキーを予約する意味での行為なら、そのような手法ではだめです。 代替え策ですが、FOR-UPDATEで存在チェック＆インサート予約、その後にじっくりインサートするのでなく、 いきなりプライマリーキーだけインサートして、インサートできたなら、存在チェックＯＫ＆予約済みとし、 後でその他のデータを更新すると良いかと思います。 もし、更新を辞めたいなら、ロールバックすれば良いかと。
GROUP-BYに記述したフィールド以外は、SELECTするフィールドとして、集計関数を使わなければ記述できません。 こんな感じで、集計関数を使うことで、解決します。 SELECT max(U.得意先分類CD),max(B.得意先分類名),max(U.売上金額) FROM T,B,U WHERE T.得意先CD = U.得意先CD AND T.得意先分類CD = B.得意先分類CD　 GROUP BY B.得意先分類CD; 実データが、得意先分類CDで集約することで、U.得意先分類CD,B.得意先分類名,U.売上金額が単一の値になるとしても、 オラクルは判りませんから、もし単一の値になるなら、GROUP-BYの集約キーに、加えてください。 例えば、こんな感じで。 SELECT U.得意先分類CD,B.得意先分類名,U.売上金額 FROM T,B,U WHERE T.得意先CD = U.得意先CD AND T.得意先分類CD = B.得意先分類CD　 GROUP BY B.得意先分類CD,U.得意先分類CD,B.得意先分類名,U.売上金額;
>select文で、1度cのmax値を求めないといけないでしょうか？ そうですね。 動作確認していませんが、以下のように記述することが可能です。 select * from ABC where c=(select max(c) from ABC where a=1 and b=1)
そもそも、テーブルのカラムの属性にはData型やNumber型 もあるので、そのような方法はないとおもいます。 条件を nvl( instr((カラム名１), chr(10)), 0 ) + nvl( instr((カラム名２), chr(10)), 0 ) + ・・・ nvl( instr((カラム名ｎ), chr(10)), 0 ) > 0 としてはどうですか？
>ユーザー登録に会社名は必須なのでしょうか？ なくてもいいです。 黒本とは翔泳社が出版する「オラクルマスター教科書」シリーズのことです http://www.amazon.co.jp/s/ref=nb_ss_b?__mk_ja_JP …
旧システムがsjisやeucで運用している場合、unicodeのマッピングで"～"の文字化けの問題があるので、 ティルダに対応するキャラクタセットに移行する必要があります。 export-importで新環境に移行するなら、import先のDBを適切な状態にしていれば、importするだけで解決しますが。 ミドルウエア等のバージョン間の互換性については、問題にならないとは思いますが、 何を使っているかも判らない状態では、問題の有無も判りません。 とりあえず、お使いになるミドルウエア製品やオラクル本体のマニュアルに、互換性に関する記述があるので それを熟読して問題の有無を把握するしかないと思いますよ。
> People Softの時もオラクルとかぶった商品を持っているPeople Softを > 買収したし People Soft を買収した理由としては Oracle EBS に欠けていた SFA の機能を必要としていたから、Siebel を買収した理由は Oracle EBS に欠けていた CRM の機能を必要としていたからという理由だったと思います。 Oracle は他社のアプリケーションと組み合わせることなく、自社の製品だけで OS (Unbreakable Linux 2.0)、DB、AP の全てを構築するという選択肢を提供しようと考えているようです。うまく行っているかどうかはよく知りませんが・・・。 > そしてライバルが減れば自社の売り上げもあがるとかそういう考えなん > でしょうか？ そう言う考えもないわけではないと思います。楽天がマイトリップネット (旅の窓口) を３００億だったかの高額で買収したのも、獲得顧客数の面で勝てる見込みがなかったからと言われています。
> 検索した結果にリンクを張るわけですから、各項目にハイパーリンクを付ける方法では対応できない気がしまして… いいえ、もちろん「客先コードの値」と「客先名」は変数になります。 だからJSTLやEL式を使わないで書くなら↓みたいになります。 ※客先情報はCustomerクラスで定義 <% List list = request.getAttribute("customerList"); for (int i=0; i<list.size(); i++) { Customer customer = (Customer)list.get(i); %> <a href="<%= request.getContextPath() %>/hoge?客先コード=<%= customer.getCustomerCode() %>"> <%= customer.getCustomerName() %></a> <% } %>
インスタンスは正常に上がっているんでしょうか。上がっているのであれば、Recovery Manager(RMAN)を試してから、インスタンスを落としての物理バックアップの方が良いと思います。データだけが大事ということであれば、expとかでも良いですが。 というのも、一度インスタンスを落とすと二度と上がらないかもしれませんので・・・。状態変更前（今回でいうとインスタンス停止）に最善を尽くすのがセオリーです。
order by nvl(項目A,項目B),項目C という方法もあります。
こんにちは。 回答ではないのですが。 まず >OSの具合が悪いのかUPDATE2をフルでダウンロード＆インストール >すると、Linuxが立ち上がらなくなってしまいます。 の問題を解決された方がいいのではないでしょうか。 それに >文字化け解消に最低限必要なパッチ も結局はOSの問題ですよね？ Oracleの対処方法も「Update2へのアップデート＋font.dir再作成」か 「Update2以降のOSインストール」くらいしかないので。 ここでは回答は期待できないと思いますよ。 Linux系OS(参考URL)のところで質問するか OSのサポートへ問い合わせた方が早いかと。 参考URL：http://okwave.jp/c696.html
こんにちは。 各ノード毎に振り分けられたセッションについて 確認したいのであれば、gv$sessionだけで大丈夫です。
OUI(Clirntのsetup.exe)を起動し「インストールされている製品」から確認できます。 とはいえ、もし入っていたとしても最新版のODP.NETではないので ODAC(OTNから入手できます)から入れるべきかと思います。
オラクルの場合、PL/SQLが動作しないようなデータベースを作る方が難しいです。 普通にデータベースを作成すれば、PL/SQLを使えます。
ANo.1に補足です。 > Telnetを使ってOracleのあるサーバーへログインし、 > そこでデータベース接続をするというイメージ まず、リモート接続についてです。 vinwinさんの環境が、手元にあるクライアントマシンA（Windows？）から、 OracleのあるサーバーB（RedHat Linux）に「Telnetでリモート接続」して、 OSにログインしたあと、sql*plusでOracleを操作する環境と仮定してお話します。 一般的に、他のマシンへネットワークを介して接続し、利用することを 「リモート接続」といい、その際に通信内容を暗号化しているか いないかで、次の2つに分別します。 ・暗号化されていないリモート接続 → Telnet（TCPポート23） ・暗号化されているリモート接続 → SSH（TCPポート22） いずれの場合でも、RedHatに接続した後は同じように操作できます。 （$ cd , $ mkdir ,$ sqlplus など） > Oracleに対してはローカル接続なのかなと思っています そしてローカルについてです。 そもそもローカルというのは、逆説的に表現すれば 「一切他のマシンに接続していなくて、自分自身の資源を利用する」 ということです。RedHatを導入したマシンの目の前にいて、そのデスクトップから Oracleを利用していれば「ローカル」といえます。 <まとめ> vinwinさんが悩まれているとおり、TelnetしていてもRedHatにログインした 後は、RedHatから見たらローカルといえなくもないように思えますが、 この場合はそもそも「telnetしている」からリモート接続なのです。 <最後に> vinwinさんの「ネットサービスガイドマニュアルには、セキュリティで 保護されていないリモート接続は」 の後なのですが、 「OS認証でないといけないという記述」 　は、 「OS認証ではいけないという記述」 　の誤りでしょうか・・・？ Oracle Databaseの管理の概要 図1-2 DBAの認証方式 http://otndnld.oracle.co.jp/document/products/or … Oracle Database Net Services管理者ガイド -- 目次 http://otndnld.oracle.co.jp/document/products/or … を見る限り、vinwin さんがおっしゃっている内容が 見つけられなかったです。 ご確認をお願いいたします。 <参考になるサイト> 「リモート」とは：ITpro http://itpro.nikkeibp.co.jp/word/page/10027329/ 「ローカル」とは：ITpro http://itpro.nikkeibp.co.jp/word/page/10027391/ 用語集 http://otndnld.oracle.co.jp/document/products/or … OracleのOS認証とパスワード認証 http://www.searchman.info/tips/2570.html Oracleへのログイン http://www.b-s-c.co.jp/~y-fukui/pg_hint/db_prog0 … ＠IT：データベースセキュリティの基礎のキソ 第3回 http://www.atmarkit.co.jp/fsecurity/rensai/dbsec … パスワード認証について - 教えて！goo http://oshiete1.goo.ne.jp/qa1702867.html
構築もやってるエンジニアです。 何を使うかは目的次第だと思います。単なるOracle環境の構築であれば、入手が容易なWindows版でいいわけです。建前として、Oracleはプラットフォームに依存せずに動作することになっていますから。それにWindowsの場合はセットアップが少し楽です。（パッケージを揃えたりする必要が薄く、GUI操作なので初心者にも比較的やりやすい） もし業務上、UNIX系OSに対し環境を構築しないといけない（MS以外）のであれば、そもそも習熟しているOSを選択すべきです。 あとは根本的な問題として、Oracleのインストール自体は、操作できるOSであれば大して難しくないと思いますよ。どちらかというと、Oracleがどんなものなのか（どういうコマンドがある、どういうディレクトリ構成、とか）の方が難しいはずですよ。
まず、なぜブロックを分けるのですか？（分けるからには理由があるんですよね？） 一つのブロック内で処理を書いて、例外が発生すれば、後続の処理は打ち切られます。 通常、例外処理を書くのは、例外をキャッチして何らの処理を行いたい場合です。 例えば、＃２に書かれているような、例外をキャッチしてRAISEするだけなら、 例外処理は書かなくても一緒です。 （例外時にエラーを表示するなど何らの処理があって初めて例外処理に意味があります）
言語はメジャーなものなら何でもいけるでしょう。 接続方法がODAかADOかoo4oか。
R8.1.x以降でしか動かないことに気づいた。（サブクエリでのORDERが出来ない） > 古いオラクルで、同じような考え方を取ると > select x.見積ＮＯ,x.枝ＮＯ,x.件名,x.金額 > from > (select x.*,rownum R_NO from (select * from 見積 order by 見積ＮＯ,枝ＮＯ desc) x), > (select y.*,min(R_NO) R_START > from (select x.*,rownum R_NO from (select * from 見積 order by 見積ＮＯ,枝ＮＯ desc) x > group by x.見積ＮＯ) y) z > where x.見積ＮＯ=z.見積ＮＯ and (R_NO - R_START) <= 1; R8.0.x以前でも動くように、さらなる変更。 select A.見積ＮＯ,A.枝ＮＯ,A.件名,A.金額 from (select x.*,rownum R_NO from (select distinct 見積ＮＯ,枝ＮＯ,件名,金額 from 見積) x) A, (select y.*,max(R_NO) R_END from (select x.*,rownum R_NO from (select distinct 見積ＮＯ,枝ＮＯ,件名,金額 from 見積) x group by x.見積ＮＯ) y) z where A.見積ＮＯ=z.見積ＮＯ and (R_END - R_NO) <= 1; たぶん、これで良いはず。
古いオラクルだと、こんな感じで書くのが良いでしょう。 --外部結合による解決 select x.データＮＯ,a.品目,a.金額,b.品目,b.金額,c.品目,c.金額 from 見積 a,受注 b,納品 c, (select データＮＯ from 見積 union select データＮＯ from 受注 union select データＮＯ from 納品) x where x.データＮＯ=a.データＮＯ(+) and x.データＮＯ=b.データＮＯ(+) and x.データＮＯ=c.データＮＯ(+); --外部結合を使わない解決 select データＮＯ, max(decode(K,1,品目,null)),max((decode(k,1,金額)), max(decode(K,2,品目,null)),max((decode(k,2,金額)), max(decode(K,3,品目,null)),max((decode(k,3,金額)) from (select 1 as k,a.* from 見積 a union all select 2 as k,b.* from 受注 b union all select 3 as k,c.* from 納品 c) group by データＮＯ;
ファンクションで実現できます。 入力パラメータ＝コードのファンクション(ftest)の例 create or replace function ftest(ccode in varchar2) return varchar2 is 　cout varchar2(1000) := null; 　cursor c1 is 　　select name from testtbl 　　where code = ccode 　　order by name; begin 　for c1_rec in c1 loop 　　if cout is null then 　　　cout := c1_rec.name; 　　else 　　　cout := cout || ',' || c1_rec.name; 　　end if; 　end loop; 　return cout; end; / ＜実行例＞ SQL> select ftest('0001') from dual; ftest('0001') -------------------- AAAA,BBBB
SQL*PLUSで、最初のスクリプトファイルを呼び出す前に、 "set echo on"すれば良いと思いますよ。
データの暗黙的な変換が原因ではなく表示上の問題ではありませんか？ SQL> create table hoge ( d date ); 表が作成されました。 SQL> insert into hoge values (current_timestamp); 1行が作成されました。 SQL> alter session set nls_date_format = 'yyyy-mm-dd hh24:mi:ss'; セッションが変更されました。 SQL> select * from hoge; D ------------------- 2007-11-07 12:00:12
>このような特殊文字列？？を使うと問題あるのでしょうか？ 問題があると言えばあるし、無いと言えば無い、微妙のなところです。 オラクルが誤認識する話と、異機種間接続やコード変換時の文字化けがつきまとうので。 >そのほかにも使用しないほうがいい文字列などありますでしょうか？ SQL、PL/SQLの予約語 半角記号類 SJIS上に存在する特殊漢字（8740～879e、<=(株)やNo.など） チルダ（～） などですかね。 ただ、SQL予約語にしても、半角記号文字にしても、ダブルコーティションで括れば、 殆どの文字がテーブル名や項目名として利用できます。 例えば、 create table "***,HoGe.###" ( "No." number, "(株)" varcar2(20),"DATE" date); とかのテーブルは定義可能です。 作るのも使うのも面倒なので避けて通るのが得策です。
いきなり間違えてしまいました・・・ORZ ×SELECT SELECT table_name FROM user_tables; ○SELECT table_name FROM user_tables;
バージョンに関係なく空白埋め比較であれば同じになります。 非空白埋め比較では一致しません。 参考URL：http://biz.rivus.jp/mechanism/varchar2-char-comp …
分析関数が使える環境なら・・ --価格管理が矛盾しないなら select A.OrderNo,B.商品名,C.価格 from Order A left join (select X.*,row_number() over(partition by OrderNo order by 個数 desc,商品名) R from Order明細 X) B ON (A.OrderNo=B.OrderNo and R=1) left join 価格 C ON((C.商品名,C.売り先) in ((B.商品名,A.売り先),(B.商品名,'*****'))) --価格管理が矛盾するなら select A.OrderNo,B.商品名,nvl(D.価格,C.価格) as 価格 from Order A left join (select X.*,row_number() over(partition by OrderNo order by 個数 desc,商品名) R from Order明細 X) B ON (A.OrderNo=B.OrderNo and R=1) left join 価格 C ON(C.商品名=B.商品名 and C.売り先='*****') left join 価格 D ON(D.商品名=B.商品名 and D.売り先=A.売り先) という感じで書けると思いますよ。（未検証、目視確認のみのＳＱＬです）
spfileを使用しているのでpfileを書きえても反映されていない というオチではないですか？ startup pfile=pathname\init.ora で起動するとか alter system set audit_trail=DB scope=spfile とか
>elogin.cl、owm.cl、IFA.cl、netasst.cl、netca.cl　の各ファイルに"-nojit"を入れたのですが、動きません。 >これ以外に、何かしなくてはならないことはありますでしょうか？ 以前、NOJIT対策で、JITのDLLをリネームしたことがあります。 -nojitオプションを書くのが面倒なのと、R8.1.7のOHSの設定が面倒だったので。 -nojitオプションでも、jitが使うDLLのリネームでも同じ効果が得られ、リネームだと設定漏れが防げるます。 DLLの名前を失念しましたが、*jit*.dllで探してみてください、１つだけ見つかると思います。 （違う名前にリネームすれば、DLLなしとして、-nojitと同じ動きをします） >また、最後の手段として、自力でネット・サービス名の構成を作るのは難しいでしょうか？ 私は、GUIを使わずに設定しますが、操作や設定に困ることはありません。 設定ファイルの構文ルールと意味を理解していれば、テキストエディタで作業可能です。 既存の環境があるのであれば、それを参考に、新しいインスタンスの定義を増やせると思いますよ。
oracle 10g＋PHP5はやった事は無いけど 下記blogを見ると パラメータがだいぶ違うみたいな感じですよ。 TNS経由ではないみたいですね。 参考URL：http://jack1118.livedoor.biz/archives/50314448.h …
ORは基本的に回避した方がいいです。 通常はIN等や、複数回の問い合わせで逃げます。 例） 『where abc='a' or　abc='b'』 ↓ 『where abc in('a','b')』
なにやら勘違いされているようですが？ 販売本数としてはWinやUNIXが確かに多いでしょうが LinuxはフリーOSの為販売本数という形では 実際使用されている数量とはなりませんよ？ 事実　ワールドワイドに使用されているＯＳという概念であれば Linuxを初めとするUNIXクローンが一番多いと思います。
＃１さんの追加でoracleのクセの方を・・・ select * from A,B where A.key = B.key(+) この場合、B側が外部結合され 提示された条件で、抽出されるようになります。 初めての頃はいっぱいsqlを書いてtry&errorをやってみましょう。 ＃１さんの紹介されているotnでいろんなテスト出来ますよ。
無料版のOracleもありますよ 研修で行っているのであれば、その講師の人（いるかどうかわかりませんが）に詳しく聞いてください 答えられるかどうかで その講師の人の力量を知るための試金石代わりにもなりますよ Oracle Database 10g Express Edition 略名(10gXE)ってバージョンがあります。 容量制限がありますが、機能的には有償版となんら変わりありません たしかwindows版もあったと記憶していますが使ったこと無いのでわかりません ほかにもwindows上で動くDBとして有名どころではMySQLやPostgreSQL等があります SQLの基礎を学びたいのであればこれらのオープン系でも良いと思いますが、各DBで方言がありますので気をつけてくださいね。 方言に頼った書き方しかできないと後々苦労すると思います。
　構造は、使い方に依存すると思うので、考え方のみ。 　まず、データと現実をどのように整合さしているかがひとつのポイントになると思います。 　たとえば、昨日のデータを昨日登録したとします。登録した限りは、現実のお財布の中身は、データとあっていたはずです。（たとえダミーを入れようが使途不明金で計上しようが、あっていなきゃおかしいですよね。） 　そして、今日のデータを入力します。当然、やはり、今日のデータ上の残高と財布の中身はあっているはずです。 　ここで、昨日のデータを修正しました。 　残高に影響するような修正をする羽目になったということは、 ・昨日の締めの作業が間違えていた。（つまり、昨日の残高が嘘だった。） ・使途不明金の正体が発覚した。 　のどちらかのはずです。 　もし、前者だとしたら、これは、もう、それ以降のデータが全部影響を受けるのはしょうがないですよね。計算し直すべきです。 　後者だとすれば、使途不明金と、発覚して登録したデータとの差し引きは０になり、締めのデータは影響を受けない。つまり、今日のデータへの余波はないはずです。 　というわけで、私が同じようなソフトを作ったときには、日次（月次）の締めようのテーブルを別途構築しました。 　会社の会計と同じです。棚卸し（つまり、財布の中身とデータの照合）をしたときに、ソフト上で締めの作業をするわけです。そのときに、その日（月）の残高を締めテーブルに登録します。 　今日（今月）の残高を計算するときには、締めテーブルの残高を基礎にして計算します。 　もし、締めテーブルに波及するような過去データの修正をやったら、もう一度、それ以降のすべての日（月）の締め作業はやり直すべきですから、計算をやり直します。（そのためのメニュー項目かボタンと、その処理ルーチンは当然必要です。） 　もし、プラスマイナスで相殺する修正なら締めの作業は別にやり直す必要もありません。 　もっとも、前回の締め程度ならともかく、それ以前の締めデータにまで波及する修正が入るとなると・・・・現実の世界（財布）はどうなっていたかを考えると・・・それってどんぶり勘定？（笑）というわけで、普通は、締め作業のやり直しはそんなに大量のデータにはならないはずですよね。
なぜEEである必要があるのか？という質問に一言で回答すると、「その方が開発工数やその後の運用コストを削減できるから」ということになるかと思います。 サーバー間同期の方法は色々あります。DB側の機能でやるとしたら、10gSEの場合はレプリケーション（ただし双方向同期はEEのみのはず）か基本スタンバイ構成（ただしアーカイブログの転送・適用を自動化する部分は自分で作成する必要有り）、トリガーでの作り込みといったところでしょうか。DB側の機能でなくていいのなら、ストレージ装置の機能、データ同期を行うアプリの作成などが考えられます。ですので、EEの機能が必須というわけではありません。開発工数をたくさんかけたり、高価なストレージ装置を導入したりすれば、EEでなくても同期可能です。ただ、EEの方が開発工数を削減できるので、全体で見ると安くなることがあります。 また、RACはサーバ間同期とは少し違い、一つのDBを複数サーバ（複数インスタンス）で構成する機能です。 10gSEとのことですが、Standard Editionでしょうか？それとも、Standard Edition Oneでしょうか？前者なら、少し制限がありますが、RACの機能を使用可能です。
ここのサイトでは、「前の質問を締めずに、続きの質問をすること」は、規約違反であり、ほぼ１00%削除されてしまいます。 前の質問にしても、この質問にしても、誰かがせっかくアドバイスを書き込んでくれても、質問者さんの規約違反行為により、削除されてしまいますよ？
マニュアルをご覧下さい。 参考URL：http://otndnld.oracle.co.jp/document/products/or …
やりたいことがイマイチ理解できないけれど、質問を読む限り、 A_TBLへINSERTする動機が２種類あって、いずれかを行う。 (1)A_TBLへのインサート、B_TBLのアップデート (2)A_TBLへのインサート、B_TBLへのインサート これが、A_TBLへのINSERTする動機にあたる部分が、A_TBLへの登録内容（値）で区別できるなら、 A_TBLのインサートトリガを２つ作るのでなく、１つに纏めて、B_TBLのINSERT/UPDATEを区分けすれば 良いでしょう。 A_TBLへINSERTする動機がA_TBLの内容で区別できないなら、A_TBLへINSERTする動機そのものに B_TBLへの更新を紐付ける方が自然だと思います。
>ところで私は以下のコマンドでウィザード形式ですすめているのですが； >「imp ユーザー名/パスワード」 >「SHOW=Y をパラメータに追加」というのはどうすれば宜しいでしょうか。 対話形式での入力内容が判らないと、同じ意味のコマンドパラメータをお教えできませんが・・ imp userid=ユーザ名/パスワード file=HOGE.DMP full=y show=y みたいな感じになりますかね。（フルリストアの場合）
エクスポートもインポートも、SYSTEMユーザで、FULLモードを処理できます。 エクスポートもインポートも難しくない操作ですが、処理時間だけは相応に必要ですので、 大きなデータベースの場合、インポート処理で覚悟が必要です。
ORA-12514ですと、「PHPだから」という問題ではない気がします。 SQL Developerなどで、リスナー経由で接続できますか？
オラクルデータベースのファイルをフォルダ圧縮するのは問題ありません。 ですが、Windowsのバグで圧縮フォルダを壊すことがあるのであれば、 当然データベースファイルも壊れることになりますし、救済の方法は ありません。 >（Windowsの圧縮機能はファイルを壊すことがあると聞いたので不安になってます。） NT4.0で実体験として壊れたことはないのですが、古いNT3.5とかでは 壊れたとの話がありました。（15年くらい前のNT3.5や3.5.1の初期の話です）
empty_blobを使っていないのなら、他のデータタイプと同様に 「is null」で判定できますが、empty_blobを行っていると、 「is null」では該当しないので dbms_lob.get_lengthを使ってサイズを確認する方法で 出来るはずです。 ＃ソレをNULLというかどうか別ですけど。
データ件数がどのくらいあるのか分かりませんが、1万件以下くらいなら、update一発でいいでしょう。 update 表名 set 新しい列=既存の列
>「あ」 を >「+MEI-」 >に変換する convert('あ','UTF8') >　また　その逆をする関数はありますか？ convert('あ','？？？？？？？','UTF8') ？？？？の部分は、変換先のキャラクタセット。
こんばんは。 今書いているＳＱＬ文は、ボトルネックになっているようなＳＱＬ文に なっていませんか？ 例えば、ＳＱＬ－Ｐｌｕｓを使って実行した場合でも、 レスポンスが得られないような場合はＳＱＬ文自体を見直すべきです。 アイデアとしては、PL/SQLなどを使って複雑になっている ＳＱＬを分解して実行する、という方法もございます。 クライアントとサーバのラウンドトリップは１回なので、 高速に結果を得られることが期待されます。 ＳＱＬ文のチューニング次第では、劇的にレスポンスが向上する 場合があります。Oracleの Explain などを有効に活用してみて ください。
ALTER SESSIONでは現行セッションにしか（そのSQLPLUSにしか）影響しないはずです。 ALTER SYSTEMで一時的にDB全体にSQL_TRACEを設定するか、 JavaのDBセッションをV$SESSIONから拾って DBMS_SYSTEM.SET_SQL_TRACE_IN_SESSION を使ったSQLトレースをしてみてはいかがでしょう？
画面に出力されるメッセージが不要でしたら、標準出力と標準エラー 出力をファイルか/dev/nullにリダイレクトするのが常套手段です。
viewというのは実体を持たないのです。 では実体を持たないものに更新を掛けるという事は？ 実体であるテーブルに更新を行っているのです。 なのでレコードが特定できないｖｉｅｗ（gropu句などがあるようなもの）には更新できません。
KeySQLは、たんなるオラクルクライアントの一つでしかありませんから、 オラクルサーバーのキャラクタセットに関係なく、オラクルクライアントの NLS_LANGに準じます。（キャラクタセットに応じて、文字コードの変換がされる） WindowsPCをお使いかと思いますが、WindowsPCで、SJIS16を設定されることに なるはずですので、SJIS16で扱える文字に関しては、問題なく利用できます。
まず、ライセンスに関して正確な情報は、直接日本オラクルに聞くしかないです。Oracle Directという窓口がありますので、ここに質問してみてください。きっとすぐ教えてくれると思います。私も何度か利用したことがありますが、ライセンスについての質問の場合は、即答してくれます。セールスガイドを読まれたということは販売代理店の方かと思いますが、エンドユーザでなくても問い合わせ可能です。 http://www.oracle.co.jp/direct/ で、ここからは私の私見ですが、インスタンスが立ち上がっている場合はライセンスが必要なはずです。従って、インスタンスが立ち上がっているが何の処理もしていない、という場合でもライセンスは必要です。マルチマスタの場合は待機系もDBはオープン状態、つまりインスタンスが立ち上がっていますので、ライセンスは必要なはずです。 ライセンスが不要なのは、クラスタウェアを利用したコールドスタンバイ構成（待機側はサーバ電源オンだがDBは停止状態、本番機障害発生時にクラスタウェアにより自動起動）の待機側とかですね。この場合2台同時に起動状態になることはないということで、ライセンスは1台分だけでいいはずです。 あくまで私個人の回答ですので、正確な回答は日本オラクルに直接お問い合わせ下さい。
unionでselect文を繋げてみては？ select * from (select '00001' as 商品番号 from dual union select '00002' as 商品番号 from dual union select '00003' as 商品番号 from dual union select '00004' as 商品番号 from dual union select '00005' as 商品番号 from dual) as x といった記述が可能です。
オラクルの最大セッション数は、初期化パラメータで決まります。 初期化パラメータの説明は、データベースリファレンスに書かれているので、 お読みください。(PROCESSESとSESSIONSパラメータのあたり） 制限値を超える運用をしたことがないので、制限値オーバーの挙動を知りませんが、 制限値を超えたなら、アラートなどがオラクルサーバー上に記録されていると思いますよ。
・課題の解決策に相関副問い合わせが必要か？ ・仮に、相関副問い合わせが必要だとして、相関条件が適切か？ 今の課題であれば、相関服問い合わせなど必要ない。 もっと課題が複雑で、相関副問い合わせを使わざるおえない課題でも、他の書き方を考えた方が 合理的な問い合わせになるはず。 ということで、最初から考え直した方がいいでしょう。 >こういった相関サブクエリは作れないのでしょうか？ 書けても良さそうな気もしますが、書けなくても問題にならないのでしょうね。 同様の相関問い合わせは、他に幾らでも書き換えが可能なので。 例えば、問い合わせが２つの表だった場合、多くの人は内部結合で対応すると思いますよ。 でも、今回のケースでは、サブクエリも内部結合も必要ありませんが。
>oracle,sql server等、各環境で保障されるのでしょうか？ ORDER-BYを外側に書かない限り、RDBMSとしては出力順を保証する必要がありません。 RDBMSの処理上、結果的にORDER-BYを書いたときと同じ結果になります。 (ORCALEもSQLserverも、現行バージョンまでなら結果オーライ） >入れ子が多くなった場合もうまくうごくのでしょうか？ 基本的に問題ありません。 サブクエリの中で、order指定をするのは、データを加工する時に、加工する順番に意味がある場合で、 問い合わせ全体の出力順を決めるためではないのが一般的です。 例えば、 select x.*,rownum from (select * from target order by key) x; と select x.*,rownum from (select * from target) x order by key; は、全く異なる結果になります。 8i以降、サブクエリ中でorder指定が可能になったのは、そういう目的です。 8i未満の場合、order指定が出来ないために、保証されない色んな方法でサブクエリ内での処理順を決める必要がありましたので。
＞２つの処理がロックしてしまう、というように聞こえますが ＞こういうことはあるんでしょうか？ あるんです。Ａのプロセスも、Ｂのプロセスも「誰もロックしてない」って思ってますから。 Ａがロックを掛けた直後に、Ｂは「さっき調べた時は誰もロックしてなかったから、ロックしよう」と「上書きロック」をしてしまいます。 通常は１と３の間に２が割り込まず、２が後回しになる為、以下のようにＡもＢも正常終了します。 １．Ａがレコードのロック状態を検査。ロック無しと判定 ３．Ａがレコードをロック ２．Ｂがレコードのロック状態を検査。ロック有りと判定 ４．Ｂはレコードのロックが解除されるまで待ち合わせ （以下略） デットロックの直接の原因は「間に割り込みが入らず一連の動作として処理しなければならない、ロック状態の検査とロック設定の間に、別プロセスが割り込むため」です。 こういうケースは、データベースがサーバー上にあり、アクセスがネットを介して行われる場合で、２つのプロセスが同時に同じ処理を行った際に多発します。 回避には、独自にセマフォ変数やミューテックス変数を用意するなどして「データベースのロック機能以外を使って」排他制御が必要です。
>１．オンラインバックアップ＋アーカイブログモードの場合、 >　　アーカイブログモード開始前にシステムを止めてバックアップ（コールドバックアップ）をとる必要はないということですよね？ アーカイブログ単独では、意味がありません。バックアップと揃って初めて、障害復旧に使えます。 アーカイブログモードに変更する際に、バックアップが必須ではありませんが、バックアップの採取が完了するまでは、 障害復旧は行えません。 >　　事前にバックアップととらなくてもアーカイブログモード後にオンラインバックアップをとれば復旧は可能ということでしょうか？ オンラインバックアップ以後の時点に復旧可能です。 >２．１が正しいという前提でアーカイブログモード運用後にオンラインバックアップをとった後はそれまでのアーカイブログは不要で削除してしまっても問題ないのでしょうか？ ALTER TABLE ～ BEGIN BACKUPしたタイミングのアーカイブログは必要ですが それより前のログファイルは、バックアップが完了すれば不要です。 例えば、10:00ジャストにバックアップを開始して、11:00ジャストにバックアップが終了した場合、 10:00より前に出力の完了しているアーカイブログは、11:00のバックアップの終了を待って、消して良いでしょう。
>NOLOGGINGモードは表領域、テーブル、Insert文などいろいろなところで設定可能になっていますが、 表領域やテーブルはともかく、INSERT文にLOGGINGのオプションはありましたっけ？？ INDEXの間違い？ 追加の質問に書かれている（例えば・・の）３点は、マニュアルに説明が書かれているので、まずはお読みください。 その上で、ご不明な点をご質問いただければ、判る範囲で説明します。 （閲覧可能な書物に記載されている内容を説明する意義を感じません）
秒は、"SSSSS"ではないですか？ 参考URL：http://biz.rivus.jp/datetime_format_element.html
OS について書かれていないので、Unix (Linux) と Windows のケースについて回答します。 (1) Unix (Linux) の場合 アラート・ログは削除されても、次に出力内容が発生した際に再作成されます。 それ以外のファイルはプロセス単位 (bdump はバックグランド・プロセス単位、udump はユーザ・プロセス、つまりセッション単位) での出力です。削除されたファイルへの出力は行われません (ディスクリプタを失うため)。 (2) Windows の場合 そもそもオープン中のファイルを削除することができなかったように思います。
SQLのマニュアルに書かれています。
通常データベースへの接続は、クライアント側から明示的に切断する ものです。一定時間アイドルのセッションを切断したければ、そのような 設定が必要です。 ご使用のアプリケーションと「単一で接続するとリプレースされます」の 意味を補足説明されれば、他の回答も得られると思います。
　表のオンライン再定義が一番堅いかと思います。 　DBMS_REDEFINITIONパッケージを使用します。表そのものは、短時間の間排他ロックされますが、作業中も引き続き使用が可能です。また、この際に列の追加・削除・変更なども可能です。最悪、主キーを変更することさえ可能ですが、之に際しては若干の制限が発生します。 　残念ながら手順は結構長めですので、ここで書くには、ちょっと苦しいです。 　マニュアルが参照できるようでしたら、データベース管理者ガイドの第３部「スキーマーオブジェクト」の第１５章「表の管理」の４項目にある「表のオンライン再定義」を見てください。例示を含めて、結構わかりやすく書かれています。（部・章・項は、私の手元にある９ｉのマニュアルによります。ページは１５－１６ですが、もしバージョンが違うようでしたら、タイトルを参考にして探し出してください。） 　マニュアルが手元にないようでしたら、たしか、オラクルのサイトから落とすこともできたはずです。「データベース管理者ガイド」と「データベース概要」、それに、「PL/SQL パッケージ・プロシージャおよびタイプ・リファレンス」「データベース・エラー・メッセージ」くらいは、最低限手元に置いておかれると何かと役にたつかと思います。
Pro*C で書かれた他ノードのプログラムから Oracle DB に接続できるようにするためには、CONNECT 時に 接続文字列を指定することです。 EXEC SQL CONNECT :ユーザ名 IDENTIFIED BY :パスワード [USING :接続文字列]; あと、サーバ側の listener.ora、クライアント側の tnsnames.ora の設定を行い、リスナーの起動が必要になります。 ところで、Pro*C 自体には ODBC 機能はないはずですが・・・。 参考URL：http://otn.oracle.co.jp/forum/thread.jspa?thread …
メモリに保持できないデータはディスクから読み込み直されることになるので、当然ながらディスク I/O が増えます。 あと、不足している領域によっては再解析なども発生するので、CPU 消費量も多くなります。 さらに、ORA-4031 などのエラーが発生しやすくなります。
SQL*PLUSでログインして SQL>show sga; とうってみてください。
オラクルのホームページにイベント・セミナー情報があります。 また、インターネットと電話回線を使ったインターネット・セミナーもあるようです。 参考URL：http://www.oracle.co.jp/events/
>ORA-01034 Oracle は使用できません。 このエラーはインスタンスが起動していないときに出るエラーです。 サーバーマネージャーを起動しインターナルモードでログインします。 connect internal データベースをノーマウントでスタート STARTUP NOMOUNT ALTER DATABASE OPEN; を実行すれば、インスタンスを起動します。 この時に出るエラーコードがわかれば判断しやすいのです。 補足御願いします。
UNION句についての理解でしょうか？ UNION句は、２つのテーブルの和集合を求めるもので、 ALLの有無は、重複レコードを含むか、含まないかの違いです。 ですから、UNION句そのものは和集合を求めるものです。 積集合は、重複するレコードを求めるものですので、 where句で、テーブルAとテーブルBの各フィールドが一致する条件を記述することで、実現できます。 select * from TBL_A,TBL_B where TBL_A.colum1 = TBL_B.colum1 and TBL_A.colum2 = TBL_B.colum2;
データベースの削除はデータベース構成ファイル (全てのデータ・ファイル、制御ファイル、REDO ログ・ファイル)、アーカイブ・ログ・ファイル、ログ/トレース・ファイル (bdump、cdump、udump)、を OS コマンド (ファイル・システムの場合は rm、raw の場合は dd) を使って物理的に削除することで可能です。 dbca のデフォルトだと、インスタンスを shutdown abort (どうせ潰すデータベースに immediate などを指定する必要はありません) で停止した後に、$ORACLE_BASE/admin/<db_name>、$ORACLE_BASE/oradata/<db_name>、$ORACLE_HOME/dbs/*<SID>* をバッサリと削除して、あとは /var/opt/oracle/oratab (/etc/oratab かも) から、削除したインスタンスに対するエントリ行を削除 (vi エディタなどで編集) すれば完了です。 その他、dbca でも削除できますし、最近では DROP DATABASE コマンド (私はまだ使ったことがないです) も用意されていたかと思います。
1521番でlistenerが動いていない可能性があります。 念のため、netstat -an |grep 1521でリスナーが LISTEN状態になっているか確認をしてください。
selectで抜き出す項目を動的に変更したい、ということなら純粋なＳＱＬでは無理でしょう。 decodeやcase使って変換は可能かもしれませんが、項目自体を表示しないというのは無理だと思います。 普通この手のことを行う場合はｖｂやａｓｐなどでｓｑｌ文字列を 条件によって連結していき実行させるような仕組みで行います。
No.2です。 下記のような結果でもいいのであれば、こんな感じでいけると思います。 +-------------------------------------------------------+ | SEQ番号 | 本支所CD | 部門CD | 項目CD | 項目名 | 発生額07月 | +-------------------------------------------------------+ | 1 | 999 | 99 |05000 | 名称１ | 1,234 | 2 | 999 | 99 |05100 | 名称２ | 1,235 | 3 | NULL|NULL|05200 | 名称３ | NULL +--------------------------------------+ select マスタ.SEQ番号, data.本支所CD, data.部門CD, マスタ.項目CD, マスタ.項目名, data.発生額07月 from マスタ,( select * from データ where 本支所CD = '999' and 部門CD = '99' ) as data where マスタ.データCD = '0009' and マスタ.項目CD = data.項目CD(+) ＞どうしても出したいのであれば項目に固定値を入れるとかしないとダメかも……) 無理矢理提示された結果を出すのなら、本支所CD,部門CDの項目ではなく、'999','99'を代わりに指定したら同じ結果は出るかなと思って書きました。 絞り込みたいのであればダメですね。 気にしないでください(笑) #ちなみに8iはleft join使えないみたいです。
WHERE (品番 = 引数１ OR 商品名 = 引数２) を WHERE (品番 = 引数１ and 引数１ is not null) OR (商品名 = 引数２ and 引数２ is not null) とすれば良いのではないかと。
CSVをExcelで開いた場合、 xxxx-xx-xxとか xxxx/xx/xxのような文字列である場合、自動的に 日付型として読み込みます。 明示的に先頭にシングルコーテーションを記入すれば、型変換 は、行われません。 しかしながら、エクスポートで、Oracleから生データを出すのですから、シングルコーテーションをつけるわけにもいかないですね。 Excelの仕様と判断してください。
#!/bin/sh DATESTR=`date '+%Y%M%D'` lsnrctl set log_file lisener.tmp.log mv listener.log listener.$DATESTR lsnrctl set log_file listener.log cat lisener.tmp.log >> listener.$DATESTR rm lisener.tmp.log
KROEN#109820が参考になると思います。 LANG=Cとしてインストールしてください。
そうですね。 hostコマンドを実行すると、新規にプロセスを起動している ようなので、change directory等実行しても、exitした 段階でダメでしょうね。 （プロセスはタスクを見ると新しく起動されているのがわかります）
以前だと、同じエントリーレベルでも9iと10gとで、対象となる技術者に大きな違いがありました。 Silver Fellow → DBユーザ(バージョン非限定、合格証のみ。) Bronze[10g] → DB管理者(ORACLE MASTERの資格だが、グローバル認定はされず国内のみ。) ただ、jitecなどの国家資格などと違い、基本的にベンダー資格においては、移行試験がきちんと各レベルごとに用意されています。 ＠IT > 自分戦略研究所 > スキル創造研究室 > Oracle 10g対応のORACLE MASTERとは？ http://jibun.atmarkit.co.jp/lskill01/special/om2 … 11gの詳細に関しては私の方でも未だ不明ですが、ブロンズ以降の流れ（小規模DB管理者も対象）に関しては、それほど変わりはないと思います。 受験料を少しでも安く済ませ、今すぐ必要でもないのでしたら、発売が開始されてから２ヶ月ほど待っていればいいと思います。ただ、今のうちにブロンズを取得し移行試験も受験すれば、確かにお金はかかりますが、10gと11gの両方を知っているということになると思います。 参考URL：http://www.oracle.com/global/jp/education/certif …
どこで出てきたのか、とか前後の文がわからないので、 なんとも言えませんが、 Create　Type で作成したオブジェクトのことじゃないですかね。
大分時間が空いてしまいましたが．．． 具体的な例を挙げていただきましたが、確認させていただきたいことがあります。 １．IMPORTの際に発生したORAエラーは何番でしょうか。 ２．アーカイブファイルを出力する領域（ドライブ）の空き領域が サーバCの場合DB作成時には80G空いていたのが 0GBまでになっているのを確認していますでしょうか？ ３．アーカイブログ出力先の場所の確認はやっていただけましたでしょうか。 ４．サーバBの場合もサーバCの場合もアーカイブログモードになっていますでしょうか。 どう考えても同じWindowsのバージョンが異なるだけでOracleのバージョンが同じであるのにアーカイブログ出力量が変わるということは考えられません。 以上、よろしくお願いいたします。
的外れだったらごめんなさい。 > SELECTしたものを飛ばしてからINSERTしたいのですが、 > どうしたら良いですか？ これを実現するにはPROCEDUREを用いなくてもできるのですが、それではダメなのでしょうか。 INSERT INTO テーブルA 　SELECT 項目A, 項目B, … FROM テーブルB WHERE … ;
これかな～ merge into 表A A using (select a,b,c from 表B) B on (A.a = B.a and A.b = B.b) when matched then update set A.c = B.c
ORA-1013が出てるということはユーザサイドでCtrl+Cなどの 強制終了操作を入れたということですよね？ であれば、さすがにプログラム自体を強制終了しようとしているので Exception句でのエラーハンドリングは不可能かと思われます。 （Exception句も含めプロセス単位で強制終了させているわけですから） Oracleとしては強制終了を受けて未コミットデータのロールバックが 行われていますのでデータベース的には整合性が取れた状態となって います。業務的に整合性がとれていないのであればその整合性を 取る別の監視アプリケーションを作ることをお勧めします。 （処理中フラグが立っているいてそれに該当するプロセスが存在しない場合は異常終了したと判断してそれに該当するデータを削除する プログラムなど）
　インストールしようとしたクライアントが何であるか を調べる必要があります。 　Instant Clientなら、SQL*PLUSさえもインストール されなかったと思います。
フリーツールでよいと思います。 EasyData ManagerかSQL Developerで良いのでは。 両方ともOracle純正ですし。 参考URL：http://otn.oracle.co.jp/software/tech/dbeasymana …
私もこの件、とても悩みました。 あきらめ半分でいろいろ調べたところ、下記を見つけ、解決することができました↓ http://www.fourmeisters.com/blog/hisama2/2007/07 … 但し、「SQLコマンドラインの実行」は行えなくなりました... 当方詳しいことは良くわかりませんので、あくまで、自己責任で行ってください。 ちなみに、 http://www006.upp.so-net.ne.jp/auctor/software/o … や http://weyk.air-nifty.com/none/2007/01/oraclexej … も見つけました。 こちらは試していませんが、ご参考まで。 もし、こちらをお試しなら、できれば、結果も教えていただけると助かります。
US7ASCII であれば、以下のSQL 文で変換できないですか？ SQL> ALTER DATABASE CHARACTER SET JA16SJIS;
8iエンタープライズ版なら、分析関数を使えば・・ select ID,回数,sum(値) over(partition by ID order by 回数) 値 from TARGET; な感じで書けると思いますよ。
> oracle10gの文字コードを変更したいのですが、どうすればよいでしょうか？ > 現在は、UTF8になっていますが、EUCにしたいと思っています。 Oracle10g では csalter を使用することでキャラクタセットを変換することができるものの、UTF8 は EUC のスーパーセットではないため変換できません。つまり、データベースを再作成するしかありません。 「変換前のキャラクタセットが変換後のキャラクタセットのスーパーセットである」とは、変換前のキャラクタセットが変換後のキャラクタセットに完全に含まれる場合を指します。(例えば、US7ASCII -> JA16SJIS。SJIS には ASCII コードが完全に含まれています)
Oracle10gなら、VPD(仮想プライベートデータベース)で実現できそうな 気がします。詳しくはマニュアルを参照下さい。
エラーメッセージをみてのアドバイスです。 多分STARTUP コマンドはオプション無しでやったのではありませんか？ 下記の手順をためしてみてください。 1）SQL PLUSでSHUTDOWN ABORTを実行する 2）SQL PLUSでSTARTUP NOMOUNTを実行する 3）SQL PLUSでCREATE文を実行する 外していたらごめんなさい。
> オラクルが使える環境があれば Express Edition 使えば良いのでは? 無料ですよ。(試用版ではないので期間の制限などはありません)。 参考URL：http://journal.mycom.co.jp/news/2005/10/31/004.h …
さきほど回答しましたhamu1です。 訂正します。 a,b,c,d,e,f というデータの場合、テーブルには a,e,f をインポートするときには、 （略） ( a, "b" filler, "c" filler, "d" filler, e, f ) となります。 間違えちゃって、、すいません。
＃１です。 既に設計の話になってしまっているようですが、 ご参考までに。 旧データのコードと新データのコードの2種類を持つことはできないんですか？ 検索用に新コードを用意して、これを条件で使用するというものですが。
受験だけでもかなり掛かりますよ。 独学でなく、講習まで受けるとなると．．．スゴイ金額ですよね。 そういう資格です。^^; 自己投資して、どれほど今後の自分に影響を与えるかで、 高いか安いか判断してどうですか？ 資格を取ることの意味ですが、 もし就職前なら資格を取ることによりそれなりに評価されると思います。 もし既に実務に就いているなら、取得する姿勢は評価しますが、あくまで実力を評価します。 ちなみに私は、OracleDBのシステム開発の現場で、ＤＢエンジニア＆開発責任者をしていました。 多くのエンジニアを抱えて開発してきた上の考えです。 Oracleマスターは持っていません。 （私にとって資格は無意味なのです。話のネタ程度にはなりますが） とはいえ受験勉強すると重要な事が沢山書かれているので実力もＵＰしますね。 研修は受けたことがないのですがどうなんでしょうね。 試験で点を採るための勉強という感じで実力とは違う印象を受けます。 ゴールドを考えているならそれなりの実力も必要ですから、 その下までは独学で取得できるよう勉強してみてはどうでしょう？ （研修だけでゴールドまで駆け上がれるほど甘くないと思いますよ）
「vb6」っていうのがよく分らないですね。管理者権限とかが使えないってことでしょうか？ 以下は、オーソドックスな方法です。 「SQL*Loader」 http://www.thinkit.co.jp/free/article/0707/9/7/ 「Oracle Migration Workbench」 http://otndnld.oracle.co.jp/easy/access/shift_ma … 参考URL：http://otn.oracle.co.jp/software/tech/migration/
３つのキーで集約したら良いのでは内のでしょうか。 select A.SEIHIN_CD, A.KOJO_CD, A.CAL_DATE, A.KEIKAKU , B.CAL_WEEK, B.CAL_KBN from ( selet SEIHIN_CD , KOJO_CD , CAL_DATE , sum( decode( A.YMD, B.CAL_DATE, A.KEIKAKU,0 ) ) as KEIKAKU from T_SEISAN_KEIKAKU A group by SEIHIN_CD , KOJO_CD , CAL_DATE ) , M_00_CALENDER B
サブクエリを使えばできると思います。 ただ、売り上げが同じ場合には、複数表示されると思います。 select 店舗CD,項目CD,売上 from T_詳細データ where (店舗CD,売上) in (select 店舗CD,max(売上) from T_詳細データ group by 店舗CD) これで上手くいくと思いますが、いかがでしょうか？
私も choconamacream さんと同じく以下の問題集を使っていました。 正解した問題も不正解だった問題も解答をじっくり読むことで 理解が深まりました。 いい問題集だと思います。 ORACLE MASTER Bronze SQL基礎I 模擬問題集 ​http://www.ascii.co.jp/books/books/detail/4-7561 … 私の場合、勉強の順序としては 黒本をざっと読む →上記の問題集で理解を深める →@ITにて最終チェック でした。 黒本は冗長な部分や解説が甘い部分が多かったように感じました。 自分の同僚も、「黒本だけでは合格できない。」 と言っていました。 >仕事もあるので毎日２時間ほどしか時間もとれません。 自分は通勤時間などを有効活用したりして勉強時間を作りました。 なかなか難しいとは思いますが、頑張ってください！
レコードで使っているバイト数を数えるのでしたら、 ALL_TABLESのAVG_ROW_LEN（行の平均のバイト長）と 各テーブルの行数をかけたら、それっぽい数字になるかなと思います。 もっとも、オブジェクト本体の使用している容量はぜんぜんわかりわかりませんが。
インストールは出来るけどライセンス違反になります。 CD/Media Packに一通り入ってます。 「複数製品プログラムが内包されていますが、それぞれの使用にあたっては、別途正式ライセンス契約が必要(ただし、正式ライセンス以外の製品に関しては、一か月間のみ試使用が可能)」 http://www.oracle.co.jp/products/price/cdpack.html CDキーとかライセンス数入れる画面もみたことありません。 Application Serverもインストールできちゃいます。 （試用過ぎての利用はライセンス違反）
↓のレスに追加で。 >ccc(ddd), これテーブルの項目名を指定するところですよね。 そもそも括弧自体が使えない気がします。
>エラー内容：接続できません。ORA-12154:TNS:接続された接続識別子を解決できませでした >A_OSE.OpenDatabase("EMP", "SCOTT/tiger", 0) "EMP"ここの指定はあなたが登録したTNSNAMES.ORAの接続識別子なですが 本当にEMPであってますか。 これってテーブル名じゃないのですか？ TNSNAMES.ORAの設定を補足願います。
集約項目毎の件数と、総合計を取りたいのであれば、 単純にとって来れば良いと思うのですが・・・。 select A, B, count(*) from tableC group by A, B union select '', '', count(*) from tableC
こんばんは。 ZAA.SQLにはCREATE TABLE文を記述しているのですよね？ それなら、 sqlPlusで、@ フルパスファイル名でいけますよ！ ちなみに、@の代わりにstartでもOKです。 例)@ C:\sql_files\ZAA.SQL 間違っていたら、すみません。
こんにちは。 質問者さんは、どういった方法の回答がご希望なのでしょうか？ 少なくとも、Oracle でバージョンを認識する方法は、 ＃１さんが書いた方法が最も簡単な方法です。 それで満足できないのなら、インストーラを起動して、 各製品のバージョンを確認してください。
＃２です。 ちょっと勘違いしてました。 UNION ALL は、共通的に使える書き方ですから、 MySQL と書いてしまいましたが、Oracle でも十分に使えます。
こんにちは。 良い勉強方法ですが、試験でどこがまずかったのか、 というのを知らずに勉強してもダメだと思います。 練習問題ではパーフェクトに近い成績が得られても、 たぶん、出題ポイントがまったく違うところだったのでしょう。 ですので、どういうところから出題されたのか、 というのを理解されてから、その分野を徹底的に理解するのが 良いと思います。 何事も暗記より理解です。
(1)FORループなどで回して出力。 (2)COUNTメソッド 　「PL/SQLユーザーガイドおよびリファレンス」に普通に記載されています (3)select ～ into ～ と書いてますか？ それならありえるのかな!? 　BEGIN～ENDブロックで囲って、EXCEPTION WHEN NO_DATA_FOUND トラップしてあげると良いです。 ※個人的には PL/SQLで配列を使用するのは嫌いです。 画面からのデータ受取のシチュエーションですかね。。。
メモリをバカ食いするからなのでは？ 大量にデータを扱う際にコレクションに詰め込むのはあまりいただけませんね。テーブル設計に不良があるか、プログラムに問題があると思われます。 せっかくＤＢに親和性が高い言語なのですから、配列を多用するプログラミングをやめてみては？
こんにちは。 ＰＨＰの参考書などは読まれましたか？ ＰＨＰからOracleに接続して、ページを構築してから、 クライアントに返す、という流れになるかと思います。 専門家の見解として、質問者さんのスキルは初心レベル、 と伺えます。 何もわからないのに参考サイトで学習されるよりも、 Ｗｅｂ関係の一般常識的なスキルを学ばれるのが先決です。 キーワードは「３階層」「Webサービス」です。 参考書なら山ほど散らばっていますから、質問者さんが 理解しやすい本を選ばれるのが良いです。
ローカルでも使用可能です(実際使用しています) OracleDBConsole(サービス名)のWindowsサービスは起動していますか？
こんなのありますよ。 参考URL：http://www.oracle.co.jp/direct/recommendation/a2 …
わからないながらでの回答ですいません。 経験上ですがCPUの違いによる恩恵はそれほど大きくないと思います。 どちらかといえばディスク周りにお金をかけたほうが恩恵は大きいかと。 蛇足ですが、マシンやＤＢベンダーによるトランザクション性能(TPC-C)に載っていれば、ざっくりとした比較はできます。 http://www.tpc.org/default.asp
＞上記となり、恐らくoracleがメモリ使用量を圧迫し、Swap領域も逼迫した場合にサーバ処理の 応答が無くなると推測しています。 このような状況になってしまうSQL処理があるのでしょうか？ だとしたらそのSQLのチューニングを行うのがベストだと思います。 OSからの監視ツールではなく、oracleの監視ツール（TOPSESSION等） を使用してみてはどうでしょうか。
こんにちわ。 > 毎日決まった時間に同じＳＱＬを実施したい 実行するSQL をStored Procedure化して、DBMS_JOB パッケージを使って JOB 登録して下さい。 10g の場合、DBMS_SCHEDULER パッケージを使えば、Stored Procedure化 しなくても大丈夫です。 ※ JOB_QUEUE_PROCESSES を1以上に設定しておく事をお忘れなく
dual表から１件０を取得し、集計したらどうでしょう。 select A.COL, sum( nvl( CNT, 0 ) ) from ( select COL_2 COL , count( COL_1 ) CNT from TBL where COL_2 = 'hoge' group by COL_2 union select 'hoge' COL , 0 CNT from dual ) A group by A.COL
サーバ管理者としての経験は全くないので、あくまでソフト開発の観点から回答しておきます。 >一応SELECT文による必要なデータの参照などを課題として考えているのですが、そのほかALTER TABLE～. CREATE TABLE～.なども必要では無いか・・・と考えています。 >権限やプロシージャも知っておくに越したことは無いのですが、初心者が学ぶには難しいかな…と感じてます。 目安としてはやはり「Bronze SQL基礎Ｉ」ですね。きちんと勉強していれば短期間で必ず合格出来ますので、可能でしたら受験の方もお薦めします。 認定制度 Bronze SQL基礎I http://education.oracle.com/pls/web_prod-plq-dad … 上記試験の出題範囲とは別に、実務経験のない方々には是非とも以下の事柄もお薦めします。 ・実際に、自分の開発環境にフリーのRDBMS(MySQLやPostgreSQLなど。)をインストールする。 ・データベースやテーブルを一つでもいいから、自分で一から作成してみる。 ・データ量がごく僅かでもいいから（ほんの２、３行でもいい。）、INSERTやSELECT,UPDATE,DELETEなどを実行してみる。 なぜ、上記の事柄が重要かというと、実際に質問者さんが開発の現場に入った時には、もう既に先輩の方々が効率的にDB設計などをされていまして、テーブルの作成などもスクリプトファイル（sqlファイルなど。）を使ってまとめて一気に実行、ということになります。ただ、それだとDBサーバ内でデータがどのように処理されているのかとかが、なかなか掴めないように思います。（それに、いきなり新人さんなどに対して、お客様のデータとも密接に繋がりのあるテーブルの定義とかを任されることは、まず有り得ないと思いますので。） データの量に関しては、本当にごく僅かでもいいですので、実際に自分でいろいろと試してみることです。自宅の環境下では、もし間違ってデータベースやテーブルなどを削除してしまったとしても、また同じように作成し直せばいいわけであって、誰にも迷惑は掛けないですよね。 DMLの高度なテクニックに関しても、始めのうちはそんなに肩肘張らなくてもいいと思います。実際の開発現場では試験とは違いますので、以下のようなリファレンスブックを一冊用意しておき、分らなくなった時ごとにいろいろと調べながら（ここの過去ログとか・・）進めていく、といった感じですね。 ＳＱＬハンドブック　第２版 http://www.sbcr.jp/books/products/detail.asp?sku … ポケットリファレンス シリーズ 改訂新版 SQL ポケットリファレンス http://www.gihyo.co.jp/books/syoseki.php/4-7741- …
またまたすみません。 こころあたりはあとこれ位です。 1）ドライバーのインストールがうまくいっていない。 2）複数のバージョンのORACLEクライアントがインストールされていて、意図していないSQLNET、ORACLE_HOME（TNSNAMES.ORAも意図していないORACLE_HOMEのものが有効になります）でつながっている。 あと、 「SQL パススルー クエリ」で目的の表が見れるようでしたら、 リンクテーブルでなく、クエリを表扱いにするという手もあります。 お役に立てずすみません。
多対一リレーションシップが設定された 3 つ以上のテーブルを基にするクエリーは更新不可 どうしても更新したい場合の対処法 クエリのプロパティ　"RecordSetType/レコードセット" に [Dynaset(Inconsistent Updates)/ダイナセット (矛盾を許す)] が設定されている場合、データを更新することができます。 当然　矛盾が出てデータがおかしくなることがありうることを承知の上で お使いください。 詳しくはAccess　ヘルプで　クエリーからのデータ更新について を検索して　内容をよくお読みください。 出来るパターンと出来ないパターンが詳しく解説されています。 RecordsetType　のDynaset Snapshot についても上記理解の為、補足で読まれることを お勧めします。
こんにちは。 私も同じことではまったことがあります。 結論から申しますと、ＳＱＬを実行するときにビューが 展開されて実行されますが、このビューのＳＱＬ文が、 全レコードを参照するようなＳＱＬ文になっています。 Oracleでは、得られる結果が全レコードに対し５％（確か）以内 じゃないと、インデックスが働きません。 ５％超の結果が得られるような場合は全表捜索が行われ、 これがパフォーマンス低下を招きます。 ですので、パフォーマンスチューニングを行う場合、 ビューを一切使わずに、長く汚くなっても構いませんので、 シンプルなＳＱＬ文だけで構成されるのが良いです。 また、どうしても１本で片付かない、というような場合であれば、 PL/SQL を視野にいれるのが良いです。
エクスポートコマンド「Exp(ort)」でdumpファイル作成が最も一般的と思います。
"ODBC ORA-12154"で検索してみました。 OBDC関係で結構問題ありのようですね。 いくつかの回答で、”ORACLE_HOMEを設定すると・・・”とあります。 ODBCなので、環境変数が必要になるみたいですね。 環境変数の確認をし、未設定なら設定してみてはいかかでしょうか？ Oracle１０ｇの環境がないので、当方では確認できないのですが、 ＮＥＴ８での解決方法で”ORACLE_HOME”がありましたので、 回答というかアドバイスをさせて頂きました。 一応、OracleのOTNのURLを貼り付けでおきます。 参考URL：http://otn.oracle.co.jp/cgi-bin/non/msgview_r.cg …
おはようございます！ SELECT a,b,COUNT(c) count FROM テーブル名 GROUP BY A,B ORDER BY A,B で取れると思いますよ！ 結果は A　B　COUNT ---------------- 1　10　3 1　20　4
こんにちは！ きっと、結合条件にしているcdがr_hyoで重複しているからだと 思いますよ！ 間違っていたら、ごめんなさい・・・ 実現したいSQLですが、 (1)まず、左表、右表ともにあるレコードを抽出する。 (2)(1)以外の右表のレコードが左表に存在しないレコードになる。 ということで、いいんですか？ それでしたら↓ select * from r_hyo where cd not in (select l.cd from l_hyo l left join r_hyo r on l.cd = r.cd ) で取得できると思います！ 参考URL：http://biz.rivus.jp/technote507038.html
データファイルのサイズは、ＯＳで許されている最大のファイルサイズにとどめて、それを超えないようにすると良いです。 表領域はデータファイルを何本か使用して作成すると良いでしょう。 データファイルのサイズを、ＯＳで許されている最大のファイルサイズにとどめることで、ファイル単位でのバックアップを行うときにも融通が利きやすいメリットがあります。
オラクル標準のツールにＬＯＧＭＩＮＥＲというものがあります。 これは、アーカイブログを解析するツールですが、アーカイブログ運用しているなら使えます。
他で誰かがアクセスしていれば、ALTER TABLEが拒否されるはずです。 テストですが、２つのセッションを立ち上げ・・ １つ目のセッションで、SELECT * FROM XXX rownum=1 for update 次に、２つ目のセッションで、ALTER TABLE XXX REANME TO YYY をすれば、エラー（ORA-54）になることが確認できます。
他にもTimeStamp型などもAccessから参照更新できません。 ＳＱＬ文にて参照更新する方法を模索するしかありません。
こんにちは。 ORACLE でテーブルやカラム、インデックスなどの情報は、 すべてビューから検索することができます。 ALL_TABLES ビュー、USER_TABLES ビュー、 ALL_TAB_COLUMNS ビュー、USER_TAB_COLUMNS ビュー、 ALL_INDEXES ビュー、USER_INDEXES ビュー など活用してみてください。
こんにちは。 ALTER TABLE 文でテーブルの構造を変更することができます。
話の繋がりが見えないのですが・・ 質問に書いてあるSQLとは、大きく異なるSQLを使っていて、他の要素に問題があったということでしょうか？ それとも、KOJINというのがビューであり、ビューの構成要素に問題があったということでしょうか？ 質問は過不足無く書かないと。 （過不足無く書いても解決できるとは限りませんけどね） ２０分で充分な速度あれば良いのですが、SQLの動作速度を気にする場合、 実行計画を見て、適正なアクセスをしているかを確認しなければ、 どこに問題があるのか解りません。 例えば、 >SELYMD側を、元号(SELYMD_WGEN)と和暦年月日(SELYMD_WDATE)に分解した上で、 >where WGEN < SELYMD_WGEN or (WGEN = SELYMD_WGEN and WDATE < SELYMD_WDATE) で、KOJIN_SEL_IDXという索引が使われているか、全表検索しているかで、 大きく速度が異なります。 KOJIN_SEL_IDXという索引が使われていないとすれば、如何にしたら使われるかを 模索することになります。
スキーマsysやpublicに入っている表やビューのことですよ。
こんにちは。 PL/SQLで、OUT を指定した引数を設定した場合の挙動についてですが、 実行に当たっては、呼び出し元で、PL/SQL の引数用の変数やオブジェクトを 用意しているかと思います。 ファンクションということですので、ファンクションの戻り値がありますが、 もちろん、戻り値を格納するための変数やオブジェクトも用意されている かと思います。 OUT を指定した引数は、ファンクション内で値をセットしますが、 その値を呼び出し元に通知する役割をしています。 ですので、例えばファンクションの戻り値とは別に何らかの情報が 欲しい場合に使用します。 PL/SQLの書き方については、OTNのドキュメントを読まれるのが良いです。 あと、簡単なゴミプログラムをコーディングして動かしてみて、 やってみたけど動かない、という状態で質問すると、 丸投げ感のない質問になりますよ。
エクスポートであれば中断しても特に問題はありません。 CTRL+Cで止めれば良いかと。
追加の質問の意味が理解できませんが・・ 製品コード　取扱店　その他の項目 001 　　　　あああ　アアア 001 　　　　いいい　イ 001 　　　　ううう　ウ を 製品コード　店１　　店２　　店３　　その他の項目 001 　　　　あああ　いいい　ううう　○○○ にしたいのでしょうか？ 集約した検索結果に、いずれか１つのレコードから情報を付加したいのであれば、 そのレコードを選択する基準さえはっきりすれば、１つのSQLで結合なしに 答えを出すことは可能かと思います。 （どのレコードでも良いというのも基準の一つですけど・・） ただ、今回のSQLは、クロス集計というより横展開しているだけの処理なので、 初めから、アプリケーション側で横展開すれば良いだけの話です、オラクルで横展開する合理性は感じません。 >どちらが良いと思われますか？ (3)アプリケーションで集約する。 (4)１つのSQLで完全な横展開結果と導き出す。 いずれかを選択します。（私なら）
こんにちは。 インデックスが意図した形で機能してくれない、 ということなんですが、オラクルでインデックスが機能しない ケースというのはご存知でしょうか？ オラクルでは全レコード数の確か５％程度の結果が得られる場合に、 インデックス検索を行うというそうです。 つまり、極端な話ですと、１万件の中から9999件のレコードを 取得するのに、いちいちインデックスを使うよりも、 テーブルを総なめしたほうが高速である、ということです。 オラクルはこれを自動的に判断しています。 提示された例で考えると、テーブル内には１万社分のレコードが 登録されていて、テーブルに存在しないキーを条件につけた場合、 ということでの相談なっていますが、ただ単にレコードの有無だけを 判断するのでしたら、COUNT(キー項目)をとるのが良いと思います。 「＊」を使うと、カーソルを使用したり、不要なフィールドへの アクセスが発生し、パフォーマンス的にも悪影響を及ぼします。 ですので、キー項目のカウントを取ることによって、 全体のパフォーマンスは向上すると思いますよ。 ＃１さんへの回答にありますように、索引の全体検索となっている だけですと、それが現状の最高パフォーマンスといえますが、 全表検索が走っているようであれば、そのテーブルの設計に問題が あるようにも感じられます。 現状１万件程度のデータで、どれくらいのパフォーマンスを発揮して いるのでしょうか？ 私も色々とチューニングを経験してきましたけど、最もボトルネックが 潜んでいるといえるのが、実は実行する SQL 文だったりします。 あと最後にアドバイスですが、ビューは SQL 文を見やすくはしますが、 落とし穴になりがちです。 実際、SQL を実行した際には最初に実行されるのがビューの部分です。 ここで巨大な２つのテーブルを JOIN しているようなら、 そこがボトルネックになります。 ２つのテーブルを、その段階で全表検索します。
おさっしのとおり、断片化が原因と思います。 直感的に、ですが、indexのフラグメンテーションは性能がだいぶ劣化した記憶があります。 断片化についてはこのあたりが参考になります。 http://biz.rivus.jp/technote507131.html http://biz.rivus.jp/technote507020.html 今後は気が向いた時にTruncateしてデータを入れなおしてあげるときれいに整頓されますよ。
こんにちわ。 > 論理演算はできるでしょうか？ 論理積であれば、bitand ファンクションが使えます。 詳細は、SQL リファレンスを確認して下さい。
以下の構文で、コメントがつけられるようですよ。 私も自分でOracleテーブルを作った事はなく、「Oracle用に書かれたCreateTable文」に書いてあって「なるほど」と思っただけなのですが。 書式は以下のとおりです。 COMMENT ON COLUMN テーブル名.カラム名 IS 'コメント文' 参考になれば幸いです。
test.sqlのあるディレクトリに移動し、sqlplusで入った後 @test.sql; と実行すればファイルの中のSQL文を流してくれます。 sqlplusのコマンドの後ろに付けて、 sqlplus ログイン/パス @test.sql でも可能だったかな。
http://otndnld.oracle.co.jp/document/products/or … の、「バックアップ保存方針の構成」を熟読してみてください。
ORA-12523のエラーはリスナーがインスタンスを見つけられないよう です。 tnsnames.oraには >(SERVICE_NAME = orcl) とありますが、これってSIDですよね？ サービス名に書き換えるかSID指定に書き換えてみてはどうでしょう？
No.1です。 Bronze必須でしたか。 10gからかな？ 会社の同僚からは特にそのような話はなかったんですが。 リンク先のPDFはP4に書いてますね・ うーん。
国内でオラクルのサポートを受けられるかどうかは知りませんが・・ オラクルのドキュメント等が日本語版として用意されるだけで、インストールするソフトウエアには 日英（日米）の区別はありません。 英語版OSに国内購入のオラクルをインストールして利用可能です。 ただし、データとして日本語を取り扱う場合は、それなりの環境設定をする必要があります。
こんにちわ。 > ※上記のように記述すると、実行ではエラーが発生しないのですが、 > 取得したい結果が返ってきません。 以下のようにして見て下さい。 カーソル宣言文： CURSOR TBL_AAA_CUR(psBBB varchar2) IS SELECT * FROM TBL_AAA WHERE BBB = psBBB; カーソルオープン時 OPEN TBL_AAA_CUR(psCODE); 又は FOR vREC in TBL_AAA_CUR(psCODE) LOOP ※ カーソル FOR LOOP の中でのみ使用するのであれば 　 TBL_AAA_REC の宣言は不要です。念のため
URLが見つかりません。 SQL%ROWCOUNT でいいんじゃないでしょうか。 参考URL：http://634.ayumu-baby.com/plsql/plsql_tips_rowco …
統計情報を取得するなら、やはりselectの前だと思います。 ただ、ご質問の「ワークテーブル」が該当のプログラムのみでアクセスされるものなら、統計情報を取らないで運用するほうがよいかもしれません。 または、明示的に統計情報を取らないで「動的サンプリング」（select実行時にOracleが自分ですこしだけアナライズしてみる）の機能を利用させることも揮発性の高いテーブルには有効と思います。 動的サンプリングは9iR2からの機能だったと思います。(自分は利用したことがありませんが・・）
使い方も発見。 http://otndnld.oracle.co.jp/easy/access/shift_ma …
あ、今IEでアクセスしたら繋がらなかった。
COLUMN NAME FORMAT A5　？
REPLACE関数を使うのも手かと SELECT REPLACE('　あいうえお　','　',NULL) FROM DUAL; →全角スペースをNULLに置き換え 文字列の中間にある全角スペースも無くなってしまいますけどね。
ちょっとつっけんどんな回答になって恐縮ですが、この辺を見てください。 http://biz.rivus.jp/config/system_spfile.html http://biz.rivus.jp/technote507122.html LOG_BUFFER を指定したい場合、記述を追加して再起動します。 ちなみに、ログスイッチの発生頻度も調べて REDOログ周りのチューニングを行ったほうがいいですよ。
こんばんは。 どのようなチューニングを行ったのかはわかりませんが、 質問文から推測いたしますと、ＳＱＬ文のチューニング程度、と伺えます。 恐らく、投入するＳＱＬ文は催促と思います。 デバッグ方法ですけど、実行するＳＱＬ文を SQL Plus などで実行してみては どうでしょうか？ 即座にレスポンスが得られるのならオラクル側には問題ないと思います。 しかし、その段階でレスポンスに影響が出るのならば、 インデックスが設定されていない、など疑うべき点を徹底的につぶしていく しか方法は無いと思います。 原因がどこにあるのか、という点ですが、 アプリに問題があるのか、ミドルウェアに問題があるのか、 データベースに問題があるのか、という視点で、 プログラムから実行、という考えを捨てて、考えてみてください。 ボトルネックがどこに存在しているのか、という部分を調べます。 それによって、どこを調べなければいけないのか、という部分を整理する ことができます。 あと、テスト環境と本番環境でのハードウェアの違いなども注目する必要があります。 例えば、テスト環境（＝開発環境？）と本番環境とで搭載するメモリの容量が 異なる、というような場合はキャッシュ関係でも差が出てくるかもしれません。 開発環境と本番環境とでのハードウェアの違い、ソフトウェアの違い、 オラクルの設定値の違い、などなど総当りで調べるのも手段の１つです。 何か心当たりなどはございますでしょうか？
今手元にOracle環境がないため間違っていたらスイマセン。 SELECT A.NO ,A.NAME ,SUM(B.TEN) SUMTEN FROM T1 A, T2 B WHERE A.NO = B.NO GROUP BY A.NO, A.NAME ORDER BY SUMTEN DESC COUNT関数ではなくSUM関数でないとダメだと思います。 また、T1とT2も等価結合して下さい。 自信がないのが「ORDER BY」の所ですが列別名でやっていますがダメかも。「3」で大丈夫かも。 もしダメならセンス０な感じですが強引にインラインビューを用いて SELECT NO ,NAME ,SUMTEN FROM (SELECT A.NO ,A.NAME ,SUM(B.TEN) SUMTEN FROM T1 A, T2 B WHERE A.NO = B.NO ) GROUP BY NO, NAME ORDER BY SUMTEN DESC こんな感じで。。。（ここまでする必要ないよなぁ）
クライアント側の tnsnames.ora の接続先が、サーバ側の listener.ora に書いてないとつながらないのでは。
こんばんは。 #1さんもおっしゃるように、 SELECT ～ INTO 変数 FROM ～ という構文については調べましたでしょうか？ 意味としては、得られた結果を INTO 以降に記した 変数に格納する、というものです。 もし、２件以上の結果を得るのでしたら、 この場合はカーソルを使用します。
> RMANでリカバリカタログはターゲットDBとは別DBが推奨になってます > が、ターゲットDBサーバ内でターゲットDBとは別にDBを作成すれば？ > ってことなのでしょうか？ はい。同一サーバ上であろうと、とりあえず別の DB を作成すれば OK です。 <-- ベスト 別サーバ > 同一サーバ別ディスク > 同一サーバ同一ディスク > Oracleで１サーバ内に２つDBが存在するのってどうってことないことな > のでしょうか？ リソースがあれば問題ありません。１サーバ内に複数の DB を作成しても追加ライセンスは発生しません。実際、業務に応じて複数の DB を１つのサーバ上で作成しているケースもあります。 > また、別サーバにリカバリカタログを作成するとしたら、 > リカバリカタログのためだけにOracleをインストールする必要があるっ > てことでしょうか？ > ということはライセンス料とかがまた追加されるってことでしょうか？ > それって普通なのでしょうか？ データ損失のリスクを低減させるためには、それなりのお金がかかるものです (別サーバにすれば認識されているように追加ライセンスが発生します)。RMAN の場合、ターゲット DB と カタログ DB の両方が破損してしまえば復旧できないわけですから、別サーバに Oracle をインストールしてカタログ DB だけを作成する場合もあります。 ただ、それはシステム要件にもよると思います。中小規模の案件でそれほどコストを掛けられないのであれば、同一サーバにカタログ DB を作成し、ターゲット DB とカタログ DB のバックアップをちゃんと取得しておくことで十分ではないかと思います。 もちろん、お客さんの理解を得ておく必要はあると思いますが・・・。
オラクルのノウハウ本は結構出ていて、私も立ち読みすることが時々あるものの、なかなか良書と言える本がないのが現状だと思います。 ただ、No.1 の joih さんが随分と出してくださっているようなので、その他のもので・・・書籍ではないのですが。 ■Oracle9i 物理設計 http://otn.oracle.co.jp/skillup/oracle9i/ 連載が完結していて非常に良くまとまっています。 それでいて、物理設計に必要な事項はほとんど網羅されていると思います。 ■Oracleデータベース 性能対策機能 ～ StatspackとDiagnostics Packを使いこなす ～ http://otn.oracle.co.jp/skillup/stats_diag/index … Statspack についての記述がされています。 Oracle10g からは AWR、ADDM という機能が搭載されているものの、EE オプションなので、Oracle10g でも Statspack はボトルネックやパラメータの問題を探るのには最も効率的なツールの１つだと思います。 パラメータの問題、SQL の問題などの解決は、この Statspack のレポートをいかに活用するかが重要だと思います。(もちろんそれだけではダメですが・・・) ■Oracle SQLチューニング講座 http://www.atmarkit.co.jp/fdb/index/index-db.htm … ハイ・パフォーマンスを実現するための物理設計と SQL 文のチューニングに関する記述があります。その上で必要となる実行計画や SQL トレースの取得方法と見方は非常に参考になると思います。 ■オラクルマスター教科書 Gold Oracle9i Database 【パフォーマンス・チューニング】編 http://www.amazon.co.jp/%E3%82%AA%E3%83%A9%E3%82 … 資格を取得するつもりはなくても、パラメータの設定について良くまとまっているので少し値は張りますがお勧めです。ちなみに、Oracle10g 向けの対策本はお薦めできません。
COLUMN xxx FORMAT yyyで列ごとのフォーマットを指定する 必要があると思います。詳しくはSQL*Plusのマニュアルを 参照下さい。
平行 → 並行 シーケンス → ループ 子SP内＝子ストアドプロシージャ内？ SPの非同期実行は無理だったような？ 重いロジックの内容にもよるのですが、重い原因がテーブルアクセスにあるのであれば、カーソルによる１件読み出しと１件書き込みをやめて、全件を対象として同じ処理を実施後、ＷＫテーブルへ格納、次の処理も同様に実施後、ＷＫテーブルへ格納としたほうが効率が良い場合がありますのでご参考まで。 また、データの演算、判定処理、項目数が多いなどの場合、バルクフェッチなどを利用したり、いったんメモリ（配列）へ格納すると効率が良くなる場合がありますが、メモリの確保と解放を１件ずつ行うと遅かったり(確保数を固定にすると良い)、資源を圧迫する場合がありますので注意が必要です。 どのような重いロジックかによって解決方法が違うのでそれを再掲してみてはどうでしょうか。
ごめんなさい、わかりません。 なんらかのイベントというかトリガーというかアクションによって、テンポラリ表領域に使用したテーブルを削除するように作成するしかないようですね。定期的に削除するジョブを走らせておくとか。 PRESERVE ROWSを指定して作成した場合、切捨てはするけれどDROP はしないですね。「CREATE GLOBAL TEMPORARY TABLE ～ as select * from」 だと、DROPしないといけないので使えませんね。
デフォルト接続先などの情報は、レジストリに持っているので、ファイルだけ持ってきてもダメですね。 オラクル関係のレジストリ情報も連れてくれば解決する話です。
こんばんは。 ご質問にちゃんと回答するとなると、 結構長ーく書かなくてはならなそうなので、 参考サイトで失礼いたしますね（笑） そうですよね、確かに最初の頃分りにくいと思いました私も。 オラクル兄弟（フレンドリーで分り易かったです） http://www4.ocn.ne.jp/~notfound/oracle/book.html 受験対策でしたらこちらも良さそうでしたよ。 http://www.34homepage.jp/html/oracle/ http://park14.wakwak.com/~ky1999/ORA/index.htm
こんな方法もあります。 select 県コード, 　　　substrb(max(decode(コード,2000,2,3000,1,0) 　　　　　　　　　　|| コード || ' ' || 商品名 || ' ' || 単価),2, 　　　　　　　lengthb(max(decode(コード,2000,2,3000,1,0) 　　　　　　　　　　　　　　|| コード || 商品名 || 単価)) + 1) 　　　　　　　　　　　　　　　　　　　　　　　"コード 商品名 単価" from tbl group by 県コード; 先頭のdecode文（1桁）を非表示にするためsubstrbを使用しています。 lengthbの+1は表示データから半角スペース2つの連結を取り除いたものを 対象にしているため、decode桁数の差分(-1)に2が加えられ+1となります。 <実行例> 県 -- コード 商品名 単価 -------------------------------------------------------------------------------- 01 2000 カメラ（日本製） 30000 02 3000 カメラ（アメリカ製） 40000
既に溜まってしまったファイルの削除方法について補足します。 rm (del) で削除しても問題がないのですが、ただ del しただけではカタログとの整合性がとれないので、以下のようにしてカタログと整合性を取ってください。 RMAN> crosscheck archive log all; <== OS 上で削除されたアーカイブ・ログのステータスが expired になる RMAN> delete expired; <== ステータスが expired のアーカイブ・ログをカタログから削除する つまり、OS コマンドでファイルの削除→上記コマンドの実行、です。
> 1) 再利用可能になると、再利用可能になった分だけ、エンタープライズマ > ネージャのデータベース → サービス名 → 記憶域 → 表領域 を参照した時 > の、使用量、使用率が減る・・・と、言う解釈で間違いないでしょうか？ 間違いあります。OEM で確認できる使用率は、一時ファイルの先頭部分から「１度以上使用されたことがある領域」のうちの最も後ろにある部分までを使用していると仮定して使用率を計算しています。ここで、「１度以上使用されたことがある領域」には「現在使用されている領域」＋「再利用可能な領域」が含まれています。従って、処理の終了やインスタンスの再起動によって再利用可能になっても、OEM から見た一時表領域の使用率が減少するようなことはありません。 > 検証環境で、再起動を行いこの値を確認してみたのですが、再起動前と > 再起動後で値の変化がありませんでした。 はい、そうなります。 例えば、以下の例だと、実際に使用しているのは３／１０なので、空き領域は７０％です。でも、これをＯＥＭから参照すると、９０％となります。(再利用可能な部分も使用しているとみなされる) ＊＊＋＋＋＋＊＋＋－ (凡例)＊：使用中、＋：再利用可能、－：未使用 > 2) また、TEMP領域の自動拡張がOFFになっていた場合で、TEMP領域を使 > 用するような状況が発生した場合、 再利用可能な領域があればそこを使います。ただし、空きがない場合は当然のこと、さらに実際には空きがあっても断片化していて利用できない場合は自動拡張を試みます。ここで、自動拡張できないとなると、ORA-1652 が発生してその SQL 文は失敗に終わります。
こんばんは。 「表領域不足でエラーになった事がある」ということですが、 これは、ある意味では設計ミスと捉えることができます。 １レコードのサイズ、テーブルに格納するデータ件数などなど、 さまざまな要素からおおよそのデータサイズを求めるのですが、 その設計がきちんとされていれば、表領域不足は殆ど起きないと 思います。 ただ、運用中は何があるかわからない、ということで、 大抵の場合は、時限式で実行するプログラムを作成して、 そのプログラムからメールを送る、ということができるかと思います。 Oracle では統計情報を SQL で取得することができますから、 それを時限式で実行するプログラムに組み込めばよいと思います。
1年余り前に一旦、Oracle XEをインストールしたものの、PCのスペックが足らず、すぐにアンインストールした者です。 いろいろ変更があるかも知れませんが、インストールは下記URLのような手順でしたか？ 手順の中で、ユーザ=SYSのパスワードを設定していると思いますが？ http://blog.caperu.secret.jp/?eid=154928 ログイン画面というのが、「データベースへのログイン」のことなら、ユーザ名=SYS、パスワードはインストール時に設定した値だと思います。
- リテンションが失効したものを削除するのであれば、 RMAN> delete expired; ちなみに、リテンションの設定は、 (例１) 多重度を３に設定 RMAN> CONFIGURE RETENTION POLICY TO REDUNDANCY 3; --> delete expired; で３つのバックアップ・セットを残して全て削除されます。 (例２) 保存期間を１４日に設定 RMAN> CONFIGURE RETENTION POLICY TO RECOVERY WINDOW OF 14 DAYS; --> delete expired; で１４日以上前に取得されたバックアップ・セット全て削除されます。 OS 上に存在しないものを削除するのであれば、 RMAN> cross check all; RMAN> delete obsolete; 特定のバックアップ・セットを削除したいのであれば、 RMAN> delete backupset #,#,...; ※"#" は list backup で表示されるバックアップ・セットのID 全てのバックアップ・セットとイメージ・コピーを削除したいのであれば、 RMAN> delete backupset; RMAN> delete copy; 参考URL：http://otndnld.oracle.co.jp/document/products/or …
リカバリ・カタログは RMAN を使用したバックアップに関する情報 (例えばデータ・ファイルを戻す場所など) を格納するリポジトリです。 具体的に可能になる主なことは、 - 制御ファイルを失ったときのリストア・リカバリが確実 (カタログがないと、RMAN で取得したバックアップに関する情報を制御ファイルに格納されますが、その制御ファイルが破損してしまうとどうにもならない場合がある) - 多くのバックアップに関する情報を保存することが可能 (制御ファイルに格納できる情報量には限界があるため) - バックアップ・スクリプトを作成して保存することが可能 - resetlogs 実行前に取得したバックアップ・セットを使用したリストア・リカバリ
スキーマを分ければ宜しいんでは？ シノニムを併用すれば、従来同様のアクセスも出来るので良いと思いますが。
こんばんは。 Explain Plan の方法は非常に役に立ちます。 Oracle の場合、索引を追加したからと言って、 即座にパフォーマンスに反映されるかといえば、 そういうことはなく、索引が必要ないと判断されれば、 全表検索が行われたり、はたまた索引の全体検索が行われるなど、 パフォーマンスに影響を与える悪い面が見られたりします。 これが、Explain Planを使うことによって解決できます。 SQL 中にボトルネックとなる箇所があれば、 そこを重点的に改善するのがいいでしょう。 必要に応じて、SQL のパフォーマンス改善を行うのがいいです。 私の経験上、Oracleのチューニングの肝となるのがSQLのチューニングです。 必ずボトルネックが潜んでいますので、そこを重点的に改善していくといいです。
解決方法は＃１の方が仰るとおりです。 ちなみにこの半角スペースは、変換前の数値がプラスの値であるということです。なので、変換前の値（COUNTなので0以上なのですが…）が、-10だった場合は'A-10'とスペースが付きません。 TO_CHARの仕様ですね。 参考URLの書式(0)の部分が参考になるかと。 参考URL：http://biz.rivus.jp/number_format_element.html
DBは9iですか？(10gならわかるのですが) 10gであれば、表（又は表の依存オブジェクト）をDROPした際の ゴミ（フラッシュバックドロップで使用されるもの）です。 消す場合、以下のコマンドで消してください。 purge recyclebin; 元のオブジェクトが何か知りたい場合は select * from user_recyclebin; で問い合わせてください。
CSEでは設定値をレジストリに保管しています。 regeditにてHKEY_CURRENT_USER\Software\Tsumiki Software\cse自体を削除したらどうでしょうか。 ただ、変更前に設定はエクスポートしておくと安全だと思います。 また、申し訳ありませんがレジストリをいじるので自己責任でお願いします。
Windowsプラットフォームでのデフォルトは、SJISですが、JA16EUCとすることは可能です。 EUCやUTF8のデータベースを作成したければ、DBCAでDBを作成する過程で、キャラクタセットを 指定すればOKです。 ソフトウエアインストールの際のDB作成だとオプション指定が出来ないだけの話です。
＃１です。 基礎だけでの設計は困難がありますね。 単にテーブル設計だけということであればいいのでしょうけど、 Oracle を使うのであれば、表領域の見積もりや、 データ件数に応じたパフォーマンスチューニングなど、 課題は山ほどあるかと思います。 悪い設計の例では、データモデルも確立せずに第三正規形に してしまうことです。データの管理は容易になっても、 パフォーマンスが悪ければ意味がありません。 そういうこともあり、データの関係を示したＥＲ図について、 あとはコード設計などもしっかり学習してから設計するのが 良いでしょうね。 基本情報処理試験の試験範囲にはリレーショナル・データベースの 科目が含まれており、本当に初歩的な用語などを学習することが できます。データベースの知識が乏しいようであれば、まずは、 ここから始めると良いでしょうね。 実際にデータモデルからの設計となると、さらに上のステップと なってしまうので、ソフトウェア開発技術者試験のテキストなどを 参考にされると良いでしょう。 質問者さんのスキルがいかほどなのかが伺えませんが、 質問文中から判断いたしますと殆ど皆無と思われます。 まずはデータベースに関する知識をボトムアップの視点で学び、 設計について学ぶには次のステップでトップダウンの視点で学ぶのが 良いでしょうね。 簡単そうで実は難しいデータベース設計ですが、 頑張ってみてください。
回答ついてないので。 10,000件程度であれば、特に心配する必要はないと思います。 勉強をかねているのであれば、このへんはわかりやすいですね。 http://biz.rivus.jp/pctfree_and_pctused.html http://www.seshop.com/se/edu/shikaku/omo/miti/mi … 個人的な印象としては、PCTFREE や PCTUSED をいじって調整する必要があるテーブルは、 ・項目がたくさんあり、ガンガン更新される ・レコード長がイヤになるほど長いが更新はめったに発生しない など、使用の仕方が偏っているテーブルで件数が非常に多いテーブルだと思います。 領域使用率をいじって性能の違いを測ったことがないので、この考えで間違いないかといわれると自信はありません。 MAXEXTENTS については、デフォルトのままでいいと思います。TABLEサイズを決める際、可能であれば実際にデータを入れてみてそのサイズの 1.2～1.7倍くらいを INITIAL として取るといいと思います。 NEXT は適当で。 PCTINCREASEは 0固定で。
質問から判断するに、SQLの基礎を学んでいる最中のようですね。 ＃１の方が仰る通り、GROUP BYについて学ぶ必要があります。 エラー内容はSELECT句にグループ関数MAXが使用されているのに、NAMAEでグループ化していないからかと思います。 語尾にGROUP BY NAMAEが必要です。 しかし、それだけでは a02 60 b01 10 c01 70 にはなりません。 取得したいデータの条件がイマイチ質問からでは分かりません。 「CLASSごとTENが最も多きいデータを取得する。 対象となる項目は、OKの値が 1 で、かつCLASSの値が 'A','B','C'のいずれかである」ということで宜しいでしょうか？ 質問文の内、確実にご指摘できる箇所として、 CLASS IS ('A', 'B', 'C')　は　CLASS IN ('A', 'B', 'C')のぐらいでしょうか？ 求めている抽出結果を拝見する限り、サブクエリなどの手法が必要になる可能性があります。 失礼ながら質問者様の理解度より難易度が高い記述になるかと思います。 抽出したい内容・条件などを明確に補足していただければと思います。
＃１ですが・・・ select substr('abc_def',1,instr('abc_def','_') - 1) from dual; でないとダメですね。
不正な値を持つデータが存在するのでしょう。 年月日単位での集計が目的なら、DATE型に変換する必要はないので・・ select substr(date1,1,8),count(*) from tableA where date1 >= '20070501000000' group by substr(date1,1,8) で良いかと。 たぶん、不正なデータも含めて表示されるはずですから、結果を確認後、 ゴミ掃除してください。 ゴミが無くなれば、to_dateを利用したSQLでも処理できるはずです。
「SQL*Plusユーザーズガイドおよびリファレンス」なるSQL*Plusのマニュアル内に エラーメッセージが纏められています。
>#2どの >Oracle製品のパッチはサポート契約が無いと取得も適用も出来ませんので注意してください。 間違い。 オラクル社がＣＤパックにパッチを含めて出荷する場合があり、これはサポート契約の有無にかかわらず利用可能。 基本的に、初期出荷後に対応する必要になった新OSや新サービスパックの対応物件や致命的バグの対応等は ＣＤパックに含まれる。 >orazakkunさん ＣＤパックにあるパッチ以外の修正情報や対応物件については、サポート契約がなければ 情報を得ることも利用することも出来ません。 サポート契約者は、守秘義務があるので、パッチの存在有無を公開することすらサポート契約違反になり、 ネット上でパッチに関する話題はタブーです。 仮にパッチが存在するとして・・ パッチの適用状況は、OUIで導入済み製品を確認すれば、PSRの導入状況までは確認できます。 個別パッチの適用状況は、個々のファイル置換を行う手法なので、実行ファイル等の更新時刻でしか 判断できません。 サポート契約があるのであれば、パッチを適用状況については、オラクルのサポート契約先に 確認すれば良いでしょう。どう確認すれば良いか教えてくれると思います。 サポート契約が無く、ＣＤパック内のパッチしかお持ちでなければ、ＣＤパックの内容物と比較することで 判断出来るかと思います。
こんにちわ。 > VERCHAR2の値に「ゴミ」が付加される場合があります。 > いつも起きているわけではないのですが、原因を調査する方法が > あれば教えてください。 多分、前の情報が残っているんだと思います。 Fetch 前に領域を全てゼロクリアするか、T変数を5 に設定して 外部データ型をSTRING 型に強制してはどうでしょうか？
to_char(to_date(:入力値,'yymm'),'yyyymm') で、日付のフォーマット変換は可能です。
私なら、判りやすく・・ ORDERED オプション（FROMに書いたテーブルを左から右へ向かって結合） INDEX オプション　（指定索引の利用を強要） でコントロールすることを試みます。
質問にあるようなテーブルであれば、３表も結合する必要は 無いと思いますが、何か３表使わなければならない理由でも あるのでしょうか？ 質問者さんとしても何も考えてはおられないと思いますが、 どういった SQL をお考えでしょうか？ SELECT 　　T.商品ID FROM 　　( 　　　SELECT 　　　　T2.商品ID, 　　　　MIN(T2.賞味期限), 　　　　T2.価格ID 　　　FROM 　　　　表2 T2 GROUP BY 　　　　T2.商品ID, 　　　　T2.価格ID 　　) T;
下記のSQLでは、重複のある列だけの列値と重複数が得られます。 select 列名,count(*) from 表名 group by 列名 having count(*)>1
昨夜のニュースでやってましたが、この社保庁の作業をＮＴＴデータと日立が請け負ったそうです。 某大臣が「やる！」と言っていても所詮は民間に丸投げってことです。 趣旨違いですがすみません。
集計関数を使うためには、集計をするための条件が必要になります。 それが GROUP BY 句です。この記述がないとエラーになります。 これを前提に SQL をもっとシンプルに見直してみましょう。 すると、＃１さんが挙げられたSQL文が導かれるかと思います。 私の場合、これにキー項目の銘柄に関する部分を追加してみました。 SELECT 　　銘柄, 　　AVG(単価) AS 平均単価, 　　AVG(甘さ) AS 平均甘さ, 　　AVG(ビタミン） AS 平均ビタミン FROM 　　果実 WHERE 　　名称 = 'りんご' GROUP BY 　　銘柄 ORDER BY 　　銘柄; 質問者さんの SQL 中で、"銘柄=(SELECT ～"という書き方を されていますが、こういう書き方も間違いです。 正しくは、"銘柄 IN (SELECT ～"という書き方になります。 細かな点ではありますが、もう少し SQL について学習されると よりミスの少ない SQL 文が作れると思います。 あと、＃１さんへのお礼中で、AS～の記述が余計であるか、 ということが記されていますが、これはまったく関係ありません ただの列名のエイリアス（別名）に過ぎませんので、 これが構文エラーとなることは全角スペースが途中に割り込まない 限りはあり得ません。
１冊のマニュアルになるボリュームがあって色々書かれているので 開発者ガイドを見てください。 「アプリケーション開発者ガイド- ラージ・オブジェクト」です 個人的には設計段階でLOBは使用しないように最大限粘っていると思います。 参考URL：http://otndnld.oracle.co.jp/document/products/or …
データ属性が日付型(data型)であれば、歴の変換や加減算は簡単です。 to_char( to_date('1803','yymm','nls_calendar = ''Japanese　Imperial''') - interval '1' year, 'yymm','nls_calendar = ''Japanese Imperial''');
単純にFROM句に書いてもエラーになるので、動的SQLでやる方法ですかね。 SQL文を文字列として格納する変数を用意して、その文字列にFROM句が入ってる文字列を連結します。 その文字列をEXECUTE IMMEDIATEで実行すればできると思います。 配列の場合は、配列のどの要素がしっかりと明記してください。 例） VAR_TEST VARCHAR2(10); VAR_SQL VARCHAR2(1000); VAR_TEST := 'TABLE_A'; VAR_SQL := NULL; VAR_SQL := 'SELECT * FROM ' || VAR_TEST; EXECUTE IMMEDIATE(VAR_SQL); このままだと、SELECT文を実行するだけなので、INSERT文などに応用するなどしてみてください。 カーソルを動的にする場合はちょっとめんどくさいです。 その場合は、「カーソル　動的」などで検索してみてください。 頑張ってください。
端末台数と同時処理要求が多い場合、１個のディスパッチャでは処理しきれない場合があります。 複数にすることで同時処理要求が多い場合でもサーバプロセスへの受け渡しに対する待ちが少なくなるのがメリットだと思います。 もちろん、１個のディスパッチャでも十分な場合もあります。
>パススルークエリでも小細工が必要になるのでしょうか？ ACCESS-VBA側としては、パススルークエリを使って、 select execPROC('hogehoge') from dual; のように書いて、オラクル側ストアドファンクション(execPROC)で 動的SQL呼びだしを使って、第一パラメータに指定されたプロシジャを 実行し、結果(成/否)をファンクション(execPROC)の戻り値とすることは 可能でしょう。 これは、まともな対応とも思えず、小細工の一例かと思います。
#1です やっぱテストしないとダメですね テーブル作って試しました select value , sum(amount) from (select a.CODE CODE, nvl(b.value2,a.value ) value, a.AMOUNT AMOUNT from 明細データ a, 変換テーブル b where a.value = b.value1(+)) group by value
SQL99における、共通表式 WITH句。 http://www.atmarkit.co.jp/fnetwork/tokusyuu/01sq … が判りやすい。 今回のケースは、CUBEが最適です。 ただし、CUBEを使わなくても、発想の転換で、 select キー1, キー2, sum(金額) from ( 　select X,decode(X,1,A.キー1,2,null,3,A.キー1,null) キー1, 　　　　 decode(X,1,A.キー2,2,A.キー2,null) キー2, A.金額 　　from 　　　(select * from ～ where ...) A, 　　　(select 1 X from dummy union all select 2 from dummy union all 　　　 select 3 from dummy union all select 4 from dummy) B ) group by X,キー1, キー2 に書き換え可能です。 CUBEで対応できないような事例であっても、必ずしも同じSQLを複数回書かなければならないとは限りません。 当然、書かざるおえない場合はありますが、創意工夫で解決できることもあります。
INDEX の容量計算は ここを参考にすると良いでしょう。 「領域サイズ見積シート」で簡単に見積もることができます。 http://otndnld.oracle.co.jp/skillup/oracle9i/4_1 … 見積の考え方も書いてあるので勉強になります。 USER_INDEXES は 自分が定義した値が入ってますので、見積もりには使えません。 どちらかといえば、USER_IND_COLUMNS で項目長を見たほうがいいです。
8.1.6以上です
> 1人のユーザがOracleに接続したら１プロセスという方法で > 増えていくものなのでしょうか。 専用サーバ接続 (デフォルト) の場合はその通りです。Oracle に接続して、ps コマンドで確認すればこんなプロセスが確認できると思います。Windows の場合は少し違いますがイメージ的には同じと考えてよいでしょう。 一方、共有サーバ接続の場合は１プロセスで複数のセッションを確立することができます。(ただし、いろいろな問題があります) > それともOracleにあるバックグラウンドプロセスの数などを含んで > いるのでしょうか。 はい。なので、専用サーバ接続しか存在しないのであれば、ほぼ processes = sessions + バックグラウンド・プロセスの数 となるのでしょうが、共有サーバ接続が存在すると、 processes < sessions といった状況も考えられます。
状況にもよりますが、別になくても構いません。クライアント側でロード・バランスさせるように tnsnames.ora ファイルを構成しておけば一応はラウンドロビン式で接続先サーバを切り替えてくれます。 LOAD_BALANCE=ON あと、TAF を構成するなどしておけば、片方のノードがダウンしても、セッション・フェールオーバーを行ったりすることもできます。
私なら　漢字氏名にindex付けて　like検索します。 検索文字数が　必ず全角１文字とかならいいですが「山田」「早乙女」等 長さが変わるでしょうし。 like検索ににしておけば業務アプリ側で制限さえかけなければ '%太郎'　'%純一% 等で後方一致・部分一致も簡単に実装できるかと （フルスキャンしますが）
たぶん参考URL先と同じことだと思いますが、如何でしょう。 (ファンクションなのに戻り値を定義していないのでは？) 参考URL：http://oshiete1.goo.ne.jp/qa2988248.html
A、Bの外部結合をする時に、BをBLLのみSELECTしたらいかがでしょうか。 (MS SQLだとこれで動くのですが、Oracleは動くか自信が無いです） SELECT a.日付, b.名前, b.内容 FROM テーブルA a LEFT OUTER JOIN (SELECT 日付, 名前,　内容 FROM テーブルB WHERE 名前='BLL') b ON a.日付=b.日付 ORDER BY a.日付
＞サイレントインストールとか非対話型インストールと呼ばれる方式ですね 10gから、GUIベースじゃなくても上記の方法にてインストール出来ますね。 ただ、レスポンス・ファイル作るの面倒なので、パソコンにXWindowのサーバ入れて そっちで操作した方が簡単だと思います。 以前、Sparc版にOracle9iインストールした時は、余ってるPCにお試し版のXWindowサーバ入れて作業しました。
insert into A select kai, namae, kokugo, sansu FROM B where kai = 2; のように、余分なフィールドを指定しなければＯＫです。
>TO_CHAR(DATE型,'YYYYMMDD')としても、YY-MM-DDと表示されてしまいます。 これでいけると思いますよ。
USINGで指定するマージ対象をテーブルでなく、インラインビューにすれば、 アンマッチの際にインサートする項目は全て揃っているハズです。 MERGE INTO USER_MASTER UM USING ( SELECT UI.USER_ID, UI.USER_NAME, UI.NO, SH.SHOZOKU_NAME FROM USER_MASTER_IMPORT UI LEFT JOIN SHOZOKU SH ON (UI.USER_ID = SH.USER_ID ) UI ON ( UM.USER_ID = UI.USER_ID) -- 既存レコードの更新 WHEN MATCHED THEN UPDATE SET USER_NAME = USER_MASTER_IMPORT.USER_NAME -- 新規レコードの作成 WHEN NOT MATCHED THEN INSERT ( USER_ID, USER_NAME, NO ,SHOZOKU_NAME) VALUES ( UI.USER_ID, UI.USER_NAME, UI.NO, UI.SHOZOKU_NAME)
DB側でどう表示するなどの設定はないはずです。実際に.15の内容で格納されているわけではないので。 少数をどのように表示するかは取り出すプログラムに依存することです。 なので設定方法も取り出しプログラム側の個別設定ということになるはずですね。 ちなみにSQLPLUSの設定なら http://okwave.jp/qa347238.html です。
これじゃダメなんでしょうね。 http://wiki.livedoor.jp/dodobon/d/Oracle%20%A5%E …
一応、上の人に相談が必要ですが、提案を。 ＤＢを２個作ってもいいんじゃないですか？ テスト環境ってそんなものだし。 ましてや、開発側からしてみれば、 同じ表領域に違う環境のユーザーが作られていると、 う～ん・・・。って感じになります。 表領域そのものよりも、インスタンスを分けたほうが、 いいってことで。
&・・・デフォルトのエスケープシーケンス。
PL/SQLでSELECTの結果を変数に入れることができればいいのかな？ 例： declare jcsu number(12, 2); begin select 受注数 into jcsu from 受注m where 受注番号 = '000010-001'; end; 参考URL：http://homepage2.nifty.com/sak/w_sak3/doc/sysbrd …
＞delete from b exsits (select * from a where a.key1 <> b.key1) delete from b where exsits (select * from a where a.key1 <> b.key1) ごめんなさいwhereが抜けてました。
オラクル稼働のWindowsサーバで、IPを変更すると、一部サービスが起動しなくなります。 オラクルホーム配下のnetwork\agentディレクトリに存在する *.q という体系のファイルは AGENTサービスが生成するファイルですが、IP変更後、これを削除しないと、AGENTサービスが起動しません。 手動で消してください。次にAGENTサービスが起動した際に再作成されます。 これがASSISTANTツールのエラーの原因かどうかは不明ですが、必要な作業です。 もし、ASSISTANTツールが使えなければ、TNSNAMES.ORAとLISTNER.ORAは、エディタ等で修正すれば 良いかと思います。
DB_LINK の作成文を記載してください。 作成文を確認すればわかるかもしれません。
oracle　のシノニムを必要なテーブルにすべて設定するか alter session で current_schema を設定します。 大抵はシノニムを使います。
例題が理解を阻んでいる気がしますね・・・ 簡単な例で説明します。 (+)とは外部結合。つまり空集合との結合を許すことです。 例： ○テーブル名：果物 △列名：名前,産地 りんご,青森 みかん,静岡 バナナ,フィリピン ○テーブル名：単価 △列名：名前,値段 りんご,100円 バナナ,80円 ここで、果物と単価テーブルを使用して、名前ごとの値段を表示したい場合があるとします。ただし、名前は全て表示したい。 上記の条件を満たそうとすると、単純に名前で結合することが出来ません。 なぜなら、単価テーブルには「みかん」の情報が無いため、「みかん」が表示されなくなってしまうためです。 ここで外部結合を使用すると、上手に結果を取得することができます。 select 果物.名前,単価.値段 from 果物、単価 where 単価.名前(+) = 果物.名前 このSQLは単価テーブルに結合対象データがなくても、空のレコード（空集合）と結合しろ！という意味になります。 そして結果は りんご、100円 みかん、null バナナ、80円 となります。 次に、1テーブルを別名で結合する件ですが、 １つの元のとなるレコードに対し、複数のレコードが存在するが、 これを1レコードで表示したい場合などに使用されます。 つまり、行を列に変換する。 これも、簡単な例題を用いたほうがわかりやすいでしょう。 外部結合で使用したテーブル以外に下記のテーブルを用意します。 ○テーブル名：果物属性 △列名：名前、属性名、属性値 りんご、色、赤 りんご、重さ、200g みかん、色、オレンジ みかん、重さ、100g 上記の果物属性テーブルと果物テーブルから、「名前」ごとに「産地」、「色」、「重さ」を取得したい場合。ただし、「名前」1種類に対して1レコードで表示したい場合。（行を列に変換したい） 単純に「名前」だけで結合すると、「色」と「重さ」が2レコードに分かれているので、「名前」ごとに2レコード出力されてしまいます。 ここで果物属性テーブルを別名で使い分けることで解決することが出来ます。 select 果物.名前,果物.産地,color.属性値 AS '果物の色' ,wight.属性値 AS '果物の重さ' from 果物、果物属性 AS color,果物属性 AS wight where 果物.名前 = color.名前 and color.属性 = '色' and 果物.名前 = wight.名前 and wight.属性 = '重さ'; 結果は りんご、青森、赤、200g みかん、静岡、オレンジ、100g となります。 2レコードに分かれて登録されていた「色」、「重さ」が1レコードで表示されました。 つまり、行が列に変換されました。
追加 INSERT INTO ... SELECT MAX(c+1), リテラル FROM テーブル という書式もありましたね。
Sql文の次行に「QUIT」とか「EXIT」と記述するのではないかと思いますが、自信はないです。
ALTER TABLE テーブル名 NOLOGGING; や ALTER INDEX インデックス名 NOLOGGING; をすれば、REDOログの出力が減り、相応の時間が節約できます。 当然、REDOログを出力しないことによる弊害も考慮してください。 詳しくはマニュアルで。
＞上記の統計情報を取得することで、どのように実行計画を定めているのでしょうか テーブルの統計のみで実行計画を作成しているわけではないです。 参考URL参照。 ＞統計情報を取得することで、どのような意味があるのでしょうか 結局のところ、検索結果を得るためにも最も読み込みブロック数がすくなるなるには、どのように実行計画を作成したらよいか？ ということになりますので、 これを実現するためにanalyze機能を使用して、 テーブル内のブロック毎のデータ分布や、 インデックス内のブロック毎のデータ分布や、 インデックスが張ってある列のデータの偏り具合 を取得するわけです。 これらの情報を取得しておけば、 オプティマイザが、 インデックスを使用しないほうが早いことを知ったり、（※１） まったく検索しなくても良いことを知ったり、（※２） インデックスAよりBの方がコストがかからないことを知ったり（※３） 出来るわけです。 ※１の例（その１） ここに、1ブロックに全ての列データが入っているテーブルにインデックスも貼ってある場合、 インデックスを使用したほうが読み込みブロック数が多くなるので（1ブロック＋インデックスのブロック＝読み込みは2ブロック以上）、 全表走査したほうが速い（読み込みは1ブロック）とわかる。 ※１の例（その２） ここに、100万件のデータが入っているテーブルがあり、列Aにインデックスが張ってあるが、列Aはデータが偏っている（100万件中80万件は同一データとか、値が3種類でしかないとか）場合、 たとえ列Aのインデックスを使用しても、 インデックスを読み込むオーバーヘッドを考えると全表走査したほうが速いとわかる。 ※２の例 ここに、1000万件のデータが入っているテーブルがあり、列Bには値が100以上のデータしか入っておらず、検索条件に列B=50が指定された場合、 テーブルを一切読み込む必要が無いとわかる。 ※３の例 ※１の例（その２）のテーブルに列C（インデックス有り）があり、列C内の値の種類は99万種類（ほぼユニーク）のとき、検索条件で列Bと列Cをそれぞれ定数で指定された場合、 列Bよりも列Cのインデックスのほうが速いとわかる。 参考URL：http://www.int21.co.jp/pcdn/oracle/article/analy …
インストーラを起動すれば、導入済み製品を確認できます。
こんばんは。 先に、8iしか使ってないです。 これってローカル環境でDBを入れたってことですか？ それならばDBのサービスはあがってますか？ ごめんなさいWindows環境でしか扱ったことないですが・・・
OPEN cA; FETCH cA INTO vA; WHILE cA%FOUND LOOP OPEN cB; FETCH cB INTO vB; WHILE cB%FOUND LOOP … FETCH cB INTO vB; END LOOP CLOSE cB; 処理exec; FETCH cA INTO vA; END LOOP; CLOSE cA; という感じでどうでしょう。
PL/SQLのコードを書いたファイルを「hoge.sql」とかって保存して。 SQL>@c:?hoge.sql とかっていうようにして実行。 コレでどうです？
プラットフォームを限定すれば回答もしやすいと思いますが・・ 例えば、Windows系なら、NT4.0までだったハズ。
SQLの普通の文法で、 SELECT結果をINSERTすることができるので可能と思います。 a,b,cというカラムをもつテーブルfooがあり、 aがユニークで、オートインクリメントである場合、 b='xxx'のものだけ複写したいときは、 INSERT INTO foo(b,c) SELECT b,c FROM foo WHERE b='xxx'; で多分出来ると思います。 aがユニークで、自動連番(オートインクリメント)になっている のであれば、aを抜いてINSERTしてあげれば、勝手にaに 次の番号が入るのでは？ それ以外はSELECT句に、重複しないようキー生成する 演算が別途必要かと思われます。
ファンクションなので何らか戻値を表示する（返す）事が 必要になります。 select hoge('fuga') from dual; など。。
実行しているSQLファイルがCREATE～になっていませんか？ (ストアドプロシージャーを作るスクリプトになっていませんかということです。) だとすると生成処理になってしまいますので、直接実行したいということでしたらCREATE宣言は外す必要がありますよ。
OSとオラクルのバージョンは何ですか？32bit版ですか64bit版ですか？ Windows32bit環境では1プロセス2GBの壁があるのでそれにひっかかっている可能性はありませんか。
> 中国語の開発環境を構築していますが、日本で購入したOracle9iを中国の > Windowsにインストールし、使用は問題ないでしょうか？ 試していないので何とも言えませんが、恐らく問題ないでしょう。ただし、インストーラ (OUI) の文字が文字化けして読めないような気がします。(日本語フォントをインストールすれば問題ないのでしょうが・・・) とは言っても、文字化けしていてもインストールはできるので、日本語フォントのインストールが必須というわけではありません。 そして、インストール時の言語は英語 (English) を選択してください。(日本語フォントが入っている場合は日本語を含めても大丈夫だと思います) これによってエラーメッセージ等の表示が英語になりますが、データベースは日本語で作成できるかと思います。(例えば、dbca でキャラクタ・セットを選択するときに中国語を選択する) サポートについては動作検証されていないことを理由に断られると思います。
「$ORACLE_HOME/install/portlist.ini」へ記述されています。
先のSQL文の延長上で解決するなら、 select X.* from TARGET X, ( select Z.*,rownum R from ( select * from (select 記事番号,max(登録日時) 最終更新 from TARGET group by 記事番号) order by 最終更新 desc ) Z ) Y where X.記事番号=Y.記事番号 and R between 11 and 20 order by R,サブ記事番号; な感じかな。（テストしてません）
SQL> CREATE OR REPLACE PROCEDURE NOP 2 IS BEGIN 3 NULL; 4 END; 5 / プロシージャが作成されました。 SQL>
SQL Developerでどうでしょう。 フリーですし純正ですし。 参考URL：http://otn.oracle.co.jp/products/database/sql_de …
此処のサイトに（要登録） Oracle Database 10g Express Edition と云うのがあります。 コレは無料版です。 もちろん日本語も通ります。 参考URL：http://www.oracle.com/technology/software/index. …
結合の方法を詳しく書いておられるようですが、条件を絞り込んで、テーブルを再度結合しているのであれば、そのあたりを直せるのではないでしょうか？ テーブルが正規化されておらず、違う項目を再取得するために行っているのでしょうか？ チューニングの効果で、ＳＱＬの調整が占める割合が高いのはご存知かと思いますが、ＳＱＬに関する事柄を質問に補足してみてはどうですか。
この辺のURLが参考になるのでは？ http://otn.oracle.co.jp/forum/thread.jspa?thread …
SQL文を、to_date(:?,'yyyymmdd hh24miss')と書けば良いんじゃないですか？ もしくは、暗黙の型変換に期待して、日付デフォルト書式を変更するか。 ただ、デフォルト書式の変更だと、複数個の日付をバインドするときに困るし、 暗黙の型変換が正しく動作しない場合もあるので、最初に書いた方法(to_date)がお勧めかと。
インストールする際にデータベースは作成しましたか？ 作成していないのであればログインできませんよ。 （sqlplusはデータベースにログインするツールなのでログイン先 　のデータベースが作成されていなければ当然ログインできません） user name ・password ・Host stringですが Host string（接続文字列）はlistener.oraやtnsnames.oraの 設定次第なので一概に言えませんが、 WindowsパソコンにOracleをインストールしたのでしょうからおそらく system/managerだけで大丈夫です（systemユーザは普通にインストール をすれば必ずいますし、パスワードも自分で変えていなければデフォルトはmanagerのはずです） 接続文字列はローカル接続（自分のパソコン内に作成したデータベースに接続）するのであれば必要ありません。
where 苗字||名前 = '松本徹' で良いんじゃないですかね。 文字列結合をする関係で、テーブルに索引があっても使えないことになりますが．．．
SYSDATEの値（システム日付）ならバインドしなくてよいと思います。 my $sql = qq{insert into TEST (REG, NAMAE) VALUES (SYSDATE, ?)}; my $sth = $dbh1->prepare( $sql ); $sth->bind_param(1, "山田" ); $sth->execute();
Oracle 8のバージョンが8.1.7以上であれば、出来ます。 ただし、バージョンの古いほう（この場合はOracle8） のExport/Importツールを使わないと、Importツールが失敗します。
ODP.NET 10上で、過去にOracle9iにて設定されていた接続先を 使いたいという意味に解釈しましたが、間違いないでしょうか。 環境変数TNS_ADMINを、Oracle9i上でOracle Net関係のファイル (tnsnames.ora等)が格納されているディレクトリに設定することで 使えるようになるかもしれません。
データの同期を1日1回でメンテする時間を確保できるような システムであれば，コピー先をTRUNCATEしてダイレクトINSERTという 方法がパフォーマンスはよいです． さらに，EnterpriseEditionでかつPartitionOptionがあれば， パーティション単位で上記の処理が実行可能なので， 管理性と性能の両面で良いと思います．
この質問何度も何度も見ますね。 「オラクルマスター」などで過去の質問を検索しましたか？ ネットを検索して欲しい情報を得る技術を習得しないと オラクルマスターの本などで分からない箇所があっても ネットで調べることすらできないですよ。 まずは色々と調べた上で質問するようにしましょう。
オラクルのサービスはデフォルトではローカルシステムアカウントです。 ローカル～は、ネットワークアクセス権を持ちませんので認識していないのでしょう。 サービスの設定でログオンアカウントを設定してみては？ 仮に作成できてもフロッピーに領域を作る感覚ですからトラブルの可能性があります。 開発環境ならば素直にハードディスクを購入したほうが安上がりだと思います。
PL/SQLを使ってはいかがですか？ accept para1 prompt パラメータ１入力して下さい accept para2 prompt パラメータ２入力して下さい accept para3 prompt パラメータ３入力して下さい declare cnt int; begin select count(*) into cnt from master1 where para1 = &para1; if cnt = 0 then DBMS_OUTPUT.PUT_LINE('para1はありません'); QUIT; end if; 'para2,para3もチェック・・・ただし省略 update TBL_A set para1 = &para1,set para2 = &para2 ・・・; end; 環境が無いので動作確認していません。 参考URL：http://homepage2.nifty.com/sak/w_sak3/doc/sysbrd …
>接続するデータベースを識別するために、サービス名（グローバル・データベース名）かSIDを指定するそうですが、これはどちらを指定すればいいのでしょうか？ サービス名を指定します。 Oracle8,9では、どちらでも指定できます。
distribution を書かないと 適当な、libaio のrpm を入手して install して下さいとなります。 CentOS が、5 になったので 毎日整備している所ですが libaio は、特にrepository を増やさなくても CentOS5では、pirut でinstall 出来ます。 rpmforge は追加しましたが。 rpm だから fedora,CentOS,OpenSUSE,Vine あたりになりますが
>1 丸ごとバックアップ PostgreSQLでいう pg_dumpのようなもの exp：データを独自形式でエクスポートする imp：expで抽出したデータをインポートする というツールが標準で付いています。 コマンドラインについては exp, imp とだけ入力して実行するとヘルプが出てきます。 例)exp system/xxxx full=y file=xxx.dmp log=xxx.log consistent=y とすると全データベースデータをエクスポートできます。 オプションで tablesやownerを調べると表毎、ユーザー毎にエクスポートできます。 >2 テーブル毎（順序も含めて）にSQLで吐いたもの create table 文などがほしいのですよね？ ディクショナリを問い合わせれば可能ですが、ソースを表示するツールも多数存在しますので一度探してみると良いでしょう。 私は「SI Object Browser」を愛用しています。 30日間のトライアル版をダウンロードできるので使ってみてはどうでしょう。
>DATAYMDはCHAR型で8バイトで入っています。 ということは、YYYYMMDD（年月日）しか入っていないということですか？ だとしたらそのデータが何時（なんじ）にできたものなのか判断できないと思うのですが。 DATAYMDがDATE型ならば、 SELECT * FROM T_TEST WHERE TO_CHAR(DATAYMD, 'YYYYMMDDHH24') < TO_CHAR(SYSDATE, 'YYYYMMDD') || '14' でできると思います。 （もうちょっとスマートなやり方もあるかもしれませんが）
　次の検索を実行してください。 　select * from user_sequences where sequence_name = "find_sequence"; where句のfind_sequeceの所は、探したいsequenceの名前を入れてください。もし、where句を省略すると自分の保有するすべての順序が出てきます。 　出てくる各列の意味は、次の通りです。 　sequence_name 順序名 　min_value 順序の最小値 　max_value 順序の最大値 　increment_by 順序の間隔 　cycle_flag 順序が最大値の後、最初の値に戻るかどうか 　order_flag 順序番号が順番に生成されるかどうか 　cache_size 順序のキャッシュの量 　この表は、システム表の一つで、順序の定義すべてを管理しています。（正確には、システム表へのビューですが。） 　もし、あなたに、それなりの権限があるのであれば、all_sequences表を検索すれば、システムにおいてあなたが使用できるすべての順序がリストできますし、dba_sequencesを検索すれば、システム上に存在するすべての順序をリストできます。ただし、dba_　で始まるシステム表の検索は、権限が必要です。また、与えられた権限にかかわらず、この表への挿入・削除・変更は、すべて不可です。念のため。
>宣言部で記述されるSELECT文で返される１行、あるいは複数行の、 >行そのものが変数という扱いなのだろうか。 行はクラス、列はメンバ変数と考えたほうがわかり易いと思います >実行部はそれを一行ずつ取り出して加工しているのだろうか。 FETCHで1行ずつ取り出します（参考URL参照、類似の質疑応答：http://okwave.jp/qa2929010.html） >仮にそうだとしたら、WHERE句の値を様々に変えたい時はどうしたらい>いのだろうか。 動的SQLで解決します（参考URL参照） >最終的な結果をどうやってテキストに吐き出すのだろうか。 set serveroutput on; をまずPS/SQLの1行目に記述しておいて dbms_output.put_line で画面に出力させて、これをSPOOLしてもいいし、（参考URL参照） utl_file.fopen utl_file.put_line utl_file.fclose を使用して、直接ファイル出力してもいいと思います（参考URL参照） 以下サンプルソース（テスト環境無いので未実行です） SQL> set serveroutput on SQL> spool /testdata.csv SQL> declare begin for cu_rec in (※１) loop dbms_output.put_line (cu_rec.csvrow); end loop; end; / spool off ＜※１の部分＞ SELECT 販売日|| ',' || 品名 || ',' || SUM(数量) csvrow ←CSV形式のカンマ区切り編集です FROM TBL_1 WHERE 販売日 = TO_CHAR(SYSDATE-1,'YY-MM-DD') GROUP BY 販売日,品名 参考URL：http://homepage2.nifty.com/sak/w_sak3/doc/sysbrd …
＞into の後に実表名 KO を書いてください すいません、ケアレスミスです。 ANo.4の件、納得できました。 jjon-comさん、ありがとうございました。
ABCtbleが無い ABCtableの間違い？
>Is NULLを使わず、 これに関しては、こんな感じ。 select * from TARGET X, (select 名前,カナ from TARGET group by 名前,カナ having by count(*) > 1) Y where decode(X.名前,Y,名前,1,0)=1 and decode(X.カナ,Y,カナ,1,0)=1; 比較演算子(=)は使えないけど、DECODE関数はNULLでも適切な評価をします。 最後の更新がどうたら・・というあたりは言わんとすることが理解できません。
該当する表領域のデフォルトストレージがinitial 128M、next 128Mで 定義されているからだと思いますよ。 表領域のデフォルトストレージを変更するか ALTER TABLESPACE {tablespace_name} DEFAULT STORAGE （INITIAL 1M NEXT 1M）; INDEXを作成する際にstorage句でエクステントサイズを指定してやれば CREATE INDEX {index_name} on {table_name} ({column_list}) STORAGE(INITIAL 1M NEXT 1M) TABLESPACE {tablespace_name}; 小さなエクステントサイズでINDEXが作られると思います。
SEのウィザードは使ったことは無いのですが、 管理用スキーマなどを作成して分散DBを構築するのは大規模な メンテナンスがある場合のみで、通常のテーブル＝＞マテビューの 反映であれば マスタサイト側をORA_M、マテビューサイト側をORA_Sとすると ORA_SからORA_Mに接続するDB_LINKを作成して create database link ora_m connect to {username} identified by {password} using 'ORA_M'; マテビューサイト側で create materialized view mv_emp refresh complete start with sysdate next sysdate + ( 1/288 ) as select * from emp@ora_m; を定義すればよいだけかと思います。 もちろん必要な権限は付与した上でです。 あと、リフレッシュを高速リフレッシュにするのであれば マスタサイト側でマテビューログを作成してrefresh fastに 変えてやると良いかと思います。
１個目のテーブルも２個目のテーブルも同様のStorage句の 記述にしましたか？ 前回も書いたようにinitialを1Mとすれば1Mに達するまで 64Kのエクステントが複数割り当てられます。 まずはデータなどを一切挿入しないでテーブルをStorage句なしで 作成してみてください。全てのテーブルがエクステント数は１になるはずです。 逆に全てのテーブルでStorage句のintialを1Mで指定すれば全て エクステント数は16になると思います。 エクステント管理は自動にするべきです。手動にしてもほぼいいことは 無いと思っていいでしょう。また、エクステント数を減らそうとする こともしなくてよいことです。1000だろうが10000だろうがほぼ 気にする必要はありません。
ちゃんと過去ログを検索しましょう。 http://oshiete1.goo.ne.jp/qa2919745.html http://oshiete1.goo.ne.jp/qa1145688.html 勉強時間は集中度、頭の良さ、前提知識で一概には言えません。 コンピュータのことがある程度分かっていて、普通の人であれば 集中して勉強すれば１科目10時間（本をしっかり理解するのにかかる時間） で合計20時間も勉強すれば大丈夫だと（個人的には）思います。
SANが良く分からないのですが．．． Storage Area NetworkのSANでしょうか？ それともSun MicrosystemsのSunの書き間違いでしょうか？ SunだとするとSunサーバの方にOracleのデータベースが入っている ことになるかと思うのですが、 それであればSunサーバの方で性能問題が発生してるわけで クライアントであるWindows2003のCPU数を増やしても性能は変わらないと思います。 （そもそもなぜVMWare上からSunに接続しているのか分かりませんが...） Oracleのパフォーマンスチューニングは非常に多岐にわたりますが 一番効果があるのがSQLチューニングで、一番簡単なのがパラメータ チューニングです。チューニング自体は非常にOracleに精通している 必要がありますので簡単には説明できません。 以下の書籍などを使って勉強する必要があるかと思います。 http://www.amazon.co.jp/%E3%82%AA%E3%83%A9%E3%82 …
#1さんのサポートされないという件は別にして メモリが6Gあるのに対してDBキャッシュが512Mというのは少し 少ない気がします。また一番効果があるチューニングは SQLチューニングです。今まで動いていたSQLが最適なものであるか どうかをチェックし、実行計画が最適になるようにヒント句などを SQL文中に付け加えたりするのも良いかと思います。
さっきの方ですよね。質問される際には背景くらい書きましょうよ。 Oracle9iでWindowsXPにインストールされたのであれば、環境変数など設定する必要がないと思いますが、どこでそうなっているのでしょうか？ それに、Oracle9iで何をしたいのかわからないのですが・・・
えーっと、OSは何でしょう？ 詳しい情報がないのでお教えしたくとも出来ないのですが・・・ マニュアルならリンク先でダウンロード出来ますよ。 参考URL：http://otn.oracle.co.jp/
こんにちは、 一つ確認ですが、last_year() → last_day() ではないですか？ last_day関数ですが 第一引数はNUMBERしか用意してない様ですね、 ROUND関数は、NumberとDateの2個用意されている様ですね。 ※ちなみに、日付や時間の四捨五入ってどんな要件で使うのですかね？ SQL> select to_char(round(to_date('2007-01-15','yyyy-mm-dd'),'month'), 'YYYY/MM/DD HH:MI:SS') from dual; ------------------- 2007/01/01 12:00:00 SQL> select to_char(round(to_date('2007-01-16','yyyy-mm-dd'),'month'), 'YYYY/MM/DD HH:MI:SS') from dual; ------------------- 2007/02/01 12:00:00
select seito_name from g_class where seito_cd IN ('04', '01', '05', '10', '07', '09') order by DECODE(seito_cd, '04', 1, '01', 2, '05', 3 , '10', 4, '07', 5, '09', 6)
sqlplus でsystemで接続して select * from nls_database_parameters where parameter ='NLS_CHARACTERSET'; で確認できます。 例） PARAMETER ------------------------- VALUE ------------------------- NLS_CHARACTERSET JA16SJIS
FETCHしないと件数は得られなかったような気がします。 正常なデータはデータ値が必要なのだから、素直に最大２件までのFETCHして、 判断すればよいかと。 （事前にCOUNT(*)しても良いかとは思いますが、エラーの頻度が少なければFETCHする方が早いと思いますよ）
Oracle純正のSQL Developerでどうでしょうか？ ヘルプが英語なのが弱点ですが、使いやすいので気に入っています。 参考URL：http://otn.oracle.co.jp/products/database/sql_de …
質問者様のバッチ処理での状況を見ますと、私が過去に性能改善を行ったシステムと同じような要件と思われます。 その時もバッチ処理で、約７万件のデータを毎回DBに格納する際、既に存在するレコードが数件ありました。 その時の性能として、改善前はSELECTして、レコードの有無を調べ、レコードが既に存在してればUPDATE、なければINSERTするというような感じで作られていました。 この処理時間は１時間半でした これを無条件にINSERTして、Exceptionが発生したらUPDATEに切り替えるという処理に直したところ、処理時間が３０分になりました。 ですので、質問者様の条件の際には （１）いきなりINSERT （２）Exceptionが発生したらUPDATEに切り替える というやり方を経験的に推進します。 Oracle8 PL/SQLでした。
select SEIHIN_CD,TORI_CD from 製品取引先マスタ where フラグ='Y' and SEIHIN_CD in ( select SEIHIN_CD from 製品取引先マスタ where SYSDATE between 有効開始日 and 有効終了日 group by SEIHIN_CD having by count(*) > 1 ) ;
アンインストールは間違い無く失敗しているでしょうね。 アンインストールは#1さんが書いてあるように正式な手順に則って 削除が必要ですが、とりあえず「oracle.exeだけでも止めたい」ということであればファイルの検索機能を使ってoracle.exeを探して削除すればいいんじゃないでしょうか？ タスクマネージャでプロセスを強制停止した後であれば oracle.exeもすんなり削除できるかと思います。 UNIXと違い、WindowsからOracleを完全に削除することは非常にややこしいです。（レジストリがあるため） プログラムの追加と削除からは簡単に消えませんよ。 因みにOracleの正式な手順もレジストリエディタを起動して レジストリを削除する手順となります。 つまり、Oracleをいったんインストールしてその後削除するということはWindowsはサポート対象外となるということです。 （XPのシステム復元機能を使えば別だと思いますが） 繰り返しになりますが自己責任の上、十分注意して行ってください。
Oracleのバージョンが書いてありませんが、9i以降であればよほどの理由が無い限り LOCAL管理表領域、ASSM（Auto Segment Space Management）機能を用いるべきです。 LOCAL表領域、ASSMを用いればStorage句はほぼ指定しなくて良いでしょう。（するとすればPCTFREEとINITRANSくらいです） LOCAL管理表領域の場合、autoかuniformかを選ぶことになりますが、 集中拡張時の負荷を低減したいのであればauto、断片化が発生するのを避けたいのであればuniformとなります。 今はもうinitial extentやnext extentのサイズで迷う時代では無いですね。
WHENEVER SQLERROR EXIT 1; create table tb1 (it1 varchar(1) ); quit; これで、エラーが発生するとステータス 1 が返るようになります。
> ローカル管理、AUTOALLOCATE だと表領域のNEXTは、無視されそうですが、 > テーブルのSTORAGE句のNEXTも無視されるんでしょうか? はい。無視されます。 こんな確認をすれば分かると思います。 drop table test; create table test ( id number, value varchar2(20) ) storage ( initial 10m next 10m); select extent_id, bytes from user_extents where segment_name = 'TEST'; -- 1M のエクステントが 10 個作成されていることが分かる。 begin for i in 1..300000 loop insert into test values (i, LPAD('a', 20, 'a')); commit; end loop; end; / select extent_id, bytes from user_extents where segment_name = 'TEST'; -- NEXT が有効なら、自動拡張後のサイズは 20M になるはずだが・・・
以下のようなSQL文はどうですか？ SELECT * FROM テーブル 別名1 WHERE EXISTS (SELECT 'X' FROM テーブル 別名2 WHERE 別名2.項目2 = 別名1.項目2 AND 別名2.項目3 = 別名1.項目3 AND 別名2.ROWID <> 別名1.ROWID );
このように書き換えたらどうでしょうか？？ CREATE TABLE BLOB_BOOK ( ID NUMBER(5) NOT NULL, TITLE VARCHAR2(100), AUTHOR VARCHAR2(30), PRICE NUMBER(9), EVALUATION VARCHAR2(1), URL VARCHAR2(255), FILENAME BLOB, CONSTRAINT BLOB_BOOK_IDX0 PRIMARY KEY ( ID ) )
Oracle 9i の場合だと制御ファイルの再作成が必要になります。 SQL> alter database backup controlfile to trace; user_dump_dest にトレース・ファイルが出力されるので、 それを修正し、データベースをノー・マウント状態で起動されたデータベース上で実行します。 失敗するとデータベースが破損してしまうので、事前にコールド・バックアップを取得されることを強くお勧めします。
手元にマニュアルがないので…うろ覚え… alter table EMP_OLD rename constraint pk_table_a to pk_table_b; 制約名はスキーマ中でユニークなので、テーブル名を指定する必要はない…と思う。 マニュアルがあれば、alter tableの項目でご確認を。
「おら！オラ！Oracle -どっぷり検証生活」というメルマガの過去ログです。 http://www.insight-tec.com/mailmagazine/ora3/vol … alter session set workarea_size_policy = MANUAL; alter session set sort_area_size = バイト数; を使えば変更可能なようです。 かなり有用な情報がありますので、今後OracleのDBAをなさるなら登録されることをお勧めします。
チェックポイントです。典型的にはログ（REDOログ）の切り替えが発生したとき、バックグラウンド・プロセスであるDBWRによって、データベース・バッファ・キャッシュ上の更新済みブロックがデータ・ファイルにはき出されます。ただし、チェックポイントはこのタイミングだけではなく、パラメタの調整によって一定時間間隔ごとに、あるいは一定量のデータベース・キャッシュ・ブロックが更新されたタイミングごとに発生させることができます。この辺は、Oracleのパラメタによる調整ができます。マニュアルや、oracle masterの教科書などを参照してみてください。 COMMITのタイミングではLGWRによって、更新結果がREDOログファイルに書き込まれ、データベース・バッファ・キャッシュ上の更新済みブロックがデータ・ファイルに書き込まれることはありません。
sqlplusのヘルプで SQL> help quit を実行すると QUIT (Identical to EXIT) と出ていたり （help exitでは”(Identical to QUIT)”とは出てこない）、 「SQL*Plusユーザーズ・ガイドおよびリファレンス」には quitが無いので正式にはEXITだと思います。 ＃今回QUITで終了できることを初めて知りました。 ＃私はexitしか使ったこと無いです。
No.1です。すみません、私の回答は誤りでした。 No.3の方の回答の通りです。 改めて書き直すと、 X=A is null Y=B is null とすると、 Not(A is not null and B is not null) =Not(Not(X) and Not(Y)) =Not(Not X) or Not(Not Y) =X or Y =A is null or B is null でした。
select ID,RTRIM(MOJIRETSU) as X ～ from ～ とかにすればいいのでは？
UNUSABLE になるのはローカル索引ではなくグローバル索引です。 ただし、split partition にオプション update global index をつけると、全てのグローバル索引を自動的に rebuild してくれます。
Windowsではクライアント側の接続は一回設定してあるポートに 接続してから、再度別のポートに接続しなおします。 （ポートリダイレクト） USE_SHARED_SOCKETでWeb検索するといろいろでてきます。
う～ん。 ご質問の意味がいまいち分かりかねます。 呼び出し元はなんでしょうか？ＶＢですか？ＡＣＣＥＳＳですか？他のＰＬ／ＳＱＬでしょうか？ また、文面を見る限り複数レコードを返したいのでしょうか？ もし、複数レコードを返却したいのであればテーブル渡しになります。つまり検索結果を保存するテーブルを用意してそちらに結果を書き込む事になります。 ＰＬ／ＳＱＬの関数名が例えば【ＡＢＣ】とすると、ＡＢＣ＝－１とかのリザルトを返却する事も出来ます。この場合は関数の処理が成功か不成功かの判断に利用するといいと思います。またパラメータでの返却も可能ですが複数レコードを返却することは出来ません。
コチラのHPを参考に調べてみればいかがでしょう？ Oracle SQLチューニング講座（4）チューニングが必要なSQLを洗い出す http://www.atmarkit.co.jp/fdb/rensai/orasql04/or …
マシンにOracle情報（レジストリ）を残したまま再度インストール すると、そのような事象になるかもしれませんね。 10gを入れた後9iをインストールなど色々されている模様なので アンインストールがきれいに行なわれているかを疑ってみるのがよい と思います。 まずはレジストリ内にoracle、orclがありますか？ 昔は(Oracle8i)インストーラからアンインストールができなかった んですよ。なので手動で完全削除を行ないます。 10gではそんなことは内科と思いますが（未経験） （一応やり方も紹介しますが、危険な作業なので必ずバックアップ とって自己責任でお願いします。） 参考URL：http://www.iceprobe.net/database/oracle/oraoraad …
こんにちわ muyoshid です。 > データに0x00が途中ではいると、・・・ 確認はしていませんが、ホスト変数にvarchar 型を使って見てはどうでしょう？ varchar 型はC 言語では struct { unsigned short len; char arr[xxx]; } aa; と展開されます。 len に、格納したいデータのバイト長を入れて下さい。
こんにちわ > sqlplusのspoolコマンドでログを追記したいのですが方法はありますか？ Oracle10g であれば、「spool ログファイル名 append」とすれば可能です。 Oracle9i までであれば、一度ログファイルに出力してOS コマンドを 使って連結して下さい。
No2です。 fumi3さんはlistener.oraとtnsnames.oraがごっちゃになっているように見えます。 listener.oraは、 listenerを起動する際に、どのようなポート番号とホスト名を利用するかを記載します。確か、名称はデフォルトではLISTENERですが、好きな名前に変えてもちゃんと動くはずです。 但し、ポート番号とホスト名が重複するような設定はNGです。 【正しい設定】 XYZ = (DESCRIPTION_LIST = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = abc)(PORT = 1522)) ) ) ) LISTENER = (DESCRIPTION_LIST = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC)) ) (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = abc)(PORT = 1521)) これは、Listenerの冗長化設定となりますが、 普通あまりやらない設定です。 【正しい設定2】 LISTENER = の部分を消す　または、 XYZ = の部分を消す(何れもListener.oraについて) tnsnames.oraは、 単に、データベースの接続文字列を記載する所です。 もっと詳しい話はありますが、基本的には上記通りだと思います。 補足まで
「無効」じゃなくて「手動」で大丈夫ですよ。 データベースを使うには少なくとも OracleService<インスタンス名> が起動していると思うのでこれをとめるだけでほぼインストール前の状態になると思います。 TNSListenerも止めてよいと思います。
「推奨の前提条件チェック」で失敗している内容は チェックついていない箇所が失敗している箇所です。 インストールマニュアルをOTN(http://otn.oracle.co.jp/)から ダウンロードして環境を確認してみてください。
PatchSetのインストールですでにインストールしているはずです。 （インストール済みの一覧の一番下にありますよね？） だからそのインストーラがインストールしたマシンのどこかに 入っているはずです。探してみてください。
9iでも10gでも 1.該当データファイルをファイルをオフライン 2.該当データファイルをOracleコマンドで削除 3.該当データファイルをOS上から削除 という手順でOKです。（10gの場合は2,3をOracle上で同時にできるだけです。） それより問題は2.です。表領域の中の表が使っている データファイルだったりすると簡単には該当データファイルだけを 削除することはできません。 該当データファイルを使っている表を何か調べてそれを別表領域に 移動して、誰も該当データファイルを使っていない状態にしてから 削除してやる必要があるので非常にややこしいです。 （TEMP表領域は大丈夫だと思いますが） 誤って追加した直後に削除であればまだどこのテーブルでも使っていない可能性が 高いのでおそらく削除できるでしょうか、どこかのテーブルで使われている場合は connect /as sysdba select owner,segment_name from dba_segments where tablespace_name = 'CWMLITE'; で該当表領域に存在するセグメントを全部別表領域に移してから する方がよいかと思います。 （ただ、これも非常にサイズが大きいと大変ですが．．．）
データベース初心者なのかオラクル初心者なのかわかりませんが http://otn.oracle.co.jp/beginner/index.html http://www.atmarkit.co.jp/fdb/ http://homepage2.nifty.com/sak/w_sak3/doc/sysbrd … Yahoo以外のディレクトリでは DMOZ http://dmoz.org/World/Japanese/%e3%82%b3%e3%83%b …
＃２です。 こんな感じでどうでしょう？ create or replace procedure testsp(in_kijun_time in number) is wkday_dt date; wk_day_c varchar2(20); day_hh char(2); day_mi char(2); day_ss char(2); begin wkday_dt := sysdate; dbms_output.put_line('現在時刻:'||to_char(wkday_dt,'yyyymmddhh24miss')||'00'); wkday_dt := wkday_dt+(in_kijun_time/(24*60*60)); dbms_output.put_line('算出時刻:'||to_char(wkday_dt,'yyyymmddhh24miss')||'00'); -- パーツ単位で取得したいのなら day_hh := to_char(wkday_dt,'hh'); day_mi := to_char(wkday_dt,'mi'); day_ss := to_char(wkday_dt,'ss'); dbms_output.put_line('時:'||day_hh); dbms_output.put_line('分:'||day_mi); dbms_output.put_line('秒:'||day_ss); end;
PL/SQL では INTO が必要なので、なければコンパイルできないのは当然です。INTO を使用したくないのであれば、現実的ではないですが、JDBC とか・・・。 それはさておき、SQL のパフォーマンスを正確に測定するためには SQL トレースを仕掛ける必要があります。ただし、PL/SQL だと PL/SQL ブロック自体のトレースしか取得されない場合があるので、JDBC や Pro*C を使うことがたびたびあります。 トレースの結果は tkprof をデフォルトで実行すると自動的に累計値を計算してくれます。 $ tkprof orcl_ora_8962.trc orcl_ora_8962.prf あと、SQL 文は１回実行するとキャッシュされてしまうので、毎回共有プールをフラッシュしないと正確な時間を取得することができません。 SQL> connecct / as sysdba SQL> alter system flush shared_pool;
こんにちは。 　共通関数の引数にカーソルのレコード型(cursor_name%ROWTYPE)を 使用すればよいと思います。 ただこの場合は、汎用性に乏しいのですが・・・。 　よって個人的にはINSERT先のテーブル名のレコード型が お勧めです。[テーブル名%ROWTYPE] 　カーソルのレコードから移し変える処理が必要になりますが、 登録処理が簡単に記述できますネ。 （INSERT INTO TAL_NAME VALUE record_type;)
Oracleの実機確認をする環境がないのですが、以下のような感じで行えるのでは？ select floor((id-1)/10),sum(値) from t1 group by floor((id-1)/10) order by 1
DBのバージョンによってOPatchのバージョンも違うのですが、OPatchのバージョンはあってますか？ それと、パッチを持っている＝サポート契約済みなはずですよね？ 直接サポートセンターに聞いてみてはいかがでしょうか？
DBFファイルの移動ですね。 http://www.geocities.jp/unix_sunos/oracle/datafi … UNIXの例ですが、'/data/data01.dbf' to '/data/data02.dbf'; のようになっているところを 'D:\abcd\xyz.dbf' のように すればいいです。
＞１．サーバーとクライアントの形でないとOracleやSQLServerは使えない？ ＞　（ネットで読んだ感じでは１台のPCでも大丈夫のように思ったのですが） そんなことはないです。1台で使えます。 （単純にサーバのアドレスがローカルPCのアドレスになるだけです） ＞のドメイン名に何を設定すればいいか分かりません。 Microsoft LoopBack Adapterのインストールはしましたか？ 追加したMicrosoft LoopBack AdapterのIPアドレスが10.10.10.10に設定しましたか？ あとはhostsに自分のコンピュータ名とIPアドレス10.10.10.10の 関係を書いて、host名(今回でいうと「usr-m」)でpingを実行すると 10.10.10.10でつながれば良いわけです。 なので以下の行を追加すれば良いかと思います。 --------------------------------------- hostsに追加開始 10.10.10.10 usr-m --------------------------------------- hostsに追加終了 （ホスト名の位置はほかの記述と合わせてください。） ドメイン環境じゃないのであればドメインは書かなくても問題ないはずです。
すみません。訂正です >(DB中の改行コードがcrのみなら、 「lfのみなら」です。
#1です。 オプションは、URL参照ください。 参考URL：http://biz.rivus.jp/sqlplus/tutorial/sqlplus-opt …
256バイトはやめた方がいいですね。 列ヘッダを考慮すると256バイトではなく250バイトで やめておいた方が良いです。 オラクルのLOBでなければブロック単位I/Oで内部はリストなので7バイトでも8バイトでも基本は同じです。 参考URL：http://biz.rivus.jp/words/record_piece.html
スキーマを変えてインポートするのではどうですか？ from_user to_user を指定して、別スキーマへインポートする そして、シノニムを作成する。 USER　A　のテーブル　T1　T2 T3 があったとして USER　B　にインポートすると、 B.T1 B.T2 B.T3 がインポート されます。 それにシノニムを作成して、　B.T1　を　TT1　とかにする
殆どのRDBMSでは、「order by」を指定しない限り、検索順序の保証はされていません。 >MYSQLでは最後の行に最新レコードが表示されるはず MySQLも、そんな保証はしていませんけど？ MySQLのマニュアルにも、「order byなしでは順序保証しない」ことが明記されていますよ？ 例外的にSQL Serverでは、「primary key」指定時に、「order by」なしでも順序保証しているようですけどね。
実際にはやったことはないのですが、参考URLを見ると、初期化パラメータのようです。SPFILE形式であればalter system文で更新し、DBの再起動で設定できそうです。PFILE(テキスト形式)ならinit<SID>.oraのファイル（<SID>はDBのSIDに置き換えてください）に AUDIT_TRAIL=DB のように追記してDBの再起動すればよさそうです。
つまり、仕様的には １．ＡテーブルとマスタのＣテーブルを結合した店コードを取得する。 ２．取得した店コードでＤテーブルの商品コードを取得する。 ３．１で取得した店コードと２で取得した商品コードでＱテーブルより金額を取得したい。 　　その際、店コードと商品コードが同じものがあれば合計金額で取得したい。 と言うことでよろしいでしょうか？ select Ｑ.店コード,Ｑ.商品コード,sum(Ｑ.金額) as 金額 from (select Ａ.店コード,Ｄ.商品コード from Ａ,Ｃ,Ｄ 　　　　　where Ａ.店コード=Ｃ.店コード and Ａ.店コード=Ｄ.店コード 　　　　　group by Ａ.店コード,Ｄ.商品コード) Ｅ , Ｑ where Ｅ.店コード=Ｑ.店コード and Ｅ.商品コード=Ｑ.商品コード group by Ｑ.店コード,Ｑ.商品コード でいいと思います。 問題はＡ,Ｂ,Ｃの結合ときに複数の商品コードが取得されるので、ここで同じ商品コードは1つしか取得するようにしなければなりません。そうでなければ同じ商品コード複数取得されることになり後の勝利が上手く行きません。 取得した店コードと商品コードでＱテーブルより金額を取得し集計を行います。ここでも複数の商品コードが発生することになりますのでgroup byが必要でしょう。動作確認はしておりませんので、悪しからず。
まず、同一顧客内の最小の住所コードを取得し、 次に、「最小の住所コード」に対する住所を取得するようにします。 SELECT A.顧客番号,A.住所コード,B.住所 FROM ( SELECT 顧客番号,MIN(住所コード) AS 住所コード FROM 顧客マスタ GROUP BY 顧客番号 ) A INNER JOIN 住所マスタ B ON A.住所コード = B.住所コード
開発として使うのであれば、無償版よりも、ちゃんとサポートを受けられる製品を購入したほうが良いと思います。 開発していると、大抵１つか２つはサポート行きの事象にあたります。 ＃特にパッチのあたっていないバージョンにはよくあります。 一番安いのはUGsanmaさんのおっしゃるバージョンでOKですが マシンスペック（OSとCPUの数）によっては適応できない可能性が あるので注意ください。 http://www.oracle.co.jp/products/price/ > またオラクルとMySQLでは機能面の違いなど知りたいです。 MySQLとオラクルとの機能面の違い等はわかりません（ごめんなさい）。 各HPを見て使用したい機能があるか確認してみてください。 ＃私は機能面というより、「何かあったときの対処」が可能 ＃か？で判断します。今後一切サポートなしで行くつもりなら ＃MySQLという選択肢もアリだと思います。
$ORACLE_HOME/rdbms/admin/utlsampl.sql ファイルに、サンプルスキーマである scott の定義分が置かれています。 その中には、scott ユーザの作成、emp 表、dept 表などの作成 (10g 以降では主キー制約等も設定されます)、テストデータの insert などの記述があり、どれも平易なものなので、大変参考になるかと思います。
ORA-00001ですのでエラーコードは-1、 エラーメッセージは日本語の場合 「ORA-00001: 一意制約(SCOTT.SYS_C003307)に反しています」 などと表示されます。
> というのは、複数のユーザを作成する場合っていうのと同じ意味ですよね？ はい、合ってます。 >ossan_hiroさんが説明してくれている"hogeスキーマ"に対するユーザを複数作れるって訳ではないと思っていますが認識あっていますでしょうか？ >（というかテーブルごとにユーザは作れないですよね…） (1) スキーマ用としてhogeユーザを作成します。 (2) このhogeユーザにテーブル(hoge_tbl)を作成します。 (3) hogeスキーマにアクセスするossan_hiroユーザ（ただのユーザ）を作成します。 (4) hogeユーザからossan_hiroに対し「hoge_tblのselectを許可する」という権限を与えます。 (5) これで、ossan_hiroユーザでログインしてhoge_tblを SELECT * FROM hoge.hoge_tbl でアクセス可能にします。 この状態はossan_hiroとしてはhoge_tblにはSELECTはできるけど UPDATE,DELETE,INSERTはできない状況になります。 いちいちhoge.オブジェクト名でアクセスするのが嫌な場合はシノニムを作成してしまえば SELECT * FROM hoge_tbl でもアクセス可能になります。 >＞スキーマ用のユーザはロックしてログインできないように変更 >というのはどういう意味でしょうか？ ここでいうhogeユーザは所有オブジェクトに対して何でも可能です。 (DML文などが実行可能) ユーザを削除してしまうと、所有オブジェクトも削除されてしまいます。hogeユーザに接続できないようにしたい場合、アカウントロック＆ パスワード無効にすることでhogeユーザでは対象スキーマにアクセスできなくすることができます。 ＃必要に応じてで良いと思います。 イメージつかめましたか？説明下手ですみません。
こんにちわ。 > もとのデータの数値型の初期値が０で設定されていて 仮に初期値を西暦1年1月1日で表示するとして、 Select to_date(decode(to_char(項目名, 0, '00010101', 項目名), 'FM99999999'), 'YYYYMMDD') from テーブル名 でどうでしょう？ ※ 数値型を日付型に変換するためには・・・ TO_DATE で変換できるのは、CHAR, VARCHAR2, NCHAR, NVARCHAR2 データ型です。
今、手元にOracleがないので確認できないのでカラム名が分かりませんが、システムテーブルの、ALL_USER_TABLESに行数があります。 ただ、このテーブルの値は完全な数値ではなく、あるタイミングで更新されるので正しいものではありません。
SQL自体が初めてということなので質問自体が少し 的を得ていないような気がしますので確認させてください。 （質問に対して質問で返してしまい、申し訳ありません。） 最終的には 「品名　品名コード1の金額　品名コード2の金額」 といった形のテーブルを作りたい （「SQL上で書きたい」という表現が良く理解できなかったので、「作りたい」という意味と当方で勝手に捕らえました。） ということだと思うのですが、 品名も品名コード１の金額も品名コード２の金額も全てもとの金額テーブルにある列なので品名マスタは必要無いということになります。 （品名コード名を表示するとき以外は品名マスタは要らないですし、 　そもそもこの表の名前自体品名コード名マスタという表名にするべき） また、元の金額テーブルでは品ごとにレコード（行）がありますが、 「品名　品名コード1の金額　品名コード2の金額」 といった形のテーブルを作りたいということであれば１行に 元表の１行を押し込めることになりますのでsumやcountといった グループ関数というものを用いることが必要になってきます。 そもそも金額テーブルにおいて品名が○○と○×と違うのに 品名コードが同じ1でよいのでしょうか？ 少しやりたいことがわからないのでもう少し質問文を修正していただいてもよろしいでしょうか。 回答についてはそれからさせてもらいたいと思います。
何となくなんですが・・ SELECT DECODE(処理CD,'1',DECODE(集計F,'Y','1Y','1N')) kubun,COUNT(連番) kensu,SUM(金額) kingaku FROM aaa WHERE 日付 = '200701' GROUP BY DECODE(処理CD,'1',DECODE(集計F,'Y','1Y','1N')) という書き方を試してください。 （あてずっぽのカンがあたっていればなんですけどね）
>日付の区別ですが、上記の認識で宜しいでしょうか。 はい。そのつもりでした。 分かりにくかったらすみません。 実際にＳＱＬを書く際には、「Ａ．日付」や「Ｂ．日付」 のような形で書かなくても大丈夫だと思います。
入力・・・@や@@（startコマンド） 出力・・・spoolコマンド 参考URL：http://biz.rivus.jp/sqlplus/command/index.html
私は新人教育を行なっている者ですが、 下記の書籍を新人に配布して勉強させてます。 現場で使えるSQL第2版(ISBN:4798112267)翔泳社 それからこちらも面白いです。 楽しみながら学べるのでオススメですよ。 Oracle SQLクイズ(ISBN:4798112003)翔泳社
>接続先が複数ある場合は、 >毎回LOCALを書き換えなければならないのでしょうか？ 接続先を省略したい／接続先を切り分けたい、という矛盾する質問に思えるのですが・・ 省略するための手法は判ったのだから、あとは自分の使いやすいように知恵を絞ってください。 私なら、SQLPLUSなりSQLPLUSwを起動するバッチファイルを接続先毎に用意しますけどね。 （そのバッチファイルのなかで、SET LOCAL=を書けば良い）
こんにちわ。 > データを全件ファイルに出力するような処理は書けるでしょうか？ PL/SQL だけでやろうとすると、かなり強引な開発をしないといけません。 バイナリデータの扱いとかは、かなり面倒だと思います． 詳細は、「PL/SQL ユーザーズガイド」の動的SQL を確認して下さい。 SQL*Plus を使って、 connect ユーザ名/パスワード set pages 0 set lines 9999 set long 9999 set trimspool on set heading off set echo off set colsep , alter session set NLS_DATE_FORMAT = 'DATE型出力形式'; alter session set NLS_TIMESTAMP_FORMAT = 'TIMESTAMP型出力形式'; spool hogehoge.csv select * from スキーマ名.テーブル名; spool off とかすれば、どうでしょう？
こんにちわ。 > Solarisの場合、Linux用のをインストールするのでしょうか？ Solaris の場合は、当然Solaris版をInstall します。 CPU によって、SPARC版, x86 Solaris版, x86-64bit Solaris版 等があります。 ユーザ登録 (無料) が必要ですが、US OTN から各プラットフォームの 開発ライセンスをDownload する事ができます。 http://www.oracle.com/technology/software/produc … 開発ライセンスは、当然サポートは受けられません。 OS 依存の問題もありますので、周りに詳しい人が居ないのであれば Windows版/Linux版 を使用する事をお勧めします。 参考URL：http://www.oracle.com/technology/software/produc …
データベースを作成するときのオプションによっては作成中に固まってしまうことがときどきあります。 なお、インストール中にデータベースを作成するを選択しても、内部的に dbca を起動しているだけなので、最初にソフトウェアのみを選択して後から dbca を起動してデータベースを作成しても全く違いはありません。 あと、いくらかの知識は必要になりますが、データベースの作成は dbca を使わずに SQL コマンドだけで行うこともできます。(管理者ガイドにも書かれていますし、dbca の最後の選択肢でデータベースを作成せずにスクリプトとして保存を選択することによっても可能)
>これはサーバーが必要でしょうか？ サーバーとはサービスを提供するコンピュータことです。つまりOracleをインストールしたコンピュータを指すわけで、インストールしたコンピュータでデータベースを見に行きたければ、自分自身をサーバーとして指定してやればいいのです。 サーバー名に localhost を指定すれば、自分を見に行きます。
DROP SEQUENCEしてCREATE SEQUENCEは避けたい →理由はNo2の方がおっしゃっているようにinvalidが付く 　可能性があるからでしょうか？ どちらにしろ完全に業務が停止しているときにやらないと 非常に危険ですので、あまりALTERはオススメしませんが 権限など何か他の理由などでDROP,CREATEができないのであれば １． select TEST_SEQ.currval from dual; 100 ２． ALTER SEQUENCE TEST_SEQ MAXVALUE 100 CYCLE; これでもし万が一、１個目のSQLと２個目のSQLの間に誰かが シーケンスを更新したとしても２個目のSQLはエラーになってくれるはずです。 （２のSQL実行後、現在のシーケンス値が1に戻ったのを確認したら 　必要に応じてCYCLEはNOCYCLEに直して置いてくださいね。）
No1さんのリンク先にも載っていますが非常に高い資格なので 「とりあえず受けてみるか」にしてはちょっと受験料が厳しいです。 上司に進められているのであれば「研修行かせてください」 とお願いしてもよいかもしれませんね。 研修は受けさせてもらえなくても http://item.rakuten.co.jp/book/1747814/　と http://item.rakuten.co.jp/book/1703657/　を 購入して、（問題を丸覚えではなく）しっかり内容を理解すればほぼ受かる試験と 思ってもらってよいかと思います。 参考になるページを載せておきますね。 参考URL：http://item.rakuten.co.jp/book/1703657/
Oracleのバージョンはどれでしょうか。 10gのexpdp(Data Pump)では、QUERY=スキーマ名.表名:"問合せ式"で 特定の表のみ制限を課すことができます。
select TABLE_B.COL0, 0 AS myflg from TABLE_A,TABLE_B where TABLE_A.COL1='plan' and TABLE_A.COL2='hokan' and TABLE_A.COL3 = TABLE_B.COL3 and TABLE_A.COL4 = TABLE_B.COL4 union select TABLE_B.COL0, 1 AS myflg from TABLE_B where TABLE_B.COL1='plan' and TABLE_B.COL2='hokan' order by myflg で一件目を使用とか。。。
select name,type,home_adr,home_tel from meibo a,home b where type=1 and a.home_code=b.home_code union all select name,type,office_adr,office_tel from meibo a,home b where type=2 and a.office_code=b.office_code ; というのが、判りやすくて良いんじゃないですかね。
たしか select 1+1 from dual; だったと思います。
http://support.oracle.co.jp/ からOiSCに入会（無料）すれば様々な資料を閲覧することが 可能ですのでSTATSPACKで表示される情報を解説した資料などに アクセスすることも可能です。 マニュアルも入会すれば無料でダウンロードできますので パフォーマンスチューニングのマニュアルを見れば 色々と説明があります。 参考URL：http://support.oracle.co.jp/
CSVとして出力してSQL*Loaderで入れるのはどうでしょうか。 データの中に,（カンマ）が無いことを前提に考えると SQL*Plusで set colsep ',' set lines 1000 set head off　　　　などを指定してから spool table_data_A.csv select * from A; でtable_data_A.csvファイルにCSV出力できます。 （ファイルの最初と最後にある余計な文字を取り除く必要がありますが） それをSQL*LoaderでテーブルBにローディングすればよいかと思います。
・サーバＢにオラクルクライアントをインストールして、サーバＢ上でＥＸＰを動かしサーバＡのデータを抜き出す。 ・サーバＢをＮＦＳなどでアクセスできるようにした上で、サーバＡ上でＥＸＰを動かし、 出力先(FILE=)をネットワーク上のファイルとする。 のいずれかになると思います。
とりあえず考えてみました。もっときれいにできる人ご教授下さい。 SELECT CASE WHEN 1 <= TO_NUMBER(TO_CHAR(SYSDATE, 'MM')) AND TO_NUMBER(TO_CHAR(SYSDATE, 'MM')) <= 3 THEN TRUNC(LAST_DAY(ADD_MONTHS(TRUNC(SYSDATE, 'YYYY'), -4))) WHEN 4 <= TO_NUMBER(TO_CHAR(SYSDATE, 'MM')) AND TO_NUMBER(TO_CHAR(SYSDATE, 'MM')) <= 9 THEN TRUNC(LAST_DAY(ADD_MONTHS(TRUNC(SYSDATE, 'YYYY'), 3))) WHEN 10 <= TO_NUMBER(TO_CHAR(SYSDATE, 'MM')) AND TO_NUMBER(TO_CHAR(SYSDATE, 'MM')) <= 12 THEN TRUNC(LAST_DAY(ADD_MONTHS(TRUNC(SYSDATE, 'YYYY'), 9))) END AS SENKIMATSU FROM DUAL
日付型なので、そのままSYSDATEでは無理ですか？
トリガの構文がすらすら出てくるほどPL/SQLは書いていないので はっきりとした回答はできませんが bとcで場合わけがあるので mergeもしくは 在庫テーブルを基にしたVIEWを定義してそこに Insteadトリガとして定義してやる必要がありそうです。 トリガの中で挿入先テーブルを参照しても良いのですが oldとnewの機能をうまく使えばもっと効率よく処理できるかと思います。 中途半端な回答で申し訳ありません。
Oracleクライアント7はWindowsXPにインストールできないですね。 Oracle7.2とOracle8.1.7サーバー混在の環境でクライアントは8.1.7を 使用しています。 WindowsXPでのOracleクライアント8.1.7は特にトラブル等ありません。 ODBC　OO4Oとも正常稼動し、7.2サーバーの接続も設定方法はまったく 変わりなくできます。 アクセスからのDAOは使用していますが、こちらはODBCタイムアウトの 発生がしばしばありましたので ODBC設定のODBCタイムアウトのチェックをはずすことで回避しています。 ただADOは使用はしたことがないのでコメント出来ません。 Oracleサーバー7.2以前のバージョンでTCPリスナーを使用されている ならTNSに書き換える必要があります。 ANo.1さんが言われるようにOracle7は、限界にきていますね。 サーバーリプレースで8.1.7に今月にはUPする予定です。
>>使う方法はJavaのコースで学習可能だと思います。 >それを聞いて少し安心しました。 実際にはMySQL、PostgreSQLを利用した学習コースが多いと思いますが、JavaからのデータベースアクセスはJDBCというものを介して行われます。 JDBCでのアクセスを意識せずに行うためのコンポーネントもありますが。 使うデータベースに関係なく共通のインターフェースが提供されているので(厳密には異なる場合もありますが)１つのデータベースを使えるようになれば応用が利くと思います。
少し探してみたのですが、HP自身が、Perl5.8系バイナリとDBD-Oracleの導入について 記述しているページがあるので、同じバージョンを使えば、導入可能なのではないでしょうか。 参考URLに書いたあたりに、DBD-Oracleに関する記述。 その少し上に、最新Perl本体のダウンロードがあります。 参考URL：http://h21007.www2.hp.com/dspp/tech/tech_TechDoc …
>すみませんでした。 間違ったことをしているわけではないので誤る必要はありませんよ。(^^) ツールを便利に使うことも大切ですが、ツールにも得意不得意がありますのでより効率よく出来る方法を選択することが重要だと思います。 私は今回の要件であればプログラムを介すことが最適だと思いました。
ブロック（というより記憶領域構造）に関しての説明は http://jibun.atmarkit.co.jp/lskill01/rensai/omsd … が参考になるかと思います。
Oracleのパッチ情報に関してはサポート契約違反になりますので お答えできません。 パッチを入手している＝サポートサービスを受けている とおもいますので直接OiSC(Oracle internet Support Center)に問い合わせてみてはいかがでしょうか？ OPATCHの使用方法などはKROWNで検索してみてください。
Oracle上で可能です。 select a+b+c from hogehoge;
>BOOKテーブルだけは他の二つのDBとは別なので >いつもbook@serialで呼び出しているのですが どうして最初に書かないのか理解に苦しみます。 update tmp set data=(select no from list,book@serial where book.sno=list.wno and tmp.time=list.wno) where not(data is null)
AutoCommitプロパティがtrueになってませんか？ AutoCommitをfalseにするとBeginTransやCommitTransでトランザクションが制御可能になるはずです。
Oracleに詳しくはないのですが、、、 update 表名 set 列名=列名+1 [where 条件式]
ただの投稿の書き間違いだとすると、 表B.列1がユニークである以上、エラーは出なさそうですね・・・。 とりあえず、私だったらこう進めます。 (1)SET直後の副問い合わせに"AND ROWNUM=1"を付ければ 　エラーがなくなる事を確認＝間違いなくここが原因だと特定 (2)UPDATE文をなるべくコピペで編集して、 　表A.列1の値と、(select 表B.列8～)のcountとを出力するSELECTに変えて実行 (3)countが>1の表A.列1の値で、select 表B.列8～の部分を実行して結果を見る このくらいで何か分かる予定です(^^; ローダのdirectモードで表Bに重複データを入れたら、こうなる・・かも・・ あとはSQLの微妙な間違いで、意図した物になっていない、とか そのくらいしか私には見当付かないです・・・。
NULLに関して #1 で不足してそうな点を補うと 「PL/SQL マニュアルより」 動的SQL へのNULL の引渡しリテラルNULL は、USING 句の中では使用できません。 この制限を回避するには、キーワードNULL を未初期化の変数で置き換えます。 DECLARE a_null CHAR(1); -- set to NULL automatically at run time BEGIN EXECUTE IMMEDIATE 'UPDATE emp SET comm = :x' USING a_null; END; /
つまづく度に質問をする前に 想像力を働かせて検索するようにしてみてはいかがですか？ http://www.google.co.jp/search?hl=ja&q=Fatal+err … とか http://www.google.co.jp/search?hl=ja&q=apache+or …
ORA-01403はNO_DATA_FOUNDということで１件もレコードが ヒットしなかったときに出るエラーです。 Pro*Cの中で select col1 into host_XXX from hogehoge where col2 = host_YYY; といったようなSELECT INTO命令を実行していませんか？ その場合、host_XXXに入れる値が一件も無かった場合、 （col2 = host_YYYの条件を満たすレコードが無かった場合や 　そもそもhogehoge表が空の場合） ORA-01403が発生してしまいます。 「たまに」ORA-01403のエラーが発生するというのはおそらく ヒットする場合とヒットしない場合があるからだと思います。 逆に２件以上ヒットしてしまうとORA-01422（TOO_MANY_ROWS） が発生してしまいます。 参考URL：http://dongrico.fc2web.com/hp_sozai/pl_sql/pl_sq …
No1さんの最後に書いてあるのが一般的な例ですね。 Aテーブルに入っているデータを空のBテーブル（表定義は Aテーブルと同じ）にコピーしたいのであれば単純に insert into B select * from A; となります。 select以降は通常のselect文ですので A表に入っているデータの内、col1が100以上のものだけ B表にコピーしたいのであれば insert into B select * from A where A.col1 >= 100; となります。 ※ 空のB表が無く、A表を元に作成するところからはじめる場合は create table B as select * from A; となります。
>AM03001の型は20桁のcharacter型です。20 spacesより以上の条件で、すべてのAM03001の照会ができますか 出来るとは限りませんが、多くの環境で出来るはずです。 文字列の大小比較ですので、オラクルに登録できる文字として存在するコードで、 SINGLE-SPACEより小さい文字が存在しないキャラクタセットなら、全件返します。 そうでないキャラクタセットであれば、当然ながら全件ではありません。 一般的に多く用いられるSJIS,EUC,UTF8あたりなら、全件返すでしょうね。
以前、PERL+DBD-ORACLEの環境で自作しましたが、そんなに遅くなかったですよ。 アプリケーションとしては、為すべき事が少ないので、処理に要する時間は、 オラクルエンジン上の処理時間に左右されます。 レコード長次第ですが、サーバ上で動かすなら、数分で終わるように思いますけどね。
csvに落として、sqlldrのダイレクトモードで投入する、 というやり方で良いのなら、その方が早いです。 impは全件正直にinsertするので、データが多いと、 数時間というオーダーは普通ですよね・・・。 結局はinsertなので、通常運用時のパフォーマンスが充分な状況なら、 劇的な変化を求めるのは厳しいんじゃないでしょうか。 各種バッファを一時的に大きくしてみる、くらいでしょうか・・・ データの範囲指定は、 imp時ではなく、exp時に、QUERYオプションで条件指定します。
同じバージョンか下位のバージョンでしかエクスポートできないので、 ９ｉリリース１のデータベースは、９ｉリリース２以降のエクスポートでは 抜き出せません。 サーバ自身にエクスポートツールがインストールされていると思うので、 それを使ってエクスポートしてください。 エクスポートのサーバとインポートのサーバでプラットフォームが違っても 問題ないので、移行元の環境できっちりエクスポートをしてください。 （例えば、unixサーバ上でのエクスポートファイルを、Windowsサーバ上でインポートできる）
やりたいことを考慮するとSQL*Loaderよりは、UTL_FILEを使用してP/LSQLブロックもしくはProcedureで処理したほうが、Insertと同時に処理中にカウントや集計処理ができ、チェックもできるのでいいような気がしますが・・
テーブルごとです。 一度もanalyzeしていないテーブルや、統計情報を削除したテーブルは (CBOできないので)RBOになります。
すみませんカブリました。 これだけ書くのに4分もかかってたとは・・・。
OracleXEについてはGUIのツールはブラウザベースのものしかありません。 クライアントにも入っていません（製品のオラクルにはあります）。
SELECT * FROM Aテーブル WHERE 日付 IN (SELECT MAX(日付) FROM Aテーブル) かな。
>どの程度の規模のシステムからOracleやDB2などを使用する必要があるのでしょうか？ >具体的な場所（銀行とか大会社のシステムとかAmazonとか）なども教えていただけるとありがたいです。 規模だけで、商用データベースを選択することはないですよ。 規模が小さくても信頼性やサポートサービスの観点で、商用データベースを選択することは多いです。 そういった意味で、銀行や大企業の基幹業務で、オープンソースのデータベースを採用することは皆無です。 ただ、そういうところでも基幹業務以外の部分では、オープンソースを活用することはあります。 例えば、社内用のサービスだったり、インターネットでの一般向け情報提供とかで。
DELETE文１文では、１つのテーブルに対してしか操作できませんので、 DELETE文を２つ投入するか、PL/SQLブロックとして投入するかいずれかに なります。 （無名PL/SQLが投入できるミドルウエアと投入できないミドルウエアがあります）
オプティマイザ次第だけど、NOT-INは、あまりお勧めでない。 外部結合も索引があっても有効に使われないので、お勧めでない。 select * from A where not exists(select 1 from B where A.店コード=B.店コード);
自信がないのであれば、マニュアルの通りにやられるのが無難だと思いますよ。後から正しくないことをやっていて、サポートに泣きついても、「動作保証されていません」って言われて終わってしまいますから。 ちなみに、Linux に Oracle をインストールするために必要な設定は、 1. カーネルパラメータの設定 2. /etc/security/limits.conf ファイルに以下の設定の追加 @oinstall soft nproc 2047 @oinstall hard nproc 16384 @oinstall soft nofile 1024 @oinstall hard nofile 65536 3. Oracle ユーザの .bashrc ファイルに ORACLE_HOME、PATH、LD_LIBRARY_PATH および以下の設定の追加 ulimit -u 16384 -n 65536 あたりです。ちなみに、Linux では通常は csh は使わず、bash ですよ。
バイナリファイルを転送する機能としてならDBMS_FILE_TRANSFERというパッケージが追加になりました（たぶん関係ないと思いますけど）。 UTL_FILEも10gからバイナリファイルを扱えるようになりましたよ？ （コレも関係ないかな？）
SQLを事前に書いておいて、SQL*PLUS等で流し込む、で良いようにも思いますが・・ フリーでも、PL/SQL Developerに近いソフトはありますよ。 例えば、CSEと言う名のソフトです。 開発が止まってしまっているので、これ以上の進化はないと思いますが、 それなりの機能と操作性です。 参考URL：http://www.hi-ho.ne.jp/tsumiki/
リンクテーブルマネージャを使用して更新してみても駄目ですか？
この辺を参考にされてみてはどうでしょうか？ http://otn.oracle.co.jp/cgi-bin/non/msgview_r.cg … > OS：WINDOWS　XP　HOMEエディション HOMEエディションはサポート対象外となっています。 http://www.oracle.co.jp/products/system/o9/win920/
SET ORACLE_SID=A SQLPLUS ～ としてください。 デフォルト接続のSIDは、環境変数ORACLE_SIDを最優先します。
例えば『oSqlEdit』なんてのはどうでしょう？ 参考URL：http://www.hi-ho.ne.jp/a_ogawa/
1.Importしようとしているダンプファイルは10.2.0.1のexp.exeで取得したものでしょうか？ 2.Windows2003には10.2.0.1以外のOracleは入っていないでしょうか？impと打つとバージョンが出ますが、意図しないバージョンのimpが起動しているなんてことは無いですか？ 3.提示されているエラーの前後も載せることが出来ますか？
ODBCドライバはORACLEの公式サイトで配布されています。（要登録） 参考URL：http://otn.oracle.co.jp/software/tech/windows/od …
declare CURSOR CUR1 IS SELECT * FROM USER_TABLES WHERE TABLE_NAME LIKE 'WAK%'; begin FOR CUR_RECORD IN CUR1 LOOP EXECUTE IMMEDIATE 'DROP TABLE "'||CUR_RECORD.TABLE_NAME||'" CASCADE CONSTRAINTS'; END LOOP; end; とかでバッサリ消せます。
残念ながら、オラクルには、CSVファイルを生成するツールや組込機能は存在しません。 オブジェクトブラウザは、その機能を自前で行っています。 （内部的に、SELECT文を発行して、テキストファイル出力） 出来合のフリーの無償ツールもありますし、当然有償ツールも存在するので、探してみると良いと思いますよ。 私は、気に入ったツールがなかったので、自作しました。
ローカルリスナーの設定で括弧の数が合わないのは転記ミスでしょうか？ 10gであればこの辺を参照してみてはいかがでしょう？ http://biz.rivus.jp/config/multi_thread_server.h …
常に使える句ではないですが UPDATE にRETURNING句を使用してみては？
v$lockの行ロックは、オブジェクトIDとセッションIDだったように思います。 （昔、調べたけど資料が残ってないので記憶です） ロックされているROWIDは調べられないと思いますよ。 ROWIDを調べて何をしたいのか判りませんが、セッションまでは特定できるので、 人間には、処理中のSQL文から、ロックしている行は推定できると思いますけど。
オラクルLITEの勉強がしたいなら別ですが、所謂オラクルとは別物なので、オラクルの修行が目的なら、 LITEはダメです。 随分前に少し使っただけなので、よく覚えていませんが・・ LITEのユーザ／パスワードは、入力様式が特殊だったような覚えがあります。 インストールガイドなどのマニュアルに従って作業すれば出来るはずですよ。 （ユーザ／パスワードも書いてあったと思います）
環境変数のNLS_LANGを合わせる必要があったような気がします。 Exp時にImp先のNLS_LANGに合わせるか、Imp時にExp元のNLS_LANGにする必要があったと思います（昔の話だったかな？）。 >SHIFT_JISで使用されていた今までのデータはインポートできるのでしょうか？ データによってはサイズが変わり、桁あふれや領域不足になる可能性があります。 >例えばAL16UTF16に統一したDBを構築するとなると AL16UTF16は各国語キャラクタセットなのでAL16UTF16がキャラクタセットのDBは構築できません。
BronzeのSQL基礎Iだけだったら隅から隅まで試験本を読んで内容も理解すれば受かると思いますよ。 ただし、確実に実際の仕事や作業では役に立たない知識になってしまうので退院してからは実際にパソコンに向かって本で勉強したことを復習するのがよいでしょう。 あと、BronzeはSQL基礎Iともうひとつ、DBA10gが必要ですがこちらはさすがに実際にパソコンに向かって色々しないとOracle経験無しの人は無理だと思います。 （合格ボーダラインはDBA10gの方がかなり低いので運がよければ受かるかもしれませんが，．．．）それでは、お大事になさってください。
有償無償ごちゃ混ぜですが、コストは気にしなくていいの？
ええっと、まずSQLではなくSQL Plusの話ですよね？ その上で、 １、LIKE演算子の場合は「=」は不要です。 ２、&の後に変数名が記述されていません。 上記2点を直せば動くと思います。 変数名をvarとすると SELECT ＊ FROM テーブル名 WHERE 列名 LIKE '&var%' で変数を入力できるようになると思います。
テーブル名はバイトコードでできたOBJECT_IDのエイリアスに 過ぎないですからオラクルのパフォーマンスや容量に関わる とは思えないです。 しかし、人間的なコストパフォーマンスはモチベーションを含めて 設計側かプログラム開発側の立場かによって相当変わると思います。 メリット 1) http://www.thinkit.co.jp/free/tech/31/3/ デメリット 2) http://biz.rivus.jp/config/objectname_guideline. … 1) では 「Oracle技術者主体だと9対1で日本語を利用しない」と書かれています。
ａｎｓｉ構文の趣旨からいえば、結合条件と絞り込み条件は分けて書くので・・ select * from a left join b on (a.商品ID =b.商品ID) left join c on (b.商品ID =c.商品ID) where a.年月 = 任意の値 と書くのが一般的でしょうね。
order by と rownum を併用する場合は注意が必要です。 [tbl01] cola | colb ------------ 1000 | aaaa 1001 | bbbb というデータがある場合、 select cola from tbl01 where rownum < 1 order by cola desc; とすると、「1001」ではなく、「1000」が返されます。 これは、order by の前に rownum < 1 が適用されてしまうからです。 解決するには、 select aaa from (select cola aaa from tbl01 order by cola desc) where rownum = 1; とすれば良いです。
データベース概要のマニュアルに 「表領域がオフラインになると、Oracleでは後続のSQL文でその表領域内に含まれるオブジェクトを参照できなくなります。表領域内のデータを参照する完了済の文を含むアクティブ・トランザクションは、トランザクション・レベルでは影響を受けません。それらの完了済の文に対応するロールバック・データは、SYSTEM表領域にある遅延ロールバック・セグメントに保存されます。表領域が再びオンライン化されると、このロールバック・データは必要に応じて表領域に適用されます。」 とあるので「SYSTEM表領域にある遅延ロールバック・セグメントに保存」されるようです。
オラクルマスターについてはオラクルのOracle Universityのページに情報があります。 Bronze DBA10g は 出題数：41 合格％：53% 試験時間：60分 です。詳細は参考URLを参照してください。 参考URL：http://education.oracle.com/pls/web_prod-plq-dad …
テーブルaとテーブルb,テーブルbとテーブルcが結合されていれば、テーブルaとテーブルcは結合されています。 SQL文の記述としては正しいと思います。 可能性としては、keino, daichono のいずれかに前もしくは後にブランクが入っているなどということはないでしょうか？差し支えのない範囲でデータを提示していただけると更にアドバイス可能です。
No.1の回答者です。 検証してみたところDECODEとBETWEENの組合せでは出来ませんでした。 環境が9iと言う事なのでCASE演算子を使われてはいかがでしょうか？ SELECT CASE WHEN 項目名 BETWEEN A AND B THEN '2' ELSE '1' END FROM テーブル名; な感じでできると思います。
OracleMasterに関する問題なら http://jibun.atmarkit.co.jp/scenter/ittrain/inde … でメールアドレスを登録すれば毎日問題がメールで送られてきます。 私も毎日やってます。
JDeveloper はJavaの開発ツールです（pl/sqlのデバックなども出来るようですが）。 JDeveloper はFedoraCore5Linuxには正式には対応していません。 http://www.oracle.co.jp/tools/jdev1980/faq.html や http://otn.oracle.co.jp/software/products/jdev10 … から動作環境を確認してみてください。 各エディションの相違点は http://otndnld.oracle.co.jp/products/jdev/htdocs … を参照ください。
こんにちわ。 > 一つのスキーマで一元管理・・・ ストアド・ファンクションを、実行者権限で定義すれば可能です。 Create function ～ return number AUTHID CURRENT_USER is ・・・ としてみて下さい。
>やりたいことは、TBL001にレコードを追加・更新したいので、 追加したいデータ、更新したいデータはどこですか？ ＳＱＬを見るからに、固定値(or入力値)ですよね？ つまり１件の入力データについて、更新または登録を行えば良いことになるかと思います。 あなたの書いたSQLは、intoとusageに書いたテーブルが同じになっていますが、これだと データの入力源が固定値なのに、それと関係ないテーブルを書いていることになります。 あなたがやりたいことを”無理矢理”merge文で表現すると・・ merge into TBL001 S usage (select '2006/12/01' DJUJU_DAY,'003001' VJUJU_NO from dual) N on (S.DJUJU_DAY=N.DJUJU_DAY and S.VJUJU_NO=N.VJUJU_NO) when matched then update set S.VRNR_SKZY_FLG='0', S.NUPD_CNT= DECODE(S.NUPD_CNT,999,1,S.NUPD_CNT + 1), S.DUPD_NTJ=SYSDATE when not matched then insert (DJUJU_DAY,VJUJU_NO,VRNR_SKZY_FLG,NUPD_CNT,DUPD_NTJ) values(N.DJUJU_DAY,N.VJUJU_NO,'0','1',sysdate) ; な感じになります。 このような目的で、構文の複雑なmerge文を使うメリットって少ないと思いますよ。
オブジェクトブラウザって何ですか？ SI ObjectBrowser のことでしょうか。 http://www.sint.co.jp/commercialbbsdemo/bbs_disp … こちらで直接お聞きになった方がよいかもしれません。 あまりにも利用ユーザが少ないような気がしますし。。
副問合せから返ってくるレコード数が複数か単数かわからない場合は、=ではなく、INを使うと出るのではないでしょうか。 select * from テーブルA　where 値段 in (select 値段 from テーブルB where 任意の予算) ただしこれだと1000円きっかりの時しか出ないので、もし「予算が1000円だったら値段が1000円以下のものを表示する」という風にするのであれば、 select * from テーブルA where 値段 <ANY (select 値段 from テーブルB where 任意の予算) とするといいと思います。
デフォルト統計は確かパフォチューガイドに掲載されています。
↓is not nullかと
基本的にentreeさんがおっしゃる内容なのですが、インスタンスリカバリーでは (1) commit済み／未commitに関わらず、すべてデータファイルに適用（ロールフォワード） (2) commitされてないデータをロールバックセグメント(UNDO)を使用してロールバックする。 でデータファイルの不整合を解消することだと思います。 インスタンス障害にはHW障害やOS障害などで発生する場合もあるため 復旧できない場合もありますが、再起動などで復旧できる障害です。
たとえば DECLARE wk_name TBL.LAST_NAME%TYPE; wK_sal TBL.SALARY%TYPE ; wk_emono TBL.EMPLOYEE_ID%TYPE := &p_empno; BEGIN SELECT LAST_NAME, SALARY INTO wk_name, wk_sal FROM TBL WHERE EMPLOYEE_ID = wk_empno; -- DBMS_OUTPUT.PUT_LINE('従業員No.' || wk_empno || 'の' || wk_name || '氏の給与は' || wk_sal); END; / p_empnoに値を入力してください: このときの wk_emono TBL.EMPLOYEE_ID%TYPE := &p_empno; の指定で入力情報を設定することができます。 パッケージでのパラメタも同様です。
n番目のデータを取り出したいなら、 カンマの数を カーソル処理で数えて INSTRでとりだしたらどうですか。
インストールメディア不良や光学ドライブ不良の可能性もありますので、CD－ROMの内容を一度HDD上にコピーしてからやってみるのも一手です。 あと、OTN から取ってきたイメージでインストールするのも一手ですが、ライセンス上の問題が出てきますので、インストールが出来ない原因の究明の為にならお勧めです。
Expressも評価版も必ず入力したパスワードなのでデフォルトはないハズです。 ユーザIDはSYSで入力したPASSWORD、接続モード（だったかな？）はSYSDBAでダメですか？ 10g以前のDBのデフォルトパスワードはchange_on_installだったハズです。
to_char とto_date関数でいけると思います。 where句に DATE>=to_date(to_char(sysdate,'YYYY/MM/DD') || ' 03:00:00','YYYY/MM/DD HH24:MI:SS') としてやればいけるのではないでしょうか？ 文字列結合を行い、date型に変換して比較しているだけです。 ただ、AM12:00:00～AM02:59:59はどこで取得するのか？は別ですが・・・
申し訳ありません。 思いっきりミスをしていました。 ------------------------------------------------------------ -- テーブルtable1のid、テーブルtable1のflg、テーブルtable1のdateを抽出。 select table1.id, table1.flg, table1.date -- テーブルtable1、及びテーブルtable2を使用します。 from table1, table2 -- 抽出の条件として、table1のidとtable2のidが同じ where table1.id = table2.id -- かつ、table1のflgがN and table1.flg = 'N' -- かつ、table1のdateが2006-10-10以降を指定します。 and table1.date >= '2006-10-10'; ------------------------------------------------------------ こちらが正しいです。
自己結合でもよいかも知れません。 select distinct a.カードid,a.名前,a.期限 from カードテーブル a inner join カードテーブル b on (a.カードid=b.カードid and a.rowid!=b.rowid); 自分自身を結合し、rowidで同レコードを除外しております。 結果が積になるので、distinctを使って重複をなくしております。 （group by句でも問題ないと思いますが） 参考になればと思います。
あまり使ったことがないですが、通信経路 (JDBC Thin, JDBC OCI を含む) の暗号化を行うためには、まず Oracle Advanced Security オプションのライセンスを購入する必要があります。 JDBC OCI であれば、若干バージョンは古いですが、参考 URL に資料が公開されています。 参考URL：http://otndnld.oracle.co.jp/products/iserver/ora …
単純にデータベースBのホストまで届いていないだけのような気がします。（ORA-12545が出ているあたりから） (1) 接続先のホストへのPINGや名前解決などできていますか？ （ホスト名指定ならIPアドレスで指定するとか） (2) リスニングするポート(デフォルト[TCP：1521])をA-B間で破棄してませんか？（tnsping <ホスト文字列>コマンドでOKになりますか？） まずはOS周りから確認してみてください。
Oracleに限らないと思いますが、SELECT句の発行という話であれば 「parse」と「execute」と「fetch」の３つに分かれます。 「パース」はSQL文の解析と解析結果に従ったデータ領域の確保 「実行」は解析結果の実行 「フェッチ」は検索結果の取り出し です。 Oracleで for n in cursor loop 　～～ end loop; を使った場合、for文でパースと実行がまず最初に行われます。 ループ内でデータを取得している箇所でフェッチが行われます。 なので、フェッチはループ回数分発生しますが、 パースと実行は１回しか発生しません。 あまりにも遅いのなら「処理いろいろ」の部分の見直しが必要かもしれませんね。
pdfファイルになりますが、以下のURLに他のエディションとの差が書いてあります。 参考URL：http://www.oracle.com/technology/products/databa …
一度日付型に変換して、再度CHARに変換すれば 問題なくいけると思います。 （to_dateとto_char関数を使用します。） to_char(to_date(FIELD_NAME,'YYYYMMDD'),'YYYY/MM/DD') でいけると思います。
trimしなくても、to_char(ID,'fm00000')でOK。
donmaidonmさん 直接の印刷はできなさそうですね。 残念ながら、画像をキャプチャして別のツールから印刷するなどの方法しかなさそうです。OTNの掲示板にリクエストとして書き込んでみてはどうでしょう? 参考URL：http://otn.oracle.co.jp/forum/new-jdev.html
こんにちわ。 > テーブルのSELECTがすごく重く・・・ Oracle は最終レコードと言う管理を行っていないため、 全件検索時は過去にデータが格納されていた所 (High Water Mark) まで検索が行われます。 データ削除前に900万件のレコードが入っていたため、たとえ全レコード を削除しても、900万件分の無効ブロックが読み込まれます。 > 心当たりがある方、解決法を教えていただけませんか？ Delete ではなく、Truncate 文を使うと空きブロックの解放も 行われるので、性能が改善する筈です。 但し、Delete 文と違って条件を指定しての削除はできませんので 注意して下さい。 どうしてもDelete で削除した後に空きブロックの解放を行う 必要があるのであれば、「Alter table 表名 move」で 解放可能です。 但し、Alter table を行うと、該当表に定義されている索引が 無効になりますので、その後 「Alter index 索引名 rebuild」で索引も再作成して下さい。
select * from テーブル where Ａ='ハ' and (Ａ,Ｃ) in (select Ａ,max(Ｃ) from テーブル goup by Ａ) な感じで良いと思いますよ。
Oracleのカテゴリで、DB2やSQL Serverのことも含めて質問するのは どうかと思いますが？ しかも、示された各RDBMSは、オンライン・マニュアルが公開されて おり、誰でも参照できますよ？ 表の最大構成列数は、各RDBMSの「CREATE TABLE」のところに記載があります。 (1)DB2 バージョン8.2 　ページサイズが4Kの場合、500列 　ページサイズが8K～32Kの場合、1012列 　行長は、ページサイズを超えられない (2)SQL Server 2005 　1024列 　varchar等などがある場合は、行長は8060バイトを超えられる。 (3)Oracle 10g 　1000列
サーバにつながらないということですが、どのコマンド（ツール？）を使ってつないだのでしょうか？ >誰にでも接続できる公開されたサーバー（データベース）はないでしょうか？ 基本はユーザとパスワードを入力して接続します。 ＃一部OS認証もありますが。 HRユーザなどインストール時作成されますが、ほとんどはアカウントロックされているため、自分で作成するか、アカウントロックを解除する必要があります。
>カーソル 作る時のSELECTの範囲や、データベースのカーソル存在中の参照ロックだろうなとは想像付くんですが、本当にトランザクション中にデータを書き換えられない様に保障しなくてはならないケースだと、カーソルの処理を止めろってアドバイスは無しでは？ #カースバイケースですよね？
PL/SQLによるテキストファイル出力例（/tmp/test.txt）です。 ※ 項目間は半角スペース declare 　ftype utl_file.file_type; 　chead varchar2(1000) := 'key1 key2'; 　data_old varchar2(1000) := ' '; ncount integer; 　n integer := 1; 　cursor c1 is 　　select key1,key2, 　　　　　 A1 || ' ' ||　A2 || ' ' || ‥‥ || ' ' || A100 data 　　from tbl 　　order by key1,key2; begin 　ftype := utl_file.fopen('/tmp','test.txt','w'); 　for i in 1..100 loop 　　chead := chead || ' A' || to_char(i,'FM999'); 　end loop; 　utl_file.putf(ftype,chead || '\n'); 　select count(*) into ncount from tbl; 　for c1_rec in c1 loop 　　if c1_rec.data != data_old or n = ncount then 　　　　　/* 先頭レコード or 変更レコード or 最終レコード? */ 　　　utl_file.putf(ftype,c1_rec.key1 || ' ' || c1_rec.key2 　　　　　　　　　　　　　　　　　　　|| c1_rec.data || '\n'); 　　end if; 　　data_old := c1_rec.data; 　　n := n + 1; 　end loop; 　utl_file.fclose(ftype); end; /
一度、管理者ガイド等を読まれると良いと思います。 インスタンスの作成の仕方が書かれていますので．． DBCAというサポートツールを使って、データベースの新規作成が行えます。 新しいデータベースには、新しいインスタンスサービスが用意されます。 そのあとＮＥＴサービスへの新データベースへの接続定義を追加すれば、 新旧共に利用可能になります。
>一番、重視しなければいけないのは、A だと思っています。 私はBだと思います。 ディスクアクセスはメモリアクセスの比較にならないくらい遅いですから。 >9,200,000 rows processed --処理対象となった行数　D 900万件も一気にクライアントに送って処理させるのですか？ こういった処理はPL/SQLなどで任せたほうがいいような気がします。 >(FULL)が、(UNIQUE INDEX)に比較して、10倍ぐらい表示されていると仮定します。 TABLE FULL SCANが悪とは言わないですが、件数の多いテーブルを (FULL)にしないようにしたほうがいいと思います。 対象件数が多い（多すぎる）ので、どこまで絞れるのかは不明ですが、 処理的に思いのであれば一気にやろうとせずに一時表のようなものに 退避させるとかしたほうが良いのでは？
全テーブル（のデータ？）を消したいとのことですので、 ちょっと方法を変えて、以下のようではいかがでしょうか？ 1）テーブル作成用のユーザーを作っておく 2）1）で作ったユーザーの持ち物として全てのテーブルを作成する 3）1）で作ったユーザーの持ち物だけをエクスポートする。 　このとき、表データはエクスポートしないでおく。 で、データを消したいときは 1）のユーザーの削除（このとき、ユーザーの持ち物も一緒に削除してください。）し、再作成後、3）で作ったダンプをインポートすると、 空のテーブルだけがあるデータベースのできあがりです。
>SQL> SELECT LOWER(TRIM('H' from 'Hello World')) FROM dual; >SQL> SELECT LOWER(TRIM('''H''' from '''Hello World''')) FROM dual; かな？
解決策はMZ-80BさんのURLを参考にしていただくとして・・・ ROWNUMは抽出できた行に対して値が設定されます。 抽出できた行に対しROWNUMが1,2,3,4,・・・と振られていくわけです（抽出条件にはROWNUMの条件も当然含みます）。 ANo.2のような書き方の場合、データは抽出されません。 ＃ちょっと誤解を招く可能性があるため補足しました。 ＃ちょっとわかりにくいかな(^^; ＃ただの補足なのでポイント辞退
・Oracleインストールユーザに設定されている環境変数を実行したいユーザにも設定する。 ・Oracleホーム以降のファイル（及びディレクトリ）のアクセス権が、使用したいユーザにもアクセスできる権限にする(dbaグループやoinstallグループに使用したいユーザが属しているのであれば問題ないかも)。 >どこかにパスを書き込めばよい・・と聞いたのですが、それがどのファイルなのか分かりません。 私の場合だとユーザのホームディレクトリに".bash_profile"というファイルに記述しています(ls -laでファイルの存在を確認できます)。
違った。 select trunc(uriage_date - interval '1' minute,'dd') uriage_date,sum(uriage_kingaku) goukei_kingaku from X group by trunc(uriage_date - interval '1' minute,'dd')
もう解決かもしれませんが sqlplusを実行する前に cdコマンドでカレントディレクトリを変更してみては？ cd "C:\Documents and Settings\All Users\デスクトップ\" sqlplus /nolog connect ユーザ/パスワード@接続文字列 spool TEST.log
ハードスペックなどがわからないのでなんとも言えないところも ありますが。 商品情報は画像を含みますか？ 可能性としては ・回線の飽和 ・CPUのパワー不足 ・メモリ不足 ・SQL及びWEBサーバのチューニング ・ディスクの遅さ などが考えられると思います。 低速回線のユーザーが原因となりえるか という点では 回線速度が遅いためWEBサーバとセッションを貼り続けてしまい 他のユーザが待たされているという現象はあり得ると思います。 ただこの場合は自社のサーバ側の回線には余裕があるハズですから サーバの同時セッション数を増やしてあげれば解決するかと。 以上、ご参考まで。ぜんぜん的はずれだったらごめんなさい。
製品版でもHomeEditionはサポートされておりません。 ＃ひょっとすると動くかもしれませんけど。 リソース的に余裕があるのであれば ・FedraCore4＋OracleXE(linux) をVMWARE上で構築してみるのはどうでしょうか？ ＃Linuxも覚えられるので一石二鳥かも
iStudyがあるのであれば 「ひたすら特訓モードで弱点の箇所を覚える」 ですかね（私はその手法です）。 ある程度正解率が上がったら(平均80%ぐらい)になったら 模擬試験モードで仕上げます。 90%ぐらいになったら受験しました。 ＃もう問題を覚えるぐらいまでやった記憶があります。 >セミナーなどで勉強する気は有りません ＃セミナーいくのであればその分問題集を購入したほうが ＃いいような気がする。
このサイト使えると思います 参考URL：http://otndnld.oracle.co.jp/document/products/or …
alter table テーブル名 disable constraint 参照整合性制約名; でdisableにしてからtruncateで実行できるはずです。 終わったら alter table テーブル名 enable constraint 参照整合性制約名; でenableにします。 ＃すべての表を消すのであればUSER_CONSTRAINTSのCONSTRAINT_TYPEが'R'（参照整合性）ですべての制約を取得してdisableにすればよいと思います。 >DBA STUDIOですとテーブル名を選択してDELキーですんなり消せるのですが・・・。 DBA STUDIOはおそらくdeleteをしていると思います。
パッチに関する質問はOracleサポートセンターで直接問い合わせてください。 パッチ情報、バグ情報などの製品サポートから得た正規保守契約者のみが知ることができる情報は公開できないことになっております（サポート契約違反となる恐れがあります）。
#2です。 私の環境の補足です。 パッチは最新は適用しておりませんので、9.2.0.1.0になっております。 試した内容は、以下です。 SQL> create table test (col1 char(5),col2 char(5) 表が作成されました。 SQL> insert into test values ('ABC==','123--'); SQL> insert into test values ('ABC','123'); SQL> insert into test values ('ABC=','123-'); SQL> select * from test; COL1 COL2 ----- ----- ABC 123-- ABC 123 ABC 123- SQL> select * from test where col1 like 'ABC'; COL1 COL2 ----- ----- ABC 123-- ABC 123 ABC 123- SQL> select * from test where col1 like 'ABC%'; COL1 COL2 ----- ----- ABC 123-- ABC 123 ABC 123- SQL> select * from test where col1 like 'ABC %'; COL1 COL2 ----- ----- ABC 123-- ABC 123 ABC 123- パッチを適用すれば直るのですかね。。仕様だと思っていました。 #4さんが答えてるようにイコールで結ぶと同じものになっている ようなので・・・・
これかもしれません。 [ACC2002] リンクされた ODBC テーブルで"#Deleted"エラー発生 http://support.microsoft.com/kb/128809/ja 参考URL：http://support.microsoft.com/kb/128809/ja
BEGIN～EXCEPTION～END;のブロックをどのように構成するかで、例外後の処理をどうするかを決定することができます。 たとえば、こんな関数(function)があったとします。 create or replace function ex_throw(val number ) return number is ret_val number(1):=-1; -- -1で初期化 begin if val=1 then select 0 into ret_val from dual where 1=2; -- NO_DATA_FOUND else ret_val:=10/val; -- 引数に0を設定するとZERO_DIVIDEが発生 end if; return ret_val; exception -- 別にここでexceptionで捕捉しないで親ブロックで捕捉しても -- いいが、なにが起こったかわかるようにあえて捕捉する when NO_DATA_FOUND then dbms_output.put_line('ex_throw:データなし'); raise; -- NO_DATA_FOUNDをそのまま返す when OTHERS then dbms_output.put_line('ex_throw:予想外だ'); raise; -- 起きた例外をそのまま返す end; / このファンクションで ・NO_DATA_FOUND は処理継続 ・NO_DATA_FOUND以外なら処理終了 としたい場合 declare ret number:=-1; begin begin ret := ex_throw(0); -- 引数が1ならNO_DATA_FOUND、0ならZERO_DIVIDE exception when NO_DATA_FOUND then dbms_output.put_line('関数呼出元：レコードなし'); end; dbms_output.put_line('実行結果='||ret); dbms_output.put_line('それ以降の処理実行'); exception when others then dbms_output.put_line('エラー検出'); dbms_output.put_line(SQLERRM); end; / のようにファンクションだけを BEGIN～EXCEPTION～END;のブロックで囲んで 捕捉したい例外(NO_DATA_FOUND)だけをEXCEPTIONで書けば NO_DATA_FOUNDがこの関数内で起きてもそれ以降の処理は 継続され、NO_DATA_FOUND以外なら処理終了します。 ＃インデントができないのでちょっと見難いソースですが。
同じ結果にしたかったら、 (1)を以下のように変更します。 AND opend_dt = 20061130 or　opten_dt = 19000101 　　　　↓↓ AND ( opend_dt = 20061130 or　opten_dt = 19000101 )
出来るか出来ないかで言えば、出来ます。 但し、ノンプログラミングでは出来ません。 IMP/EXP/SQLLDRは、OS上で動作する外部ユーティリティですので、 オラクル内部から起動する仕組みが必要です。 PL/SQLには、外部プロシジャ呼出という拡張機能を用意していますので、 その機能を使って、外部ＤＬＬを呼びだし、コマンドを実行することが 可能です。（JAVAストアドルーチンでも可能） また、Windowsプラットフォーム版には、COMオートメーション機能が 用意されているので、それを使うとWindows上のプログラムをコントロール 出来ます。 詳細は、アプリケーション開発者ガイド基礎編等をご覧ください。
分析関数を使うと・・ select 名前,記録,時刻 from (select x.*,rank() over(partition by 名前 order by 記録 desc) R from テーブル x) where R=1; な感じで書けます。 分析関数の使えないバージョンやエディションでは・・ select 名前,記録,時刻 from テーブル where (名前,記録) in (select 名前,max(記録) from テーブル group by 名前); な感じで良いかと思います。
>共有ストレージ（ディスク）が障害があった場合は >業務継続は不可能なのでしょうか？ はい。そのために、この手のディスク装置はディスクの冗長化（RAID（＋ホットスペア））が ほぼセットになっています。 >複数サーバでＯＲＡＣＬＥのＤａｔａＧｕａｒｄ機能を使えば >プライマリサーバのディスクが障害があった場合、 >セカンダリサーバに切り替えれば業務に支障なく >（即座にデータの戻りも無く）システムが稼動できるのでしょうか？ 10gでは、変更情報をスタンバイ側へ「リアルタイム適用」する機能があるので、 理論上はスタンバイ側のデータベースですぐに運用が可能です。 ただし、アプリケーション側で障害検知とデータベースの切り替えを行う必要があります。 RACの場合は、アプリケーションは常に同じデータベース（ホスト名、IPアドレス、サービス名）に対してアクセス可能（アプリケーション側で切り替えの検知不要）なので、 そこがひとつの相違点になるでしょうか。
「select count(*) from テーブル名」で実行した場合、「全表スキャン」となってしまいます。テーブルがたとえ７０万件あっても、対象ブロックはHWMまでアクセスしてしまうため、テーブルによっては遅い場合があります。 こういった場合、ヒントを使って「高速全索引スキャン」でアクセスすることでパフォーマンスをあげることができます。 たとえばTABLE名(hoge)、主キー(hoge_pk)だった場合 SELECT /*+ INDEX_FFS(hoge hoge_pk) */ count(*) from hoge; という感じで書きます。/*+ */で囲んでいる箇所がヒントになります。 #コメントと紛らわしいですが。 INDEX_FFSは初期化パラメータのDB_FILE_MULTIBLOCK_READ_COUNT に影響を受けるのでALTER SESSIONなどでDB_FILE_MULTIBLOCK_READ_COUNTを変更すると結果に差がでると思います。
ひどい目ですが個別に挙げればきりがないのですが、一番怖いのは障害対応です。 いつどんな災難がやってくるかもしれません。 私の場合、化学企業系の情報システムでサーバーとオラクルに携わっていました、そのシステムはホストコンピュータや輸送系のシステム連携していたので止まると会社に損害を与えてしまいます。 ある時(私がオラクルデビューした頃)サーバー障害が起きシステムが停止してしまいました。ハードが復旧したにもかかわらずインスタンスが立ち上がらずOra-600(※)を吐き続けました。結局サポートセンターと連絡を取り合ったのですがその間物流機能が停止し一千万円近い損害を与えてしまいました。 また7.1時代にもいきなり7.1.3にバージョンアップしてOra-600(※)を吐いて止めた事があります。これはバージョンアップ前に修正パッチを当てなければならないのを見落としていたからです。 それなりの規模になれば盆・正月・休日・夜間を問わずすぐ対応できる体制をとらなければいけません。 またサーバー、クライアント共にOSとオラクルのバージョンを意識する必要があります。場合によってはクライアントからSQL文たたいてサーバーを壊す危険もあります。 ※ora-600というのはオラクラーにとって最も見たくない致命的なエラー番号です。私はおかげで600という数字がトラウマになってしまいました(笑) ～ご参考までに～
あんまり深く考えたSQLでは無いけど・・ select decode(X.INSIDE_ORDER,1,X.ID) ID, X.INSIDE_ORDER, max(decode(X.BOX_ORDER,1,X.DSP_NAME||decode(Y1.C,X.INSIDE_ORDER,'','<br>'))) BOXORDER1, max(decode(X.BOX_ORDER,2,X.DSP_NAME||decode(Y2.C,X.INSIDE_ORDER,'','<br>'))) BOXORDER2, max(decode(X.BOX_ORDER,3,X.DSP_NAME||decode(Y3.C,X.INSIDE_ORDER,'','<br>'))) BOXORDER3 from テーブル X, (select ID,INSIDE_ORDER,count(*) C from テーブル group by ID) Y1, (select ID,INSIDE_ORDER,count(*) C from テーブル group by ID) Y2, (select ID,INSIDE_ORDER,count(*) C from テーブル group by ID) Y3 where X.ID=Y1.ID and X.ID=Y2.ID and X.ID=Y3.ID group by X.ID,X.INSIDE_ORDER な感じで良いんじゃないかな。（８ｉ以降であれば動く予定、されど未テスト）
declare CURSOR CUR1 IS SELECT * FROM USER_TABLES; begin FOR CUR_RECORD IN CUR1 LOOP EXECUTE IMMEDIATE 'TRUNCATE TABLE "'||CUR_RECORD.TABLE_NAME||'"'; END LOOP; end; exit / というPL/SQLスクリプトを投入すれば、自己所有のテーブルは空に出来ます。 有無を言わさずに空になるので、気を付けてくださいね。
'&ランク'は置き換え文字になります。 これは「sql*plusユーザーズガイドおよびリファレンス」に載っています。 '&ランク'という文字を設定（初期化）しているわけではありません。 （サイズ的に無理です。）
全件削除するのであれば、truncateを使用して下さい。 deleteだとエクステントを開放しないため、HWMが下がりません。 また、データの件数が多ければインデックスにも注意が必要ですね。 １．drop index ２．truncate table　A ３．insert into A select * from B ４．create index ５．dbms_stats.gather_table_stats(A) とこんな感じになるのでは。 構文は適度にはしょってますので、マニュアルを参照してください。 以上。
ファイルサーバも広義ではデータベースと言えるかもしれませんね。 ただし、データベースには格納したデータを簡単に取り出せる仕組み (通常は SQL) や、取り出すためのインターフェース (ODBC、JDBC など) が必要となります。一般的にデータベースと言えば、RDB やオブジェクト指向 DB を指すでしょう。
相関問い合わせでの更新は、UPDATE対象の表の更新レコードに対応する１件を返す副問い合わせ文を 書かないといけないのですが、副問い合わせ文の中で、更新表をFROMに書いてしまうと、更新表と 無関係の副問い合わせを行ってしまいます。 update TAB_A set TAB_A.COL003 = ( select TAB_B.COL003 from TAB_B /* <============================注目 */ where TAB_A.COL01 = TAB_B.COL01 and TAB_A.COL02 = TAB_B.COL02 ) のようにすれば、問題なく動作するかと思いますよ。
テーブル単位でインポートなどでも駄目なのでしょうか？ UNDOや一時領域をなるべく生成しない方法を考えましょう。 ＃この事象はサポートセンター行きだと思います。
１．できますよ。通常の内部PROCのように宣言とコーディングすれば使用できます。 ２．ファンクション内でカーソルを使用してカーソルをOpenし、Fetchでデータ取得を実行したあとにカーソルをCloseする前に『IF　Cursor名%NOTFOUND　then』で対応もできますが、通常カーソルを使用してOpen・Fetchした場合、Notfoundの場合定数にはnullがセットされる（というか何も取得できないので初期処理でnullクリアしておけばnullのまま）のでnullがリターンされるはず。 レコード型で定義されている定数に対しnullを代入するとレコード全体の項目に対しnullがセットされます。 ３．ObjectBrowserは実行時、引数を入力するための画面が表示されます。 参考URL：http://www.sint.co.jp/
データベースにコネクトできるのでしょうか？ またコネクト出来たとしてもそのデータから予想するSQLを組めるのでしょうか？ 簡単に予想できるソフトを作れるならば、仕事をしないでロトで稼ぎたいですね。 SQLの勉強ならばMySQLやアクセスで十分な気がします。 業務に必要な場合や、将来ITに進みたいなどといった考えが無い限り、お金の無駄遣いで終わってしまいますよ。 それから、DBはとても重いです。 クライアントサーバーなどで構築しても十分なパフォーマンスは得られない気がします。 ゲームをする時にサービスの停止、ロトを構築する時にサービスの開始などと面倒なことを毎回やるのでしょうか？ お勧めはエクセルやアクセスでデータを貼り付けて構築するのが良いと思いますよ。Officeで入っているアプリケーションですしね。
select X.CODE,X.LINE,Y.BIKO from B X, (select CODE,BIKO,row_number() over(partition by CODE order by LINE) R from B where not(BIKO is null)) Y where X.CODE=Y.CODE(+) and Y.R(+)=1; テーブルＡの使い道が書かれていないので、全く使わない。
ホームセレクタは、オラクルのメニュー上にあります。 起動すると、どのオラクルホームを使うか選択できます。
古いバージョンのオラクルだと、領域の開放は面倒です。 (1)ワークテーブルへのコピー or 外部保存 (2)TRUNCATE (3)ワークテーブルからのコピー or 外部保存からの復元 最近(>=9i?)のモノであれば、表領域に余裕さえあれば、SQL一文で同様のことができるのですが。
MZ-80Bさんのおっしゃるように、エラーがでたら SHOW ERRORSでエラーの内容が分かります。 今回は単純に行6のo1がoi(数字の1じゃなくi(英字のアイ))に なっているだけのようですけど・・・。
例の定義は索引付き表といわれるものです。 (1)は型の宣言で「TABLE OF VARCHAR2(15)」は配列の型で 「INDEX BY VARCHAR2(32)」はインデックスの型をあらわします。 (2)は変数を定義しているところです。 アクセスする場合は以下のようになります。 host_table('aaa'):='test aaa'; host_table('bbb'):='test bbb'; dbms_output.put_line(host_table('aaa')); ＃同じインデックスで代入すると新しい値に入れ替わります。 詳細は「PL/SQLユーザーズ・ガイド及びリファレンス」を 参照してください。
遅延トランザクションで列が更新されたことを識別するために主キーが必要となるわけです。もし、主キーを使いたくないというのであれば、DBMS_REPCAT.SET_COLUMNS プロシージャを使用して代替キーを指定してあげる必要があります。 ただし、表の構造によっては主キーが必須となる場合もあるようです。
ストアードプロシージャを作成するときは、以下のように作成します。 CREATE OR REPLACE PROCEDURE PROC_A～～～ CREATE OR REPLACE でプロシージャを作成（既に有る場合は置き換え）します。
UPDATE一文で、一括更新する場合、更新する順番はオラクルが決めます。 また、更新の途上で、先に更新したレコードの内容は確認できません。 例えば、仮にオラクルが上から更新したとしたら、001-100で更新した値は 001-101の更新の際に、参照できません。 採番する(Function)側で、001-100に何を採番したか把握した上で、 001-101に対しても、同じ値を返す工夫が必要になります。 現在のFunctionの中身が判らないので、UPDATE一文で同様のことを 実現するとしたら、こんな感じで書けるはずです。 update TABLE_NAME Z set BBB = ( select R from (select AAA,rownum R from (select distinct AAA from TABLE_NAME)) X, (select AAA,BBB from TABLE_NAME) Y where X.AAA=Y.AAA and Y.BBB=Z.BBB ) ; サブクエリの部分は、更新レコードのBBB項目しか参照していません。 このサブクエリの部分をFUNCTION側に移植して、採番の起点（200？）を 考慮する仕組みにすればよろしいのではないかと思います。 ちなみに、FUNCTIONのパラメータを見直せるのであれば、BBBだけでなく AAA,BBBとする方が、FUNCTION側の負担は少ないと思います。
substr(FLD1,1,instr(FLD1,',') - 1) コード列 substr(FLD1,instr(FLD1,',') + 1) 名称列 とかで、それぞれを切り出せば、よろしいんじゃないかと。
連結演算子(||)は普通に文字列などを連結するもの 'AAA'||'BBB'は'AAABBB'になる。 結合演算子(=>)は主にサブプログラム（プロシージャ／ファンクション／パッケージ）を起動するときに使用するもので CREATE OR REPLACE PROCEDURE HOGEHOGE(cdata VARCHAR2,len number) IS BEGIN DBMS_OUTPUT.PUT_LINE('data=['||cdata||']:length='||len||':'); END; ↑のようなプロシージャがある場合 BEGIN HOGEHOGE('hogehoge',length('hogehoge')); -- (1) HOGEHOGE(len=>length('hogehoge'),cdata=>'hogehoge'); -- (2) END; 通常(1)の書き方をしますが (2)のようにパラメータの順番を意識せずに設定することができます。 「PL/SQLユーザーズ・ガイド及びリファレンス」を参照してみてください。
データの中がどういう状態かわかりませんが、 こんな感じではいかがですか？ select C.FLD_1 , C.FLD_2 , C.FLD_3 , D.CNT from TBL_A C ( select FLD_1, FLD_2, count(B.*) CNT from TBL_B where FLD_1 = test1 and FLD_2 = test2 group by FLD_1, FLD_2 ) D where D.FLD_1 = C.FLD_1 and D.FLD_2 = C.FLD_2
エラーメッセージはどのようなものが出ていますか？ ちなみに >cn.ConnectionString = "Provider=OraOLEDB.Oracle;Data Source=*;User ID=*;Password=*;" の >Data Source=*; Data Source=接続文字列; >User ID=*; User ID=オラクルユーザ; >Password=*; Password=オラクルユーザのパスワード; にしたら接続できました。 ＃OracleClientは10gを使いましたけど （自分の環境がそれしかない） それと、 >If TextBox1.Text = cmd.CommandText Then なんで発行したSQLと比較しているんでしょう？ ＃本質問には関係ない箇所ですが(^^;
No1です。すいません、ちょっと違うみたい。
create database はデータベースを作成するためのコマンドですので、 既に存在するデータベースにログインした状態で発行してもエラーになるのは分かりますか？ 一度マニュアルで作成の手順を確認されたほうが良いと思います。 分からずに発行したコマンドで既に稼動しているデータベースを壊してしまうかもしれませんので。
既にn_breakdownさんに書かれてしまいましたが SQLリファレンスの「SQL問い合わせ及び副問い合わせ」の「結合」に 「結合演算子（+）は任意の式ではなく、列にのみ適用することができます。」 とありますので、TO_DATEやTO_CHAR、truncではエラーになります。 9i以降であればleft joinを使って select a.x from a left join b on a.x=b.z and trunc(b.w) =trunc(a.y) where b.z is null ではどうでしょうか？ ＃8iだとちょっと副問い合わせ（もしくはview）を使うしかなさそうです。
>両者のメリット・デメリットがイマイチよく分かりません。 >（パフォーマンス的にどちらが良いなどもあるのでしょうか？） RAIDを構成している等で多少パフォーマンスに影響する可能性 はありますが、最大は管理面だと思います。 たとえば4GBの表領域の場合 (a) 2GB×２ (b) 4GB×１ の場合、障害が発生したときに2GBを復旧するのか4GB復旧するか 変わってきます。 > また表領域のmazsizeの上限値は通常どれほどにしておくべきなのでしょうか？ 私は運用機については自動拡張にはしないので、MAXSIZEは指定 しません。 容量計算した結果×安全係数分の容量をあらかじめ確保します。 単体で使用するDBで容量が算出できないもの（いくら使うのか 分からないもの）は自動拡張でMAXSIZEが8GBとかにはしますけど。 ＃昔は１ファイル最大２ＧＢとかで区切っていましたが、大きい ＃表領域が必要な場合、何十個も作るのがいやなので、それなり ＃に大きい値(ＯＳとＤＢの両方の)ファイル最大サイズを気に ＃しながら設定します。 注）あくまでも個人的な指標なので他の人とは違う可能性は大いにあります。
シェルの変数展開は、そのとき読み込まれているシェルスクリプトにしか適用されませんので、SQLスクリプトファイル内に記述しても展開されません。 sqlplusの起動時引数で渡すとか、sedで置換したファイルを読み込むとかで対応しては。
SPFILEをお使いのものとして、お答えします(テキストの初期化パラメータ・ファイルならそのまま修正すれば終わりなので)。 SQL文の"CREATE PFILE"と"CREATE SPFILE"はインスタンスの起動前でも使えるようなので、以下の方法を試す価値はあると思います。 (1)現在のSPFILEを別名でバックアップ (2)CREATE PFILE='xxx' FROM SPFILE='yyy'; で、テキスト形式の初期化パラメータ・ファイルを生成する。 (3)(2)で生成したテキスト形式の初期化パラメータ・ファイルを修正する。 (4)CREATE SPFILE='yyy' FROM PFILE='xxx'; で、(3)の修正結果を反映したテキスト形式の初期化パラメータ・ファイルから、SPFILEを生成する。 (5)DBの起動を試す。
こんな感じでいかがでしょうか。 SELECT 　 TABLE1.NAME 　,TABLE2_V.NAME 　,TABLE1.PRICE 　,TABLE2_V.PRICE FROM TABLE1, 　(SELECT * FROM TABLE2 　　WHERE ROWID IN ( 　　SELECT MIN(ROWID) FROM TABLE2 　　 WHERE (ID,PRICE) IN (SELECT ID, MAX(PRICE) FROM TABLE2 GROUP BY ID) 　　GROUP BY ID 　　) 　) TABLE2_V WHERE TABLE1.ID = TABLE2_V.ID(+)
(2)と(3)は、基本的に同じに成るはずです。 問題は、(1)と比べて(2)(3)どちらが速いかですが、オプティマイザの賢さと、 データ量及び索引の有無で答えが変わります。 テーブルＡ及びＢのCODEに索引が付けてあって、テーブルＡ件数がテーブルＢより極端に少ない場合、 (1)の方が速いと思いますが・・ 実行計画を出せば、どちらが速いか判断出来ますので、確認されるのが一番です。
Oracle E-Business Suiteのことです。 財務、人事、購買、ＣＲＭ、ＳＣＭなどのＥＲＰ製品群とＢＩやＥＡＩ、ＲＦＩＤ、ＧＩＳなどミドルウェア製品群の総称です。 参考URL：http://www.oracle.co.jp/applications/index.html
プラットフォームやバージョンが相違しても、エクスポート／インポートは可能ですが、 それはデータの互換性についてであり、サーバとクライアントツールのバージョンは エクスポート元サーバのバージョンとインポート先サーバのバージョンで組み合わせを 限定されています。 例えば、Oracle9i→Oracle8のデータ移行の場合、 Oracle8付属のエクスポートツールでエクスポートしなければいけません。 逆に、Oracle8→Oracle9iのデータ移行の場合、 Oracle8附属ツールでエクスポートし、Oracle9i附属ツールでインポートします。 単純に、Oracle9iのバックアップ目的であれば、 Oracle9i附属ツールでエクスポートしてください。 そうしないと、Oracle9iの新機能に関するオブジェクトが保存されません。
下記のFORMAT指定でどうでしょうか？ TO_CHAR(vCnt, 'FM00000') ちなみに、符号用として1桁確保しているようです。 FMを付けると前後のスペースを取り除きます。
下記の要領でどうでしょうか？ ※変数の定義 var c1 number; var c2 number; var r1 number; ※実行 exec procXXXXXXXX(:c1, :c2, :r1); ※結果の確認 print c1; print c2; print r1;
私の会社では既存のJava資源が多数あったために、ストアド化することで開発工数が増加するため採用されませんでした。 アプリケーションサーバ側での実相が有利と思う点は、 多数存在するフレームワークや開発効率を上げるためのツールが使えるというのは大きいと思います。 データベース内にビジネスロジックを乗せないという観点からだと、 「各サーバには特定の仕事だけをさせた方が安定する」 と思っています。 ビジネスロジックをデータベース内に持つとリソースのサイジングが難しくなるし、そのための設定を行う必要がある場合もあります。 障害時の切り分けも難しく(複雑に)なります。 と、いうことでビジネスロジックはアプリケーションサーバ側のJavaで実行する方がよいと思います。 あと、社内の反対意見の根拠や情報ソースをきちんと確認されるべきだと思います。
x$やv_$はsystem表領域が作成されるときに自動的に作成されるためないことはありえません。 権限がただ単にないだけと推定されますがいかがでしょうか？ v_$はsysユーザしかセキュリティの観点からアクセスできません。
一番簡単な方法は、邪魔になる参照制約を無効にして、 rename emp to emp_bak; create table emp ( ...... ) partition by ... ( ...... ); insert into emp select * from emp_bak; drop table emp_bak; 最後に、emp 表に索引や制約を付けて完了！ っていうところでしょうか。 insert の前に索引を付けてしまうと、データ件数が多い場合、insert に膨大な時間がかかってしまう恐れがあります。
desc <table名>; では駄目でしょうか？ もし、テーブル名がわからないのでしたら、以下で一覧を表示して上記のコマンドで。 select table_name from user_tables;
結論から言えば、ディクショナリ管理の時とは異なり、フラグメンテーションについてはあまり気にしなくても良いと思います (フラグメンテーションが領域の無駄遣いにはなっても性能への影響がディクショナリ管理の場合に比べて極端に小さい)。 ただ、どうしてもフラグメンテーションを起こさせたくないのであれば、表領域を作成するときに uniform 指定をしてあげればよいです。(デフォルトは autoallocate 既に存在する表領域を uniform 指定に変更することはできません) create tablespace example datafile 'c:\oracle\oradata\orcl\example01.dbf' size 10m uniform size 64k; ^^^^^^^^^^^^^^^^
A,B間の明細番号が一致しないのであれば、次のSQLでいけると思いますよ。 update B set TAX=(select sum(TAX) from A where A.伝票番号=B.伝票番号) where (伝票番号,明細番号) in (select 伝票番号,min(明細番号) from B) ; 変更点が少ないのでお間違いなく。
実機で試した結果下記の通り、算出することができます。 select floor(sum_sec/3600) HOUR floor(mod(sum_sec/3600)/60) MINUTE floor(sum_sec - floor(sum_sec/3600)*3600 + floor(mod(sum_sec/3600)/60)*60) from (select abs(DATEA-DATEB)*24*60*60 sum_sec from (select TO_DATE('20060101100000','YYYYMMDDHH24MISS') DATEA ,TO_DATE('20060101090000','YYYYMMDDHH24MISS') DATEB from dual) ) ;
SELECT CODE1,CODE2,MONEY, sum(MONEY) over(partition by CODE1,CODE2) FROM "テーブル" ORDER BY CODE1,CODE2 ではどうでしょうか？
DBのパフォーマンスが悪くなった場合は、 １．　アナライズを実行する。 ２．　SQLの見直しをする。 　　　SQL trace を取って、FULL　SCANしているような 　　　SQL を見直す。 ３．　DBのチューニングをする。 というような感じです。 DB自体のチューニングを行う前に、アナライズをしたほうが いいです。（対して手間がかからないので） OracleDBは、検索パスを決めるのに、COSTベース　オプティマイザ を使用しています。 そのCOSTを決定するのに、統計情報を使用します。 統計情報は、テーブルの件数やばらつきなどの情報です。 その統計情報を収集するのが、アナライズです。 古い統計情報のテーブル、スキーマだと、 極端にパフォーマンスが悪くなる場合があるので まず最初にしたほうがいいです。
単に項目の追加だけなら特に問題はありません。 厳密に言えば表領域のサイズ計算の目算が若干変わってくるくらいでしょうか？
私がよく使う方法は、 --- startup.sql --- conn sys/xxxx as sysdba spool startup.log startup spool off exit --- dbstart.sh --- #!/bin/sh sqlplus /nolog @startup.sql grep ORA- startup.log if [ $? -eq 0 ] ; then echo "NG" fi という具合に、結果をspool(もしくは標準出力をリダイレクト)し、ORA-から始まるエラーがあれば異常発生とします。
> 「無効なSQL文です。」というエラーで出てしまいました。 これってORA-900ですか？ DBの作成はどうやって作成しました？DBCA？インストール時のDB？ コマンドで作成した場合、catalog.sql, catproc.sql は実行しましたか？ ＃エラーが発生したときのエラー番号は記載するようにしましょう。
私はOracle版しか使っていないので明確な回答はできませんが、 Microsoft版の方は、データソースを登録するときにオプションでバッファ サイズが指定できますが、この値とかは関係していないでしょうか？ 一度、データソースの構成で変更して違いが無いか確認されてみては どうでしょうか？
PL/SQLで対応する例です。 declare 　cold varchar(5) := ' '; 　nno integer; 　cursor c1 is 　　select コードA,コードB,rowid from tbl 　　order by コードA,コードB; begin 　for c1_rec in c1 loop 　　if cold != c1_rec.コードA then 　　　nno := 1; 　　else 　　　nno := nno + 1; 　　end if; 　　update tbl 　　set No = nno 　　where rowid = c1_rec.rowid; 　　cold := c1_rec.コードA; 　end loop; end; /
CTRL+C で、中断されると思います。
一番判りやすいのは、 select * from (select * from a,b,c where ~ ) as x,d where ～; のように、２段階に分けることかと思います。 ただ、説明にあるようなデータの意味合いから行けば、 select * from a,b,(select * from c,d where 内部結合条件) where ～; のような書き方が考えらるような気がします。
#3です。 karen237さんの提示した条件に以下の表現があります。 　A.AAA = 1 AND B.BBB(+) = 0 ここから、以下のように推測しました。 1.A.AAA=1の場合に結合されるB表のレコードはB.BBB=0。 2.A表とB表の結合条件は 項目BBBの前提ですので、B.BBB=0はすなわちA.BBB=0 ただし、データとしてA表のAAA=0のレコードについてはBBBがB表との結合値として有効であるが、 AAA=1のレコードのBBBはB表と関連がない値であるならば私の提示した回答では解決しません。 （文章ではややこしいですが、下記の状態で、A表のレコード(1)(2)ともB表の(1)と結合するということ） A表 　　AAA　BBB (1)　1　　　0 (2)　1　　　9 B表 　　BBB　CCC (1)　0　　　データ0 それであれば素直にA.AAA=0の場合と1の場合とでSELECT文を分けて、UNIONすべきかもしれません。 とすると、以下のようにできますか？ただし、これだとB表に必ずBBB=0のレコードがある必要があります。 （B.BBB (+) = 0としてもだめだと思います） SELECT A.… FROM A,B WHERE A.AAA = 0 AND A.BBB=B.BBB(+) UNION ALL SELECT A.… FROM A,B WHERE A.AAA = 1 AND B.BBB = 0 質問文には「Bテーブルに存在しなくともAテーブルを抽出したい」とあり、BBB=0のレコードがなくても A表のレコードをSELECTするならばさらに複雑にしなくてはなりませんね。
alter table table_name drop column column_name; で削除できない場合は、制約が対象でない列も参照している場合はエラーが戻されます。 通常であればデータがあっても削除できます。 その列を使用している制約を変更して実行するか　cascade constraints句を指定（この場合、制約も削除される）してみてはどうでしょう？ ＃せめてオラクルのバージョンは書きましょう。
update W set (数11,数12,数13,数14,数15)=( select sum(decode(Y.コードB,11,数,0)), sum(decode(Y.コードB,12,数,0)), sum(decode(Y.コードB,13,数,0)), sum(decode(Y.コードB,14,数,0)), sum(decode(Y.コードB,15,数,0)) from Y where W.コードA=Y.コードA and W.コードB>=Y.コードB ) こんな感じかな。テストしてないけど。
異なるバージョンをインストールすることはFudaKejiさんが おっしゃるようにイレギュラーではないです。 別バージョンのOracleを１台のマシンにインストールする場合は Oracleホーム名、Oracleホームのディレクトリを別にする事を 守れば大体動作します。 ただし、両サーバでLISTENERを起動するとポート(1521)がカブるので 注意してください。 また、クライアントの場合、たしかに「HomeSelector」である程度 切り替わるのですが、一部のコンポーネントで共存できないものが あります。今回はサーバみたいですので関係なさそうですが。 サーバでコマンドのsqlplusを使用するときは環境変数ORACLE_SIDを 設定する事で切り替えることができるはずです。 アンインストールはWindowsの場合、難しい（レジストリを削除する 必要がある）のでちょっと大変ですよ。 （インストールマニュアルに(Oracle製品すべての)アンインストール 手順が載っているので参考してください）
望む表領域へ自由なインポートがしたい場合、予め表定義や索引定義を行ってしまうのが良いでしょう。 元にするSQLは、インポートユーティリティを使って、ダンプファイルから捻出できます。 SHOWパラメータを指定することで、実際のインポートを行わず、発行予定のDDLを表示します。 それをコピペして、好きに直して投入すれば、事前作成が簡単です。 その後、ignore=yパラメータ付きで、データをインポートすれば良いでしょう。
PL/SQLでつくってみました。 １文字づつチェックしているので、ちょっとスマートではないかも知れませんが・・・・ create or replace function GET_ALPHA_NUM(STR IN VARCHAR2) return varchar2 is Result VARCHAR2(300); --結果 STR_TMP VARCHAR2(300); --チェック用の文字列（大文字にして格納） CHK_CHAR VARCHAR(2); --バッファ CHK_CHAR_CODE NUMBER; iLoop NUMBER; begin STR_TMP := NLS_UPPER(STR); --大文字にして格納（全角もとりたい場合はさらにTO_SINGLE_BYTE関数をかける） --1文字ずつチェックする For iLoop in 1 .. LENGTH(STR) LOOP CHK_CHAR := SUBSTR(STR_TMP, ILOOP, 1); --チェック文字 CHK_CHAR_CODE := ASCII(CHK_CHAR); --文字のコード IF CHK_CHAR_CODE >= ASCII('A') AND CHK_CHAR_CODE <= ASCII('Z') THEN --文字がA～Z Result := Result || SUBSTR(STR, ILOOP, 1); ELSIF CHK_CHAR_CODE >= ASCII('0') AND CHK_CHAR_CODE <= ASCII('9') THEN --文字が1～9 Result := Result || SUBSTR(STR, ILOOP, 1); END IF; END LOOP; return(Result); end;
皆さんが回答しているようにデータディクショナリを参照するのが 基本中の基本で、まずそこから勉強するのがいいと思いますが、 以下のようなGUIを使う手もあります。 1)　Enterprise　Manager(これはエンタープライズエディションのみかな？） 2)　SQL Developer (Oracleのサイトから無償ダウンロード） 3)　Common SQL Environment (Officeがあれば、仕様書も作成できます） 確認方法を複数知っていることは損はないと思います。
こんな感じでかけます（スキーマ名はちょっと外しました）。 大文字の箇所を参考にしていただければ。 USING INDEXの後にTABLESPACE句が書けます。 create table m_user( id char(4), name varchar2(40) not null, constraint pk_user primary key(id) USING INDEX TABLESPACE INDX ) TABLESPACE USERS; ちなみにその後ろにSTORAGE句も書けます。 最後の行のTABLESPACE句は表の表領域を指定する場合です。 ＃こういうSQLがわからない場合、マニュアルを見るクセをつけていった方がいいと思いますよ？ ＃マニュアルはOTN(ORACLE TECHNOLOGY NETWORK)でダウンロードできます。 ＃（要ユーザ登録（無料）） 参考URL：http://otn.oracle.co.jp/
こんにちわ。 9.0.1 でしたら、Oracle のバックグラウンド・プロセスの幾つかに メモリ・リークがあったと思います。 とりあえず、初期化パラメータに JOB_QUEUE_PROCESSES=0 AQ_TM_PROCESSES=0 を指定してインスタンスを再起動してみてはどうでしょう？
ソースとなるレコード１行に対してＮ行を生成するにはループ処理が必要で、通常のDMLでは無理と思います。 PL/SQLのサンプルを書いてみましたので参考になれば。 DECLARE CURSOR C IS SELECT "日付", "区分", "開始番号", "終了" FROM "TBL" WHERE "日付" BETWEEN '2006-10-11' AND '2006-10-11' ; LOOP_IDX NUMBER; BEGIN FOR R IN C LOOP FOR LOOP_IDX IN R."開始番号"..R."終了" LOOP INSERT INTO "新規TBL" ("日付", "区分", "番号") VALUES (R."日付", R."区分", LOOP_IDX) ; END LOOP; END LOOP; COMMIT; END;
例えば2006/10/11の週を求めるなら select to_char(to_date('2006/10/11','YYYY/MM/DD'),'w') from dual; ではどうでしょうか？
僕も、CPU、メモリについては悩ましい面があるのですが、 個人的には、同じ時期に買うCPUの速度差はシングルCPUでせいぜい２倍くらい、多くても１０倍ですよね？ その程度ならDBのチューニングという意味では悩むだけムダと感じています。 顧客等にサイジングの理由を求められる場合などでは、言い訳にこまりますけど・・・ メモリ量については、SGAでどのくらい消費するかで大体検討をつけることも できますが、DBの用件でそのほかに（Regoログなど）メモリに置きたい ものがどれだけあるかでも変わってきます。 No1の方が仰られてるとおり、まず、販社に相談するのが手っ取り早いと思います。 不安要素が多いのであれば、RACでも組んでおけば機器を増やせば なんとかなる、と逃げれそうですが。
#1さんのおっしゃるようにテーブルの定義があいまいで、特に一意となるキーがわからないのでなんともいえない部分もありますが。 いずれにしても、ご自身で書かれているように"DATE"が同日ごとに最大のレコードを取り出す必要があるため、ひとつのDMLでは難しいのではないでしょうか。日付ごとにループ処理するのが簡単と思います。 PL/SQLでサンプルを書いてみましたので参考になれば。 DECLARE CURSOR C IS SELECT TRUNC("DATE") DATE_MAX FROM A WHERE UPDATED BETWEEN '一昨日' AND '昨日' GROUP BY TRUNC("DATE"); BEGIN FOR R IN C LOOP INSERT INTO B (DATE,NAME,ID) SELECT DATE,NAME,ID FROM (SELECT * FROM A WHERE TRUNC("DATE") = R.DATE_MAX ORDER BY "DATE" DESC ) WHERE ROWNUM = 1 ; END LOOP; COMMIT; END;
＃１です。 http://www.oracle.co.jp/products/system/matrix_d … で対応する組み合わせかどうか確認してみましたか？ 特にOracle Net（Net8）の組み合わせを確認してください。
SELECT LINE,TEXT FROM USER_SOURCE WHERE NAME = procedure_name ORDER BY LINE 上記のＳＱＬを流せば現在ＤＢに適用されているモジュールソースを取得することはできますが・・
こんにちは >7.アラートログにはログスイッチ発生によるものと >思われるメッセージが大量に出ている。 「大量」の程度ですが、1MBのREDOログが１分間に何回も発生しているという状況でしょうか？ 業務的な要因がないのにREDOログが出ることはほとんどない（最近のOracleは別）ので、Oracle内部の何らかの問題でディクショナリが更新され続けていることを疑ったほうがよいと思います。 私の経験では、無風状態にもかかわらず、インスタンス起動直後からいきなりログスイッチが発生しつづけるといった事象に遭遇したことがあります。 業務のレスポンスも大幅に劣化しました。 Oracleバージョンも同じ8.1.7でした。 この時の対処は、サポート契約に入っていなければとても解決できるようなものではありませんでした。 （せめて製品の不具合は無料で公開してほしいものですが・・） 回答にはなっていなくてすみません。
８ｉと１０ｇの同居は、基本的に可能です。 但し、マルチホームに対応していない一部の製品はインストールしてはいけません。 ８ｉ側が壊れます。 １０ｇのクライアント機能で、何が使いたいかを考えてインストールしてください。 （特に、ODBC,oo4oあたり）
>「～」文字を登録する場合はSQLで何か処理しないといけないのでしょうか。 基本的に、unicodeのコードマッピングの問題ですが・・ オラクルでは、特定のバージョンや環境、使い方で起こる問題です。 よって、根本的解決には、オラクルの環境変更が必要になると考えてください。 （SQL文で根本解決はしない） もっとも、チルダ「～」をデータベース上に使わないよう小細工するなら SQLで対応可能です。 （たとえば、ハイフン「－」に置き換えてしまうとか）
環境がはっきりしませんが・・ MACからunixサーバへログオンして、SQL*PLUSを利用しているのであれば、 unixサーバ上にスクリプトを配置することで、「@ファイル名」を利用可能です。 SQL*PLUSの動作している機械からアクセスできるところにスクリプトが なければダメです。
>(1)最大エクステント数の広げる方法 環境がないので確認できませんが alter table <テーブル名> storage (maxextents nnn) nnnに最大エクステント数の数(unlimitedも可)。 それができないのであれば (1) 対象テーブルをexport(パラメータにcompress=yを指定) (2) 対象テーブルをdrop (3) 対象テーブルをimport(initialが大きいテーブルで作成してくれる) (4) storageのnextをalter table文で変更しておく(データ増加を考慮した値に変更)。 >(2)エクステント数が最大に近づいているテーブルの調べ方 dba_segments(user_segments)などのextentsとmaxextentsを確認すれば 調査できると思います。
k_o_r_o_c_h_a_nさんが回答されているようにカーソル変数（ref cursor）を使用すれば解決できると思います。 カーソルパラメータは条件の定数としては使えます。 ＃ポイント辞退
とりあえず、DBの問題ではないことを事後に証明するなら ・アラートログにその時間帯にエラーが出ていないこと ・DBサーバのシスログ（イベントログ）にOracle、ネットワークに関するエラーが出ていないこと くらいでしょうか？ それと、その時間帯にsqlplusを起動して繋がらないのを確認したのであれば、sqlplusを実行したフォルダにsqlnet.logがあるはずなので、その内容を調べてみるのが良いかと。 もしlistenerのログを出力しているのであれば障害が発生した時間帯にリスナーまで届いているかを調べることもできそうです。24時間稼動DBならリスナーの状態を確認すれば、listenerが停止してないことも証明できそうです。
COUNT(*)はNULLを含む件数 COUNT(expr)とCOUNT(ALL expr)はexpr列のNULLが含まない件数 COUNT(DISTINCT expr) expr列の種類(null以外) です。 たまにcount(1)の記述を確かに見受けます。 これは「select 1 from <TABLE名>」でカウントした結果と同じです。 （つまり、count(*)と同じ件数になるはず） ＃ためしにCOUNT(DISTINCT 1)とかすると1になるはずです ＃１番目の列ではないはず
件数については count(*) で取るとして、 ディスク容量につていは DBA_SEGMENTS ビューをリファレンスで調べてみて下しさい。 BYTES列を見ればセグメント(表)毎のサイズが見れるはずです。
非常に安易な考えですが、外部結合の記述で長くなるのなら、Viewにすれば短くなるのでは？Viewはsekect文の集まりなので遅くはなりますが。
4ページ目に展開する明細レコードに関して、 ・ヘッダーレコードは存在する ・しかし、それにぶら下がる明細レコードが存在しない という可能性が考えられますが、その辺は確認できていますか？
EMで停止とかしたことないので、現象的に分かりませんが、 >【Environment variable ORACLE_SID not defined. Please define it.】 コレについては ORACLE_SID環境変数が設定されていないと出てきます。 ですから C:\> set ORACLE_SID=orcl ('C:\>'はDOSプロンプトでorclはSIDに置き換えてください) でORACLE_SIDを設定してみてください。 emctlはWeb版のEMだけしか起動/停止できないです（多分）。 OEMからのアクセスでEMが停止するとも思えないのですが・・・。 DBを起動する場合 C:\>sqlplus / as sysdba でログインし startup open で起動してみてください。
・大容量のUNDO（rollback）セグメントを消費する ・ロールバックするときも、今までの処理時間以上に時間がかかる などの問題があります。 私は通常そういった大量のUNDO領域を生成しないためにも 何件かに1回コミットするように処理します。 ＃絶対１トランザクションでやらなければならないのであれば仕方ないですけど。
ネットサービス名はクライアントがOracleインスタンスへの接続につける名前だ。この名前はクライアントが自由につける事ができる。 グローバルデータベース名は、Oracleインスタンスに対する、ん～、グローバルな名前、だよ、うん。大規模なシステムで無い限り、Oracleインスタンス名と同義と思って良いでしょう。 グローバルDB名はサーバに対してつける名前、ネットサービス名は、サーバに接続する設定に対して付ける名前、ゆう事かな。
select A.Row_ID from tblA A where not exists (select 'X' from tblB where Row_ID = A.Row_ID) and not exists (select 'X' from tblC where Row_ID = A.Row_ID) and not exists (select 'X' from tblD where Row_ID = A.Row_ID) order by Row_ID; ではどうですか？
ヘルプのツールバーとか見れば書いてます。 新規作成(&N)Ctrl+N 新規SQLスクリプトの編集ウィンドウを開きます。 開く(&O)...Ctrl+O 既存のSQLスクリプトを開きます。 上書き保存(&S)Ctrl+S 現在編集中のSQLスクリプトを上書き保存します。 切り取り(&T)Ctrl+X 選択された範囲の文字列を切り取ります。 コピー(&C)Ctrl+C 選択された範囲の文字列をコピーします。 貼り付け(&P)Ctrl+V クリップボードに格納された文字列を貼り付けます。 検索(&F)...Ctrl+F 検索ダイアログを表示します。 元に戻す(&U)Ctrl+Z 直前に行った編集操作を取り消します。メモリの許す限り元に戻すことが可能です。 やり直し(&R)Ctrl+Y 直前に行った編集操作をやり直します。メモリの許す限りやり直すことが可能です。 コメントブロック(&B) 選択された文字列/選択されていない場合は全体の各行先頭にコメント文字列を付加します。 非コメントブロック(&U) 選択された文字列/選択されていない場合は全体の各行先頭のコメント文字列を削除します。 印刷(&P)...Ctrl+P 現在編集中のSQLスクリプトを印刷します。 cse のバージョン情報(&A)... バージョン情報ダイアログを表示します。 など
>begin >execute immediate 'purge recyclebin'; >end; >/ その手がありましたね。失礼しました。
char型(固定長)なら、定義した列長になるまで後ろに空白を埋めているはずなので、質問に掲げたようなことにはならないはずです。いくつか考えられることを書いておきます。 (1)"COLUMN KOU1 FORMAT A4"のように、各列の出力書式を指定してみてはどうでしょうか。 (2)(Windowsの場合)出力を等幅フォント(MSゴシック等)で見ているかどうか確認下さい。
欲しい情報とちょっと違うかもしれないですけど 特定のSQLの処理時間を調べたいのであれば、 SQL_TRACEとTKPROFユーティリティを使えば SQLの実行時間を取得することができます。 出力先はテキストファイルです。
配列はあるにはあります。 http://homepage2.nifty.com/sak/w_sak3/doc/sysbrd … ただ、私の場合、テーブルの列としては使用しません。 （参照とか面倒なのと、開発で使用する言語で使える／使えない等がありそうなので。）
CTRL+Cで強制的に処理を中断できます。 参考URL：http://www.causu.com/dos_co.htm
件数を取るためのViewを作ってみては？ 基がそれだけの件数だとレスポンスは遅いとは思いますが、カウントのSelect文を投げるよりはましになるんじゃないかと... 推測の域を出ていません。ごめんなさい。
＞次のようなＵＰＤＡＴＥ文を実行することはできますか？ エラーになり実行できないと思いますがどうですか？？？ SET文に、 A.A1 = A.A1 + B.B1 と書いても、「B.B1」がなんのことか、DB側には分かりません。 EXISTSはあくまで、「Bに存在する行を」という更新の対象の行を絞る条件にしかならないので、 SET文でBのB1値を使いたいなら連結しなくてはいけません。 副問い合わせにしたらいかがですか？ UPDATE TBL_A A SET A.A2 = (SELECT A.A2 + B.B2 FROM TBL_B B WHERE A.A1 = B.B1) WHERE EXISTS (SELECT * FROM TBL_B B WHERE A.A1=B.B1) こんなかんじです。 ちなみにEXISTS文なりなんなりの「A1がB1に存在している場合のみ」 というWhere句は必要です。 上記のSQLにEXISTS文がない場合、 Bに存在しないAの行（A1が2と5の場合）もUPDATE文の対象となり、 Bとの連結の結果がNULL値になるので、 その行のA2の値がNULLで更新されてしまいます。 NULL値の加算はNULLだからです。 ↓以下のようになります。 A1　　A2 ----------- 1　　200 2　　Null 3　　600 4　　800 5　　Null あまり意味がわからないかもしれませんが、 とりあえず、簡単なテーブルでも作って、 試してみてはいかがでしょうか。
SQLリファレンスで"CREATE VIEW"の部分を見ると、以下のように書かれています。 「ビューが含まれているスキーマの所有者は、そのビューの基礎となっているすべての表またはビューに対する行の選択、挿入、更新または削除の権限が必要です。また、所有者には、これらの権限がロールを介してではなく、直接付与されている必要があります。」 "DBA"はロールなので、CREATE VIEWを成功させるための条件にはなりません。表のSELECT権限を直接与える必要があります。
MySQLAdminみたいなツールですが SI ObjectBrowser Ver9 があります。 有料ですが、使いやすいツールだとおもいますよ。 トライアル版が有りますので、試して見られたら良いと思います。 参考URL：http://www.sint.co.jp/siob/default.asp
オラクルのサイトに各ＯＳ向けのお試し版がおいてあります。 使用期限がありますが、期間内は製品版と同様の機能を確認できるモノです。 無料ですが、ユーザ登録を行う必要があります。 またインストールですが、マニュアルは一読した方が良いと思いますが、 インストールの難易度は高くありません。（サル並みでＯＫ） 以前、イベントでガッツ石松とサルがインストールの競争をしました。 サルの勝ちだったと記憶しています。
＞オブジェクト所有者が含まれるようにオプション指定するにはどうしたらよいのでしょうか？ エクスポートのモードを、FULLとするか、ユーザモードでエクスポートする。 ユーザモードの場合は、シーケンスを所有するユーザを忘れない。 という普通のエクスポートです。 詳しくは、ユーティリティマニュアルをご覧あれ。
結合条件が不完全だからじゃないですかね。 SELECT 在庫ファイル.品番, 在庫ファイル.メーカー, NVL(商品情報.原価,0) FROM 商品情報M, 在庫ファイル, /* 邪魔 棚卸ファイル, */ ( SELECT 品名情報M.品番, 品名情報M.メーカー, MAX(品名情報M.適用日) MAX日付 FROM 商品情報M, 在庫ファイル, 棚卸ファイル WHERE 在庫ファイル.メーカー = 商品情報M.メーカー AND 在庫.品番 = 商品情報M.品番 AND 棚卸ファイル.棚卸日 >= 商品情報M.適用日 /* 追加 */ AND /* 追加 */ 在庫ファイル.メーカー = 棚卸情報ファイル.メーカー AND /* 追加 */ 在庫ファイル.品番 = 棚卸情報ファイル.品番 )SUB_Q WHERE SUB_Q.MAX日付(+) = 商品情報M.適用日 AND 在庫ファイル.メーカー = SUB_Q.メーカー(+) AND 在庫ファイル.品番 = SUB_Q.品番(+) ;
