お詳しい方に質問です。 猿でも判る簡易な説明を御願い致します。 タイマー1個と電磁弁・ランプ・押しボタン２個を使用して 自己保持風な回路を作ってみました。 しかし上手く動作しません。 動作は スイッチ1押す(ランプ1on)→電磁弁1ランプ2・タイマーがon(ランプ1off)→ タイマー・電磁弁1がoff同時に電磁弁2がon→ スイッチ2onで電磁弁2off(ランプ1on) がワンサイクルの予定でしいます。 このような回路では、だめだめでした。 申し訳ございませんがご教授の程、 宜しく御願い致します。
Rubyを今から２～３年くらいで仕事に使えるレベルまでできるようになりたいんですけど、 おすすめの参考書などを教えてほしいです！ とりあえずCodeAcademyでRubyの基本の基本は一通り勉強しましたが、全然足りない気がします。 プログラミングは全くやったことはありません。
http://mirichi.github.io/dxruby-doc/tutorial/spr … このページのライフサイクル管理のところなのですが というより、これを実行すると四角形がたくさん流れてきますが この流す数はどこでどのように設定しているのでしょうか？ あと s = [] count = 5 Window.loop do count -= 1 if count == 0 s.push(MySprite1.new) count = 20 end Sprite.update(s) Sprite.draw(s) Sprite.clean(s) end この部分のcount = 5 count -= 1 if count ==0 count = 20 の意味を教えて下さい http://ref.xaio.jp/ruby/classes/string/count このサイト様のcountを僕なりに解釈すると渡された文字数の中にある 引数で指定された文字を調べている という風に思ったのですが これって不変じゃないのでしょうか？ 長文失礼しました 教えていただけると助かります
つい先程日本語で関数や変数を書けることを知りました。 ちょー便利でちょー楽しいです。 私、中学2年生レベルの英語力しかなくて(TдT) C++言語を使用していた時にはgoogle翻訳でいちいち日本語->英語に変換していてとっても苦痛でした。 # -*- coding: utf-8 -*- def 二倍( a ): return a * 2 芋けんぴ = 3 共通語 = 10 共通語 += 10 print(芋けんぴ, end="") print(共通語) print( 二倍(共通語))
python = "python" 0123456 -6-5-4-3-2-1 正の数は要素が７個あるのですがなんでですか？
Ruby1.8で「moji」を使ってプログラムを利用したのですが、 Ruby2.0になると、使えなくなりました。 代わりのものはありますか。 親切な方に教えて下さいませんか。 宜しくお願いします。 #!/usr/bin/env ruby $KCODE= "UTF8" require 'moji' while gets 　　$_.chomp! 　　f = $_.split(/\t/) 　　word = f[1] 　　if word == "eps" 　　　　puts "#{f[0]}\t#{word}\t#{f[2]}\t#{f[3]}\t#{f[4]}" 　　else 　　　　if word =~ /:/ 　　　　　　tmp = word.split(/:/) 　　　　　　wout = tmp[0] 　　　　　　if wout =~ /^#{Moji.alnum}+$/ 　　　　　　　　wout = Moji.zen_to_han(wout) 　　　　　　　　if wout == "" or wout =~ /\s/ 　　　　　　　　　　wout = word 　　　　　　　　end 　　　　　　end 　　　　　　puts "#{f[0]}\t#{wout}\t#{f[2]}\t#{f[3]}\t#{f[4]}" 　　　　else 　　　　　　puts "#{f[0]}\t#{word}\t#{f[2]}\t#{f[3]}\t#{f[4]}" 　　　　end 　　end end
Ruby on Rails でアプリを作りたいと思い、まずrailsでサーバーを立ち上げようとしたのですがうまく行きません。できるだけ細かく書いていきますが、プログラミング初心者ですので、足りない情報があればお手数ですが教えていただけるとありがたいです。 ●問題点 Webrickが立ち上がってない？ →"rails s"を実行すると、以下のメッセージが表示されます。 　⇒ Booting Puma 　⇒ Rails 5.0.0 application starting in development on http://localhost:3000/ 　⇒ Run 'rails server -h' for more startup options 　*** SIGUSR2 not implemented, signal based restart unavailable! 　*** SIGUSR1 not implemented, signal based restart unavailable! 　*** SIGHUP not implemented, signal based restart unavailable! 　Puma starting in single mode ... 　* Version 3.5.0 (ruby 2.3.0-p112), condename: Amateur Raccoon Rocketry 　* Environment: development 　* Listening on tcp://localhost:3000 　Use Ctrl-C to stop 以上です。 本来であれば、 [日付] INFO WEBrick～（以下二行） が表示されると手元の本（rails3.2.1ですが）に書いてあったので待っていたのですが、一晩経ってもここから進むことはありませんでした。 また、***で始まる三行があることも気になります。 ちなみにこの状態で"http://localhost:3000/"にアクセスすると、以下の文章が表示されます。 このページは表示できません [詳細設定] で TLS 1.0、TLS 1.1、TLS 1.2 を有効にして、もう一度 https://localhost:3000 に接続してみてください。引き続きエラーが発生する場合は、サポートされていないプロトコル、または安全と見なされない RC4 などの暗号スイート ((詳細情報のリンク)) がサイトで使われている可能性があります。サイトの管理者に問い合わせてください。 ●バージョン ・windows7 ・Ruby 2.3.1p112 x64-mingw32 ・Rails 5.0.0 ・gem 2.5.1 よろしくお願いします。
windows(ver.10)上で、Ruby/Tkを使い 簡単なGUIアプリを作成しようとしています。 下記のsampleのように、 Ruby/Tkのボタン（button）に、 特定の処理（myProcessing）を紐付けて、 ボタンを押した時に処理を実行するようにしています。 ただ、このボタン押し下げで処理を開始すると、 処理中はボタンが押し下がったままとなり、 GUIアプリがフリーズ（ハングアップ？）してしまいます。 →　ボタン押し下げの際に、 　　バックグラウンドで処理を行うようにし、 　　GUIがフリーズしないようにする方法はないでしょうか？ 　（Ruby/Tkは学習目的で使用していますので、 　　その他のツールを使えば、という以外でお願いできればと思います。） ご教示お願い致します。 === sample =================== require 'tk' button = TkButton.new{ 　　text "Processing Start" 　　width 30 　　command { 　　　　　 ### この部分の挙動 ### 　　　　　 myProcessing 　　　　　 ################ 　　　　　 Tk.messageBox('message' => 'complete!') 　　} 　　pack('side'=>'top') } ============================
クラス :Person 属性 :Id、Name、Age、Address PersonManagerというクラスがPersonManager.dllで定義されています。 PersonManagerクラスはM60.FXという名前空間で管理されています。 データグリッドビューに表示したい PersonManagerクラスのGetPersonListメソッドでPersonの一覧を取得したいです。 PersonManagerクラスのGetPersonメソッドにIdを渡すことで、そのIdに該当するPersonを取得したいです。 よろしくお願いします。
10ヶ月前にWindowsをやめてLinuxに転向した者です。 Linuxではinotifyを使って、新しいファイルが追加されたらそれを分析してPHPでMySQLに書き込むというようなことができていますが、これと同じようなことをWindowsでもやりたいと思っています。 いろいろとネット検索してrubyがいいのではないかということになって、昨日からrubyを始めました。まずはLinuxでやってみましたが以下のような感じで簡単に出来ました。 ------------------------------------------------------ require 'fssm' def create_action() system("php ./yah.php") end FSSM.monitor('/var/www/html/ruby/sample/','**/*') do create do create_action() end end ------------------------------------------------------ ところがWindowsではどうもうまくいきません。 gem install win32-changenotify で changenotify をインストールし、 require 'win32/changenotify'としても、 cannot load such file -- ffi_c (LoadError) とエラーが出てダメです。 changenotify を絶対パスにしてもダメです。 require をうまく読み込ませるにはどうしたらいいんでしょうか？
ワードプレスにテーマをインストールしたら、画面上にWarning: getimagesize(/export/cgi/wp/wp-content/uploads/2016/06/bca3df65a4ae021cc74223ce77dffa3d.png): failed to open stream: No such file or directory in /export/sd213/www/jp/r/e/gmoserver/9/7/sd0880697/yms-service.com/wordpress-4.5.2-ja-jetpack-undernavicontrol/wp-content/themes/bridge/includes/shortcodes/shortcode-elements/slider.php on line 344 と、表示されるようになりました。 消す方法を教えて頂けないでしょうか。 ワードプレス初心者で、ネット上の解説をみてもわかりません。
Ruby ユーザーです。 このたびちょっとRubyでGUIアプリを作りたくなったのですが、 ウィンドウを生成する関数を作っていただけませんか？ 解説も付けてくれたらありがたいです。 お願いします。
escとend同時に押す何だけ？
時間計算アプリでの計算のしかたを知りたい、 例 8時00分から13時00
aaaa_bbbb.txt cccccc_ddddd.jpg のようなファイルが入ったフォルダの中身を、 aaaa.txt cccccc_ddddd.jpg にバッチで処理したいです。 ファイル名の何桁目かに必ず_が入るので、 ファイル名の先頭から最初の _ 以降(_を含み)の文字を削除したい。 ついでにtxtのみ処理したい。 他のページで以下のコードを見つけたのですが、これは_より前を削除するので 使えませんでした。 よろしくお願いします。 ____________________________________________________ echo off for /F "delims=" %%f in ('dir /b') do call :sub "%%f" exit /b :sub set fname=%~1 set n=0 :loop call set c=%%fname:~%n%,1%% set /a n=n+1 if "%c%"=="" goto :EOF if "%c%"=="_" goto break goto loop :break call set newname=%%fname:~%n%%% if "%newname%"=="" goto :EOF if "%newname:~0,1%"=="." goto :EOF ren "%fname%" "%newname%" goto :EOF ____________________________________________________ ps. コードの解読に挑戦して随分と調べましたが、恐らくこの２行の 意味が理解できたら改良できたのかもしれません。 意味を教えてもらえるとありがたいです。 =%%fname:~%n%,1%% if "%newname:~0,1%"==
RPGツクールvxaceのスクリプトについて質問です。 先日CACAOSOFT様の「カスタムメニュー」を使おうと思い、 スクリプトを設定してみたのですが、 テストプレイを起動すると、○○行目でエラーが発生しましたと表示され、 テストプレイができなくなりました。 スクリプトについての知識が皆無なもので、サイト様の説明も読みましたが意味が分かりません。 一応自分なりに色々と試してみましたが、無理でした。 画像の38行目でエラーが発生します。どこをどう直せばいいのか、教えて下さい。 個人的にはメニューのコマンドの一部だけが表示されるようにしたいです。
rubyで2次元配列あるいはさらに高次元配列を読み込む方法、および書き込む方法について例を上げて説明していただけると助かりますが。 2次元配列の形式はちょうどエクセルのスプレッドシートと同じです。 フォートランだったら次のような感じです。これのruby版ということですが。 open(10,file='...') do j=ny,1,-1 read(10,*) (x(i,j),i=1,nx) enddo close(10) ちなみにperlやCだとどうなるでしょうか。 よろしくお願いします。
どなたかご存知の方。教えてください。 rubyの中で別のrubyのプログラムを起動したいのですが、 どのように記述したら良いでしょうか？ この際の親プログラムは子プログラムを起動する事だけが目的なので、 子プログラムの実行結果の取得はせずに、子プログラム起動後即終了するようにしたいです。 初心者なものでどのようにしたら良いかわからず、困っています。 よろしくお願いします。
I made up a new HTML file to replace the old one on my website. Using FTP, I tried to replacethe files. It did go through with FTP, but actually the old file still exists on the website and a new file has never appeared on my website. How can I resolve the issue? Does someone know how to take care of it?
Ruby2.0.0で下記のようなブロック変数を使おうとすると、 ary.each do |x; y] # yがブロックローカル変数 syntax error, unexpected ';' の文法エラーが出てしまうようなのですが、 ものの本には、ブロックローカル変数は、ブロック変数xの後ろに「;」で区切って書くとなっています。 ブロックローカル変数は2.0.0では使えないのでしょうか？
Ruby1.9.3を使用しています。 ruby 1.9.3p551 (2014-11-13 revision 48407) [x86_64-linux] たのしいRuby第4版8章の簡単なRubyをベースに質問します。 http://tanoshiiruby.github.io/4/list/#ch08 ソース(List 8.10 : hello_module.rb) -- module HelloModule # module文 Version = "1.0" # 定数の定義 def hello(name) # メソッドの定義 puts "Hello, #{name}." end module_function :hello # helloをモジュール関数として公開する end p HelloModule::Version #=> "1.0" HelloModule.hello("Alice") #=> Hello, Alice. include HelloModule # インクルードしてみる p Version #=> "1.0" hello("Alice") #=> Hello, Alice. -- 普通に実行すると [root@host]# ruby hello.rb "1.0" Hello, Alice. "1.0" Hello, Alice. と実行できますが、このソースを簡単な難読化ツールで読みづらくして実行すると http://d.hatena.ne.jp/kurimura/20080824 -- def _(_) r="''<<"+_.split("").map{|_| _=_.ord; return "~-_" if _==0 (["_"]*(_&3)+["__"]*(_>>2&3)+["___"]*(_>>4&3)+["____"]*(_>>6&3))*"+" }*"<<" "->{_=-~($$-$$);__=_<<_+_;___=_<<__;____=__<<__;%s}[]"%r end puts"->&_{_}[&:\"\#{#{_"method"}}\"][$$,:\"\#{#{_"eval"}}\"][#{_([*$<]*"")}]" -- →これをconver-kigou.rbで保存する 難読化実行コマンド cat hello.rb | ruby convert-kigou.rb > hello.nandoku [root@host ]# ruby hello.nandoku "1.0" Hello, Alice. hello.nandoku:1:in `eval': undefined method `include' for 3081:Fixnum (NoMethodError) from hello.nandoku:1:in `eval' from hello.nandoku:1:in `[]' from hello.nandoku:1:in `<main>' と二つ目のincludeのところでエラーになります。 include HelloModule # インクルードしてみる この部分なのは間違いないのですが、なぜできないのかがわかりません。 (じゃあシンプルなRuby実行すればいいじゃん。という話なのですがちょっとこれはクリアしたいんです。すいません) eval　と includeの相性が悪そうな気がしていますが、アドバイスをいただけると大変ありがたいです。
Rubyのコマンドプロンプト上での実行についての質問です。さくらエディタを使ってます。 現状のRubyではgets.chompは使えないのでしょうか？ 入力を受けたい場合はどうすればいいのでしょうか？ 　name="名前" 　puts "#{name}です" どいった変数や、if,日本語などは使えないのでしょうか？ それらの使われたファイルを実行しようとエラーします。 どうすればいいのでしょうか？ おねがいします。
windows8でRuby interpreter (CUI) 2.2.3[x64]をダウンロードしました。 puts "hello world"とさくらエディタで作りファイル名をhello.rbで保存し、 コマンドプロンプトで ruby hello.rbと打つと コマンドプロンプト上ではhelloと出てきて実行できています。 ですが、helloのファイルを直接クリック開こうとすると一瞬開いてすぐ落ちます。 あるプログラミング学習サイトでダウンロード(英単語クイズ)は途中でおちてしまいます。 ファイルのアイコンはどちらもRubyのマークになっています。 また開いたときフッター？一番上？はC:￥Ruby22-x64\bin\ruby.exeとなっています exeの拡張子に変更しないと実行できないのでしょうか？ Ruby始めたばかりです。お願いします。
windows8でRuby interpreter (CUI) 2.2.3[x64]をダウンロードしました。 puts "hello world"とさくらエディタで作りファイル名をhello.rbで保存し、 コマンドプロンプトで ruby hello.rbと打つと No such file or dictionary--- と出てきて実行されません。 環境設定できちんとpathもとうしました。なぜできないのかわかりません。 また、さいたま市にはプログラミングを勉強しているコミュニティーなどはあるでしょうか？ 周りにプログラミングを勉強している知り合いがいないもので よろしくお願いします。
こんにちは。 私はアプリ開発やアプリの企画などを行っている会社に勤めています。 私自身の仕事内容は技術的な分野ではないので所謂素人に毛が生えた程度と思って下さい。 前回の社内会議で出ていた内容で私にはよく解らなかった箇所がありましてまずはこちらに質問してみようと思いました。 クライアントからの依頼で新しいアプリ開発を行う案件が始まりそうなんですが 今まで取引をしていないパートナー会社にアプリ開発を行って貰う予定です。 このパートナー会社は若いスタッフばかりの会社でRuby on Railsで開発をするのが得意な会社なんだそうです。 可能ならRailsで開発を行わせて貰えれば作業工程を短縮して行えると言っている様で 社内で議題として出ていました。 私は財務担当なので開発言語やフレームワーク等全くの素人でして iOSのアプリをRuby on Railsで行う、と言う事が実際にどういう事を指すのかが良く分かりませんでした。 iOSは良くObjective-Cと言う言語で書かれているとネットで出ています。 実際にObjective-CとRuby on Railsの関係等が解りません。 Ruby on Railsがアプリのどの部分に利用されるのか、どういう役割をする箇所に入るのか 一般的なアプリだとRuby on Railsではなくて何を利用しているのかを わかりやすく説明して頂けないでしょうか。 何とも要領を得ない質問で申し訳ないです。。。 ただ社内のスタッフに聞く前にジェネラルな情報だけでも持てたらと思いまして投稿しました。 どうぞよろしくお願い致します。
マダガスカルの映画で ｢watch me sleep｣ と言ってるのですがどういう意味ですか。 解説もありましたらよろしくおねがいします。
Linux PCにrbenvをインストールしてruby2.2.3をglobalにインストールしました。 RUBYLIBの設定は、今まで .bashrc に書き込んでいましたが。rbenvを使う場合はrubyのバージョン毎にどこか別のところで設定するのでしょうか。 2015年10月11日
Railsでウェブアプリを作るために、Rubyの参考書とRailsの参考書を購入しました。 順序としては、 Rubyの参考書から読み始めたほうが効率的ですか？ あるいは、 Railsの参考書から入り、随所にRubyの参考書を呼んだほうが効率的ですか？ 最後にMacbookでプログラミングを始めるのですがTerminal(シェル？)の勉強などはどういった参考書で始めればよいかご享受下さい。
Ruby on Railsというものに挑戦中です。 そして、まずは簡単なことから始めましょうと、コマンドラインから『ps aef』と入力しますと画面出力されます『JOB一覧』をプログラムの中で実行しようと頑張っています。 そこで、以下のようなプログラムを書いてみましたけれど動いてくれませんでしたので、お詳しいかたお願できましたらと思います。 IO.popen("ps aef") do |pipe| pipe.readlines.each do |line| if line =~ /調べたいJOBの名前/ kekka = "あり" else kekka = "なし" end end ～ここから下にkekkaの中身のファイル出力記述～
現在、ITゼネコンに属する会社に勤務しております。 ただ、ゼネコンの体質に疲れてしまい転職をずっと考えています。早くても来年の3月には今の現場を離れることが出来るので、その際に退職しようと考えております。そこで、皆様にご質問をさせて下さい。 まずはRuby、最終的にはRailsまで扱ってプログラミング出来るよう勉強しようと思っていますが、それらに関する資格は取得すべきなのでしょうか？ 最後に、全くの未経験である私がRubyを扱えるプログラマーになる為に徹底してやるべきことは何があるか、教えて頂けますでしょうか。
タイトルのテストを下記のコードに置き換えていますが… describe "full_title" do it "should include the page title" do expect(full_title("foo")).to match(/foo/) end ここでなぜ"foo"が各ページのタイトルに置き換わるのか分かりません。 "foo"というリテラルでなく、変数なら分かるのですが… 説明よろしくお願いします。
「たのしいRuby」を読みながらRubyを独学しております。Rubyでプログラマーになりたいという訳ではなく、最終的にはRailsでウェブアプリを作るというのが最終目的です。 上記の本でRubyを学んでいくと、結局Ruby(あるいは、プログラミング)で何が出来るのだろうと思ってしまいました。私の予定としてRubyを学んで、Rails(Ruby on Rails 4 アプリケーションプログラミングをちらっと読みましたが、これまた分かりません…)に取り掛かろうとは考えているのですが、順序としては正しいでしょうか？(質問①) Railsの参考書を読み進めていくためには、他にどういった本を読み、どういった知識を備えていけば良いでしょうか？(質問②) ウェブアプリを作るためには、質問②同様にどういった本を読み、どういった知識を備えれば良いでしょうか？(質問③)
http://tkool.jp/support/guideline ここにある『2. 素材利用に関して』というところにある説明には、以下のことも含まれているのかどうか教えてください。 １. RPGツクールVXを所持していない場合、その人がRGSS2を配布することは規約違反になるのか。 ２. RPGツクールVXaceは所持している状態で、１の行為をした場合でも規約違反になるのか。 一応、規約違反であるという意見はある一人の方から指摘され教えられました。要約しますと 「規約違反になっている可能性があり、ツクール未所持のスクリプト素材を導入し利用しているということは、プレイヤーには良い印象を与えない」 というものでした。 ただ、今までその指摘を受けてこなかったため、実際どういう認識をツクール所持者の皆さんは持たれているのかも知りたくて、質問させて頂きました。 どうか回答お願いします！！
ServerspecでWindowsパッチ一覧にpatch_list.txtにまとめ、一行ずつ読み込み、そのパッチが 当たっているかをチェックしたいのですが、変数を拾えなくエラーに なります。 ■patch_list.txtの中身 KB201111 KB300000 KB39000 　・・・ ■読み込み処理 #1 File.open('C:\temp\patch_list.txt') do |patch| #2 patch.each_line do |line| #3 line2 = line.chomp #4 describe command('wmi qfe |findstr "#{line2}"’) do #5 its(:stdout) { should match /#{line2}/ } #6 end #7 end #8 end --------------------------- #5でのline2はちゃんとKBxxxと拾っているのですが、 #4では拾えなくて""の空の状態です。 変数の記載書式が間違っているのでしょうか。 教えてください。
Railsで商品管理テーブルのようなものを作成する勉強してますが PHPやcakephpなどでrailsのscaffoldにあたるようなコマンドはありますか？ これだけ主流のPHPなのでPHPで学習する方が(人口的に多い=調べやすい)いいのかなと考えてます でも一つのコマンドでscaffoldさっと出来てしまうことを最初に知ってしまったので、なかなか他の構造とやりたいことが結びつかなくてやや悩んでます。 今はxammpをまず入れてPHP開発環境は整ったかなと、でどう商品管理テーブルを構築(登録 追加 削除 保存 テキスト保存など)すすればいいのかと このような悩みですが ごアドバイス頂きたくおねがいいたします。
CSVファイルに下記のように商品の単価を記録しておいて、二次元配列に読み込んだところ、配列のどの要素もString型になっていました。数字を"(コーティション)で囲んでいなくても、文字として扱われるのでしょうか？ <CSVファイルの内容> "りんご",100 "みかん",25
sqlコマンドで.mode htmlを使ってからselectすると テーブルで返ってくるのでそのままrubyでも出力できるとコードが短くなって楽だと思ったんですが、うまくできません。 どうかやり方をお教えください。 rubyを始めたばかりでexecuteの実行結果がどのような構造になっているかもよくわかりません。 こちらの方もお教えいただけると幸いです。 下記のような使い方をしたいです。 <%# -*- coding:shift_jis -*- %> <% require 'rubygems' # RubyGems のインストール %> <% require 'dbi' #DBIの利用 %> <% dbh=DBI.connect('DBI:SQLite3:fruits.db') %> <% #HTML形式で受け取る %> <% #dbh.do(".mode html;") %> <%# execute select statement%> <% sth=dbh.execute("select * from fruits;") %> <html> <head> <meta http-equiv="Context-Type" content="text/html;charset Shift_JIS"/> <title>フルーツ管理</title> </head> <body> <% #テーブルで出力 %> <table> <%#=sth %> </table> </body> </html> <%# relese results %> <% sth.finish %> <%# disconnect database %> <% dbh.disconnect %>
こんばんは。 Rubyでの正規表現での質問なのですが、 例えば"hoge"という文字が含まれる行全体にマッチさせるような正規表現は存在するのでしょうか？ また存在する場合はどのように記述すれば良いのでしょうか。 単純な質問で申し訳ありませんが、よろしくお願いいたします。
Rubyで、バイナリデータをIOストリームに変換する方法を探しています。 Railsで、データベースに格納された アップロード済のPDFファイル(バイナリデータ)を、 PDF::readで読み込んで処理したいのですが、 PDF::readは、ファイルパスかIOストリームしか受け付けてくれないようなのです。 よろしくお願いします。
バブルソートのプログラムでわからないところがあるため、 質問させていただきます。 Rubyは1.9.3を使用しています。 ＜プログラム＞ --------------------------------------------------- def bsort(data) 　　while true 　　　　# swapped変数は数値の入れ替えを記憶 　　　　swapped = false 　　　　for i in 0..data.size-2 　　　　　　if data[i] > data[i+1] 　　　　　　　　temp = data[i] 　　　　　　　　data[i] = data[i+1] 　　　　　　　　data[i+1] = temp 　　　　　　　　swapped = true 　　　　　　end 　　　　end 　　　　return if !swapped 　　end end data = [10, 9, 8, 7, 6] bsort(data) puts "ソート結果#{data}" --------------------------------------------------- return if !swapped のところで、 なぜwhileのループから抜けられるのかがよくわかりません。 return if swapped == false と書き換えて実行しても同じ結果が得られたのですが、 数値の入れ替えがなければ　swapped = false　であるため、 !swappedはtrueとはならないのでしょうか。
DXRubyのインストールの仕方が分かりません。 Rubyは2.0.0を使っています。 64bitです。 参考になるサイトなど教えていただけるとありがたいです。
Rubyでファイルを暗号化し、それを復号したいのですがうまくいかないため、 質問させていただきます。 Ruby 1.9.3を使用しています。 ・ファイルの暗号化　encrypt.rb ------------------------------------------------- # encoding: cp932 require 'openssl' def encrypt(file, pass) 　　enc = OpenSSL::Cipher::AES256.new('CBC') 　　enc.encrypt 　　enc.pkcs5_keyivgen(pass) 　　File.open(file, 'rb') do |fin| 　　　　File.open("#{file}.sec", 'wb') do |fout| 　　　　　　while buff = fin.read(8000) 　　　　　　　　fout.write(enc.update(buff)) 　　　　　　end 　　　　　　fout.write(enc.final) 　　　　end 　　end 　　enc.reset end if $*.length > 0 　　print 'password： ' 　　pass = $stdin.gets.chomp 　　$*.each do |arg| 　　　　begin 　　　　　　encrypt(arg, pass) 　　　　　　puts "#{arg}を暗号化したファイル#{arg}.secを作りました。" 　　　　rescue 　　　　　　puts "#{arg}の暗号化に失敗しました。" 　　　　end 　　end 　　0.upto(pass.length - 1) do |i| 　　　　pass[i] = '\xff' 　　end end ------------------------------------------------- ・ファイルの復号　decrypt.rb ------------------------------------------------- # encoding: cp932 def decrypt(file, pass) 　　dec = OpenSSL::Cipher::AES256.new('CBC') 　　dec.decrypt 　　dec.pkcs5_keyivgen(pass) 　　File.open(file, 'rb') do |fin| 　　　　File.open("#{file}.plain", 'wb') do |fout| 　　　　　　while buff = fin.read(512) 　　　　　　　　fout.write(dec.update(buff)) 　　　　　　end 　　　　　　fout.write(dec.final) 　　　　end 　　end 　　dec.reset end if $*.length > 0 　　print 'password: ' 　　pass = $stdin.gets.chomp 　　$*.each do |arg| 　　　　begin 　　　　　　decrypt(arg, pass) 　　　　　　puts "#{arg}を復号したファイル#{arg}.plainを作りました。" 　　　　rescue 　　　　　　puts "#{arg}の復号に失敗しました。" 　　　　end 　　end 　　0.upto(pass.length - 1) do |i| 　　　　pass[i] = '\xff' 　　end end ------------------------------------------------- コマンドプロンプトでencrypt.rb自身を暗号化し、encrypt.rb.secの作成はできるのですが、 decrypt.rbを実行してパスワードを入力しても復号ができません。 どのようにすれば復号できるのか教えていただけますでしょうか。
こんばんは。 文章の先頭に指定した文字列を指定した箇所（文頭）のみに追加したいと思っているのですが、 どうもうまくいかないため質問させていただきました。 (1)全角英数字を正規表現で取得できていない (2)unless文の後の条件の複数指定が機能せずエラーになる (3)sub!で置換する以外に文字の追加方法はないか (4)unlessで条件指定しない場合、すべての行の頭に「当事業年度」という文字がついてしまう 上記４つがうまくいっていない要因です。 (3)に関してはinsertを他の手段として考えています。 以下プログラムです。 text.each_line do |t| 56 57 case t 58 when/前事業年度\t銘　　　柄/ 59 flag = true 60 when/前事業年度\t当事業年度/ 61 flag = false if flag == true 62 end 63 64 t.sub!(/^(\p{Katakana}|[一-龠々]|\w|(株)|\p{Hiragana}|[:upper:]{0,20}[1-9])/) {|d| "前事業年度\t#{$1}"} unless flag == false && /当事業年度/ 65 t.sub!(/^(\p{Katakana}|[一-龠々]|\w|(株)|\p{Hiragana}|[:upper:]{0,20}[1-9])/) {|d| "当事業年度\t#{$1}"} unless flag == false && /前事業年度/ 変換したい文章は以下のものです。 前事業年度銘　　　柄株式数（株）貸借対照表計上額（百万円）保有目的 株式会社日本触媒6,338,000株7,726,000,000円当社グループの主要原料供給元であり、取引関係強化の一環として保有している。 ユニ・チャーム株式会社278,100株1,533,000,000円当社グループ製品の販売先であり、取引関係強化の一環として保有している。 栗田工業株式会社572,600株1,282,000,000円当社グループ製品の販売先であり、取引関係強化の一環として保有している。 ＪＸホールディングス株式会社2,477,050株1,231,000,000円当社グループ製品の販売先および主要原料供給元である企業の持株会社であり、取引関係強化の一環として保有している。 ＫＰＸＣｈｅｍｉｃａｌ158,621株967,000,000円KPXChemical設立時に出資しており、協力関係維持のため保有している。 株式会社ブリヂストン194,000株710,000,000円当社グループ製品の販売先であり、取引関係強化の一環として保有している。 関西ペイント株式会社214,225株315,000,000円当社グループ製品の販売先であり、取引関係強化の一環として保有（取引先持株会による定期買付）している。 当事業年度銘　　　柄株式数（株）貸借対照表計上額（百万円）保有目的 ＫＰＸＨｏｌｄｉｎｇｓ58,990株284,000,000円上記KPXChemicalの株式を40%保有する大株主であり、協力関係強化のため保有している。 大日精化工業株式会社524,000株250,000,000円当社グループ製品の販売先であり、取引関係強化の一環として保有している。 高圧ガス工業株式会社424,000株241,000,000円当社グループ製品の販売先であり、取引関係強化の一環として保有している。 サカタインクス株式会社202,000株196,000,000円当社グループ製品の販売先であり、取引関係強化の一環として保有している。地元企業との関係強化のため保有している。 株式会社松風138,000株120,000,000円地元企業との関係強化のため保有している。 コニシ株式会社50,000株91,000,000円当社グループ製品の販売先であり、取引関係強化の一環として保有している。 稲畑産業株式会社66,000株69,000,000円当社グループ製品の販売および原料購入における代理店であり、取引関係強化の一環として保有している。 日本特殊塗料株式会社112,000株68,000,000円当社グループ製品の販売先であり、取引関係強化の一環として保有している。 電気化学工業株式会社142,000株50,000,000円当社グループ製品の販売先であり、取引関係強化の一環として保有している。 株式会社三菱ケミカルホールディングス104,500株44,000,000円当社グループ製品の販売先および主要原料供給元である企業の持株会社であり、取引関係強化の一環として保有している。 長瀬産業株式会社31,000株39,000,000円当社グループ製品の販売および原料購入における代理店であり、取引関係強化の一環として保有している。 横浜ゴム株式会社36,000株34,000,000円当社グループ製品の販売先であり、取引関係強化の一環として保有している。 前事業年度から下の７行の文頭に「前事業年度」という文字を追加し、 当事業年度から下の行の文頭に「当事業年度」という文字を追加することが目標です。 どうかご教授のほどよろしくお願いいたします。
ruby＆mac＆文字の扱い 初心者です。 mac os 10.6.8 ＨＴＭＬの情報を読み込みテキストファイルに書き出したいのですが、 ターミナル上、putsではきちんと日本語で表示されるのですが、書き出したあとの txtファイルを開くと文字化けしています。 File.open("test.txt","w") do |file| @s_info.each do |data| puts data[:m_sec] file.puts data[:m_sec] end end よろしくお願いします。
こんにちは。 Rubyで正規表現で見つかった箇所の文字列を置換するプログラムを書いているのですが、 一部うまく作動せず、その原因が分からないため質問させていただきました。 以下プログラムの置換の部分になります。 49 case text 50 when /株式数（株）\t貸借対照表計上額（千円）|株式数(株)\t貸借対照表計上額(千円)/ 51 text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t([1-9]\d{0,2}(,\d{3})*)\t/) {|s| "#{$1}株\t#{$3},000円\t"} 52 text.gsub!(/([1-9]\d{0,3})\t(\d{1})/){|s| "#{$1}株\t#{$2}円\t"} 53 text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t(\d{1})/){|s| "#{$1}株\t#{$3}円\t"} 54 when/百万円/ 55 text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t([1-9]\d{0,2}(,\d{3})*)/) {|s| "#{$1}株\t#{$3},000,000円\t"} 56 text.gsub!(/([1-9]\d{0,3})\t(\d{1})/){|s| "#{$1}株\t#{$2}円\t"} 57 when /株式数（株）\t貸借対照表計上額（百万円）/ 58 text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t([1-9]\d{0,2}(,\d{3})*)/) {|s| "#{$1}株\t#{$3},000,000円\t"} 59 text.gsub!(/([1-9]\d{0,3})\t(\d{1})/){|s| "#{$1}株\t#{$2}円\t"} 60 when /株式数(株)\t貸借対照表計上額(百万円)/ 61 text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t([1-9]\d{0,2}(,\d{3})*)\t/) {|s| "#{$1}株\t#{$3},000,000円\t"} 62 text.gsub!(/([1-9]\d{0,3})\t(\d{1})/){|s| "#{$1}株\t#{$2}円\t"} 63 when /株式数（1000株）\t貸借対照表計上額（百万円）/ 64 text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t([1-9]\d{0,2}(,\d{3})*)\t/) {|s| "#{$1},000株\t#{$3},000,000円\t"} 65 text.gsub!(/([1-9]\d{0,3})\t(\d{1})/){|s| "#{$1}株\t#{$2}円\t"} 66 when /株式数(1000株)\t貸借対照表計上額(百万円)/ 67 text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t([1-9]\d{0,2}(,\d{3})*)\t/) {|s| "#{$1},000株\t#{$3},000,000円\t"} 68 text.gsub!(/([1-9]\d{0,3})\t(\d{1})/){|s| "#{$1}株\t#{$2}円\t"} 69 when/株式数（1000株）\t貸借対照表計上額(百万円)/ 70 text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t([1-9]\d{0,2}(,\d{3})*)\t/) {|s| "#{$1},000株\t#{$3},000,000円\t"} 71 text.gsub!(/([1-9]\d{0,3})\t(\d{1})/){|s| "#{$1}株\t#{$2}円\t"} 72 when/株式数(1000株)\t貸借対照表計上額（百万円）/ 73 text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t([1-9]\d{0,2}(,\d{3})*)\t/) {|s| "#{$1},000株\t#{$3},000,000円\t"} 74 text.gsub!(/([1-9]\d{0,3})\t(\d{1})/){|s| "#{$1}株\t#{$2}円\t"} 75 when/株式数(株) 貸借対照表計上額(百万円)/ 76 text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t([1-9]\d{0,2}(,\d{3})*)\t/) {|s| "#{$1},株\t#{$3},000,000円\t"} 77 text.gsub!(/([1-9]\d{0,3})\t(\d{1})/){|s| "#{$1}株\t#{$2}円\t"} 78 when/株式数（株） 貸借対照表計上額（百万円）/ 79 text.gsub!(/([1-9]\d{0,2}(,\d{3})*)\t([1-9]\d{0,2}(,\d{3})*)\t/) {|s| "#{$1},株\t#{$3},000,000円\t"} 80 text.gsub!(/([1-9]\d{0,3})\t(\d{1})/){|s| "#{$1}株\t#{$2}円\t"} 81 end 以下は今のプログラムで出てくる結果です。 １つ目の数字の後ろに「株」、２つ目の数字の後ろに「,000円」がついています。 ハ保有目的が純投資目的である投資株式の前事業年度及び当事業年度における貸借対照表計上額の合計額並びに当事業年度における受取配当金、売却損益及び評価損益の合計額(a)保有目的が純投資目的以外の目的である投資株式銘柄数58銘柄貸借対照表計上額の合計額6,915百万円(b)保有目的が純投資目的以外の目的である投資株式の保有区分、銘柄、株式数、貸借対照表計上額および保有目的(前事業年度)特定投資株式 前事業年度銘　　　柄株式数(株)貸借対照表計上額(百万円)保有目的 (株)髙島屋1,594,657株1,527,000円事業上の関係の維持・強化 トヨタ自動車(株)220,804株1,327,000円事業上の関係の維持・強化 (株)みずほフィナンシャルグループ3,295,570株642,000円取引銀行との関係の維持・強化 ヒューリック(株)638,400株552,000円事業上の関係の維持・強化 住友商事(株)229,198株294,000円事業上の関係の維持・強化 (株)三菱ＵＦＪフィナンシャル・グループ457,750株272,000円取引銀行との関係の維持・強化 阪急阪神ホールディングス(株)316,400株170,000円事業上の関係の維持・強化 (株)クラレ86,250株125,000円事業上の関係の維持・強化 積水ハウス(株)90,950株120,000円事業上の関係の維持・強化 東海旅客鉄道(株)10,000株112,000円事業上の関係の維持・強化 (株)池田泉州ホールディングス206,963株102,000円取引銀行との関係の維持・強化 帝人(株)425,000株99,000円事業上の関係の維持・強化 東レ(株)140,000株98,000円事業上の関係の維持・強化 (株)滋賀銀行181,020株96,000円取引銀行との関係の維持・強化 ダイニック(株)459,000株81,000円事業上の関係の維持・強化 三井住友トラスト・ホールディングス(株)187,568株80,000円取引銀行との関係の維持・強化 東日本旅客鉄道(株)10,000株75,000円事業上の関係の維持・強化 近畿日本鉄道(株)155,455株65,000円事業上の関係の維持・強化 長瀬産業(株)47,124株62,000円事業上の関係の維持・強化 ユニチカ(株)1,013,200株58,000円事業上の関係の維持・強化 (株)南都銀行154,532株58,000円取引銀行との関係の維持・強化 本田技研工業(株)12,245株46,000円事業上の関係の維持・強化 西日本旅客鉄道(株)10,000株42,000円事業上の関係の維持・強化 イオン(株)32,149株38,000円事業上の関係の維持・強化 コニカミノルタホールディングス(株)51,000株37,000円事業上の関係の維持・強化 本来ならば「,000円」ではなく「,000,000円」を付加して出力するはずなのですが うまく動作せず「,000円」が付加されてしまっています。 どこを直せば正しく動作するでしょうか？ ご教授の程よろしくお願いします。
content="text/html; charset=shift-jis"のページを読み込んで、文字列の置換がしたいです。 #!/opt/local/bin/ruby require 'uri' require 'open-uri' url='http://hoge.hoge' open(url,'r:shift_jis'){|io| content = io.read content.gsub!(/ほげ/,'ホゲホゲ) print content } 上記の様に書いてみました。ソースコード自体はUTF-8で記述しました。 実行すると、 `gsub!': incompatible encoding regexp match (UTF-8 regexp with Shift_JIS string) (Encoding::CompatibilityError) となってしまいます。 どうしたらよいのでしょうか？ rubyのバージョンは ruby 2.0.0p353 (2013-11-22 revision 43784) [x86_64-darwin12] です。 以上、よろしくご指導のほど、お願い申し上げます。
こんにちは。 最近Rubyでスクローリングをしているのですが、その中で文字の挿入をする場面がありました。 今現在はgsub!を用いた置換で無理矢理くっつける形を取っているのですが、 どうも効率が悪く、汎用性に欠けるような気がします。 何かもっといい方法があるのでしょうか。 曖昧な質問で申し訳ありませんが、よろしくお願いします。 以下プログラムになります。 57 when /株式数（株）\t貸借対照表計上額（千円）|株式数(株)\t貸借対照表計上額(千円)/ 58 while text.match(/\d[0-9]*?\t/) 59 text.sub!(/\d[0-9]*?\t/){|s|s.concat("株1")} 60 text.sub!(/\t株1/,"株q") 61 text.sub!(/\d[0-9]*?\t/){|s|s.concat("円")} 62 text.sub!(/\t円/,",000円q") 63 end 64 text.gsub!(/q/,"\t") 改変しようとする部分の原文は以下のような文章です。 当事業年度銘　　　柄株式数（株）貸借対照表計上額（百万円）保有目的 (株)ナガホリ　192,000　47取引の円滑化 (株)東日本銀行　181,000　45取引の円滑化 (株)大垣共立銀行　99,000　27取引の円滑化 イオン九州(株)　16,027　25取引の円滑化 (株)名古屋銀行　37,000　14取引の円滑化 (株)みずほフィナンシャルグループ　63,800　13取引の円滑化 (株)三菱UFJフィナンシャル・グループ　22,700　1２取引の円滑化 (株)桑山　8,800株　5,000,000円取引の円滑化
railsにおいて「rails s」でサーバーが起動できないです。（以下エラー文あり） 正直、上記の件、原因がわからなく困っております。 必要な情報は都度教えて頂ければ追記致します。 railsのインストールは確認できております。 sqlite3のインストールもできております。 gemのアップデートなども試しました。 一通り、ネットで同じような症状がでた方のページを拝見し上記対策を行いましたが、 上手くいきませんでした・・・。 宜しくお願いいたします。 Usage: rails new APP_PATH [options] Options: -r, [--ruby=PATH] # Path to the Ruby binary of your choice # Default: /Users/ryouhasegawa/.rbenv/versions/2.1.5/bin/ruby -m, [--template=TEMPLATE] # Path to some application template (can be a filesystem path or URL) [--skip-gemfile], [--no-skip-gemfile] # Don't create a Gemfile -B, [--skip-bundle], [--no-skip-bundle] # Don't run bundle install -G, [--skip-git], [--no-skip-git] # Skip .gitignore file [--skip-keeps], [--no-skip-keeps] # Skip source control .keep files ・ ・ ・ Description: The 'rails new' command creates a new Rails application with a default directory structure and configuration at the path you specify. You can specify extra command-line arguments to be used every time 'rails new' runs in the .railsrc configuration file in your home directory. Note that the arguments specified in the .railsrc file don't affect the defaults values shown above in this help message. Example: rails new ~/Code/Ruby/weblog This generates a skeletal Rails installation in ~/Code/Ruby/weblog. See the README in the newly created application to get going.
list9.1とlist 9.3をあわせた二次元の座標、xとyを持つ プログラムです class Point attr_reader :x, :y def initialize(x=0, y=0) @x, @y = x, y end def inspect # 表示用 "(#{x}, #{y})" end def +(other) # x、yのそれぞれを足す self.class.new(x + other.x, y + other.y) end def -(other) # x、yのそれぞれを引く self.class.new(x - other.x, y - other.y) end def [](index) case index when 0 x when 1 y else raise ArgumentError, "out of range `#{index}'" end end def []=(index, val) case index when 0 self.x = val when 1 self.y = val else raise ArgumentError, "out of range `#{index}'" end end end point = Point.new(3, 6) p point[0] #=> 3 p point[1] = 2 #=> 2 p point[1] #=> 2 p point[2] #=>エラー（ArgumentError） についてお尋ねしたいのですが、 def [](index)で演算子を再定義する際、値を参照する方法で def [](index) 　case index 　when 0 　　x 　　： と、していますが、xp.135のアクセサの説明など では@xと「@」が要りそうな感じがするのですが、この 場合は省いて大丈夫なんでしょうか？ プログラムがローカル変数と間違って処理したりという ことは無いんでしょうか。 仮にないとすれば、ここのcase文にはインスタンス変数 と同じ名前のローカル変数などは定義できないのでしょうか？ ご教授願います。
windows7で複数のrbファイルをタスクスケジューラで定時実行する際の効率的な方法を教えてください。 今のところファイル1かは30までを順次実行するかんじです。 実行するファイル数が膨大なので、個別にタスクスケジューラに設定するのは煩わしいので、良い方法があったら教えてください。
こんばんは。 Rubyにおいて、改行の無いhtmlファイル(/home/edinet/**/*.html)を読み込む際に先に改行文字を入れておき、10~15行目の正規表現の通りに文字列を取得したいと考えています。 下記のままのプログラムだと改行が無いhtmlファイルであるため余計な部分まで取得してしまいます。 以下例になります。 ”中外製薬(株)100株0,000,000円情報収集のため”の部分の後に指定した普通株式という文字があるにもかかわらずそれ以降も取得してしまっています。 当事業年度銘　　　柄株式数（株）貸借対照表計上額（百万円）保有目的 大正製薬ホールディングス(株)300,000株2,493,000,000円取引関係の強化のため 日本水産(株)8,000,000株1,736,000,000円取引関係の強化のため 大日本住友製薬(株)913,000株1,497,000,000円取引関係の強化のため ＪＣＲファーマ(株)550,000株1,303,000,000円取引関係の強化のため アルフレッサホールディングス(株)176,900株1,190,000,000円取引関係の強化のため (株)スズケン157,200株628,000,000円取引関係の強化のため 東邦ホールディングス(株)243,400株531,000,000円取引関係の強化のため (株)メディパルホールディングス319,100株503,000,000円取引関係の強化のため コニカミノルタ(株)445,000株428,000,000円取引関係の強化のため (株)三菱ＵＦＪフィナンシャル・グループ611,000株346,000,000円取引関係の強化のため (株)ほくやく・竹山ホールディングス251,500株176,000,000円取引関係の強化のため (株)みずほフィナンシャルグループ504,080株102,000,000円取引関係の強化のため (株)バイタルケーエスケー・ホールディングス99,600株77,000,000円取引関係の強化のため イワキ(株)29,000株5,000,000円取引関係の強化のため 塩野義製薬(株)1,000株1,000,000円情報収集のため 田辺三菱製薬(株)1,000株1,000,000円情報収集のため 小野薬品工業(株)100株0,000,000円情報収集のため (株)三菱ケミカルホールディングス1,500株0,000,000円情報収集のため アステラス製薬(株)100株0,000,000円情報収集のため 武田薬品工業(株)100株0,000,000円情報収集のため エーザイ(株)100株0,000,000円情報収集のため 第一三共(株)200株0,000,000円情報収集のため 中外製薬(株)100株0,000,000円情報収集のため 普通株式296,000,000株 計296,000,000,000,000円 普通株式132,891,217株132,891,217,000,000円東京証券取引所(市場第一部)単元株式数1,000株 計132,891,217株132,891,217,000,000円―― 平成14年８月２日(注)―132,891株―26,137,000,000円△8,735株22,454,000,000円 政府及び地方公共団体金融機関金融商品取引業者その他の法人外国法人等個人その他計 個人以外個人 株主数(人)―48株38,000,000円273株130,000,000円19株18,939,000,000円19,447株― 所有株式数(単元)―21,507,000,000円1,088株34,172,000,000円26,219株22,000,000円48,527株131,535,000,000円1,356,217株 所有株式数の割合(％)―16.35,000,000円0.83株25.98,000,000円19.93株0.02,000,000円36.89株100.00,000,000円― 以下のメソッドでそういった事をしようとする場合、どのようにして入れれば良いのでしょうか？ File.openとeach_line、gsub!を用いて置換して挿入する方法では上手く取得することができませんでした。 以下プログラムになります。 1 text = "" 2 3 data = Dir.glob("/home/edinet/**/*.html") 4 5 data.each do |find| 6 7 flag = nil 8 IO.foreach(find) do |line2| 9 10 case line2 11 when /保有目的が純投資目的以外の目的である投資株式の保有区分、銘柄、株式数、貸借対照表計上額及び保有目/ 12 flag = true 13 when /保有目的が純投資目的である投資株式の前事業年度|保有目的が純投資目的|普通株式/ 14 flag = false 15 end 16 17 text << line2.chomp if flag == true 18 19 end 20 21 22 23 text.gsub!(/<\/td>/,"\t") 24 text.gsub!(/<\/tr>/,"\n") 25 text.gsub!(/<[^>]+>/,"") 26 27 text.gsub!(/前事業年度特定投資株式/,"前事業年度") 28 text.gsub!(/当事業年度特定投資株式/,"当事業年度") 29 text.gsub!(/前事業年度　　特定投資株式/,"前事業年度") 30 text.gsub!(/当事業年度　　特定投資株式/,"当事業年度") 31 text.gsub!(/前事業年度\t\t\t\t\n銘　　　柄/,"\n前事業年度\t銘　　　柄") 32 text.gsub!(/当事業年度\t\t\t\t\n銘　　　柄/,"\n当事業年度\t銘　　　柄") 33 text.gsub!(/^.*nbsp.*/,"") 34 text.sub!(/銘柄\t株式数/,"\t\t\t\t\n前事業年度\t銘　　　柄\t株式数") 35 text.sub!(/銘柄\t株式数/,"\t\t\t\t\n当事業年度\t銘　　　柄\t株式数") 36 text.sub!(/銘柄\t株式数/,"\t\t\t\t\n前事業年度\t銘　　　柄\t株式数") 37 text.sub!(/銘柄\t株式数/,"\t\t\t\t\n当事業年度\t銘　　　柄\t株式数") 38 text.gsub!(/前事業年度　特定投資株式/,"") 39 text.gsub!(/当事業年度　特定投資株式/,"") 40 41 print text ご回答の程よろしくお願いいたします。
こんにちは。 最近質問させていただいているRubyのスクローリングの際に１行ごとに文章を判定し、flagを立てて取得しているのですが、下記のプログラムで改行文字「¥n」を事前に挿入しているにもかかわらずflagがうまく機能しないため質問させていただきました。 読み込んでいるhtmlファイルは改行が少ないファイルであるため、改行を入れてあげなければ余計な部分まで取得してしまう状態です。 以下プログラムです。 1 text = "" 2 data = "/home/edinet/E05267/S1001YX6/index.html" 3 4 flag = nil 5 6 File.open(data) do |f| 7 8 f.each_line do |file| 9 file.gsub!(/<\/tr>/,"\n") 10 11 #IO.foreach(file) do |line2| 12 file.each_line do |line2| 13 case line2 14 when /保有目的が純投資目的以外の目的である投資株式の保有区分|保有目的が純投資目的以外/ 15 flag = true 16 17 when /保有目的が純投資目的である投資株式|EOF|無議決権株式|政府及び地方公共団体|普通株式|【監査報酬の内容等】/ 18 flag = false if flag == true 19 20 end 21 22 text << line2 if flag != nil 23 break if flag == false 24 25 end 26 text.gsub!(/<\/td>/,"\t") 27 #text.gsub!(/<\/tr>/,"\n") 28 text.gsub!(/<[^>]+>/,"") 29 print text 30 31 end 32 end ご回答の程よろしくお願い致します。
こんにちは。 Rubyの質問です。 htmlの文章にrubyで改行文字を挿入してそれを認識させたいのですが、 htmlの文章内に¥nを挿入しても読み込んだ際にうまく認識してくれませんでした。 何か他に方法があるのでしょうか。 ご教授の程よろしくお願い致します。
楽しいＲｕｂｙ第４版で、Net::HTTPクラスを使ってRubyのホームページのHTMLを取得しコンソールに出力するというプログラムlist 8.13についてなんですが、 require "net/http" require "uri" url = URI.parse("http://www.ruby-lang.org/ja/") http = Net::HTTP.start(url.host, url.port) doc = http.get(url.path) puts doc と、記載通りに打ち込んで走らせても C:Ruby21/lib/ruby/2.1.0/net/http.rb879:in `initialize': no implect conversion of nil into String (TypeError) 　from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:879: in `open' 　from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:879: in `block in connect' 　from C:/Ruby21/lib/ruby/2.1.0/net/timeout.rb:76:in `timeout' 　from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:878: in `connect' 　from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:863: in `do_start' 　from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:858: in `start' 　from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:583: in `start' 　from http_get.rb:4: in `<main>' というエラーメッセージが出てしまいます。 いったいどうすればいいでしょうか？
前に投降した、Aptana Studioの複数ファイルの扱いの続きですが、どなたか Aptana Studio 3に詳しい方、情報ください。 一応、Aptana Studio 3のパースペクティブにRubyが表示されるようにまでして、 「ファイル」→「新規」→「Ruby Project」を選んで、プロジェクトを作成した後、 このプロジェクトを右クリック→「新規」→「空のRubyスクリプト」で、use_grep.rbと grep.rbのファイルを作成して保存。 このプロジェクトを右クリック→「実行」→「Rubyスクリプト」→「launchスクリプトの選択（use_grep.rb）」 を実行すると、 C:/Ruby200/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:53:in `require': "\xEF\xBF" from Windows-31J to UTF-8 (Encoding::UndefinedConversionError) from C:/Ruby200/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:53:in `require' のエラーが出ます。（requireのWindows-31JのコードがUTF-8のものに変換できないといっているようなのですが、）こんな簡単なプログラムをAptana Studio 3で動かせないで昨日からはまってしまっています。 ちなみに前回のものはRubyのパースペクティブが使える前の段階で、プロジェクトの下のファイルは 「New FromTemplate」→「Ruby」を選択して２つのファイルを作っています。 Aptana Studio 3でrequireコマンドを使って、２つ以上のファイルを動かした経験のあられる方、 御教示お願い致します。
こんにちは。 何度か質問させていただいていたのですが、正規表現を使っても正しく取得できない部分があったので質問させていただきました。 取得したい文字列の部分にflagをたてて、そこからfalseになるまで取得し続ける形をとっているのですが、どうもfalseになってbreakするはずの部分で取得を終了してくれません。 どう直せば良いのでしょうか？ご教授お願い致します。 プログラムは以下の通りです。 2 text = "" 3 4 data = "/home/edinet/E05267/S1001YX6/index.html" 5 6 flag = nil 7 IO.foreach(data) do |line2| 8 line2.gsub!(/普通株式/,"\nEOF") 9 case line2 10 when /保有目的が純投資目的以外の目的である投資株式の保有区分|保有目的が純投資目的以外/ 11 flag = true 12 13 when /保有目的が純投資目的である投資株式の前事業年度|EOF|無議決権株式|政府及び地方公共団体|調　整　後　転　換　価　額|保有目的が純投資目的|普通株式|監査報酬の内容等/ 14 flag = false if flag == true 15 16 end 17 18 text << line2.chomp if flag != nil 19 break if flag == false 20 21 end 22 text.gsub!(/<\/td>/,"\t") 23 text.gsub!(/<\/tr>/,"\n") 24 text.gsub!(/<[^>]+>/,"") 25 print text 実行結果 ロ　保有目的が純投資目的以外の目的である投資株式の保有区分、銘柄、株式数、貸借対照表計上額及び保有目的(前事業年度)特定投資株式銘柄株式数(株)貸借対照表計上額(千円)保有目的 アイサンテクノロジー株式会社50,00011,150取引関係の維持強化 セイコーエプソン株式会社10,0009,130取引関係の維持強化 株式会社トプコン10,0008,570取引関係の維持強化 株式会社大和証券グループ本社10,0006,560取引関係の維持強化 株式会社八十二銀行10,0005,690取引関係の維持強化 佐田建設株式会社60,0004,500取引関係の維持強化 (当事業年度)特定投資株式銘柄株式数(株)貸借対照表計上額(千円)保有目的 アイサンテクノロジー株式会社50,00043,900取引関係の維持強化 セイコーエプソン株式会社10,00032,100取引関係の維持強化 株式会社トプコン10,00016,920取引関係の維持強化 株式会社大和証券グループ本社10,0008,980取引関係の維持強化 福井コンピュータホールディングス株式会社10,0008,650取引関係の維持強化 株式会社八十二銀行10,0005,870取引関係の維持強化 ハ 保有目的が純投資目的である投資株式該当事項はありません。(6) 会計監査の状況当社は、金融商品取引法監査について有限責任監査法人トーマツより継続的に監査を受けており、正確な経営情報・財務情報の提供に配慮しております。業務を執行した公認会計士の氏名所属する監査法人 指定有限責任社員業務執行社員五十幡 理一郎有限責任監査法人トーマツ 指定有限責任社員業務執行社員小 松 聡有限責任監査法人トーマツ 継続関与年数については、７年以内であるため記載を省略しております。また、公認会計士４名、その他２名が会計監査業務に関っております。(7) 取締役会で決議することができる株主総会決議事項（自己の株式の取得）当社は、経営環境の変化に対応した機動的な資本政策を行うため、会社法第165条第２項の規定により、「取締役会の決議によって市場取引等により自己の株式を取得することができる。」旨を定款に定めております。（中間配当）当社は、株主への機動的な利益還元を行うため、会社法第454条第５項の規定により、「取締役会の決議によって、毎年９月30日を基準日として、中間配当を行うことができる。」旨を定款に定めております。(8) 取締役の定数当社の取締役は、「７名以内とする。」旨を定款に定めております。(9) 取締役の選任の決議要件当社は、取締役の選任決議について、「株主総会において議決権を行使することができる株主の議決権の３分の１以上を有する株主が出席し、その議決権の過半数をもって行い、かつ累積投票によらない。」旨を定款に定めております。(10) 株主総会の特別決議要件当社は、株主総会における特別決議の定足数を緩和することにより、株主総会の円滑な運営を行うため、会社法第309条第２項に定める株主総会の特別決議要件について、「議決権を行使することができる株主の議決権の３分の１以上を有する株主が出席し、その議決権の３分の２以上をもって行う。」旨を定款に定めております。(2) 【監査報酬の内容等】(1) 【監査公認会計士等に対する報酬の内容】前事業年度当事業年度 監査証明業務に基づく報酬(千円)非監査業務に基づく報酬(千円)監査証明業務に基づく報酬(千円)非監査業務に基づく報酬(千円) 14,600─14,600500 (2) 【その他重要な報酬の内容】該当事項はありません。(3) 【監査公認会計士等の提出会社に対する非監査業務の内容】前事業年度該当事項はありません。当事業年度当社は監査公認会計士等に対して、公認会計士法第２条１項の監査証明業務以外の業務である内部管理体制の整備に関する助言・指導業務について対価を支払っております。(4) 【監査報酬の決定方針】当社の監査法人に対する監査報酬の決定方針としましては、事前に見積書の提示を受け、監査日数、監査内容及び当社の規模等を総合的に勘案し、監査役会及び関連部門と協議を行ったうえ決定することとしております。第５ 【経理の状況】１．財務諸表の作成方法について当社の財務諸表は、「財務諸表等の用語、様式及び作成方法に関する規則」(昭和38年大蔵省令第59号。以下「財務諸表等規則」という。)に基づいて作成しております。　なお、当事業年度(平成25年４月１日から平成26年３月31日まで)の財務諸表に含まれる比較情報については、「財務諸表等の用語、様式及び作成方法に関する規則等の一部を改正する内閣府令」（平成24年９月21日内閣府令第61号）附則第２条第２項により、改正前の財務諸表等規則に基づいて作成しております。２．監査証明について当社は、金融商品取引法第193条の２第１項の規定に基づき、事業年度(平成25年４月１日から平成26年３月31日まで)の財務諸表について、有限責任監査法人トーマツにより監査を受けております。３．連結財務諸表について当社は子会社がありませんので、連結財務諸表を作成しておりません。４．財務諸表等の適正性を確保するための特段の取組みについて当社は、財務諸表等の適正性を確保するための特段の取組みを行っております。具体的には、会計基準等の内容を適切に把握し、又は会計基準等の変更等について適切に対応することができる体制を整備するため、公益財団法人財務会計基準機構へ加入し、同機構が開催する研修等へ参加しております。 ※長いためこれ以降は割愛します。 よろしくお願いします。
エラー2401.rb:5: syntax error, unexpected '<', expecting end-of-input <% require 'date' % >の原因がわかりません 2401.rbというプログラムを作成し、実行を致しました。 ---------------------------- # coding: utf-8 require'erb' <% require 'date' % > <h1>ERB Test Page.</h1> <p>今日の日付は: <%= Date.today %></p> ---------------------------- ターミナルで実行したのですが、 下記のエラーが発生しました。 2401.rb:5: syntax error, unexpected '<', expecting end-of-input <% require 'date' % > 何度見なおしても原因がわからなく困っております。 このエラーは何を指しているのかわかりますでしょうか？ 宜しくお願いします。 必要な情報は都度教えて頂ければ、追記します。 尚、macで開発しております。 RubyのERBの使用方法を学ぶべく勉強しております。
rubyにてhello worldを表示させたいのですがNo such file or directory -- hello_world.rb (LoadError)と出てきて困ってます。解決策がわかりましたらご教示願えますでしょうか？ macにてrubyのプログラミングを始めようとしているものです。 下記サイトを参照しつつ同じように行い環境構築をいたしました。 （バージョンは最新のにしました。） http://pplog.org/?p=1845 まず手始めにhelloworldという文字の表示をしたく下記サイトを参照しつつ hello_world.rbというファイルを作りました。 http://www.atmarkit.co.jp/ait/articles/1402/27/n … -------- #!/usr/bin/env ruby # encoding: utf-8 puts "Hello World!" -------- その後、ターミナルで下記の通り入力し、実行しました。 ruby hello_world.rb しかし、helloworldとでずにNo such file or directory -- hello_world.rb (LoadError) という文字が出ました。 ※原因が「hello_world.rb」ファイルの＃にあるのかと考え＃抜きのソースも入力し実行しましたがダメでした。 何が原因であるのかわからず途方に暮れております。 環境構築は同じステップをふみ再確認しましたが、問題がないようです。 「hello_world.rb」ファイルはFinderの「書類」という項目の中に格納致しましたが、 ここに原因があるのでしょうか？ ネットで原因を調べてもよくわからず困っております。 もしわかる方がおりましたら、解説願えますでしょうか？ こんな初歩的なところで躓いているようでは適正はないのかもしれませんが、 どうか宜しくお願いします。 説明不足の点があるかと思いますので、ご指摘を受けましたら、 追記致します。
1 2 text = "" 3 data = "/home/edinet/E30682/S1002C62/index.html" 4 5 6 flag = nil 7 IO.foreach(data) do |line2| 8 9 case line2 10 when /保有目的が純投資目的以外の目的である投資株式の保有区分/ 11 flag = true 12 13 when /保有目的が純投資目的である投資株式|監査報酬の内容等/ 14 flag = false 15 16 end 17 18 text << line2.chomp if flag == true 19 break if flag == false 20 21 end 22 text.gsub!(/<\/td>/,"\t") 23 text.gsub!(/<\/tr>/,"\n") 24 text.gsub!(/<[^>]+>/,"") 25 print text 26 27 28 やりたいことは 「保有目的が純投資目的以外の目的である投資株式の保有区分」が含まれる行から 「保有目的が純投資目的である投資株式」「監査報酬の内容等」が含まれる行までを取得し、 textにそれらを入れ込む 「保有目的が純投資目的である投資株式」「監査報酬の内容等」が含まれる行まで行くと繰り返しが終了する です。 しかし、これを実行しても何も表示されないため解決方法について質問させていただきました。 なお、break if flag == false の部分をコメントアウトすると指定していない部分まで取得し、printしてしまいます。 どこを直せば正しく取得できるでしょうか？ どうかご教授の程よろしくお願いいたします。
コマンドプロンプトでRubyのirbコマンドを使って漢字入力を行うと、 漢字変換はしてくれるのですが、入力確定のためにEnterキーを押すと、 別の文字になってしまいます。 >irb -E Shift_JIS なども試してみたのですがうまくいきません。 何か設定の仕方とかあるようでしたら御教示ください。
こんばんは。 最近正規表現を用いたスクローリングを行っているのですが、 その中でうまく動かない部分があったため質問させていただきました。 プログラムは以下の通りです。 text = "" data = Dir.glob("/home/edinet/**/*.html") data.each do |find| flag = nil IO.foreach(find) do |line2| case line2 when /保有目的が純投資目的以外の目的である投資株式の保有区分、銘柄、株式数、貸借対照表計上額及び保有目/ flag = true when /保有目的が純投資目的である投資株式の前事業年度|保有目的が純投資目的|普通株式/ flag = false end text << line2.chomp if flag == true end print text end ＞保有目的が純投資目的である投資株式の前事業年度|保有目的が純投資目的|普通株式 この３つのどれかが含まれている場合にfalseを返し、文字列の取得が終了するはずなのですが、「普通株式」が含まれている行以降も文字列を取得し続けてしまいます。 正規表現が間違っているためなのでしょうか？ ご回答の程どうかよろしくお願い致します。
再帰に関する質問です。 class Test  def fact(n)    return 1 if n == 0    n * fact(n - 1)    p n  end end myfact = Test.new p myfact.fact(3) なぜ、"p n"をメソッドの中に入れると最後の "p myfact.fact(3)"の結果が3に なるのでしょうか。 "p n"をコメントアウトすると正常に6という結果がでます。 この再帰の構造は、 #1st loop fact(3)。 n = 3  3 * fact(2) end #2nd loop fact(2)  n = 2  2 * fact(1) end #3rd loop fact(1)  n = 1  1 * fact(0) end #last loop fact(0) return 1 end となってますよね。ここで最後のfact(0)から、リバースしていくわけで、 fact(1) 1 * 1 p n =>1 end fact(2) 2 * 1 p n => 2 end fact(3) 3 * 2 p n => 3 end ここまではわかります。ではなぜ最後の"p myfact.fact(3)"が3になるのでしょ うか。
楽しいRuby第４版のp.120で def a(a, b: 0, c:0) 　[a, b, c] end のように、必須の引数とキーワード引数を混在 させることができると説明があったので試しに def meth(a, b: 2, c: 3, *args) 　[a, b, c, args] end p meth(1,2,3) のように、必須の引数とキーワード引数と不定の 引数を混在させたところエラーが返りました。 やはり、不定の引数*argsまで混在させられないの でしょうか？ irbで試すとメソッド定義をendで括った瞬間に エラーが返りましたんで、きっとこれが原因だと 思うのですが。
メソッド定義の構文に出てくる「def」とは何の略でしょうか？ default（デフォルト）と思えばそのようにもとれるし definition（デフィニション＝定義）と思えばそうともとれるし ファイル名等に使いたいので正確な情報がほしいです。
こんにちは。 当方Ruby初心者です。 最近Dir.globのメソッドを使用しているのですが、 Dir.globで取得した結果を１つずつ引数として取り出すにはどのようなメソッドを 組めば良いのでしょうか？ ご教授の程よろしくお願い致します。
こんばんは。 最近Rubyでファイルのスクローリングをしているのですが、 以下のようなスクリプトを全てのファイルに適用したいと考えています。 1 fpath = '/home/edinet/E30479/S1002D1W/index.html' 2 3 text = "" 4 5 6 File.open(fpath).each do |f| 7 f.each_line do |line| 8 9 line.gsub!(/前事業年度特定投資株式/,"前事業年度") 10 line.gsub!(/当事業年度特定投資株式/,"当事業年度") 11 12 end 13 end 14 15 16 flag = nil 17 IO.foreach(fpath) do |line2| 18 19 case line2 20 when /保有目的が純投資目的以外/ 21 flag = true 22 when /保有目的が純投資目的/ 23 flag = false 24 end 25 26 text << line2.chomp if flag == true 27 end Dir.globなどを使えば良いと思うのですが、具体的にはどのように記述すればよいのでしょうか？ ご教授の程お願い致します。
エディタはsublime text 2を使っているのですが 楽しいRuby第四版のサンプルプログラムで学習を始めた当初、エンコードのエラーがでました。 プログラムの行頭に# encoding: UTF-8 とマジックコメントを打ってもエラーはなおらず、プログラムを呼び出す際に、>ruby -E UTF-8　と指定すると問題なく走りました。 で、その後も、日本語を使用したプログラムを実行する際にエンコードをプログラムの行頭で指定していないファイルでも、呼び出す際に「-E UTF-8」としなくても、問題なく走るようになったんですが。 楽しいRuby第四版のサンプルプログラムでlist6.15にstrip.rbというものがあり、内容は file = File.open(ARGV[0]) file.each_line do |line| 　next if /^\s*$/ =~ line #空白行 　next if /^#/ =~ line　　#シャープで始まる行 　puts line end file.close というものがあり、これはコマンドラインから指定したファイルから空白行とシャープで始まる行を抜き取って出力するプログラムなんですが、これを実行する際にまたエンコードのエラーが出てしまいます。 プログラムの行頭で# encoding: UTF-8　と指定してもエラーになり、呼び出す際に>ruby -E UTF-8 strip.rb 呼び出すプログラム名 で問題なく走ったのですが、これは毎回呼び出すたびに-E -UTF-8を指定しないと走ってくれません。 日本語は使っていないプログラムなんで正規表現の部分で何かがひっかかっていると思うんですが、何が原因なんでしょうか。 エディタの問題なんでしょうか（ネットで調べるとsublime text ２はUTF-8しか対応していないと書いてありました。 また、パソコンはプログラム学習用として米国製のAcerというノートパソコンを使っています。
さくらインターネットサーバーのスタンダードプランにインストールを試みているのですが、難しくてまったくうまく行きません。 さくっとインストールする方法はないでしょうか？
Rubyのunlessで適当にプログラムをつくって遊んでいました。 01:a = 10　#aに10を代入 02:b = 20　#bに20を代入 03: 04:unless a > b 05:　puts "aはbより大きくない" 06:else 07:　puts "aはbより小さくない" 08:end 09:#unless文にはelsif節等がなく、条件項目を増やせないのでaとbの値が同じ場合は 10:#どうしようかと、これをif文で補おうとしました。 11:if a = b 12:　puts "aとbは同じです" 13:end 14: 15:puts "a=#{a} b=#{b}" そもそも、aとｂの値が同じでない場合１１行目のifが実行されることは無いだろうと思っていたのですが実効結果は ↓ aはbより大きくない aはbと同じ a=20 b=20 という結果がでました。実行結果一行目の「aはbより大きくない」と出力されたのはプログラム4行目のunless文の返した結果だろうと理解できましたが、実行結果2行目のif文の結果である「aはbとおなじ」が出力されたのか、実行結果３行目でaとbの変数内を参照しておりますが、ここでどうしてaの値が２０に変更されているのか、わかりません。 詳しい方いらっしゃいましたらご教授願います。
楽しいRuby第四版を見ながら、独学でRuby言語を勉強している者です。 p.71に記載されているList 5.1の、西暦から平成へ変換するプログラムad2heisei.rbについてなんですが、１９８８年以前の西暦を入力すると平成０年になったり、マイナスになったりするという問題点をその章の課題である条件判断文を使いながら、西暦を平成から昭和まで変換できる改良版をつくってみました。 01:#西暦から平成および昭和に変換する 02: 03:ad　=　ARGV[0].to_i 04:if　ad　>　1988 05:　　heisei　=　ad　-　1988 06:　　print　"西暦",　ad,　"年は平成",　heisei,　"年です。\n" 07:elsif　1988　>　ad　&&　ad　>　1925 08:　　syouwa　=　63　-　(1988　-　ad) 09:　　print　"西暦",　ad,　"年は昭和",　syouwa,　"年です。\n" 10:else 11:　　print　"西暦",　ad,　"年は昭和以前です。\n" 12:end で、質問なんですが、当初３行目のad = ARGV[0].to_iを分かり易いように二段に分けて 03:ad　=　ARGV[0] 04:ad.to_i という風にしていたらエラーが出て走りませんでした。 ARGVはコマンドラインに入力されたものを文字列オブジェクトとして受け取ることは分かっていたのですが、何故上の記述でエラーがでるのか理解できませんでした。 irbで同じことをやってみると、２行目のad.to_iで数値オブジェクトに変換されるのですが、再びadの変数内を参照すると文字列としてオブジェクトが格納されていました。 変数に代入する再に数値に変換しておかないと、後からではいくら数値に変換してもその場かぎりで、その値が失われてしまうということなのでしょうか？ 詳しい方いらっしゃいましたらご教授願います。
Ruby2.1.3を使って楽しいRuby第４版を学習しているんですが ppメソッドでp.56のListの例題のとおりv = [{key00:"「楽しいRuby第４版」", key01:"「Rubyレシピブック」", key03:"「rails3レシピブック」"}]を出力しても、適度に改行してくれません。 出力結果はpメソッドと同じく横に羅列されてでてきます。 何がいけないんでしょうか？
こんばんは。 Rubyでファイルの特定行を抽出するプログラムを作っているのですが、 flagを立てて特定の場所から特定の場所までを指定する方法をとりたいと思っています。 ある程度までは書いたのですが、そこからどうすれば良いのかが分かりません。 なにとぞ御教授、御添削の程お願い致します。 data = File.open(fpath) do |f| 6 7 f.each_line do |line| 8 9 line.gsub!(/前事業年度特定投資株式/,"前事業年度") 10 line.gsub!(/当事業年度特定投資株式/,"当事業年度") 11 12 13 line.gsub!(/保有目的が純投資目的である/,"EOF") 14 line.gsub!(/保有目的が純投資目的の/,"EOF") 15 16 # next unless line =~ /保有目的が純投資目的以外/ .. line =~ /EOF/ 17 18 19 if $flag == 1 20 text << line.chomp unless line =~ /^\s+$/ 21 22 if line =~ /保有/ 23 $flag = 1 24 else if line =~ /EOF/ 25 $flag = 0
こんにちは。 先日Rubyでとあるファイルから特定の文字列を取得するプログラムを組んでおりましたところ、正規表現は合っていそうなのに取得できない場合がありましたので質問させていただきました。 <h6 class="smt_head5" style="padding-left: 27pt; padding-right: 0pt; margin-top: 0pt; margin-bottom: 0pt; text-indent: 0pt; font-family: 'ＭＳ 明朝'; text-align: justify; letter-spacing: 0pt; line-height: 15pt;">イ　保有目的が純投資目的以外の目的である投資株式</h6><p class="smt_text5" style="text-align: justify; padding-left: 40pt; padding-right: 0pt; margin-top: 0pt; margin-bottom: 0pt; text-indent: 9.9pt; font-family: 'ＭＳ 明朝'; letter-spacing: 0pt; line-height: 14pt;">銘柄数　　　　　　　　　　 　 ５銘柄</p><p class="smt_text5" style="text-align: justify; padding-left: 40pt; padding-right: 0pt; margin-top: 0pt; margin-bottom: 0pt; text-indent: 9.9pt; font-family: 'ＭＳ 明朝'; letter-spacing: 0pt; line-height: 14pt;">貸借対照表計上額の合計額　　　299,505千円</p><p class="smt_text6" style="text-align: justify; padding-right: 0pt; margin-top: 0pt; margin-bottom: 0pt; font-family: 'ＭＳ 明朝'; letter-spacing: 0pt; line-height: 14pt;">　</p><p style="page-break-before: always; line-height: 0.75pt; width: 100%; font-size: 0.75pt;"></p><h6 class="smt_head5" style="padding-left: 36pt; padding-right: 0pt; margin-top: 0pt; margin-bottom: 0pt; text-indent: -9pt; font-family: 'ＭＳ 明朝'; text-align: justify; letter-spacing: 0pt; line-height: 15pt;">ロ　保有目的が純投資目的以外の目的である投資株式の保有区分、銘柄、株式数、貸借対照表計上額及び保有目的</h6><p class="smt_text5" style="padding-left: 36pt; text-indent: 9pt; line-height: 15pt;">(前事業年度)</p> 上記のような文字列を、 text = "" 4 5 data = File.open(fpath) do |f| 6 7 f.each_line do |line| 8 9 line.gsub!(/前事業年度特定投資株式/,"前事業年度") 10 line.gsub!(/当事業年度特定投資株式/,"当事業年度") 11 12 13 line.gsub!(/保有目的が純投資目的である/,"EOF") 14 line.gsub!(/保有目的が純投資目的の/,"EOF") 15 16 next unless line =~ /保有目的が純投資目的以外/ .. line =~ /EOF/ 17 text << line.chomp unless line =~ /^\s+$/ 18 19 20 end 21 end 以下のような文字列で取得しようとしたのですが、「保有目的が純投資目的以外」の部分にひっかかりませんでした。 また別の文字列中にある「保有目的が純投資目的である」の部分をEOFに置換する行程もおそらく作動していないと思われます。 どうしたら正しく取得できるでしょうか？ご教授お願い致します。
こんにちは。 当方Ruby初心者です。 HTMLからの正規表現による文字列の取得のプログラムを組んでいたのですが、 分からない所があったため質問させていただきました。 やりたいことは、以下の数字の文字列の後ろにそれぞれ「株」と「,000円」という文字を追加することです。 全ての数字の後ろに株、もしくは,000円を追加する事はできるのですが、個別に追加することができません。 どうかお力添えをお願いいたします。 前事業年度銘　　　柄株式数（株）貸借対照表計上額（千円）保有目的 　株式会社エイチーム200,400円株722,442　関係強化 　株式会社ケイブ15015,900　関係強化 　 当事業年度銘　　　柄株式数（株）貸借対照表計上額（千円）保有目的 　株式会社エイチーム125,300697,921　関係強化 　株式会社ケイブ5,0008,475　関係強化 以下プログラムです。 if text.match('株式数（株） 貸借対照表計上額（千円）') 28 text.gsub!(/\d[0-9]*?,\d[0-9]+|\d[0-9]+/) {$&.concat('株')} 29 text.gsub!(/\d[0-9]*?,\d[0-9]+|\d[0-9]+/) {|s1| s1.concat('株')} 30 else if text.match('株式数（1000株）') 31 text.sub!(/\d[0-9]+,\d[0-9]+/) {|s| s.concat(',000株')} 32 end 33 end 34 print text
Rubyのサンプルコードの起動方法についてお聞きしたいです。 現在、「アンダースタンディング・コンピレーション」という本のサンプルコードをダウンロードし、irbを用いて実行しながら学習しようと考えています。 しかし、irbを用いてrbファイルを起動したのですが以下のエラーがでて上手く行きません。 /home/vagrant/.rbenv/versions/2.1.2/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- execjs/json (LoadError) from /home/vagrant/.rbenv/versions/2.1.2/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require' from /vagrant/share/computationbook/the_meaning_of_programs/denotational/assign.rb:1:in `<top (required)>' from /vagrant/share/computationbook/the_meaning_of_programs/denotational.rb:2:in `require_relative' from /vagrant/share/computationbook/the_meaning_of_programs/denotational.rb:2:in `<top (required)>' from the_meaning_of_programs.rb:2:in `require_relative' from the_meaning_of_programs.rb:2:in `<main>' メッセージを見たところ、requireで問題が起こっているようなのですが、 パスなどにも問題があるようには見えず。行き詰っています。 irbで実行したファイルの内容は、間接的に複数のファイルをrequireで読み込むものです。 また、その際のパスは相対パスで記述されいてるようです。 当方、Ruby初心者なのでirbやrubyの根本的な使用方法に誤りがあるかもしれません。 エラーに見覚えのある方、 アンダースタンディング・コンピレーションをサンプルコードから学習した方 などいらっしゃいましたら,助言いただければ幸いです。
rubyでphpの continue 2; みたいなことはできるのでしょうか？ 教えてください。
Rubyの初心者でSeleniumを使ってスクレイピングを趣味としてしているものです。 ブラウザはchromeです。 この間、例外が上がったときに一定回数リトライする方法をご伝授頂きました。 http://oshiete.goo.ne.jp/qa/8722965.html そしてそれを活用して、CSVにスクレイピングをしたいURLを1列目に並べ、複数のページをスクレイピングしているのですが、 def try(n=10) require 'pp' require 'csv' require 'selenium-webdriver' require 'open-uri' hoge_path = File.expand_path('../hoge.csv',__FILE__) driver = Selenium::WebDriver.for :chrome #chrome のdriverを設定 CSV.foreach(hoge_path) do |row| driver.navigate.to row[1] #URL移動 #ページの移動など driver.quit #ブラウザ終了 driver = Selenium::WebDriver.for :chrome #chrome のdriverを設定 end rescue => e if n==0 raise e driver.quit #ブラウザ終了 else driver.quit #ブラウザ終了 try(n-1) end end try よく仕組みを理解できていないのですが、CSV.foreach内はループされます。 そして、404エラーなどで落ちるとまた一行目に戻ってスクレイピングが行われ、非常に困っています。 そこで、CSVファイルの1行目をループするまたは例外のリトライの際に削除していけば良いと考えたのですが、一行目を削除するというコードをどう書けばいいのか分かりません。 どうかご伝授お願いします。
以下の様なハッシュ「target」に対し、idもしくはtag_idの値が""であるtarget["4"]の要素のみ削除したいと考えています。どなたか方法をご教授いただけないでしょうか。 target = {"0"=>{"id"=>"2", "tag_id"=>"3"}, "1"=>{"id"=>"3", "tag_id"=>"1"}, "2"=>{"id"=>"4", "tag_id"=>"1"}, "3"=>{"id"=>"5", "tag_id"=>"2"}, "4"=>{"id"=>"", "tag_id"=>""}}
本職ではない日曜プログラマならばRubyとPythonのどちらを学ぶべきでしょうか？ 前提として、英語はできるのでそちらの情報も読み解けますが、やはり日本語の方が楽です。 また、何か（Webアプリとテキスト・ファイル処理）を作るにしても基本一人です。 コードを書くのが楽しいと聞くので、チームではないことからもRubyを選びたいのですが、 GoogleとAmazonはクラウドベースでPythonを使うと聞きます。実際にどのように利用してよいのか未勉強ですが、この点は見逃せないように思います。 現在のスキルはVBAとSQL程度です。RubyとPython両方学べばよいのでしょうが、日曜プログラマですのでそこまでの時間がありません。また、これで食べていこうとかいうのではありません。 アドバイスよろしくお願いいたします。
以下のページを参考に、Sass のカスタム関数を記述しております。 http://terkel.jp/archives/2013/05/custom-sass-fu … どうしてもバックスラッシュでエスケープした筈の 「\\」がそのまま「\\」として出力されてしまいます。 もちろん、'\'とするとエラーで処理が止まってしまいます。 「ひらがな」を 「\3072\3089\304C\306A」にエスケープしたいのですが、 「\\3072\\3089\\304C\\306A」と出力されてしまいます。 どのように記述すれば、css用にエスケープされた文字列を出力できますでしょうか？ 無知なままでの技術利用に対してのお叱りは、真摯に受け止めます。 至急で修正しなければいけない現状です。 恐れ入りますが、お助けいただければ幸いです。
ruby初心者です。 プログラム中の標準出力を、通常の出力も表示しながら取得したいと考えています。 自分でもいろいろ調べてみたのですが、 標準出力を取得する以下のようなコード ======================================================== # ブロック内の標準出力を取得する def capture_stdout out = StringIO.new $stdout = out yield return out.string ensure $stdout = STDOUT end (ttp://blog.livedoor.jp/sonots/archives/33344291.html) ================================================= は見つけたのですが、 これだと出力結果は、 capture_stdoutのブロックが終了しないことには取得できません。 capture_stdoutの中のブロック内プログラムの出力をコンソールに表示しながら、 最後に出力結果も取得したいのですが、 何か方法はあるのでしょうか？ 教えてください。
Rubyの初心者でSeleniumを使ってスクレイピングを趣味としてしているものです。 ブラウザはchromeです。 スクレイピングをしたいページで404が数回続き、やっと読み込めるサイトがあるので、404エラーで止まってしまうのである要素が無ければもう一度やり直す、そのようになったら初めからやり直してみる形にしたいと思って色々と調べ試行錯誤をしています。 https://www.qoosky.net/references/58/ を参考に require 'selenium-webdriver' driver = Selenium::WebDriver.for :chrome #chrome のdriverを設定 driver.navigate.to "http://google.com" wait = Selenium::WebDriver::Wait.new(:timeout => 10) # seconds begin element = wait.until { driver.find_element(:id => "hoge") } ensure driver.quit driver.navigate.to "http://google.com" end id、hogeが無ければもう一度読み直すような形でやってみたのですが全く意味をなしていないようです。 何卒どうかご教授、よろしくお願いします。
現在、Railsの4.0.2と4.1.4の両方をインストールしてあって、 >rails -v はRails 4.1.4になっています。これを旧ヴァージョンの4.0.2に戻したいのですが、 >gem uninstall rails -v 4.1.4 >gem uninstall railties -v 4.1.4 として、 >rails -v とすると、 Could not find rails-4.1.4 in any of the sources Run `bundle install` to install missing gems. と言われてしまいます。これで、 >bundle install を実行するとrails-4.1.4のものがまたインストールされてしまい、 .>rails -v は再び、Rails 4.1.4になってしまいます。 Rails4.0.2に戻す方法をどなたか教えてください。
こんばんは。 Ruby初心者ですが、現在、Selenium Webdriver、chromeにはまり、スクレイピングのような事をしています。 そんな中で困っている事があるのですが、 とあるサイトの画像URLを取得、テキストに追記で書き出ししようと色々と調べたのですが全く分からず困っています。 <div class="hoge"> <img src="http://hoge" alt=""></div> htmlはこんなようでxpathは/hoge/imgと仮定します。 open("hoge.txt", "a"){|f| output = driver.find_element(:xpath, '/hoge/img') f.puts "#{output.text}" } のように書いてみたもののテキストに改行しか出力されない状態です。 何卒どうかご教授、よろしくお願いします。
こんばんは。 当方Ruby初心者です。 現在、Selenium Webdriverでスクレイピングをしており、 その中でputs driver.page_sourceコマンドを使用しています。 その際、putsコマンドで出力されたソースをPC内にファイルとして保存する事は可能 でしょうか？また、可能な場合、どのようにして実行すれば良いのでしょうか。 拙い質問ですが、どうかご教授の程、よろしくお願いします。
よくホームページ等のユーザー登録画面にある、郵便番号を入力してボタンを押すと自動的にテキストボックス内に住所が表示される画面を作成したいのですが、Railsでどのように作成すればよいか分かりません。 どなたか詳しい方いらっしゃいましたらご教示願います。
アプリケーションからではなく、ローカルからherokuのDBへのレコードの挿入方法を教えてください。 現在、Ruby on Rails4でherokuへのデプロイが完了した地点まで来ました。 db:migrateでデータベースの構築までできたのですが、レコードの追加方法がわかりません。 マスタテーブルは以降更新する必要が無いのでseedで設定してやれば良いのはわかるのですが、不定期的にレコードを追加したいテーブルでは、どのようにしてレコードを追加/更新すれば良いでしょうか。 よろしくお願い致します。
RubyでTkライブラリを使用してGUIを作ろうと考えています。 作りたいGUIの内容ですが ・serialPortからのデータをグラフ化したい 　　例）aruduinoのなどからＵＡＲＴ通信でデータを受け取りそのデータをグラフ化したい ・心電図みたいに動的なグラフにしたい ・一つのデータではなく複数のデータを表示したい（線の色を変えるなどして） ・エクセルなどにその結果を保存し、あとで閲覧したい 以上のようなことをしたいと思っています。 RubyもGUIも初心者なのでわからないことだらけで困っております。 できればグラフを動的に表示できる所だけでも教えていただけると助かります。 開発環境 エディタ　Vim Ruby -ver 2.0.0p451 gemRuby導入済み ライブラリ　 graph gnuplot rails serialport msgpack などを導入しています。
Rails4の初心者です。 例えば、生徒の情報の一覧ページから[評価する]というリンクを押して生徒の成績をつける時、どのようにすれば生徒を一意に識別する情報を評価ページ（newアクション？）に受け渡してevaluationテーブルに登録（insert）できるでしょうか。 <画面イメージ>(students.index)：scaffoldによって生成されたindexアクション 生徒名　年　組　番号　[評価する] 生徒名　年　組　番号　[評価する] 生徒名　年　組　番号　[評価する] 　　　　・・・ <各モデル>（id, 更新日時などのデフォルトのカラムは省略） studentsモデル name:string, nen:integer, kumi:integer, num:integer evaluationモデル shusseki:integer, test:integer, taido:integer, student_id:integer データを渡すということは、formで情報をpostするのかと考えたのですがどうも実装方法が思いつきません。 よろしくお願いいたします。
初歩的な質問ですみません。Ruby初心者です。 Rubyの配列を使って以下のようなことをしたいのですが可能でしょうか？ a = [2, 4, 6] b = 2 c = a / b # => [1, 2, 3] 配列aの全要素を定数bで割ろうとしています。 NArrayを使えば可能なようですが、 Ruby標準の配列でこのようなことはできますか？ 可能でしたらその方法をご教授ください。
プログラミング初心者です。 mac でrails4の勉強をしていて、 mysqlの設定をやってみようと思って、ユーザー設定をまずやろうと色々やっていたのですが、 ・ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) っていうものが出てきてしまって、Mysqlを起動できない事態に陥ってどうしても抜けられません。どうしたらよいでしょうか。どなたか助けて頂けると幸いです。 ソケットの設定が問題なのでしょうか？
Ruby on Rails を学習中です。 パスワードは、 「長さは8文字以上で、英数記号全てを含まなければならない」 としたいと思います。 正規表現はどのように書けばよろしいでしょうか？ VALID_PASSWORD_REGEX = /\A[\w]/i validates :password, length: { minimum: 8 }, format: { with: VALID_PASSWORD_REGEX } [a-zA-Z] && [\d] && [!|@|#|$|%] と書けると良いのですが、 正規表現では and 表現が難しいようなので、困っています。 助けて頂けないでしょうか？ どうぞよろしくお願いいたします。
ruby on rails の初心者です。 rubyのバージョンは、ruby 2.0.0p451 (2014-02-24 revision 45167)です。 http://www.rubylife.jp/rails/ini/index4.html の初心者向けの記事を読みながら、コントローラーとアクションの設定の勉強をしていたのですが、 終盤どうしてもrails sでサーバーを起動すると、 /Library/Ruby/Gems/2.0.0/gems/actionpack-4.1.1/lib/action_dispatch/routing/mapper.rb:196:in `normalize_conditions!': You should not use the `match` method in your router without specifying an HTTP method. (RuntimeError) If you want to expose your action to both GET and POST, add `via: [:get, :post]` option. If you want to expose your action to GET, use `get` in the router: Instead of: match "controller#action" Do: get "controller#action” という表示がでてきてしまい起動できません。 matchをgetなどにかえて対処使用としても無理でした(sintax errolorがでます）。 どうしてでしょうか。どなたか教えて頂けると幸いでございます。
いろいろ試しましたが余計にわからなくなってきそうなので質問させてください。 ＤＸrubyのインストールをすると一瞬だけコマンドプロンプトがでるだけです。たぶん（Ｅｒｒｎｏ：：ＥＮＯＥＮＴ）～と書かれていると思われます（一瞬しか見えないので何とも・・） サンプルプログラムは全く動きません。 Windows7　Ｈｏｍｅ　Ｐremium 32bitです。
Rails4の開発で困っています。 コントローラーのRedirect_ToからほかのサーバへダイレクトにURLを記載し、そのURLの後ろに、?からJSON形式データをつけて渡そうとしています。 一度実施してみると、Webrickのログでは、ＵＲＬを生成できていますが、 ERROR URI::InvalidURIError: bad URI(is not URI?) というエラーが出て送信できません。 redirect_toを利用することにこだわりはありません。 jsonデータをコントローラーで生成して、そのあと、決まったURLにつけて送信するだけです。 何か良い方法はないでしょうか？
下記のように、Photo1ディレクトリに、001. 002 ・・・とサプディレクトリがあり、それぞれの中にjpgファイルが連続してある場合 （変更前） についての質問です。　コマンドプロンプトよりRubyを使い、下記の図のようにPhoto1のリネイムを行ったPhoto2を新たに作成したいのですが、どのように書けばよいのか教えてください。宜しくお願いします。 (変更前) Photo01 +------ 001 |　　　　　 +-- 1.jpg |　　　　　 +-- 2.jpg | 　　　　　+-- 3.jpg | +------ 002 | 　　　　　+-- 1.jpg | 　　　　　+-- 2.jpg | 　　　　　+-- 3.jpg | +------ 003 | 　　　　　+-- 1.jpg | 　　　　　+-- 2.jpg |　　　　　 +-- 3.jpg ～ （変更後） Photo02 +-- 001.jpg +-- 002.jpg +-- 003.jpg +-- 004.jpg +-- 005.jpg +-- 006.jpg +-- 007.jpg +-- 008.jpg +-- 009.jpg + 　　～
以前した質問（http://okwave.jp/qa/q8484921.html）と非常に似てる質問になります。 以前の質問ではブロックの中で、そのクラスのメソッドを呼ぶ時のことでしたが、今回はメソッドではなく、定数にアクセスする時の質問です。 class Hoge VAL=1 def piyo yield end end h=Hoge.new h.piyo do |this| puts Hoge::VAL #＜ーココの話 end 上の様に書く時、ブロックの中で、そのクラスの中の定数を参照するとき、上の例だと Hoge::VAL と書いてますが、Hoge::と書くのがとても嫌なので、以下の様に書いてみました。 class Hoge VAL=1 def piyo yield self end def retVal VAL end end h=Hoge.new h.piyo do |this| puts this.retVal　#<-Hoge::VALと書かなくてよくなった。 end が、しかし実はVALなどの定数は多数あり、その数の分だけ値を返すメソッドを書くなんて、もっと嫌です。 なんか良い書き方はあるのでしょうか？ 以下、蛇足なのですが、そもそもクラスの中でしかアクセスしないマジックナンバー的な定数の定義の仕方が間違っているのでしょうか？　moduleに定義して、クラスの中とブロック使うところでincludeするなどの方がスッキリするのかも。。
以下のようなプログラムで、素数をカウントダウンする事が出来るのですが、このくらいのサイズだとどうしても次の素数が表示されるまで時間がかかります。 そこで以下のものを修正して、今どの数に取りかかっていて、どの約数（i)で割っているのか常に画面に表示されるようにしたいのです。値が画面で目まぐるしく変わってもかまいません。是非助けてください。 def prime(val) maxv = Math::sqrt(val).truncate (2..maxv).each do |i| return false if val % i == 0 end return true end x = 10**17+1 until x<10**16 until prime(x) x=x-2 end puts x x=x-2 end puts x
Rubyの資格試験の勉強をしています。 分からない部分がありまして質問させていただきます。 class Employee attr_reader :id attr_accessor :name def initialize id , name @id = id @name = name end def to_s return "#{@id}:#{@name}" end def <=> other return self.id <=> other.id end employees = [ ] employees <<Employee.new("3","Tanaka") employees<<Employee.new("1","Suzuki") employees<<Employee.new("2","Sato") employee.sort! (質問) 「return self.id <=> other.id」この部分のselfとotherが何をさしているのか分かりません。３つめでインスタント化している「employees<<Employee.new("2","Sato")」のは、selfに入りそれまでに入れた値はotherに入っているのでしょうか？ ご回答よろしくお願いします。
$ rails new ○○ で新しいプロジェクトを作ろうとすると、下記のようなメッセージがでます。原因がわかりませんので分かりましたら教えてくださいよろしくお願いします。 Can't initialize a new Rails application within the directory of another, please change to a non-Rails directory first. Type 'rails' for help.
(OS: Mac OS X 10.9.1, Rubyのバージョン: 2.0.0 です) Ruby の irb を使用していて, 例えば >> while true >> puts "infinite loop" >> end などと打ち込んでしまって無限ループが起きたときや, その他非常に時間がかかりそうな計算を行っているときに, これを中断する手段というのはあるのでしょうか？ (control + Z をすれば irb 自体を中断することはできるようですが, irb自体は中断せずに, 現在行っている処理のみを停止したいということです.)
Windows7で開発ツールのAptanaを使ってRuby on railsでSNSサイトを作ろうとしています。 そこで海外のフレームワークの　Social Stream　http://social-stream.dit.upm.es/started/ を使ういたいのですが、 コマンド上で、　 gem 'social_stream'　　をやってもこのような表示がでます。 ERROR: While executing gem ... (Gem::CommandLineError) Unknown command social_stream どのように対処すればよいのか分からないので、分かりましたらよろしくお願いします。
教材でRubyを勉強中なのですが、以下のプログラムが実行されず爆死しています。 --- puts("整数を入力してね") number = gets.to_i if number > 0 then puts("正の数です！”) end --- 文字コードは、UTF-8で指定、OSはMacです。CotEditorを使用しています。 数字/アルファベットだけのプログラムは正常に実行されるのですが、 文字入りのプログラムがうまく実行されません。 プレビュー見ると文字化けしているので（添付画像参照）、 文字入力にバグが起因していると思われますがお手上げ状態です。
以下のようなコードをruby1.8系で実行してもOKなのですが、 s=String.new("\0"*4) s[0]=8 puts s.unpack("H*") ruby2.0で実行すると、 `[]=': no implicit conversion of Fixnum into String (TypeError) とERRになってしまいます。 ruby2.0ではどうかいたら宜しいでしょうか？
サーバーにrailsをインストールしようとすると下記のようなエラーがでるのですが よく分かりませんでした。教えてください。 $ gem install rails ERROR: While executing gem ... (OpenSSL::SSL::SSLError) SSL_write:: bad write retry
rubyでは＜や＞などの比較演算子もメソッドと分類されるのでオーバーライドが可能と認識しております。具体的にどのようにコーディングしたら良いのでしょうか？ 例えば、配列に数値が格納されているとします。 array=[3,5,4,2,1] この配列をソートした場合に比較が何回行われたかをカウントしたいです。 p array.sort >や<が再定義可能なら、比較演算子が呼ばれる度にカウンターアップするなどと言う事はできるような気がするのですが、どうコーディングしてよいか解りません。 rubyのマニュアルも読んだし、それなりに検索でも頑張ったのですが、煮詰まってしまいました。 ご指導のほど、よろしくお願いいたします。
Beagleboneという評価ボードを買いました。 Beagle Bone Black(ビーグルボーンブラック) [ただのメモ帳] http://wiki.limemo.net/dokuwiki/beaglebone/start このボードにUSBキーボード、マウス、HDMIでディスプレイにつなげばLinuxを操作できるようになっています。 例えば、このLinux上でgccとかrubyでプログラムを作成してコンパイルとかプログラムを動作させるとかもできますでしょうか？ 個人的にはrubyというのをやってみたいと思っているのですが、このLinuxでrubyが使える環境になっているのかを調べる方法とかご教授頂きますよう、お願い致します。
以下の練習問題をやっているのですが、どうもうまくいきません。 (1)担当名が"end"になる迄、担当名と売上を入力する。 (2)売上合計を求める。 (3)各担当の売上が売上合計の何％になるかの比率の計算を行う。 (4)担当名、売上、比率を表示する。 どこがいけないのがご教授頂けますでしょうか。 よろしくお願い致します。 *********************************** #! ruby -E Windows-31J:utf-8 # coding: utf-8 kensu = 0 uriage = 0 goukei = 0 uriage_t = [20] tanto = [10] tanto = [20][10] puts("担当名がendで終了") print(kensu = kensu + 1, "人目の担当名は") tanto = $stdin.gets.chomp! tanto.gsub!("\n", "") print("売上") uriage = $stdin.gets.chomp!.to_i while tanto != "end" kensu = kensu goukei = goukei + uriage uriage_t = uriage tanto_t = tanto print(kensu = kensu + 1, "人目の担当名は") tanto = $stdin.gets.chomp! tanto.gsub!("\n", "") if tanto != "end" print("売上") uriage = $stdin.gets.chomp!.to_i end end kensu = kensu + 1 goukei = goukei + uriage uriage_t = uriage tanto_t = tanto, "合計" puts "________________________________________" puts "　　担当　　　　　　売上　　比率　　" puts "________________________________________" for i in kensu kensu += i ritu = uriage * 100 / goukei puts "担当名は#{tanto}　売上は#{uriage_t}円 比率は#{ritu}%" end
Rubyでルンゲクッタ法でy=exp(x**2)と比較しようという問題で、下のようなプログラムを組むとyの値がかなり大きくなってしまいます。どこが間違っているのでしょうか。教えてください。 #! ruby -Ks #ルンゲックッタ def df(a,b) z=2*a*b return z end n=10 x=Array.new(n) y=Array.new(n) x[0]=0.0 y[0]=1.0 h=1.0/n #任意で変更 fw=File.open("output2.txt","w") for i in 0..n k1=df(x[i],y[i])*h k2=df(x[i]+h/2,y[i]+k1/2)*h k3=df(x[i]+h/2,y[i]+k2/2)*h k4=df(x[i]+h,y[i]+k3) k=(k1+2*k2+2*k3+k4)/6 x[i+1]=x[i]+h y[i+1]=y[i]+k fw.print x[i]," ",y[i]," ","\n" end fw.close()
a = "aaaacccaaacccaaaaaaaaaaaaaaarubyaaaaa" の場合、ruby以降（aaaaaa）を最後まで削除したい場合、 どのように記述したら良いですか？ 実際の使用用途は、nokogiriでスクレーピングした、長いhtmlを整形するために使用したいです。 一致した文章（上記の場合、ccc）はgsubで削除できたのですが、指定した文字（上記の場合はruby）に一致した文字以降全てを削除という記載方法がわかりません。どなたか教えて下さいませ。 ■環境 linux ruby 1.9.3
あるラジオボタンを選択（クリック）したときに、あるグループボックスを非表示にしたいのですが module Frm_form1 ... def radioBtn1_clicked @groupBox1.visible = false end というプログラムを書いたのですが、うまくいきません。（エラーも出ないです） もともとできないのですか？
ruby初心者です。 よろしくお願いします。 以下のようなcsvファイルからユーザーの入力内容をキーに 該当する行を検索して表示させるというような処理を実行したいです。 name,email,tel andy,andy@yahoo.co.jp,090xxxxxxxx bob,bob@yahoo.co.jp,090xxxxxxxx amy,amy@yahoo.co.jp,090xxxxxxxx 入力例：amy 出力：amy,amy@yahoo.co.jp,090xxxxxxxx （該当する行を全て出力させたい） ご教授よろしくお願い致します。 環境：Win7、ruby2.0
Webブラウザからアクセスすると画面に次のように文字列が表示されます。 "\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"ja\" lang=\"ja\">\n <head>\n <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n <meta http-equiv=\"Content-Style-Type\" content=\"text/css\">\n <meta http-equiv=\"Content-Script-Type\" content=\"text/javascript\">\n <body><a href=\"/menu/\">\u30E1\u30CB</a> エスケープを取り除き、さらに日本語を正しく表示するにはどうすれば良いでしょうか ruby 1.9.3p374 (2013-01-15 revision 38858) 上に示したのは、以下で出力したものです。 #!/usr/local/bin/ruby # -*- encoding: utf-8 -*- html = 記事上に記載の文字列 p html.gsub(/\\u([\da-fA-F]{4})/) { [$1].pack('H*').unpack('n*').pack('U*') }
ruby.exeとrubyw.exeに違いがあるのでしょうか？ （dos窓の表示/非表示以外に） 作成したGUIプログラムをruby.exeで動作させると正常に動くのですが、 dos窓を表示せずに動作させるため、rubyw.exeに関連づけて動作させると、ある条件で（たぶんエラーで）、GUIが消え、終了してしまいます。
FormDesignerとVisualurubyを使っています。 ボタンとグループボックスを一時的に非表示にしたいのですが、できますか？ FormDesignerのAttrのところにそれらしきものがないので無理なのでしょうか？
VisualurubyとFormDesignerを使ってGUIプログラムを作っているのですが、 たとえば、下記のようにチェックボックスを置いた時のカッコのなかの最後の数字はなんなのでしょうか？ addControl(VRCheckbox,'checkBox1',"checkBox1",80,48,96,24,1342177283)
Ruby on Rails 4 で Rest 形式で Web API の開発しています。 クライアントからくる Request の JSON に構文エラーがあるか判定したいのですが 構文エラーがあると 　ActionDispatch::ParamsParser::ParseError 上記のエラーが、コントローラに来る前に発生してしまうので、エラーの判定ができません。 どうすればプログラム上で上記のエラーが起こったか判定することができるでしょうか？
初めまして、今回rubyを初めて使います。 以下について教えてください。 ruby2.0.0をダウンロードしてWindows2003にインストールしました。 xmlファイルにアクセスする処理を行おうとして、 require "rexml/documenr" を記述したら、以下のエラーになりました。 C:Ruby200/lib/ruby2.0.0/rubygems/core_ext/kerner_require.rb:45in　'reqiire';　cannot　load　such　file　--　rexml/document（LoadError) となってしまいます。 原因と対処方法をご存じでしたら教えてください。 よろしくお願いします。
はじめまして Rubyをはじめて1か月の初心者です。 popen3を使用するにあたって大変困っております。 popen3で外部コマンドを実行して、実行結果の標準出力をファイルとして格納しようと思っています。 外部コマンドの内容は、SSH接続でサーバへログインし、そこにあるシェルスクリプトを実行させるもので、 呼び出すシェルスクリプトに対して、Rubyから標準入力を渡し、シェルスクリプトが標準入力を受け取り、 それをもとに呼び出したシェルスクリプトがさらに別のシェルスクリプトを呼び出し、実行結果を標準出力としてRubyで受け取ってファイルに格納したいと思っています。 ソースとしては、以下のようにしてますが、標準入力を引き渡す方法が分かりません。 その為、標準入力を引き渡す部分は記述していません。 Open3.popen3('ssh localhost sh test.sh ') do |stdin, stdout, stderr| 　　begin 　　　loop do 　　　　IO.select([stdout,stderr]).flatten.compact.each { |io| 　　　　　if stdout != "" then 　　　　　　stdout_lines = stdout 　　　　　　　puts("stdout_lines = " + stdout_lines) 　　　　　end 　　　　　stderr_lines = stderr if stderr != "" 　　　　　puts("stderr_lines = " + stderr_lines) 　　　　} 　　　　break if $stdout.classed? && $stderr.closed? 　　end 　　rescue EOFError 　　end end JRubyの1.6.8なので、Rubyのバージョンは1.8.7相当です。 なにぶん初心者の為、なにをどうすれば良いか分からない状態です。 まず、実現が可能かを知りたいです。 実現可能であれば、標準入力を引き渡す方法を教えていただきたく。 よろしくお願いします。
def func(doc) doc.sub!("XXX","YYY") return doc end doc = Document.new File.new(file_name) ... new_doc = func(doc) ... というようにREXMLで処理し、さらにそれをsub!コマンドで処理するプログラムを考えています。 ところが、データの形式が合わないためだと思うのですが、 Document (NoMethodError) というエラーが出ます。 形式を変換するコマンドはないのでしょうか？
Rubyで 数字を下記のようなやり方では1～12　までの数字をまわせるプログラムと　文字のa～l までまわせるプログラムを合体させたいのですがどのようにすればよいでしょうか? #1-12 までの数値をまわすソース n=1 loop do puts n if n == 12 break end n += 1 end 実行結果↓ 1 2 3 4 5 6 7 8 9 10 11 12 # a～ lの小文字をまわすソース ["a","b","c","d","e","f","g","h","i","j","k","l"].each do |n| puts n end 実行結果 a b c d e f g h i j k l 上記のプログラムをあわせて、実行結果が、↓ 1 a 2 b 3 c 4 d 5 e 6 f 7 g 8 h 9 i 10 j 11 k 12 l ↑　このようにするには、どのようにすればよいでしょうか。 よろしくお願いします。
Rubyで 数字を下記のようなやり方では1～12　までの数字をまわせますが、 #ソース n=1 loop do puts n if n == 12 break end n += 1 end 実行結果↓ 1 2 3 4 5 6 7 8 9 10 11 12 このような形で　アルファベットの　a ～z を順番にまわしたい場合は、どのように書くことができますでしょうか? 試行錯誤で試しましたが、うまくいかなかったので、 教えてくださいよろしくお願いします。
http://www.opentone.co.jp/news/release/article03 … の画面中央にある<h1>で囲ったHello world!は、 出来るのですが、次が進みません＞＜ 入力値を表示する　という項目から、 大きく三種類のコードがありますが、 中段、下段は拡張子はrb?であっていますか？ また、そのコードファイルは、一緒にアップすればいいのでしょうか？ 一応アップしましたが、うまく写りません。 原因は、上段のコードファイルに関連付けがされていないのではないかと 思います。ファイル名を一緒にしていないのが原因なのか？ それともこのＨＰの第一回のRailsコマンドで簡単作成　の項目も 出来ていないからでしょうか？第一回は、ドスのインスト迄は 終わりました。レンタル鯖はso-netです。どなたかヒントでもいいので 教えてください。何卒宜しくお願いします
rubyで100行からなる　"山田" : 173, 60 ; 176, 61　のようなデータを読み取り、kekka_fileに書き出すとすれば、冒頭で file=open("data","r") この文を書き、この後は、どういうプログラムを組めばよいでしょうか？ while文を使えばよいのでしょうか？ 大雑把な質問で、すいません 回答宜しくお願いします。
Rubyで日付をかくと、 youbi = %w[日 月 火 水 木 金 土] t = Time.now puts "%s年 %s月 %s日 %s曜日" % [t.year, t.month, t.day, (youbi[t.wday])] 実行すると今日の日付がでますが、これを 例えば、現在の日時ではなくて、毎週水曜日の日付を表示したい場合はどのように書いたらよいですか? そして次の週がくれば、自動的に次の週の水曜日の日付をあらわすようなプログラムです。 教えてください。よろしくおねがいします。
文字コードUTF-16、Little-Endian、改行コードCR/LF、BOMのデータを読み込み、 シフトJISに変換して処理するため、次のようにしたのですが、 中ほどのデータが消えてしまいます。 何か間違っていますか？ require 'nkf' ．．． text = file_in.read text_shiftjis = NKF.nkf('-sW16L',text) 　p text_shiftjis　#確認用出力
10000を　10でわっていくプログラムです。これを普通に実行すると、一度に実行結果が、表示されますが、秒数を設定して、一行ずつ間隔をあけて、表示するには、どのようにプログラムを書けばよいでしょうか? よろしくお願いましす。　 ソースコード n=10000 while n>=1 do break if n <= 1 if n%2 == 0 n = n / 10 end puts n end 実行結果 1000 100 10 0 ↑　この実行結果を　 1000　 1秒後に　100　　1秒後に　10　1秒後に　0　のように　時間差をつけたいです。
以下の様な文字列を <div>xxx</div>yy<span>zzz</span> 以下の様に編集したいです。 <div>xxx</div> yy <span>zzz</span> htmlのタグ毎に改行を挿入したいのです。 もしも上記例でyyがなければ以下の様に書くのですが、 require 'drb/drb' puts DATA.read.scan(/(<.+?>.+?<\/.+?>)/).join("\n") __END__ <div>xxx</div>yy<span>zzz</span> 以上、よろしくご指導の程、お願い申し上げます。
wxrubyを使用した際、エラーが出て困っております。 ソースコードとエラー内容は以下になります。 <<base.rb>> require 'rubygems' require 'wx' class MyApp < Wx::App # <= Wx::App を継承する private def on_init # <= on_init を実装する Wx::message_box('Hello World!') return false # <= ここでtrueを返すとmainloopに入る end end MyApp.new.main_loop <<エラー内容>> kernel_require.rb:45:in 'require':126:"指定されたモジュールが見つかりません" rubyのバージョンは2.00、実行時OSはwindows7です。 wxrubyはgemをつかってインストールしました。 具体的には　gem install wxruby　とコマンドプロンプトに打ち込みました。 それでは、宜しくお願いします。
ホームページの共通メニューなどを書きたいときは、phpなら <?php include 'left_menu.html'; ?> で、外部から読み込めますが、 rubyのcgiでサイトを作った場合、共通メニューなどを外部から読み込むような書き方はあるのでしょうか? 教えてください。よろしくお願いします。
初歩的な質問で恐縮です。 Ruby on Rails でDBのカラムにハイフンは使えますでしょうか。 多言語対応で中国語などを扱っているのですが、 カラム名が　name_zh-tw のようなものがあるのですが、値が取得できずに困っております。。 例) Items テーブルに name_zh-twがある場合。 @item = Items.find_by_i(1000) @item.name_zh-tw =>NoMethodError: undefined method `name_zh' for #<Item:0xb605f364> のようになってしまいます。。 また、上記以外の箇所でもダブルクォートで囲ったら大丈夫な場合がありますが、ログには警告がでます。これは仕方ないのでしょうか。。 [WARN] Exception occurred during reader method compilation. [WARN] Maybe name_zh-tw is not a valid Ruby identifier? [WARN] compile error ----- 環境は以下の通りです。 何卒よろしくお願いいたします。 Ruby1.8.7 Rails2.3.15 MySQL5.5
http://japan.internet.com/developer/20070703/27. …の doc.elements.each("guitars/make/model/color") { |element| puts element.text } を実行したら C:/DOCUME~1/.....: syntax error, unexpected '|', expecting '}' { |element| puts element.text } ^ C:/DOCUME~1/.......: syntax error, unexpected tIDENTIFIER, expecting kDO or '{' or '(' { |element| puts element.text } ^ C:/DOCUME~1/Hideyuki/LOCALS~1/Temp/rb22C.tmp:7: syntax error, unexpected '}', expecting $end Complete(1) とエラーが出ます。 サイトのプログラムそのままなのですが、何か勘違いしてますか？ Rubyのバージョンとかが関係あるのでしょうか？
宜しくお願いします。 ↓のようなxmlファイルがあり、 #########hoge.xml############# <root> <a name="a1"> <b>bbb1</b> <b>bbb2</b> <b>bbb3</b> <c>ccc1</c> </a> <a> <b>bbb4</b> <b>bbb5</b> </a> <a name="a3" price="100"></a> </root> ###################### ↓と同じ処理をしたいのですが、 doc = REXML::Document.new(open("hoge.xml")) doc.elements.each("root/a[@name='a1']/b") do |element| ... end a1が変数名の場合、 どのように記述したらよいのでしょうか。 doc = REXML::Document.new(open("hoge.xml")) attr = a1 doc.elements.each("root/a[@name='????????']/b") do |element| ... end 基本的な内容で申し訳ありませんが、 宜しくお願いします。
XML文書を処理するプログラムを作っています。 http://japan.internet.com/developer/20070703/27. …を参考にして作り始めましたが、 require "rexml/document" include REXML file_name = SWin::CommonDialog::openFilename(nil, ["*.xml","*.xml"], 0x1000, "ファイル選択") doc = Document.new File.new(file_name) p doc としても、 <UNDEFINED> ... </> と表示されるだけです。 私の想定では、XML文全体が表示されると思ったのですが、これでも正常に動作しているのでしょうか？ 普通のテキストファイルとして読み込めば、正常に画面に表示できます。 環境はRuby1.8.7　+　RDE　です。
012 012 012 ..... ０、１、２と数値をローテーションさせたいです。 そこで以下の様に書いてみました。 r=0 loop do puts r r=r<3 ? r+1 : 0 sleep 1 end 012 3 012 3 012 3 ..... になってしまいます。 以下の様に書けば良いのですが、 r=0 loop do puts r r+=1 r=r<3 ? r : 0 sleep 1 end どうして、最初の式はダメなのでしょう？　なんか理解できません。 以上、よろしくご指導の程お願い申し上げます。
Rails の before_filter を普通のクラスで使いたいのですがどうすれば よいでしょうか？ require でなにか読み込めばいい気もするのですが、 なにを読み込めば良いのかわかりません。
再び失礼します。 現在以下のようなソースコードを実行しています。 while true do print "commando?\n" command = gets if command == "end" then break end end ループから抜け出すために、getsメソッドを用いて、 endと入力されればループを抜けるという感じにしたいのですが うまく抜け出せず、無限ループに陥ってしまいます。 質問内容は、このように、getsメソッド実行中（？）にプログラムの強制停止を したいのですが、そのような方法はありますでしょうか。（例えばctrl+???とか） 実行環境は、terapadを使用してソースコードを書き、rubyコマンドプロンプトで rubyコマンドを使って実行しています。 それではよろしくお願いいします。 ※投稿確認したのですが、ソースコードにうまくインテンドが挿入されていません・・ 見づらくて申し訳ございません
Rubyでwebページを取得してtxtファイルに出力したいと考えています。 URLリストを別ファイルで用意して、それを片っ端から読み込んで表示させるものです。 require 'open-uri' require 'kconv' while url=gets next if url=="\n" page=URI(url).read page=Kconv.tosjis(page) puts(page) end これで成功するのですが、「URLリストにのっているwebページが見つからなかったら飛ばして次のページを取得しにいく」ことを追加したいです。 どう書けばいいでしょうか？ 教えていただければ幸いです。 よろしくお願いします。
Rubyを勉強中の初心者です。 「苺　コーヒー　花　美人　宇宙見物」と書いたファイル（sukinamono.txt）があります。 その中からランダムで１項目取り出して表示するスクリプトをつくりたいと思っています。 getsでsukinamono.txtを読み込んで、randを使うのかなと思ったのですが、スクリプトのうまい書き方がわかりません。 どなたかに教えていただければ幸いです。 よろしくお願いします。
rubyのプログラムで2~1000までの素数を列挙のものなんですがどこか違ってますか汗 考えたんですがよくわからなくて汗すみませんどなたかお願いします i=2 print "素数は\n" while i<=1000 do warukazu=2 flag=0 while warukazu<i do if i%warukazu==0 then flag=flag+1 warukazu=warukazu+1 else warukazu=warukazu+1 end end if (flag==0) then print i print"\n" end i=i+1 end
DXRubyを用いたゲーム開発に興味を持ち、rubyの勉強を始めたものです。 MP3ファイルを再生できないと聞き、Bass.rbをつかおうと思ったのですが Bass.rubyをコマンドプロンプトで実行したところ、 「DL is deprecated, please use Fiddle」というエラー？が出ました。 dllファイルは同ディレクトリにもちろん置いてあります。 検索をかけてみましたが、いまいち納得いく回答がありませんでした。 これはどういうことなのでしょうか。 回答、宜しくお願いいたします。 （情報が不足していたら申し訳ございません。 　誠に恐縮ですが、おっしゃっていただければ追加で書き込みを行います。）
cigファイルに下記のように書いて、テキストファイルを読み込んでますが、ここで質問があります。 puts File.readlines("test.txt") テキストファイルには、　下記のように３文字を改行して書いてあるのですが、↓ Hello !! Good Great これらをcgiファイルに読みこんでweb上で確認してみると Hello !! Good Great と一列に並んで表示されます。 改行も含めて、表示したいのですが、どのようにすればよいでしょうか?　教えてください。お願いいたします。
Rubyで単純な投稿するだけの掲示板をつくりました。この掲示板ですと、投稿すればするほどページが長くなってしまいます。なので投稿数が10件たまった時点で区切って、googleやアマゾンなどで検索したときに、でるような　⇒　次へ　１　２　３　４　５　・・・　14　　のような機能を作りたいのですが、書き方がわかりません。もし、わかりましたら教えてくれると大変嬉しいです。よろしくお願いします。　掲示板のソースコードは下記のようになっています。 keigiban.cgi ----------------------------------- #!/usr/bin/ruby require"cgi" cgi = CGI.new ThisFile = "./keigiban.cgi" puts <<HTML Content-Type: text/html <html> <head> <title>掲示板Test</title> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> </head> <body> <h1>掲示板</h1> HTML if cgi.params["message"][0] then f = open("text.log","a") f.puts"%d:%s"%[Integer(Time.now),cgi.params["message"][0]] f.close end puts <<HTML <form action="#{ThisFile}" method="post"> <input type="text" style=" name="message"> <input type="submit" value="submit"> </form> HTML messages = [] open("text.log").each{ |line| if line =~/^(\d+):(.*)$/ then messages << [Time.at(Integer($1)), $2] end } puts "<dl>" for time, msg in messages do puts "<dt>%s </dt>" % [ String(time)] puts "<dd>%s</dd>" % msg end puts "</dl>" puts <<HTML <hr> 掲示板Test </body></html> HTML
下記リンク先のRubyコードをPHPに書き換えたいのですが、どうすれば良いでしょうか？ http://www40.atwiki.jp/spellbound/pages/2092.html http://www40.atwiki.jp/spellbound/pages/2093.html do | hoge |って、array_walkみたいなもの？
リンク先コードをcodepadで試したら下記エラーになりました。 エラーを消すにはどうすればよいでしょうか？ Line 3:in `percentile_rank': undefined method `count' for [0, 20, 40, 60, 80, 100]:Array (NoMethodError) from t.rb:11 ▽Ruby - パーセンタイル順位 　 http://www40.atwiki.jp/spellbound/pages/2092.html
初心者です。 プロキシサーバーを通してユーザーエージェントを実装し、 WEBページフィルターのようなものを使いたいです。 以下のようなソースをかいてみたのですが、原因はなんでしょうか。 シンタックスエラーと表示され、　コマンドプロンプトに以下の文字が表示されます。 :RequestCallback => proc {|req, res| 起動すらできずに終了してしまいます。 ユーザーエージェントと、WEBページフィルタを別々に使うとエラーがでないのですが。 どなたか教えてください。よろしくお願いします。 require 'webrick' require 'webrick/httpproxy' require 'uri' handler = Proc.new() {|req, res| res.body.gsub!("abc", "") } userAgent = 'Mozilla/5.0 (iPhone; U; CPU like Mac OS X; en) AppleWebKit/420+ (KHTML, likeGecko) Version/3.0 Mobile/1A543a Safari/419.3' server = WEBrick::HTTPProxyServer.new({ :BindAddress => '127.0.0.1', :Port => 8080, :ProxyContentHandler => handler :RequestCallback => proc {|req, res| req.header['user-agent'] = [userAgent] } }) server.start ここまでになります。 あと、正規表現ですべての文字にマッチするようなメタ文字があれば教えていただきたいです。 1文字だけでなく、複数の文字にマッチするものを探しています。 よろしくお願いします。
登録フォームについての質問です。 ログイン用フォームのhome.cgi と、それにリンクするユーザー登録用フォームのregistration.cgi があり、今回質問するのはユーザー登録用のregistration.cgiの方です。そしてユーザーIDとPasswordはdata.txtに書き込んでいます。書き込み自体は成功するのですが、それ以外のところで問題がでている状態です。条件分岐がうまくいきません。 下記のように書いた時におこる問題点等について教えていただきたいと思います。 (1)IDとPassword のinput　に値が空の時に、ボタンを押しても、登録完了しました　と表示されてしまうので、この様な場合は、"もういちど確認してください"　などの警告文を出したいです。 (2)IDとPassword の文字数に制限を入れたいのですが、分かりませんでした。 双方とも４文字以上８文字以下にしたいです。それ以外の場合は、条件分岐で、"文字数を確認してください"などの警告文を出したいです。 -------- < ここから registration.cgi >-------------------- #!/usr/bin/ruby require "cgi" cgi = CGI.new puts <<HTML Content-Type: text/html <html> <head> <title>練習問題</title> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> </head> <body> <h1>練習(1)</h1> 登録フォーム <form action="registration.cgi" method="post"> ユーザーID:<input type="text" name="login" ><br> パスワード:<input type="text" name="password"><br> <input type="submit" value="submit"> </form> HTML if cgi.params["login"][0] then f = open("data.txt","a") f.puts"%s:%s" %[cgi.params["login"][0],cgi.params["password"][0]] f.close puts "登録完了しました" else end puts <<HTML <br> <a href="./home.cgi">戻る</a> HTML -------- < ここまで >--------------------
puts "%d %s" の場合は、　文字　と　数値ですが、 文字と数値を一緒に含むようなものは %dでも%sでもないので、どのような表示の仕方がありますか? 教えてください。よろしくお願いします。
rubyでcgiをつくっています。　htmlのinputとruybの絡めかたがわかりません教えてください。 まず下記のようにボタンを設置して、 <form> <input type="button" value="新規登録"> </form> 　↑　ボタンを押したら、LoginとIDの登録フォームがでてきて、　それ以外なら変化なし　のようなものをつくりたいのですが、どのようにifで書けばよいのかが分かりませんでした。教えてくださいよろしくお願いします。
rubyでtxtファイル読み込みの時のプログラムについて教えて欲しいのです。 music.txtファイルの中身が↓２行である時に ヴォーカリスト　：　けんた ギターリスト　：　まさこ 実行結果を↓ 職業　ヴォーカリスト　名前　けんた 職業　ギターリスト　名前　まさこ にしたいのですが、どのようにしたほうがよいでしょうか? m ={} mlist = open("music.txt") mlist.each{ |line| line =~ /(\w*)\s*:\s* (\w*)/ m[$1]=$2 } mlist.close puts m このようなプログラムなら思いつくのですが、しかし、実行結果が自分がしたいのとは違います。よろしくお願いします。
ネット上にある特定のファイル（bz2、gz）が更新されているかを定期的に確認したいと思っています。 ですがファイルのサイズがとても大きく、毎回ダウンロードして確認するのはとても出来る状況ではありませんでした。 もしサーバー等に負担を掛けず、ファイルが更新されているかを確認するための手法などがありましたら、お教え頂きたく思います。よろしくお願いいたします。
以下の様なプログラムをマルチスレッドでなくマルチプロセスで実現したいです。 #!/usr/bin/ruby require 'thread' q=Queue.new data=%w(a * * * b * * c * * d * *) data.each do |d| q.push d end (1..4).each do |n| Thread.start { while 1 do d=q.shift break if d!='*' end puts n.to_s+' '+d.to_s }.join end rubyのバーションは ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin10.0] です。バージョンをあげる事は、できれば避けたいです。 実際には上記プログラムの【puts n.to_s+' '+d.to_s】してる所は、ネットに繋いで云々の時間のかかる処理なのですが、まったくパラレルに行なっている様子が無いので、マルチプロセス化したら早くなるかなと思いました。 子プロセスを生成して親プロセスとはパイプで繋いで、、などとするのかなあと試行錯誤したのですが、どうもうまくできません。 ご指導の程、よろしくお願い申し上げます。
Tera Term でサーバーに接続して、その時に　emacs　を起動して、rubyを使いたいのですが、 emacsをどこに設置するのか分かりません。それと、emacsの設定もわかりません。 分かる方いらっしゃいましたらよろしくお願いします。　
親プロで用意した配列の中の要素を一つづつ子プロでputsした後、最後一回、親プロで生成した子プロのPIDを確認したいです。 こんなふうに書いてみました。 #!/usr/bin/ruby table=%w(a b c d) array=[] while i=table.pop do if pid=fork then array.push pid puts pid break if table.size > 0 p array else puts i end end 実行すると、以下のような結果になりました。 $9200 c 9201 b 9202 [9202] a $ PIDが一つしか得られてません。 どうしたらよいでしょうか？　ご教授の程、宜しくお願いいたします。 rubyは 1.8.7 を使ってます。 以上、宜しくお願いいたします。
こんにちは。 漠然とした質問なのですがご教示ください。 プログラミング初心者で、 現在、「楽しいRuby」と「プログラミング言語Ruby」を読みながら 勉強をしています。 そのなかで「ブロックつきメソッド」や「yield文」の用途についての 疑問が出てきました。 疑問というのは、 　「わざわざ、『ブロックを引数として自作メソッドに与える』 　ことの利点ってなに？」 ..です。 私としては、 　自作メソッドを呼び出した後、その中のyield文で 　再度メソッドの外（自作メソッドの呼び出し元）に制御を戻すんだったら、 　自作メソッドの中にブロック処理の内容を書いておくか、 　または、最初から自作メソッドを呼ばずにブロック処理をするほうが、 　処理の流れがわかりやすくてよいのでは？？？ ..と感じています。 大規模なプログラムを複数の人で作るような場合にはこのようなしくみが あったほうが便利..　ということなんでしょうか？ ちなみに私は主に　テキストファイルの編集や比較、結合..などの目的で Rubyプログラムを作っていて、規模はせいぜい100~200行くらいです。 他のRubyプログラムとの連携もありません。 「そんな使い方なら、利点はないよ」というご回答でも構いません。 具体例などと併せてご教示ください。 よろしくお願いいたします。
後々、仕事で必要になるかと思いRuby on Railsを勉強しています。 現在、「Ruby on Rails3 アプリケーションプログラミング」という本で勉強していますが、 読んでいる内にリファレンス本のような印象を受け、少し退屈に思っています。 そこで、実際にWebアプリケーションプログラムを作りながら 進めていけるような本がありましたら、ご紹介いただけないでしょうか。 よろしくお願いします。
Rubyでいろいろなツールを作っているのですが、共通するプログラムを抜き出して別のファイルにしようとしています。 今までは、xxx.rbに共通するプログラムを集めてrequireで読み込んでいたのですが、 webとか「たのしいRuby」を調べていたらモジュールとかがあるのがわかりました。 それで、モジュールを使って（モジュールにまとめて）みようと思ったのですが、 何か、メリットやデメリットはあるのでしょうか？
初めまして 今年情報系の大学生になり、C言語を習っているのですが なんとなくプログラミングを齧ってみたいと思ってrubyをやってみることにしました。 そこまではよかったのですが、windows8でrubyのやつ（すみませんよくわかりません） が出来ません。 windows8ではできないのでしょうか？ また、コンピュータに詳しい友達がうぶんつをどうのこうのと言ってたのですが どういう風にするとうぶんつを使えるようになるのでしょうか？ たぶんデュアルブート？ではないと思うのですが… 質問だらけで申し訳ありません。 ちなみに所謂情弱で、Googleで調べても意味が分かりませんでした よろしくお願いします
ハッシュを拡張し、値をキーで指定した範囲内から取得したいと思っているのですが、ハッシュと同じように作成できないのでしょうか? 試行錯誤してみたのですが、記述が分かりません・・・。 class Range_List < Hash 　# 　# 範囲に対応する、値を取得（速度が気になりますが・・・） 　# 　def [](other) 　　@list.each { |range, value| 　　　return value if range === other 　　} 　　nil 　end end # 角度 (0..1) に対応する、十キーのリストを作成 angle_to_direction = Range_List{　　# => エラー。このような記述で呼び出したい 　0.0625..0.1875 => 3, 　0.1875..0.3125 => 2, 　0.3125..0.4375 => 1, 　0.4375..0.5625 => 4, 　0.5625..0.6875 => 7, 　0.6875..0.8125 => 8, 　0.8125..0.9375 => 9, 　0.9375..1　　　　=> 6, 　0..0.0625　　　　=> 6 } # 角度対応の十キーを求める p angle_to_direction[0.1]　　# => 3 どうかご回答お願いいたします。
以下のコードが思うように動かないです。どのようにすればlabelchangedが表示されるでしょうか？ require 'tk' class View def initialize Tk.root.title('test') @label = TkLabel.new('text' => "label").pack Tk.mainloop end def change(str) @label.text = str end end win = View.new win.change("labelchanged")
２つのテキストファイルの差分を取得したいと思っています。 rubyを使用してdiffコマンドの様な事は可能でしょうか？ テキストを1行ずつ配列に入れて - で比較していく方法を使用してみたのですが、途中で行数が変わるような変更が起こっていると上手く動作できませんでした。 理想としては一部が変更された行、追加された行、削除された行といった物を取得したいです。 もし上手く解決出来る様な手法がありましたら、ご教示お願いいたします。
はじめまして。 勉強中のRuby（2.0）で、 以下のようにCSVファイルの書式変換をしようとしています。 ■変換前 # 入力ファイル1（input1.csv） A, B, C, D A1,B1,C1,D1 A2,B2,C2,D2 A3,B3,C3,D3 # 入力ファイル2（input2.csv） B C ■変換後(output.csv) B, C, A, D B1,C1,A1,D1 B2,C2,A2,D2 B3,C3,A3,D3 ■変換内容 入力ファイル1に対して、入力ファイル2で指定された文字をヘッダーにもつ列を 順次先頭に移動していき、それを、出力ファイルとする。 ■経緯 いろいろ試行錯誤をしながら、以下のような配列（output_ary）を 作るところまではできたのですが、 これをcsvに書き出す術がわからずにおります。 （カッコやダブルコーテーションがついたままになったり、 改行がされなかったり..） （pp output_ary の結果） pp output_ary #=>[["B1","C1","A1","D1"], ["B2","C2","A2","D2"], ["B3","C3","A3","D3"], ["B4","C4","A4","D4"]] お手数ですが　どなたかご教示ください。 もちろん、「上記　output_ary　のようなモノを作らなくてもこうすればできるよ」というご回答でもOKです。 よろしくお願いいたします。
次のようなソースコードですが、 　　cmd = "ls -l" 　　system(cmd) 　　if $?.exitstatus == 1 $? の意味がよく分からないのです。 教えて頂けるでしょうか。
現在Rubyを勉強しています。 いくつかのサイトのソースコードを見てみると行の末尾に;nilと書いてあるコードを見ます。 これは何を意味するのでしょうか？ 例えば下記のような感じです。 agent.get('http://www.abc.com');nil セミコロンは改行と同じなので、単にnilと書いてあるのと同じ？nilだけ書いても何も起こらないのでは？？
Rubyから外部プログラムを実行し、その出力を受け取り、加工したいのですがよくわかりません。 stdin, stdout, stderr = win32-open3.popen3("XXX.exe") とすれば何とかいけそうなんですが、win32-open3が今は使われていないようです。 他に代わるものがあるのでしょうか？ ちなみに、Rubyのバージョンは1.8.7です。 よろしくお願いします。
Ruby＋VisualuRubyでプログラムを作っています。 ファイル選択ダイアログで file_name = SWin::CommonDialog::openFilename(nil, [["テキスト(*.txt)","*.txt"],["DOC(*.doc)","*.doc"],["DOCX(*.docx)","*.docx"]], 0x1000, "ファイル選択") とすれば、複数の拡張子からの選択が可能になるのはわかったのですが、 これだと、拡張子を選んで、その拡張子のファイルから選択することになります。 同時に、複数の拡張子のファイルを表示し、その中から選択するようにはできないのでしょうか？
以下に書いてある『極めよRuby道』のリンク先がもうないので、 http://www.otsune.com/diary/?20031011S9 「アナグラム見つけるRubyプログラムを、より高速にするために、アルファベットの各文字に素数を割り振ってしまう」というこのコードがどのようなものであったか、お分かりになる方はいらっしゃいますでしょうか。 よろしくお願いいたします。
Rubyにてゲームプログラミングをしているのですが、 Angleとして使用する数値を (0..360) の範囲内に常に収める為、Angleクラスで管理しようと思っています。 そこで作成方法の質問なのですが、記号などによる適切な作成方法が分かりません。 適切な記述を教えて頂けたら幸いです。 angle = Angle[30]　　　　　# Vectorを参考にしたのですが、配列では無い為、微妙な記述・・・ angle = Angle.new(30)　　# かと言って、普通に作成するのもどうかと・・・ また、attr_readerで参照するのも微妙な記述だと思います。 angle = Angle.new(30) angle.angle　　# => 30 できればクラス参照で値を取得したいのですが、方法が分かりません。 angle = Angle.new(30) angle　　# => 30 ご教授の程、お願い致します。
現在、大量のテキストを変換する業務がありまして、 これをRubyで一括処理するよう上司の方から言われております。 Rubyというプログラムをあまり理解できていない中での作業となり、 全く分からないことも多くございますので、ご先輩方のご教授を賜ればと思っております。 やりたいことですが、 既に変換する内容があります。 　例：あ　→　い 　　　う　→　え とあるとします。 おそらくRubyの変換記述としては、 _text = (_text.gsub(/あ/,'い')) _text = (_text.gsub(/う/,'え')) であっている思うのですが、 これをwindowsのbatで呼び出して、テキスト変換を自動的に処理する記述が知りたいです。 もし可能でしたら、 参照する　rb　の記述方法と それを実行する　bat　の記述方法を教えて頂きたく思っております。
Ubuntu 11.04でruby1.8.7を使用しています。 rubyで自分のIPアドレスを取得したいのですがいい方法を見つけられません。 ifconfig -aではeth0のinet addrとして192.168.153.129が見えており、これを取得したいのです。 ネットで調べた IPSocket::getaddress(Socket::gethostname) や Socket.getaddrinfo(Socket::gethostname, nil, Socket::AF_INET)[0][3] は、/etc/hostsに 「IP（192.168.153.129）」　「ホスト名」 を追加しておかないとうまくいかないようです（追加すればうまくいきます）。 /etc/hostsにはubuntuインストールのデフォルトとして 「IP（127.0.1.1）」　「ホスト名」 が記載されており、このままではうまくいかないようなのです。自分の環境だけであれば/etc/hostsを変更すればよいのですが、rubyプログラムを配布して別のホストで動かす際に、/etc/hostsの変更を依頼しなければいけないのがいやがられそうです。 /etc/hostsの変更なしに、自分のIPアドレスを取得するよい方法はないでしょうか。
現在、railsを勉強しています。 複数のユーザーが各々のタスクを管理するアプリを作成する初心者用チュートリアルで、すべてのユーザーでひとつのタスクテーブルを用意しユーザーＩＤで各タスクを各ユーザーに紐付けているものがありました。 規模等にもよると思いますが、『すべてのユーザーでひとつのタスクテーブルを用意する方法』と『各ユーザーごとにタスクテーブルを用意する方法』のどちらがより一般的でしょうか？ また、後者の場合、ユーザー登録時に動的にモデルとテーブルを作成することになると思いますがそもそもそのようなことは可能なのでしょうか？ よろしくお願いします。
レンタルサーバーでrubyプログラムをアップロードしても画像のような？マークが出て認識してくれないようです。 どのようにすれば動くようになりますでしょうか。 アップロードした時の条件は以下のとおりです。 FTTPでアップロード 転送モード：アスキー転送モード 転送時のファイル拡張子・・・.rb #!/usr/local/bin/rubyを最初に記述（レンタルサーバーページの指定通り） 転送後のパーミッション：705 その他に何をすればよいかわかりまん。 教えていただけませんでしょうか。 ちなみにコードは下記のような簡単なものです。 #!/usr/local/bin/ruby print "Content-Type: text/html\n\n" print "hello!" よろしくお願いいたします。
プログラミング言語のRubyでプログラムを作っていて疑問に思った事がありますので どなたかご存知の方が居れば教えてください。 Rubyにおいては同じクラス名やモジュール名であっても モジュール内に対象クラスやモジュールを定義する事で 「モジュール名::クラス名」等と言う参照が可能になっていますよね そこで気になったのですが、同名のクラスAとモジュールAがある場合に （つまりクラスAの名前＝モジュールAの名前） class モジュールA::クラスB 　# コンストラクタ 　def initialize 　　@prop = クラスA.new 　end end 等と記述すると、コンストラクタの内部の記述において クラスAの名前とモジュールAの名前が競合するので、クラスBの生成時にエラーが発生します。 この様なケースにおいて、コンストラクタの内部でクラスAのインスタンスを 正しく生成する方法はあるのでしょうか？ 勿論前提として、クラスAは他のモジュールに含まれたクラスではありません。 Javaの様にパッケージ概念があって、全てのクラスについて何らかのパッケージに所属している等の 仕組みが無いので、時々この様な命名をしてしまい困る事があるので この様なケースを回避する方法についてご存知の方が居れば、教授ください。 よろしくお願いします。
1000までの素数を列挙するプログラムは書けました。 def s(max) arr=(2..max).to_a (2..Math::sqrt(max)).each do |i| arr.delete_if {|a|a % i == 0 && a!=i} end arr end puts s(1000) 今度は10の10乗から10の11乗の間に存在する素数を列挙するプログラムを書きたいのです。 時間は気にしないので、上の試し割り方法で良いです。助けてください。 また、メモリの上限を変更する必要がありますか？ないとしたら、どの範囲から変更は必要ですか。 10の20乗から？30乗から？ 本当の初心者なのでどうかよろしくお願いします。
RVMを公式サイトのトップページにあるコマンドにてインストール後，MacPortsにてインストールしなおしたところ，謎の挙動を示すようになり，使い物にならなくなりました．インストール後にて指示されるsourceコマンドを実行してシステムを再起動して使おうとするとrvmコマンドが見つからないと言われますし，Rubyは1.9.3を入れているはずなのになぜか1.8.3になってしまいます．先ほどのsourceコマンドを再び使った直後はrvmコマンドが使え，Ruby1.9.3を使うように設定できるのですが，シェルを再起動した途端にアクティブなRubyバージョンの状態が1.8.3になり，rvmコマンドが見つからなくなってしまいます． RVMをアンインストール後，公式サイトのトップページにあるコマンドにて再インストールしても同様です． 解決法はあるのでしょうか．どうかよろしくおねがいします．
言語はRubyです。 Vectorにて数値を管理している都合上、まとめて計算や判定ができないかと思い、 要素に範囲オブジェクトを入れたVectorと、同じ要素数のVectorとの、 範囲内判定を実装したい為、下記のように組んでみました。 # # 全ての要素が、範囲内か判定 # def ===(v) 　each2(v) { |range, x| 　　return false unless range === x 　} 　return true end Vector[(0..10), (5..8)] === Vector[3, 8]のように組めます。 しかしこの記述だと、元の===が変更されてしまう為、元の処理が使えなくなると思います。 ===が重要な処理と関係していなければ良いのですが、やはり大きく影響するのでしょうか？ ヘルプで検索を掛けても記号の為、ヒットせず、どこで実装されているか分からないので質問しました。 ご教授下されば幸いです。 宜しくお願いいたします。
どんな方法がいいでしょうか？（もちろん、Rubyを使うことが前提です。Ruby/Tkとか、FｘRubyとかいろいろあるみたいですが） ずっと前は、Apolloを使っていたのですが、最近のRubyバージョンには対応していないようですし。 または、Winoleについて詳しく書かれたサイトはないでしょうか？ （まずは、ファイル選択部分をGUIにしたいと思っています）
開発工程について質問ですが、 要件定義→サーバー設計→プログラミング→テスト→デプロイ→保守運用　この流れであってますか?
https://login.ocn.ne.jp/auth/s2016/pc/AuthLoginD … このサイトにRubyのmechanizeからログインしたいのですが、 そもそもここにアクセスできていないようです。 .actionというのはhtmlと違ってアクセスできないのでしょうか。 以下、コードと出力です。 # -*- encoding: utf-8 -*- require 'rubygems' require 'mechanize' agent = Mechanize.new page = agent.get('https://login.ocn.ne.jp/auth/s2016/pc/AuthLoginD …) pp page 出力 #<Mechanize::Page {url #<URI::HTTPS:0x007f989240a150 URL:https://login.ocn.ne.jp/auth/s2016/pc/AuthLoginD …} {meta_refresh} {title "システムエラー"} {iframes} {frames} {links #<Mechanize::Page::Link "ヘルプ" "http://www.ocn.ne.jp/login/mb/index.html"> #<Mechanize::Page::Link "著作権について" "http://mobile.ntt.com/m/copyright.html"> #<Mechanize::Page::Link "プライバシーポリシー" "http://506506.ntt.com/mbl/privacy/s_policy01.htm … #<Mechanize::Page::Link "→OCNトップ" "http://www.ocn.ne.jp"> #<Mechanize::Page::Link "NTT Communications" "http://www.ntt.com/"> #<Mechanize::Page::Link "著作権について" "http://www.ntt.com/COPYRIGHT/"> #<Mechanize::Page::Link "プライバシーポリシー" "http://www.ocn.ne.jp/privacy-policy/"> #<Mechanize::Page::Link "NTTコミュニケーションズ" "http://www.ntt.com/">} {forms}> 以上
str = array1[m] + array2[n] というように結合したいのですがエラーになります。 どうすればいいのでしょうか？
Ruby1.9.3とRails3.2.9の環境でのルーティングではまってしまっているので、御経験のある方、御教示ください。現在、 config/routes.rbに Sample::Application.routes.draw do resources :users resources :tasks match '/users/login' match '/users/logout' match ':controller(/:action(/:id))' match ':controller(/:action(/:id))(.:format)' end を記述して、WEBrickを起動して、 http://localhost:3000/users/login/ を実行すると、このアドレスには移動するのですが、 NoMethodError in Users#show Showing C:/user/Ruby193/rails/sample/app/views/users/show.html.erb where line #5 raised: のエラーが出ます。 WEBrickの表示を見てみると、 Started GET "/users/login/" for 127.0.0.1 at 2013-01-22 22:56:06 +0900 Processing by UsersController#show as HTML Parameters: {"id"=>"login"} Rendered users/show.html.erb within layouts/users (2.0ms) Completed 500 Internal Server Error in 5ms となっていて、/users/login/をGETしているのですが、アクションでshowが呼び出されて、そのIDとして loginが渡っているように見えます。 現在、users\controller.rbのshowの関数の定義は全てコメントアウトしています。usersコントローラの def login関数の定義と、app/views/users/login.html.erbも置いているのですが、それらが表示されない状態で原因が分かりかねています。 上記のルーティングの書き方に何か問題があるのでしょうか？
Ruby1.9.3とRails3.2.9でのテスト環境のモデルの単体テスト（unit）での質問です。 unitのuser_test.rb　に下記の記述を書いて試験しているのですが、saveコマンドでのusersテーブル への書き込みが、下記でnewしたuserの内容ではなく、fixturesフォルダの下の、users.ymlのテストデータの内容が書き込まれるようなのですが、動作はそれでよいのでしょうか？また、YMLデータではなくて下記のデータを書き込ませるsaveの書き方とかはあるのでしょうか？ test "user auth test" do user = User.new(:name => "tanaka", :password => "pass", :password_confirmation => "pass") user.save assert User.auth("tanaka", "pass") end 後、現在、usersテーブルのhashed_passwordフィールドに、モデル（user.rb）の中で、パスワードの セッターを再定義するために、 class User < ActiveRecord::Base 　　def password=(pwd) 　　@password = pwd 　　 # 　　return if pwd.blank? 　　self.hashed_password = User.encrypt(@password) 　　end # 以下、省略 end の記述を入れているのですが、現在何故か、YMLのデータが暗号化されないでそのまま入力されてしまっていますま。このメソッドの呼び出しは、上に書いたusersテーブルの内容またはYMLデータの書き込み時に、実行されると思っていいのでしょうか？（両方、またはどちらか？） 御教示願えればと思います。
config\locales\translation_ja.ymlファイルを下記のように編集して、 ja: activerecord: models: demandapp: "要望" #g attributes: demandapp: acquisition: "補足" #g class1: "大分類" #g class2: "分類" #g content: "内容" #g derivery: "納期" #g report_count: "件数　#g" source: "提起" #g state: "状態" #g これをviewのindexから下記のように、I18n.tメソッドを使って日本語訳を呼び出そうとすると、 <% Demandapp.column_names.each do |col| %> <th> <%= t("activerecord.attributes.demandapp.#{col}") %>　# <ーここ </th> <% end %> I18n::InvalidLocaleData in Demandapps#index can not load translations from c:/user/Ruby193/rails/demand/config/locales/translation_ja.yml, expected it to return a hash, but does not ＃の所でエラーが出て理由が分かりかねています。 ご経験のある方、御教示願えればと思います。
Rails3.2.9でのpaginateがうまくいきません。 分かる方、御教示ください。 今のところ、下記の状態です。 （１）Ruby193/lib/ruby/gems/1.9.1/gemsの下に、mislav-will_paginate-2.3.11 　をインストールした。 （２）Ruby193/rails/demand/Gemfileに gem 'mislav-will_paginate', '~> 2.3' を追加した。 （３）コマンドプロンプトで、>bundle installを実行 Using mislav-will_paginate (2.3.11)となっていることを確認 （４）app/controller/demandapps_controller.rb のdef indexの@demandapps = Demandapp.allを @demandapps = Demandapp.paginate(:page => params[:page], :per_page => 15) に変更 （５）app/views/demandappsのindex.html.erbの <table>～</table>の下に <%= will_paginate(@items) %> を追加。 この状態でWEBrickを動かすと、 NoMethodError in DemandappsController#index undefined method `paginate' for #<Class:0x3c0a218> app/controllers/demandapps_controller.rb:5:in `index' のエラーが出ます。paginateが認識されていないようなのですが、 この他にどこか設定しないといけない個所とかあるのでしょうか？ よろしくお願い致します。
自身の質問「WinXP＋Apache2にeRubyを入れたい」の結果報告と 「httpd.conf」の設定に付いての質問です。 まず、使用環境の詳細から記述します。 Windows-XP/Pro SP3 Apache v2.0.55 （H:\Apache Group\Apache2にインストール） PHP v5.1.6 （H:\php5.1.6にインストール） MySQL v5.1.36 （H:\MySQL5にインストール） DocumentRootは「H:/Ap2_Ruby/home」で cgi-binは「H:/Ap2_Ruby/cgi-bin」です。 インストールの顛末を記述します。 １．ActiveRubyをインストール http://www.artonx.org/data/asr/ から ActiveScriptRuby(1.8.7-p330 --with-winsock2 --enable-tcltk-stub) Microsoft Installer Package (1.8.7.36) をダウンロード ActiveRuby.msi をダブルクリックしインストールを開始 「H:\Ruby」へインストール PATHを追加「H:\Ruby\bin;」 ２．gemをアップデート コマンドプロンプトから gem update --system を実行 ３．erubyをインストール http://www.garbagecollect.jp/ruby/mswin32/ja/dow … から eruby-1.0.5-i386-mswin32-1.8.zip をダウンロード 解凍後フォルダーを全て「H:\Ruby」へコピー ４．mod_ruby.soのインストール http://rubyforge.org/projects/rubyforapache から RubyForApache-1.3.1.exe をダウンロード ダブルクリックしインストールを開始 C:\Program Files\RubyForApache\ H:\Apache Group\Apache2\ H:\Ruby\ のフォルダを指定 インストールモジュールの選択で mod_ruby のみにチェック msvcp71.dllがOPENできないエラーが出れば無視して継続 ５．httpd.confを編集／Apache2を起動 「The requested operation has failed!」となる confのmod_ruby.soをコメントアウト Apache2が起動した mod_ruby.soがエラーの原因と判断 ６．別のmod_ruby.soをインストール http://www.moriq.com/ruby/win32-apache2-ruby1.8. … から mod_ruby.so をダウンロード modulesに上書きコピー ７．Apache2を起動 Apache2は起動した ８．erubyのテスト 以下の「test.rhtml」を記述 ------------------------------------------------- <% ERuby.charset="Shift-JIS" %> <html> <body> HTML文と混在で、Ruby CGIが使えます。<br> <font size=6>ここはHTMLで、</font>次の行はRubyです。<br> <br> <% print "eRuby TEST<br>" %> </body> </html> ------------------------------------------------- IE8で「http://localhost/test.rhtml」を実行 正常に表示される。 と、言う結末でした。 eruby-1.0.5-i386-mswin32-1.8.zip　や RubyForApache-1.3.1.exe　や http://www.moriq.com/ruby/win32-apache2-ruby1.8. … を見つけるのに、完全に「ネット迷子」に為り往生しました。 前置きが長くなりましたが、ここからが質問です。 ネットで色々探して記述した内容ですが 意味も良く分からず記述していますので これで良いのかどうか全く分かりません。 思いっきり突っ込みを頂きたいと思います。 httpd.confの変更箇所 ------------------------------------------------- LoadModule ruby_module modules/mod_ruby.so <IfModule mod_ruby.c> RubyAddPath H:/Ruby/lib/ruby/site_ruby/1.8/apache RubyAddPath H:/Ruby/lib/ruby/site_ruby/1.8 RubyAddPath H:/Ruby/bin RubyRequire apache/ruby-run RubyRequire apache/eruby-run RubyRequire auto-reload <Location /ruby> Options Indexes FollowSymLinks ExecCGI SetHandler ruby-object RubyHandler Apache::RubyRun.instance </Location> <Files *.rbx> Options Indexes FollowSymLinks ExecCGI SetHandler ruby-object RubyHandler Apache::RubyRun.instance </Files> <Location /eruby> Options Indexes FollowSymLinks ExecCGI SetHandler ruby-object RubyHandler Apache::ERubyRun.instance </Location> <Files *.rhtml> Options Indexes FollowSymLinks ExecCGI SetHandler ruby-object RubyHandler Apache::ERubyRun.instance </Files> </IfModule> DocumentRoot "H:/Ap2_Ruby/home" Options Indexes FollowSymLinks Includes ExecCGI UserDir "H:/Ap2_Ruby/home" ScriptAlias /cgi-bin/ "H:/Ap2_Ruby/cgi-bin/" <Directory "H:/Ap2_Ruby/cgi-bin"> AllowOverride None Options None Order allow,deny Allow from all </Directory> AddHandler cgi-script .cgi .rb .rbx .rhtml ------------------------------------------------- 以上 Rubyの達人様方、よろしくご教授ください。
module Mod1 def samemethod p "Mod1.samemethod" end module_function :samemethod end module Mod2 def samemethod p "Mod2.samemethod" end module_function :samemethod end class Cls extend Mod1 extend Mod2 end Mod1.samemethod # => （１） Cls.Mod2.samemethod # => （２） 上の記述において、（１）は、"Mod1.samemethod" と表示されるのですが、 （２）が、undefined method `Mod2' for Cls:Class (NoMethodError) となってしまいます。Clsから名前空間のメソッドを呼び出したい場合、 どういった書き方をすればいいのでしょうか？ 御経験のある方、御教示願えたらと思います。
Ruby on Railsのインストールをしています。 そこで、gemのインストールまではいきついたのですが、RMagickのインストールに失敗します。 失敗時のログは以下です。 --------------------------------------------------------------------------------- [manabix]# gem install rmagick --no-ri --no-rdoc -v 2.12.2 Building native extensions. This could take a while... /usr/local/lib/ruby/site_ruby/1.9.1/rubygems/ext/builder.rb:46: warning: Insecure world writable dir /usr/local in PATH, mode 040777 ERROR: Error installing rmagick: ERROR: Failed to build gem native extension. /usr/local/bin/ruby extconf.rb checking for Ruby version >= 1.8.5... yes checking for gcc... yes checking for Magick-config... yes checking for ImageMagick version >= 6.3.5... yes checking for HDRI disabled version of ImageMagick... yes checking for stdint.h... yes checking for sys/types.h... yes checking for wand/MagickWand.h... yes checking for InitializeMagick() in -lMagickCore... no checking for InitializeMagick() in -lMagick... no Can't install RMagick 2.12.2. Can't find the ImageMagick library or one of the dependent libraries. Check the mkmf.log file for more detailed information. *** extconf.rb failed *** Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers. Check the mkmf.log file for more details. You may need configuration options. Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/usr/local/bin/ruby --with-MagickCorelib --without-MagickCorelib --with-Magicklib --without-Magicklib Gem files will remain installed in /usr/local/lib/ruby/gems/1.9.1/gems/rmagick-2.12.2 for inspection. Results logged to /usr/local/lib/ruby/gems/1.9.1/gems/rmagick-2.12.2/ext/RMagick/gem_make.out --------------------------------------------------------------------------------- どうすれば、うまくRMagickをインストールできますでしょうか？
Rubyの初心者です。 Rubyのバージョンを、 ruby-1.8.7　から　ruby-1.9.3 に上げたのですが、 コマンドプロンプト上での漢字の表示が1.8.7ではできていたのですが、 19.3にすると、putsやprintで漢字を表示させようとすると、 invalid multibyte char (US-ASCII) のエラーが出てしまって、漢字が表示されなくなってしまいました。 ヴァージョンを上げたことで、漢字を表示させるために何かやらないといけないこととかあるのでしょうか？ 御経験のある方、御教示願えればと思います。
Ruby初心者です。 「WinXp＋Apache2＋PHP5＋MySQL5」の環境を使用しています。 今度Rubyも入れようと考えています。 PHPのようにRubyを動かしたくてネットを検索すると「eRuby」を使い 「mod_ruby.so」をApacheのモジュールとして組込む必要が有る と書かれています。が・・・ネットに記載のある 「http://rtokiwa.s55.xrea.com/wiki/index.php?mod_r …」や 「http://www.modruby.net」が接続できません。 mod_rubyのWindowsバイナリーは何処で入手出来るのでしょうか？ 同様にeRubyのWindowsバイナリーは何処で入手出来るのでしょうか？ ネットの記載も古い物が多く、最近は「mod_ruby.so」や「eRuby」を使わなくても 「WinXp＋Apache2」環境でPHPの様に使用出来る環境設定が有るのでしょうか？ 初心者なもので自分の環境にRubyを構築できず困っています。 どなたか、ご教授ください。 よろしくお願いします。
Rubyだと =begin コメントアウト コメントアウト =end という形で=beginと=endを使用して複数行のコメントアウトをすると思うのですが、 MacRubyだと以下のエラーが出てしまいます。 syntax error, unexpected '=' MacRubyはRubyと違って書き方が違うのでしょうか。 よろしくお願いいたします。
Ruby の Cookie 情報取得について質問です。「取得できるサイトとできないサイトの違い」と、「取得する方法」をご教授ください。 現在、以下のコードで Cookie の情報を取得するプログラムを作っています。 require 'net/http' uri = URI.parse('http://www.google.co.jp') http = Net::HTTP.new(uri.host) http.start response = http.get '/' p response.get_fields('Set-Cookie') 上のコードのように "www.google.co.jp" などはちゃんと取得できるのですが、中には取得できないサイトもあります。 取得できない場合は、コマンドプロンプトに "nil" と表示されます。 例えば、 "http://auctions.yahoo.co.jp/" を Chrome ブラウザの EditCookie でみてみると、複数の Cookie を確認できます。 しかし上記のコードを試してみると、取得できません。 ・この原因は何なのか ・解決方法（"auctions.yahoo.co.jp" からの取得方法を知りたいわけではなく、取得できないサイト一般についての解決策） この2点をご教授いただければ幸いです。
画像の輝度値が保存されたtxtファイルを開いて、輝度値のヒストグラムを表示したいのですがrubyの配列の操作に戸惑っています。histgram[value] += 1のvalueが不確定なのでnilになってしまいます。何か良い解決方法はありますか？ image.txtは 輝度値　その他の情報となっているためsplit[0]で輝度値部分のみを抽出しています。 f = open('image.txt') color = Array.new histogram = Array.new correlation = Array.new n = 0 while c = f.gets color[n] = c.split[0].to_i value = c.split[0].to_i histogram[value] += 1 if(n>1) correlation[value + 50 * color[n-1] ] += 1 end n+=1 end f.close
Rubyの変数と代入演算は、メモリについてどのような扱いになっているのでしょうか。2点ほど疑問電があります。 1点目：代入演算は変数にアドレスを渡しているのか RubyLifeのRuby入門のサンプルをみて学習していたところ疑問がわきました。 http://www.rubylife.jp/ini/var/index4.html　を参照しながら示します。 str1 = "Tokyo" str2 = str1 str1 << ",Japan" とやるとstr1もstr2も"Tokyo,Japan"となることから、rubyでの代入演算はアドレスを代入してると考えました。 2点目：新しくオブジェクトを代入すると別メモリ領域において、そのアドレスを代入しているのか str1 = "Tokyo" str2 = str1 str1 = "Osaka" とやると、str1は"Osaka"、str2は"Tokyo"となります。 前述の参照渡と考えるとstr2も"Osaka"となっているはずですが違いました。 ここで解説に(引用はじめ) なお2つの変数が同じオブジェクトを指し示した後で、どちらかのオブジェクトに新しいオブジェクトを 代入した場合は、代入された変数が指し示すオブジェクトだけが変更されるだけです。(引用おわり) とあります。 このことをふまえると、新しいオブジェクトを変数に代入するというのは、別のメモリ領域をつくってデータを置いてから、そのアドレスを変数に代入している、と考えました。 これら2つの考えと実際の仕組みは一致しているのでしょうか、と言うのが質問です。 質問点をまとめると、Rubyにおいて変数に対して ・代入演算はアドレスを代入しているのか(Cでいうポインタの扱いなのか) ・新しいオブジェクトを代入するときには、新メモリ領域を作ってデータを入れてそのアドレスを代入しているのか という点です。 ついこの間はじめたばかりの初心者ですが、どうかご教授よろしくお願いいたします。
ｃｓｖファイルから、特定の条件を持つ行を抽出したいです。 a1, b1, c1, d1, e1 a2, b2, c2, d2, e2 a3, b3 ,c3, d3, e3 ： 　 ： 　 ： 　 ： 　： an, bn, cn, dn, en とあったときに　d-c/d+c > 0.5となる行だけを出力したいのですが file.each{|line| x = line.split（",").map{|i|i.to_i} if 0.５<(x[3]-x[2])/(x[3]+x[2]) p x end } と自分でやってみたものの、出来ませんでした。 どうしたらよいのでしょうか。
Windows XPでruby 1.9を使用しております。 （ruby 1.9.3p286 (2012-10-12 revision 37165) [i386-mswin32_100]） CSVライブラリの勉強をしていて見つけたのですが、下のプログラムで改行を含むデータを持つCSVを読み込み出力すると、その改行部分に余分な空行が追加されてしまいます。 出力されたoutput.csvをバイナリエディタで確認すると改行を含むデータの改行部分が 元は0x0D,0x0Aであったものが出力されたファイルでは0x0D,0x0D,0x0Aと 0x0Dが1個余分にくっついているのが原因のようです。 この現象を回避する方法がありましたら教えてください。 よろしくお願いします。 -----test.rb # coding: Windows-31J require 'CSV' CSV.open('output.csv','w') do |csv| CSV.foreach('input.csv') do |row| csv << row end end ----- -----input.csv 10,11,12 20,"2 1",22 30,31,32 ----- -----出力output.csv 10,11,12 20,"2 　　　　　　　　　　<- この空行が追加されてしまいます。 1",22 30,31,32 -----
rubyのスクリプトをhtmlに組み込む方法について ruby初心者です。htmlにrubyのスクリプトを組み込みたいのですが、どのようにしたらよいのでしょうか？？ネットや 書籍で調べると、eRubyやerbライブラリーを使用するように書いてありました。どのように書いたらよいのかというか使い勝手がわからないので教えてくださいお願いします。
Ruby初心者です。 文字と数字を連携させて file1 file2 file3 . . file10 としたいのですが、 s = '100' for i in 1..10 name = 'file' + i + '\n' puts name end これだとエラーが出てしまいます。 どう修正したら良いのでしょうか？
ruby on railsに詳しい方で分かる方がいればご教授いただきたいです。 先日までruby1.9.3, rails3.2.4を使用できていたのですが、他にいろんなものをインストールをしていた時に何か変になってしまったのか、突然railsが使用できなくなってしまいました。 OSはMac OS X 10.7.5です。 rails、gemの場所を調べるとopt/local/bin/となっているのですが、rails-vとすると -bash: /opt/local/bin/rails: /opt/local/bin/ruby: bad interpreter: No such file or directory gem -vとすると -bash: /opt/local/bin/gem: /opt/local/bin/ruby: bad interpreter: No such file or directory となってしまって使えません。しかしrubyは正常に動いているようです。 何か分かる方がいらっしゃいましたら、お力を貸して下さると非常に助かります。 作業ができずに困っています。どなたか、お願いします＞＜
ruby超初心者です。教えてください。 このようなディレクトリ構造があるとします。 root_dir |--12_dir | a.txt | b.txt |--23_dir | a.txt | b.txt a.txt, b.txtには、ともに A= B= と書かれているとします。 このとき、root_dir(c:\root_dir)にアクセスして、 12_dir直下のa.txtには、12_dirの最初の文字"1"をとって A=1 B=(1) と書き換え、 12_dir直下のb.txtには、12_dirの第2の文字"2"をとって A=2 B=(2) と書き換え、 23_dir直下のa.txtには、23_dirの最初の文字"1"をとって A=2 B=(2) と書き換え、 23_dir直下のb.txtには、23_dirの第2の文字"3"をとって A=3 B=(3) と書き換えるには、Rubyでどのようなプログラムを書けばよいのでしょうか。 なお、実際のファイル数はもっと膨大です。 よろしくお願いします。
環境はRuby1.9.2、Rails3.1です。 Webアプリを作る勉強をしているのですが、 JSONを返してそのデータを利用して画面を作成しようと思っています。 Rails側はDBから取得したデータをto_jsonでJSON形式に変換して respond_toで返してあげればいいんですよね？ UI側はこのデータを利用して構築するにはDOMでがりがり組むしかないんでしょうか？ イメージがいまいちつかめません…… 参考になる書籍やサイト等もしご存知であれば教えてください。 これはRubyというよりjavascriptのカテゴリになるんでしょうか。 もしそうであるなら申し訳ありません。 よろしくおねがいします。
ruby 初心者の50代のサラリーマンです。 若い人にrubyがいいだろうと言われて挑戦していますが、なかなか分かりません。 どなたか、教えてください。 大きなCSVファイルがあって、 １行目は項目名が入っていて不要です。 ２行目以降、 各行２列目にレコード名、 各行８列目に欲しいデータが入っています。 データは２９行毎に１レコード分になっています。 レコード名は各行で重複しています。つまり、 試験日，サンプルA，***，・・・・・，観測値１，・・・・・・ 試験日，サンプルA，***，・・・・・，観測値２，・・・・・・ 試験日，サンプルA，***，・・・・・，観測値２９，・・・・・・ 試験日，サンプルB，***，・・・・・，観測値１，・・・・・・ 試験日，サンプルB，***，・・・・・，観測値２，・・・・・・ 試験日，サンプルB，***，・・・・・，観測値２９，・・・・・・ というデータです。 それを、 サンプルA，観測値１，観測値２，・・・・・，観測値２９ サンプルB，観測値１，観測値２，・・・・・，観測値２９ サンプルC，観測値１，観測値２，・・・・・，観測値２９ と直してｃｓｖファイルに保存し直したいのです。 どなたか、rubyプログラムの書き方を指南して下さい。
eachメソッドの中でで配列を使いたいのですがどうすれば良いのでしょうか？
プログラミング初心者です． RUBYを使って，ゲーム作成をしてみたいと思っていますが， うまく環境設定ができません＞ ＜ 最終的には　http://dgames.jp/ja/projects/mygame/　ここに書いてある，mygameを，マックで動かしたいと考えています． その際に必要な RUBY/SDLのインストールをしているのですが，ターミナルを使うのが初めてなので，うまくいかないです． OSはMAC OS X 10.7.4です． 現在は，このページ　http://jp.rubyist.net/magazine/?0018-GameProgram …　を参考に　進めています． XCoteToolsとMacPortsは多分インストールできました． しかし各種ライブラリのインストールの時点で，早速つまずいています． sudo port install XFree86とターミナルで入力すると Warning: port definitions are more than two weeks old, consider using selfupdate ---> Fetching distfiles for XFree86 Error: org.macports.fetch for port XFree86 returned: You have an Apple X11 installation already. MacPorts will not overwrite it. If you really want to use XFree86 instead, please move it aside first : sudo mv /usr/X11R6 /usr/X11R6.apple Please see the log file for port XFree86 for details: /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_x11_XFree86/XFree86/main.log To report a bug, follow the instructions in the guide: http://guide.macports.org/#project.tickets Error: Processing of port XFree86 failed というようにでます． どうすればいいのか，分かりません．．． 助言いただければ，助かります ＞＜
RailsでWebアプリを作ったのですが、さくらVPSにて本番環境で公開後、 ブラウザからURLを入力しても繋がらない状態が頻発しています。 しばらくすると繋がるようになるのですが、また時間を置くと繋がらなくなり、 お名前.comの404 Page Not Foundのページが表示されてしまいます。 環境は以下のとおりです。 Rails3、MySQL、Apache、CentOS(さくらVPS)、DNS: お名前.com Apacheのエラーログ(/var/log/httpd/error_log-20120930)を見たところ、 以下のnoticeが繰り返し記録されており、これが怪しいと思うのですが、 ググってもピンと来る解決策が見つからず、詰んでいます。。 [Sun Sep 30 01:48:47 2012] [notice] caught SIGTERM, shutting down （中略） [Sun Sep 30 03:39:02 2012] [notice] SIGHUP received. Attempting to restart シャットダウン --> 再起動を繰り返しているように見えるのですが、 どうすれば良いのでしょうか？？ また、他に何か思い当たる原因等ありましたら教えてください。 ちなみに、Railsのlog/production.rbにはGET,POST等の記録が残っているだけで 特に怪しい所は見つかりませんでした。 また、MySQLのログにも特に怪しいところは見つかりませんでした。 以下、Apacheのエラーログの詳細を貼ります。 /var/log/httpd/error_log-20120930: [Sun Sep 30 01:48:47 2012] [notice] caught SIGTERM, shutting down [Sun Sep 30 02:30:01 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec) [Sun Sep 30 02:30:01 2012] [notice] Digest: generating secret for digest authentication ... [Sun Sep 30 02:30:01 2012] [notice] Digest: done [Sun Sep 30 02:30:01 2012] [notice] Apache/2.2.15 (Unix) DAV/2 Phusion_Passenger/3.0.17 configured -- resuming normal operations [Sun Sep 30 02:41:44 2012] [notice] caught SIGTERM, shutting down [Sun Sep 30 02:41:48 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec) [Sun Sep 30 02:41:48 2012] [notice] Digest: generating secret for digest authentication ... [Sun Sep 30 02:41:48 2012] [notice] Digest: done [Sun Sep 30 02:41:48 2012] [notice] Apache/2.2.15 (Unix) DAV/2 Phusion_Passenger/3.0.17 configured -- resuming normal operations [Sun Sep 30 02:48:42 2012] [notice] caught SIGTERM, shutting down [Sun Sep 30 02:48:49 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec) [Sun Sep 30 02:48:49 2012] [notice] Digest: generating secret for digest authentication ... [Sun Sep 30 02:48:49 2012] [notice] Digest: done [Sun Sep 30 02:48:49 2012] [notice] Apache/2.2.15 (Unix) DAV/2 Phusion_Passenger/3.0.17 configured -- resuming normal operations [Sun Sep 30 03:11:45 2012] [notice] caught SIGTERM, shutting down [Sun Sep 30 03:11:49 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec) [Sun Sep 30 03:11:49 2012] [notice] Digest: generating secret for digest authentication ... [Sun Sep 30 03:11:49 2012] [notice] Digest: done [Sun Sep 30 03:11:49 2012] [notice] Apache/2.2.15 (Unix) DAV/2 Phusion_Passenger/3.0.17 configured -- resuming normal operations [Sun Sep 30 03:39:02 2012] [notice] SIGHUP received. Attempting to restart
ログイン時のパスワードのバリデーションに使う正規表現を模索しています。 言語はrubyです。 環境：ruby1.9、rails3.2、OSはWindows。 チェック内容は以下となります。 　・英字の大文字を必ず1文字は含むこと 　・英字の小文字を必ず1文字は含むこと 　・数字を必ず1文字は含むこと 　・英数文字以外は使えない(記号はすべて不可) 　・パスワードの長さは10文字以上20文字以下 自分で考えたコードは以下のようにしています（modelに記述） validates :password, :presence => true, :confirmation => true, :length => { :within => 10..20 }, :format => { :with => /(?=.*\d)(?=.*[a-z])(?=.*[A-Z])/} 英数の大小を考慮しなくてよいのであればできそうなのですが そこが一番のネックとなりうまくいきません。 知恵をお貸し願えたらと思い質問させていただきました。 質問も初めてなので、足りない情報があれば追記いたします。 よろしくお願いいたします。
rubyでfacebookのとあるユーザのフィードを取得したいのですが、titleの文字コードがおかしくなってしまいます。 例えば無印のフィードは以下のURLで取得できますが https://www.facebook.com/feeds/page.php?format=r … 実際にruby（railsのコンソール）で取得するとtitleだけ以下のようになってしまいます。 日本語に直すにはどうしたらいいのでしょうか？ url = "https://www.facebook.com/feeds/page.php?format=r … rss = open(url){ |file| RSS::Parser.parse(file.read) } rss.items.first.title => " &#x90fd;&#x4f1a;&#x306e;&#x3069;&#x771f;&#x3093;&#x4e2d;&#x306b;&#x3042;&#x308b;&#x93ae;&#x5b88;&#x306e;&#x68ee;&#x3001;&#x660e;&#x6cbb;&#x795e;&#x5bae;&#x3002;\n&#x3053;&#x306e;&#x8c4a;&#x304b;&#x306a;&#x68ee;&#x304c;&#x3001;&#x5b9f;&#x306f;&#x5929;&#x7136;&#x6797;&#x3067;&#x306f;&#x306a;&#x3044;&#x3068;&#x8a00;&#x3046;&#x3068;&#x3001;&#x9a5a;&#x304b;&#x308c;&#x308b;&#x3067;&#x3057;&#x3087;&#x3046;&#x304b;&#x3002;\n&#x4eca;&#x304b;&#x3089;90&#x5e74;&#x3061;&#x3087;&#x3063;&#x3068;&#x524d;&#x306b;&#x4eba;&#x306e;&#x624b;&#x3067;&#x690d;&#x3048;&#x305f;&#x6728;&#x3005;&#x304c;&#x80b2;&#x3063;&#x3066;&#x3067;..."
現在、Rubyを用いて あるWebページから特定のタグの要素を抽出して テキストデータに出力したいと思い、プログラムを書いているのですが、 途中で行き詰ってしまいました。 ちなみにHpricotやNokogiriといったHTMLパーサーを試してみました。 パーサーを使うのは初めてです。 例えば以下のようにHTML文書に抽出したい部分がDIVタグとPタグに囲まれていた場合、 ===================================== ・・・ <div class="content"> <div class="header">不要部分</div> <div class="title">抽出したい文字列１</div> <div class="subtitle">抽出したい文字列２</div> <div class="subtitle">抽出したい文字列３</div> <p class="paragraph">抽出したい文字列４</p> <p class="paragraph">抽出したい文字列５</p> <div class="comment">抽出したい文字列６</div> <div class="footer">不要部分</div> </div> ・・・ ===================================== このHTMLからまずは 抽出したい文字列１ 抽出したい文字列２ 抽出したい文字列３ 抽出したい文字列４ 抽出したい文字列５ 抽出したい文字列６ といった出力が得たいのです。 プログラムも書いてみました。 ===================================== #ドキュメント全体を取得（dataにはHTMLの文字列が入っている） html = Hpricot(data) #内容部分(contentクラスのdiv)を取得（CSSセレクタで記述） content = html/"div.content" ===================================== ここまでは良いのですが、 そのあと、div要素を取り出すだけであれば headerクラスと、footerクラスを抽出しないように ===================================== (content/"div:not(.header):not(.footer)").each{ |line| puts line.inner_html } ===================================== とすることで、 抽出したい文字列１ 抽出したい文字列２ 抽出したい文字列３ 抽出したい文字列６ が得られますが、pタグをカンマでdivの前に追加して ===================================== (content/"p,div:not(.header):not(.footer)").each{ |line| puts line.inner_html } ===================================== のようにすると、 抽出したい文字列４ 抽出したい文字列５ 抽出したい文字列１ 抽出したい文字列２ 抽出したい文字列３ 抽出したい文字列６ のように出力されます。 同様にdivの後にpを追加し ===================================== (content/"div:not(.header):not(.footer),p").each{ |line| puts line.inner_text } ===================================== のようにすると 抽出したい文字列１ 抽出したい文字列２ 抽出したい文字列３ 抽出したい文字列６ 抽出したい文字列４ 抽出したい文字列５ のようになってしまいます。 つまり、複数のタグを指定すると、指定した順序で抽出されるようです。 代わりに子供すべてを列挙するchildのようなものがあるかと、調べてみたのですが、 どうやらそのような書き方はないようです。 複数のタグを含む場合にはHTMLパーサーでは解析できないのでしょうか。 パーサーは抽出時に順番を保証はしてくれないのでしょうか。 あきらめて、正規表現で抽出しようと思いましたが、 ===================================== <div class="comment"> <div class="comment_header">ごちゃごちゃ</div> <div class="comment_body">抽出したい要素６</div> </div> ===================================== などDIVが入れ子となっている場合に、 非常にややこしく感じたので お手上げ状態です。 どのように、解決できるでしょうか。 よろしくお願いします。
MacRubyを利用してアプリを作っているのですが、ファイルの読み書きができず困っています。 DeployせずにXcode上で実行した時は全く問題なく読み書きできるのですが、Deployするとファイルへのアクセスができませんでした。 io = File.open("akarin.txt") akarin = io.read io.close akarin = NSString.stringWithContentsOfFile("akarin.txt", encoding:NSUTF8StringEncoding, error:error) akarin = `cat akarin.txt` AppDelegateクラスのinitializeで行なっています。 上記の3つの方法で試しましたがすべて無理でした。 上から2つはそもそも起動せず、一番下のは起動しても戻り値は akarin.to_s => "" でした。 書き込みもio.write、system("echo 'akarin' > akarin.txt")で試しましたが無理でした。 ファイルのアクセスにはどこかの設定でなにかの許可がいるのですか？ どのように変更すればよいのか教えてください。
こんばんは。 変数について教えて下さい。 プログラム自体が初めてなので 「たのしい Ruby 第3版」を読んでいます。 ずっとインスタンスとオブジェクトの違いが曖昧なままです。 その本の「クラスとモジュール」という章にて クラスを定義する構文。 インスタンス変数とローカル変数の違いですが、 以下の説明で一部理解できずにつまずいています。 ―――――――――――― @ で始まる変数は インスタンス変数 といいます。 ローカル変数はメソッドごとに異なる変数として扱われますが、 インスタンス変数は同じインスタンス内であれば、 メソッド定義を超えてその値を参照したり、変更したりできます。 なお、初期化されていないインスタンス変数を参照すると nil が得られます。 インスタンス変数は、インスタンスごとに違う値を持つことができます。 またインスタンス変数は、 インスタンスがある間は値を保持しておいて 何度でも利用することができます。 一方、ローカル変数はメソッド呼び出しごとに新しく割り当てられるため、 メソッドから抜けると値を忘れてしまいます。 ―――――――――――― ここで分からないのは、 ・ローカル変数が "メソッドごと" に異なる変数として扱われる ・インスタンス変数は同じ "インスタンス内" であれば、 メソッド定義を超えてその値を参照したり、変更したりできます の部分です。 Webで検索してますが、 プログラミング経験ありを前提で書かれているような。 他の言語も知らないので分からない、そんなページが多いです。 人に聞くからには 自分でも頑張って理解できるように考えますので、 どうか回答よろしくお願いします。
悩んだ挙句、尋ねる相手もいないため、質問させてください。 テキストエディタに "puts 1+2" として、「calc.rb」と名前をつけて保存。その後コマンド プロンプトで"ruby calc.rb"で実行とすると、"3"と出力するはずのところ、"ruby: No such file or directory -- calc.rb (LoadEroor)"とでます。 何が原因でしょうか？ ちなみに、テキストエディタとして、メモ帳　or　SciTEを使用。 また、"ruby -v"の実行は、うまく表示されました
ruby初心者です。 バイナリファイルを読み込んで、その値を2倍して再びバイナリファイルに書き込む ソースを作りたいのですが、どなたかご教示願えますでしょうか。 以下試行錯誤して作ってみたのですが、このソースだと 例えば31というバイナリデータが62で書かれず、 36、32のasciiコードで保存されてしまいます。。 ----------------------------- BinData = open("in.data") BinData.binmode File.open("out.data", "wb"){|f| while (b = BinData.read(1)) m = b.unpack('C')[0]*2　　　　　#取り込んだバイナリデータを整数化して2倍 p sprintf("%x", m) k = format("%x", m)　　　　　　　#16進数に変換 f.write(k) end } すみませんが宜しくお願い致します。
rails gで生成したファイルがgit resetしても消えません。。 > git commit -a -m "first commit" > rails g controller top index > git reset --hard HEAD resetしたのにindex.html.erbが消えてくれません。。 rails gしたファイルも消して元の状態に戻すには、どうしたらいいのでしょう？ railsコマンドを打つ時に(git rmのように)何かしなくてはいけないのでしょうか？
layoutを使用して、共通のヘッダーフッターを定義しています。 そのファイル内で、javascript_include_tag や、stylesheet_link_tag を行うようですが、 共通のlayoutでそれを行ってしまうと、 ページによって別のjsファイルを追加で読み込むことが出来ないのでは？ と思っています。 これは通常どのように解決するのでしょうか？ それともページごとにlayoutファイルを用意するような感じに作るのが普通ですか？
課題で出されたツールを自分で書いてみたんですが、エラーが起こる理由が分からないので教えて頂きたいです。 ↓リンク先に書いてみたスクリプトとエラー内容が書いてあります。 http://ideone.com/pjxA5 課題の内容は、コマンドプロンプトの引数でディレクトリ名を与えて、そのディレクトリにあるファイルやサブディレクトリにあるファイルから拡張子が「.c」「.cpp」のものを再帰的に全て探します。 探した拡張子のファイルの中身に「//」で始まる行(コメント行)があればすべて置換して消すようにする、といった感じの内容になっています。 rubyを始めてそんなに経っておらず分からない事だらけなので、構文が間違ってるなど、エラーが出る理由を教えて頂ければと思います。
rubyのスクリプトをコマンドプロンプトで実行する際に、ディレクトリ名を引数に指定したいと思っています。 その場合記述的には「ruby スクリプト名.rb ディレクトリ名」と書けばよろしいのでしょうか？ 例えば「temp」というディレクトリがあり、それを指定したい場合は「ruby スクリプト名.rb temp」と書けば指定できてることになるのでしょうか。 低レベルな質問かもしれませんが、ruby超初心者なので教えて頂ければと思います。
こんにちは。 CSVファイル(base.csv)の先頭列に、別のテキストファイル(add.txt)の中身を新規の列として挿入したいと考えているのですが、よい方法がわかりません。。。 どうのような方法を使えば対応することができるでしょうか？ どうぞよろしくお願いいたします。 ■CSVファイル(master.csv) title,developer_name,seller_name,primary_genre_name,application_url AAA,BBB,CCC,DDD,EEE AAA,BBB,CCC,DDD,EEE AAA,BBB,CCC,DDD,EEE AAA,BBB,CCC,DDD,EEE ■テキストファイル(add.txt) id 000 111 222 333 ↓ ■目標としたファイル(master.csv) id,title,developer_name,seller_name,primary_genre_name,application_url 000,AAA,BBB,CCC,DDD,EEE 111,AAA,BBB,CCC,DDD,EEE 222,AAA,BBB,CCC,DDD,EEE 333,AAA,BBB,CCC,DDD,EEE
初めまし.て。 今度新しく入社する会社で、ruby on railsを使用した開発を致します。 そこで、現場ではなんというエディタを使うのが一般的なのでしょうか。 私は今まで、サクラエディタと秀丸くらいしか使ったことがありません。 入社前までにエディタの使い方くらいは覚えておきたいので、 railsを会社で使用している方、いらっしゃいましたら、ご回答お願いいたします。
今度新しい仕事につきます。 そこで使用されているのはruby on Railsだそうです。 ruby on Railsやrubyのことは全くわかりません。 プログラムの経験はphpをかじった程度です。 これから猛勉強をして習得しようと考えています。 そこで質問が3つほどあります。 １．ruby on Rails を勉強するにあたり、rubyの勉強もしないといけないのか。 また、rubyの勉強をしなければいけない場合、rubyとRailsどちらを先に勉強するべきか。 ２．なにかよい参考書はあるか。 ３．よい勉強方法はあるか お忙しいとは思いますが、ご回答よろしくおねがいします。
ruby on rails において、form_forヘルパーを用いてデータを取得したいのですが、ユーザー入力だけでなく、システムから計算したデータも入力したいのですが、やりかたがわかりません。 具体的に、blogモデルにpram1,pram2,pram3とあった場合、pram1はユーザーが入力し、pram2には、システムで計算した一週間後の日付を入れて置きたい場合、 controllerで、 @blog = Blog.new blog.save viewで <%= form_for(@blog) do |f|%> ～省略～ <%= submit %> などと、書くと思いますが、どのタイミングで、代入すればよいのですか？ できれば、サンプルコードで教えてください。
僕は Jack Hamm 氏の「人体のデッサン技法」で 絵を練習しています。 その本に沿って練習した画像を 練習帳のように Tumblr へ Post しています。 以前からウェブデザインにも興味があって それでも絵を優先しつつ、 のこのことHTMLやCSSなどもやっていました。 ひと月くらい前、ついにプログラム言語を覚えようと PHPのことを調べてたのですが、 ついこの間、分からないところを 友達のプログラマーに聞いてみました。 教えてはくれたものの、PHPよりRoRをすすめられ、 まだ手を出したばかりで浅かったこともあり、 PHPをやめてRubyを勉強し始めました。 深い理由はないんですが PHPはやる前から好きではなくて Rubyをすすめられた時はちょっと嬉しかったです。 でもちょっとハマりすぎて、 今まで優先してた絵の練習より Rubyに時間を使いすぎてしまいます。 正直、Rubyより絵の方が 「ここまでやって今更やめられない」 ほど長く続けてます。 Rubyも楽しいのですが、 絵が上手くなった実感というか、 成果というのは プログラムほど単純には得られず、 困った悩みです。 絵が趣味の友達もいませんので 自分だけで練習してます。 モチベーションのバランスが悪いんでしょうか。 何とかして絵とプログラムを 安定したバランスで両立できないでしょうか。 アドバイスをいただけたら嬉しいです。 よろしくお願いします。
お世話になっております。 現在進行中のプロジェクトをgit cloneにて共有リポジトリから本番環境のサーバーに移しアプリケーションにアクセスしようとしたところ、Passengerが以下の様なエラーを吐き出してしまい、その解決策が見いだせずにいます。 A source file that the application requires, is missing It is possible that you didn't upload your application files correctly. Please check whether all your application files are uploaded. A required library may not installed. Please install all libraries that this application requires. Error message: no such file to load -- rubygems/path_support 当方環境は以下の様になります。 【共通】 サーバー Apatch DB MySQL ruby1.9.2 【ローカルサーバー（開発環境）】 MacOS X Rails 3.2.2 【共有リポジトリ】 さくらVPS 【本番サーバー（デプロイ先）】 さくらVPS CentOS6 Raisls 3.2.5 初心者故今回この質問をさせていただく上で必要な情報が何かというところも曖昧です。大変恐縮なのですが、何か支離滅裂な個所がありましたらそちらも合わせてご指摘いただければと存じます。 以下実行内容ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー 【ローカルにてproductionモードでプロジェクトを実行するために以下を実行】 passengerのインストールと設定　→　httpd.confの設定　→　gemにてmysql2のインストール　→　mysqlにてDBの作成とそれに対するユーザー、パスワードを設定　→ database.ymlの設定　→　rake db:setup RAILS_ENV="production"を実行 補足：ここまでのプロセスでローカル環境にてproductionモードで動作しております。 この状態でgit commit → pushを行い、本番サーバーにてcloneを実行しております。 【サーバーサイドで実行したこと（公開ディレクリは/var/www/html以下はDocumetRootは/var/www/html/public/と設定してあります）】 公開ディレクトリ【html】にて共有リポジトリよりプロジェクトをclone　→　passengerのインストールと設定　→　rake db:setup RAILS_ENV="production"を実行(末尾に--traceを付けcreateとmigrateも実行) ここまででhttp://ドメイン/コントローラー名にてプロジェクトにアクセスできると考えていたのですが、上記の様なエラーが発生し困っております。 繰り返しとなりますが、Rails初心者故上記に記させて頂いたプロセスにて足りなかったり余計であったりする個所もあるかと存じます。読みづらい文章の上大変恐縮ですが、そちら合わせてご指導いただければ幸いです。 宜しくお願い致します。
自作したrakeファイルでDBのデータを追加・更新するような処理をしたいのですが、 うまく参照できずに実行してもエラーになります。 以下のようなソースです。 ---------------------------------------------------- namespace :glaph do desc "ｘｘｘｘｘ" task :タスク名 do 　　--中略-- def login_at Time.current.strftime("%Y%m%d") end def get_user User.where(xxx: 1, login_at: login_at).first end def new_user user = User.new( is_period: 1, login_at: login_at ) user.save end def main new_user unless get_user end main end end ---------------------------------------------------- エラー内容： rake aborted! uninitialized constant User rails consoleではもちろん正常に処理できるのですが。。 rakeのコマンドではDB(modelクラス)を参照できないのでしょうか？ お手数をお掛けしますが、宜しくお願いします。
RubyのFor文でCのように細かくループ・カウンタの増減を制御したい場合、どのように書くのが一般的なのでしょうか。 想定しているのはこんな感じです。 int i; for(i = 0; i <= 100; i = i + 0.2) { //do something } 普段は何気なくwhile文やuntil文を使ってしまうんですが、ちょっと気になったので質問させて頂きました。ご存知のかたがいらっしゃいましたらお知恵を拝借させてください。
ロリポップで使いたいのですが、インストール方法教えてください。
家電メーカーでミドルウェアの開発をしています。 メーカーでは、コンパイラーの知識や OSの知識、並列分散処理、ネットワークの知識等、 これらのコンピュータサイエンス系の理論を理解していると 技術的に強い人であると認められる傾向があると思います。 これはWeb業界でも同様ですか？ そういった知識はWeb業界でも生きますか？ それとも何か別のスキルが求められますか？ Web業界ではどのような知識・スキルの高い人が 一般的に求められるのでしょうか？
現在rubyでファイルパスからファイル名を取得したいと思っています。 具体的には"public/foror/filename"というstringがあったとして、このfilenameを取り出したいのです。 なので末尾から検索して最初に/が一致するまでの文字を取り出すという処理を書けばいいと考えて、下記のようなプログラムを書きましたが、うごきません。 p filepath[\/.*$] rubyも正規表現も初心者なので、色々と間違っているところがあるとおもいますが、なにかお気づきになった点がございました、ご指摘いただけると幸いです。
現在rubyを勉強しているのですが、わからないことがありこまっています。 それはインスタンスにどんなクラスが入っているかわからないのです。 具体的にソースで説明させていただきます。 f= File.open("hello.txt") このfのインスタンスにどんなクラスのインスタンスが格納されているか知りたいのですが、何か方法は無いのでしょうか？
今CentOSにrailsをインストールしようとしているのですが、はまっています。 rubyはrvmでインストールできたので、gemでrailsをインストールしたのですが、 railsコマンドをうつと、「-bash: /usr/local/bin/rails: /usr/local/bin/ruby: bad interpreter: そのようなファイルやディレクトリはありません。」とでます。 これは昔railsを入れて、うまく動かなかったのでuninstallしたという経緯がある り、その設定ファイルがどこかにのこっているからだと思うのですが、でもrails のパスをどこにとおし直したらいいかわかりません(bash_profileかな？と思うのですが 、railsとうったときに何を参照していいいかわからない)。 何か気づいた点がありましたら、助言いただけると幸いです。
よろしくお願いします。 cgiの勉強中なのですが、文字列の比較が上手くいかずに困っています。 プログラム中に記述した日本語は問題なく同じ文字として比較されるのですが、 ファイルから文字を読み込んだ日本語を比較させようとすると上手くいきません。 以下のプログラムでは４箇所から「yes」と返ってくるのが理想でしたが、 後半の２箇所からしか「yes」と返ってきませんでした。 文字コードの問題かとも思い、NKF等で変換してみたり試してみましたが上手くいきませんでした。 また、どのファイルもUTF-8に統一されているのでファイルの読み込み時に文字コードの変換は必要無いのではないかとも思っています。 使用しているファイルは以下の３ファイルとなり、同一フォルダに入れています。 プログラム中で日本語を使用したかったので、どのファイルも文字コードはUTF-8で保存しています。 question.rb　　：メインプログラム Unit_module.rb ：メインから呼び出すモジュール question.txt　 ：文字列の入ったテキスト（最後は改行していません） rubyのバージョンは1.9.3p125を使用しています。 独学ですので周囲に訊く事も出来ずにいます。 何が問題で文字列の比較が上手くいっていないのでしょうか？ 以下は各ファイルの内容となります。 ---------------question.rb----------------------------------------- #! /usr/local/bin/ruby # -*- encoding: utf-8 -*- #モジュール読み込み require "./Unit_module" include Unit #HTML作成 print "Content-Type:text/html;charset=utf-8\n\n" print <<EOF <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> <html lang="ja"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <title></title> </head> <body> EOF str_test = "" #ファイル読み込み時の日本語の比較 f = open("./question.txt", "r") f.each{|line| str_test = line if str_test == "東" then print "yes" end test(str_test) } #プログラム中に記述した日本語の比較 str_test = "東" if str_test == "東" then print "yes" end test(str_test) print "</body></html>" -----------Unit_module.rb------------------ # -*- encoding: utf-8 -*- module Unit def test(str_test) if str_test == "東" then print "yes" end end end -----------question.txt--------------------- 東 --------------------------------------------
レンタルサーバでdate2(http://www.funaba.org/ruby.html#date2)ってライブラリを使いたいです。 ファイルをダウンロードしてtar -xvfしてREADMEに従ってくと、 %ruby install.rb install rm -f InstalledFiles ---> lib mkdir -p /usr/local/lib/ruby/site_ruby/1.8 install date.rb /usr/local/lib/ruby/site_ruby/1.8/ install.rb:633:in `initialize': Permission denied - /usr/local/lib/ruby/site_ruby/1.8/date.rb (Errno::EACCES) 以下略 となりました。レンタルサーバなので/usr/localなどに書き込み権限がないからの様です。 こういうライブラリをレンタルサーバで使いたい時って、どうしたら良いのでしょう？？ 因に、今まではgem でインストールするライブラリしか使った事がなく、 gemの時は、 setenv GEM_HOME $HOME/local/lib/gems/1.8 setenv RB_USER_INSTALL true gem18 install hogehoge などとしてました。 ご指導の程、よろしくお願いいたします。
レシーバーとなる数値を引数で割って商と余りを配列にして返す divmodメソッドの読み方を教えてくれませんか？ お暇な時でけっこうです＾＾よろしくお願いします。
現在rails3.2でrailsの勉強をしています。この過程で困ったことがありましたので質問させていただきました。 それはviewにfomr_forを定義するとエラーをはいて動かないのです。 具体的にソースで説明します。 ・コントロールのソース class ComicListController < ApplicationController def index @comic_master_r = ComicMaster.new end end ・Viewのソース <%= form_for @comic_master_r do |f| %> <% end %> ・エラーの内容 undefined method `comic_masters_path' for #<#<Class:0x9da00d0>:0x9e73d04> 私個人の見解としては、form_forを使う際に必要とされるコントロール側の変数の定義が足りないからではないかと思っているのですが、googleの検索結果ではViewしか書いていないことが多く、コントロールにどんなものを定義すればいいのか、うまく判断がつきません。 ご回答お待ちしております。
ltotal = 0 #行数の合計 wtotal = 0 #単語数の合計 ctotal = 0 #文字数の合計 ARGV.each do |file| begin input = open(file) #ファイルを開く(A) l = 0 #file内の行数 w = 0 #file内の単語数 c = 0 #file内の文字数 while line = input.gets l += 1 c += line.size line.sub!(/^\s+/) #行頭の空白を削除 ary = line.split(/\s+/) #空白文字で分解 w += ary.size end input.close #ファイルを閉じる printf("%8d %8d %8d %s\n", l, w, c, file) #出力を整形する ltotal += l wtotal += w ctotal += c rescue => ex print ex.message, "\n" #例外メッセージを出力(B) end end printf("%8d %8d %8d %s\n", ltotal, wtotal, ctotal, "total") ローカル変数はメソッドを抜けると値を忘れてしまうのでは なかったでしょうか・・・ ここでltotalやwtotal等を呼び出しているのは明らかに メソッドの外部からだと思うのですが、変数に入れられた 値は保持されたまま表示されるのでしょうか
memo.txtの中に含まれている"俺の飯"という文字列を"私のごはん"というふうに置換を行いたいのですが、 現在のやり方だとファイルを開いて1行ずつ読み込んで新しいファイルに文字列を書きだしており 読み込んだ際、置換対象の文字列があった場合に置換して書きだしておりますが このやり方だとどうしても新規ファイルを出力しなければいけません。 これを新規ファイルを作らずにmemo.txtの中身だけを書き換えるようにするには どのような処理にすれば良いのでしょうか？ 何卒宜しくお願い致します。 ---- sample.rb require 'rubygems' open("memo.txt"){ |f| open("after_memo.txt","w"){ |o| while line = f.gets line.gsub!("俺の飯", "私のごはん") o.puts line end } } -- memo.txt 俺の飯はリーズナブル！ 俺の飯美味しそう！
現在、javaからrubyに移行するために勉強しているのですが、別のファイルに定義したクラスのインスタンスが作成できなくて、困っています。 具体例をあげると require './B' class A end def initialize b = new B end end --別のファイル class B def initialize p 'hello' end 　public : initalize end こんな2つのファイルがあったとして、Aのインスタンスを作成すると、 undefined method `B’　というエラーがでます。 私としてはこのエラーの原因がinitializeがデフォルトでprivate宣言なのが原因だと考えているのですが、publicと指定してもエラーとなることから、いくつか疑問が湧いたので質問させていただきます。 １、そもそもBクラスのインスタンスが作成できないのはinitializeがデフォルトでprivate宣言なのが原因なのか？ ２、1があっていたと仮定するとBクラスのinitializeをpublic指定しているのになぜ呼び出せないのか？ ３、rubyはなぜデフォルトでinitializeがprivateなのか？（javaではコンストラクタをprivateにするということは普通はしない。使うときはシングルトンやUtilのようなクラスを作るときに限る） 以上です。よろしくお願いします。
現在railsの勉強をしているのですが、その仮定でgemを使うことがおおくなりました。 しかしgemの使い方がいまいちわかりません。 具体的にはmysqlをインストールしようと考え gem install mysql とうって、mysqlをインストールしたのですが、このソフトの使い方がわかりません。 といいますのも、mysqlとうってもコマンドはみつからず、そこで gem which　mysql でrbファイルを探し出し実行したんですけど、特に反応が無い。readmeもない。 自分でインストールしていて間抜けな話なんですが、gemで入れたプログラムはどうやって使えばいいんでしょうか？ご回答お待ちしております。
1つのクラスオブジェクト内のインスタンス全てで共有できる クラス変数 @@a　と、 同じインスタンス内であればメソッドの定義を越えてその値を 参照したり、変更したりできるインスタンス変数 @a のスコープの違いをお手すきでしたらご指導願えませんか？ あとクラス変数にはセッターやゲッター等のアクセスメソッドを 設定できるんですか？ いろいろ知りたいです。
SSHでVPS(Cent OS5.8)に接続してrailsのサーバーを立ち上げました。そうすると当たり前ですが実行されターミナルに状態が出力されます。このときにターミナルは別の操作ができなくなるのですが、この場合どうやれば実行させつつ別の作業操作ができるのでしょうか。 それともPC側から別のプロンプトを立ち上げてSSHでログインするのでしょうか。Linuxは初めてなのでご教授の方よろしくお願いします。
スクリプトから入ると説明しにくいけど、後で挫折しやすいという意見を 聞いたのですが、本当でしょうか？ ちなみに独学なのですが、独学ならなおさらといってました。 Cから入るのが無難とかなんとか。 本当にそうなんでしょうか？
rails runnerコマンドを実行するのに、１分以上かかります。 1分おきに定期実行を考えているのですが、とても使用できません。 1分おきに定期実行する方法はありますでしょうか。 開発実行環境 OS WindowsXP ruby 1.9.2p290 rails 3.2.2 勉強始めて3日目の初心者ですが、宜しくお願いします。
rubyそのものの質問でなくて申し訳ありせん。 WindowsにてActiveScriptRubyを使用しております。 http://www.geocities.co.jp/siliconvalley-PaloAlt … の記述にて、「できること」に「WScript, CScriptからのRubyスクリプトの実行」とあったので試してみたのですが以下の様なエラーが出て動作しません。 Win XP ２台、Win Vista １台で試しましたが同じ結果となりました。 http://www.artonx.org/data/asr/ から Ruby-1.9.3-p125.msiをインストールして、%ruby_install_dir%\binにパスを通してrubyを使用しておりますが、CScript（或いはWScript）からrubyを動作させるには他に何か設定が必要なのでしょうか？ お解りになる方がいらっしゃいましたらご回答をお願い致します。 コマンドプロンプトから実行しています。 D:\ruby>ruby -v ruby 1.9.3p125 (2012-02-16) [i386-mswin32_100] D:\ruby>ruby hello.rb ←これは普通に動作します。 D:\ruby>cscript hello.rb Microsoft (R) Windows Script Host Version 5.7 Copyright (C) Microsoft Corporation 1996-2001. All rights reserved. 入力エラー: ファイル拡張子 ".rb" を持つスクリプト エンジンはありません。 D:\ruby>wscript test.rb ←同じエラーのメッセージウィンドウが出ます。
MacでRuby on Railsのソフトを開発するのに向いているエディタを探しています。 現在はAptanaを使っているのですが、もう少し単語の補完機能が充実している物はありますでしょうか？
Ruby と Ruby on Railsは何が違うんでしょうか？ 漠然とした質問ですいません。
array=%w(1 2 3 4) のような文字列の配列があるとします。 これを数値の配列にしたいです。 以下の様にしてみました。 array=array.inject([]){|a,v| a<< v.to_i } これでも出来ましたが、もっとrubyらしい方法ってあったら教えて下さい。
ruby19 -vは使えるのに、gem19 -vが使えない ▽ruby1.9をcoreserverとmacのホームディレクトリにインストール - Born Neet] 　 http://blog.bornneet.com/Entry/282/ を参考に、レンタルサーバに「ruby-1.9.2-p180」をインストールしようとしています。 「ruby19 -v」と打つと、「ruby 1.9.2p180 (2011-02-18 revision 30909) [i686-linux]」と表示されるのですが、 「gem19 -v」と打つと、「command not found」となってしまいます。 「gem19 -v」を有効にするには、どうすれば良いでしょうか？ ＜インストールする際に打ったコマンド＞ /local/src/ruby-1.9.2-p180> ./configure --prefix=$HOME/local --program-suffix=19 ＜エラーと思われる箇所＞ make[1]: Leaving directory `/virtual/ユーザー名/local/src/ruby-1.9.2-p180' Generating RDoc documentation ./miniruby -I./lib -I.ext/common -I./- -r./ext/purelib.rb ./tool/runruby.rb --extout=.ext -- "./bin/rdoc" --no-force-update --all --ri --op ".ext/rdoc" "." ./tool/runruby.rb:63: warning: Insecure world writable dir /virtual/ユーザー名/lib/PEAR in PATH, mode 040777 uh-oh! RDoc had a problem: Directory .ext/rdoc already exists, but it looks like it isn't an RDoc directory. Because RDoc doesn't want to risk destroying any of your existing files, you'll need to specify a different output directory name (using the --op <dir> option) 「RDoc」ってドキュメント(？)だから関係ないようにも思うのですが、何か影響しているのでしょうか？ .ext/rdoc は既に存在しているけど、「RDoc directory」に見えない、とは、どういうことなのでしょうか？
数万行あるテキストファイルの中を数百パターンくらいの正規表現で サーチするRubyスクリプトを作成しようとしていますがうまくできません。 どなたかお知恵を拝借させてください。 以下の流れで作ろうとしています。 「 ファイルを一行GETして、その行が事前に定義した配列内の正規表現に合致していればprintする。 次の行をGETして、最初からた正規表現の配列を比較して、合致していればprintする。 テキストファイルが終わるまで、繰り返し 」 何分初心者なもので…、他のやり方があれば教えていただきたいです… ヨロシクお願いしますm(__)m
$KCODE='e' require 'jcode' puts 'ー'.tr('ー','-') と書いてみたのですが、 /usr/local/lib/ruby/1.8/jcode.rb:137:in `tr!': premature end of regular expression: /[ー]/ (RegexpError) from /usr/local/lib/ruby/1.8/jcode.rb:148:in `tr' from b.rb:5 と怒られます。なにが悪いんですか？　あと、実は全角の（）も置換したいので、 $KCODE='e' require 'jcode' puts 'ー（）'.tr('ー（）','-()') などと書いてみたのですが、今度は -())) と期待した結果と異なるものが出てきました。 何が悪いのでしょうか？ 以上、ご指導の程、よろしくお願いいたします。 P.S nkfって奴で、全角記号を半角記号へ変換って出来ないと思って、こんな事してます。
Cygwin上でRuby言語でInternetExplorerのプログラムを書いています 現在は １、win32oleでIEを開く ２、プログラム内でｈｔｍｌでHPを作成し、IEで開く ３、２をプログラムを終了させるまで続ける といったものですが、２でURLを習得し、IEで開こうとすると新しい窓（ウィンドウ）が開いてしまいます。新しい窓（ウィンドウ）を開かずに、１で開いたIEを更新させたいです。 または、前に開いたページを閉じて、新たなページを開く。 win32oleやwin32APIなど、Cygwin上のRubyで使える方法ならいいので、ご存知の方いましたらお願いします。
私はプログラミングというものを全く経験したことがありません。 タイピングも物凄く遅いくらいパソコン初級者です。 パソコン自体、ネット検索や通販くらいしか使いません。 しかし私はゲームを作りたくてRubyという言語を勉強したいです。 それでこの質問のタイトルの本を買いました。(アマゾンで買ったので中身を見ずに買いました。) しかし読みながら3時間ほどパソコンをいじってみましたが、解説に飛躍がありすぎてまだ難しいです。 もっと丁寧に解説された初心者のためのRubyの本はないでしょうか？
たとえば、 Class Hoge initialize(arg) 　@data=arg end def read(size) 　@dataからsize分読んで返す。 end end みたいなクラスを hoge=Hoge.new(aaa) puts hoge.read(1024) puts hoge.read(1024) みたいに使いたいです。 指定したバイト分読むってどうするんですか？ ご教授の程、宜しくお願いいたします。
こんばんは Ruby1.9.2のrails3.1.1を使用しています。 csvファイルをアップロードして、 data = param[:file].read.encode("UTF-8","UTF-8", :invalid => :replace, :undef => :replace, :replace => '').read.encode("UTF-8", :invalid => :replace, :undef => :replace, :replace => '?') のように読み込みまして、最初の1行の最初の要素が"code"でした。そこで、 data[0][0] == "code" としましたところ、falseが出力されました。両方とも文字コードはUTF-8で"code"なのですが、調査したところ data[0][0]length #=> 5 "code".length #=> 4 という違いが見つかりました。 この読み込みデータの見えない文字はなんなんでしょうか。 また、これを取り除く方法は何かありませんでしょうか。よろしくお願いします。 参考 data = param[:file].read.encode("UTF-8", :invalid => :replace, :undef => :replace, :replace => '').read.encode("UTF-8", :invalid => :replace, :undef => :replace, :replace => '?') としたところ、"???code"、長さ7という結果になりました。
db = SQLite3::Database.new('hoge.db') で、 db.execute('replace into table01 (a, b, c, d, e, f, g) values(?, ?, ?, ?, ?, ?, ?)',va, vb, vc, vd, ve, vf, vg); とかって書いてるのですが、 これを、 def replace(table,k,v) db.execute('replace into ' + table + '(' + k.join(',') + ') values('+ k.collect {'?'}'.join(’,’) +')' , ここどうかいたら？？) end みたいな事を考えたのですが、vって配列でもらった値をばらばらにdb.executeのパラメータに渡したいのですが、 できませんでして、 replace('table',%w(a, b, c, d, e, f, g),[va, vb, vc, vd, ve, vf, vg]) みたいに使いたいです。 引数が可変のパラメータをそのまま、つぎの関数に渡すみたいな。 なんか、ラクする方法ないですか？ ご教授の程、宜しくお願いいたします。
Rubyでメソッドの引数名をメソッド内部で取得するような事は可能でしょうか？ def hoge(a,b,c) # ここでa,b,cの引数名、またその値を取得 # 例えば、{:a=>1, :b=>2, :c=>3}のようにHashの形式で得るなど。 end local_variablesだと、引数も含まれますがその他で定義したものも拾ってしまうため、他の方法を探しています。 わかる方がいれば教えていただけますでしょうか。
p [{:a=>'x',:b=>'X'},{:a=>'y',:b=>'Y'},{:a=>'z',:b=>'Z'}].inject(Hash.new(0)){|h,v| h[v[:a]]=v[:b]} 上記以下エラーになります。 test.rb:1:in `[]=': string not matched (IndexError) from test.rb:1 from test.rb:1:in `inject' from test.rb:1:in `each' from test.rb:1:in `inject' from test.rb:1 以下のような、ハッシュを作りたいのですが、 {'x'=>'X',y'=>'Y',z'=>'Z'} 何がダメですか？ ご教授の程、お願いいたします。
タイトルのとおりですが、サーバーに保存してあるテキストファイルを読み込んで、 出現回数の多かったものを表示したいと考えています。 言語はRubyかできればJava scriptでと考えています。 テキストファイルには A B C A D のように一行ずつ語句が保存してあります。 よろしくお願いします。
Ruby on Rails を勉強しているんですが、細かいところで @member = Member.find(1)　という風に作成したモデルオブジェクトについてですが、 @memberとういう変数から、Memberモデルの主キー名を取得することができるでしょうか。 ※または、@memberから、Memberクラスが取得できるか。 @member.reflectionsなど、いろいろためしましたができませんでした。 お分かりの方がいらっしゃいましたら、是非お教え願えないでしょうか。
rubyでアカウントがない場合に新しくアカウントを作るプログラムを、ハッシュを使って作成しようと思っています。表示としては登録ができたら「アカウントを作成しました。」と、アカウントがすでにある場合には「アカウントはすでにあります。別なアカウント名を使ってください。」と表示させたいと思っています。ハッシュに登録まではできるのですが、そこからどう作成したらいいのかわからないので教えてほしいです！初心者で申し訳ないですがよろしくお願いします。 $KCODE = "e" hash_account = {} fo = open("accountData.txt", "r") i = 0 while(line = fo.gets) ary = line.split hash_account[ary[0]] = ary[1] i = i + 1 end fo.close ちなみに、accountData.txtにはアカウント名,パスワードの順に登録があります。 rubyのバージョンはruby 1.8.7 (2010-01-10 patchlevel 249) [i386-mswin32]です。
rubyでアカウントとパスワードを検証するプログラムを、ハッシュを使って作成しようと思っています。 そこで、if文を使って条件をわけようとしているのですが、うまくいきません。　自分なりに書いてはみたのですが間違っているようで、どこをどう直したらよいか教えていただきたいです！ $KCODE = "e" hash_account = {} fo = open("accountData.txt", "r") i = 0 while(line = fo.gets) ary = line.split hash_account[ary[0]] = ary[1] i = i + 1 end fo.close print "*** ログインしてください。自分のアカウント名とパスワードを入力してください。 ***\n" print "アカウント:" account = gets.chop print "パスワード:" password = gets.chop if (hash_account[account] == password) print "ようこそ、", account,"さん。それではゲームを始めましょう。\n" elsif print "パスワードが間違っているようです。\n" else print account,"というアカウントはありません。\n" end ちなみに、accountData.txtには、アカウント名、パスワードの順に入っています。
先日よりRubyでのプログラミングを始めてみたのですが DateクラスのDate::MOTHNAMESを参照しようとしたところ undefined method `MOTHNAMES' for Date:Class (NoMethodError) と返ってきてしまいました。 ほかにもDate::exist?メソッドもためしてみましたが、同じ様なコメントが 返ってきました。 undefined method `exist?' for Date:Class (NoMethodError) なお、 Date.newなどはつかえています どういった問題でどのように解決すれば良いのか、ご教示願えればと思います。 バージョンは　ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.2.0] で、Mac OSX Lionで動かしています。
http://www.sanabo.com/words/ 上記サイトから言葉を拾ってきて、つぶやかせるという自動botを考えてます。 流れとしては、サイト上からスクレイピングしデータを切り取り(nokogiri)、それをハッシュ？の中に格納して、その値の中からランダムにつぶやかせる。という感じかなと思ってます。 ※TwitterのAPIはなんとか大丈夫です。 ですが、2点疑問があります。 01) サイト見てみると、「あ」…「お」など言葉がディレクトリごとに分かれており、どうやってアクセスして切り取ってくるのか不明？正規表現とか使うのでしょうか？ 02) どういうふうにハッシュの中に値を入れるのか？ ご教授いただけますでしょうか？ よろしくお願いいたします。
　accountData.txtというファイルを読み込み、空のハッシュに登録し、そこから関数を使わずにアカウント管理のプログラムを作りたいと思っています。　アカウントとパスワードが一致すれば成功しましたと、アカウントがない場合はアカウントがありませんと、アカウントがあっていて、パスワードが合わない場合はパスワードが間違っていますと作りたいと思っていますが、どうやればいいのか教えてください！ 　accountData.txtというのは名前、パスワードの順番で入っています。　初心者で申し訳ないですが詳しく教えていただけると嬉しいです。　よろしく、お願いします。
プログラミングの知識はほぼ皆無なのですが、仕事でRUBYを使わなければならなくなり、オープンソースを弄っているところです。 rbファイルの記述に require '○○' とあるのですが、判らなかったので無視して実行してみたところ、 C:/Ruby193/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot loa d such file -- ○○ (LoadError) from C:/Ruby193/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require ' from makeindex.rb:2:in `<main>' というエラーが出ました。 ○○ファイルを色々なディレクトリに置いてみたのですが、どれも同じエラーでした。 一般的に、○○ファイルは何処に置くべきなのでしょうか。 尚、環境は以下の通りです。 WindowsXP RUBY　1.9.3 「require '○○'」の記述があるrbファイルの場所　c:\a rbファイルはカレントディレクトリをaにしてから実行 プログラマーの方からすれば意味不明な質問かも知れませんが、ネットで調べてみてもさっぱり判らなかったので質問させて頂きました。 宜しくお願いします。
組み込みライブラリのFileクラスを使用してリネームをしようとしているのですが、パスを直接記述した場合はリネーム処理がおこなわれますが、変数で渡した場合は　Invaｌid argument　とエラーが出ます。 変数で渡した場合でも出来るようにするには何か別の処理が必要なのでしょうか。 宜しくお願いします。 ○のパターン File::rename("C:\test\01sample01.txt","C:\test\sample01.txt") ×のパターン sample1 = "C:\test\01sample01.txt" sample2 = "C:\test\sample01.txt" File::rename(sample1,sample2)
現在Rails3でWEBアプリの開発をしているのですが 実現方法が不明な事が有るので質問させて頂きました。 実行環境は 　　OS:Windows7 　　Railsバージョン：3.0.9 　　APサーバー：WEBrick です。 実現方法が不明なのは、一つのフォームに複数のサブミットボタンを配置し コントローラーでどのボタンが押されたのか判定する方法です。 ビューにおいてフォーム内に 　<%= submit_tag 'OK', {:disable_with => "Sending…"} %> 　<%= submit_tag 'CANCEL', {:disable_with => "Sending…"} %> と言う様にサブミットボタンを配置し コントローラーでどちらのボタンが押されたのかを判定する方法なのですが 検索して調べてみると 　if 'OK' == params[:commit] then 　　OKボタンが押された際の処理 　else 　　CANCELボタンが押された際の処理 　end と言う風に出来ると言う情報を見つけたのですが、実際にやってみると 上記の様な値はparamsから取得出来ないので、正しく動作しません。 paramsで取得した値の中身を見ても、それらしい値も無く 何を判断すればどのボタンが押されたのかを判断出来るのかが判らず 非常に困っております。 サブミットボタンにjavascriptのコードを埋め込み 送信前にHIDDEN項目にクリックされたボタンを表す値を埋め込むと言った方法で 回避する事も可能かとは思いますが、標準的なやり方とも思えず また、良く行われる処理だと思いますので、他に方法が有る様に思えます。 どなたかご存知の方が居れば御回答お願いします。
Rubyで質問があります。 AAAA；BBBB、CCCCC=DDDDD　という文字列が存在したときに、 AAAAとBBBBとCCCCCとDDDDDの文字列を取得したいです。 splitは、特定の区切り文字しか対応していないようなので、複数の区切り文字を指定出来る方法はありませんでしょうか？ 確かにsplitで地道に処理するより もうちょっと効率的な方法はないか知りたいです。
rubyのプログラミングでアカウントに関するプログラムでアカウントがある場合は成功しました、パスワード違う場合はもう一度入力してください、アカウントがない場合はアカウントがありませんと表示をさせようと思っています。ちなみに、アカウントデータはテキストファイルの中に、名前、パスワードの順番に入っています。　そこで何ですが、def ｖerifyAccount(account, password)という関数の中身をどう定義したら良いのでしょうか？　あと、result = verifyAccount(account, password)以降に何を書いたら良いか教えてもらえたら嬉しいです。　聞きたいことが多くて申し訳ないですが是非ともよろしくお願いします！ def ｖerifyAccount(account, password) end print "*** ログインしてください。自分のアカウント名とパスワードを入力してください。 ***\n" print "アカウント:" account = gets.chop print "パスワード:" password = gets.chop result = verifyAccount(account, password) ...
現在JavaからRubyに移行しようと勉強をしているのですが、Rubyのソースコードを読んでいくと、変数に何が入っているかわからなくて困っています。 ソースコードを例に説明させていただくと、 gs = TCPServer.open(12345) addr = gs.addr こんなソースがあったとして、2行目のgs.addrというメソッドが何をするメソッドなのか知りたいとします。 しかしRubyでは型宣言をしないので、gsが何のクラスなのかわかりません。 そこでTCPServerクラスのリファレンス（http://www.ruby-lang.org/ja/old-man/html/TCPServ …）を見るのですが、このサイトのクラスメソッド欄にかいてあるTCPServer.openを呼んでも、戻り値の型が書いていません。 このような場合どうやって、gs.addrメソッドの挙動をしればよいのでしょうか？なお現在は動的にデバックするという方法は無しで考えています。 ご回答よろしくおねがいします。
rubyでmarkabyの使用するとhtmソースが普通のエディタでみれません どうしたら表示できるかをよろしくお願いいたします。 =====make_htm.rb/================================================ require 'rubygems' require 'markaby' html = Markaby::Builder.new do head { title 'マイホームページ'} body do h1 "ようこそ" b "項目" ul do li "ライン１" li "ライン２" li "ライン３" end end end puts html =====make_htm.rb/end================================================ を実行すると <head> <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/> <title>& #12510;& #12452;& #12507;& #12540;& #12512;& #12506;& #12540;& #12472;</title> </head> <body> <h1>& #12424;& #12358;& #12371;& #12381;</h1> <b>& #38917;& #30446;</b> <ul> <li>& #12521;& #12452;& #12531;& #65297;</li> <li>& #12521;& #12452;& #12531;& #65298;</li> <li>& #12521;& #12452;& #12531;& #65299;</li> </ul> </body> と出力されます（改行はあとで付加しました&と#の間にわざとスペースいれてます） これをブラウザでみればちゃんとみえるのですが htmのソースの状態で <head> <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/> <title>マイホームページ</title> </head> <body> <h1>ようこそ</h1> <b>項目</b> <ul> <li>ライン１</li> <li>ライン２</li> <li>ライン３</li> </ul> </body> と出力するにはどうしたらいいでしょうか str = html.to_s puts Iconv.conv('Shift_JIS','UTF-8',str) とやってみても変わりませんでした。 よろしくご教授おねがいいたします。
回答を頂いてやってみたんですが、プログラムを実行して表示された結果は追加出来ているんですが、テキストファイルを開くと追加されていませんでした。 実行したプログラムがテキストファイルにも反映するにはどうしたら良いのでしょうか？？ よろしく、お願いします。
どなたが知識をご教授下さい。 Rails3でAjaxのごく普通のハイパーリンクを作成したいのですが、うまくいきません。 /users/index.html.erb <div id="hoge"> <%= link_to "ajax",{:action => 'draw'},:remote => true %> </div> -- /users/_draw.html.erb ~いろいろ内容~ -- /users/draw.js.erb $('#hoge').html("<%= escape_javascript(render :partial => 'draw' )%>"); -- /users_controller.rb def draw ~いろいろ処理~ end -- ルーティング match 'users/draw' => 'users#draw' -- application.html.erb <%= javascript_include_tag :defaults %> -- gemfile gem 'jquery-rails' 以上のように処理するよう様々なサイトや書籍にはありましたが、「Templete Missing」のエラーが出てしまいます。かれこれ５時間以上ハマってまして、、、 どなたか知識をご教授頂けたら幸いです。 ＊メモ アクションdrawに渡ったときに、 「request.xhr?がfalse」ということは、ajax通信できていないということでしょうか？？？
AddressFileクラスに記録されているハッシュの内容に、新たに名前とメールアドレスを追加するメソッドaddをAddressFileクラスのメソッドとして定義したいんですが、def add以降の作り方がわかりません。　どのように作成したらいいか、教えてください！　お願いします。 ○が名前で、△が住所になります。 class AddressFile def initialize(file) @original = file @meibo = {} fo = open("address_list.txt", "r") lines = fo.readlines fo.close for aLine in lines data = aLine.split @meibo[data[0]] = data[1] end end attr_accessor :meibo def search(name) @meibo[name] end def add(name,address) end end obj = AddressFile.new("address_list.txt") obj.add("○○○○", "△△△△") obj.search("○○○○") obj.search("○○○○") obj.search("○○○○") 初心者で申し訳ないですが、お願いします。
class Test def initialize @ary = Array.new(size){false} end def print _print end def _print print"#{@ary}" end end test = Test.new(5) test.print 上記のプログラムはエラーが出て実行できません。期待している動作は[false,false,false,false,false]です。どうしてエラーが出るか教えていただきたいです。また、解決策もよろしくお願いします。
rubyについてのプログラムで、テキストファイルの中に人の名前と住所が書かれていて、その人の住所が登録されていると、その人の住所が表示され、なければnilを返すプログラムを作りたいと思っていて、 def (search)から後をどう書いたらいいのかわからないので、是非教えていただきたいのでお願いします！ class AddressFile def Initialize(file) @original = file @meibo = {} fo = open(file,"r") lines = fo.readlines fo.close for aLine in lines data = aLine.split @meibo[data[0]] =data[1] end end attr_accessor :meibo end def search(name) end end obj = AddressFile.new("address_list.txt") obj.search(○○○○) テキストファイルの中身は、名前、住所の順番で入っています。このプログラムでおかしいとこがあれば、それも教えていただきたいです！ よろしく、お願いします！
Ruby初心者(オブジェクト指向はわかります)なのですが、メソッドについてわからないことがあって質問させていただきました。 Net::SMTP.start('smtp.example.com', 25) {|smtp| smtp.send_message(<<-EndOfMail, 'from@example.com', 'to@example.net') From: Your Name <from@example.com> To: Dest Address <to@example.net> Subject: test mail Date: Sat, 23 Jun 2001 16:26:43 +0900 Message-Id: <unique.message.id.string@yourhost.example.com> This is a test mail. EndOfMail } このプログラムの意味を理解しようとしているのですが、どうもわかりません。 私の現在の認識を説明させていただくと、 １）NetクラスのインナークラスであるSMTPクラスのstartメソッドを呼び出している。 ２）('smtp.example.com', 25）これはstartメソッドの引数である。 ３）|smtp|よくわからない。このstartメソッドの戻り値？startメソッドの中なのに？ ４）From: Your Name <from@example.com>　ここもよくわからない。なぜ急に変数にも代入しない　文字列を書いたのか？ 以上が私の現在の認識と疑問点です。 疑問点はもちろん、認識している点も誤って認識している点があればご指摘いただけると幸いです。
verは1.8.7です。 ifで文字列が指定した正規表現と『マッチしない』場合を判定したいんですがそのまま書くと unless @value =~ /^[0-9]{4}/ みたいになります。 unlessだと先に条件式を見てからひっくり返さないといけないので『マッチしない』を判別する演算子があればいいのですが、マニュアルのStringとRegexpのページを見ても分かりませんでした。 もしあったら教えてください。あとマニュアルにある場合はどこに書いてあるか教えてもらえると嬉しいです。
【&:】の後ろにメソッド名を書いたものを見たことがあるんですがこれは何で、どういう動きをするんでしょう？ mapやeachの後ろでよく見る気がします。
ＲＤＥを使っています。 input_value = gets puts input_value p input_value　　　　を書くと、上に書いたprint文などより先に左下のコンソールに 先に入力するようになります。 コマンドで実行するとうまくいくのですが。 何か設定が間違っているのでしょうか？ 教えていただければたすかります。
timesメソッドはどんなときにつかうものですか？ 今のところ必要と思われる場面がありません。 具体的にはどんなときメリットがありますか？
先ほど、windows　XPにRailsをインストールしました。 とりあえずは、RubyのサーバーのWebrickで動かすことには成功しました。 が現在winXPにApacheをいれてローカルでRubyが動く環境をつくっていて、 そのApache内でRailsでつくったアプリを動かし作業したいとおもっています。 とりあえずインストールしたRailsをつかって rails new Projectでつくったディレクトリをまんまhtdocsに移動させてみたんですが 案の定動きませんでした。 どのようなファイルを修正したらApahceのhtdocs内で動かせるようになるんでしょうか？ ちなみに、インストールしているRubyはCGIのみでmod-rubyなどは使っていません。 よろしくお願いします。
勉強していたらtoFormattedStringメソッドというものに出会ったのですが、 これの読み方を教えていただけないでしょうか？
ruby on railsにて開発を行っております。 web開発の経験はありますが、 rubyおよびrailsに関しては初心者です。 要件は以下の通りです。 Ａ画面内でrenderにて部分テンプレートの構成となっております。 テンプレート内部にプルダウンを設け、プルダウンの連動により 読み込むテンプレートを切り替えていきたいと考えております。 現在collection_selectを用いてプルダウンを生成し、 onchangeにてremote_functionを呼び出すことで本機能を実装させようと考えておりますが、 テンプレートの切り替えがうまくいきません。 実装方法及び参考となるような情報をご教授いただければと思います。 よろしくお願いします。 環境 rails 3.0.7 ruby 1.9.2
rubyでハッシュのソート方法についてはいくつか情報のサイトを見つけられました。 ですが今やりたいのは、ハッシュのハッシュのソートなのですが、うまいやり方がわかりませんでした。 具体的には、 h1 = {"user1"=>{"a"=>10, "b"=>20, "c"=>30"}, "user2"=>{"d"=>5, "e"=>8}, "user3"=>{"f"=>10, "g"=>5, "h"=>10} } というようなハッシュのハッシュを想定しています。ユーザごとに案件ごとの必要工数（時間）をハッシュとして持たせ、全工数が多いユーザ順にソートしたいのです。 上記の場合だと、 {"user1"=>{"a"=>10, "b"=>20, "c"=>30"}, "user3"=>{"f"=>10, "g"=>5, "h"=>10}, "user2"=>{"d"=>5, "e"=>8} } というようにソートしたいのですが、何かやり方がありましたらご教授いただけますでしょうか。
お世話になります。 現在、以下の環境でWebアプリケーションを開発しています。 CentOS5.4 Apache2.2.3 Tomcat7 JavaSE6 ApacheとTomcatの連携にmod_proxy_ajpモジュールを使用しています。 ただ、クライアントからアクセスするURLと連携先のURLが異なるため、Java側でHttpRequestからコンテキストパス以降を取得するとajp連携されたパスしか取得できず、クライアントがアクセスしたURI情報が取得できません。 これを対策するために、Apacheモジュールのmod_rewriteとmod_headersを利用して、 クライアントがアクセスしたURIをリクエストヘッダに埋め込もうとしています。 以下httpd.confに追加した設定です。 (rewrite.confも試しました) RewriteEngine On RewriteRule .* - [E=ORG_QUERY_STRING:%{QUERY_STRING}] RequestHeader append "test_query_string" %{ORG_QUERY_STRING}e 設定後、Apacheを再起動してWebアプリケーションにアクセスすると、リクエストヘッダ自体は追加されているのですが値が(null)となってしまい取得できません。 mod_rewriteの環境変数が取得できていないのかと思い、 RewriteRule .* - [E=ORG_QUERY_STRING:TEST] と固定文字列を埋め込んでも取得できませんでした。 このことからENVによる環境変数への設定、または参照が出来ていないのかと思われますが、どうにも解決できません。 参照時に RequestHeader append "test_query_string" %{ENV:ORG_QUERY_STRING}e としても同様の結果でした。 心当たりのある方、またはデバッグ方法や別解などアドバイスを頂けないでしょうか？ なお、httpd.confではmod_rewrite、mod_headersのモジュール定義は有効となっております。 また、環境変数のスペルミスもコピペして確認しております。
質問させて下さい。 （システムに詳しくないので意味不明な部分があればお許し下さい） Ruby,rails,passenger、DBはMySQLなどで構築したシステムを、 別のサーバに移転させたいと思っています。 しかし、移転先のサーバは railsのコマンドが実行できない（root権限がない）サーバのため、困っています。 どうしてもそのサーバで対応させる必要があるため、 なんらかのカスタマイズをしてでも導入したいのですが、 一度、railsコマンドを実行してファイル環境を作り終わっているシステムならば FTP経由で取り出して新しいサーバ用にMySQLなりパスなりの設定箇所を 修正したりすれば動かすなんてことは可能でしょうか。 システムに詳しくないので意味不明な部分もあるかと思いますが、 ご教授頂ければ幸いです。
上記書籍のP143の カレントクラスについて質問です。 上記書籍に、 【クラス定義のなかでは、カレントオブジェクトselfは定義されたクラスである】 という記述がありますが 例えば、以下のようなクラス定義あがあるとします。 class Test print self.class def self.method_01() print "メソッド01" end def method_02() return self end end クラス定義内に3箇所selfが存在しますが、 インスタンスメソッド　の　method_02()内のselfはnewメソッドによって 作成されたTestクラスのインスタンスの意味だと思います。 それより上の二つのselfは確かに定義中のカレントオブジェクト・・つまりTestクラス ですけれど、なぜ書籍では、クラス定義内でのselfという表現なのでしょうか？ 個人的には、【クラス定義内で定義されるインスタンスメソッド内にあるselfを除くselfはカレントオブジェクトである】という風に、説明すべきだと思うのですが 何か私の解釈に誤りがあるのでしょうか？それとも、文面を気にしすぎなだけでしょうか？ くだらない質問ですがご意見をおきかせください。
Rubyの以下コードについて質問です。 #!/ruby/bin/ruby print "content-type: text/html\r\n\r\n"; puts "Hello World!" begin def foo x =0 (0...10).each do |value| print value.to_s +"の時"+ x.to_s + "<br />" end end foo rescue =>e print e.class.to_s+ "<br />" print e.message end 上記コードを実行すると以下のような例外を取得します NoMethodError undefined method `+@' for "\343\201\256\346\231\202":String どうやら上記コードの print value.to_s +"の時"　の部分の　　+"の時"　という箇所が問題のようなのですが 上記箇所を　+ "の時"　のように 文字列連結子の　+と "の間に半角スペースを 入れるとうまく実行されます。 いったい原因はなんなのでしょうか？ 細かい箇所ですが是非、ご教授ください。
今晩わ。 RubyでNet::HTTPをもちいてPOST送信する際の処理について 質問です。 Net::HTTPクラスのインスタンスメソッドのpostメソッドを用いて送信する場合 送信内容を # version 1.2 (Ruby 1.8.x or later) response = http.post('/cgi-bin/search.rb', 'query=subject&target=ruby') 上記のように、引数に渡していると思います。 このとき、値の中にパラメータのデリミタと同じ&を入れたい場合どうしたらいいのでしょうか？ 例えば query=subject&target=ruby&PHP のような感じでvalueとして&を渡す場合です。 Net**HTTP::Postクラスのrequestメソッドを用いてハッシュとして渡した時は問題なかったのですが、上記のpostメソッドの時がPOSTされた値を取得するときにキチンと取得できませんでした。これはなにか対処方法があるのでしょうか？ ご教授ください。 おねがいします。
hairetu = [1,2,3,4,5] という配列があった時 ３と４が含まれているかを判断するには if hairetu.include?(3) && hairetu.include?(4) 　p "３と４が含まれている" end と書けばよいのですが 条件が増えたら、見にくくなってしまいます。 そういった理由で if hairetu.include?(3,4) や if hairetu.include?(3 or 4) という具合に、短く書く方法があれば ご教授お願い致します。
初めまして。宜しくお願いします。 プログラマーの皆様や現役の専門学校生（プログラミング言語専攻）の方にお尋ねします。 私は今年の5ヶ月間、職業訓練校でRubyの基礎を学びました（講座終了済み）。プログラミング言語はまったくの素人です。 ところが、毎日の授業は先生の講座速度が非常に速いうえに講義内容そのものが私にとってたいへん難解でした。このため、1日の授業の半分すら理解できるか否かという状態でした。たとえばクラスやインスタンス変数の授業は全く理解できませんでした。このキーポイントが判らないため、結局、Rubyが理解できないまま講座修了しました。 学校の授業が理解できないので自宅で復習しても理解度がさっぱり上がりませんでした。先生に質問して教えてもらっても、理解度は半分ぐらいでした。入校当時は「頑張るぞ」と張り切っていたのですが、授業が判らぬことからすっかり自信を失ってしまいました。 そこで質問ですが、二年制三年制の専門学校に入校して十分な講義時間を費やしてもう一度Rubyを勉強し直そうか、と迷っています。迷う理由は、高額な学費をかけても、自分に能力があるのだろうか、という不安があるからです。 ご助言をいただければ幸いです。宜しくお願い申し上げます。
rails3.1でアプリケーションコントローラーで宣言したインスタンス変数をビューで使いたいのですがnilが帰ってきます。参照する方法はあるでしょうか 以下のようになっています ●applicationコントローラー def example @test = "hoge" end ●アクションメソッド after_fileter :example def index ～～～ end ●ビュー <%= @test %> これでビューから@testがnilを返してしまいます よろしくお願いします。
こんにちは。 http://www.aptana.com/products/studio3/downloadの画面の下の方にある [DOWNLOAD APTANA STUDIO 3]という青い画面を選択すればAptanaStudioがダウンロードできるはずなのですが、選択すると 「Your Download is Starting」で始まる新しいページが出てくるのですがすぐに消えてしまい、先程のURLに戻ってしまいます。 AptanaStudioをダウンロードするのに前準備が足りないのでしょうか。 ruby 1.9.2p290 ruby gems 1.8.9 ruby on rails 3.1.0 のインストールは既に完了しています。 また、私のパソコンはwindows vistaなのですが、先程のＵＲＬではダウンロード対象ＯＳがMAC OSしか表示されていないのも一つ気になる点です。 いろいろ調べてみたのですが、私のようなエラーでダウンロードができない場合の対処についてどうしても分かりませんでした。回答よろしくお願いします。
class A def sample p"サンプル" end end $a = A.new $a.sample $b = A.new $b.sample $c = A.new $c.sample この時、$aをnilにする時 $a = nil　とすれば良いのですが $a、$b、$c・・・のように複数あって どれだけあるか分からない条件下で A.newで作られた物全てをnilにしたいのですが やり方が分かりません。 もし、良い方法があれば、ご教授お願い致します。
こんにちは。現在Rubyの学習中です。Rubyに限らずプログラムに関しての質問なのですが、ファイルを保存する場所によって処理速度は変わるのでしょうか。 ＣドライブにＯＳが入っていると知りました。Rubyのプログラムを動かすには、Ruby本体とプログラムファイルが必要ですが、これら二つはやはりＤドライブよりもＣドライブに保存した方が処理速度は速いのでしょうか。よろしくお願いします。
こんにちは。 現在大学生４年生で新しいプログラミング言語の習得を目指しております。その理由といたしましては諸事情により大学院では今とは違う研究分野の研究室に配属が決まったからです。 その分野とは、ウェブ工学やデータベース関係を扱う研究室です。大学院の指導教授とお話したところ「CとC++は必須、あとはRubyかPerlのどちらかを習得しておくこと、Javaは必須ではない」と言われました。 早速、スキルアップのため言語の勉強をしようと思っているのですが、言語を習得するためにはなにか目標を持ちながら参考書を読むのがいいといろいろなサイトなどで書いてありました。 これから言語を勉強していくので自分にあった具体的な課題がまだ分かりません。そこでなのですが、こういったものを作っていけばいいのではないかという具体的な課題を教えていただけないでしょうか。できれば、初歩的なものから段階的に難しいものを教えていただけるとうれしいです。 よろしくお願いいたします。
いつも、ご教授ありがとうございます。 Ruby　でメソッドを自作してそのメソッドにブロックを持たせる場合 ブロック内で返り値を返すためにはどうしたらいいのでしょうか？ たとえば以下のような自作メソッドがあるとすると def blocktest(str) if (block_given?) yield str else print "メソッドにブロックが与えられていない"; end end begin #自作したメソッドにブロックを与えた場合 res = blocktest("ブロック付きメソッドのテスト") {|value| print value; print "<br/>" print "メソッドに与えられた引数をprintしています" return "ブロックで返り値" } print res; print "<hr />" #ブロックを与えない場合 blocktest("ブロック付きメソッドのテスト"); rescue => ex print ex.message end 上記のようにブロック内で返り値　を指定して変数resのその返り値を返したい場合 どうしたらいいのでしょうか？ 一応、ブロック内でreturnで値を与えてはいますが、例外が発生します。 よろしくお願いしまう。
初歩的な質問で申し訳ありません ary = [Foo.new] ary.each do |i| 　if (条件） 　　ary.push(Foo.new) 　end end 上の様にブロックの中である条件でaryに要素が追加されます。 この場合、この追加された要素はeachで漏れなく扱えるのでしょうか？ 簡単なプログラムで試した限りではpushされたFooインスタンスについてもeachで取り出せているようなのですが、自信が無いので質問致します。 # coding: windows-31J class Foo attr_accessor :checked attr_reader :val RAND_MAX = 5 def initialize rnd = Random.new @checked = false @val = rnd.rand(RAND_MAX).to_i end end ary = [Foo.new] ary.each do |f| if f.val > 0 ary.push(Foo.new) end f.checked = true end cnt_true = 0 cnt_false = 0 ary.each_index do |idx| print "#{idx} #{ary[idx].checked} #{ary[idx].val}\n" if ary[idx].checked cnt_true += 1 else cnt_false += 1 end end puts "checked true = #{cnt_true}" puts "checked false = #{cnt_false}" よろしくお願いします。
Rubyで#!/ruby/bin/ruby require 'net/http' require 'uri' print "content-type: text/html\r\n\r\n"; begin url = "http://～～～.com/" Net::HTTP.get_print URI.parse(url) rescue => ex print ex.class; print "<hr />"; print ex.message; print "<hr />"; print ex.backtrace; end というようなコードで指定のURLの内容をgetしたいと思っています。 が、とりあえずは上記内容でURL先の内容は取得できるのですが url = "http://www.~~~.com"; という風にwwwをつけるとスクリプトがうごかずURL先の内容が取得できないのです。 原因はなんなのでしょうか？ 識者のかたご教授ください。
15(tab)5634(改行) 24(tab)4446(改行) 24(tab)8357(改行) 24(tab)3287(改行) 56(tab)5465(改行) 56(tab)1324(改行) 56(tab)7544(改行) 上記のように１行にtabで区切られた２つの数値が並んでいるテキストファイルがあります。 このファイルを、Rubyを使って１列目が同じ数字の行ごとにソートしたいのですが、できなくて困っています。 上の例でしたら、１列目が24の3行を2列目の数値をキーとしてソート、１列目が56の３行を2列目の数値をキーとしてソートするということです。 一行ずつ読み込んで、array =　line.split(/\t/)でタブでくぎって配列に格納するスクリプトを書いていたのですが、どうしてもできないので、力を貸していただけないでしょうか。 よろしくお願いします。
RubyでexeファイルをつくるExerbというライブラリをインストールしたいです。 でとりあえずやってみたところどうやらうまいぐあいにインストールできていないようです。 現象としては、普通にExerbの最新版5.30を落として適当なディレクトリに配置 コマンドプロンプトからruby setup.rbでExerb内のsetup.rbファイルを実行するとコマンドライン上でインストールが進みます完了後コマンドプロンプトでexerbを実行しても 内部コマンド～～とお決まりの文章がひょうじされて実行できません。 ruby.exeはパスが通ってるのでPC内のC:/ruby/binの中をみたところexerbファイル（※中身はRubyコード）は存在しますがどうやらexerb.exeファイルが生成？されてないようです。 一応http://sourceforge.jp/projects/exerb/releases/50 …にあるようにRubyコアの バージョンをあわせて実行したのですがどうしても、うまくいきません。 原因はなんなのでしょうか？ 識者の方、ご教授お願いします。 ActiveRubyとかいう実装の方をインスコすればデフォルトで実行できるようなのですが もともとインストールしていたRubyがrubyinstaller-1.8.7-p330ですので、なんとか このRubyで実行させたいのです。 よろしくお願いします。
エンジニアではないため、簡単にポイントを教えていただけるとありがたいです。 少し前に流行っていたと聞いたことがあります。 また、Ｒｕｂｙに次ぐ注目の言語などがあれば合わせておしらせいただけますと幸いです。 宜しくお願いします。
RubyでWEBAPIをたたこうとおもい リファレンスから require 'net/http' Net::HTTP.version_1_2 # おまじない Net::HTTP.start('www.example.com', 80) {|http| response = http.get('/index.html') puts response.body } という記述を利用してヤフーのページを取得しようと 動かしたところまったく動作しなかったのでだめもとで例外をとってみたら begin Net::HTTP.version_1_2() # おまじない Net::HTTP.start("http://yahoo.co.jp", 80) {|http| response = http.get("/index.html"); puts response.body } rescue => ex print ex.class; print "<hr />"; print ex.message; print "<hr />"; print ex.backtrace; end SocketErrorgetaddrinfo: 記憶域制御ブロックが壊れています。 C:/ruby/lib/ruby/1.8/Net/HTTP.rb:560:in `initialize'C:/ruby/lib/ruby/1.8/Net/HTTP.rb:560:in `open'C:/ruby/lib/ruby/1.8/Net/HTTP.rb:560:in `connect'C:/ruby/lib/ruby/1.8/timeout.rb:53:in `timeout'C:/ruby/lib/ruby/1.8/timeout.rb:101:in `timeout'C:/ruby/lib/ruby/1.8/Net/HTTP.rb:560:in `connect'C:/ruby/lib/ruby/1.8/Net/HTTP.rb:553:in `do_start'C:/ruby/lib/ruby/1.8/Net/HTTP.rb:542:in `start'C:/ruby/lib/ruby/1.8/Net/HTTP.rb:440:in `start'C:/Apache/htdocs/tokui12.rb:11 上記のような例外が取れました。 これは、Rubyの際インストールが必要なのでしょうか？ リファレンスまんまを利用しているので記述間違いとかはないと思うのですが・・・ システム的な問題？と思いPHPでたたいたところ PHPであれば普通にAPIはたたけました。 対処策はどうしたらいいのでしょうか？
Rubyで、クラス定義の際の質問です。 通常 cattle= Class.new(); で引数がデフォルトの場合は、Objectクラスのサブクラス生成すると 公式のリファレンスに記述があります。 調べてみると上記コードの場合は,cattleという無名クラスと呼ばれるものになるそうです。 この無名クラスとはYUGUIさんのサイトにある http://yugui.jp/images/uploaded/20084013-metacla … 右端の列にあるメタクラスと呼ばれるものになるのでしょうか？ (無名クラス　と　メタクラスは同義？？） また上記URLの画像からメタクラスはClassクラスのインスタンスであるようです。 ただClass.newで実行される　newというクラスメソッドってサブクラスを生成すると いうふうにリファレンスにありますがレシーバであるClassクラスのインスタンスを 返すという記述はありません。 ただ、おそらくメタクラスというのはClassクラスのインスタンスなのだとは思いますが、 この理由はなぜなのでしょうか？ もう一点、ｐ　Cattle.class()；と記述すると Classクラスが返ると思います。これはCattleクラスのClassクラスのインスタンスである ということになるのでしょうか？ しかしながらYUGUIさんの画像ではCattleはメタクラスのインスタンスとなっています。 であれば、メタクラスを意味するのでしょうか？ 公式リファレンスには、上記に書いたような関係はRubyを扱う際には特に問題ではないとありますが、気になっています。
rails2、mySQLです。 モデルにバリデーションを書くのは知っているのですが 特定のコントローラのメソッドでのみバリデーションしたいとき どうすればよいのでしょう。 Userモデルに書いた場合 class User < ActiveRecord::Base 　validates_format_of :email_address, :with => /[a-zA-Z0-9_-]+\@[a-zA-Z0-9_-]+\.\w+/, :allow_blank => true, :message => "有効なEメールアドレスではないようです。" 　validates_uniqueness_of :email_address, :allow_blank => true, :allow_nil => true, :message => "このアドレスは既に使用されています。" end class UserController < ApplicationController 　def email_conf 　　self.index 　　　u = User.find :first, :conditions=>["user_name = ?",@user_name ] 　　unless u 　　　u = User.new(:user_name => @user_name) 　　end 　　u["email_address"] = params[:email_address] 　　if u.valid? 　　　u.save 　　　render :text => '<div>thank you!</div>' 　　else 　　　render :text => "#{u.errors[:email_address]}" 　　end 　end end これだとほかのアクションの場合もバリデーションを行えばこのパターンのみになりますよね。 userコントローラの　email_conf　でデータ登録するときのみ、このバリデーションをしたいのですが。。
Rubyのインスタンス生成について質問があります。 通常クラスを定義する場合は class Hoge ; def hello(); pirnt "hello"; end であると思います。 ただ Hoge = Class.new(); でもクラスは定義できるとききました。 ただこの場合Hogeクラスに定義できるのは　HogeというClassクラスから作られた特異クラスとしてのHogeに 特異メソッドのみを定義できるということですよね？ 通常のインスタンスメソッドは定義できませんよね？ ではでは、　hoge　= Class.new(); とした場合はどうなるのでしょうか？ この場合は　Classクラスの純粋なインスタンスとなるのでしょうか？ 前者の定義とおなじ仕方ですが代入先が、通常の変数です。 この場合は、クラスオブジェクトとして生成されるのですか？ オンラインマニュアルをみたところ 「新しく名前の付いていない superclass のサブクラスを生成します。 superclass が省略された時にはObject のサブクラスを生成します。 名前のないクラスは、最初に名前を求める際に代入されている定数名を検索し、見つかった定数名をクラス名とします。」 とあります。 上記内容は　Classクラスの特異クラスとして定義されている特異メソッド(new)です。 これは Class.new()で作られたインスタンスを代入する先が定数であればその定数名と同じクラスを定義しつつそのClassクラスのクラスオブジェクトを生成するという意味合いでまちがいないでしょうか？ 上記のとおりであれば hoge　=Class.new()の場合は、やはりhogeというクラスを定義することになるのでしょうか？ クラス定義は定数でなければならないはずですよね。 ただ実際、 p hoge;として出力すると＃とひょうじされています。これはhogeがクラスオブジェクトではなく ただのインスタンスであるということでしょうか？ であるならばこの　hoge　= Class.new()の式のnewはClassクラスオブジェクトに定義された特異メソッドではなく Classクラスに定義されたnewメソッド・・・・・つまりClassクラスに定義されたインスタンスメソッドの方のnewメソッドだとおもうのですが・・・・・・。 つまりこちらのメソッドですね。 「new( ... ) クラスのインスタンスを生成して返します。このメソッドの引数はブロック引数も含め initialize に渡されます。」 ※オンラインリファレンスから参照しました。 しかし 通常メソッドの検索は特異メソッドからはじまりその後クラスのインスタンスメソッド->親クラスのメソッドと 検索して行くとあります。 必ず先に、特異メソッドを実行しているはずだと思うのですが・・・。 やはり特異メソッドnewを実行しているのでしょうか？ 長々すみませんが、ご教授ください。
ご教授よろしくお願いします。 ＜実装したい事＞ productテーブルからmakerテーブルのmaker_nameカラムも検索条件に含めたい。 （productテーブルの検索対象カラムは：codeとname ) （makerテーブルの検索対象カラムは：maker_name ) 以下のコードで試してみましたが、実装できません。 ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ views ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ <%=form_tag({:controller => :products,:action => :search}, :method => :get) do %> <%= text_field_tag "search_form",params[:search_form],:size =>25 %> <%= submit_tag '商品検索' %> <% end %> ======================================== products_controller.rb ======================================== def search @products =Product.find(:all, :include => :maker, :conditions =>['maker.maker_name like :value or code like :value or name like :value', {:value=> '%' +params[:search_form]+ '%'}]) end ======================================== リレーションシップ ======================================== product.rb belongs_to :maker **************************** maker.rb has_many :products **************************** どうぞよろしくお願い致します。
Rubyのクラスの継承関係について質問です。 RubyではすべてのクラスはObjectクラスが親クラスとなっていると思います。 そこで p File.class； と記述して実行すると FileクラスがClassクラスとして表示されます。 FileはFileクラスのはずなのになぜClassクラスなのでしょうか？ そして最上位のクラスであるObjectクラスも p Object.class; とすると Classクラスと出力されてしまいます。 なぜなのでしょうか？？？ p Class.class; と記述するとClassクラスと出力されました。 もうわけがわかりません。 どなたかご教授ください。お願いします。本気でド壷中です。
１．将来チャンスがあればプログラマーとして独立したいのですが、そのような場合、どの言語が良いのでしょうか？ javaは個人で出来るような仕事があまりないと聞きましたので、PHP、ruby、ｊavascriptなどがよいのでしょ うか？ また、独立の場合は一般の就職と違い、年齢の問題はないと考えてよろしいでしょうか？ 2. 動的言語が伸びる事を考えると、せっかく今から勉強するならrubyの方がPHPより良いのですかね ただ将来の独立を考えると、PHPの方が、個人の仕事は多いのでしょうか？ 難しい パイソンは素晴らしいようですが日本ではあまり参考書などがなくrubyより初心者には難しいと聞きました Javaでのスマホのアプリ開発も個人の依頼があったり、このような仕事を個人でやっている方もいるのですかね ただアイデアがいつも思いつかないと難しそうですね WEBプログラマーとして独立するのであれば、HTML、CSSも自分で打てないと難しいでしょうか？ ドリームウイーバーが使えれば大丈夫でしょうか？
検索結果で表示されたリストを、並べ替えができるようにしたいです。 現在はリンク先をクリックしても、実装できていません。 どこのコードがおかしいのかご教授いただければ幸いですm(_ _)m ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ views ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ <%= link_to "安い順", :action => 'low' %> <%= link_to "高い順", :action => 'high' %> <% @products.each do |product| %> 商品名<%= product.code %> 金額<%= product.price %> <% end %> ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ controller.rb ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ def check @product = Product.all 　 render :action => 'check' end def low @products = Product.find(:all, :order => "price ASC") render :action => 'check' end def high @products = Product.find(:all, :order => "price DESC") render :action => 'check' end ご教授よろしくお願い致します。
絞り込み条件で、メーカーやカテゴリを選択してから 金額指定があれば、金額指定も含めて検索結果を実装する事はできますか？ またボタンは1個にする形にしたいです。 よろしくお願い致しますm(_ _)m 絞込み検索内容 ＝＝＝＝＝＝＝＝＝＝ ・メーカー　（チェックボックス式） ・カテゴリ　（チェックボックス式） ・金額指定 ＝＝＝＝＝＝＝＝＝＝ ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ views: ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ <p>条件検索(複数選択可)</p> <%= form_tag ({:controller => :products, :action => :check }), {:method => :get} do %> <p>メーカーから探す</p> <% Maker.all.each do |maker|%> <%= check_box_tag "maker_id[]", maker.id, (params[:maker_id].include?(maker.id.to_s) if params[:maker_id]) %> <%= maker.maker_name %><br /> <% end %> <p>カテゴリから探す</p> <% Category.all.each do |c| %> <%= check_box_tag "category_id[]", c.id, (params[:category_id].include?(c.id.to_s) if params[:category_id]) %> <%= c.name %><br /> <% end %><br /> <%= submit_tag "検索"%>　＃このボタンを外してひとつのボタンにしたいです。 <% end %> <p>金額を指定して絞り込む</p> <%= form_tag ({:controller => :products, :action => :search_price }), {:method => :post} do %> 　<%= text_field_tag "price1",(params[:price1] if params[:price1]) %> ～　 　<%= text_field_tag "price2",(params[:price2] if params[:price2]) %> <%= submit_tag "検索"%> <% end %> ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ products_controller.rb ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ def check @product = Product.all if params[:maker_id] && params[:category_id]　　 # 両方選択された場合 @products = Product.where(:category_id => params[:category_id], :maker_id => params[:maker_id] ) elsif params[:maker_id] 　　#makerが選択された場合 @products = Product.where(:maker_id => params[:maker_id]) if params[:maker_id] elsif params[:category_id] 　 #カテゴリが選択された場合 @products = Product.where(:category_id => params[:category_id]) if params[:category_id] elsif params[:maker_id] == nil && params[:category_id] == nil 　 #両方ともチェックがなかった場合 @products = Product.all end render :action => 'check' end def search_price @products = Product.where('price >=? AND price <=?', params[:price1],params[:price2]) @products = Product.where('price >=?', params[:price1]) if params[:price2].blank? @products = Product.where('price <=?', params[:price2]) if params[:price1].blank? render :action => 'index' end ややこしくてすみません^^; どうぞよろしくお願い致します。
ご教授いただければ幸いです。 ==================================== carts/index　→　carts/deliveryへリンクしたい =================================== button_toを使うとちゃんと動きますが <%= button_to "購入する" , :controller => 'carts', :action => 'delivery' %> 画像に替えると上手く動きません。 <%= link_to (image_tag ("/images/cart_next.png"),:size=>"180x40")),'/delivery',{:method => :post}) %> link_toやbutton_toを使用して画像にリンクを貼る方法はございますでしょうか？ =================================== carts/controller.rb =================================== def index @cart = find_cart end# def find_cart session[:cart] ||= Cart.new end def delivery @cart = find_cart @addressee = Addressee.new() end
以前にも質問させていただき、systemでＲｕｂｙのプログラムからペイントを開くことができました。 もう一つ質問ですが、プログラムから開いたペイントを操作することは可能でしょうか？ 具体的には画像のサイズ変更をしたいです。 system("C:/Windows/System32/mspaint.exe","sam.jpg") このようにsam.jpgを開く段階まではできました。
何件か前の質問の中で階乗の計算例として以下が挙げられておりました。 def factorial(n) eval( [*(1..n)].join("*") ) end irb(main):001:0> eval([*(1..5)].join("*")) => 120 irb(main):002:0> [*(1..5)].join("*") => "1*2*3*4*5" irb(main):003:0> [*(1..5)] => [1, 2, 3, 4, 5] irb(main):004:0> *(1..5) SyntaxError: (irb):4: syntax error, unexpected '\n', expecting tCOLON2 or '[' or '.' from D:/Ruby192/bin/irb.bat:19:in `<main>' irb(main):005:0> (1..5) => 1..5 irb(main):006:0> (1..5).class => Range この中の*(1..5)という表記の意味がよくわからず、マニュアルから該当箇所を探すことができませんでした。 http://doc.ruby-lang.org/ja/1.9.2/doc/index.html この機能についてのご説明とマニュアルの何処に記載されているかをご教示いただけると幸いです。 よろしくお願いします。
こんにちは、Mac OS10.6.8 を使用しています。 Ruby on Rails を勉強したく、環境構築にとりかかっていますが、準備することが良く分からず参考書を探していますが、書店ではWindows版の参考書が多く Mac版で良いものがないかと探しています。 Web初心者、プログラミング初心者にとっても解りやすい参考書を教えていただけないでしょうか？ 開発環境の構築から教えてくれるようなものが欲しいです。 現状は、MacPortを使ってRubyをインストールしました。バージョンは1.8.7です。 railsは入っていたのですが、アップデートしました。　バージョンは3.0.9です。 Windows版の参考書だと、この後、Instant Railsをインストールして統合開発環境のRadRailsをインストールするように書かれていました。 Macだと何をどう用意して開発していくのか、まずそこでつまずいてしまっています。 Macでの開発環境の準備の仕方から書かれている初心者向けの参考書があればベストなのですが、どなたか分かる方いたら教えていただけないでしょうか？ お願いいたします。
rails3を勉強中です。 ご教授いただけば幸いです。 実装したい事： DBに登録してあるproductsの一覧から金額を指定して絞り込み検索をしたい 解決してない事： indexに検索結果が表示されません。 コードの書き方をご教授いただければ幸いです。 ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ views: ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ <%= form_tag ({:controller => :products, :action => :search_price }), {:method => :post} do %> 価格指定 <%= text_field_tag "price1" %> ～　 <%= text_field_tag "price2" %> <%= submit_tag "検索"%> <% end %> ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ products_controller.rb ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ def search_price @products = Product.all @product = Product.new @products.each do |product| item = product.price >= params[:price1].to_i && product.price <= params[:price2].to_i if item @product = product end end render :action => 'index' end ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ views/products/index.html ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ <% @products.each do |product| %> <%= product.name %> <%= product.price %> <% end %>
Ｒｕｂｙのプログラムからペイントを起動したいのですが・・・ どういった手法が考えられますか？
rubyでgnuplotを動かすプログラムを作ろうと考えております。 system ('C:/Users/owner/Desktop/gnuplot/binary/gnuplot.exe'） でgnuplotを起動することはできましたが、コマンドを実行するにはどうしたらよいでしょうか？ とりあえず　 plot sin(x) あたりをプロットしたいです。。。
rails3を勉強中です。 お詳しい方、ご教授いただけたら嬉しいです。 実装したい内容 プルボンタンで年齢「20」が選ばれた場合、 その結果を出力する（非モデル） ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ views:presons/index.html ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ <%= form_tag :action => :age do %> <%= select("form","age", (1..100))%> <%= submit_tag "表示する"%> <% end %> ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ presons_controller.rb ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ def index @preson = Preson.new end def age @preson = params[:form][:age] redirect_to :action => 'index' end ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝ views:presons/index.htmlで選択された 「20」を表示したいのですが、 そのコードの書き方をご教授ください。 どうぞよろしくお願い致します。
redirect_to先のviewで、redirect_to元のデータで何の処理を行ったか目視したいので 簡単に内容を表示させたいのですが リダイレクト元のコントローラの変数を、リダイレクト先のviewに渡すにはどうしたらいいのでしょうか。 --api_controller.rb class ApiController < ApplicationController 　def foo 　　arr = [1,2,3,4] 　　#arrをいろいろと処理 　　redirect_to :controller => "top", :action => "bar" 　end end --top_controller.rb class topController < ApplicationController 　def bar 　　#ここで@arr = arrしたい 　end end top/bar.html.erbもしくはbarコントローラでarrを受け取ることは可能ですか？
ruby 1.8.7 (2010-08-16 patchlevel 302) mysql2.11.10 を使っています。 delete_allで、条件を指定したいのですがうまくいかずハマっています。 arr_s　と丸括弧の間にシングルコーテーションが入ってしまってdeleteできない状態です。 （ハッシュで条件指定したSearchはきちんと削除されています。） 間違いがお分かりになる方、どうか教えてください。。。 ※arr で対象のidを取ってきて、それをすべてカンマ区切りで arr_s に入れて関連テーブルの削除キーとして使っていますが （has_manyを使いたくないので）ほかに素敵な処理の方法があれば参考に知りたいです。。 #search_attr_hash = {:search_data=>"あ", :search_type=>"0"} def clear_db(search_attr_hash) 　case search_attr_hash[:search_type].to_i 　　when 1..3 　　logger.info "1...3" 　　s = Data.find :all,:select => ["id"], 　　　　　　　　　　:conditions=>["from_user = ?",search_attr_hash[:search_word] ] 　　when 0 || 4 　　logger.info "0 or 4" 　　s = Data.find :all, :select => ["id"], 　　　　　　　　　　:conditions=>["text like ?", "%"+search_attr_hash[:search_word]+"%" ] 　end 　arr = [] 　s.each{|k| 　arr.push k["id"] if k != blank? 　} 　arr_s = arr.join(",") 　logger.info arr_s #=>3,4,5,6 　DataUrl.delete_all["data_id in (?)", arr_s ] 　#=>DELETE FROM `data_urls` WHERE (data_id in ('3,4,5,6')) 　DataTag.delete_all["data_id in (?)", arr_s ] 　#=>DELETE FROM `data_tags` WHERE (data_id in ('3,4,5,6')) 　DataRelation.delete_all["data_id in (?)", arr_s ] 　#=>DELETE FROM `data_relations` WHERE (data_id in ('3,4,5,6')) 　Search.delete_all["search_type = ? AND search_word = ?",search_attr_hash[:search_type], search_attr_hash[:search_word]] 　#=>DELETE FROM `searches` WHERE (search_type = '0' AND search_word = 'あ') 　Data.delete_all["id in (?)", arr_s ] 　#=>DELETE FROM `twits` WHERE (id in ('3,4,5,6')) 　return arr.count #=>4 end
for文を用いる s=1+2+5+10+17...+50 s=0;i=1;j=1 for i in 1..100 s+=1 i+=j if i>50 break end j+=2 end puts s この問題の意味がよくわかりません。。 よかったら説明してくれると助かります。。 j+=2 ここはなんで２なんしょうか？ 特にここのところはなんでこうなっているんですか？ iとかjとかを使っている意味がわかりません。。
Rubyで余りの計算をすると (-12977 % 60) + 1 =44 ちなみにVBAでは (-12977 mod 60) +1 =18 になるのはなぜでしょうか。 Rubyの方の演算のが正しいと思うのですが、 VBAはなぜ間違えた演算をしてしまうのか検証できる方はいらっしゃいませんか。
rubyの勉強を始めました。 ruby1.9.2をインストールし、サーバーはWindowsのxamppでapacheを入れました（自分のＰＣ内）。 練習でＷｅｂページを作り、<form>で<input type="text" name="text1">のようなものを作り、適当な文字をいれて送信ボタンを押して受け取りページでその文字を表示させました。 半角英数字の場合はうまくいきましたが、全角（日本語）をいれると途端に動かなくなります。 受け取り側のページに何も表示されません。 初心者でよくわからないことが多く困っています。 よろしくご指導のほどお願いいたします。
お世話になります。 現在、Cent OS 5.3にてRuby1.8/1.9をソースからコンパイルしcheckinstallにてRPM化しようとしていますが、途中の「それらをパッケージから除外しますか？」という質問後の「tempディレクトリにファイルをコピー..」 からまったく先に進みません。 最初、パッケージ除外しようと質問に対して[y]を指定しました。 サイト上の事例を元に、返答を[n]にしたりしましたが、状況は変わらずです。 中には、8時間以上放置してようやくcheckinstallが終わったというのもあり、実際に処理が動いているのか止まっているのか判断がつきません。 スムーズにcheckinstallを終わらせることは可能でしょうか？ よろしくお願いします。
はじめまして！今画像処理をしております。「dds」という拡張子を編集したいのですが RMagickってddsファイルは対応してないのですか？ 対応してないとしたら、どうしたらddsファイルを編集できるか誰かわかりますでしょうか？ 拡大とか反転とかしたいです。 osはwindowsです。 よりしくお願いいたします。。
10～50までの素数が格納されている配列を rubyで作りたいのですが、どのようにすればいいいのかよくわかりません。 下のプログラムにも間違いがあるかもしれませんので もしありましたご指摘お願い致します。 for i=start i<=end i++;//iは割られる数 for(j=1;j<=i;j++){//jは割る数 if(i%j==0){ count++; } } if(count==2){ System.out.println(i); } iをjで割っていき、余りが0になったらカウントを増やしていくプログラムです。 素数は1とその数字でしか割れないので、カウントは2になり、 それを配列に格納したいのですが、ここではただ表示するだけに留まってしまっています。 まだruby初心者で分からないことだらけですので、 簡単な方法ではなく、出来ればfor文を使用したやり方で教えていただけると 幸いです。 よろしくお願い致します。
10～50までの素数が格納されている配列を rubyで作りたいのですが、どのようにすればいいいのかよくわかりません。 下のプログラムにも間違いがあるかもしれませんので もしありましたご指摘お願い致します。 for i=start i<=end i++;//iは割られる数 for(j=1;j<=i;j++){//jは割る数 if(i%j==0){ count++; } } if(count==2){ System.out.println(i); } iをjで割っていき、余りが0になったらカウントを増やしていくプログラムです。 素数は1とその数字でしか割れないので、カウントは2になり、 それを配列に格納したいのですが、ここではただ表示するだけに留まってしまっています。 どなたかよろしくお願い致します。
awkで以下のように文字列置換したいのですが、変数strA内で¥マークを使用すると正常に置換してくれません。どのようにエスケープすれば良いのでしょうか？ ================================================= --実行コマンド---------- gawk -f CNV.awk input.txt --input.txt---------------- いぬ¥ねこ --CNV.awk---------------- strA="ぬ¥ね"; strB="★"; gsub(strA, strB, $0); print $0; ================================================= このとき、「い★こ」という結果を期待しているのですが出力がありません。 また、 strA="ぬ¥¥ね"; や strA='ぬ¥ね'; と指定しても同様にダメでした。 どなたか解決策をご存知でしたらご教授宜しくお願い致します。
はじめまして。できればRUBY言語もしくはCでの構造体へのアクセスについて教えてください。 今回やりたいのは、ddsファイルのARGBの情報を取得し、表示したいです。 フォーマットやヘッダ情報はググッたらあったのでわかるのですが、RUBY初心者なので肝心の記述かわかりません。 strctｒで構造体書いて、アクセスしてどうにかすればいいと思うんですが。 記述がわからず悩んでおります。構造体へのアクセス方法だけで結構ですので。 あつかましいとは思いますが、お助けください。 http://www.mapee.jp/wlh/dds32argb.html http://dench.flatlib.jp/ddsformatmemo.html
<table border="1"> <tr> <td>開始時間</td> </tr> <% @studylogheader.studylogdetails.order('starttime').each do |studylogdetail| %> <tr> <td> <%= time_select :studylogdetail, :starttime, { :time_separator => ':' } %> </td> </tr> <% end %> </table> 上記のような ERB で :starttime の値が初期表示されないのですが、 time_select は、初期表示できないのでしょうか？
{"utf8"=>"✓", "authenticity_token"=>"bqoR9tW+GGskvv4MRTtd1OikjwPKLeACkl7S/Pv55jE=", "studylogheader"=>{"studydate"=>"2011-06-07", "member_id"=>"902806575", "comment_member"=>"頑張ったけど、だめだった。もうしんどい。", "comment_staff"=>"comment_staff01", "comment_parent"=>"comment_parent01"}, "studylogdetails"=>[{"starttime"=>{"(1i)"=>"2011", "(2i)"=>"6", "(3i)"=>"17", "(4i)"=>"11", "(5i)"=>"00"}, "endtime"=>{"(1i)"=>"2011", "(2i)"=>"6", "(3i)"=>"17", "(4i)"=>"12", "(5i)"=>"00"}, "place"=>"totto", "studycontent"=>"aaaaa"}, {"place"=>"totto", "studycontent"=>"aaaaa", "starttime"=>{"(1i)"=>"2011", "(2i)"=>"6", "(3i)"=>"17", "(4i)"=>"12", "(5i)"=>"00"}, "endtime"=>{"(1i)"=>"2011", "(2i)"=>"6", "(3i)"=>"17", "(4i)"=>"13", "(5i)"=>"00"}}, {"place"=>"totto", "studycontent"=>"aaaaa", "starttime"=>{"(1i)"=>"2011", "(2i)"=>"6", "(3i)"=>"17", "(4i)"=>"07", "(5i)"=>"47"}, "endtime"=>{"(1i)"=>"2011", "(2i)"=>"6", "(3i)"=>"17", "(4i)"=>"07", "(5i)"=>"47"}}, {"place"=>"totto", "studycontent"=>"aaaaa", "starttime"=>{"(1i)"=>"2011", "(2i)"=>"6", "(3i)"=>"17", "(4i)"=>"07", "(5i)"=>"47"}, "endtime"=>{"(1i)"=>"2011", "(2i)"=>"6", "(3i)"=>"17", "(4i)"=>"07", "(5i)"=>"47"}}, {"place"=>"totto", "studycontent"=>"aaaaa", "starttime"=>{"(1i)"=>"2011", "(2i)"=>"6", "(3i)"=>"17", "(4i)"=>"07", "(5i)"=>"47"}, "endtime"=>{"(1i)"=>"2011", "(2i)"=>"6", "(3i)"=>"17", "(4i)"=>"07", "(5i)"=>"47"}}, {"place"=>"totto", "studycontent"=>"aaaaa"}], "commit"=>"Save changes"} 上記のような params です。 01: index = 0 02: params[:studylogdetails].map { |hash| 03: studylogdetails[index].starttime = 04: Time.new( 05: hash[:starttime]["(1i)"].to_i, 06: hash[:starttime]["(2i)"].to_i, 07: hash[:starttime]["(3i)"].to_i, 08: hash[:starttime]["(4i)"].to_i, 09: hash[:starttime]["(5i)"].to_i, 0) 10: ......<中略> 11: studylogdetails[index].save 12: index = index + 1 13: } このようなコードで、行05 で以下のようなエラーになります。 You have a nil object when you didn't expect it! You might have expected an instance of ActiveRecord::Base. The error occurred while evaluating nil.[] どなたかわかる方、お願いします。
(1)Rubyプログラムの質問です。 y = ax^3 + bx^2 + cx + d 整数a,b,c,dを読み込んで、xが0から1まで0.1刻みでyの値を求め、印字するプログラムを作っています。 そして、この中でyの値が最小・最大となるときのx,yの値を出力したいのですが、どう求めればよいのかわかりません。 どなたかご教示いただければ幸いです。 (2)もう一つありまして、これもRubyプログラムに関してです。 exp(1) = 1 + 1/1! + 1/2! + ・・・ + 1/n! + ・・・ですが、 この近似式よりexp(1)の値を求めるプログラムの作成の仕方で悩んでいます。 さらにn = 1,2,3・・・10として、近似式を求めるプログラムを作りたいのです。 この問題に関しても、ご存じの方いらっしゃいましたら、ご教示ください。
{"utf8"=>"✓", "authenticity_token"=>"V1liFxz8G95TNBlfLobNOKaV5AjtojxTWYFXLuv/XkU=", "studydate"=>{"studydate(1i)"=>"2011", "studydate(2i)"=>"6", "studydate(3i)"=>"15"}, "member_id"=>["94718113"], "commit"=>"Save changes", "controller"=>"tottoweb", "action"=>"selectstudylog"} このような params の studydate から Date 型の値を取得したいのですが、 どうすればよいのでしょうか？ studydate = 　Date.new( 　　params['studydate(1i)'].to_i, 　　params['studydate(2i)'].to_i, 　　params['studydate(3i)'].to_i) このように記述したのですが、 invalid date となってしまいます。
{"utf8"=>"✓", "authenticity_token"=>"PJzalm4QwBv3vj51Hgs/wJTorA1X7fsCntivSAo4d6g=", "studylogheader"=>{"studydate(1i)"=>"2011", "studydate(2i)"=>"6", "studydate(3i)"=>"7", "member_id"=>"902806575", "starttime"=>"1000", "endtime"=>"1600", "comment_member"=>"comment_member1", "comment_staff"=>"comment_staff", "comment_parent"=>"comment_parent", "staff_id"=>"679619944", "delete_flag"=>"0"}, "studylogdetails"=>[{"starttime"=>"1300", "endtime"=>"1400", "place"=>"totto", "studycontent"=>"aaaaa"}, {"starttime"=>"1200", "endtime"=>"1300", "place"=>"totto", "studycontent"=>"aaaaa"}, {"starttime"=>"1100", "endtime"=>"1200", "place"=>"totto", "studycontent"=>"aaaaa"}, {"starttime"=>"1500", "endtime"=>"1600", "place"=>"totto", "studycontent"=>"aaaaa"}, {"starttime"=>"1000", "endtime"=>"1100", "place"=>"totto", "studycontent"=>"aaaaa"}, {"starttime"=>"1400", "endtime"=>"1500", "place"=>"totto", "studycontent"=>"aaaaa"}], "commit"=>"Save changes"} このような params から、 01: @studylogheader = Studylogheader.new(params[:studylogheader]) 02: @studylogheader.studylogdetails = Array.new(Studylogdetail.new(params[:studylogdetails])) このように構造体を取得したいのです。 この 02 のところでエラーになってしまいます。 エラーは、 can't convert Studylogdetail into Integer です。わかる方書き込みお願いします。
<%= form_for(@studylogheader) do |f| %> <div class="field"> <%= f.label :member %><br /> <%= f.collection_select( :member, Member.all, :id, :username ) %> </div> <div class="actions"> <%= submit_tag %> </div> <% end %> このようなコードで、@studylogheader のmember の値が表示されず困っています。 @studylogheader は、学習記録を保持するオブジェクトで、学習記録には、 学習者（member）を持っています。 上記のコードで画面表示したときに学習記録の学習者ではなく、一番上の 項目が選択された状態になってしまいます。 学習記録に保持されている学習者を選択肢の中から選んで表示するには、 どうしたらよいのでしょうか？
継承を用いて、次のクラスを表し、出力したいのですが、出力の仕方が良く分かりません。 classの作成まで自分でやったのですが(合っているかは分かりません。間違っていたら教えていただけると幸いです。)、その後、どう出力すればいいのでしょうか。 この問題のの趣旨としては以下のような感じです。 ）継承を用いて、次のクラスを表したい。 人を大きく分けてアジア人、アフリカ人、ヨーロッパ人に分けるとします。 人を親のクラスとし、アジア人、アフリカ人、ヨーロッパ人を子のクラスとします。 人(親クラス)の大陸をcontinentで表し、 アジア人、アフリカ人、ヨーロッパ人の特徴はこれにskincolorを加えたものとします。 人、アジア人、アフリカ人、ヨーロッパ人のクラスを作成します。 この時、これらの特徴にアクセスするためのメソッドも合わせて定義し、 これらも継承関係が維持されるようにします。 最後に結果を出力したいのですがそこが分かりません。 自分で作成したクラスは以下のようです。 irb(main):001:0> class People irb(main):002:1> def initialize(continent) irb(main):003:2> @conti=continent irb(main):004:2> end irb(main):005:1> def get_conti irb(main):006:2> @conti irb(main):007:2> end irb(main):008:1> end => nil irb(main):009:0> class Asian < People irb(main):010:1> def initialize() irb(main):011:2> super(asia) irb(main):012:2> @yellow=color irb(main):013:2> end irb(main):014:1> def get_conti irb(main):015:2> @conti irb(main):016:2> end irb(main):017:1> def get_color irb(main):018:2> @yellow irb(main):019:2> end irb(main):020:1> end => nil irb(main):021:0> class African < People irb(main):022:1> def initialize() irb(main):023:2> super(africa) irb(main):024:2> @black=color irb(main):025:2> end irb(main):026:1> def get_conti irb(main):027:2> @conti irb(main):028:2> end irb(main):029:1> def get_color irb(main):030:2> @black irb(main):031:2> end irb(main):032:1> end => nil irb(main):033:0> class European < People irb(main):034:1> def initialize() irb(main):035:2> super(europa) irb(main):036:2> @white=color irb(main):037:2> end irb(main):038:1> def get_conti irb(main):039:2> @conti irb(main):040:2> end irb(main):042:1> def get_color irb(main):043:2> @white irb(main):044:2> end irb(main):045:1> end => nil ご教授お願い致します。
当方Macとプログラミング初心者です。 ２ヶ月くらい前からうちのMac（Core i5 2.4GHz、10.6.7）にStarRubyをインストールしようと奮戦しているのですが、まったくうまくいきません。 ライブラリ等はMacPortsを利用しインストールしたのですが、extconf.rbを実行し、makeした所でエラーが出ます。 $ ruby extconf.rb checking for png.h... yes checking for zlib.h... yes checking for Mix_OpenAudio() in -lSDL_mixer... yes checking for TTF_Init() in -lSDL_ttf... yes checking for fontconfig/fontconfig.h... yes checking for FcInit() in -lfontconfig... yes checking for main() in -lGL... yes creating Makefile $ make /usr/bin/gcc-4.2 -I. -I. -I/opt/local/lib/ruby/1.8/i686-darwin10 -I. -DHAVE_PNG_H -DHAVE_ZLIB_H -DHAVE_FONTCONFIG_FONTCONFIG_H -I/opt/local/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -I/opt/local/include -fno-common -pipe -O2 -arch x86_64 -fno-common -pipe -fno-common -I/opt/local/include/libpng14 -I/opt/local/include/SDL -D_GNU_SOURCE=1 -D_THREAD_SAFE -I/opt/local/include -finline-functions -Wall -W -Wpointer-arith -Wunused-parameter -pedantic -std=c99 -funit-at-a-time -arch x86_64 -c ./src/texture.c ./src/texture.c: In function ‘Texture_s_load’: ./src/texture.c:326: warning: implicit declaration of function ‘png_set_gray_1_2_4_to_8’ ./src/texture.c:329: warning: ‘num_palette’ is deprecated (declared at /opt/local/include/png.h:660) ./src/texture.c:331: warning: ‘palette’ is deprecated (declared at /opt/local/include/png.h:658) ./src/texture.c:332: warning: ‘num_trans’ is deprecated (declared at /opt/local/include/png.h:662) ./src/texture.c:333: error: ‘png_info’ has no member named ‘trans’ ./src/texture.c:334: warning: ‘num_palette’ is deprecated (declared at /opt/local/include/png.h:660) make: *** [texture.o] Error 1 libpngが怪しそうなのですが、何ぶん知識が浅いのでさっぱりです。 環境変数の設定はしてあります。 一体何がいけないのでしょう。こちらの環境に依るものなのでしょうか。 回答宜しくお願いします。
NKF.guessで文字コードを判別し、そのコードがWindows-31J以外だったら エラーが出るようにしたいです Shift-JISの場合だと if(NKF.guess（str） == NKF::SJIS) この様に記述をして判別させています SJISの部分をCP932に変えて試してみましたが駄目でした 宜しくお願いします
最近、仕事でRailsを使って仕事をしています。 そこで、疑問点が出てきたので、ちょっとお聞きしたいと思います。 Userというテーブルがあり、それを検索するとします。 User.find(:all, :conditions => '...', :order => '...') User.new.find(:all, :conditions => '...', :order => '...') どちらでも同じように検索できるのですが、これはプログラムの内部的にどういう違いがあるのでしょうか？ ・上はActiveRecordを使って直接DBを読みに行っている。 ・下は一旦オブジェクトとして生成して、そこにActiveRecordでSQLを飛ばしてる。 そんな感じかと漠然と思ってますが、違うのでしょうか？ パフォーマンス的なことも知りたいと思っています。 よろしくお願いします。
Rubyでネットワークドライブにあるファイルを処理しようとすると、No such file or directoryが出てしまうのですが、原因がわかりません。 環境は、Window7のノートパソコンで、Ruby1.9.1を使用しています。ちなみに会社にあるデスクトップのPCでは同じように設定しても問題なく処理ができます。これはRubyの問題というよりもWindow7の問題なのでしょうか？ 何かわかる方がいらしたら、教えてください。
同じrubyスクリプトを、MacOSとWindowsで動かしたいと思っています。 日本語が正常に表示されないのでいろいろやっていく内に、解せないことがあります。 MacOS上で puts($KCODE) puts("テスト") という２行のファイルを、UTF-8、及び S_JISで保存してそれぞれ -Ku -Ks オプションをつけて実行させてみると、S_JISの方は正しく表示されません。 ＄KCODEの値は正しく SJIS になっていました。 Windwsで同じファイルを走らせると、S_JISの方は正しく表示されますが、UTF-8 の方が正しく表示されません。 rubyのバージョンは1.8.7、エディタは mi を使用しました。 なにか勘違いしてるのでしょうか？
こんにちは、Ruby初学者です。 以下の問題が解けずに困っています。「protectedが、メソッドをクラス内部から使えるようにする。また、同一クラス内ではインスタンスメソッドとしても使えるようにする。」という教科書的な内容は理解しているつもりでプログラムを書くのですが、どうも上手くいきません。 ヒントだけでも構いませんので、諸兄姉の知識をお貸しいただければ幸いです。 「protectedと宣言されたメソッドは、そのメソッドが定義されているクラスのサブクラスで定義されているメソッドから、メッセージの送信元とは異なるオブジェクトに対しても呼び出せることを確認するプログラムを作成し、結果を説明せよ。」 よろしくおねがいいたします。
railsの勉強のために他人のコードが観たいのですが どうすれば観れますか？ 今の自分のレベルは、基礎レベルまで理解して自分で簡単なrailsアプリを作るぐらいの感じです。 基礎までは理解したけど、そのちょっと先がわからない感じで 他の人の作成したコードを観たいです。
rubyのプログラムで例えば -------------------------- t=0.00 100.times do t += 0.01 print t, "\n" end -------------------------- のようなプログラムを実行したとき 0.01 0.02 0.03 ......... 0.80 0.81 0.820000000000001 0.830000000000001 ......... 0.990000000000001 1.0 と出力されたのですが、00000000000001の部分を正常に出力するにはどうすればいいのでしょうか？また、このように出力されることが丸め誤差なのでしょうか？ どなたか教えてください。
Rails3.0.7でscriptコマンドが実行できません。どのようにしたら実行できるのでしょうか？
ruby on railsの全くの初心者です。 <%= link_to :class=> "hoge" %> のように固定のclassを指定する箇所を動的にしたいです。（以下のクラス指定のように） <h3 class="<%= get_class_name(params, "id") %>"> 試行錯誤をしましたが、解決できなかったので質問します。 よろしくお願いいたします。
rubyでn進数（16進数以上）の文字列を扱いたいです。 例えば、３６進数で４桁を数値を、0～1679616(36^4)通り順に 表示したいです。 ３６進数を表す文字は、('a'..'z').to_a + ('0'..'9').to_aの様に定義したいと思います。 0～36^4へとインクリメントしつつ、その値を上記で定義した文字を使った 文字列へと変換していけば良いとは、思うのですが、うまいこと書けませんでした。 ご教授の程、よろしくお願いいたします。　
Rubyで、 「\u3053\u3093\u306B\u3061\u306F 」のようなエンコーディングされた文字を、 「あいうえお」とShift-JISで表示するにはどうすればいいのでしょうか JavaScriptでは、 unescapeで一発なんですけど…
Rubyの初心者です。Macを使用しています。 macportで1.9をインストールしたのですが、 ターミナルで ruby -v とするとデフォルトでインストールされていた ruby 1.8.7 と出ます。 1.9へのアップデート方法を教えてください。 アップデートしたい理由は、irbで日本語を使用したいからです。 よろしくお願いします。
Rubyで配列を使ったfor文の中に条件付きのif文を入れてループさせたいのですが、基本的な構文が分かりません。 for i in array 　　　 if i == 9 　　　　　　array[i] << 'ア' 　　　 end end という雰囲気で書きたいのですが、どうしたらよいでしょうか。 i番目のループまで、配列のarrayを走査するにはどうすればよいでしょうか。 基礎的な質問ですみません。よろしくお願いします。
Rubyにて、Twitterの出力結果をスクリプト経由で出力させるさせようとしていますが、日本語で出力させたいのですが、出力結果が下記のように文字化けしてしまうのですが、日本語として表示させることは可能でしょうか。-K kcodeオプションは試したのですが結果は変わりませんでした。 ご存知の方がいらっしゃれば、ご教示お願いいたします。 "description"=> "\u901A\u4FE1\u4E8B\u696D\u8005\u304B\u3089\u6D41\u308C\",
基本的な質問になるのですが、 CentOS5.5でRuby1.9.2を利用しているのですが、スクリプト中に、マジックコメントを 入れているにも関わらず、「invalid multibyte char」エラーが返ってきます。 追加で設定する情報があるのでしょうか。 お手数お掛けしますが、ご存知の方がいらっしゃれば、ご教示ください。 # ruby -v ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-linux] # cat hello.rb # -*- encoding: utf-8 -*- puts 'こんにちは' # ruby -v hello.rb ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-linux] hello.rb:2: invalid multibyte char (UTF-8) hello.rb:2: invalid multibyte char (UTF-8) # ruby -Ks hello.rb hello.rb:2: invalid multibyte char (UTF-8) hello.rb:2: invalid multibyte char (UTF-8)
下記のような状態になってしまいサーバが動いてくれません。 エラー文を見るとファイルかディレクトリが存在しないとの事だと思いますが 色々調べてみましたが同じような状態からの解決法が見つからなかった為こちらに質問させて頂きました。 C:\ruby\work>rails new sample create create README create Rakefile create config.ru ----------中略------------ create public/javascripts/prototype.js create public/javascripts/rails.js C:\ruby\work>cd sample C:\ruby\work\sample>ruby script/server ruby: No such file or directory -- script/server (LoadError) ruby のバージョンは1.9.2p180、gemのバージョンが1.6.2です。 環境設定でどこかにミスがあると思って念の為、再度インストールし直しでやってみましたが全く同じで変わりませんでした。 追記、数年前だとC:\>rails sampleと書くだけでファイルが生成されたのですが、 今日試してみたところC:\>rails new sampleとnewを付けないとファイルが作成されない事がわかりました。 サーバ立ち上げの記述も数年前とは違うという事でしょうか？ どなたか教えて下さい。
Rails ActiveRecord において、 深い階層のテーブルを参照するのに有効な方法はないでしょうか？ 例：下記の構造で classD から classAのnameを取得する。 classA　　1→n　　classB　　1→n　　classC　　1→n　　classD □classA 　　id 　　name □classB 　　id 　　name 　　class_a_id □classC 　　id 　　name 　　class_b_id □classD 　　id 　　name 　　class_c_id ＃前提条件 classC, classB, classAが必ずしも存在するとは限らない。 classDからclassAを参照する際に、＃前提条件にあるように、 classB or classCが存在しない(nil)場合、 > class_d.class_c.class_b.class_a.name とするとエクセプションが発生しますが、 これを回避するために、 if class_d.class_c and class_d.class_c.class_b and class_d.class_c.class_b.class_a class_d.class_c.class_b.class_a.name end のようにしていますが、煩わしくてしかたがありません。 実際はエラーログ出力等行っているため、さらに複雑な処理になっています。 もっとスマートなコーディング方法やアドバイスがありましたら宜しくお願いします。 ＃補足 (1) has_many :through を使ってショートカットが作れることを知りましたが、 今回の例のように、複数階層となる場合の記述方法がわかりません。 ご存知の方回答お願いいたします。 (2) そもそも前提条件に問題があるのではないかとも思っています。 前提条件にあるような状態にならない様な仕組みにする、 もしくは、そのような状態にならないよう管理する、等すべきでしょうか？ 以上宜しくお願いいたします。
rubyの繰り返し処理の仕方がわかりません rubyを使ってのプログラムを勉強してます。最終的には表の書き換えをする プログラムがつくりたいのですが最初でコケましたruby イテレーター ネストで検索してもわからなかったので質問します。どなたか　お時間あれ ば教えてください。 お店の番号SA003とSA005を次の "SA001",0,10,20,10 "SA003",0,10,20,20 "SA004",0,10,20,100 "SA005",0,10,20,50 の表なかから探すプログラムを作成しようとしましたが。 繰り返し処理の仕方がわかりません変数のスコープが外れていると思いますし dataの行数は4とはかぎらないので 4.times は使えないのはわかるのですが とりあえずイメージ的に描いたプログラムです。よろしくお願いいたします。 ====testimage.rb======== class Shop_number def initialize @mise=["SA003","SA005"] end def tenposuu() return @mise.size end def tenpo_no(n) return @mise[n] end end data =[["SA001",0,10,20,10],["SA003",0,10,20,20],["SA004",0,10,20,100],["SA005",0,10,20,50]] obj = Shop_number.new obj.tenposuu.times do |i| 4.times do |j| if data[j][0]=~/{obj.tenpo_no(i)}/ then puts data end end ======================= =>["SA003",0,10,20,20] =>["SA005",0,10,20,50] と出したいのですが・・・
Rubyで月盤の60進数を作って頂きたいんです。 西暦2008年12月=1 西暦2009年1月=2 西暦2009年2月=3 ・・・ 西暦2013年11月=60 という周期で動きます。 宜しくお願い致します。
現在Rubyを勉強していてRailsを使ってサイト（VPS）を構築しようとしています。 その際、Windows、Mac、Linux（CentOSかUbuntu)のどの環境で開発すれば良いのでしょうか。 というのも現在はWindowsでやっているのですが、Linuxの勉強も含めVMWareでやった方が良いのか、またMacを持っておるのでMacで開発した方がいいのか迷っています。 実際に仕事等でRubyを使っておられるみなさんはどのような開発環境なのでしょうか。
家族がプログラミングをやっているのですが、Rubyによるブログの作成に関して質問があるということで、代理で投稿させていただきました。 現状では ・編集画面では記事のタイトルと内容を編集でき、それを保存すると記事タイトル・内容に加えて日時が自動で表示される ・記事の並びは最も古いものが一番上にきて、下に新しい記事が延々と足されていく(表示されていく)方式 になっているそうです。これを ・記事タイトル・日時・内容を1つのセット(かたまり)としてまとめる ・一ページにつき5件のみ表示される方式 ・最新の記事が一番上に来る並べ方 というように変えたいようなのですが、どのようにしたら良いかわからないそうです。 私自身はプログラミングは殆ど知識がなく、質問の意味がわかり辛い点もあるかと思います。 お手数をおかけしますが、どなたか方法をご存知の方がいらっしゃいましたら、ご回答頂ければ幸いです。
あるif文をdefでまとめて動かしたところ、西欧のエンコードで表示されてしまうのですが、 これはエラーですよね？正しい動作にならないのですが、どうしたらよいでしょうか。 def search_kansi(h) if h == 1 kansi = "甲子" elsif h == 2 kansi = "乙丑" elsif h == 3 kansi = "丙寅" else kansi ="無効な値が入力されました" end return kansi end #def nikkan = search_kansi(h) print nikkan
シフトJISの漢字２文字（４バイト)のうち先頭の一文字だけを取り出したい。 以下を試したところ結果は、 p kansi.split(//s) =>["\222\232", "\226\242"] #p kansi[0,2] =>["\222\232"] という結果になります。 漢字で取りだしたいのですが、文字エンコードするにはどう書けばよいでしょうか。
Rubyで申（さる）を出力したいのですが、 print文でInternal Server Errorが出てしまいます。 なぜでしょうか。他の十二支はちゃんと出力されます。 なぜ申だけでないのでしょうか。 エンコードの問題なのでしょうか？ 私はShiftJISなんですが、何が問題なのでしょうか。
変数に変数を使いたいのですが できますでしょうか？ 【↓やりたい事のイメージ】 ------------------------------ for i in 1..3 hensuu【ここにi】 = i end ------------------------------ 結果として 変数「hensuu1」に1が代入され 変数「hensuu2」に2が代入され 変数「hensuu3」に3が代入されるようにしたいのです。 宜しくお願い致します。
すみません、訂正です。 日付で６０進数を組みたいんです。 2010年7月13日=1 2010年7月14日=2 2010年7月15日=3 ・・・ 2011年7月7日=60 という運行します。 RubyまたはPerlで 簡単かつ綺麗なIf文を書いて下さる方を探しています。 よろしくお願いします。
例 1924年=1 1925年=2 1926年=3 ・・・・ 1983年=60 1984年=1 というアルゴリズムをやりたいんです。 できればRuby、Ｐｅｒｌでもいいです。 簡潔で綺麗なIf文を書いて下さる方はいませんか？
プログラマ初心者です。Rubyで占いのプログラムを作りたいのですが、暦を作りたいんです。 2011年1月= 9 2011年2月= 8 2011年3月= 7 　　　　・ 　　　　・ 　　　　・ 2011年9月= 1 というような、9からはじまり1で終わり、また9から始まって1で終わるという九進数のループを教えていただきたいです。 年マタギする部分が一番分からないので、2012年にまたぐ瞬間をどのように書けばよいのか教えてください
ハッシュの中の値からキーを取りだしたいのですが、うまくいきません。 下記のようなソースしか思い浮かばないのですが、 何か良い手はないでしょうか。 ------- if number == ban.values d = ban.keys end
forループの中のハッシュをeachしたいのですが、 printすると、一番最後のループのハッシュだけ表示されるようです。 全部中身を出すにはどういうソースを書けばよいのでしょうか。 ----------------------- center = 7 for i in 5..13 if center < 9 ban = { "i" => center } center += 1 else ban = { "i" => center } center = center % 9 center += 1 end end ban.each{|key, value| print(key + "=>", value) }
Mac OS X 10.6でRuby on Railsやりたいと思っているのですが、諸々のインストールがすみ、rails new helloworldとかで新規プロジェクトできるのですが、scriptフォルダーにserverが存在せずrailsというファイルだけあり、ruby script/serverをすることができません。 こういう状況ってなにがたりないのでしょうか。
ウェブのフォームから数値を入力し、 それを受け取って、cgiの中で演算したいのですが、うまくいきません。 input = CGI.new birth = input["birth"]#西暦1982年を入力 print -(birth - 1927)%9+1#この演算をしたいのですが、できません。
ruby 1.8.7 で、下記のような配列をソートしたいんですが、どう記述したら良いでしょうか。 x = [[1, 1], [2, 2], [11, 10], ・・・ [1, 13], [2, 14]] ..........a b a = 1番目の ソート 順 b = 2番目の ソート 順　　 　　　 よろしくお願いします。
「作りながら学ぶRuby入門　著 久保秋 真」という本を参考にしています。 本の課題で #! ruby -ks # -*- coding: Windows-31J -*- puts "ようこそ" puts 'Welcom' puts "私の好物は'りんご'です。" puts '私は"ドリアンが"が苦手です。' というのがあったのですが、実行させると ruby: invalid option -k (-h will show valid options)(RuntimeError) というエラーがでます。 何がいけないのでしょうか？ PC環境 OS：VISTA HOME PREMIUM SP2 Ruby：Ruby-1.9.1-p243 テキストエディタ：サクラエディタ 参考入門書：作りながら学ぶRuby入門　著 久保秋 真
初めてプログラミングを始めます。 「作りながら学ぶRuby入門　著 久保秋 真」という本を参考にしてます。 この本で「演習場所を準備する」という項目で以下のように書いていました。 『テキストエディタで「C:\ruby_ex」ディレクトリに新しいファイルを「test01.rb」を作成して・・・』 上記のディレクトリに新しいファイルの作成の仕方を教えていただきたいです。 テキストエディタはサクラエディタです。 PC環境 OS：VISTA HOME PREMIUM SP2 Ruby：Ruby-1.9.1-p243 テキストエディタ：サクラエディタ　Ver1.6.6.0(V 1310)
初めてプログラミングを始めます。 「作りながら学ぶRuby入門　著 久保秋 真」という本を買いました。 この本で「演習場所を準備する」という項目で以下のように書いていました。 『インストールしたRubyのディレクトリを決めておきましょう。』 『「Cドライブ」の「\ruby_ex」というディレクトリを作成しましょう』 『コマンドプロンプトで次のように入力して作成しましょう』 『C:\Documents and Settings\kuboaki>mkdir C:\ruby_ex』 『「kuboaki」は必要に応じて読み換えてください」』 コマンドプロンプトを開いた参考写真のサンプルでは 「C:\Documents and Settings\kuboaki>」になっていました。 (1)コマンドプロンプトをcmdで検索して開くと Microsoft Windows [Version 6.0.6002] Copyright (c) 2006 Microsoft Corporation. All rights reserved. C:\Users\○○ ○○> ○○　○○のところは全角の漢字で自分の名前が入っています。 (2)cmdのショートカットを作って開くと Microsoft Windows [Version 6.0.6002] Copyright (c) 2006 Microsoft Corporation. All rights reserved. C:\Windows\System32> と表示されます。 (1)で指示どおりに「C:\Documents and Settings\○○　○○>mkdir C:\ruby_ex」と入力すると 'C:\Documents'は、内部コマンドまたは外部コマンド、 捜査可能なプログラムまたはバッチ ファイルとして認識されていません。 となってしまい (2)で指示どおりに「C:\Documents and Settings\○○　○○>mkdir C:\ruby_ex」と入力すると アクセスが拒否されました。 と表示されます。 (1)(2)共に○○　○○のところは漢字で入力しました。 何がいけないのでしょうか？ Administratorでログインしています。 別アカウントは作っていないです。 PC環境 OS：VISTA HOME PREMIUM SP2 Ruby：Ruby-1.9.1-p243
rubyまったくの初心者です。 以下のサイトなのですが http://www.oizumifoods.co.jp/recruiting/recruiti … フォームに情報を満たせていない場合、入力確認ボタンを押すと、エラー画面が 出るはずなのですが、出なくなりました。 もともとは出ていたのですが、 サーバから該当ディレクトリにあるファイルを全て、 一旦ローカルにダウンロードしてサーバ上では削除しました。 （他の部分で検証したい事があり、このようなことをしました） その後、ローカルにダウンロードしたファイル（まったくいじっていない）を 同じ場所に全てアップしたのですが そうすると、エラー画面が出なくなってしまいました。 ファイルやソースは全て、元あったものと全く同じなはずなのですが。。 rubyを知らないので、こういうことってrubyではあるのでしょうか？ 説明がしずらく、また初心者で申し分けありませんが、非常に焦っています。。 何卒よろしくお願いいたします。
rubyのforeach構文を用いて（foreachにこだわるわけではありませんが） 指定したディレクトリ内の全ファイルに対してプログラムを実行させるようなコードを書きたいのです 以下が書いてみたコードなのですが、これだと一度execを行ったあと動作が終了してしまいます なにか対応策はありますでしょうか　よろしくお願いします Dir::foreach(ARGV[0]) {|f| exec("java execute " + ARGV[0]+ "\\#{f}") }
PHPで作成されたホームページを、デザインや仕様はそのままで、 Rubyonrailsに書き換えたいです。 現在手元にPHPのソースが無い状態で、 ホームページの遷移を確認しながら、ブラウザからHTMLソースを眺めていますが、 自分はrubyonrails(Aptana環境)とHTML等を少しさわっただけの初心者で、 何から調べて行けばよいのか見当をつけられません。 ざっくりとで構いませんので、どなたか御教示頂けますでしょうか？
プログラミング言語rubyの正規表現について質問です。 大学の授業でrubyをやっているのですが、 下記の文字列をパターンマッチさせる方法がわかりません。 日本語とアルファベットが混ざっているときに どのような正規表現のパターンを作ったらよいかわかりません。 「|」はただの文字として扱いたいです。 1行でひとかたまりです。 どなたか教えてくださいませんか。 よろしくお願いします。 ↓ネタ｜ネタのローマ字表記｜皿の色｜値段　　の順に並んでいます。 生うに|namauni|gold|420 甘えび|amaebi|red|120 さわら|sawara|green|180 ねぎとろ|negitoro|green|180 さんま|sanma|green|180 納豆巻|nattomaki|red|120 いくら|ikura|blue|240 とり貝|torigai|gold|420 こはだ|kohada|red|120 つぶ貝|tsubugai|green|180 たらこ|tarako|red|120 赤貝|akagai|blue|240 ひらめ|hirame|gold|420 サーモン|salmon|blue|240 しまあじ|shimaaji|blue|240 中とろ|chuutoro|gold|420
これまでJavaしか触ってこなかったのですが、この度Rubyに触れる機会を頂きました。 Rubyについては全く知識がないのですが、Javaに慣れている私のような者にとって学びやすい言語でしょうか？ また、例えば（考え違いがあるかも知れませんが）「PHPと言えばコンシューマ向けのWebアプリケーション」、「Javaと言えばエンタープライズ向けのWebアプリケーション」といったように、「Rubyと言えば…」というような、Rubyがよく用いられていたり、得意とする分野はどういったものでしょうか？ どうぞよろしくお願いします。
windows環境でrubyを使っています テキスト内の '［' を、全角の '［' に置換したいのですがエラーがでてうまくいきません ｓｔｒ.gsub(/\[/,'［') のように書きました
rubyプログラムについて、前後に立ち上げた二つのスレッドが同じコアで動いているか判断する方法がありますか？
Ruby On RailsでCSV出力を行うメソッドを作っているのですが、 そこで行いたいことは、 AA BB CC というデータがあったとして、 それぞれを AA.csv BB.csv CC.csv といった形でCSVデータを作成し、ブラウザにダウンロードのポップアップウィンドウを3回表示するという動きです。 ブラウザ上のボタン一つでこういった処理は可能なのでしょうか？ なにか方法があれば教えていただきたいです。 無理なのであれば、なにかいい別の手段などを教えてください。 よろしくお願いします。
Ruby1.9を使っております。 次のような全角、半角が混在した文字列があり、その文字列の中から、 全角の文字数、半角の文字数がそれぞれ何文字あるか調べる方法はありますでしょうか。 ■文字列例 "あいイウう" どうか良きアドバイスをお願いいたします。
Rubyを用いてドメイン特化言語（DSL)なるものを作りたいと思っているのですが、この場合、ライセンスはどのようなものになるのでしょうか。ネットでも配布予定で、1.8.7と1.9のどちらかのバージョンを使う予定です。 ご教授の方、よろしくお願い致します。
２年程独学でrailsではある程度の物は作れるようになってきましたが、 3つの質問をさせてください。 １）携帯メールに絵文字を表示できるようにしたい。良いプラグインはないか？ 文字コードの知識が無くて恐縮なのですが、３キャリア対応で絵文字付きメール を送信したいのですが、どうもうまく絵文字部分のコードの置換が出来ません。 どのような方法でも結構です。 mobile.html.erb mobile_docomo_html.erb など振り分けて送信するなど。。（この場合は、テキストボックス内の絵文字はどこでconvするのでしょうか？） プラグインがなくても改良方法のヒントでもいただけると有り難いです。 ここを勉強した方が良いなど。 ２）PCからテキストボックスで絵文字入力させたい。プラグインは無いでしょうか。 wysiwyg程豊富な機能はいらなく、絵文字のみでよいのですが、良いものはありますでしょうか？ajax製でも結構です。 少し調べたのですが、情報が古かったりして、どれがメジャーなのかがわからないものでして。 ３）Rails中級程度の質問で的確に教えて頂ける場所は、ここ以外にあるのでしょうか？ わかる項目のみで結構です。教えて頂けると大変助かります。 どうぞよろしくお願いいたします。
二項演算子の定義 rubyを学び始めた超初心者です。プログラム経験はありません。 参考プログラム、下記を入力しましたが2箇所？納得ができません 笑われるような質問なのかどこを探しても解決できません。 よろしくご教授願います。 12行,16行　Vec.new(@x + other.x, @y + other.y) other., other.yの表記の意味が理解できません。 class定義が終了していないのに使用している 1class Vec 2attr_reader :x, :y 3def initialize(x=0, y=0) 4@x, @y = x, y 5end 6 7def inspect #表示用 8"(#{@x}, #{@y})" 9end 10 11def +(other) 12Vec.new(@x + other.x, @y + other.y) # x, y のそれぞれを足す 13end 14 15def -(other) 16Vec.new(@x - other.x, @y - other.y) # x, y のそれぞれを引く 17end 18end 19 20vec0 = Vec.new(3, 6) 21vec1 = Vec.new(1, 8) 22 23p vec0 24p vec1 25p vec0 + vec1
Ruby on Railsインストール(アップデート) RailsをCentOS4.4?にインターネット経由以外でのインストールする方法を知りたいです。 下記に条件を記載させて頂きますので、本当に申し訳ありませんが、 ご教授していただけますでしょうか？ 無知で申し訳ありませんがよろしくお願いします。 ■現状 　サーバOS CentOS4.4 　Ruby 1.6.x 　gem 0.9x?? 　rails 1.x 　mysql4.1 　sqlite3 ■条件 　・会社のサーバなので、インターネットが使用できない。 　※ＣＤやＵＳＢも無理です。 　　やり方としては、ソースを会社のメールアドレスに送り 　　自分の端末からFTPでサーバにアップロードします。 　　また、上長には許可は頂いています。 　・現状古いバージョンのRuby・RubyGems・Ruby on Railsは 　　インストールされていますが、アップデートよりは、 　　上書きインストールの方が望ましい。 　　※理解し易いため。 　　　初心者のためアップデートは難関かとm(--)m ■今回インストール(アップデート)したい物 　Ruby on Rails 2.x ----以下は、ダウンロード済み---- 　Ruby 1.8.7 　※こちらは、色々なサイトに記載されています参考にしています。 　RubyGems 　※これは、RubyForgeからダウンロード済み ■気になる点 　ほかにインストールしなければならないものってありますでしょうか？ 教えて君で申し訳ありませんが、よろしくお願いします。
requireでエラーが起きてしまう タイトルのとおり、requireの箇所でエラー(no such file to load)が起きてしまって先に進めない状態なので、どなたか解決策がわかるかたいらっしゃいましたら教えてください＞＜ 今、 method_area.rb -- def triangle(x, y) return (x * y / 2) end def square(x) return x**2 end -- main.rb -- require 'method_area.rb' puts(triangle(8, 24)) puts(square(15)) -- の2つのファイルを同じディレクトリに置いています。
ming/rubyのインストール ming/rubyのインストールができなくて困っています。。 どなたかわかる方がいましたら参考になるサイトなど教えていただけたらうれしいです。 OSはwindows vistaで、現在rubyのみインストールされています。
Rubyにて、ファイルコピーする際に指定したbyte毎にファイルをコピーしていく方法 いつもお世話になっております。 Rubyのコーディング方法で分からないことがあります。 大変申し訳ございませんが、ご教授のほどよろしくお願い致します。 【ご質問】 以下のファイルがあるとします。 ファイル名：test.log ファイルサイズ：2G 上記ファイルを500Mずつに分けてコピーしたい場合、 どのようにコーディングすればファイルを分けながらコピー出来るのでしょうか？ 例) 【コピー元ファイル】 ファイル名：test.log ファイルサイズ：2G 【コピー先のファイル】 ファイル名：test.log.1 ファイルサイズ：500M ファイル名：test.log.2 ファイルサイズ：500M ファイル名：test.log.3 ファイルサイズ：500M ファイル名：test.log.4 ファイルサイズ：500M ※コピー先のファイル名には、 　コピー元のファイル名＋「.」＋「1からの数字の連番」でファイル名を割り振りたいです。 以上です。 よろしくお願い致します。
Rubyの.soについて 拡張子が.soファイルがあるのですが、これはなんなのでしょうか。 また、Rubyのファイルは基本テキスト形式ですが、C++のプログラムで扱う場合、配布する際には、バイナリ形式にすると思うのですが、それはどうすればいいのでしょうか。（間違ってたらすいません） さらに、Ruby関係でおすすめの本がありましたら、教えて頂けると幸いです。ちなみにC++はある程度できます。 長文失礼しました。
プログラミング言語　rubyを用いて、 画像処理プログラミングを書こうとしていますが、以下の点が分かりません。 1・メモリの動的確保はどうするの？（C言語でいうmalloc) 2・ファイルから配列に展開するにはどうしたらいいの？ 以上が分かればわかるきがするのですが・・ 当方　C言語での画像処理プログラミングはそれなりに経験があるのですが rubyで実現できるのかわからなくて・・
2行読み込んで一行戻り、また2行読み込む はじめまして、現在、「2行読み込み、一行戻り、また2行読み込む」処理のものを作成しています。 具体的には、 A B C D E と５行に渡り記述されたファイルを上記の旨で表示させる場合、 A B B C C D D E としたいのですが、 filename = ARGV[0] ABCDE = [] file = open(filename) while f = file.gets do 　f.chomp! 　　g = file.gets 　　g.chomp! 　p f 　p g end file.close とすると出力は "A" "B" "C" "D" abcde.rb:9: private method `chomp!' called for nil:NilClass (NoMethodError) もちろん2行読み込んで、そのまま次の２行を読み込む記述のため上記のようになってしまいます。 まとめますと、 「一行戻るための記述がわからないので、それを実現するための記述を教えてほしい」 ということです。 rewindを使うと先頭まで戻ってしまうのでどうしたらいいのかさっぱりです。 わかりづらくて非常に申し訳ない、初歩的であろう質問ですがよろしくお願いします。 rubyは1.8.6を使っています。
Ruby(CRuby)におけるマルチスレッド処理が可能？ 今、マルチコアCPUが普及しています。 その恩恵を受け、処理を分割して複数のプロセッサーで同時に実行させたいのですが、 Rubyは、こういうような複数のスレッドの同時実行をサポートしているのでしょうか？
クローラーの設置の仕方を教えてください とりあえず下記のサイトのクローラーを動作させたいと考えています。 http://www.2mihi.com/2008/02/rubymechanize-hpric … 端末で、 ruby hoge.rb としますが、エラーもでず、何もおこりません。 ソースのどこを編集しないといけないのでしょうか？ 他に何かいるのでしょうか？ それか、いいのがあるなら、他のクローラーのサンプルソースでも構いません。（他の言語でもいいです） クローラーがどういうものなのか分かればいいので。 osはubuntuです。
rubyで文字列のreplaceの方法について いつもお世話になっております。 rubyで分からないことがあります。 ご存知の方がおられましたら、ご教授お願い致します。 【質問】 以下の文字列があるとします。 (文字列) <!-- Advertiser 'XXX', Include user in segment 'test--001' - DO NOT---ANY WAY --> <img src="XXXXXX" alt="test--001" width="1" height="1" /> <!-- End of segment tag --> 文字列の<!-- -->で囲まれた中でハイフンがある場合、ハイフンを-に変更したいです。 (但し、<!--と-->のハイフンは除きます) どのように記述すれば変更出来るのでしょうか？ 上記(文字列)ですと <!-- Advertiser 'XXX', Include user in segment 'test--001' - DO NOT---ANY WAY --> <img src="XXXXXX" alt="test--001" width="1" height="1" /> <!-- End of segment tag --> に変更したいです。 以上です。 よろしくお願い致します。
rubyの正規表現について質問です。 rubyを勉強中ですが、 正規表現について質問させてください。 以下のようなことをしたいのですが、どのような記述をすれば実現できるでしょうか？ (1)test → #test (2)test → test 「test」の場合は、「#」を加え、「#test」に置換したい 「test」の場合は、そのまま「test」としたい。 if を続ければ可能だとは思いますが、 一つの正規表現で(1)のケースだけを引っ掛けられればと思っています。 正規表現でANDが使えればよいのですが、使えないようですし。。。 お手数をおかけしますが、お力をよろしくお願いします。
ruby の File.exist? メソッドで大文字小文字を区別してファイルの存在検査を行ないたいのですがうまくいきません。 例えば、/etc というディレクトリは自分のマシンに存在するのですが、'/ETC' で検査しても存在すること（true）になります。これを '/ETC' で検査した場合は false にしたいということです。 ### 環境 - OS X 10.6.2 - ruby 1.8.7 ### 実行結果 $ ruby -e "p File.exist?('/etc')" #=> true $ ruby -e "p File.exist?('/ETC')" #=> true になってしまう。これを false と判定したい。 よろしくお願いいたします。
Ruby１．８を使って、パケットの解析を行ないたいと考えています。 RubyPcapを利用して、pcapデータを読み込んで、パケットのデータ（ペイロード）を表示するプログラムを作りたいのです。 ↓のサイトによると、送信先IPアドレスなど取得できるのですが、同じ要領でペイロードのデータを取得することはできないのでしょうか？ http://www.db.is.kyushu-u.ac.jp/rinkou/libpcap/r …
アルバイトの面接で見せるプログラムを作りたい。 Rubyのアルバイトがしたくて求人に応募したら、今までに作ったプログラムを見せてほしいとのこと。しかし、Ruby暦＝プログラミング暦で、しかもまだ勉強始めて数ヶ月なのでそんなすごいプログラムは作ったことがありません。 初心者用の本に載っているプログラムの丸写しとかはしたことがありますが、その程度では不十分な気がします。一応、基礎の初歩的なことは一通りできます。 なにか数日でできるプログラムで、アルバイト先の企業が欲しいと思ってくれるようなプログラムはないですか？プログラムのコードではなくて、どういった仕事をこなすプログラムかを教えてください。
Ruby on Railsの「Doragonfly」という画像pluginについて質問です。 画像サイズを固定にせずに扱えるというところに魅かれ使用を試みたのはいいものの アップロード時に画像を保存せずに表示する（プレビュー的な）やり方がわかりません。 保存後に表示するのは出来るのですが・・・。 一旦保存し、rollbackするといったやり方も考えたのですが、それだとファイルが作成されてしまいますし、ＤＢのidがインクリメントされるので気持ちが悪いです。 どなたか保存せずに一時的に表示させる方法をご存知の方がいましたら 教えてください。
Rubyの乱数に関して質問させてください。 1から30までの数字の中からランダムで一つを選ばせ 1の場合は email = "11111@yahoo.co.jp" password = "11111" 2の場合は email = "22222@yahoo.co.jp" password = "22222" 3の場合は email = "33333@yahoo.co.jp" password = "33333" 上記のようにしたいのですが、どのように記述したら良いでしょうか？ ご教授頂けると幸いです。 宜しくお願いいたします。
Ruby on rails　sqlite3のドライバ？のインストールがうまくいかない。 「rubyinstaller-1.8.6-p398.exe」をインストールして、gemのアップデート、「sqlite-3_6_23_1.zip」「sqlitedll-3_6_23_1.zip」をインストール？して、gemでsqlite３のドライバをインストールをすると以下のような文章がでてうまくいきません。（xp sp3） You've installed the binary version of sqlite3-ruby. It was built using SQLite3 version 3.6.23.1. It's recommended to use the exact same version to avoid potential issues. At the time of building this gem, the necessary DLL files where available in the following download: ttp://www.sqlite.org/sqlitedll-3_6_23_1.zip You can put the sqlite3.dll available in this package in your Ruby bin directory, for example C:\Ruby\bin ============================================================================= Successfully installed sqlite3-ruby-1.3.1-x86-mingw32 1 gem installed Installing ri documentation for sqlite3-ruby-1.3.1-x86-mingw32... Enclosing class/module 'mSqlite3' for class Statement not known No definition for libversion Installing RDoc documentation for sqlite3-ruby-1.3.1-x86-mingw32... Enclosing class/module 'mSqlite3' for class Statement not known No definition for libversion ドライバのバージョンを下げたりしてみてもうまくいきません。 rubyは勉強している書籍にあわせて１．８．６を使っています。 何が問題なのでしょうか？
Rubyでパケットの情報をDBに入れるプログラムを動かしております。 以下のサイトにあるプログラムを実行しました。 http://www.db.is.kyushu-u.ac.jp/rinkou/libpcap/r … エラーメッセージで、以下のように出力されました。 $ sudo ruby packet.rb drop table tcppackets... define table tcppackets... /var/lib/gems/1.8/gems/sqlite3-ruby-1.3.1/lib/sqlite3/database.rb:85:in `initialize': table tcppackets already exists (SQLite3::SQLException) from /var/lib/gems/1.8/gems/sqlite3-ruby-1.3.1/lib/sqlite3/database.rb:85:in `new' from /var/lib/gems/1.8/gems/sqlite3-ruby-1.3.1/lib/sqlite3/database.rb:85:in `prepare' from /var/lib/gems/1.8/gems/sqlite3-ruby-1.3.1/lib/sqlite3/database.rb:220:in `execute_batch' from packet.rb:51 どうしたら良いか教えて頂けないでしょうか。
現在、インストールされているrubyのバージョンを確認する方法を教えてください。 下記の件が解決しないので、CORESERVERにruby1.8.7を入れてみました。 ▽railsサンプルがレンタルサーバーで動作しません。どこを見ればよいで... - Ruby - 教えて！goo 　 http://oshiete.goo.ne.jp/qa/6103754.html ユーザ名@サーバ名:~/ror_app/adbook> ruby script/about About your application's environment Ruby version 1.8.5 (i686-linux) RubyGems version 1.3.5 Rack version 1.1 Rails version 2.3.8 Active Record version 2.3.8 Active Resource version 2.3.8 Action Mailer version 2.3.8 Active Support version 2.3.8 Application root /virtual/ユーザ名/ror_app/adbook Environment development Database adapter mysql Database schema version 20100811200136 で、新たなscaffordディレクトリを作成し、作業を進めようとしたところ、 また分からないことがでてきました。 !!! The bundled mysql.rb driver has been removed from Rails 2.2. Please install the mysql gem and try again: gem install mysql. と表示されたので、 gem install mysql(もしくは、gem install --remote mysql)と打ったのですが、 ERROR: Error installing mysql: mysql requires Ruby version >= 1.8.6 と表示されてしまいます。 しかし、 ruby -vと表示すると、 ruby 1.8.7 (2009-06-12 patchlevel 174) [i686-linux] と表示されているので、自分としては、1.8.6以上を入れているつもりなのですが…。 現在、インストールされているrubyのバージョンを確認するには、 ruby -vでは、駄目なのでしょうか？
Rubyで1ミリ秒のsleepできないのでしょうか？ sleep(0.01)で10ミリ秒まではsleepできているようなのですが、それ以下の値を設定しても 10ミリ秒のsleepになってしまいます。解決方法があればおしえてください
後処理を保証するブロック付きメソッドの例について。 後処理を保証するブロック付きメソッドの例として、以下のプログラムがありました。 def omit_brock1 if defined? yield puts "brock exist" else 以下略 ２行目のyieldについて質問です。 yieldってはじめからRubyにあったはずです。これをdefined?してもかならずtrueが返るのではないでしょうか？とするとif文使うのも無駄だと思うのですが、どうなんでしょう？ よろしくお願いします。
Ruby初心者です。 Rubyから違うファイルを実行する場合について教えてください。 例えば、test.batに echo off echo. SET /p INPUT="Input string =>" echo %INPUT% pause のように記述されており これをRubyから実行し、 入力もRubyからするにはどうしたら良いでしょうか？ つまり、Rubyからtest.batを実行し、自動で入力も行いたいです。 echoの内容もコマンドプロンプトから確認したいです。 また、RubyからBuildコマンドを実行したいと思います。 Buildは別プロセスで動いている状態になっていると思いますが、 Build中はRubyはどのような状態になるでしょうか？ RubyからBuildした場合、Build動作が重くなることを懸念しています 有識者の方、よろしくお願いします。
rubyでパケットキャプチャ出来るプログラムを実行したところ、以下のようなエラーメッセージが出力されました。 上位４つのwaraningとno suitable device foundのエラーを回避する策を教えて頂きたいです。 $ ruby packet.rb /usr/local/lib/site_ruby/1.8/i486-linux/pcap.so: warning: do not use Fixnums as Symbols /usr/local/lib/site_ruby/1.8/i486-linux/pcap.so: warning: do not use Fixnums as Symbols /usr/local/lib/site_ruby/1.8/i486-linux/pcap.so: warning: do not use Fixnums as Symbols /usr/local/lib/site_ruby/1.8/pcaplet.rb:41:in `lookupdev': no suitable device found (Pcap::PcapError) from /usr/local/lib/site_ruby/1.8/pcaplet.rb:41:in `initialize' from packet.rb:12:in `new' from packet.rb:12 プログラムは、以下のサイトにあるものを利用しています。 http://d.hatena.ne.jp/tullio/20080217/1203261760 #!/usr/local/bin/ruby require 'pcaplet' include Pcap class Time # tcpdump style format def to_s sprintf "%0.2d:%0.2d:%0.2d.%0.6d", hour, min, sec, tv_usec end end pcaplet = Pcaplet.new pcaplet.each_packet { |pkt| print "#{pkt.time} #{pkt}" if pkt.tcp? print " (#{pkt.tcp_data_len})" print " ack #{pkt.tcp_ack}" if pkt.tcp_ack? print " win #{pkt.tcp_win}" end if pkt.ip? print " (DF)" if pkt.ip_df? end print "\n" } pcaplet.close 以上、宜しくお願い致します。
RubyでWin32APIのCreateWindow 初めまして。RubyでWin32APIを使ってプログラミングをしようとしています。 RubyもWin32APIも勉強を始めて間もないのですが、RubyリファレンスマニュアルのWin32APIのページやグーグル検索などを利用し一通り調べて (test.rb) require 'Win32API' createwindow = Win32API.new('user32', 'CreateWindow', %w(l p l i i i i l l l p), 'l') createwindow.call(0, "HELLO", 0xc00000, 100, 100, 100, 100, 0, 0, 0, nil) としてみました。しかしエラーで、 test.rb:2:in `initialize': GetProcAddress: CreateWindow or CreateWindo wA (RuntimeError) となりました。 rubyのバージョンは ruby 1.8.6 です。 コードのどこが間違っているのか、エラーの意味、参考になるwebサイト(rubyでWin32APIのCGIを扱っているサイト)を教えていただきたいです。 よろしくお願いします。
Ruby1.9で全角文字を半角文字にうまく変換できません。 英数字までは以下のロジックでうまく出来たのですが、カナが正しく変換されません。 何か良い知恵をどうかご教示のほどお願いいたします。 ※★→←★の間の文字は半角カナです（ブラウザ上全角カナとなってしまうため、便宜上補足しました）。 moji = "イあ１Ａａ" moji.tr('ａ-ｚＡ-Ｚ０-９ア-ン', 'a-zA-Z0-9★→ア-ン←★') 結果：★→ウ←★あ1Aa　何故か半角のイではなく半角のウとなってしまう。 　　　※アの場合のみ正しく半角のアに変換される。
Meadow3について Meadow3をインストールしたのですが画面が白いんです。 これって失敗ですよね。 アンインストールしたくてもやり方がわかりません。 「i.$MEADOW の下のディレクトリの削除 　ii.レジストリの\HKEY_LOCAL_MACHINE\SOFTWARE\GNU\Meadowを削除。ちなみに、レジストリを削　除する方法はCrtl+Rでファイル名を指定して実行、「regedit」と入力するとレジストリエディタが　起動する。」 こんな説明があっても意味がわからないんです。 オレンジ色の画面が正しいらしいんですが、私はそれを知らずに使っていました。 白い画面のMeadowにプログラムを打ち込んでコマンドプロンプトで実行してたんです。 Rubyですが普通に動いてくれました。 夏休みにRubyとMeadowの使い方に慣れるための宿題が出て、 自分のパソコンに両方インストールしたんですが、 先生は学校の実習室でやる前提で資料を書かれているので、 インストールの方法は自分で調べました。 だから不十分な面があったのかもしれません。 でもどうしたらいいのかわからないいんです。 どうすれば正しいオレンジ色の画面のMeadowになるのか、どなたか教えていただけませんか？ 乱文でごめんなさい。
rubyでのproc http://d.hatena.ne.jp/shunsuk/20090101/1230816826 ここのサイトで解説されていることなんですけど， 「同じblockを何度も使いたいときがあります。そんなときに再利用するためのコードがProcです。blockとProcの唯一の違いは、blockは保存できないということです。Procについて見てみましょう。」 とあるのですが，なにをもってblockは保存できないといってるのでしょうか？ 「lambdaはメソッドと同じように振る舞いますから、returnを使うことができます。この意味の違いは、下の例に現れます。」 の下にサンプルプログラムがあると思いますが， puts generic_return(Proc.new { |x, y| x + 2; y + 2 }) puts generic_return(Proc.new { |x, y| [x + 2, y + 2] }) この２行ではエラー処理が行われず，なんらかの出力がされています， これはなぜでしょうか？メソッドの中にreturnがある限りエラー処理が起こると思っているのですが・・・ あと，あまり関係ない質問になるかもしれませんが array.iterate!(method(:square)) このような記述のとき，squareは関数名ということはわかるのですが， :（コロン）これはなにを指すのでしょうか？ よろしくおねがいします．
/(.)(\d\d)+(.)/ =~ "123456"のとき、　p $2とすると、"45"となるのはなぜですか？ p $2 #=>23　となると思っていました。 そして、いったい23はどうすれば後方参照できるのですか？
基本プログラミングのrubyの課題を作ってもなかなか動きません。これをどうやったら動くようになるでしょうか？？何がダメなんでしょう？教えてください・・！（>_<；）） 【問題】 問題1-3 についてはプログラムcreate data.rbを一度実行して作られるファイルmarks2010 を元に取り組むこと．ただし，create data.rb は実行する毎に異なるデータを出力するので，課題で作成する提出ファイル(results2010 等) 作成では， 同一のmarks2010 を用いること．また，使用したmarks2010 を提出すること． 1. ファイルmarks2010 は1000 行からなるデータであり，各行は次のように，学生氏名，10 回分 の試験成績が記されている： "西郷あかり": 50, 33, 67, 64, 47, 27, 42, 51: 45 ただし，受験回数が10 回に満たない者もある．また，最終試験を受けた場合，その成績は行 の最後にコロン「:」の後に記載してある． このファイルから下の基準で各学生の最終成績(点数) を求め，全員の最終成績をファイル (results2010 1) に保存するプログラムを書きなさい(prog1.rb)． >ruby prog1.rb marks2010 を実行すると，ファイルresults2010 1 が作成されるようにする．ただし，結果のファイル は，各行一人の氏名と成績を次のように記述したものとする： "西郷あかり": 47.3 ※成績は小数点以下第一位まで．それ以下は四捨五入. 成績基準: 全試験(最終試験も含む) の平均点 また，60.0 点以上を合格として，合格者の氏名と本人の最終成績が記されたファイルpassed2010 1 を作成しなさい． 2. 上と同じファイルmarks2010 に対して，次の基準を用いて前問と同様のことを行いなさい．た だし，提出ファイル名は，(prog2.rb), (results2010 2) および(passed2010 2) ? 成績基準：欠席は2 回まで認め，それ以上の欠席の試験は0 点とした平均点※ ? 60 点以上が合格 ※つまり，試験を３回欠席した場合，全10 回の試験のうち，２回の欠席が認められ，残り１ 回の欠席は得点0 と計算される．したがって，試験は８回受けたこととして計算され，実際に 受験した７回分の得点と，実際には受けていない１回分の成績0 点の合計点を8 で割った平均 点が最終成績となる． 【私の作ったプログラム】 infile=open("marks2010","r") outfile=open("results2010 1","w") while data=file.gets split(/[:,]/) print data,\n end arry=file.gets s=0 arry.each{ |i| s=s+i } puts s.to_f/arry.size end infile=close outfile=close ちゃんと名前と平均が出ると思ったんですけど・・・・（T_T）泣
RubyとMeadow(Emacs)について 自分のパソコンにRubyとMeadowをインストールしたんですが、 Meadowでソースプログラムを作ってからコマンドプロンプトでそれを実行しようとすると ’ruby’は、内部コマンドまたは外部コマンド、 操作可能なプログラムまたはバッチ　ファイルとして認識されていません。 と出てきてしまいます。 どうすれば実行できるのでしょうか？ 教えていただきたいです。 ちなみにこれは夏休みの宿題で、 プリントに書かれていたとおりにやりました。 間違いがないか自分でなんども確認しましたが、 たぶん書いてあることは間違っていないと思います。 どのようにやったかというと、 Meadowでhello.rbというファイルに print("Hello, Ruby World !\n") と打ち込み、c:\progIに保存。 コマンドプロンプトを開いて progIに移動し、 ruby hello.rb　→[Enter] です。
Ruby1.9で日付と時刻を合成したい。 日付型で日付と時刻を合成して、日付型の日付時刻を合成したいのですが、 うまく行きません。 ＜やりたいこと（例）＞ 日付：2001/01/01 時刻：01：02：03 合成して、2001/01/01　01：02：03としたい。 ※いずれも日付型（文字型ではありません） ＜試行したこと＞ 日付：ddd = Date.today 時刻：hhh = Time.now date = ddd + hhh ここでundefined method '+'となります。 また、時刻だけを定義出来るクラスはないのでしょうか。 Timeでは時刻だけと思ったのですが、日付＋時刻のようです。 こちらもアドバイス頂ければ幸いです。 どうか宜しくお願いいたします。
Ruby1.9での日付操作に関して。 次の２つについて質問させてください。どうぞ宜しくお願い致します。 （１）文字列を日時に変換する Time.parse("Tue Apr 10 04:54:42 JST 1970")は正常に変換されますが、 Time.parse("Tue Apr 10 04:54:42 JST 1969")はtime out of range(ArgumentError) となりエラーとなります。 何となく意味は分かるのですが、この範囲を拡張することが出来ますでしょうか。 （２）通算日の数値から日付を求める 上記の（１）が解決していることを前提として、基準日付=1900年1月1日0時00分00秒からの 経過を表わす数値（=1日を1.0とする）から、日付を求めたいのですが、ロジックが思いあたりません。 何か良い方法があればご教示頂けませんでしょうか。 ＜例題＞ 20323.27430556の場合は、"1955-08-22 06:35:00"としたい。 実は、上記の例題の逆は組んだのですが、その逆（この例題）がうまく作れません。 どうか宜しくお願い致します。
Ruby1.9で文字列の置換がうまくいきません。 以下の処理を実行すると、gsubのところでEncooding::CommpatibillityError とエラーが発生してうまく置換が出来ません。 何が原因でしょうか。あるいはもっと簡単な方法で置換する方法がありましたら ご教示のほどお願いいたします。 ＜仕様＞ 半角、全角に関係なく指定文字で置換する。 ※大文字部分は実際は全角文字です。 moji1 = 1abc56abcＡＢＣ" moji2 = "abc" moji3 = "ＣＢＡ" ⇒正しい置換結果は、"1ＣＢＡ56ＣＢＡＡＢＣ" #半角→全角 空白含 moji2 = moji2.tr('a-zA-Z0-9 - ', 'ａ-ｚＡ-Ｚ０-９　-　') moji2 = NKF::nkf( '-SsXm0', moji2 ) data = moji1.gsub(moji2,moji3) 　　　　　　↑↑↑ここで上記のエラー発生する。 どうか宜しくお願いいたします。
Ruby（1.9）で2進表示として文字型に変更したい。 次のような2進数表記のまま、文字型に変更する方法はありますでしょうか。 0b0001⇒"0b0001" 当然かと思いますが、0b0001をto_sすると"1"となりました。 どうか宜しくお願いいたします。
rubyに関する質問です。 require 'open-uri' open("uri") do |f| 5.times do print f.gets end end これを実行すると <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <title>繧ェ繝悶ず繧ァ繧ッ繝域欠蜷代せ繧ッ繝ェ繝励ヨ險?隱・Ruby</title> Complete(0) このように日本語のところだけ文字化けしてしまうのですが、どのようにすれば文字化けがなおるのでしょうか？
Ruby1.9での文字列操作について。 今までRuby1.8を使用していましたが、Ruby1.9に変えてから、次の4種類の問題が出てきました。 （※Ruby1.9に変えてから、#encoding: shift_jisを定義しております） どれか1種類でも結構ですので、Ruby1.9での対策、代替の処理について教えてください。 ＜問題１＞ ■文字列を指定のバイト位置まで削除する □現在（Ruby1.8）のコード moji = "1あアあアイ234565789" moji[4,14] = "" →1.8では、"1あア"となりますが、1.9では、"1あアあ"となります。 ＜問題２＞ ■文字列の中から指定文字が見つかったバイト位置の算出 □現在（Ruby1.8）のコード n = "あいうえお".index("う") →1.8では、n=4となりますが、1.9では、n=2となります。 ＜問題３＞ ■指定した年月日の存在チェック □現在（Ruby1.8）のコード y = 1900 m = 3 d = 10 if　Date.exist?(y,m,d) p "test# end →1.8では、trueとなりますが、1.9では実行時にNoMethoodErrorとなります。 ＜問題４＞ ■半角英数字→全角英数字変換 □現在（Ruby1.8）のコード sss = moji.tr('a-zA-Z0-9', 'ａ-ｚＡ-Ｚ０-９') →1.9では実行時にエラーメッセージが出力されます（略） 色々と書きましたが、どうかお助けください。
Ｒｕｂｙ言語のアルゴリズムを教えてください。 （例） "1あいアう234565789" 上記のような半角、全角文字が混在した文字列において、例えば3文字目の「い」から2文字分を 切り出したいのですが（→"いア"）、私の知識ではどうにも出来ません。 つまり、「3文字目」、「2文字分切り出す」という条件で、 任意の文字列を操作するというものです。 どうぞ、良い知恵をお願いいたします。
Ruby言語にて、全角カナ⇔半角カナ変換がうまくいかずで困っております。 以下のようにプログラミングをしてます。 結果が、思った通りではないのですが、何が原因でしょうか。 ※★→←★部分で囲んだ部分は半角文字です（ブラウザ上、半角文字が全角に変換されているようなので、 　適宜そのような表記を入れました。 ●半角→全角変換 sss = "★→アイウエオ←★".tr('★→ア-ン←★', 'ア-ン') p sss ⇒★→アウオキケ←★ ●全角→半角 sss = "アイウエオ".tr('ア-ン', '★→ア-ン←★') p sss ⇒ア★→イ←★イ★→ウ←★ウ どうか原因を教えてください。
エラー文の意味 ご質問させていただきます。 Macからターミナルを使ってRubyを動かしているのですが、変数を含んだファイルを実行しようとすると、エラーが出てしまいます。 例えば、 a = 3 print "私はリンゴを", a, "個持っています。" というファイルをapple.rbという名前で保存し、ターミナルから ruby apple.rb で実行すると、以下のようなエラー文が出ます。 apple.rb:1: syntax error, unexpected tIDENTIFIER, expecting $end このエラーはどういう意味なのでしょうか？ よろしくお願いします。
selectの意味 リファレンスマニュアルと本のselectの説明がわかりません。 説明の文はなんとかわかるのですが、引数のとり方が「reads[, writes[, excepts[, timeout]]]」となっていて、これは 3 要素の配列を返しているように見えないので、混乱します。「reads[, writes[], excepts[], timeout[]」という書き方なら3 要素の配列を返していると納得できるのですが、ここで返しているのはreadsの中にwritesがあり、更にその中にtimeoutがある配列を返しているんでしょうか？ 手元の本に「selectはリクエストを受信すると、リクエストを検出したソケットだけをリストに返します。」とあるのですが、ここで言うソケットとは入力、出力、例外を指していて、リストというのはつまり配列のことなんでしょうか？
Rubyでプログラミングを習っています。 入力した内容を配列になおす方法をおしえてください。
いつもお世話になっております。 rubyで分からないことがあります。 ご存知の方がおられましたら、ご教授お願い致します。 【質問】 以下の文字列があるとします。 (文字列) <!-- Advertiser 'XXX', Include user in segment 'test' - AAA -->\n<img src=\"BBB\" width=\"1\" height=\"1\" />\n<!-- End of segment tag -->\n<!-- Advertiser 'XXX', Exclude user from segment 'test' - AAA -->\n<img src=\"CCC\" width=\"1\" height=\"1\" />\n<!-- End of segment tag --> この文字列を以下の様に変数1、変数2に入れたいのですが、 どのようにプログラムを記述すればよいでしょうか？ (変数1の内容) <!-- Advertiser 'XXX', Include user in segment 'test' - AAA -->\n<img src=\"BBB\" width=\"1\" height=\"1\" />\n<!-- End of segment tag --> (変数2の内容) <!-- Advertiser 'XXX', Exclude user from segment 'test' - AAA -->\n<img src=\"CCC\" width=\"1\" height=\"1\" />\n<!-- End of segment tag -->
Ruby on Railsで作られたアプリのたくさんあるサイトを教えて下さい。 Ruby on Railsの勉強をしているのですが、とりあえず超基本は覚えたので、Railsで作られたアプリ（サイト） をいろいろ読んでみて勉強したいと思います。 以前にRailsのアプリがたくさん載っているサイトをどっかで見つけたのですが、忘れてしまいました。 大規模なものだけでなく、数ページで出来ているような小さなアプリもあるようなサイトでした。 何かご存知のサイトがあればぜひ教えて下さい。
エクセルのデータをTAB区切りテキストに出力 １．エクセルのデータをTAB区切りテキストに出力して ２．そのテキストを入力としてrubyでデータ加工 という作業があります。現在１を手動で行っておりますが、ファイルが多いためこの操作をファイル名とシート名を指定してrubyから操作できればと考えております。 できれば追加でライブラリをインストールすることなく実現できればありがたいのですが、簡単な方法がございましたらご教示ください。 環境は、Win XP、Office 2003、ruby 1.9.1です。 最終的にはエクセルファイルから直接データを取得できるようにしたいのですが、当面は上記の方法で凌ぎたいと考えております。
Ruby on Rails 「attr_accessor」 の使い方について こんにちは。 現在、Ruby on Railsで登録画面を作成しているのですが、attr_accessorで定義した項目に対して、validationのチェックを行うと、問題が起きてしまいました。 attr_accessorで定義した項目は、DB登録の対象ではないのですが、lengthのチェック等を行う必要があり、validates_length_of等を使って入力チェックを行っています。 問題になったのは、入力があったときだけチェックをかけたいのに、入力がなくてもチェックがかかってしまうという状態になってしまうことです。 「:if => 項目?」を書いてみると、「undefined method」のエラーがでてしまいます。 どなたか対応策の分かる方がおられましたらご教授いただけないでしょうか？ 下記に実際の問題箇所のモデルクラスのソースを書いておきます。 　class User < ActiveRecord::Base 　　　attr_accessor :NEW_USER_PW　← 追加したアクセサ 　　　# 追加したアクセサに対するチェック 　　　validates_length_of :NEW_USER_PW, :minimum=>4, :message=>"は%d桁以上を設定してくださ　　　　　　　　　　　　 　　　　い。", :on => :update, :if => :NEW_USER_PW? 　end 上記のチェック内の「:if => :NEW_USER_PW?」で落ちてしまいます。 入力がないのにチェックに引っかかるとまずいので、入力がないときだけ上記チェックを行えれば良いのですが・・・。 どうぞ宜しくお願い致します。
rubyの文法について質問です。 aaa = `diff -q bbb ccc` のような形でdiffコマンドの実行結果をaaaに格納したいのですが bbb及びcccを任意に入力したく、一度getsメソッドでbbb,cccそれぞれに文字列を代入したのですが、それをバッククォーテーション内で使用できず困っています。 なにか解決策がありましたらご教授いただけるとありがたいです。 よろしくお願いします。
現在、Ubuntu9.04 + Ruby 1.8.7 の環境でプログラムの勉強をしています。 エディタには Geany を使用しているのですが、このエディタでRubyのソースを デバッグすることはできないのでしょうか？ できるとしたら、どうやって組み込めばよいか教えてください。 よろしくお願いいたします。
サロゲートペアの文字コード→文字変換 Windows上でRubyを使って文字コードの書かれたファイルを読み込んで文字を出力しようとしています。 サロゲートペアの文字コードを文字に変換するにはどうしたらいいでしょうか？ たとえば上位サロゲートがa、下位サロゲートがbであるとき、JavaScriptでは次のようにすれば文字が得られるようです。 var s; s = String.fromCharCode(a,b); alert(s); （参考：http://codezine.jp/article/detail/1592） これをRubyでやろうとしていていろいろ調べてみたのですが、探し方が悪いのかわかりません。 どう書けばよいのか教えてください。 なお、WinsowsはXPです。ファイルに出力して正しく出力されているかどうかを確認しています。 よろしくお願いします。
rubyの正規表現で"["を使いたいのですが、正しく実行できません #! ruby -Ks a ="test[test" b ="test[" if /#{b}/ =~ a print "hit" end エラー内容は test.rb:4: invalid regular expression; '[' can't be the last character ie. can't start range at the end of pattern: /test[/ (RegexpError) "\["と文字を入力することで解決するかと思いましたが上手くいきませんでした。 rubyのバージョンは1.8.2です。宜しくお願いいたします。
rubyでcgiのセッションを利用したいと考えています。サンプルプログラムをまるまるコピーさせてもらって試したところ全く動きません（リロードするたびにカウントが増えるはずですが常に0）。そもそも何も保存されていないようです。しかし特にエラーは出ていません。以下のサンプルプログラムのページにあるものはきちんと動作しています。 http://d.hatena.ne.jp/unageanu/20080607 http://unageanu.sakura.ne.jp/blog-samples/080607 … perlのサンプルを試してみたところきちんと動いたのでサーバ設定の問題ではないと思っています。rubyでセッションを使うために事前準備等が必要なのでしょうか？ちなみにrubyのバージョンは1.8.7です。
Rubyでテキスト内容を別のテキストに一度に出力したいのですが、どのようにすればよいのでしょうか。 rubyはさっきはじめたところです。 一通り検索しましたが、やり方がヒットしませんでした。 a.txtの内容: aaaaa bbbbb ccccc ... を、ファイルコピーではなくoutput.txtに出力したいのですが、 a = open("a.txt") o = open("output.txt",w) ??? a.close o.close で、???の部分にどのような処理を書けばよいのでしょうか。 putsやwriteで書いてみたのですが、(o.write a) #<File:0x28a4450> と出力され、（ファイルオブジェクトのアドレス？）、a.txtの内容が出力出来ませんでした。 a.xxx のようにするのかな、と予想しますが、方法は問いませんので、ご教示いただけないでしょうか。
define_singleton_methodについて 1.9.1p378を使用しています。 メタプログラミングに興味があって、 Classに動的に生成したmethodを追加する方法を調べてみると 色々な教科書にdefine_methodを使う例が書いてあるのを見つけました。 しかし、実際にプログラムしてみると"undefined method"になってしまいます。 Class.methods.grep /define/ してみると、"define_singleton_method"というものがあり、 define_methodの代わりに使ってみたら一応期待通りに動作しました。 googleで調べてみてもdefine_singleton_methodについて解説が見つけられませんでした。 1.9系になって名前が変わったのでしょうか？ それとも似て非なるものなのでしょうか？ 詳しい方、教えてください。＜(_ _)＞
rubyでScalaのようにコールバックを変数として定義するには？ 最近Scalaの勉強を始めました。自分の一番好きな言語はrubyなので、比較しながら勉強してます。 参考書によると、関数をオブジェクトとして扱えるのがScalaの特徴との説明がありました。例えば、以下のような例なのですが、（行頭スペースは全角） class Kuku(a:Int,b:Int){ 　def calc(func:(Int,Int)=>String):String={ 　　return func(a,b)+a*b 　} } val f1=(a:Int,b:Int)=>a+"*"+b+"=" println(new Kuku(3,5).calc(f1)) これをrubyで書くと、（行頭スペースは全角） class Kuku 　def initialize(x,y) 　　@x=x 　　@y=y 　end 　def calc 　　yield(@x,@y)+(@x*@y).to_s 　end end puts Kuku.new(3,5).calc{|a,b| a.to_s+'*'+b.to_s+'='} とまでは書けたのですが、コールバック（ブロックパラメータの部分）、上記例だと |a,b| a.to_s+'*'+b.to_s+'='　の部分 を変数として定義（Scalaの例のf1として定義するところ）する方法を知りません。 このように関数を変数として定義する事ってrubyではできないと考えるのですが、そういった認識で間違いないでしょうか？ ご指導の程、よろしくお願いいたします。
消えたコロン 以下のプログラムを実行すると、「ruby」と出力されます。なぜ「：」が表示されないのか、納得できません。どなたか、理由を解説できる方はいらっしゃいませんでしょうか？なるべく簡単な言葉でお願いします。 def func(x) puts(x[:name]) end func(:date =>Time.now, :name => :ruby, :version => 1.9)
rubyでnums.each_char()の意味を探したい 参考書で、nums.each_char()の意味を探したいのですが、どうすればいいのでしょうか？普通にリファレンスを見ると、each_char()の別のクラスでの説明は見つかるのですが、numsクラスの説明がありませんでした。このような時、どうすれば解決できますでしょうか？このメソッドの意味と探す方法を教えてください。 当方初心者なので、簡単な言葉で説明してくださると助かります。 よろしくおねがいします。
twitteのソースでエラーが出てしまう件 http://oshiete.goo.ne.jp/qa/5844244.html で、皆さんに教えていただいたお陰で、 twitterをインストールする事が出来ました。 ありがとうございます。 早速、以下のソースを試してみました。 ファイル名「1.rb」 require 'rubygems' require 'twitter' httpauth = Twitter::HTTPAuth.new( ユーザー名 , パスワード ) o_twit = Twitter::Base.new( httpauth ) ところが、 H:\Program Files\Ruby-1.9.1\bin>ruby 1.rb と、実行すると、 1.rb:2:in `require': no such file to load -- twitter -v 0.7.0 (LoadError) from 1.rb:2:in `<main>' というエラーが出ます。 ちなみに、 H:\Program Files\Ruby-1.9.1\bin>gem 1.rb と、実行すると、 ERROR: While executing gem ... (RuntimeError) Unknown command 1.rb というエラーが出て、実行できません。 これは、twitterがインストールされていないのでしょうか？ それともソースがおかしいのでしょうか？
Rubyで書かれたプログラムに、WinAPIを組み込みたいと思っています。 組み込む内容は、 　「とある実行ファイル」に、割り当てられているCPUの数を1つにする事で、 APIに関しては、 -------------------------------------------------------- DWORD SetThreadIdealProcessor( HANDLE hThread, // スレッドのハンドル DWORD dwIdealProcessor // 理想的なプロセッサ番号 ); -------------------------------------------------------- これを組み込めば良いという事がわかりました。 しかし、分からない点が2箇所ありまして、 　・「スレッドのハンドル」 　・Rubyプログラムへの組み込み方 です。 どなたか、お分かりの方がいらっしゃいましたら、 ご教示お願いいたします。
ruby on railsのscaffoldで配列を定義するには rails2.3での質問です。 通常、scaffoldで >ruby script/generate migration TestData name:string id:integer のようにデータ構造を指定すると思うのですが、この時に配列を定義するには どうしたら良いのでしょうか？ 通常の（Ｃ言語のような）配列でもハッシュでも構いません。 よろしくお願いいたします。
Rubyの入門書について Rubyの勉強を始めて２週間、いま、ある本でつまずいています。今使っている本は「Ruby２　さまざまなデータとプログラミング」という本を使っているのですが、この本の一巻はまだわかりやすかったのですが、この本は急に説明が投げやりな感じがします。メソッドの説明で「自分で調べてください」だの、問題の解説がほとんどないなど、非常に不親切な感じがします。３日かけても１ページ進まないことなどざらで、自分にはこの本は早かったんだろうかと思い始めました。一方で、ここで逃げてしまってはいけないという風にも思います。ちなみに、私のRubyに関する知識は今使ってる本と、その一巻だけです。 そこで、質問です。特に「たのしいRuby」をやった時点でプログラム素人だった方に聞きたいのですが、「たのしいRuby」を一通りやるのにどのくらいの時間がかかりましたか？ また、「Ruby２さまざまなデータとプログラミング」をもっている方、この本は本当に初心者向けなんでしょうか？ 最後にこの質問を見てくれた皆様に質問です。短かいにもかかわらずわからないプログラムを見て、数日も考え続けるのは時間の無駄でしょうか？それともみんな初めはこんなもんなんでしょうか？
ギャスケット作成。修正の解説をお願いします。 入門書の問題で、二次元配列を使ってパスカルの三角形を作り、そこからシェルピンスキーのギャスケットを作りたいと思い、以下のプログラムを書きました。 ピクセルの指定の部分は省略します。 （↓パスカルの三角形の部分） pas = Array.new(HEIGHT) {|i| Array.new(WIDTH, 0)} pas[0][WIDTH / 2] = 1 for i in (1..HEIGHT - 1) for j in (1..WIDTH - 2) pas[i][j] = pas[i - 1][j - 1] + pas[i - 1][j + 1] end end で、２行目のpas[0][WIDTH / 2] = 1の、「WIDTH / 2」がまずかったらしく、パスカルの三角形の左下と右下が残念な感じになってしまいます。左下はすっぽ抜けていますし、右下には必要ないところで三角形が入ってきています。何でこんなことになるんでしょうか？簡単な言葉で説明してくださると助かります。 答えを見ると、「WIDTH / 2」を「WIDTH」に、「WIDTH」を「WIDTH*2」にかえてうまく出来てるんですが、なんでそうなるのっていう感じです。 私が持っている入門書の解説には、「加えるべき数字が利用できないことが原因です」とだけしか解説してません。 ここからはあまり関係ないと思うのですが ビットマップファイル作成の部分です。 File.open("gasket.bmp", "wb") do |file| file.write(["BM", HEADERS_LEN + WIDTH * HEIGHT, 0, HEADERS_LEN].pack(BITMAPFILEHEADER)) file.write([INFOHEADER_LEN, WIDTH, HEIGHT, 1, 8, 0, 0, 0, 0, COLOR_USED, COLOR_USED].pack(BITMAPINFOHEADER)) file.write("\xff\xff\xff\0") file.write("\0\0\0\0") (HEIGHT - 1).downto(0) do |y| 0.upto(WIDTH - 1) do |x| if pas[y][x] % 2 == 0 file.write("\0") else file.write("\x01") end end end end uptoの前の部分が０になっていますが、正解例は３２０になっています。ちなみに、ピクセル指定の部分で、WIDTHは６４０になっています。これもなんだかよくわかりません。 私は、一行目で配列のすべてにゼロが入っているから、「加えるべき数字」である数はすべての配列に入っていて、 Nilになるところはないと思うのです。 グーグル先生には聞きましたが、わかりませんでした。一言でもかまいませんので、どうか、よろしくお願いします。
Rubyを使用してcsvファイルを処理しているのですが、どうしてもできない事があり質問させていただきました。 下記のようにCSVファイルを処理したいのですが教えてください。 処理前CSVファイル内容:"abc",111,bbb,"ccc","123" 処理後CSVファイル内容:"abc",111,bbb,"xxx","321" 普通にCSVparserを用いて処理すると下記のようダブルクォーテーションが消えてしまいます。 処理後CSVファイル内容:abc,111,bbb,xxx,321 ご教授お願い致します。
Classの中のClass定義について 主にWindows環境でrubyを使用しているライトユーザーです。 ネットでソースを拝見していると、Class定義の中に更にClass定義がされているプログラムをみることがあります。以下のような感じですね。 Class Foo 　Class Bar 　…… 　end …… end このようにClass定義を他のClass定義の中に書くのは、どのような理由によるのでしょうか？ 素朴な疑問です、ご教示いただければ嬉しいです。
rubygemsとruby twitter gem　ライブラリーを読み込もうとすると エラーになってしまいます。 －－－－－－ require 'rubygems' require 'twitter' エラーメッセージ H:\Program Files\Ruby-1.9.1\bin>gem ruby 1.rb ERROR: While executing gem ... (RuntimeError) Unknown command ruby H:\Program Files\Ruby-1.9.1\bin> －－－－－－－－－－－－－－－－－－－ Ｗｉｎｘｐです。 ご指導のほどお願いします。
ruby1.9からtwitterライブラリをインストールするとエラーになってしまいます。 環境はＷｉｎｘｐです。 H:\Program Files\Ruby-1.9.1\bin>gem install twitter と、すると、以下のエラーメッセージが・・・。 Building native extensions. This could take a while... ERROR: Error installing twitter: ERROR: Failed to build gem native extension. "H:/Program Files/Ruby-1.9.1/bin/ruby.exe" extconf.rb install twitter creating Makefile nmake 'nmake' は、内部コマンドまたは外部コマンド、 操作可能なプログラムまたはバッチ ファイルとして認識されていません。 Gem files will remain installed in H:/Program Files/Ruby-1.9.1/lib/ruby/gems/1.9 .1/gems/yajl-ruby-0.7.5 for inspection. Results logged to H:/Program Files/Ruby-1.9.1/lib/ruby/gems/1.9.1/gems/yajl-ruby -0.7.5/ext/gem_make.out －－－－－－－－－－－－－－－－－－－ ちなみに、 H:\Program Files\Ruby-1.9.1\bin>gem install twitter4r とすると、インストールは出来ます。 ただ、requireでtwitterを読み込もうとすると 「msvcrt-ruby18.dllがありません」 と言うエラーになってしまいます。 助けていただければ幸いです。
こんばんは、宜しくお願いします。 rubyの超初心者で、「プログラミング入門-Rubyを使って-」のサイトで勉強を始めたのですが、 下記のurlのページ中の http://www.ie.u-ryukyu.ac.jp/~kono/software/s04/ … ループの項目 「この最初の行をなくすにはどう変えたら良いでしょうか?」という質問が解けません。 超初心者ですみません。 宜しくお願いいたします。
Rails コンボボックスの値の保持について(select_tag,collection_select) こんにちは。 Ruby on Railsで簡単な一覧検索画面を作成中の者です。 検索時の検索条件にコンボボックスを使用しており、検索後にコンボボックスの値を保持したいのですが、どうしてもできません。 どなたかお分かりの方がおられましたらご教授いただけないでしょうか。 下記、作成中のソースです。 Viewの検索条件部 <%- form_tag({:action => "search"},{:method=> "GET"}) do -%> <th class="U" align="left" width="10%"><label for="userNm">ユーザー名</label></th> <td width="90%"><%= text_field_tag :userNm, @userNm %></td> 　<th class="U" align="left" width="10%"><label for="authCd">社員権限</label></th> <td width="90%"> 　<%= collection_select(:auth, :authCd, Auth.find(:all, :order => "AUTH_CD"), :id, :AUTH_NM, :include_blank => true) %> 　<td align="center"><%= submit_tag '検索' %></td> Controllerクラス： def search #画面パラメータから検索条件を作成 c = Condition.new # ユーザー名 userNm = "" if params[:userNm] userNm = params[:userNm] c.and "USER_NM", "LIKE", "%#{userNm}%" end # コンボボックスの値を取得 if params[:auth] && !params[:auth]["authCd"].blank? c.and "AUTH_CD", params[:auth]["authCd"] end # 検索処理 @users = User.paginate(:order => "USER_ID asc", :per_page => 5, :page => params[:page], :conditions => c.where) # 検索条件保持 @userNm = params[:userNm] # コンボボックスの値が保持できない if params[:auth] @auth_authCd = params[:auth]["authCd"] end respond_to do |format| format.html # index.html.erb format.xml { render :xml => @users } end end 見づらくて申し訳ありませんが、ざっと上記のようになっています。 もう1つの検索条件であるユーザー名(userNm)は保持できるのですが、コンボボックス(社員権限)の値が保持できません。 select_tagや、selectも使ってみたのですが、どちらも同じ結果でした。 コンボボックスの条件は、Authモデルから値を読込み、一番上は空白にする。というものです。 どのように記述すれば保持できるのか色々調べてみたのですが、結局分からず仕舞いでした。。 どうぞ宜しくお願い致します。
Rubyのプログラミングをする環境をUSBメモリ上に整えることはできるでしょうか。 高校の課題研究でRubyでのゲーム制作をしようと思っているのですが、 学校のパソコンにActiveScriptRubyを入れられるか分からないので、 USBメモリにインストールしたいのですが、 初めてActiveScriptRubyをパソコンにインストールしたとき、 正常に動作せず、調べてみるとVistaの場合はCドライブ直下にインストールするとのことでした。 なのでただUSBメモリに入れた場合正しく動作しないと思うのですが、 どうすればいいでしょうか。 教材として「Rubyではじめるゲームプログラミング」という本を使いたいので、 ActiveScriptRuby、MyGame、Ruby/SDLというのをインストールしなければいけないみたいです。 Rubyどころかプログラミングすらまともにできない初心者なので、 もしかしたら上の質問でおかしいところがあるかもしれませんが、 教えていただけると助かります。 家と学校のパソコンはどちらもWindowsVistaです。 USBメモリは4GBです。 できれば学校のパソコンにはなにも入れないようにしたいと思っています。 また、上の条件では無理がある場合は代用品などで補うことができれば、 それでも大丈夫だと思います。 最終目標としてはゲームが作れればいいと思っています。
InstantRailsを使用しているのですが、文字コードをUTF-8にしたいと思っています。 Railsが作成するファイルがshift-jisになるのですが、これをUTF-8になるように変更する方法はあるのでしょうか？
ziprubyを使って、ファイルを圧縮する方法はあれど フォルダの構造を残したまま、ファイル圧縮する方法が見当たりません。 ziprubyに、拘るつもりはありませんので フォルダごとごっそり圧縮する方法を教えてください。 以上、よろしくお願いします。
仕事でのデータ処理用にRubyで小さなプログラムを書いて使用しています。 今まで1.8系を使用していたのですが、そろそろ1.9系への移行をしたいと考えております。 そこで気になったのがソースの最初に書く # -*- coding: utf-8 -*- の表記です。 この"utf-8"の部分に書く文字コードの表記一覧（？）はどちらを参照すればよろしいのでしょうか？ 例えば、私はWindows環境での使用になるのでシフトJISコードの場合が多いのですが、書き方として"SHIFT-JIS"、"Shift-JIS"、"SJIS"等のうち、どの表記が正解なのか判りません。 非常に初歩的な質問で申し訳ありませんが、ご教示いただければ幸いです。
以前同様の質問をしましたが、 具体的に内容を書きます。 XMLファイルを読み込みで、 余分な空白や空行をとるため、 下記のソースを実行しました。 xml_str = xml_str.gsub(/>\s+/, ">") xml_str = xml_str.gsub(/\s+</, "<") すると、Segmentation Faultが発生します。 困るのは、必ずある条件で発生するのではなく、 ソースの修正に合わせて(XMLの方ではなく) 起こったり、起こらなかったりするのです。 ネットで調べた結果 なんとなくgsubとstrip的なことを組み合わたときに 発生するのかな？という気もしています。 もし、回避方法をご存知の方がいましたら 教えてください。 ちなみに、 自分でgsubメソッドも作ってみましたが、 result << t_str[pre_pos..pos - 1] で同じエラーが発生しました。 もうお手上げです(TT) patternは正規表現です def self.gsub(str, pattern, replacement = "") t_str = str pre_pos = 0 pos = t_str =~ pattern return t_str unless pos result = "" while pos rep_str = Regexp.last_match[0] len = rep_str.length result << t_str[pre_pos..pos - 1] result << replacement pre_pos = pos + len pos = t_str =~ pattern end result << t_str[pre_pos..-1] return result end
Windows版Rubyの質問です。 前回、別マシンに、ruby1.8.7 p249のインストールパッケージをインストールしたのですが、そのパッケージの名前とサイトアドレスを失念してしまいました。 activescriptrubyではなく、他のものです。 perlでいう Action Perl のようなパッケージで、rubyのパスの設定などを自動でしてくれるものです。 windowsのスタートメニューのruby 1.8.7 p249から、 ruby gemsやruby用のコマンドプロンプトが選択できるようになるものです。 どなたかご存知の方、「これじゃないの？」というのがあれば、何でもかまいませんのでご教示いただければ幸いです。 ぐぐったのですが見つかりませんでした。
Rubyにおける、XPathの関数「text()="x"」への変数の使用方法 お世話になります。 RubyにてXPathの関数「text()="x"」"x"の部分に変数を使用したいと思い、コードを作成しています。 text() 関数のところで困っています。 例えば <?xml version="1.0" encoding="UTF-16"?> <NameRoot> <Text> <Name>あああああ</Name> <No>001</No> </Text> <Text> <Name>いいいいい</Name> <No>002</No> </Text> <Text> <Name>ううううう</Name> <No>003</No> </Text> </NameRoot> の内容のファイルを読み込み、その中から該当するNoに相当するNameを取得しようと しています。 で、書いたのが下記のような内容なのですが、gettestクラスのgetNameメソッドにて コメントアウトしてある行であれば、決め打ちでNo="001"の物を取ってこれるのですが、 ここに引数として渡されたローカル変数の、idを使用しようとするとnode変数にNilClass が返ってきて取得できません。 文字列リテラルを色々調べてみたのですが、どうも上手く行かず困っています。 他愛も無い質問かもしれませんが、大変困っています。 どなたか知恵をお貸しくださいますようお願い致します。 class gettest def getName(id) #↓これがきちんと動きません node = REXML::XPath.first(@masterdata, '//NameRoot/Text/No[text()="#{id}")]') #↓こちらは当然ながら動きます # node = REXML::XPath.first(@masterdata, '//NameRoot/Text/No[text()="001"]') path = (node.xpath + "/../Name") @name = @masterdata.elements[path].text() end end class main def edit @mastername = "" @mastername = @master.getName("001") print @mastername end end
http://jp.rubyist.net/magazine/?0004-Win32OLE このリンクを教えていただきましたが、わかりません。 具体的な目的を提示します、具体的な方法と必要ならばその 情報もとも教えていただけるとうれしいです。 a=3 + 4 b=5 + 2 puts a puts b この　puts a と　puts b　を　エクセルの A1　と　A２　に出力させる具体的な方法を 教えてください。
Rubyでノンブロッキングモードでファイルやパイプから読み込みをしたいんですが、Readpartialだと受け取るデータの長さを指定しないといけないし、 sync=trueにしてreadしてもブロックされてしまうので困っています。 知っている方教えてください
ルビーで出た値を、エクセルのセルに自動的に入力させる方法はありますか？ puts 3　 puts 9 を セルに 　A　B １３ ２９ と表示させたいのです。
スクリプトファイル名を取得するには？ 今日から書籍を読みながら、Rubyの勉強を始めました。 Rubyを学ぶ上で重要ではないことなのですが、教えてください。 コマンドラインからRubyスクリプトを実行した場合、そのスクリプトの中で実行したスクリプトのファイル名を取得したいです。例えば、次のコマンドを実行した場合、"hoge.rb"を取得したいです。 > ruby hoge.rb スクリプトにハードコーディングすることなく、スクリプトファイル名を取得することは可能なのでしょうか？ よろしくお願いします。
教えてください。 Nokogiriというgemを使ってXMLを処理しています。 Nokogiriへの入力はUTF8なのですが、 XML処理後の出力が16進文字列に変わってしまうのです。 環境はLinux （Linuxについてはあまり詳しくないので 情報が不十分かもしれません。すいません。） 16進文字列をUTF8に戻すこともできるのですが、 できれば、無駄な手間はかけたくありません。 もし、原因に心当たりがありましたら、 教えていただけると助かります。 Encoding.default_internal、 Encoding.default_externalなども怪しいと思います。
以下のスクリプトをWindowsで動かしたときにはちゃんと最後まで動くのに対し、Linuxで動かすとループの２週目でとまってしまいます。 こういうことって結構よくあることなんですか？？ 解決法などご存知の方いたら教えてください ーーーーーーーーーー PKTMP="C6C6nCCnnnCCnC4C4" HEADLEN=34 ST = Struct.new(:tomac,:frommac,:toip,:fromip,:ttl,:prot,:data) def analyze(data) 　result = Array.new 　i=0 　while data 　　head = data.unpack(PKTMP) 　　if (head[12] != 0x800) || (head[13] != 0x45) 　　　result << "error! in No.#{i} packet" 　　　return result 　　end 　　tmp = ST.new 　　tmp.tomac = macaddr(head,0) 　　tmp.frommac= macaddr(head,6) 　　tmp.toip = ipaddr(head,-8) 　　tmp.fromip=ipaddr(head,-4) 　　tmp.ttl = sprintf("%d",head[18]) 　　tmp.prot = sprintf("%d",head[19]) 　　data.slice!(0...HEADLEN) 　　datalen = head[15] - (head[13] & 0xf)*4 　　tmp.data = data.slice!(0...datalen) 　　result << tmp 　　i+=1 　end # end of (while data ) 　return result end
Rubyでのデバッグの仕方があったら教えてください。Perlのようにprintを使ってちょこちょことデバッグができればいいのですが、Rubyはクラスがからんでくるんで、その辺がデバッグを難しくしています。何かいい方法があるでしょうか？
メソッド定義　a(ｂ,ｄ) ｂの中からｄつを選ぶ組み合わせの個数 a(7000,3500)*((1.0/ 300)**3500)*((299.0/ 300)**3500) これを計算させるにはどうしたらいいのでしょうか？ begum out of float range のエラーがでます。
ruby の　BigDecimal　を　使った計算　をしたいです。 そこで 1/7をBigDecimalでどうやって計算するのか見せてほしいです。 精度を１０００桁でお願いします。
rubyでout of float range と算出されました。 これは計算の桁が大きすぎるためなのでしょうか。 ルビーは計算の桁がメモリーの許す限り無限と聞いたのですが。 どういう意味なのか教えていただきたいです。
Rubyのイテレータで分からないところがあります。以下のコードです。 if文のところで「yield x」が真なら「return x」を実行すると 推測できるのですが、 その実行結果はこれです。 > irb> a = [1, 2, 3, 4, 5] > => [1, 2, 3, 4, 5] > irb> find(a) {|x| x % 2 == 0} > => 2 > irb> position(a) {|x| x % 2 == 0} > => 1 > irb> count(a) {|x| x % 2 == 0} > => 2 例えば、find関数なら引数は「x」ですが「x % 2 == 0」 と条件式をブロックに書いているのが分かりません。 全体の流れとしてはfind関数なら2で割り切れたのが「２」と「４」で2つあるので 関数の結果は「２」というのは理解できます。 しかし、具体的に「return x」「 if yield x」が何をしているのかが分かりませんでした。 if「もし」yield x「なら」return xを実行する、様なコードなのですが・・・。 またfind(a)なら、引数xが２で割り切れるのなら条件式は「真」なので 真の数字をカウントする、様なコードなのですが・・・。それ以上詳細に教えてくれると助かります。 何方かご存知でしたら教えてください。 > リスト 1 : データの探索 (イテレータ版) > > # ブロックが真となる要素を探す > def find(ary) > for x in ary > return x if yield x > end > false > end > > # ブロックが真となる要素の位置を返す > def position(ary) > for x in 0...ary.size > return x if yield ary[x] > end > false > end > > # ブロックが真となる要素の個数を求める > def count(ary) > c = 0 > for x in ary > c += 1 if yield x > end > c > end なおこのコードが載っているサイトはここです。 http://www.geocities.jp/m_hiroi/light/abcruby08. …
分数の足し算をしたいのですが。 1.0/3 = 0.33333333333333 の１５桁では、精度が足りません。 精度を１０００桁にしたいのですがどうしたらいいのでしょうか？ 1.0/3 = 0.3333333333333333.....1000桁。
rubyで１０Ｃ０～１０Ｃ１０までの値をすべて合計する 計算をさせようと思って作ったのですが。 定義はうまくできa(10,1)=10と計算できるのですが whileで合計させているところがうまくいきません。 関数的にはあっていると思うのですがnilエラーになってしまい ます。原因はなんなのでしょうか。。。 定義開始 ーーーーーーーーーーーーーーーーーーーーーー def a(g,h) puts a=1 b=1 while a<=g do b = b * a a = a + 1 end c=1 d=1 while c<=h do d = d * c c = c + 1 end e=1 f=1 while e<=g-h do f = f * e e = e + 1 end puts b / ( d * f ) end ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー 定義終了 aa=0 ab=0 while aa <= 10 ab=a(10,aa)+ab aa=aa+1 puts ab end これをすると　ab=a(10,aa)+ab ここがNoMethodErrorと表示され 解がでません。 また、ab=a(10,aa)+ab　これを　ab=a(10,aa)　こうすると 解がちゃんとでるのですが。 １ nil １０ nil ４５ nil ２１０ nil . . . となってしまいます。
ruby で　組み合わせの１０Ｃ０から１０Ｃ１０までの値をすべて合計した値を求めるアルゴリズムを作ったのですが、undefined method '+" for nil:NilClass(No Method Error)となってしまいます。 def で a(b,c)をｂＣｃと定義しており、4の＋ｊを書かなければ ちゃんと、１，１０、４５、、２５２と計算され表示されます。 この値の合計を出したいのですが、なぜエラーになるのでしょうか。 1 i=0 2 j=0 3 while i <= 10 4 j = a(10,i)　+ j 5 i = i + 1 6 puts k 7 end ーーーーーーーーーーーーーー たとえば階乗を求めるアルゴリズムで a=1 b=1 while a<=10 do b = b * a a = a + 1 end puts b の場合は、ちゃんと自己加算されます。
rubyで while end と関数を組みますが (1)while (2)while (2)end (1)end とした場合 (1)の間に(2)を組むような方法はあるのでしょうか？ その書き方を知りたいです。 (1)で開始され(2)で終わるのではなく、(1)で開始され(1)で終わるように 命令したいです。
ruby で　(i=o , 10 ) Σ　i ** ２　を計算させるにはどうすればいいのでしょうか？ ruby で　読み込んで計算させたいです。 0^2+1^2+3^2+....+2^10=??
ruby で　1/300.0 の　７０００乗　を計算させる事は可能なのでしょうか？ ( 1 / 300.0 )**7000　で計算させると　０．０　になってしまいます。
rubyで10C2を計算させるにはどう書いたらいいのでしょうか？ while を使うことはわかりました、、、
この計算の答えをRUBYを使って解こうとしています。 私はプログラミング初心者でrubyの初心者本を買い、簡単なプログラムを作る事しかできません。この問題を解くために必要な知識が分かりやすく書いてある参考書を紹介していただきたいと思いました。 問題 期待値と標準偏差を求めよ。 1/100で当たり１５０円当たるクジ 1/200で当たり２５０円当たるクジ 1/300で当たり３５０円当たるクジ これを１回１円で上の３つのサイコロを同時に投げる方法で、７０００回試行した時の期待値と標準偏差。 これをエクセルでやろうとすると計算数が多すぎて作る事ができません。 有効桁数もエクセルは少なく７０００Ｃ２５００などの１０００桁を 超える数を計算する事ができません、そこで有効桁数を気にしなくて良い ＲＵＢＹの本を買い、勉強していますが。 分からないことは １コンビネーションの計算のプログラムの方法（nＣr＝n！/[r!(n-r!)]） ２べき乗の計算のプログラムの方法（　(1/200)^6000 ) ３　やりたい事を全部書きますとｗ↓ 1/100＝Ｐ１ １５０円＝Ｈ１ 1/200＝Ｐ２ ２５０円＝Ｈ２ 1/300＝Ｐ３ ３５０円＝Ｈ３ Ｑ＝１－Ｐ ｎ＝くじを引いた回数 ｒ＝当たった回数 と置く、この時さらに nCr*P1^r*Q1^(n-r)　・・・１ nCr*P2^r*Q2^(n-r)　・・・２ nCr*P3^r*Q3^(n-r)　・・・３ ここで、この問題を解きたいと思っています。 「期待値」 １のｒ＝０から７０００の値それぞれに対して ２のｒ＝０から７０００の値それぞれをかけて、その値それぞれに対して ３のｒ＝０から７０００の値をかけたものをすべて合計した値。 これを求める為に必要になる参考書を探しています。 お願いします。 　 　
ＲＵＢＹで 階乗、組み合わせの個数（４Ｃ２＝６）、有効桁数を２０００桁にする プログラムの記述の方法を教えていただきたいです。
Mecahnizeを使ってgetしたPageのbodyに対して、 文字コード変換したところ、Pageの内容がほとんど消えてしまいます。 よって、タグのサーチやフォームの操作などで失敗してしまいます。 変換前にlinksメソッドを使うと現象が回避されるのを 発見しましたが理由がわかりません。 コードは以下のような感じです。 agent = WWW::Mechanize.new page = agent.get(url) p page #=>いろいろ表示される WWW::Mechanize::Page #lnks = page.links #=>これがないとpageの内容がおかしくなる #変数lnksは全く使っていない page.body = page.body.toutf8 # UTF8に変換 p page #=> 1回目と比較して内容がほとんどなくなっている #linksメソッドを使えば現象が起きない rubyは1.8.7 p174 i386-mswin32です。 mechanizeは0.9.3です。 nokogiriは1.4.1, 1.3.3です。 理由がわかる方、スマートな回避方法、 このコードで使い続けても問題ないか？など ご教授ください<(_ _)>
コピー元のあるサブディレクトリーを含めて、別ドライブにコピーをしたいと思います。（※プラットフォームは Windows） 別ドライブとは、ＵＳＢメモリです。 試してみたのは、 os = `xcopy .\org_data\*.* L:\ /s /e /v` os = `xcopy ./org_data/*.* L:/ /s /e /v` os = system(".\org_data\*.* L:\ /s /e /v") os = systemu(".\org_data\*.* L:\ /s /e /v") これら、いずれもＮＧでした。 xcopyに拘っていませんが、copy & compareをさせたいと思います。 何か良い方法を、知りませんか？
Ruby初心者です。 デクリメントするループの書き方がわかりません。 Ｃ言語でいうところの・・・ for(i = 10; i > 0; i--){ //処理 } という表現は、Rubyではどのように書くのが一般的でしょうか？ どなたか教えてください。よろしくお願いします。
ziprubyを、Windowsにinstallしています。 gem install zipruby と入力してみたら、プロキシ経由の接続であったため、エラー発生。 set http://proxy.hege:8080/ gem install zipruby これでも駄目だった。 仕方ないので、「https://rubyforge.org/frs/?group_id=6124&release …」より、ファイルをダウンロードした。 ファイル名は、zipruby1.9-0.3.6-x86-mswin32.gem gem install C:\hoge\zipruby1.9-0.3.6-x86-mswin32.gem -l とすると、 Successfully installed zipruby1.9-0.3.6-x86-mswin32 1 gem installed Installing ri documentation for zipruby1.9-0.3.6-x86-mswin32... Installing RDoc documentation for zipruby1.9-0.3.6-x86-mswin32... このように、表示された。 これで出来たかなぁ？　と思ってサンプルプログラムを走らせると、 C:/Ruby/usr/forms/test.rb:12:in `require': no such file to load -- zipruby (LoadError) from C:/Ruby/usr/forms/test.rb:12 となって、ソースファイルの１２行目にある「require 'zipruby'」が読めないという。 どのようにしたら、ziprubyが読めるのかを教えていただけませんか？
大変初歩的な質問で申し訳ありません。 明日中にRudyで作られたqwikwebというシステムをサーバーに導入しなくてはならないのですが、何をどうしたら良いか全くわからずに困っています。 導入したいシステムは、 qwikというwikiとメーリングリスト機能を合わせたものです。 http://qwik.jp/qwikweb/ http://qwik.jp/qwikweb/Install.html 別途ライブラリが必要と言うことで過去のバージョンからすべて揃えたのですが、 [試しに動かしてみる] の項目でいきなりつまづいてしまいました。。。 % sudo ruby setup.rb のようなコマンドが色々あるのですが、どこでこのコマンドを書き実行するのでしょうか。。 いくらRubyについて検索していろいろ調べてもわかりません。 ちなみにサーバーはGMOのレンタル共有サーバーのものを使っていまして、 rubyは既にインストール済みのようです。 http://www.onamae.com/server/sd/ よろしければどなたか、ご教示お願いします。
「たのしいRuby」は読み終わりましたが、コードも読めないしあまり書けません。２冊目に読む本かサイトを探していまいす。どなたかしっている方がいらしたら教えてください。よろしくお願いいたします。
こちらのサイトを参考にさせていただきました． http://www.namaraii.com/rubytips/?%A5%D5%A5%A1%A … やりたいことはファイルにアクセスして2行目，3行目の文字列をとってくることです． ===foo=== hoge hige foobar File::open("foo") {|content| 　puts content.readlines[1] 　puts content.readlines[2] } このようなプログラムだと， hige nil となります．ですが，以下のように分割するとうまくいきます． File::open("foo") {|content| 　puts content.readlines[1] } File::open("foo") {|content| 　puts content.readlines[2] } hige foobar できればopenは一回だけで済ませたいのですが可能でしょうか？ Ruby初心者なのでくだらない質問かもしれませんが，ご教授ねがいます．
Ruby言語はPHPのようにMySQLと容易に連動出来るのでしょうか。
Ruby言語とPHPの連動は安易に出来るのでしょうか。たとえば、検索部分をRuby言語で作って、検索したデータをPHPに渡し表示することは出来ますか。
class Integer def prime? n = self.abs() return true if n == 2 return false if n == 1 || n & 1 == 0 d = n-1 d >>= 1 while d & 1 == 0 20.times do a = rand(n-2) + 1 t = d y = ModMath.pow(a,t,n) while t != n-1 && y != 1 && y != n-1 y = (y * y) % n t <<= 1 end return false if y != n-1 && t & 1 == 0 end return true end end module ModMath def ModMath.pow(base, power, mod) result = 1 while power > 0 result = (result * base) % mod if power & 1 == 1 base = (base * base) % mod power >>= 1; end result end end 上記プログラムをjavaで書き直して頂きたく投稿いたしました。 もしよろしければお願いします。
クラスインスタンス内から自分のクラス名を取得しようと思うと、self.class.nameで取得できますが、type.nameでも取得できます。 しかし、typeは非推奨メソッドとなっているため、警告が出て、このままでは使用することができません。 素直にself.classを使えばいいのかもしれませんが、selfのワンクッションがどうにも気に入りません。 スマートな記述方法あったら教えて下さい。 # self.class.nameを使用する場合 class MyClass 　def print_classname 　　puts self.class.name 　　# puts class.name これはエラー 　end end # type.nameを使用する場合 class MyClass2 　def print_classname 　　puts type.name # これはdeprecatedの記述で警告が出る 　end end
以下に示す（例１）を実行すると、 hoge defaultString と出力されます。 （例１）------------------------------------------------------ def hoge(str) b=(str||'defaultString') + "\n" STDOUT.write b end hoge("hoge")　#hoge hoge(nil) #defaultString ------------------------------------------------------------ 下記に示す例２は、例１の2行目と3行目を１行にまとめたものです。 例１と同じ実行結果を期待しています。 （例２）　---------------------------------------------------- def hoge(str) STDOUT.write (str||'defaultString') + "\n" end hoge("hoge") hoge(nil) ------------------------------------------------------------ しかし、例２を実行すると、以下の様なエラーが出ました。 ------------------------------------------------------------ hogewrite.rb:2:in `+': String can't be coerced into Fixnum (TypeError) from write.rb:2:in `hoge' from write.rb:4 ------------------------------------------------------------ 文法的に、何に違反してるのか、わかりません。 ご指導のほど、宜しくお願いいたします。
Ruby/gsl をWindowsで使いたいのですがどうすればいいのでしょう。 現状、Windows マシンでRubyが使えるようになっていて、 http://www.gfd-dennou.org/arch/ruby/index-j.htm からダウンロードした NumRu-0.42.exe を実行しても require "gsl" はエラーがでます。 さしあたり、gsl でなくても、N次元の（方程式N本、未知数N）の １次の連立方程式を解ければいいのですが、今後のことも考えて gslを使えるようにしたいのです。 Windows で gsl が使えないのであれば、あきらめます。 １次連立方程式の解くプログラムなどは公開されているのでしょうか。 どなたかご教授ください。
rubyのプログラムファイルを複数一度に 実行したいと思い 書籍をみて test.shというファイルに #!/bin/sh ruby xxx.rb ruby vvv.rb と書き $ chmod u+x test.sh $ test.sh と実行したのですが、エラーになりました ほかにも設定が必要でしょうか よろしくお願いいたします
シリアル通信が出来るスレッド（comThread）のサンプルには、二つのポートを必要とするようです。 しかし、外部の通信を行うには、ひとつのポートで送受信をするのが一般的です。 comThread　を、ひとつのポートで送受信させるにはどのようにすれば良いですか？ 参考にしたページは、こちら↓ http://www.hirax.net/mobile/content/7487
初めまして。 Ruby on railsについて質問させていただきます。 http://localhost:3000/membersにアクセスすると「We're sorry, but something went wrong.」と表示されてしまいます。 logファイルでは、 「Status: 500 Internal Server Error could not open database: unable to open database file 　C:/ruby/lib/ruby/gems/1.8/gems/sqlite3-ruby-1.2.5-x86-mswin32/lib/sqlite3/errors.rb:62:in `check' 　…　」と出ており、dbファイルがopenできない状況にあります。 どのようにしたらこれを解決することができるでしょうか？ 以下は手順と情報です。 『手順』 １．[rails groupware2]にてRailsアプリケーションを作成 ２．SQLite3にてテーブル名“members”を作成し、dbフォルダに入れる。 ３．database.ymlでそのdbファイルのパスを入力して変更 ４．[ruby script/generate scaffold member name:string acc:string]にて一連のファイルを作成 『情報』 OS ：WindowsXP Rails ：2.3.5 Ruby ：1.8.6 gem ：1.3.5 SQLite：3.6.21 思いつく範囲では、 １．DBドライバのインストール時（[gem install sqlite3-ruby]）に「No definition …」がいっぱい出る。 ２．DBファイルまたはそれが格納されているフォルダにアクセス権限が与えられていないかもしれない（ちゃんと許可されてました） が原因のような気がしますがネットで調べると、どうやらそうではなさそうです。ちなみに他のPCで一からインストールし直しても同様のエラーが起きました。海外のページにも目を通しましたが良い解決案が出てないようなのでどなたかご存知でしたら教えてください。
パスワードとユーザ名を指定してのFTPでのバイナリデータ (LZH圧縮のデータ)の取得はどのようなコードを書けばいいのでしょうか。 例えば require "open-uri" open("ftp://172.11.155.123/dir/data.LZH"){|io| open("data.LZH" , "w"){|f| f.write(io.read) } } このような場合、パスワード(abcde)とユーザ名(yamada)は、どこに、どのように、いれればいいのでしょうか。 上記のような書き方でなくても構いません。 時間がないので、あまり調べず質問することをお許しください。
お世話になっております。 MRI(Ruby1.8系環境)で作成し単体テストまで完了したCUI帳票を出力するバッチプログラムを、 DLLにして他の言語で組まれたプログラム（今回の場合であればjava）で使用したいと考えます。 尚、Ruby側で行う事はタイミングを重要としない最終ファイル出力処理と、 それに付帯するヒアドキュメントによる雛型定義と文字列処理程度なので、呼び出し側と密な関係を持つ必要はありません。 可能であればパラメータを渡して叩けるのが理想ですが、不可能であれば中間ファイルを使用する実装でもかまいません。 （ただし、雛型だけを呼び出し側から直接参照する場面も想定されたい） 可能かどうか、可能であればどのような手段を取り得るか、といった辺りをご教示いただければ幸いです。 以上です。よろしくお願いします。
インスタンスメソッドからsingletonメソッドへのアクセスが、思ったようにできません。 はじめは、次のように記述すれば動作すると思っていました。 （MyClass.get_hello_wordをインスタンスメソッドから呼び出し） class MyClass 　def hello 　　puts self.get_hello_word # エラー発生源 　end 　def self.get_hello_word 　　'hello every one' 　end end MyClass.new.hello # エラー しかし、実際には次のように記述しなければ動きませんでした。 class MyClass 　def hello 　　puts self.class.get_hello_word # self.classのワンクッション 　end 　def self.get_hello_word 　　'hello every one' 　end end MyClass.new.hello そもそも、 def self.get_hello_word と定義したんだから、参照する時も同様にできてもいいのではないかと思うんですけれど、何か認識が間違っているのでしょうか。 だとしたら、（勘で言いますと） class << MyClass 　def get_hello_word 　　'hello every one' 　end end の文法の考え方がからんでいるような気がするのですが・・ ちんぷんかんぷんです。 どうかこの辺りの知識を教えて頂けないでしょうか。 あと、self.class.get_hello_wordの記述方法よりも簡単な（そうすべき）書き方があれば教えて下さい。
こんにちは　or　こんばんは 学校の授業でRubyを習っています。 授業の課題でこんな問題がでました。 「英文の文章が入っているテキストファイルがあたえられると、そのファイルに置ける各語の出現回数を出力するプログラムをつくれ」 テキストファイルの中身は 「Show your flowcharts and conceal your tables and I will be mystified. Show your tables and your flowcharts will be obvious.」というファイルで 出力結果としては 「show 2 your 4 flowcharts 2 and 3 conceal 1 ...」 の用に出現する単語の数を表示するプログラムなのですが 単語ごとに区切る方法がわかりません。 何度かプログラムを組んでみたのですが全く違う結果でした。 $KCODE = 'e' str = [] #文字列 cnt = {} #回数 cp_str = [] ARGF.each do |l| /([A-Za-z]+)/ =~l for i in 0..(str.size) if str[i] == $1 cnt[$1] += 1 else str << $1 cnt[$1] = 1 end end end str.each do |m| puts "#{m} #{cnt[m]}" end 授業の課題の答えを教えて欲しいとは望みませんができればわかりやすいヒントをどなたかわかる方お願いします。 環境は　Vine Linux 4.2 emacs　で作成しています またテキストファイルはopenなどのメソッドは習っておらず ARGFで作成したいのでよろしくお願いします。
本当に初心者ですので、質問が分かりづらいかもしれませんが、よろしくお願いします。 環境は、OS：WindowsXPSP3 ApacheHttpserver2.2 Ruby-186-26 RubyGems -v 0.9.4 です。 erbを使って簡易掲示版を作ろう！！と言うものなのですが、 ・keijiban.html　・keijiban.rb　・data.csv(書き込んだデータ保存用csv)・・・cgi-binに保存 ************************************************************ 入力ミスは散々見直しました。 添付ファイルが2つのファイルです。localhostで表示してみていますが、 初期表示は出来ますが、データを追加しようと『投稿する』ボタンをクリックすると 画面が真っ白になります。 入力ミスは散々見直しました。 初期表示が出来ると言う事は、keijiban.rbは動作していると思われます。 REDで簡易解析と言うのをしてみた所、次のエラーが出たり出なかったりです。 C:/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require': no such file to load -- rde (LoadError) from C:/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require' from C:\Program Files\RDE\rde_export.rb:9 from C:/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require' from C:/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require' from C:/Program Files/Apache Software Foundation/Apache2.2/cgi-bin/rb1D.tmp:71 Complete(1) 何か、インストールが足りないのでしょうか？ 教えて下さい。 2000字超えたため、別ファイルに全文を記入しています。
複数プロセス間で、一つのファイルに対して読み書きしたいです。 その際、ファイルへの書き込み中は、ファイルの読み込みを抑止したいです。 また、読み込みの処理はファイルのロックを参照するだけで、ファイルへのロックは掛けない様にしたいです。 そこで、以下二つプログラムを作成して、簡単な検証を行いました。 ■プログラム１ キーボードからの入力があるまで、ファイルをロックする。 #!/usr/local/bin/ruby file='./hoge.txt' f=open(file,'r+') ret=f.flock(File::LOCK_EX|File::LOCK_NB) STDOUT.write 'Hit any key' STDIN.gets.chomp ■プログラム２ ファイルがロックされているか状態を取得する。 #!/usr/local/bin/ruby require "fcntl" file='./hoge.txt' f=open(file,'r') arg="" f.fcntl(Fcntl::F_GETLK,arg) l_start,l_len,l_pid,l_type,l_whence = arg.unpack('VVVSS') puts l_len ※プログラム２は、fcntlの使い方がマニュアルを読んでもよく理解できなかったので、 手探りで記述しました。 実行すると、プログラム１はエラー無く動きましたが、プログラム２は以下の様なエラーが 出てしまいます。 fcntl.rb:6:in `fcntl': Invalid argument - ./hoge.txt (Errno::EINVAL) from fcntl.rb:6 環境は、unixレンタルサーバ（FreeBSD）です。 上記方法では、上手くいきませんでした。 flockでファイルにロックが掛っているか否かを、そのファイルにロックを掛けることなく 調べるにはどうしたら良いのでしょうか？ ご指導のほど、宜しくお願いいたします。
ruby1.8.6　&　rails2.3.4　&　Win2003環境下でrailsアプリを作っています。 ある程度作りこんで 　ruby script/server で起動したところローカル(サーバ上)だと画面表示は速いのに別のPC(クライアント)から接続すると時間がかかります。いろいろ調べたところ、どうやらサーバがクライアントのPCの名前解決をしようとしているようです。いわゆるIPからの逆引きをしようとしてタイムアウトまで待ってから画面を表示している模様。そこでサーバ側のhostsにクライアントPCのhostsを書けば早くなりました。しかしこれだと不特定ＰＣ向けにＷＥＢサーバを公開できないので、この逆引きを無効にさせたいとおもっていますが、やり方がわかりません。どこのファイルにどんなふうに書けばよいのでしょうか？ デフォルトだとサーバはwebrickなのでwebrick::genericserverにある DoNotReverseLookupあたりを書けばよいのかもしれませんが、どのファイルにどんな風に書くのかわかりませんし、そもそもこの考え方が間違っているかもしれません。 どなたかわかる方いないでしょうか？
Googleカレンダーの予定を、１日前に通知する設定にして、その通知メールをRubyで作ったプログラムで受信、解析してTwitterにポストするプログラムを作っています。 GMailを受信する際、IMAPで受信しているのですが、プログラムを実行すると、以下のようなメッセージが出ます。 -------------------------------------------------- D:/Ruby/lib/ruby/1.8/openssl/buffering.rb:35:in `sysread': ソケットが以前のシャットダウンの呼び出しでシャットダウンされているため、データの送受信を要求することは禁じられています。 (Errno::ESHUTDOWN) from D:/Ruby/lib/ruby/1.8/openssl/buffering.rb:35:in `fill_rbuff' from D:/Ruby/lib/ruby/1.8/openssl/buffering.rb:106:in `gets' from D:/Ruby/lib/ruby/1.8/net/imap.rb:992:in `get_response' from D:/Ruby/lib/ruby/1.8/net/imap.rb:930:in `receive_responses' from D:/Ruby/lib/ruby/1.8/net/imap.rb:923:in `initialize' from D:/Ruby/lib/ruby/1.8/net/imap.rb:922:in `start' from D:/Ruby/lib/ruby/1.8/net/imap.rb:922:in `initialize' from xxx.rb:49:in `new' from xxx.rb:49 -------------------------------------------------- Linux上では動作するのですが、Windowsでは上記のようなメッセージが出て動きません。 解決策がわかるかたはよろしくお願いいたします。
File.statに、nameというメソッドを追加したいです。 st=File.stat('hoge.txt') puts st.name #=> hoge.txt 上記のように使いたいのです。 そこで、以下の様に書いてみました。（行頭のスペースは全角です） class File 　class << self 　　def stat(file) 　　　st=File::Stat.new(file) 　　　class << st 　　　　def name 　　　　　@file 　　　　end 　　　end 　　　st 　　end end end st=File.stat('./hoge.txt') puts st.name #=> nil 上記実行結果はnilが出力され、期待した結果は得られませんでした。 上記の様に書いた理由を以下に記します。 クラスメソッドstatは、file.rbのclass Fileの中に定義されていて、 stat.rbのFile::Stat.new(file)を戻り値としていました。 stat.rbのclass File::Statのinitializeでは、 def initialize(file) 　@file = file 　(略) end となっていたので、上記の様に書いてみたのですが、何が悪いのでしょうか？ ご指導のほど、宜しくお願いいたします。
rubyで作ったプログラムから linuxの静的ライブラリ、動的ライブラリを作る方法が あるでしょうか？
私はRuby初心者になります。 今、私は文字列(文)から文字列（単語）を検索させるプログラムを組みたいのですが、１つ分からない点が出てきたので質問させていただきました。 内容なのですがとりあえず以下のようなプログラムを本などで調べ組上げました。 *********************************************************** open("docu.txt"){|io| 　puts io.read 　io.pos = 0 　File.readlines("word.txt").each{|line| 　　puts line 　　line.chomp! 　　p io.read.index(line) 　} } *********************************************************** 【docu.txtの内容】 aiueokakikukekosasisuseso 【word.txtの内容】 keko *********************************************************** 結果： aiueokakikukekosasisuseso keko 11 これならちゃんと動いてくれました。 ただ、これらのテキストの内容を以下のような日本語にするとうまくいきません。 *********************************************************** 【docu.txtの内容】 あいうえおかきくけこさしすせそ 【word.txtの内容】 けこ *********************************************************** 結果： あいうえおかきくけこさしすせそ けこ nil やはり英数字でないと、うまくいかないようです。 こういった「ひらがな」や「漢字」でも検索してくれるようにするには、どういった作業が必要になるのでしょうか？ よろしくお願いします。
表形式のデータにおいて、列数が行によって可変長となる場合のエレガントな方法を探しています。 ■やりたいこと csv形式の元データを1行可変列に変換し、excelに読み込ませる。 excelに読み込ませるデータをrubyで処理したい。 処理前のデータ 　コード、属性ともにユニークではない 　コードは数値型、属性は文字型 　コード　人数１　人数２　 属性 　1　　　　1　　　　100　　　A　　 　2　　　　1　　　　0　　　　B 　3　　　　4　　　　1　　　　A 　2　　　　5　　　　8　　　　C 　4　　　　1　　　　122 　　D 処理後の最終形態 　コードは重複なし。 　コード　　属性 　1　　　　　A 　2　　　　　B,C 　3　　　　　A 　4　　　　　D この処理を 　元のデータを1行ずつ読み出す 　ハッシュに追加する 　ハッシュをcsvに書き出す と考えて、下記のようなコードを書きましたが、属性部分がカンマで区切られず、配列の値がすべて連結されてしまいます。 ■質問 こういうデータを処理するときにどうすればいいか？ （後学のために、なぜそうしたほうがよいのかを教えていただけると幸いです） 具体的にこのコードを書き直すとしたら、どこをどう変更すればよいか？ いろいろなリファレンスを読んだのですが、列数が可変長となる場合のサンプルが見つけられなくて詰まってしまいました。 よろしくお願いいたします。 環境：active ruby 1.8.6 , windows XP SP3 , ■作成したコード（抜粋） require 'csv' in_path='C:\Documents and Settings\a\デスクトップ\解凍後データ\dummy.txt' out_path='C:\Documents and Settings\a\デスクトップ\解凍後データ\out.txt' #set initial values col_code=0 'コード列位置 col_zokusei=3　'属性列位置 h=Hash.new{|h,key| h[key]=[]} CSV.foreach(in_path){|row| h[row[col_code]]<<row[col_zokusei] } #put hash to csv file. CSV.generate(out_path){ |writer| h.to_a.each{ |row| p row writer << row } }
お世話になっております。 rubyのコーディングで疑問が発生しましたので、質問させてください。 以下の様にクラスを定義してあるとします クラスA　体裁を整えて標準出力するクラス 　・インスタンス変数@Aを持つ 　・@Aを元に整形して標準出力する振る舞いを持つ クラスB　Aの子クラスで、標準出力する内容を細かく設定するクラス 　・独自のインスタンス変数は持たない 　・親クラスのインスタンス変数@Aを編集する振る舞いを持つ 上記の実装である時、クラスBの振る舞いでクラスAのインスタンス変数@Aを編集しようとした際にエラーが発生します。 尚、レシーバはsuperです。 エラー内容 ./clsb.rb:49:in `edt_dsp': super: no superclass method `edt_dsp' (NoMethodE rror) エラー文中に出てる'edt_dsp'というメソッドが親クラスのインスタンス変数を編集するメソッドです。 尚、子クラスには独自の変数は無いのでinitializeメソッドは定義していません。 なぜこのようなエラーが発生してしまうのかわからず困っています。 現在自分でも色々とサイトを回って調べていますが、解決には至っていません。 ご回答いただければ幸いです。 以上です。よろしくお願いします。
Ruby初心者です。 a.rbというプログラムを a.rb file1.txt file2.txt 以下のように使っています。このa.rbを別のプログラム内で使用したいのですが、こういった場合、どのように書けばいいのでしょうか。requireかloadかと思ったのですが、この場合、file1.txtやfile2.txtの書き方がよく分かりません。 よろしくお願いいたします。
Ruby初心者です。　メモ帳で puts "hello world"と打ち、名前をsample.rbにし、c:\Users\rbというファイルに保存しました。次にコマンドプロンプトで c:\Users\rb>ruby sample.rb　と入力したんですが、'ruby'は、内部コマンドまたは外部コマンド、操作可能なプログラムまたはバッチ　ファイルとして認識されていません。といわれました。　どうすればいいのですか？　本を見てもネット上のサイトをみても >ruby　●●.rb　なんです。
初心者です。環境：ruby こういう風にしたいのですが、どうやるのでしょうか？ ◆変更前 20090925055902 20090925082043 ◆変更後 a20090925055902a a20090925082043a よろしくお願いします。
ど初心者です。この問題に５０時間以上費やしましたが解決できませんでしたので、どなた様か教えてください。 環境：sinatra,centos, 何がしたいかというと、「webブラウザから、クリック一つで特定のファイル（シェル）を実行させる」htmlのコードが知りたいです。 プログラムまったくわからないので、サンプルなどあれば助かります。 よろしくお願いします。 ◆参考文献 sinatraとは　⇒　http://www.sinatrarb.com/intro-jp.html
本を読んでいてRubyというプログラミング言語に興味を持ちました。早速ダウンロードしようとしたんですが、よくわかりません。わかりやすく、安全にRubyをダウンロードできるサイトを教えてください。
Ruby on Railsのmigration機能は便利ですが、この機能をRuby on Rails以外のプロジェクトのユニットテストのために使いたいと思っています。 というわけでRoRプロジェクトを作成しないで同等のmigration機能だけを使用できるようなツールみたいなものを探していますが、見つかりません。 （当方のrubyとRoRの無知さから情報にたどり着けないだけの可能性あり。。） 何かいいツール知ってる方いましたら教えて下さい。 （rubyで書かれていなくてもNPです。）
「プログラミングのために線形代数」という本を購入したのですが、この本の付録に"アニメーションプログラム"という写像によって点がどのように移動するかをアニメで表示できるものがあって、その導入方法が巻末に記されていたのですが、いまいち使い方がわかりません。 1.RubyとGnuplotが使える環境を準備する。 2.オーム車のWebサイトから mat_anim.rb をダウンロードし、カレントディレクトリに置く。 3.指示されたコマンドを入力する。 RubyとGnuplotの導入は終わり、ソースファイルのダウンロードも済んだのですが、"カレントディレクトリ"がどこなのか、コマンドをどこに入力するのかがわからなくて困っています（コマンドライン？Gnuplot？）。 どなたか、詳しい手順をご教授ください。 http://www.ohmsha.co.jp/data/link/4-274-06578-2/ …
スパークラスのスーパークラスのメソッドを呼び出したいです。 たとえば、Hoge3のスーパークラスがHoge2で、さらにそのスーパークラス がHogeの時、Hoge3からHogeのメソッドを呼び出したいのです。 もう少し具体的に説明させてもらいます。 class Hoge 　def initialize() 　　@name='hoge' 　end end class Hoge2 < Hoge 　def initialize() 　　super 　　@name='hogehoge' 　end end class Hoge3 < Hoge2 　def initialize() 　　super　#これではスーパークラスHoge2のメソッドが呼ばれてしまう。 　　puts @name　 end Hoge3.new() 上記実行結果は、hogehogeが出力ですが、 スーパークラスのスーパークラスが設定した@name値、 'hoge'が出力されるようにしたいです。 『Hoge3クラスはHoge2クラスを継承すればよいではないか？』 とも思うでしょうが、Hoge2クラスには、Hogeには無い機能が多く拡張されてると考えてください。 ご指導のほど、宜しくお願いいたします。
Rubyの講座を受ける予定なのですが、実際現場ではどれくらい使用されているのでしょうか？ まつもとひろゆき氏の著書を読んだらアメリカの気象庁やNASAでも使われていると書いてありましたが、求人などの必須言語などにはほどんど記載されておりません。 実際にシステム開発などの現場の関係者がいましたらRubyが現場でどれくらい活用されているか教えていただけたらと思います。
質問を見ていただいて有難うございます。 長文になりますが、宜しくお願いいたします。 最終的な質問をまとめると、 『file descriptorをSTDOUTに切り替えるにはどうしたら良いですか？』 になるかと思いますが、目的から経緯についても以下に記します。 zipファイルを標準出力に書き出したいです。 プログラム上で作り出したzipファイル形式のデータを、 ディスクに書き出すのではなく、標準出力に書き出したいのです。 zipファイルをレスポンスするcgiを作りたいからです。 zipファイルを生成するライブラリは、探したところ ・rubyzip ・zipruby というのがありました。 ziprubyには、Zip::Archive.open_bufferというメソッドがあったので、 これを利用して以下の様に書いてみました。（行頭スペースは全角です） ------------------------------------------------------------- #!/usr/local/bin/ruby require 'cgi' require 'rubygems' require 'zipruby' body='' Zip::Archive.open_buffer(body, Zip::CREATE) do |ar| 　ar.add_buffer('first_entry.txt','Hello world!') 　ar.add_dir('adir') 　ar.add_buffer('adir/first_entry.txt','Hello again!') end CGI.new().out({ 　'status'=>'OK', 　'type'=>'application/zip', 　'Content-Disposition'=>'attachment; filename="hoge.zip"' }){body} ------------------------------------------------------------- とりあえずは、これで目的を達成できたのですが、 巨大なzipファイル生成すると、クライアント（ブラウザ）がタイムアウトしてしまいます。 そこで、CGI.new().outを使うのをやめて、STDOUTに直接、”ストリーム”に書き出そうと思います。（Chunkで） rubyzipには、Zip::ZipOutputStream::open(ファイル名)というのがあります。 これをファイルではなく、STDOUTへ出力するように改造を試みました。 zip.rbというソースファイルを見ると、 @outputStream = File.new(fileName, "wb") という部分があるので、この@outputStreamをSTDOUTに変えてしまえばよいと考え、 以下の様に描いてみました。 （標準出力に書き出す部分のみです。） ------------------------------------------------------------- require 'zip/zip' module ZipKai 　include Zip 　class ZipOutputStreamKai < ZipOutputStream 　　def initialize(fileName) 　　　super(fileName) 　　　@fileName = fileName 　　　#@outputStream = File.new(fileName, "wb") 　　　@outputStream = IO.new(1, "wb") 　　end 　end end ZipKai::ZipOutputStreamKai::open("my.zip") { |io| 　io.put_next_entry("first_entry.txt") 　io.write "Hello world!" 　io.put_next_entry("adir/first_entry.txt") 　io.write "Hello again!" } ------------------------------------------------------------- 実行してみると、以下エラーがでました。 C:/ruby/lib/ruby/gems/1.8/gems/rubyzip-0.9.1/lib/zip/zip.rb:1008:in `tell': Bad file descriptor (Errno::EBADF) ここで、質問です。 file descriptor(@outputStream）をSTDOUTに切り替えるにはどうしたら良いでしょうか？ ※そもそも、他にもっと良い方法があるよといったご回答でもＯＫです。 ご指導のほど、宜しくお願いいたします。
質問を見ていただいて有難うございます。 質問を一言で言うと、 「メソッドの中で呼び出し元がbreakを使った事を検知できるか？」 となるのでしょうか。。。以下に詳しく質問を記述いたします。 引数に配列を渡すと、その配列をブロックに一つずつ返してくれる メソッドhoge()があるとします。 以下の様に使います。 ------------------------------------- hoge([0,1,2]) do |x| 　puts x end 実行結果 0 1 2 ------------------------------------- このhoge()は、実行中にエラーが発生した場合、トラップして falseを返す事とします。（何事もなければtrueを返します。） このhoge()を以下の様に書きました。 def hoge(arg) 　begin 　　arg.each do |x| 　　　yield x 　　end 　rescue 　　false 　else 　　true 　end end 以下の様に使います。 ------------------------------------- ret=hoge([0,1,2]) do |x| 　puts x end puts ret ? 'success' : 'fail' 実行結果 0 1 2 success ------------------------------------- ------------------------------------- ret=hoge(nil) do |x| 　puts x end puts ret ? 'success' : 'fail' 実行結果 fail ------------------------------------- ここまでは、よかったのですが、hoge()のブロックの中で、breakを使うと hoge()の戻り値はnilになってしまいます。 ------------------------------------- ret=hoge([0,1,2]) do |x| 　break if x==1 　puts x end puts ret puts ret ? 'success' : 'fail' 実行結果 0 nil fail ------------------------------------- ここで質問です。 最後の例は、hoge()として異常系ではないので、retにtrueを与えたいのですが、どうしたらよいでしょうか？ ご指導のほど、宜しくお願いいたします。
Rubyでpdfファイルを読み込む方法を探しています。 file = open("sample.pdf", "r") file.each { |f| puts f } というコードを書いて実行すると文字化け？したようになったり、数字ばかりの行が挿入されていたりと、txt形式のファイルを読み込んだ時の様に文字が正しく出力されません。 何かpdfを読み込む正しい方法があるのでしょうか。 また、直接読み込むことはせずにpdftotext.exeを使って予めtxt形式に変換しようと考えたのですが、Rubyのスクリプトの中でpdftotext.exeを使う方法が分かりません。 解決方法をご存じの方がいらっしゃいましたら教えて頂けないでしょうか。 環境はWindowsです。よろしくお願いします。
Proc.new do|arg| 　arg.each do |x| 　　puts x 　end end.call([1,2,3,4,5]) 上記のようなものを無名関数と理解しているのですが、 これを下記の様にすると、 Proc.new {|arg| 　arg.each do |x| 　　yield(x) 　end }.call([1,2,3,4,5]) do |x| 　puts x end no block given とエラーになってしまいます。 無名関数で、ブロック付きメソッドって作れないものでしょうか？ ご指導の程、宜しくお願いいたします。
二つのブロック付きメソッドhogeとpiyoがあるとします。 ブロックの中に記述するプログラムは同じだが、hogeを使うか、piyoを使うかは条件により制御したいです。 このような場合、どのように書いたら簡素になるでしょうか？ sw=true if sw then 　hoge() do |x| 　　puts x 　done else 　piyo() do |x| 　　puts x 　done end 上記例では冗長の思うのですが、ご指導のほど宜しくお願いいたします。
IPアドレスをでtableタグでくくった表にしたくて悩んでいるのですが 下記のようなという変数に取り込んだ配列があり pp　@IP ["192.168.10.1"] ["192.168.11.1,2,3,4,5,6"] ["192.168.12.100,200,230"] ・ ・ ・ と第4オクテットが複数の数になる場合とならない場合があります。 これを表にあらわした時に 192.168.10.1 192.168.11.1 192.168.11.2 192.168.11.3 ・ ・ 192.168.12.230 とこのような形で表にしたいです。 （実際にはテーブルでくくってあります。） 考えていたのは@IP.split('.')で オクテット単位に区切ってみたのですが、 【"192","168","11","1,2,3,4,5"】←こんな感じ 最後の第4オクテットの表示がうまくいきません。 （第4オクテットをさらに配列にしようとして うまくいってないですが・・・） どうぞご助力頂けますでしょうか。
windows上でRubyにて作成したプログラムを実行しています。 作成した****.rbファイルをダブルクリックすると、プログラム起動中、コマンドプロンプトが表示されつづけます。 プログラム起動中にコマンドプロンプトを表示させなくする方法をご教授願います。 よろしくお願いいたします。
RubyでRTT(往復遅延時間)を計測することは可能ですか？ 指定したIPアドレスにpingを送り、返ってくるまで時間を測定するようなものを作りたいと思っています。 RTTを測定できるならpingを使わなくてもかまいません。
宜しくお願いします。 Rubyで配列の中の文字列をsplitして多重配列にしたいと考えています。 例えば @memberという変数の中に [ "012,234,567", "8910,111213,141516", ・・・ ] のような文字列の配列があるとします。 これを(/,/)でsplitして [ ["012","234",567] ["8910","111213","141516"] [・・・] ] （・・・は同じような配列が続いているだけです。） のような配列に変更したいと思っていますが うまくいきません。 @member.each do |mem| mem.split(/,/) end のような書き方でやってみましたが、結果は変化なし。 @member.each do |mem| #mem.split(/,/) mem =mem.split(/,/) #結果の処理内容をここに end と書くと、このループ文の中でしか機能しません。 どのような書き方をすれば変数にsplitした結果を 取り込めるのでしょうか。 どうぞ宜しくお願いいたします。
Windows環境でRuby 1.8.7を使用しております。 ----sample1.txt----- hoge"foo\"bar\"foo"hage"bar\"baz\"bar"hoge ------------------ ファイルから1行ずつテキストを読み込んで処理を行います。上のsample.txtの様な行を読み込んだ場合にダブルクォートで囲まれた部分 foo\"bar\"foo bar\"baz\"bar を取り出すのにはどの様な正規表現を用いればよろしいでしょうか？ エスケープされたダブルクォートを除ける上手い方法がわかりません。 また、ダブルクォートで囲まれた部分が複数行にまたがる場合はどの様に処理をすれば良いでしょうか？ -----sample2.txt----- hoge"foo \"bar\" baz" hage ---------------------- -----sample3.txt----- hoge"foo \"ba r\"baz" hage ---------------------- 最初の例のように1行の場合は File.foreach(file) do | line | …… end で良いのですが、複数行の場合には同じように単純には行きません。 ダブルクォートの数を数えて、奇数の場合は偶数になるまで次行をくっつける様な処理を考えているのですが、もっと適切な方法はありますか？ 宜しくお願いします。
文字列から最初の/～/までを切り取りたいです。 たとえば、"/aaa/bbb/ccc"の場合、"/aaa/"です。 そこで、subを使って以下の様に書いてみました。 puts "/aaa/bbb/ccc".sub(/(\/.*?\/)/,'\1') しかし、/aaa/bbb/cccと表示され、期待した結果が得られません。 以下の様にすると、 /(\/.*?\/)/=~"/aaa/bbb/ccc" puts $1 期待通り/aaa/が表示されるのですが、正規表現はsubのときと同じだし、 subの使い方の何が悪いのかわからなくなってしまいました。 ご指導のほど、宜しくお願いいたします。
Ruby on Railsで作成したものをApacheで動かそうとしたのですが、 「public/dispatch.cgi」などのファイルが存在しませんでした。 「.htaccess」も作成されていないようです。 InstantRails(Rails 2.0.2)で作成したものには上記ファイルは存在します。 何か必要なものがあるのでしょうか？ 環境 -Windows XP + coLinux -Debian 5.0.2 -ruby 1.8.7 -rails 2.3.3 railsはapt-getとgemと両方入れています。 （どこかのサイトを参考にしたのですが、失念してしまいました・・・。） 入力 $ cd /var/www/rails $ rails myapp $ cd myapp $ script/generate scaffold note line:string $ rake db:migrate ls -a publicの結果 . 404.html 500.html images javascripts stylesheets .. 422.html favicon.ico index.html robots.txt
Nokogiriを使ってHTMLを処理したいのですが、 以下の点で困っています。 【HTMLの内容】 <table> 　<tr> <td>…</td> </tr> 　<tr>　←(1) 　　<td> 　　　<table> 　　　　<tr>…</tr>　←(2) 　　　<table> 　　</td> </tr>　←(1) </table> このように階層構造になっているテーブルに対して table.search("tr").each { |row| 　p row } このように使うと、 (1)の範囲の<tr>が取り出された後に (2)の<tr>のが取り出されます。 同じ行に処理を複数回やってしまうため困っています。 トップ階層の<tr>だけ取り出す方法はないでしょうか？ ちなみに解析するHTMLは自作ではないので、 タグに目印をつけることはできません。 よろしくお願いいたします。
↓のchm形式のリファレンスですが http://www.ruby-lang.org/ja/man/archive/ ruby-refm-1.8.6-chm.zipを展開したものは使用できるのですが ruby-refm-1.8.7-20090729.chmや ruby-refm-1.9.1-20090729.chmが使用できません 具体的には左側の窓に項目一覧が表示されますが、その内容説明が右側の窓に表示されずに「Web ページへのナビゲーションは取り消されました」と表示されます。 使用環境は、Win XP SP3 および Win Vista SP1 です。　 使用できない理由について何かご存じの方がいらっしゃいましたらご回答をお願いいたします。
テーブルにcreated_at,updated_atにて自動保存された時間が 約8時間ほどずれてしまいます。 調べてみた結果、UNIX時間で保存されているようなのですが 回避方法が見つかりません。 どうすれば保存時間の同期がとれるでしょうか。 よろしくお願い致します。
Vista で NoEditor を C:\programfiles にインストールすると system "NoEditor " + filename が実行出来ません。 しかし、NoEditor を C:\ にインストールすると実行できるようになったのですが、今度は ファイルの関連付け で NoEditor が利用できません。 上記の何れかについての解決法についてアドバイス頂けないでしょうか？
Ruby初心者です。 rexmlを用いてXMLを扱うことになったのですが、出力がうまくいきません。 XMLファイル <hoge> <item> <name>○○○</name> <data>・・・・・</data> <data>・・・・・</data> </item> <item> <name>○○○</name> <data>・・・・・</data> <data>・・・・・</data> </item> </hoge> 上記のようなXMLファイルから<name>と<data>を取り出して出力しようと思っています。 見よう見まねで以下のようなコードを書いたのですが、これだと複数ある<data>が１つしか取れませんでした。 xml = REXML::Document.new(open("・・・・")) xml.elements.each("hoge/item") {|line| puts line.elements["name"].text puts line.elements["data"].text } ※都合で簡単に書き直したものをテストせずに載せています すべての<data>を出力したいのですが、どう書き直せばよいでしょうか？ ご教授願います。
ruby on railsのフォームで以下のように書いたのですが、 <%= select 'member', 'sex', [ [ "男", "1" ] , [ "女", "2" ]] %> 新規登録時には問題なく登録されるのですが、編集する際に、新規登録時に 女を選んだにもかかわらず、男が選ばれた状態になってしまいます。 編集時に女が選ばれた状態にするにはどこをどのように修正すればいいのでしょうか? よろしくお願いします。
rubyで整数同士の割り算をすると、割り切れないときに小数はきりすてされるようですが、切捨てしたくないときはどうしたらよいのでしょうか 例 a = 1 b = 100 printf("%5.5f / %5.5f = %5.5f\n",a,b,a/ b) 結果 1.00000 / 100.00000 = 0.00000 となってしまいます 1.00000 / 100.00000 = 0.01000 となってほしいです 割り算のまえにto_fする方法を試しましたが結果は同じでした a = 1 b = 100 a.to_f b.to_f printf("%5.5f / %5.5f = %5.5f\n",a,b,a/ b) よろしくお願いします！
こんにちは。始めまして。 どこに質問して良いのか迷ったのですがここで質問させて下さい。 現在さくらのレンタル鯖にredmineというwebプロジェクト管理アプリケーションを導入したく 色々情報をかき集めて、設定していったのですが何度やってもweb上でHTTP500エラーが出てしまいます。 大まかに自分が行った事を記載しますのでもし間違い等ありましたら指摘してくれるとうれしいです。 ■$HOME/local　に必要環境をインストール (1)rubyのインストール(1.8.6) (2)rubygemのセットアップ(1.3.1) (3)railsのセットアップ(2.1.2) (4).bashrc ファイルにパスを通す (SQLは最初からさくらのサーバーに入っているそうです) ■$HOME/rails/redmine　にredmine(0.7.3)をインストール $ cd $HOME/rails $ wget redmine-0.7.3.tar.gz $ tar zxvf redmine-0.7.3.tar.gz $ mv redmine-0.7.3.tar.gz redmine $ cd redmine $ chmod o+w tmp log ■redmine/config のデータベース設定の編集 $ cd $HOME/rails/redmine/config $ cp database.yml.example database.yml $ vi database.yml ↓変更前 /*---------------------------------------------------*/ production: adapter: mysql database: redmine host: localhost username: root password: encoding: utf8 /*---------------------------------------------------*/ ↓変更後 /*---------------------------------------------------*/ production: adapter: sqlite3 database: db/redmine.db timeout: 5000 /*---------------------------------------------------*/ ■データベースの作成 $ cd $HOME/rails/redmine/config $ rake db:migrate RAILS_ENV=production ここでno such file to load -- iconv言われ、iconvをインストール 更にno such file to load -- sqlite3と言われ、 $ gem install　sqlite3-ruby 再度 $ rake db:migrate RAILS_ENV=production $ rake redmine:load_default_data RAILS_ENV=production ■アプリケーションの実行環境設定　設定ファイルの変更 (1) $ cd $HOME/rails/redmine/config $ vi environment.rb 先頭に以下を追加 /*---------------------------------------------------*/ $LOAD_PATH.push("/home/***/local/lib/ruby/site_ruby/1.8") $LOAD_PATH.push("/home/***/local/lib/ruby") ENV['GEM_HOME'] ||= '/home/***/local/lib/ruby/gems/1.8' ENV['PATH']+=':/home/***/local/bin' /*---------------------------------------------------*/ (2) $ cd $HOME/rails/redmine/public $ vi .htaccess 以下の行をコメントアウト #Options +FollowSymLinks +ExecCGI (3) $ cd $HOME/rails/redmine/public $ cp dispatch.cgi.example dispatch.cgi $ vi dispatch.cgi 文頭の /*---------------------------------------------------*/ #!/usr/bin/ruby　 /*---------------------------------------------------*/ の部分を /*---------------------------------------------------*/ #!/home/***/local/bin/ruby ENV[’RAILS_ENV’] ||= ‘production’ /*---------------------------------------------------*/ に変更 ■webサーバーで表示するようシンボリックリンクを作成 $ cd $HOME/www $ mkdir test $ ln -s $HOME/rails/redmine/public $HOME/www/test/redmine このような設定で、http://***.sakura.ne.jp/test/redmine/にアクセスすると トップページが表示されるはずなのですが、何度やり直してもHTTP500エラーになってしまいます。 どなたかこれだけの情報で、間違いの点に気づく方いましたら教えてもらえるとうれしいです。 よろしくお願いします。
最近Ruby on Railsを始めました。 モデルで使用しているメソッドでsendというものがありますが、 このsendとは何をしているものなのでしょうか？ 私の感覚では @model.send("column=", xxxx) は @model.update_attribute(:column, xxxxx) と同義だと考えております。 ※　一応ネットでも調べましたが、明確なことが記載されているサイトを見つけることができませんでした。。。 質問は １．上記の考えは正しいでしょうか？ ２．上記２つの違いはなんでしょうか？ ３．sendを実行したとき、すぐにDBに反映されるのでしょうか？ ４．sendについて詳しく記載されているサイトがあればご教授願います。 初心者で拙い説明で申し訳ありませんが、ご教授お願いいたします。
a = [1, 2, 3, 4, 5, 6, 7, 8, 9] b = [a, b, c, d] 上記みたいな配列があったとして1a, 1bみたいな組み合わせのすべてのパターンを取り出すアルゴリズムを考えています。 1配列内の数は不定、配列自体の数も不定という条件です。 たとえばここにc = [z, y, x]という配列が加わると 1az, 1ay, 1ax みたいな感じで抽出します。 ですが、あまりいい方法が浮かびません。再帰を使えばいいというのはわかるのですが数が不定というのが複雑でイメージがわきません。 いいパターン抽出のやりかたがあれば教えてください。 お願いします。
RubyOnRailsのラジオボタン 遅まきながらRubyOnRailsを勉強中です。 スーパーの商品のカテゴリを登録する画面です。カテゴリをラジオボタンで選択します。 主要部分、以下のコードで動きます。 ==== <% form_for(@item) do |f| %> <p> <%= f.label :name %><br /> <%= f.text_field :name %> </p> <p> <%= f.label :category_id %><br /> <label><%= f.radio_button "category_id",'1' %>野菜</lablel> <label><%= f.radio_button "category_id",'2' %>魚</lablel> <label><%= f.radio_button "category_id",'3' %>加工食品</lablel> <label><%= f.radio_button "category_id",'4' %>グロッサリー</lablel> </p> <p> <%= f.submit 'Update' %> </p> <% end %> ==== しかしこれは間違いです。理由はカテゴリテーブルがあり、そこから取得しなければなりません。 以下のように変更しました。 ==== <% @categories = Category.find(:all) %> <% form_for(@item) do |f| %> <p> <%= f.label :name %><br /> <%= f.text_field :name %> </p> <p> <%= f.label :category_id %><br /> <% for @category in @categories %> <label><%= f.radio_button "category_id","@cateroy.id" %><%= @category.name %></label> <% end %> </p> <p> <%= f.submit 'Update' %> </p> <% end %> ==== つまりテーブルから読んで、その値でラジオボタンを表示しました。 結果、画面は表示されます。 しかしsubmitして、itemにcategory_idが設定されません。 お分かりの方、よろしくお願いします。
RailsもMySQLも初心者です。 簡単な検索モデルを作っていますが、次のようなfindメソッドを使った検索の条件指定で、"name"の部分に複数の検索語句をor条件で指定することはできますか？ 　@users = User.find(:all, :conditions => ["family_name LIKE ?", name]) 検索対象は文字列です。 ("name1" or "name2")とか("name1" || "name2")などとやってみたのですが、最初の検索語句しか認知してくれないようです。 もしできるのでしたら、:conditionsの部分をどのように書いたらいいか教えてください。 Railsのバージョンは1.1.2です。 よろしくお願いします。 ※先ほど勘違いして同じ質問をいったん削除してしまいました。 　もしご覧になっていた方がいらしたら申し訳ありません。
Ruby on Railsを利用したオープンソースのCMS(Rubricks)で作成しているのですが。。 チェックボックスで複数選択した情報をＤＢへ保存する方法が分かりません。 【状況】 Ｃ コントローラ @kudamonos = Kudamono::KudamonoKind.find(:all) Ｖ ビュー <% @kudamonos.each do |kudamono| %> <span style="white-space:"> <%= check_box kudamonos",kudamono.id, :checked => nil %> <%= hl(kudamono.kudamono_name) %> </span> <% end %> check_box_tag はうまくいきません。。 ＤＢ mysql> select * from kudamono_kinds; +----+---------------+ | id | kudamono_name | +----+---------------+ | 1 | りんご | | 2 | みかん | | 3 | いちご | +----+---------------+ mysql> select * from kudamono_masters; +----+------------------+----------------+ | id | kudamono_name_id | select_buy_id | +----+------------------+----------------+ | 1 | 1 | 1 | | 2 | 2 | 1 | | 3 | 3 | 1 | +----+------------------+----------------+ select_buy_id 　は今は無視して下さい。 チェックボックスですべてチェックした場合上記の用に保存したいです。 説明不足ですが、どなたか教えていただきらいです。
railsのtime_selectで作成したフォームの値でDBへのInsertやUpdateが上手くいきません。 具体的にはtime_selectでフォームを作成すると、 Controllerには以下のような変数がくると思います。 (1i) 2009 (2i) 05 (3i) 22 (4i) 10 (5i) 10 ただ、これをそのままDBへ送ると「XX:10:10」のように、 時間の部分が分に、分が秒になってしまい、時間の箇所にはよく分からない数字が入ります。 （DBへのInsert、Updateは「paramas[:Controller名]」で 取得したものをそのままcreate、update_attributesしています。） hidden_field_tagで(6i)を作成したり、 time_selectのinclude_secondsを有効にすると正常になるのですが、 根本的な原因は何なのでしょうか？ (rubyは1.8.7、railsは2.2.2です。) ご存知の方はよろしくご教示願います。
Railsでコントローラーをつかわずにtest_controler.rbとindex.rhtmlを作成して各ディレクトリに置きました。コントローラーはdef index endだけのシンプルなものです。インデックスは空ページです。これでアクセスしたところ500エラーになりました。ジェネレータから作成しなければいけないのでしょうか よろしくお願いします。
クエリパラメータを取得するのにCGIクラスを使っています。 Rubyのマニュアルでは『フォームフィールドの値を得る』として以下の様に記載してあります。 require "cgi" cgi = CGI.new values = cgi['field_name'] # <== 'field_name' の配列 私が使用しているサーバはWindowsサーバでして、取得したクエリ（フォームフィールド）は文字コードをs-jisに変換して使う事が大半です。 そこで、CGIクラスそのものを改造して、いちいちvalues.tosjisしなくてもよい様にしたいです。 実は以前に、同じような事を質問してまして（http://oshiete1.goo.ne.jp/qa4944090.html）alias を使えばこのようなことが出来るかなと思い、以下の様に書いてみました。（行頭は全角スペースです。） #!/usr/local/bin/ruby require 'cgi' require 'kconv' STDOUT.binmode STDIN.binmode class CGI 　alias :initialize_orig :initialize 　def initialize() 　　hash=initialize_orig() 　　hash.each do|key,val| 　　　hash[key]=val.collect{|x|x.tosjis} 　　end 　　hash 　end end cgi=CGI.new if cgi.has_key?('arg') then 　STDERR.puts cgi['arg'] 　cgi.out(){'ok'} end 結果は `initialize': undefined method `each' for nil: NilClass (NoMethodError) で実行不可でした。 initializeはリターンできないからかな。 次に、 class CGI 　alias :params_orig :params 　def params() 　　hash=params_orig 　　hash.each do|key,val| 　　　hash[key]=val.collect{|x|'*' + x + '*'} 　　end 　hash end end などとも書いてみましたが、 undefined method `params' for class `CGI' で実行不可でした。 ご指導のほど、よろしくお願いいたします。
railsのscaffoldで作成したnew.html.erbのページに日付や時間を入力できるselectboxを複数個作成し、 その値をControllerで取得したいのですがどうすればよいでしょうか？ date_selectやtime_selectを使うとviewは簡単に作成できるのですが、 selectboxが複数個あり、(1i)、(2i)のように変数がControllerにくるので上手く取得する方法が分かりません。 （for文を使ってnameをdate1、date2とかにしておいて、 Controllerでそれを指定、後はハッシュからデータをとるしかないですか？） 以上、よろしくお願いいたします。
Railsが入っているレンタルサーバーを探しています。 できればバージョンは２で さくらにインストールできるとの記事もありましたが、レンタルでなく専用サーバだから権限があり、実現できることで、廉価なレンタルサーバを探しています。 LHXというレンタルサーバがあるらしいのですが、評判が悪く、Ruby環境も...とのことで、いろいろ探しています。 ぜひ、些細な情報でも、知識でも、サイトでもいいので、お教えください！ Railsで開発できるレンタルサーバがほしいです。
Rubyでwebサイトを作成しようとしています。 とある本に「scaffoldして作るには手間がかかる。・・・」 とかいてありました。 自分としてはscaffoldを利用しようと考えていたのですが。 たくさんの画像データを扱うサイトです。 何か思うところがありましたらぜひ教えてください。
Ruby on Rails でプルダウンを使ったページを作ってます。 プルダウンを選択すると、別のプルダウンの内容が変更されるというものです。 それ自体はjavascriptを使えばできるのですが、プルダウンの内容はDBに保存されてあるものから引っ張って使いたいと思ってます。 javascriptではDBの内容は引っ張ってこれないと思うのですが、 Railsでこういうことができるのでしょうか。 よろしくお願いします。
Ruby on Rails に関して質問です。 scaffoldができません。 #rails rn2 -d mysql でrn2というDBができるのらしいですが、mysqlにログインしてDBを確認しても見つかりませんでした。 そもそも #ruby script/generate scaffold hogehoge name:string id:integer という記述を実行し、テーブルを作ろうとしていて、 「Missing the Rails 2.3.2 gem. Please `gem install -v=2.3.2 rails`, update your RAILS_GEM_VERSION setting in config/environment.rb for the Rails version you do have installed, or comment out RAILS_GEM_VERSION to use the latest version installed.」 となった問題を解決しようとしています。 railsは2.3.2で入っているのにこのエラーメッセージが表示されました。 参考になるサイトを教えていただけると幸いです。 よろしくお願いします。
#!/usr/local/bin/ruby require 'cgi' require 'kconv' headers={ "status"=>"OK", "type"=>"text/html; charset=utf-8" } cgi=CGI.new hoge=cgi['arg'] cgi.out(headers){Kconv.toutf8(hoge)} 上記はcgiはクエリパラメータargに与えた文字列がUTF-8で表示される 物の基本骨格として記しました。 実際に作りたい物は、もう少し複雑で、cgi.outのブロックに渡す部分 は、ケースにより複数あります。 そこで、毎回ブロックに渡す部分をKconv.toutf8でくくるのは、如何な ものかと思い、CGIクラスそのものを改造して、 cgi.out(headers){hoge} と記述しても、UTF-8で出力されるようにしたいのですが、やり方が解 りません。 CGIクラスのoutメソッドをオーバーライドするのかなぁ？ と思うのですが、オーバーライドってやった事が無いので、 手がかりがつかめません。 お手ほどきの、よろしくお願いいたします。
RUBY1.8.6から1.9.1へバージョンアップをしようと思ってます。 サイトからバージョンのソースコードをダウンロードしたのですが、やり方を教えてください。 srcフォルダに古いバージョンのフォルダがあるので、差し替え的な感じでしょうか？
Rubyには「ダック・タイピング」が可能とのことを知りました。 しかしその有用性がわかりません。 ダック・タイピングのメリットを教えてください。 Wikipediaには以下のように書いてありました。 ダック・タイピング - Wikipedia http://ja.wikipedia.org/wiki/%E3%83%80%E3%83%83% … 「オブジェクトがあるインタフェースのすべてのメソッドを持っているならば、たとえそのクラスがそのインタフェースを宣言的に実装していなくとも、オブジェクトはそのインタフェースを実行時に実装しているとみなせる」 とりあえず意味はわかりました。しかし、すべてのメソッドを実装する努力をしながらインターフェイスの宣言をしないメリットがわかりません。そのインターフェイスを使うことがわかっているのなら宣言すればいい話だと思いますし、宣言を記述しなくて済むというメリットしかないということもないと思います。 ダック・タイピングのメリットを教えてください。 よろしくお願いします。
Rails初心者です。 Railsでアプリケーションを構築する場合、何か良い方法はありますか？ たとえば、アクション内でオブジェクトの中身などをみたくて p myObjや pp myObj などということをしても、テンプレートに遷移して出力されません。（pの後にexitをしても、exit専用画面？になって、結局出力がみれず） ruby-debugというものがあるようなのですが、passengerを使った場合は動作しないようでした。 何か良い方法があれば教えてください。よろしくおねがいします。
rubyでのプログラム作成についての質問です。 パスワードの変更画面を作成したいのですが、作り方がよくわかりません。 会社でrubyを使用したプログラム作成を命じられましたが、社内にrubyを使用できる人がいないので質問できず困っています。 パスワードを変更する際に、パスワードの入力と確認用パスワードの入力をして、 双方が一致したらパスワードを変更、双方が不一致ならエラーメッセージを表示するようにしたいのですが、どうしたらいいのでしょうか。 現在、コントローラ内は以下のようになっています。 def new @user = User.new respond_to do |format| format.html # new.html.erb format.xml { render :xml => @user } end end def create @user = User.new(params[:user]) if(params[:password]!=params[:password_confirm]) ←ここでパスワードと確認用パスワードをチェック？ flash[:notice] = 'パスワードが間違っています。' redirect_to:back return end respond_to do |format| if @user.save flash[:notice] = 'User was successfully created.' format.html { redirect_to(@user) } format.xml { render :xml => @user, :status => :created, :location => @user } else format.html { render :action => "new" } format.xml { render :xml => @user.errors, :status => :unprocessable_entity } end end end パスワードチェックをしているつもりはあるのですが、パスワードと確認用パスワードが違っていても現在は登録処理がされてしまいます。どうしたらいいのでしょうか。 大変困っているのでどなたか教えてください。
RoRバージョン：2.3.2 Rubyバージョン：1.8.5 config/routes.rbで次のように設定して、 --------------------- map.resources :person --------------------- app/views/persons/show.rhtmlに、次のように記述したファイルを作成しました。 --------------------------------------------------------- <p>ここはshowアクション</p> <p><%= link_to 'edit_person_path', edit_person_path(1) %> <p><%= link_to 'person_path', person_path(1) %></p> <p><%= link_to 'person_path', person_path(1), :method => 'delete' %></p> ---------------------------------------------------------- それぞれ作成されるリンクは、editアクション、showアクション、destroyアクションへのものとなりますが、最後のリンクだけは:methodオプションを指定して作成する必要があります。 http://guides.rubyonrails.org/routing.html#urls- … を見ると、 link_to 'person_path', person_path(1) とするだけでdestroyアクションへのリンクが作成できるような感じで読み取れましたが、どうしてもその通りにするとshowアクションへのリンクになってしまいます。 （showアクションと曖昧なので、それだけではできるわけありませんが。。） で、質問ですが、どのようにすれば:methodオプション、CRUD形式、名前付きルーティングを使わずに（つまりRestfulに）destroyアクションを呼び出すリンクを作成できますか？ 無理ぽいのであれば、そういった回答も頂けるとうれしいです。
ruby初心者です。 最近、ruby on railsで書かれたソースを引き継ぎ解析を行っています。 その中で、以下のような構文が出てきました。 ========================================= num = 0 bool = false vals = '' puts 'start' num == 0 && bool && if vals 　puts 'true' else 　puts 'false' end puts 'end' ========================================= 上記プログラムを実行すると、if ～ end までが実行されませんでした。 そこで、変数boolをtrueに変更して再実行したところ、if文が実行されました。 そこで私は、上記プログラムは以下と同値であると解釈しました。 ====================================== （省略） if num == 0 && bool 　if vals 　　puts 'true' 　else 　　puts 'false' 　end end ======================================= 以上を踏まえて・・・ １．私の解釈は正しいでしょうか？ ２．間違っている場合、正しい処理の解釈を教えていただけますでしょうか？または参考URLを教えていただけますと助かります。 文の最後に"&&"がついている文を見たことがなく、ネットで調べても 正解らしいものが掲載されていなかったので質問させていただきました。 拙い説明で申し訳ありませんが、よろしくお願いいたします。
gemでrailsを指定ディレクトリにインストールをしようとしているのですが、railsのインストールでエラーが出てしまいます。 rubyはもともと入っており、管理者権限などが無いため、 rubygemsを指定ディレクトリ以下にいれgemコマンドで ←gem install rails --include-dependencies を投入したところ、 →ERROR: While executing gem ... (NameError) uninitialized constant Digest::MD5 のエラーが表示されてしまいます。 gem -vなど、正常に実行されるコマンドもあります。 原因などわかる方がいらっしゃれば、教えていただきたいです。 ・バージョン、場所 rubygems：1.3.1 　指定ディレクトリ/rubygems ruby：1.8.7 /usr/local/lib/ruby
クラスメソッド“say”を定義しました。 クラス外からこれを呼び出すときは Hoge.say 'hello' で、同じクラス内の、インスタンスメソッド“hello”からクラスメソッド“say”を呼び出したいとき、クラス外から呼び出すのと同じように呼び出すことはできました。 class Hoge 　def self.say(word) 　　puts word 　end 　def hello 　　Hoge.say('hello') 　end end しかし、メソッド“hello”内にHogeというクラス名を直書きしたくないのですが、どんな文法を使用すればよろしいでしょうか？ # Hoge#hello内での試行錯誤 self.say 'hello' => エラー say 'hello' => エラー ひょっとして、クラス名を直書きする以外手段はないのでしょうか・・？
RubyOnRailsでMicrosoftSQLServerをDBとしたアプリを作ろうとしているのですが、正常に動作せず、 no such file to load -- deprecated というエラーが出てしまいます。 どなたか、回避策をご教授願えないでしょうか？ ネット上で調べた限りでは、 gem install deprecated でdeprecatedをインストールしてあげれば、改善するという書き込みもあったのですが、deprecatedのパッケージがないというエラーで失敗してしまいます。 環境：NetBeans6.5 OS:WindowsXP DB：MicrosftSQLServer　Express2005 よろしくお願いします。
【データベース】 テーブル名：Fruits +----+---------+ | id | name | +----+---------+ | 1 | りんご | | 2 | みかん | | 3 | なし | | 4 | パイン | +----+---------+ 【コントローラ】 @fs = Fruits.find(:all) 【ビュー】 <% @fs.each do |f| %> <span style="white-space: nowrap;"><%= check_box "fs", f.id, :checked => nil %><%= hl(f.name) %></span> <% end %> 【ログ】 りんごとパインを選択しました。 Parameters: {"fs"=>{"1"=>"1", "2"=>"0", "3"=>"0", "4"=>"1"}} チェックリストで選択した値を得たいのですがどのようにしたら得られますか？？
"cronで /dog/cat/bird の中の一日より前の古いファイルを消す"というプログラムを作っていただけませんか？ 完全に初心者で本を見ながらなんですがどうしていいか分かりません。。 ※Rubyでお願い致します。 ※1文1文説明を付けてくださるとありがたいです。。 どうかお願い致します。。。。。
プログラミング初心者です。 fifiaのランキングのページ（http://www.fifa.com/worldfootball/ranking/lastra …）を対象にして、スクレイピングを行おうとし、 require("win32ole") ie =WIN32OLE.new("InternetExplorer.Application") でIEオブジェクトを取得し、 ie.visible =true ie.Navigate("http://www.fifa.com/worldfootball/ranking/lastra …) while ie.busy == true sleep 0.1 end ここまではいいのですが、表の中の値を取得しようと ie.document.getelementsbytagneme("td") を実行してみてもnilが帰ってきてしまいます。 HTMLのソースを表示してみても<td>タグは含まれているはずなのですが、試しにie.document.getelementsbytagname("td").lengthを実行してみると０が返ってきてしまい、どうしたらいいのかさっぱりわからない状態です。 ie.document.getelementsbytagname("div")などはちゃんと機能するので、おそらく問題の原因は<td>タグがAJAX.updaterメソッドを使ったページの内容更新の対象となっていることだと思うのですが、いかんせん不勉強で解決方法がわかりません。 どなたか詳しい方、ご教授していただけないでしょうか。
Rubyでexpectライブラリを利用して、対話的な処理を自動で行おうと思っています。 その場合に、条件文(if文)をどうやって書いていいのか分からず困っています。 ※条件文の必要のないサンプルプログラムは検索したところいろいろあったのですが・・・ 例えば spawn("ssh #{hostname}") do expect(/User \(.*\): /) { |match| user } expect(/[Pp]assword: /) { |match| pass } expect(/[\>\$] /) {|match| command } このcommmandの実行結果がAならば expect(/A/) {|match| command2 } そうではなくBならば expect(/B/) {|match| command3 } end ぜひよろしくお願いいたします。
【行いたいこと】 RailsでRESTフルなリソースを扱うアプリを開発しています。 アプリはユーザ認証機能を備えており、 RESTフルなリソースの操作(作成や削除など)はログインしたユーザだけが行えます。 ログインしていないユーザがこれらの操作をおこなうリクエストを送ってきた場合には、 認証ページに遷移させ、ユーザがログインした直後に、 ユーザ操作なしで当初のアクセスに対する操作処理を行いたいです。 【もくろみ】 ログインしたユーザだけが行える操作へのアクセスは、 フィルタ(before_filter)を使いインターセプトし、 ログインしていないユーザの場合には認証ページにリダイレクトします。 インターセプタ時点でリクエスト情報をセッションに格納しておき、 ログイン後にセッションからリクエスト情報を取り出し、 その情報を使ってリダイレクトすれば良いと考えました。 【問題点】 GETリクエスト(GETメソッドでのHttpリクエスト)をインターセプタした場合は上手くいきましたが、 POSTリクエストではリクエストを復元できません。 GETメソッドのリクエストになってしまいます。 リダイレクト(redirect_to)はブラウザにGETリクエストしか要求できないためです。 何か解決策はありますでしょうか。 よろしくお願いします。
f = ["1111111111111","2222222222222","3333333333333",] f.each {|l| p l.sub(/^.+$/, "aaaaaaa#{$&}bbbbbb") p l p "" } を Ruby1.8.7(2008-08-11patchlevel72)[i386-mswin32] で実行すると下記のように　.sub(・・・) での置換開始行がずれました。なぜでしょうか？教えてくださいお願いします。 "aaaaaaabbbbbb" "1111111111111" "" "aaaaaaa1111111111111bbbbbb" "2222222222222" "" "aaaaaaa2222222222222bbbbbb" "3333333333333" ""
yamlで記述した設定ファイルを読み込んで、 設定値があれば、変数にセットし、 なければdefault値を使うプログラムを書いています。 こんな感じです。 [設定ファイル(yaml)] top_dir : 　linux : /home/user 　windows : C:/Documents [ruby] conf = YAML.load_file(filename) p conf #=> {"top_dir"=>{"linux"=>"/home/user", "windows"=>"C:/Documents"}} str = "/root" str = conf['top_dir']['linux'] unless conf['top_dir'].nil? or conf['top_dir']['linux'].nil? 最後の２次元Hashのキーをチェックして、変数にセットしている 部分ですが、もっと短く書けないでしょうか？ 特にconfが３回も出てくるところに無駄を感じています。 ちなみに、Hashのキー'top_dir'と'linux'は yamlに記述があるかもしれないし、ないかもしれないという 前提でお願いします。 達人の方、ご教授お願いします。
プログラミングを始めて間もない初心者です。 windowsアプリケーションを制御対象として扱おうと、win32oleライブラリをrequireしてCOMコンポーネントを扱う方法をネット上で色々調べてみたのですがどうも腑に落ちない点・分からない点があるので質問します。 rubyリファレンスマニュアルからリンクされているサイト（http://jp.rubyist.net/magazine/?0003-Win32OLE）において、以下のような記述があります。 >COM ではインスタンスを生成するときに「COM コンポーネント」を指 >定するための ProgID を引数として WIN32OLE.new メソッドを実行し >ます。 COM コンポーネントとは、Windows に登録された、ある機能 >(たとえば、IE や MS Office の制御機能) を提供するためのもので >す。この「COM コンポーネント」を利用して作成したインスタンス を>「COM オブジェクト」とこの記事では呼んでいます。 COM オブジェク>トを作成した後は、その COM オブジェクトで定義されている「メソッ>ド」を実行することでそのコンポーネントが提供する機能を実現する >ことができます。 この文に従えば、作成したCOMオブジェクトを扱う方法を知るためにはCOMオブジェクトで定義されているメソッドを参照すれば良いこととなります。そこで自分もWIN32OLE.new("InternetExplorer.Application") によって得たCOMオブジェクトにWIN32OLE.ole_methodsを適用することでメソッドの一覧を取得しましたが、前述のサイトで紹介されているie.document.all.Item()というメソッドを探してみてもどこにも見つかりません。 これはどういうことなのかと思い、ネット上で色々とCOMとは何か、タイプライブラリとは何かなどを調べて見ましたが、いまだCOMの全体像の把握ができません。 たとえばrubyの場合、あるオブジェクトに対して使えるメソッドというのはそのオブジェクトが該当するクラスに於いて定義されているメソッド((1))及びkernelモジュールで定義されている組み込みメソッド((2))ですよね。 (初心者なのでこの理解にも間違いがあるかもしれませんがその場合はご指摘お願いします) このような考え方でいくとWIN32OLE.ole_methodsによって取得したメソッドの一覧は(1)にあたり、document.all.Item()というのは(2)にあたるのではないかという考えもできるかと思うのですが誰か正しい理解をご教授いただきたいです。 質問が長くなってしまいましたがie.document.all.Item()というメソッドがどこに定義されているのか、そういったメソッドの定義場所はCOMにおいてどのように見つけるのか、そこだけでもいいのでよろしくお願いします。
『クラスの生成に失敗』を表現したいのです。 newの戻り値にnilやfalseを返せばよいと考え、 以下の様に書いてみました。（行頭は全角スペースです。） class Hoge 　def initialize(arg) 　　return arg 　end end h = Hoge.new(false) STDERR.puts 'err' unless(h) errはputsされませんでした。（グーグルで調べるとinitializeのreturnは、返ってこないそうでした。） そこで以下の様に書きました。（行頭は全角スペースです。） class Hoge 　attr_reader :stat 　def initialize(arg) 　　@stat = arg 　end end h = Hoge.new(false) STDERR.puts 'err' unless(h.stat) なんか、ものすごく我流になってる気がします。。。 アドバイスをお願いいたします。
プログラミングを始めて間もない初心者です。 2chの国内サッカー掲示板一覧(http://ex24.2ch.net/soccer/subback.html)から 「集え」「名古屋グランパスファン」との文字列で検索したリンクを開き、取得した名古屋グランパスのスレッドの内容を表示するプログラムを書こうと、 以下のようなコードを書きました。が、 test1-9.rb:32: syntax error, unexpected tIDENTIFIER, expecting keyword_endとの警告メッセージとともにエラーになってしまいます。 #-*- coding:sjis-*- require 'open-uri' require 'uri' class Searchgra　 def initialize open("http://ex24.2ch.net/soccer/subback.html"){|g| g.each_line{|title| tsu = "集え" sup = "グランパスファン" if /(<a href="(.*)\/l50">.*#{tsu}.*#{sup})/ =~ title then @grasre ="http://ex24.2ch.net/test/read.cgi/soccer/#{$2}" end } } end def fuku open("#{grasre}") {|f| linenum = 0 f.each_line {|line| line.gsub!(/&gt;/,">") line.gsub!(/<br><br>/,"<br>\n") if /<dd>/ =~ line then linenum += 1 end /<dd>.*<br>\n/ =~ line print linenum,";","#{$&}".gsub!(/<.*?>/,"") print("\n")　#ここが32行目 } }　 end end search1 = Searchgra.new() search1.fuku ネットで様々な情報を見てみましたが原因が分からず、 またエラーメッセージ中のtIDENTIFIERとはいったい何なのかも分かりません。 ソースコードの間違い等、指摘をよろしくお願いします。
お世話になります。標記の件でご質問なのですが、 現在時間 t1 = 08:25:10 通信時間 t2 = 10.2　(sec) 上記のような形式で値が与えられており、現在時間より通信時間分だけ 差し引き、通信開始時間を(**:**:**)の形で算出したいのですが、 良い手段がございますでしょうか。
お世話になります。現在Rubyのプログラムを生成しております。 CSVを出力加工するプログラムで、処理の流れは以下のとおりです。 1) 処理対象となるCSVファイルより、値を1つずつ取り出す 　records = Array.new(1) 　test_field_1 = PARAMETER.new(records[1].to_s) 　test_field_2 = PARAMETER.new(records[2].to_s) 　... 　... 2) initializeメソッドへ渡し、インスタンス変数「@parameter」 　 へ上書きし渡す。 　　def initialize(p) 　　　　@parameter = p 　　end 3) 出力時に(オブジェクト名.メソッド名)にて、メソッド処理を 　 行う。 　　printf(test_field_1.TEST_FIELD_1) 　　printf(test_field_2.TEST_FIELD_2) 　... 　... 概ねの処理は、これで解決できるのですが、一箇所だけ前パラメータ 値を保持させたまま、次のパラメータを処理させたいのです。 具体的に申し上げますと、 1) test_field_100 = PARAMETER.new(records[100].to_i) 　　def TEST_FIELD_100 　　　　@parameter = @parameter / 100 　　end 　⇒ ここの@parameterの値を保持したまま、次のメソッドの処理を 　　 行いたいのです。 うまいプログラムの書き方があれば、ご教示頂ければ助かります。 よろしくお願いいたします。
HTTP POSTについてお聞きしたいです。 http://ligin.weizmann.ac.il/~lpgerzon/mbs4/mbs.cgi のページに、自動で入力を投げて答えを返してもらうスクリプトを書きたいです。 dataに、Inputする文字列を&でつないで、 Net::HTTP.start('ligin.weizmann.ac.il', 80) {|http| response = http.post('/~lpgerzon/mbs4/mbs.cgi',data) puts response.body } という方法で実行してみたのですが、 帰ってくる出力が、上記のURIのソースのままになってしまいます。 GUIでクリックして入力した場合は、末尾がmbs3.cgiのページに移動するはずなのですが、 なぜか上手く入力を与えることができません。 説明が曖昧で申し訳ありません。 アドバイスなどだけでも構いませんので、 よろしくお願い致します。
Rubyでは変数に$がつかなくなっていますが、Perlでは$がついています。 Perlの作者が変数に$をあえてつけた理由が、 自分にはわかりません。 けど何か理由はあるはずだと思うんです。 どういった理由が考えられますでしょうか？ また、それをはずしてしまったRubyは大丈夫なんでしょうか？
Apache上にて Railsアプリケーションを動作させたいために、 Apacheのモジュールである、”Phusion Passenger”をインストールしようと思ったのですが、 C:\>gem install passengerにて以下のエラーがでます。 ************↓ここから**************************************** Building native extensions. This could take a while... ERROR: Error installing passenger: ERROR: Failed to build gem native extension. c:/ruby/bin/ruby.exe extconf.rb install passenger creating Makefile nmake Microsoft(R) Program Maintenance Utility Version 8.00.50727.762 Copyright (C) Microsoft Corporation. All rights reserved. cl -nologo -I. -Ic:/ruby/lib/ruby/1.8/i386-mswin32 -Ic:/ruby/lib/ruby/1. 8/i386-mswin32 -I. -MD -Zi -O2b2xg- -G6 -c -Tcnative_support.c cl : コマンド ライン warning D9035 : オプション 'Og-' の使用は現在推奨されていま せん。今後のバージョンからは削除されます。 cl : コマンド ライン warning D9002 : 不明なオプション '-G6' を無視します native_support.c native_support.c(22) : fatal error C1083: include ファイルを開けません。'sys/un. h': No such file or directory NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 8\VC\BIN\c l.EXE"' : Stop. Gem files will remain installed in c:/ruby/lib/ruby/gems/1.8/gems/passenger-2.0. 6 for inspection. Results logged to c:/ruby/lib/ruby/gems/1.8/gems/passenger-2.0.6/ext/passenger/g em_make.out ************↓ここまで**************************************** 環境変数などの問題かとも思いましたが。。。bin/lib/includeのパスも追加しましたがダメでした。 是非この問題の対応が分かる方は教えて下さい。 環境：： OS:Windows XPPro SP3 ruby 1.8.6 (2007-09-24 patchlevel 111) [i386-mswin32] Rails 2.3.0 gem 1.3.1
以下は、Yhooファイナンスからの株価ダウンロードプログラムらしいのですが、私にはどういったことをしているのか、いまいちわかりません。 どなたか解説していただけませんか。 require 'open-uri' require 'nkf' require 'jcode' require 'date' $KCODE='s' # 漢字コードをEUCに。Windowsでは 's' #＊＊＊＊シフトJISに変換＊＊＊＊ class String def to_sjis henkan = NKF.nkf('-s', self) henkan end end #＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊ today = Date::today regEx = '(\d+)年(\d+)月(\d+)日<\/small><\/td><td><small>([\d,]+)<\/small><\/td><td><small>([\d,]+)<\/small><\/td><td><small>([\d,]+)<\/small><\/td><td><small><b>([\d,]+)<\/b><\/small><\/td><td><small>([\d,]+)<\/small><\/td><td><small>([\d,]+)' 1301.upto(9999) do |meigara| begin begin meigaradatafile = open("#{meigara}.csv" , "r" ) rescue puts "#{meigara}" + 'は存在しません' meigaradatafile = open("#{meigara}.csv" , "w" ) meigaradatafile.close meigaradatafile = open("#{meigara}.csv" , "r" ) end meigaradata = meigaradatafile.readlines if meigaradata == [] lastdate = Date::new(1983 , 1 , 4) else meigaradatalastline = meigaradata[meigaradata.length-1].split(/\s*,\s*/) lastyear = meigaradatalastline[0] lastmonth = meigaradatalastline[1] lastday = meigaradatalastline[2] meigaradatafile.close lastdate = Date::new(lastyear.to_i , lastmonth.to_i , lastday.to_i) if lastdate >= today next end lastdate = lastdate + 1 end starttime = Time.now temp2 = String.new max = today - lastdate 0.step(max , 50) do |i| begin f = open("http://table.yahoo.co.jp/t?s=#{meigara}.t&a=#{lastdate.month 5;&b=#{lastdate.day}&c=#{lastdate.year}&d=# 23;today.month 5;&e=#{today.day 25;&f=#{;today.year}&g=d&q=t&y=#{i}&z=#{meigara}.t&x=.csv") rescue TimeoutError puts 'タイムアウト　リトライ' retry end str = Array.new temp = String.new temp = f.read.to_sjis temp3 = Array.new temp.each_line do |line| line = line.gsub("," , "") if line.scan(/#{regEx}/) != [] str.push line.scan(/#{regEx}/) end end p meigara.to_s + ':' + i.to_s if str == [] break end str.each do |j| temp3.push j end temp3.each do |k| temp2 = k.join(",").to_s + "\n" + temp2 end end if temp2 != "" foo = open("#{meigara}.csv",'a') foo.puts temp2 foo.close end elapsedtime = (Time.now - starttime)/60 yosou = elapsedtime * (9999 - meigara.to_i) puts meigara.to_s + ' ' + '経過時間' + ':' + (elapsedtime.to_s) + '予想時間' + ':' + (yosou/60/60).to_s rescue retry end end
初めまして。 この度身の程知らずにもプログラムを書けるようになりたくて、Rubyの本を買ってきて1ページ目から読み始めました。 で、RubyとRDEというエディタをインストールして、「Hello World」を書いてみたのですが、実行すると、左下のコンソールウインドウには「complete(0)」と表示されるのに、同時にダイアログが開いて「ファイル doesn't exist.」と表示されてしまうんです。 プログラム保存前は、上記「ファイル」の部分がtmpファイル、保存後も「ファイル名.rb」で表示されます。 原因がまったく分からなくていきなり（本当にいきなり）つまづいてしまっています。 どなたかご教示願えませんでしょうか？ レベルの低すぎる質問ですみません。。。
Fedora10 + Eclipse3.4.1 の環境にRDTをインストールしましたが Interpreter の設定をしようと、/usr/bin に合わせてみたのですが 何度やっても /usr に戻ってしまい、ruby を起動することができません。 どこか設定方法が間違っているのでしょうか？メニューは [Window]->[Preference]->[Ruby]->[Installed interpreter] で行って います。 よろしくお願い致します。
RubyGems の「GEM」は何の略ですか？
Rubyには他の言語でよくある++演算子がないようなのですが、 なぜないのでしょうか？ 盛り込むのはそう難しくないと思うので、ないのはそれなりの思想があると思うのですが、どういう意図なのでしょうか？
class CDPlayer def playDisk(disk) puts "playing a "+disk+".\n"; end end class CDRadioCaset < CDPlayer def playRadio(channel) puts "playing a"+channel+"\n"; end def playCaset(tape) puts "playing a "+tape+"\n"; end end class DVDRPlayer < CDPlayer def playDisk(disk) puts "playing a"+disk+"\n" end def recoredDisk(disk) puts "recording to a "+ disk+". \n" end end cd=CDPlayer.new puts "CDPlayer. \n" cd.playDisk("CD") radio=CDRadioCaset.new puts "\n CDRadioCaset. \n" radio.playRadio("Radio") radio.playCaset("Caset") dvd=DVDRPlayer.new puts "\n DVDRPlayer.\n" dvd.playDisk(" CD or DVD") dvd.recoredDisk("disk") の意味わかる方、教えてください
## -*- Mode: ruby -*- ###################################################################### =begin = nth機能付き連結リストクラステスト用プログラム =end ###################################################################### require 'MyLinkedList.rb' ; n = 10 ; ##------------------------------ ## 最初のリストを作成。 # 新しくリストのインスタンスを生成 list0 = MyLinkedList::new() ; # 0からnまで順に i に入れて、繰り返す。 (1...n).each{|i| # i の自乗を先頭に挿入 list0.insertToFirst(i * i) ; } ##------------------------------ ## insertToNthのテスト puts("-" * 60) ; puts("insertToNthのテスト") ; puts("before:" + "list0=" + list0.to_s()) ; puts("insert 'foo' into 5th.") ; list0.insertToNth(5,'foo') ; puts("after :" + "list0=" + list0.to_s()) ; puts("insert 'bar' into 0th.") ; list0.insertToNth(0,'bar') ; puts("after :" + "list0=" + list0.to_s()) ; puts("insert 'baz' into 10th.") ; list0.insertToNth(10,'baz') ; puts("after :" + "list0=" + list0.to_s()) ; ##------------------------------ ## deleteFromNthのテスト puts("-" * 60) ; puts("deleteFromNthのテスト") ; puts("before:" + "list0=" + list0.to_s()) ; puts("delete 5th.") ; deletedItem = list0.deleteFromNth(5) ; puts("after :" + "list0=" + list0.to_s()) ; puts("deleted Item=" + deletedItem.to_s()) ; puts("delete 0th.") ; deletedItem = list0.deleteFromNth(0) ; puts("after :" + "list0=" + list0.to_s()) ; puts("deleted Item=" + deletedItem.to_s()) ; puts("delete 10th.") ; deletedItem = list0.deleteFromNth(10) ; puts("after :" + "list0=" + list0.to_s()) ; puts("deleted Item=" + deletedItem.to_s()) ; の意味がわかる方、教えてください
ランダムな数１５個（＝１+２+４+８個）を 二分ヒープに並べ替える次のようなプログラムを作りました。 require 'HeapByArray.rb' array=Array.new(); i=0; puts("Before") while(i<15) i+=1; array[i]=rand(100); print(" "+array[i].to_s) end puts(" "); queue=HeapByArray::new i=0; while(i<15) i+=1; queue.enqueue(array[i]); end puts("After") i=0; while(i<15) i+=1; array[i]=queue.dequeue(); print(" "+array[i].to_s); end puts(); たとえばデータが [1,11,14,9,5,2,15,7,6,4,12,10,8,3,13]ならば [15,14,13,12,11,10,9,8,7,6,5,4,3,2,1]といった風に 並べ替えられます。実行結果は Before 1,11,14,9,5,2,15,7,6,4,12,10,8,3,13 After 15,14,13,12,11,10,9,8,7,6,5,4,3,2,1 となります。 そこでこの実行結果表示をツリーの表示、つまり □□□8 □□12 □□□7 □14 □□□6 □□11 □□□5 15 □□□4 □□10 □□□3 □13 □□□2 □□9 □□□1 (□部分は空白です。ここで質問記事を投稿するときになぜか空白は無視されてしまうので□にしました。) という風になるように改良したいのですが何をすればよいでしょうか？ 詳しい方、よろしくお願いいたします。
配列を使って２分ヒープを定義したいのですが、どのように定義すればいいのでしょうか。
私はＲＰＧツクールＶＸをゲームを作っています。 Rubyに関することは全てヘルプで学びました。 なので ヘルプで説明されてない予約語（例えばalias・ensureなど）の使い方が分かりません。 詳しく説明してください。
Rubyで画像処理はどこまでできますか。 画像のなかのある特定の色を使っている四角形やら曲線やらの角の座標や外側の線の座標などを取得したいなと思うのですがそういうことはできますか？
プログラミングの初心者です。 質問させていただきたいのですが、下のようにrssを処理するプログラムを実行して結果を示していますが、文字化けになってしまっています。プログラムをどう変えたらこういった文字化けが直りますか？ エディタの文字コード指定(utf8、JIS等に）を何回か変えてみても同じような実行になります。 稚拙な質問ですみませんが、ご存知な方教えて下さい。 宜しくお願い致します。 実行結果（一部抜粋） DisplayLink遉セ縺ョ繝√ャ繝励・荵励▲縺溘ゞSB/豸イ譎カ螟画鋤蝓コ譚ソ縲６SB繝薙ョ繧ェ繝懊・繝峨°<br /> 縺薙ｌ縺ッ繝阪ず豁「繧√□縺」縺・br /> <a href="http://www.flick.com
すみません。ｒｕｂｙを学習したての者です。 以下のコードで構文エラーがでます。３つです。 どこが悪いのかまったくわかりません。 ------------------------------------------------------ puts 'じゃんけんゲーム開始' sleep 1 #プレイヤーのじゃんけん入力 puts '何を出しますか？' puts '１グー' puts '２チョキ' puts '３パー' input_value = gets #じゃんけんロボの処理 robo = rand(3) + 1 case robo when 1 puts 'ロボはグーを出した！' when 2 puts 'ロボはチョキを出した！' when 3 puts 'ロボはパーを出した！' end #じゃんけん結果判定 player = input_value.to_i case player when 1 puts 'あなたはグーを出した' case robo when 1 #ロボがグーなら puts '引き分けです' when 2 #ロボがチョキなら puts 'あなたの勝ちです' when 3 #ロボがパーなら puts 'あなたの負けです' end when 2 puts 'あなたはチョキを出した' case robo when 1 puts '引き分けです' when 2 puts 'あなたの勝ちです' when 3 puts 'あなたの負けです' end when 3 puts 'あなたはパーを出した' case robo when 1 puts 'あなたの勝ちです' when 2 puts 'あなたの負けです' when 3 puts '引き分けです' end 　 else #どの条件も成立しなかったとき puts 'あなたは何も出さなかった' puts 'あなたの負けです' end --------------------------------------------------- めんどくさいと思いますが、さらっと見て分かる方教えてください。
Ruby認定試験対策問題の解説の中で、分からない箇所があったので、教えてください。 ■問題9の一部 s = "I slit the sheet, the sheet I slit, and on the slitted sheet I sit." /sheet/.match(s).length ■説明 文字列sの中と正規表現/sheet/にマッチした全体の文字列とマッチした部分文字列の配列の数を取得します。 ■回答 => 1 ■irbで自分なりに試してみた内容 irb> s = "I slit the sheet, the sheet I slit, and on the slitted sheet I sit." => "I slit the sheet, the sheet I slit, and on the slitted sheet I sit." irb> /sheet/.match(s).length => 1 irb> /sheet/.match(s) => #<MatchData:0x2c28d30> irb> /sheet/.match(s).class => MatchData irb> /sheet/.match(s).to_a => ["sheet"] irb> /sheet/.match(s).offset(0) => [11, 16] ■疑問 ・match(s).lengthの答えが、どうして1になるか分からない。 ・説明の中の「正規表現/sheet/にマッチした全体の文字列」とは何を指すのか？ ・説明の中の「マッチした部分文字列の配列」が何を意味しているか？ ・返ってきたMatchData オブジェクトの中身は何？　 [11, 16]だけってこと？ 一応、リファレンスも覗いてみたのですが、そこに掲載されていた内容もよく理解できませんでした。 http://www.ruby-lang.org/ja/man/html/Regexp.html … bar = /foo(.*)baz/.match("foobarbaz").to_a[1] foo, bar, baz = /(foo)(bar)(baz)/.match("foobarbaz").to_a.values_at(1,2,3) さらに、そこに掲載されていた「正規表現にマッチした部分文字列だけが必要な場合に」 ってのは、どういう意味なのでしょうか。
テキストを自動分類するために、ベイズ分類器を作るプログラムを書きたいのですが、何かわかりやすいサイト(サンプルプログラムがのっているものなど)や本はないでしょうか？ ちなみにRubyかJavaで書きたいと思っています。 あまりプログラミングが得意ではないので、わかりやすいものだと嬉しいです。 よろしくお願い致します。
複数行で記述してあった箇所を、試しに一行にしてみたら、syntax errorとなりました。 改行した方が見やすいとは思うのですが、一行で書くときは、どうやればよいのでしょうか。 ■正常に動く class Foo __def print3 ____yield(1,2) __end end foo=Foo.new foo.print3{|x,y　//この部分を一行にしてみたかったのですが、 __print x,"\n" __print y,"\n" } ■エラーとなる class Foo __def print3 (略) foo.print3{|x,y|print x,"\n" print y,"\n"}　//←この行を直したいのですが、 (irb): syntax error, unexpected tIDENTIFIER, expecting '}'
カレントディレクトリにある全てのファイル及びディレクトリの変更時刻を取得したいです。 Dir.foreach('.') do |file| puts File.ctime(file) end そこで、上記Ｒｕｂｙスクリプトを作成し実行しました。 しかし、カレントに.(ドット)から始まるファイルを置いて上記rubyスクリプトを実行すると、 `ctime': No such file or directory - .htaccess (Errno::ENOENT)のエラーになってしまいます。（.htaccessをカレントに置いた例） Ｗｉｎ環境固有のものかと思いますが、なにか対策があるでしょうか？
Ruby認定試験対策問題をやっていたら、また分からないところがあったので、教えてください。 2.9-3.ブロック ■問題 次の式を実行した場合，正しい出力結果はどれか． ['foo'].each do |i| ['bar'].each do |i| print i end print i end ■回答 barbar ■解説 ブロックには変数をシャドーウィングする機能がないため ■疑問 ・barfooだと思ったのですが、どうして、正答はbarbarになるのでしょうか。 ・「変数をシャドーウィングする機能」ってどういう機能ですか？
Ruby認定試験対策問題をやっていたら分からないところがあったので、 教えてください。 2.9-1.ブロック ■問題 testメソッドに渡されたブロックのselfは次のうちどれか？ class Foo def test (1..3).each{|i| yield(i)} end end foo = Foo.new foo.test{|i| i } ■回答 トップレベル ■解説 ブロックはメソッドの呼出し先のselfを継承します ■疑問 ・testメソッドに渡されたブロックとは、(1..3)のことを指すのでしょうか。 ・メソッドの呼出し先とは、foo.test{|i| i }のことを意味しているのでしょうか。 ・呼出し先のselfとは、fooかFooのことでしょうか？ ・「selfはメソッド内で実行されるとそのメソッドを実行しているオブジェクトを参照することが出来ます」 と別のサイトに記載されていたのですが、「トップレベルのselfとはObjectクラスのメソッドを実行している」、という意味になるのでしょうか。 それがこの問題のどこに関連しているのでしょうか。
全くのプログラミング初学者がRubyを習得するにはどうすればいいのでしょうか。やはり専門学校にでも行かないとだめなのでしょうか。
def insertSort(v) $swapCount = 0 $compCount=0 until ($swapCount>= v.size-1) do　　　（A） target = v.delete_at($swapCount + 1)　（B） i = 0 until (i > $swapCount) do　　　　　（C） $compCount+=1 break if v.at(i) > target　　　　（D） i += 1 end v.insert(i, target)#targetをiに置き換える $swapCount += 1#置き換えた＝入れ替えたとき、swampCountを加算 end return v ; end 上のプログラムは挿入ソートのプログラムなのですが、.size .atなどが何を表すかがわからないので、（A）～（D）部分がないをやっているのかがわかりません・・・・。お手数ですが詳しい方、アドバイスよろしくお願いいたします。
Ruby on Railsを始めることになりそうで、色々調べているのですが、 今まで全く使ったことがないのでアドバイスの方よろしいでしょうか。 参考書など検索するとRails1.2が多くRails2.0には対応していない等の 文言を見かけるのですが、現時点でRuby on Rails初心者としたらどの バージョンを使うとよいでしょうか。 一般的なアドバイス等頂けますと助かります。 よろしくお願いします。
WEBrickのWebサーバに対して、 http://xxx.xx.xx.xx/hoge　＃サーバアドレスxxx.xx.xx.xx　ディレクトリ名hogeの例 の様にアクセスした場合、 Index of/hoge Name　　　　　　　　　Lastmodified　　　Size ---------------------------------------------- の様な形式でファイルのリストを返してくるのですが、これを無効にするにはどうしたらよいですか？
たのしいRuby P252に掲載されていた、例題 「ハッシュ(単語数を数える)」の解説を読んでも 意味が分からなかったので教えてください。 ■例題word_count.rb 1:# 単語数のカウント 2: 3: count = Hash.new(0) 4: 5:## 単語の集計 6:while line = gets 7: words = line.split 8: words.each{|word| 9: count[word] += 1 10: } 11:end 12: 13:## 結果の出力 14:count.sort{|a,b| 15: a[1] <=> b[1] 16:}.each{|key, value| 17: print "#{key}: #{value}\n" 18} ■疑問1. 解説には、 # 3行目で出現回数を記録するハッシュcountを作ります。 # countは、キーが単語、値がその単語が出現した回数を表します。 と書かれているのですが、「キーが単語、値がその単語が出現した回数を表します」 の内容が理解できません。newしただけなのに、どうして、 キーと値の内容が決まるのでしょうか？ ■疑問2. 解説には、 # 8行目からの繰り返しでは、それぞれの単語をキーにして、countから出現回数を取り出し、 # ＋1します。 と書かれているのですが、「count[word] += 1」 の内容が理解できません。 作成したハッシュcountと、getsメソッドで読み込み単語単位に分割した配列wordsとが、 どこで関連付けされているのかが、分かりません。 ■疑問3. 解説には、 # ruby word_count.rb README という形で、Rubyに同梱されているREADMEファイルの単語数を調べた 実行結果が掲載されているのですが、 そのときの具体的な処理の流れが分かりません。 「ruby word_count.rb README」と書くだけで、 処理の流れが、getsの所まできたとき、 自動的に指定ファイル名を判断し、 読み込みを始めるということなのでしょうか。
Ruby認定試験対策問題をやっていたら分からないところがあったので、 教えてください。 2.4.演算子 ■問題 次の各行を独立して実行した場合、エラーとなる行があった。エラーとなった行について正しく述べているのはどれか。 A: 1 << 1 B: 1 << 1.0 C: 1.0 << 1 D: 1.0 << 1.0 ■回答 正解は(1)「C行, D行がエラーとなった。」 ■解説 Float には、<< 演算子が定義されていません。また、Integer型に、<< 演算子の引数として、浮動小数点を渡しても、引数は自動的にInteger型に変換され、正しく処理されます。 とあるのですが、問題の意味、なぜ回答が(1)になるか、また、解説の「Integer型に、<< 演算子の引数として、浮動小数点を渡しても」がどの部分を指すのかが分かりません。 自分が調べた限りでは、 << はIntegerクラスのメソッド(シフト演算子)で、ビットを左にシフトするものということだけなのですが……。 この場合、問題の主旨は、例えば「Aだと、1 を 1 ビット左にシフトする」、「Bだと、1 を 1.0 ビット左にシフトする」、「Cだと、1.0 を 1 ビット左にシフトする」という意味なのでしょうか。 また、演算子の引数というのは、<<より右側を指すのでしょうか？
たのしいRubyを買ってきて勉強しているのですが、 分からなくて躓いてきて、だんだん楽しくなくなってきたので 誰か教えてください。 ■1.P268 □パターン / ^(ABC)?$ / □文字列 "" □マッチする部分 "→←" となっているのですが、ABCが繰り返されてもいないのにマッチしている理由が分かりません。 ■2.P268 □パターン / ^(ABC)?$ / □文字列 "ABCABC" □マッチする部分 "マッチしない" となっているのですが、ABCが繰り返されてもいるのにマッチしない理由が分かりません。 ■3.P272 □パターン / (ドット)(/d/d)+(ドット) /=~ "123456" p $1 # => "1" p $2 # => "45" p $3 # => "6" となっているのですが、p $2 # => "45"と書かれている理由が分かりません。（p $2 #= > "23"だと思うのですが…） ■4.P272 □パターン /(ドット)(?:/d/d)+(ドット)/ =~ "123456" p $1 # => "1" p $2 # => "6" となっています。しかし、p $2 は、(ドット)(?:/d/d)+(ドット)/ の部分を指すのだと思っているのですが、何がどうなっているのかさっぱり分かりません。
以下のようなクラス拡張をしてみました。 Class String def count_word Array.new(ary) ary = self.split(/\s/) return ary.size end end ここで、Array.new()のところでエラーになってしまいます。 感覚的に配列で受け取るようにするべきだと思っていたの ですが、この１行を外すと正常に動きます。 なぜ配列を生成するのがまずいのでしょうか？
以下のような単純なプログラムなのですが、 p (1..10).find {|n| n > 3} 実行するとWARNINGが表示されてしまいます。 $ ruby -v test.rb ruby 1.8.4 (2005-12-24) [i386-cygwin] test.rb:2: warning: (...) interpreted as grouped expression 4 「interpreted as grouped expression」のエラーは何を意味するのでしょうか。
以下のサイトからAptanaをダウンロードしようとしましたが、 白枠の中のすべてのリンクがなぜかクリックできません。 http://www.aptana.com/ 外枠のグレー部分はクリック可能です。 何かＩＥの設定でしょうか、つい２週間前はＤＬできたのですが。 WindowsXP＋SP３＋IE6で、ＤＬできずにおります。
どなたかご教授下さい。 外部ファイルへ任意の文字列を書き込むプログラムをつくりたいのですがうまく行きません。具体的には ↓↓↓ filenameA = "kakikomi.txt" (中略) def final_file_out(*m) fw = open(filenameA, "a") fw.write(*m) fw.close end ↑↑↑ とやっているのですが、これだと undefined local variable or method `filenameA' for main と出てしまいます。文字列の使い方が悪いのは分かっているのですが どうしたらよいのか分かりません。どなたか分かる方助けて頂けないでしょうか。よろしくお願いします。
標記エラーは型が異なるためのエラーであると思うのですが、うまく処理できません。エラーをなくすには、修正が必要なのでしょうか。 ・環境 ruby1.8.4 ・比較対象元値 p records[60] -> "0123456789" -> CSVより読み込んだ値、split(/,/)にて配列処理。 ・比較部分 dialed_num = $1.to_s records[60] =~ dialed_num while ARGV[0] =~ /^-/ when /^-D(\d+)/ ; dialed_num = $1.to_s end $ ruby -v check.rb -D0123456789 test.txt -> :in `=~': type mismatch: String given (TypeError)
お世話になります。前任者の作成したプログラムを読んでいるのですが、以下の部分が分からない為、ご教示頂ける方がいらっしゃれば、ご協力よろしくお願いいたします。 ＜エラーメッセージ表示部＞ def usage STDERR.print "\nusage: #$0 [-F/D] [-START/STOP] Filename \n" exit 1 end ＜オプション処理部＞ while ARGV[0] =~ /^-/ case ARGV.shift when /^-F(\d+)/ ; calling_num = $1.to_s when /^-T(\d+)/ ; called_num = $1.to_s when /^-START/ ; start_only = true when /^-STOP/ ; stop_only =true else ; usage end end 上記の $1へ値を渡すためには、コマンド入力時に特別な引数を渡す方法が必要なのでしょうか。 $ ruby -v check.rb -STOP Filename ⇒ 正常終了 $ ruby -v check.rb -F 012345678 Filename ⇒ STDERR.print 表示
今まではJavaを主に使っていたのですが、最近Rubyを使い始めた者です。 rescue節で例外を捕捉し、例外が発生した状況などの補足情報を新しい例外オブジェクトに付加して、より抽象度の高い例外として再スローしたいと思っています。 しかし困ったことに、Rubyの例外クラスでは、JavaのExceptionクラスのようにcauseを引数に渡して例外オブジェクトを生成することはできないようです。 Rubyではこのような場合、どのような方法で例外の情報を新しい例外オブジェクトに引き継ぐのが一般的なのでしょうか？ よろしくお願いいたします。
RubyでPostgresを呼び出したいのですが、ruby-postgresのインストールに何とか成功し（回答して下さった方、本当にありがとうございました）、libpq.dllをC:/WINDOWS下に置いたのですが、簡単なサンプルプログラムを読み込もうとすると下記のようなエラーが別ウィンドウで出ます。 プロシージャエントリポイントPQclientEncodingがダイナミックライブラリlibpq.dllから見つかりませんでした。 何せコンピュータについては素人なので、このエラーの対処法がわかる方がいらっしゃれば、詳しくご指導して頂けると幸いです。 宜しくお願い致します。
どなたか助けて頂けないでしょうか? 任意の文字列から最初に登場する空白文字の位置を返すプログラムを作りたいのですがうまくいきません。例えば "stream line"という文字列を対象にするとして、 m = "stream line" for i in 0..m.length if m[i] == 32 ; puts i break end end とやって実行すると 6 と返って来てくれるのですが、これをdefで関数にしようとすると失敗してしまいます。自分が組んだのは def findspase(*m) for i in 0..m.length if m[i] == 32 ; puts i break end end end findspase("stream line") のようにしましたが、実行すると何も返ってきません。何がよくないのでしょうか? もし分かる方がいっらしゃいましたら是非ご教授下さい。
ruby-postgresをインストールしたいのですが、うまくいきません。 コマンドプロンプト上で >gem install ruby-postgres と入力したのですが、 ERROR: While executing gem ... (RuntimeError) ERROR: Failed to build gem native extension. Gem files will remain installed in c:/ruby/lib/ruby/gems/1.8/gems/ruby-postgres- 0.7.1.2005.11.23 for inspection. というエラーメッセージが出てしまいます。 また、 Results logged to c:/ruby/lib/ruby/gems/1.8/gems/ruby-postgres-0.7.1.2005.11.23/gem_make.out と書いてあったのでログも確認しましたが、 このファイルには何も書かれていませんでした。 どなたか、ruby-postgresのインストール方法を知っている方いらっしゃれば、教えて頂けると嬉しいです。 宜しくお願い致します。
Ruby On Railsについて質問です。 環境はRails2.1でWEB開発を行っていますが 特に設定を変えずにセッションでデータを保持するとそれはクッキーに書かれるのでしょうか？ またセッションがクッキーに保持されるのであればセッションをアプリケーションサーバに 保持させたいです。その方法を教えて貰えないでしょうか？
クラス名の後ろに「：：」コロンが2つくっ付いたのをよく見かけます これっていったい何なのでしょうか？ Javaとか見ているとClassName#methodっていうのは見ます これと同じような意味なのでしょうか？
VB2005 の初心者です。 Aシステム（Windows上でVB2005で開発）からBシステム（Linux上で動作）にアクセスする通信部分を開発しています。 BシステムはDBが２重化されており、ミドルウェアが主サーバと従サーバの同期を取っています。 このミドルウェアにアクセスするためのインターフェースとして、rubyおよびjavaが提供されています。 このインターフェースと外部アプリとは、TCPソケット通信で接続しますが、手順は下記のとおりとなります。 1.認証確認 2.DBOPEN 3.トランザクションスタート 4.DB検索・更新・追加・削除 5.トランザクションエンド 6.DBCLOSE ★★下記がサンプルになります★★ <バージョン番号> <ユーザID> <パスワード> <type>\n 1.2.1 ormaster jmarcpt stringe\n server = DB_Server.new("192.168.1.51",0,"ormaster","jmarcpt"); Exec: DBOPEN\n \n rc = server.dbops("DBOPEN"); Exec: DBSTART\n \n rc = server.dbops("DBSTART"); tbl_wksryact[HOSPID] = 'JPN0000000000001'; tbl_wksryact[PTID] = '0000000170'; rc = server.recordops("DBSELECT","tbl_wksryact","dbs",tbl_wksryact); server.recordops("DBFETCH","tbl_wksryact","dbs",tbl_wksryact); tbl_wksryact[SRYKA] = '10'; server.recordops("DBUPDATE","tbl_wksryact","dbs",tbl_wksryact); Exec: DBCOMMIT\n \n rc = server.dbops("DBCOMMIT"); Exec: DBDISCONECT\n \n End\n rc = server.dbops("DBDISCONNECT"); server.close; AシステムはVB2005で開発しているのですが、VB2005のソースにrubyを組み込むことはできるものなのでしょうか。 rubyに対する知識がないため、初歩的な質問となってしまいましたが、ヒントになるようなことでも良いのでご教授いただければ幸いです。 よろしくお願い致します。
いつもお世話になっています。 クラスファイルを違う階層にした時にうまくアクセスできなくて困っています 例えば test/hoge.rbの中に定数HOGEがある場合、どうアクセスすればいいですか？ よろしくお願いします
記念すべきrubyの最初の質問としてふさわしい質問にしたいと思っております。 rubyのバージョンが1.9になりました。1.9が処理速度のアップを図るべく、根本的にrubyのアーキテクチャーを変えているようですが、パフォーマンスは、どの位向上したのでしょうか。また、今後、もっと向上する余地はあるのでしょうか。 もし、実測等をおこなわれた方がおりましたら是非教えて下さい。 かなり良ければ、私の環境のrubyも1.9に変更しようかなと思っています。
